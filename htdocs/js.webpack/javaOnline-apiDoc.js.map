{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../../../../src/client/compiler/lexer/Token.ts","webpack:///../../../../src/client/compiler/types/Types.ts","webpack:///../../../src/client/interpreter/RuntimeObject.ts","webpack:///../../../../src/client/compiler/parser/LabelManager.ts","webpack:///../../../../src/client/compiler/types/Class.ts","webpack:///../../../../src/client/compiler/types/Array.ts","webpack:///../../../../src/client/compiler/types/ObjectClass.ts","webpack:///../../../../../src/client/compiler/types/boxedTypes/IntegerClass.ts","webpack:///../../../../../src/client/compiler/types/boxedTypes/FloatClass.ts","webpack:///../../../../../src/client/compiler/types/boxedTypes/CharacterClass.ts","webpack:///../../../../../src/client/compiler/types/boxedTypes/BooleanClass.ts","webpack:///../../../../../src/client/compiler/types/boxedTypes/DoubleClass.ts","webpack:///../../../../src/client/compiler/types/PrimitiveTypes.ts","webpack:///../../../../src/client/runtimelibrary/collections/ListIteratorImpl.ts","webpack:///../../../../src/client/runtimelibrary/collections/ArrayList.ts","webpack:///../../../../src/client/runtimelibrary/collections/Collection.ts","webpack:///../../../../src/client/runtimelibrary/collections/Iterable.ts","webpack:///../../../../src/client/runtimelibrary/collections/Iterator.ts","webpack:///../../../../src/client/runtimelibrary/collections/List.ts","webpack:///../../../../src/client/runtimelibrary/collections/Stack.ts","webpack:///../../../../src/client/runtimelibrary/collections/Vector.ts","webpack:///../../../../src/client/runtimelibrary/collections/Set.ts","webpack:///../../../../src/client/runtimelibrary/collections/SetIteratorImpl.ts","webpack:///../../../../src/client/runtimelibrary/collections/SetHelper.ts","webpack:///../../../../src/client/runtimelibrary/collections/HashSet.ts","webpack:///../../../../src/client/runtimelibrary/collections/LinkedHashSet.ts","webpack:///../../../../src/client/runtimelibrary/collections/Queue.ts","webpack:///../../../../src/client/runtimelibrary/collections/Deque.ts","webpack:///../../../../src/client/runtimelibrary/collections/LinkedList.ts","webpack:///../../../src/client/runtimelibrary/Console.ts","webpack:///../../../../src/client/compiler/types/Enum.ts","webpack:///../../../src/client/communication/AjaxHelper.ts","webpack:///../../../src/client/communication/NetworkManager.ts","webpack:///../../../../src/client/compiler/lexer/Lexer.ts","webpack:///../../../../src/client/compiler/parser/SymbolTable.ts","webpack:///../../../src/client/runtimelibrary/Input.ts","webpack:///../../../../src/client/compiler/parser/CodeGenerator.ts","webpack:///../../../../src/client/compiler/parser/Parser.ts","webpack:///../../../src/client/tools/StringTools.ts","webpack:///../../../src/client/tools/HtmlTools.ts","webpack:///../../../src/client/tools/SoundTools.ts","webpack:///../../../../src/client/main/gui/MyJava.ts","webpack:///../../../../src/client/compiler/types/DeclarationHelper.ts","webpack:///../../../../src/client/main/gui/MyHoverProvider.ts","webpack:///../../../../../src/client/main/gui/diagrams/ZoomControl.ts","webpack:///../../../../../src/client/main/gui/diagrams/Diagram.ts","webpack:///../../../../../src/client/main/gui/diagrams/DiagramElement.ts","webpack:///../../../../../../src/client/main/gui/diagrams/classdiagram/ArrowHead.ts","webpack:///../../../../../../src/client/main/gui/diagrams/classdiagram/DiagramArrow.ts","webpack:///../../../src/client/embedded/MainEmbedded.ts","webpack:///../../../src/client/compiler/Compiler.ts","webpack:///../../../src/client/tools/KeyboardTool.ts","webpack:///../../../src/client/interpreter/Interpreter.ts","webpack:///../../../../src/client/runtimelibrary/graphics/ColorHelper.ts","webpack:///../../../../src/client/runtimelibrary/graphics/World.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Actor.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Alignment.ts","webpack:///../../../src/client/tools/MatheTools.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Shape.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Bitmap.ts","webpack:///../../../../src/client/runtimelibrary/graphics/FilledShape.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Circle.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Color.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Ellipse.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Group.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Key.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Polygon.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Rectangle.ts","webpack:///../../../../src/client/runtimelibrary/graphics/RepeatType.ts","webpack:///../../../../src/client/runtimelibrary/graphics/RoundedRectangle.ts","webpack:///../../../../src/client/runtimelibrary/graphics/ScaleMode.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Sound.ts","webpack:///../../../../src/client/runtimelibrary/graphics/PolygonStore.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Sprite.ts","webpack:///../../../../src/client/runtimelibrary/graphics/SpriteLibraryEnum.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Text.ts","webpack:///../../../src/client/runtimelibrary/Math.ts","webpack:///../../../src/client/runtimelibrary/System.ts","webpack:///../../../src/client/runtimelibrary/SystemTools.ts","webpack:///../../../src/client/runtimelibrary/Timer.ts","webpack:///../../../../src/client/runtimelibrary/collections/Map.ts","webpack:///../../../../src/client/runtimelibrary/collections/MapHelper.ts","webpack:///../../../../src/client/runtimelibrary/collections/HashMap.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Triangle.ts","webpack:///../../../../src/client/runtimelibrary/graphics/LocalDateTime.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Line.ts","webpack:///../../../src/client/runtimelibrary/Vector2.ts","webpack:///../../../../src/client/runtimelibrary/graphics/MouseListener.ts","webpack:///../../../../src/client/runtimelibrary/network/WebSocketClient.ts","webpack:///../../../../src/client/runtimelibrary/network/WebSocket.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Processing.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Turtle.ts","webpack:///../../../../src/client/compiler/parser/Module.ts","webpack:///../../../src/client/help/ApiDoc.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","TokenType","TokenTypeReadable","identifier","integerConstant","floatingPointConstant","booleanConstant","stringConstant","charConstant","true","false","keywordClass","keywordThis","keywordSuper","keywordNew","keywordInterface","keywordEnum","keywordVoid","keywordAbstract","keywordPublic","keywordProtected","keywordPrivate","keywordTransient","keywordStatic","keywordExtends","keywordImplements","keywordWhile","keywordDo","keywordFor","keywordSwitch","keywordCase","keywordDefault","keywordIf","keywordThen","keywordElse","keywordReturn","keywordBreak","keywordContinue","keywordNull","keywordFinal","keywordInstanceof","keywordPrint","keywordPrintln","leftBracket","rightBracket","leftSquareBracket","rightSquareBracket","leftCurlyBracket","rightCurlyBracket","leftRightSquareBracket","dot","minus","modulo","plus","multiplication","division","singleQuote","doubleQuote","doubleMinus","doublePlus","lower","greater","lowerOrEqual","greaterOrEqual","equal","notEqual","assignment","plusAssignment","minusAssignment","multiplicationAssignment","divisionAssignment","moduloAssignment","ampersand","and","or","not","ternaryOperator","semicolon","colon","ellipsis","comma","backslash","at","space","tab","newline","identifierChar","comment","endofSourcecode","linefeed","Type","onlyFirstPass","usagePositions","Map","documentation","this","PrimitiveType","initialValue","description","type","operation","secondOperandType","opTypeMap","operationTable","canCastToMap","Attribute","updateValue","isStatic","visibility","isFinal","Method","parameterlist","returnType","invokeOrAST","isAbstract","isConstructor","isVirtual","reserveStackForLocalVariables","genericTypeMap","invoke","program","method","signature","id","parameters","hasGenericTypes","length","isEllipsis","index","label","getTypeIdentifier","arrayOfType","leftBracketAlreadyThere","snippet","firstOperand","secondOperand","Parameterlist","computeId","map","tv","join","klass","intrinsicData","attributeValues","class","av","baseClass","set","attributes","att","v","Visibility","booleanPrimitiveTypeCopy","maxLabelIndex","labeledNodes","labelMap","jumpNodesToResolve","switchStatements","switchStatement","push","position","codeGenerator","labelIndex","statementList","statements","node","stepFinished","pushStatements","registerJumpNode","offset","labeledNode","indexOf","newNode","ntr","ln","noOp","jn","dest","destination","sw","destinationLabels","dl","destinationMap","constant","defaultDestination","typeVariables","isTypeVariable","typeVariablesReady","implements","firstPassImplements","postConstructorCallbacks","methods","methodMap","attributeMap","public","staticClass","attributeInitializationProgram","labelManager","k","isGenericVariantFrom","getThisOrExtendedInterface","getNonGenericIdentifier","i2","usedSystemClasses","isSystemModule","getCompositeData","cd","interf","cdMap","a","Klass","cda","multiples","clearUsagePositions","callbacks","concat","visibilityUpTo","identifierAndBracketAfterCursor","rangeToReplace","itemList","getAttributes","attribute","kind","monaco","languages","CompletionItemKind","Field","insertText","range","undefined","getMethods","getCompletionLabel","filterText","command","title","arguments","getCompletionSnippet","insertTextRules","CompletionItemInsertTextRule","InsertAsSnippet","getCompletionItems","programStack","programPosition","textPosition","line","column","callbackAfterReturn","isCalledFromOutside","addMethod","addAttribute","nullType","typeLeft","typeRight","upToVisibility","filter","baseClassUptoVisibility","protected","found","upToVisibilityInBaseClass","hasConstructor","parameterTypes","classIdentifier","constructors","getConstructor","findSuitableMethods","searchConstructor","methodList","staticMethods","getMethodsThatFitWithCasting","error","getMethod","foundButInvisible","attributeNotFound","baseClassAttribute","getAttribute","stringPrimitiveType","Math","min","canCastTo","dontInheritFrom","message","missingMethods","missingAbstractMethods","implementedSignatures","missingInterfaceMethods","hierarchy","abstractMethods","getSignatureWithReturnParameter","maxLength","private","getValue","debugOutput","newKlass","slice","classObject","visibilityUpToBaseClass","notFound","baseClassAttributeWithError","extends","if2","newInterface","Interface","type2","suitableMethods","howManyCastingsMax","oneWithCorrectIdentifierFound","howManyCastings","hasEllipsis","getParameterCount","suits","mParameterType","getParameterType","givenType","mParameterTypeEllispsis","getParameter","j","typeString","getVisibilityUpTo","objectType","currentClassContext","hasAncestorOrIs","lengthAttribute","intPrimitiveType","ArrayType","equals","referenceElement","array","destType","castTo","s1","unboxableAs","Number","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","initializeAttributeValues","floatPrimitiveType","doublePrimitiveType","declaration","parseInt","v0","v1","booleanPrimitiveType","sign","toString","MAX_VALUE","MIN_VALUE","NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY","parseFloat","trunc","Infinity","charPrimitiveType","charCodeAt","charAt","match","toLocaleUpperCase","toLocaleLowerCase","toLowerCase","negation","automatic","needsStatement","String","fromCharCode","stringClass","forEach","localeCompare","endsWith","startsWith","substring","trim","lastIndexOf","replace","pattern","regExp","RegExp","strings","split","values","voidPrimitiveType","varType","IntegerType","FloatType","DoubleType","CharacterType","BooleanType","TokenTypeToDataTypeMap","typeStore","getType","setBaseClass","typeE","clone","tvE","scopeFrom","scopeTo","iteratorInterface","hasNext","next","remove","listHelper","interpreter","rt","IteratorHelper","nextPos","objectArray","throwException","valueArray","splice","typeA","tvA","listInterface","iteratorType","ah","main","getInterpreter","getIterator","add","adAll","clear","contains","removeObject","isEmpty","size","to_String","runtimeObject","allElementsPrimitive","pushConstant","dataType","toStringParameters","callMethod","isSuperCall","stackframeBegin","binaryOp","operator","leftType","return","copyReturnValueToStackframePos0","leaveThisObjectOnStack","methodWasInjected","runTimer","pop","iterableInterface","collectionInterface","vectorType","peek","MapHelper","SetIteratorHelper","console","log","ret","addToSet","delete","setInterface","mh","QueueInterface","dequeInterface","removeFirst_or_error","poll_or_null","peek_or_null","removeFirstOccurrence","addFirst","addLast","removeLast_or_error","peek_first_or_null","peek_last_or_null","getBottomDiv","$consoleTab","find","append","EnumRuntimeObject","en","enumValue","enumValueNodes","enumInfoList","identifierToInfoMap","indexToInfoMap","valueList","evn","ev","ordinal","ei","that","vi","valueIdentifier","enumInfo","enumObject","ajax","url","request","successCallback","errorCallback","showNetworkBusy","$","async","data","JSON","stringify","contentType","success","response","location","reload","jqXHR","statusText","status","busy","jQuery","show","hide","LexerState","parentSymbolTable","positionFrom","positionTo","SymbolTable","maxId","beginsNewStackframe","childSymbolTables","variableMap","classContext","parent","imitation","st","maxStackPos","variable","stackPos","stackframeSize","completionItems","Snippet","Variable","getLocalVariableCompletionItems","containsPosition","shortestSymbolTableContainingPosition","shortestPosition","st1","findTableAtPosition","initStackFrameNodes","moduleStore","symbolTable","heap","symbolTableStack","currentSymbolTable","oldStackframeSize","nextFreeRelativeStackPos","currentProgram","errorList","breakNodeStack","continueNodeStack","generateMain","tokenList","lastToken","mainSymbolTable","generateClasses","lookForStaticVoidMain","errors","mainProgram","mainMethod","classDefinitionsAST","classNode","ct","resolvedType","pt","pushError","initCurrentProgram","callMainMethod","closeStackframe","generateClass","generateEnum","checkDoubleMethodDeclaration","enumNode","pushNewSymbolTable","enumClass","initialization","initializeAttribute","lastStatement","resolveNodes","methodNode","compileMethod","popSymbolTable","enumValueNode","constructorParameters","pushEnumValue","processEnumConstructorCall","commaPositions","rightBracketPosition","programEnd","constructorCallProgram","parameterNodes","typeNode","processNode","pushMethodCallPosition","isAssignable","srcType","getCastInformation","castValue","newType","stackPosRelative","inheritanceError","checkInheritance","getInheritanceQuickFix","cie","signatureMap","cieType","editsProvider","uri","resource","edit","startLineNumber","startColumn","endLineNumber","endColumn","text","checkIfMethodIsVirtual","getParameterList","scopeNode","stm","superConstructorCall","quickFix","methodCall","severity","MarkerSeverity","Error","actorClass","returnIfDestroyed","generateStatements","withReturnStatement","getReturnType","getModules","mo","typeList","pushStaticAttribute","attributeIdentifier","pushAttribute","useThisObject","initializationType","ensureAutomaticCasting","attributeType","leaveValueOnStack","isAdhocCompilation","mainProgramAst","hasMainProgram","decreaseStackpointer","removeLastStatement","lastPosition","mainProgramEnd","pauseAfterProgramEnd","typeFrom","typeTo","nodeFrom","checkIfAssignmentInstedOfEqual","toStringStatement","getToStringStatement","castInfo","toStringMethod","getMethodBySignature","pos","nodes","endPosition","processStatementsInsideBlock","lastNode","assign","popCount","Array","isArray","statement","deleteStepFinishedFlagOnStepBefore","stepBefore","jumpAlways","lst","removeNode","beginNewStackframe","initStackFrameNode","initStackframe","reserveForLocalVariables","declarationError","usedBeforeInitialization","initStackframeNode","jumpIfTrue","jumpIfFalse","jumpIfFalseAndLeaveOnStack","jumpIfTrueAndLeaveOnStack","errorLevel","level","breakNode","continueNode","breakTargetLabel","lm","breakNodes","bn","continueTargetLabel","continueNodes","isLeftSideOfAssignment","processBinaryOp","unaryOp","processUnaryOp","stackType","resolveIdentifier","initialized","selectArrayElement","incrementDecrementBefore","incrementDecrementAfter","incrementDecrementBeforeOrAfter","superconstructorCall","pushThisOrSuper","newObject","processWhile","processDo","processFor","forLoopOverCollection","processForLoopOverCollection","processIf","processSwitch","processReturn","localVariableDeclaration","arrayInitialization","processArrayLiteral","newArray","processNewArray","processPrint","processManualCast","pushBreakNode","pushContinueNode","termInsideBrackets","pushTypePosition","typeFrom1","whatToCast","castToType","checkCast","print","println","withColor","color","empty","dimension","elementCount","ec","pushEmptyArray","arrayType","bes","beginArray","ain","sType","targetType","addToArray","numberOfElementsToAdd","dontWarnWhenNoInitialization","variableType","declareVariableOnHeap","pushUsagePosition","heapVariableDeclaration","pushOnTopOfStackForInitialization","initType","initializer","term","condition","conditionType","isString","isEnum","switchType","endLabel","insertJumpNode","registerSwitchStatement","openBreakScope","caseNodes","caseNode","caseTerm","markJumpDestination","info","ls","getOrdinal","closeBreakScope","endOfIf","withReturnStatementElse","beginElse","withReturnStatementIf","statementsIfTrue","statementsIfFalse","statementsBefore","labelBeforeCondition","labelAfterForLoop","openContinueScope","continueLabelIndex","closeContinueScope","statementsAfter","stackPosForCollection","collection","collectionElementType","collectionType","popAndStoreIntoVariable","stackposOfVariable","getImplementedInterface","noCastingNeeded","variableIdentifier","variablePosition","variableStackPos","stackPosOfCounterVariableOrIterator","extendedForLoopInit","stackPosOfCollection","stackPosOfElement","typeOfElement","stackPosOfCounter","pushLocalVariableToStack","lastStatementBeforeCasting","jumpNode","extendedForLoopCheckCounterAndGetElement","oldStatementCount","conditionBeginLabel","afterWhileStatementLabel","statementsBeginLabel","classType","newStatement","subsequentConstructorCall","parameterStatements","allStatements","constructorOperands","programPointer","staticClassContext","stackframeDelta","ellipsisParameterCount","makeEllipsisArray","parameterCount","getPostConstructorCallbacks","processPostConstructorCallbacks","ot","attributeWithError","staticAttributeWithError","pushArrayLength","element","addIdentifierPosition","isSuper","methodContext","superclassType","operands","errorInOperands","operand","incrementDecrementBy","indexType","positionList","findLocalVariable","pushFromHeapToStack","findAttribute","cc","scc","klassModule","pushStaticClassObject","staticAttribute","objectNode","thisClass","posBeforeParameterEvaluation","insertStatements","visible","callInputMethod","constantType","isAssignment","CodeGenerator","assignmentOperators","processTernaryOperator","programPosAfterLeftOpoerand","lazyEvaluationDest","rightType","resultType","getResultType","unboxableLeft","unboxableRight","leftTypes","rightTypes","lt","variantFalseLabel","firstType","secondType","isInConsoleMode","lookahead","endToken","tt","tokensNotAfterCasting","typeNodes","initializeLookahead","astNodes","parseMain","mainProgramAST","classDefinitionAST","token","token1","lastComment","commentBefore","cct","skip","invokeSemicolonAngel","isOperatorOrDot","getSemicolonAngel","register","nextToken","Parser","operatorPrecedence","op","getCurrentPosition","classDefinitions","isEnd","oldPos","comesToken","BeforeClassDefinitionTokens","parseClassDefinition","parseStatement","expectSemicolon","retStatements","parseVariableDeclarationOrTerm","expect","parseWhile","parseFor","parseDo","parseIf","parseReturn","parsePrint","parseSwitch","position1","dontSkip","retStmt","checkIfStatementHasNoEffekt","parseTerm","semicolonPositions","parseForLoopOverCollection","parseType","variableIdentifierPosition","mcp","parseMethodCallParameters","paramenters","switchTerm","switchNode","defaultAlreadyThere","casePosition","isDefault","switchCaseNode","getEndOfCurrentToken","elseStatements","comesGenericType","vd","parseVariableDeclaration","parseTermBinary","precedence","left","parsePlusPlusMinusMinus","operators","first","opData","position2","wrong","right","correctOp","constantFolding","isConstant","pcLeft","pcRight","result","compute","toTokenType","parseUnary","parseDotOrArrayChains","bracketOrCasting","tt1","pcTerm","typeTerm","parseNew","isStringConstant","identifier1","identifierPosition","genericParameterTypes","typenode","arrayDimension","parseArrayLiteral","newDimension","al","parameter","positionEnd","modifiers","collectModifiers","ClassTokens","typeParameters","parseTypeParameterDefinition","extendsImplements","parseExtendsImplements","parseEnum","methodsAndAttributes","parseClassBody","identifierMap","tp","typeParameter","parseTypeParameterBounds","im","parseEnumValues","className","annotation","parseMethodDeclarationParameters","methodDeclaration","isTransient","attributeDeclaration","parameterDeclaration","parameterType","isInterface","sextends","simplements","done","TokenTypeToVisibilityMap","forwardToInsideClass","VisibilityTokens","stringWrap","formatAsJavadocComment","indent","indentString","convertPxToNumber","pxString","SoundTools","sounds","sound","player","Howl","src","preload","soundMap","play","defineMyJava","extensions","conf","indentationRules","decreaseIndentPattern","increaseIndentPattern","onEnterRules","beforeText","afterText","action","indentAction","IndentAction","IndentOutdent","appendText","None","removeText","wordPattern","comments","lineComment","blockComment","brackets","autoClosingPairs","open","close","surroundingPairs","folding","markers","start","end","setLanguageConfiguration","setMonarchTokensProvider","defaultToken","tokenPostfix","keywords","types","symbols","escapes","digits","octaldigits","binarydigits","hexdigits","tokenizer","root","cases","include","whitespace","javadoc","string","getDeclarationAsString","short","getTypeVariableDeclaration","getGenericParameterDefinition","decl","implList","impl","editor","model","selection","getSelection","lineNumber","getCurrentWorkspace","getModuleByMonacoModel","getElementAtPosition","declarationAsString","contents","typeIdentifier","word","getWordUnderCursor","desc","MyHoverProvider","keywordDescriptions","state","InterpreterState","paused","evaluator","widenDeclaration","evaluate","getValueLengthInRange","isInsideIdentifierOrArrayDescriptor","begin","isInsideOperator","isInsideIdentifierChain","$parentElement","callback","gripHeight","overallHeight","zoomMin","zoomMax","$zoomcontrolOuter","mousedownY","oldPosition","$zoomcontrolBar","$grip","$zoomcontrolDisplay","css","yMax","on","e","y","pageY","top","setZoom","trigger","clientY","document","deltaY","off","stopPropagation","ZoomControl","preventFading","fadeIn","fadeOut","factor","newPosition","zoomfactor","zfs","round","html","Alignment","leftCm","topCm","lines","backgroundColor","width","widthCm","height","heightCm","$element","detach","xCm","yCm","withRaster","adjustToRaster","x","move","createElementNS","attr","appendChild","createElement","font","fill","textElement","bbox","getBBox","DiagramElement","cmPerPx","alignment","bold","italics","$group","addClass","$rect","textPosYCm","maxWidthCm","createTextElement","center","onClick","event","metrics","getTextMetrics","textHeightCm","textWidthCm","max","tooltip","thicknessCm","textCenter","textRight","stroke","x1","y1","x2","y2","position1Cm","position2Cm","dx","dy","sqrt","path","ex","ey","arrow","arrows","steps","step","angle","PI","ex1","cos","sin","ey1","f","rauteAlpha","routingArrow","DiagramArrow","points","minimalPoints","getPathCoordinates","arrowData","arrowType","endsOnArrowWithIdentifier","head","makeHead","point","CompilerStatus","ColorHelper","alpha","predefinedColors","m2","substr","m3","m1","groupType","mouseListenerType","breite","höhe","gh","getWorldHelper","setBackgroundColor","wh","matrix","PIXI","Matrix","copyFrom","stage","localTransform","identity","translate","prepend","transform","onChange","rotate","scale","initialWidth","initialHeight","group","defaultGroup","listener","addMouseListener","cursor","setCursor","worldObject","worldHelper","ratio","$containerOuter","getRightDiv","adjustWidthToWorld","world","actActors","keyPressedActors","keyUpActors","keyDownActors","actorHelpersToDestroy","mouseListenerShapes","mouseListeners","actorsFinished","summedDelta","scaledTextures","actorsNotFinished","ticks","deltaSum","spriteAnimations","settings","SCALE_MODE","SCALE_MODES","NEAREST","processingHelper","$graphicsDiv","printManager","getGraphicsDiv","$jo_tabs","parents","maxWidth","maxHeight","$containerInner","oncontextmenu","preventDefault","TARGET_FPMS","app","Application","antialias","tickerFunction","delta","tick","Ticker","shared","elapsedMS","ticker","maxFPS","timerExtern","Container","addChild","view","keyboardTool","keyPressedCallbacks","kpa","runActorWhenKeyEvent","keyUpCallbacks","keyDownCallbacks","listenerType","offsetX","offsetY","Point","applyInverse","onMouseEvent","button","invokeMouseListener","running","actorData","actorHelper","timerPaused","isDestroyed","runActor","not_initialized","clearActorLists","timerFunction","timerStopped","actorList","shapeHelper","displayObject","destroy","parseColorToOpenGL","renderer","rto","stackElements","containsPoint","trackMouseMove","invokeShapeMouseListener","mouseLastSeenInsideObject","reactToMouseEventsWhenInvisible","sd","methodSignatures","actorListIdentifier","ms","isKeyDown","setTimerPaused","w","getModule","isPressed","abstand","p1","p2","polygonEnthältPunkt","punkte","punkt","inside","vertexCount","polygonBerührtPolygon","punkte1","punkte2","shapeType","helper","getCenterX","getCenterY","sh","testdestroyed","angleInDeg","centerX","centerY","isOutsideView","shape","sh1","collidesWith","angleDeg","setVisible","tint","react","getCopy","bringToFront","sendToBack","hitPolygonInitial","hitPolygonTransformed","hitPolygonDirty","centerXInitial","centerYInitial","setHitPolygonDirty","updateTransform","dirty","container","highestIndex","children","setChildIndex","render","bb","getBounds","bb1","bottom","transformHitPolygon","worldTransform","apply","tx","b","ty","bounds","screen","cX","cY","belongsToGroup","groupHelper","collidingShapes","shapes","colorType","pointsX","pointsY","rh","getFarbeAsObject","setzeFarbe","istFarbe","fillAll","anzahlX","anzahlY","addToDefaultGroup","ro","bh","BitmapHelper","colorArray","colorBuffer","update","initGraphics","vertexArray","Float32Array","vertexIndexArray","Int32Array","xStep","yStep","vertexBuffer","Buffer","VertexIndexBuffer","geometry","Geometry","addIndex","shader","Shader","from","Mesh","DRAW_MODES","TRIANGLES","g","red","green","blue","hex","intColorToHexRGB","ch","r1","g1","b1","abs","fillColor","borderColor","borderWidth","setAlpha","fillAlpha","setFillColor","setBorderColor","setBorderWidth","rgb","borderAlpha","fsh","mx","my","setRadius","deltaAlpha","CircleHelper","Graphics","beginFill","lineStyle","drawCircle","closePath","endFill","colorName","intColor","intColorToRGB","floor","random","z","o1","d1","rx","ry","setRadiusX","setRadiusY","EllipseHelper","drawEllipse","collisionPairType","collisionPairArrayType","getElement","removeElementAt","shapeArrayType","getCollidingObjects","group2","maxOneCollisionPerShape","groupHelper2","getCollidingObjects2","getCollidingShapes","groupHelperCopy","GroupHelper","roCopy","shapeHelperCopy","inverse","invert","xSum","ySum","removeChildAt","inverseStageTransform","collisionPairs","alreadyCollidedHelpers2","shapeHelper1","shapeHelper2","closeAndFill","pointsNumber","ph","addPoint","PolygonHelper","moveTo","lineTo","RectangleHelper","radius","addCenterCircle","RoundedRectangleHelper","midx","midy","angleStart","dw","drawRoundedRect","spriteHelper","sprite","polygon","HitPolygonStore","polygonStore","getPolygon","pixels","plugins","extract","h","probes","addPointsOnLine","additionalPointsPerHalfBorder","mid","probe","fx","fy","isTransparent","scaleModeClass","spriteLibraryEntry","scaleMode","setTexture","textureName","indexArray","repeatType","imagesPerSecond","indices","playAnimation","fromIndex","toIndex","stopAnimation","pauseAnimation","resumeAnimation","animationIndices","animationRuns","imagesPerMillisecond","animationTime","animationPaused","SpriteHelper","prefix","window","javaOnlineDir","sheet","Loader","resources","nameWithIndex","texture","textures","Sprite","dynamicTexture1","RenderTexture","getPolygonForTexture","setInvisible","spriteHelperList","deltaTime","image","period2","numberOfPeriodsDone","timeIntoPeriod","period","SpriteLibrary","sle","fontsize","setFontsize","setAlignment","setText","getWidth","getHeight","textStyle","TextStyle","fontFamily","fontSize","fontStyle","fontWeight","strokeThickness","dropShadow","wordWrap","align","TextHelper","Text","anchor","style","tm","TextMetrics","measureText","E","ceil","pow","exp","log10","tan","asin","acos","atan","atan2","deltaTimeMillis","printStream","Date","now","timerEntries","timerRunning","tl","dt","timerEntry","timerListener","lastTimeFired","processTimerEntries","performance","timerentry","runEntry","setTimeout","typeK","tvK","typeV","tvV","keyArray","old","containsKey","containsValue","dayOfWeekType","MonthType","date","year","month","dayOfMonth","hour","minute","second","days","oldDate","newDate","getTime","oldMs","newMs","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","td","dow","getDay","monthIndex","setPoint","setPoints","valueMap","alphaDeg","valueMap1","oRet","valueMapRet","messageType","send","setUserData","getUserData","help","WebSocketClientHelper","webSocketHelper","rufname","familienname","username","nickname","keyValueStore","connected","sendToClient","webSocketClientType","systemClassType","sessionCode","nickName","connect","sendToAll","count","findClientsFromCount","nicknames","nnv","findClientsFromNicknames","disconnect","clientList","idToClientMap","isOpen","unsentMessages","onOpenMethod","onCloseMethod","onMessageMethod","onClientConnectedMethod","onClientDisconnectedMethod","onClientsFoundMethod","isEmbedded","protocol","host","connection","WebSocket","onerror","onError","onclose","onClose","onmessage","onMessage","onopen","webSocketsToCloseAfterProgramHalt","sendIntern","onOpen","exception","runMethod","clientId","recipient_id","wtr","parse","clientRuntimeObject","wch","user_id","clientHelper","from_client_id","clientHelper1","disconnecting_client_id","currentTimeMills","client_id","onClientsFound","own_index","otherClients","clients","client","otherClient","arrayValue","waitingForInput","executeImmediatelyInNewStackframe","p5o","getProcessingHelper","currentProgramPosition","loop","noLoop","createCanvas","addProcessingMethod","parameterNames","pList","processingObject","loopStopped","onSizeChanged","$div","setupProcessing","drawMethodPending","p5","setup","P2D","afterFinishingBoth","draw","mousePressed","mouseReleased","mouseClicked","mouseDragged","mouseEntered","mouseExited","mouseMoved","keyPressed","keyReleased","methodIdentifier","showTurtle","forward","turn","setShowTurtle","xStart","yStart","lineElements","isFilled","initialHitPolygonDirty","lineWidth","calculateCenter","lineGraphic","turtle","drawTurtle","lastLineElement","angleInDegrees","cx","cy","TurtleHelper","newLineElement","vx","vy","vxp","vyp","firstPoint","le","setupInitialHitPolygon","file","oldErrorDecorations","breakpoints","breakpointDecorators","decoratorIdToBreakpointMap","identifierPositions","methodCallPositions","uriCounter","Module","uriMap","Uri","scheme","createModel","updateOptions","tabSize","lastSavedVersionId","getAlternativeVersionId","onDidChangeContent","versionId","saved","identical_to_repository_version","main1","workspacesOwnerId","user","text_before_revision","student_edited_after_revision","networkManager","sendUpdates","bottomDiv","homeworkManager","showHomeWorkRevisionButton","projectExplorer","renderHomeworkButton","methodAST","workspace","submitted_date","version","is_copy_of_id","repository_file_version","workspace_id","forceUpdate","possibleMethods","cp","mcpList","rerender","getBreakpointPositionsFromEditor","getBreakpoint","setBreakpoint","renderBreakpointDecorators","breakpoint","attachToStatement","programList","getPrograms","nearestStatement","nearestDistance","decorations","options","isWholeLine","overviewRuler","OverviewRulerLane","Left","minimap","MinimapPosition","Inline","marginClassName","stickiness","TrackedRangeStickiness","NeverGrowsWhenTypingAtEdges","getMonacoEditor","deltaDecorations","getModel","getAllDecorations","decoration","EndOfLinePreference","LF","positionsOnLine","foundPosition","bestFoundPosition","isStartable","dependsOnModulesWithErrors","programs","TypeStore","dependsOnModules","list","el","sort","e1","e2","errorLevelCompare","level1","level2","$buttonDiv","panelElement","$htmlFirstLine","$startButtonDiv","setModuleActive","maxUriNumber","addType","registerWorldType","typeMap","initEditor","initTypes","initClassDocumentation","defineTheme","base","inherit","rules","foreground","colors","setTheme","language","basemodule","$menuItem","showAPIHelp","$main","$caption","colorize","then","showConstructors","showMethods","showAttributes","init","require","config","paths","availableLanguages","ignoreDuplicateModules"],"mappings":"aACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QAKfF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,GAIjBlC,EAAoBA,EAAoBmC,EAAI,G,qEClFzCC,E,+HAAZ,SAAYA,GACR,+BAEA,yCACA,qDACA,yCACA,uCACA,mCACA,mBACA,qBAEA,mCACA,uCACA,oCACA,kCACA,oCACA,gCACA,4CACA,kCACA,kCACA,0CACA,sCACA,4CACA,wCACA,4CACA,sCACA,wCACA,8CACA,oCACA,8BACA,gCACA,sCACA,kCACA,wCACA,8BACA,kCACA,kCACA,sCACA,oCACA,0CACA,kCACA,oCACA,8CAQA,kCACA,oCACA,8CACA,gDACA,4CACA,8CACA,wDAGA,kCAAa,gCAGb,kBACA,wBACA,sBAAO,oBAAM,wCAAgB,4BAC7B,kCAAa,kCACb,sBAAO,0BAAS,oCAAc,wCAC9B,sBACA,4BACA,gCACA,wCACA,0CACA,4DACA,gDACA,4CACA,kBAAK,gBACL,8BACA,0CACA,sBACA,4BAEA,kBAGA,8BAGA,sBAGA,8BAGA,gBAGA,sBAEA,kBAGA,0BAGA,4BAGA,wCAGA,0BAGA,4BACA,4CAEA,0CAGA,4BACA,0BACA,4DACA,0DACA,4DACA,0DACA,kDACA,sCACA,0CACA,oCACA,sDACA,mDACA,qEACA,+BACA,+BACA,iDACA,iCACA,yCACA,2EACA,2CACA,+CACA,qDACA,yCACA,2CACA,yEACA,yBACA,+BACA,mCACA,iCACA,iEACA,+DACA,iCACA,qBACA,6DACA,2DACA,iCACA,iCACA,iCACA,yCACA,uDAGA,qBACA,uCACA,qDACA,+CACA,qDACA,qDACA,6BACA,mDACA,uBACA,2BACA,uCACA,mDACA,+BACA,+CACA,mDACA,6FAhLJ,CAAYA,MAAS,KAmLd,IAAIC,GAAiB,OACvBD,EAAUE,WAAa,kBADA,IAGvBF,EAAUG,gBAAkB,0BAHL,IAIvBH,EAAUI,sBAAwB,6BAJX,IAKvBJ,EAAUK,gBAAkB,4BALL,IAMvBL,EAAUM,eAAiB,gCANJ,IAOvBN,EAAUO,aAAe,uBAPF,IAQvBP,EAAUQ,KAAO,QARM,IASvBR,EAAUS,MAAQ,SATK,IAWvBT,EAAUU,aAAe,SAXF,IAYvBV,EAAUW,YAAc,QAZD,IAavBX,EAAUY,aAAe,SAbF,IAcvBZ,EAAUa,WAAa,OAdA,IAevBb,EAAUc,iBAAmB,aAfN,IAgBvBd,EAAUe,YAAc,QAhBD,IAiBvBf,EAAUgB,YAAc,QAjBD,IAkBvBhB,EAAUiB,gBAAkB,YAlBL,IAmBvBjB,EAAUkB,cAAgB,UAnBH,IAoBvBlB,EAAUmB,iBAAmB,aApBN,IAqBvBnB,EAAUoB,eAAiB,WArBJ,IAsBvBpB,EAAUqB,iBAAmB,aAtBN,IAuBvBrB,EAAUsB,cAAgB,UAvBH,IAwBvBtB,EAAUuB,eAAiB,WAxBJ,IAyBvBvB,EAAUwB,kBAAoB,cAzBP,IA0BvBxB,EAAUyB,aAAe,SA1BF,IA2BvBzB,EAAU0B,UAAY,MA3BC,IA4BvB1B,EAAU2B,WAAa,OA5BA,IA6BvB3B,EAAU4B,cAAgB,UA7BH,IA8BvB5B,EAAU6B,YAAc,QA9BD,IA+BvB7B,EAAU8B,eAAiB,WA/BJ,IAgCvB9B,EAAU+B,UAAY,MAhCC,IAiCvB/B,EAAUgC,YAAc,QAjCD,IAkCvBhC,EAAUiC,YAAc,QAlCD,IAmCvBjC,EAAUkC,cAAgB,UAnCH,IAoCvBlC,EAAUmC,aAAe,SApCF,IAqCvBnC,EAAUoC,gBAAkB,YArCL,IAsCvBpC,EAAUqC,YAAc,QAtCD,IAuCvBrC,EAAUsC,aAAe,SAvCF,IAwCvBtC,EAAUuC,kBAAoB,cAxCP,IAyCvBvC,EAAUwC,aAAe,SAzCF,IA0CvBxC,EAAUyC,eAAiB,WA1CJ,IAkDvBzC,EAAU0C,YAAc,KAlDD,IAmDvB1C,EAAU2C,aAAe,KAnDF,IAoDvB3C,EAAU4C,kBAAoB,KApDP,IAqDvB5C,EAAU6C,mBAAqB,KArDR,IAsDvB7C,EAAU8C,iBAAmB,KAtDN,IAuDvB9C,EAAU+C,kBAAoB,KAvDP,IAwDvB/C,EAAUgD,uBAAyB,MAxDZ,IA2DvBhD,EAAUiD,IAAM,KA3DO,IA4DvBjD,EAAUkD,MAAQ,KA5DK,IA6DvBlD,EAAUmD,OAAS,KA7DI,IA8DvBnD,EAAUoD,KAAO,KA9DM,IA+DvBpD,EAAUqD,eAAiB,KA/DJ,IAgEvBrD,EAAUsD,SAAW,KAhEE,IAiEvBtD,EAAUuD,YAAc,KAjED,IAkEvBvD,EAAUwD,YAAc,KAlED,IAmEvBxD,EAAUyD,YAAc,MAnED,IAoEvBzD,EAAU0D,WAAa,MApEA,IAqEvB1D,EAAU2D,MAAQ,KArEK,IAsEvB3D,EAAU4D,QAAU,KAtEG,IAuEvB5D,EAAU6D,aAAe,MAvEF,IAwEvB7D,EAAU8D,eAAiB,MAxEJ,IAyEvB9D,EAAU+D,MAAQ,MAzEK,IA0EvB/D,EAAUgE,SAAW,MA1EE,IA2EvBhE,EAAUiE,WAAa,KA3EA,IA4EvBjE,EAAUkE,eAAiB,MA5EJ,IA6EvBlE,EAAUmE,gBAAkB,MA7EL,IA8EvBnE,EAAUoE,yBAA2B,MA9Ed,IA+EvBpE,EAAUqE,mBAAqB,MA/ER,IAgFvBrE,EAAUsE,iBAAmB,MAhFN,IAiFvBtE,EAAUuE,UAAY,KAjFC,IAkFvBvE,EAAUwE,IAAM,MAlFO,IAmFvBxE,EAAUyE,GAAK,MAnFQ,IAoFvBzE,EAAU0E,IAAM,KApFO,IAqFvB1E,EAAU2E,gBAAkB,KArFL,IAwFvB3E,EAAU4E,UAAY,KAxFC,IA0FvB5E,EAAU6E,MAAQ,KA1FK,IA2FvB7E,EAAU8E,SAAW,OA3FE,IA8FvB9E,EAAU+E,MAAQ,KA9FK,IAiGvB/E,EAAUgF,UAAY,MAjGC,IAoGvBhF,EAAUiF,GAAK,KApGQ,IAuGvBjF,EAAUkF,MAAQ,mBAvGK,IAwGvBlF,EAAUmF,IAAM,wBAxGO,IA2GvBnF,EAAUoF,QAAU,qBA3GG,IA8GvBpF,EAAUqF,eAAiB,mCA9GJ,IAiHvBrF,EAAUsF,QAAU,iBAjHG,IAmHvBtF,EAAUuF,gBAAkB,2BAnHL,GAwHnBvF,EAAU0C,YACV1C,EAAU2C,aACV3C,EAAU4C,kBACV5C,EAAU6C,mBACV7C,EAAU8C,iBACV9C,EAAU+C,kBAGV/C,EAAUiD,IACVjD,EAAU+E,MACV/E,EAAUkD,MACVlD,EAAUmD,OACVnD,EAAUoD,KACVpD,EAAUqD,eACVrD,EAAUsD,SACTtD,EAAUgF,UACXhF,EAAUiF,GACTjF,EAAUuD,YACXvD,EAAUwD,YACVxD,EAAU2D,MACV3D,EAAU4D,QACV5D,EAAUiE,WACVjE,EAAUwE,IACVxE,EAAUyE,GACVzE,EAAU0E,IACV1E,EAAU2E,gBAEV3E,EAAU4E,UACV5E,EAAU6E,MAER7E,EAAU8E,SAGZ9E,EAAUkF,MACTlF,EAAUmF,IAGVnF,EAAUoF,QACVpF,EAAUwF,SAIPxF,EAAUU,aACXV,EAAUW,YACTX,EAAUY,aACZZ,EAAUa,WACJb,EAAUc,iBACfd,EAAUe,YACVf,EAAUgB,YACNhB,EAAUiB,gBACZjB,EAAUkB,cACPlB,EAAUmB,iBACZnB,EAAUoB,eACRpB,EAAUqB,iBACbrB,EAAUsB,cACTtB,EAAUuB,eACPvB,EAAUwB,kBACfxB,EAAUyB,aACbzB,EAAU0B,UACT1B,EAAU2B,WACP3B,EAAU4B,cACZ5B,EAAU6B,YACP7B,EAAU8B,eACf9B,EAAU+B,UACR/B,EAAUgC,YACVhC,EAAUiC,YACRjC,EAAUkC,cACXlC,EAAUmC,aACPnC,EAAUoC,gBACdpC,EAAUqC,YACTrC,EAAUsC,aACLtC,EAAUuC,kBAChBvC,EAAUQ,KACTR,EAAUS,MACVT,EAAUwC,aACRxC,EAAUyC,e,qqCClWlB,IAAegD,EAAtB,WAUI,uBARO,KAAAC,eAAgB,EAEhB,KAAAC,eAAiC,IAAIC,IAIrC,KAAAC,cAAwB,GARnC,gDAwBQ,OAAO,OAxBf,4CA8BQC,KAAKH,eAAiB,IAAIC,QA9BlC,KAmCsBG,EAAtB,iD,sCAEWC,aAAoB,KAEpB,EAAAC,YAAsB,GAJjC,kDAUkBC,GACV,OAAOA,GAAQJ,OAXvB,oCAcyBK,EAAsBC,GAEvC,IAAIC,EAAYP,KAAKQ,eAAeH,GAEpC,OAAiB,MAAbE,EACO,KAGc,MAArBD,EACOC,EAAUD,EAAkBlG,YAGhCmG,EAAS,OA1BxB,gCA8BqBH,GACb,OAA6C,MAAtCJ,KAAKS,aAAaL,EAAKhG,cA/BtC,yCAkC8BgG,GACtB,OAAOJ,KAAKS,aAAaL,EAAKhG,gBAnCtC,GAA4CuF,GAwC/Be,EAgBT,WAAYjI,EAAc2H,EAAYO,EAClCC,EAAmBC,EAAwBC,EAAkBf,GAAsB,UAfvF,KAAAH,eAAyB,EAgBrBI,KAAK5F,WAAa3B,EAClBuH,KAAKI,KAAOA,EACZJ,KAAKW,YAAcA,EACnBX,KAAKY,SAAWA,EAChBZ,KAAKa,WAAaA,EAClBb,KAAKc,QAAUA,EACfd,KAAKH,eAAiB,IAAIC,IAC1BE,KAAKD,cAAgBA,GAIhBgB,EAAb,YAsDI,WAAYtI,EAAcuI,EAA8BC,EACpDC,EACAC,EAAqBP,EAAmBb,GAAsD,MAA9BqB,EAA8B,mEAC9F,2BAvDJxB,eAAyB,EAMzB,EAAAwB,eAAyB,EACzB,EAAAC,WAAqB,EASrB,EAAAC,8BAAwC,EAIxC,EAAAC,eAAiD,KAoC7C,EAAKnH,WAAa3B,EAClB,EAAKuI,cAAgBA,EACrB,EAAKC,WAAaA,EAClB,EAAKE,WAAaA,EAClB,EAAKP,SAAWA,EAChB,EAAKC,WAAa,EAClB,EAAKd,cAAgBA,EACrB,EAAKqB,cAAgBA,EAEF,MAAfF,IAC0B,mBAAfA,EACP,EAAKM,OAASN,GAEd,EAAKO,QAAUP,EACfA,EAAYQ,OAAZ,OAIR,EAAKC,UAAYlJ,EAAOuI,EAAcY,GApBwD,2BAsB9F,YAAcZ,EAAca,WAA5B,+CAAwC,KAA/B7H,EAA+B,QACpC,GAA2B,GAAvBA,EAAC,eAA4B,CAC7B,EAAK8H,iBAAkB,EAAM,QAxByD,yFA4B9F,EAAKA,gBAAkB,EAAKA,iBAAuC,MAAnB,EAAKb,YAA2D,GAArC,EAAKA,WAAL,eA5BmB,EAxDtG,uDA2BQ,OAA2C,GAAxCjB,KAAKgB,cAAca,WAAWE,QAC1B/B,KAAKgB,cAAca,WAAW7B,KAAKgB,cAAca,WAAWE,OAAS,GAAGC,aA5BvF,uCAgCqBC,GACb,OAAOjC,KAAKgB,cAAca,WAAWI,GAAO7B,OAjCpD,mCAoCiB6B,GACT,OAAOjC,KAAKgB,cAAca,WAAWI,KArC7C,sCAyCQ,OAAOjC,KAAKiB,aAzCpB,0CA6CQ,OAAOjB,KAAKgB,cAAca,WAAWE,SA7C7C,yCAiDQ,OAAO/B,KAAKgB,gBAjDpB,wDAwFQ,OAAsB,MAAnBhB,KAAKiB,WACGjB,KAAKiB,WAAW7G,WAAa,IAAM4F,KAAK2B,UAExC,QAAU3B,KAAK2B,YA3FlC,2CAiGQ,IAAIO,EAAQ,GAEW,MAAnBlC,KAAKiB,YAAoD,QAA9BjB,KAAKiB,WAAW7G,aAC3C8H,GAASC,EAAkBnC,KAAKiB,YAAc,KAGlDiB,GAASlC,KAAK5F,WAAa,IAG3B,IADA,IAAIyH,EAAa7B,KAAKgB,cAAca,WAC3B3J,EAAI,EAAGA,EAAI2J,EAAWE,OAAQ7J,IAAK,CAExC,IAAI8B,EAAI6H,EAAW3J,GACnB,GAAG8B,EAAEgI,WAEDE,GAASC,EADuBnI,EAAEoG,KACGgC,aAAe,OAASpI,EAAEI,gBAE/D8H,GAASC,EAAkBnI,EAAEoG,MAAQ,IAAMpG,EAAEI,WAG7ClC,EAAI2J,EAAWE,OAAS,IACxBG,GAAS,MAOjB,OAFAA,GAAS,MA1HjB,2CAgIyBG,GAEjB,GAAIA,EAAyB,OAAOrC,KAAK5F,WAAa,MAEtD,IAAIkI,EAAU,GAEdA,GAAWtC,KAAK5F,WAAa,IAG7B,IADA,IAAIyH,EAAa7B,KAAKgB,cAAca,WAC3B3J,EAAI,EAAGA,EAAI2J,EAAWE,OAAQ7J,IAAK,CAExC,IAAI8B,EAAI6H,EAAW3J,GACnBoK,GAAW,MAASpK,EAAI,GAAK2J,EAAWE,OAAU,IAAM/H,EAAEI,WAAa,IAEnElC,EAAI2J,EAAWE,OAAS,IACxBO,GAAW,MAOnB,OAFAA,GAAW,MApJnB,kCAyJuBnJ,GACf,MAAO,KA1Jf,6BA6JkBiH,GACV,OAAOA,GAAQJ,OA9JvB,oCAiKyBK,EAAsBC,GACvC,OAAO,OAlKf,8BAqKmBD,EAAsBkC,EAAqBC,GACtD,OAAO,OAtKf,gCAyKqBpC,GACb,OAAO,IA1Kf,6BA6KkBjH,EAAciH,GAAqB,OAAOjH,MA7K5D,GAA4BwG,GAkLf8C,EAAb,WAMI,WAAYZ,GAAsB,UAC9B7B,KAAK6B,WAAaA,EAClB7B,KAAK0C,YARb,8CAYQ1C,KAAK4B,GAAK,IAEV,IADA,IAAI1J,EAAI,EACDA,EAAI8H,KAAK6B,WAAWE,QACvB/B,KAAK4B,IAAM5B,KAAK6B,WAAW3J,GAAGkI,KAAKhG,WAC/BlC,EAAI8H,KAAK6B,WAAWE,OAAS,IAC7B/B,KAAK4B,IAAM,MAEf1J,IAEJ8H,KAAK4B,IAAM,QArBnB,KAiDM,SAAUO,EAAkB/B,G,QAC9B,GAAGA,EAAI,eACAA,EAAI,cAAkB2B,OAAS,EAAE,CAChC,IAAI9H,GAAamG,EAAI,eAAsBA,EAAKhG,WAAa,aAA0C,QAA/B,EAAGgG,EAAI,4BAAwB,eAAEhG,YAAcgG,EAAKhG,YAC1H,IAEF,OADGH,GAAKmG,EAAI,cAAkBuC,KAAI,SAAAC,GAAE,OAAIT,EAAkBS,EAAGxC,SAAOyC,KAAK,OAC9D,IAInB,OAAOzC,EAAI,eAAsBA,EAAKhG,WAAa,aAA0C,QAA/B,EAAGgG,EAAI,4BAAwB,eAAEhG,YAAcgG,EAAKhG,W,sKCpW/G,IAAM,EAAb,WAUI,WAAY0I,I,4FAA0B,SANtC,KAAAC,cAAkD,GAIlD,KAAAC,gBAAmD,IAAIlD,IAInDE,KAAKiD,MAAQH,E,UAZrB,O,EAAA,G,EAAA,gCAiCa1I,GAIL,IAFA,IAAI0I,EAAQ9C,KAAKiD,MAEF,MAATH,GAAc,CAChB,IAAII,EAAKlD,KAAKgD,gBAAgBjK,IAAI+J,EAAM1I,YAAYrB,IAAIqB,GACxD,GAAS,MAAN8I,EAKC,OAHqB,MAAlBA,EAAGvC,aACFuC,EAAGvC,YAAYuC,GAEZA,EAQXJ,EAAQA,EAAMK,UAGlB,OAAO,OAvDf,kDA4DQnD,KAAKgD,gBAAkB,IAAIlD,IAG3B,IADA,IAAIgD,EAAQ9C,KAAKiD,MACF,MAATH,GAAc,CAEhB,IAAIH,EAAyB,IAAI7C,IACjCE,KAAKgD,gBAAgBI,IAAIN,EAAM1I,WAAYuI,GAH3B,2BAKhB,YAAeG,EAAMO,WAArB,+CAAgC,KAAxBC,EAAwB,QAGxBnK,EAAY,KACbmK,EAAIlD,gBAAgBH,IACnB9G,EAAQmK,EAAIlD,KAAKF,cAGrB,IAAIqD,EAAW,CACXnD,KAAMkD,EAAIlD,KACVjH,MAAOA,GAGW,MAAnBmK,EAAI3C,cACH4C,EAAE5C,YAAc2C,EAAI3C,YACpB4C,EAAE3J,OAASoG,MAGf2C,EAAIS,IAAIE,EAAIlJ,WAAYmJ,IAvBZ,kFA2BhBT,EAAQA,EAAMK,gB,2BA1F1B,K,sKCWO,ICJKK,EAERC,EDES,EAAb,WAaI,WAAYhC,I,4FAAgB,SAX5B,KAAAiC,cAAwB,EAExB,KAAAC,aAA8B,GAE9B,KAAAC,SAAqC,IAAI9D,IACzC,KAAA+D,mBAAsC,GAEtC,KAAAC,iBAA4C,GAKxC9D,KAAKyB,QAAUA,E,UAdvB,O,EAAA,G,EAAA,+CAiB4BsC,GACpB/D,KAAK8D,iBAAiBE,KAAKD,KAlBnC,qCAqBmB3D,EAEV6D,EAAwBC,EAA8BC,GAEvD,IAAIC,EAAgBpE,KAAKyB,QAAQ4C,WAElB,MAAZJ,GACIG,EAAcrC,OAAS,IACtBkC,EAAWG,EAAcA,EAAcrC,OAAS,GAAGkC,UAI3D,IAAIK,EAAiB,CACjBlE,KAAMA,EACN6D,SAAUA,EACVM,cAAc,GAKlB,OAFAL,EAAcM,eAAeF,GAEtBtE,KAAKyE,iBAAiBH,EAAMH,KAzC3C,0CA6CwBO,EAAgBP,GAEhC,IAAIF,EAAWjE,KAAKyB,QAAQ4C,WAAWtC,OAAS,EAAI2C,EAEnC,MAAdP,IACCA,EAAanE,KAAK0D,iBAGtB,IAAIiB,EAAc,CACdV,SAAUA,EACVE,WAAYA,GAOhB,OAJAnE,KAAK2D,aAAaK,KAAKW,GAEvB3E,KAAK4D,SAASR,IAAIe,EAAYQ,GAEvBR,IA9Df,iCAkEeG,GACP,IAAI,IAAIpM,EAAI,EAAGA,EAAI8H,KAAK2D,aAAa5B,OAAQ7J,IAAI,CAC7C,IAAIyB,EAAIqG,KAAK2D,aAAazL,GAC1B,GAAGyB,EAAE2K,MAAQA,EAAK,CAEd,IAAIrC,EAAQjC,KAAKyB,QAAQ4C,WAAWO,QAAQN,GAE5C,GAAGrC,EAAQjC,KAAKyB,QAAQ4C,WAAWtC,OAAS,EAAE,CAC1C,IAAI8C,EAAU7E,KAAKyB,QAAQ4C,WAAWpC,EAAQ,GAC9CtI,EAAE2K,KAAOO,QAIb3M,OA/EhB,8CAoFoCoM,EAAiBH,GAE5B,MAAdA,IACCA,EAAanE,KAAK0D,iBAGtB,IAAIxB,EAAqB,CACrBoC,KAAMA,EACNH,WAAYA,GAMhB,OAHAnE,KAAK2D,aAAaK,KAAK9B,GACvBlC,KAAK4D,SAASR,IAAIe,EAAYjC,GAEvBiC,IAlGf,uCAqG4BG,EAAgBH,GAEnB,MAAdA,IACCA,EAAanE,KAAK0D,iBAGtB,IAAIoB,EAAqB,CACrBX,WAAYA,EACZG,KAAMA,GAKV,OAFAtE,KAAK6D,mBAAmBG,KAAKc,GAEtBX,IAlHf,qCAsHgB,2BACR,YAAcnE,KAAK2D,aAAnB,+CAAgC,KAAxBoB,EAAwB,QAE5B,GAAkB,MAAfA,EAAGd,SACFc,EAAGd,SAAWjE,KAAKyB,QAAQ4C,WAAWO,QAAQG,EAAGT,UAC9C,CACH,KAAMS,EAAGd,SAAWjE,KAAKyB,QAAQ4C,WAAWtC,OAAS,GACjD/B,KAAKyB,QAAQ4C,WAAWL,KAAK,CACzB5D,KAAMlG,EAAU8K,KAChBf,SAAU,OAGlBc,EAAGT,KAAOtE,KAAKyB,QAAQ4C,WAAWrE,KAAKyB,QAAQ4C,WAAWtC,OAAS,KAZnE,6GAiBR,YAAc/B,KAAK6D,mBAAnB,+CAAsC,KAA9BoB,EAA8B,QAC9BC,EAAOlF,KAAK4D,SAAS7K,IAAIkM,EAAGd,YACrB,MAARe,IACCD,EAAGX,KAAKa,YAAcD,EAAKjB,WApB3B,6GAwBR,YAAcjE,KAAK8D,iBAAnB,+CAAoC,KAA5BsB,EAA4B,+BAChC,YAAcA,EAAGC,kBAAjB,+CAAmC,KAA3BC,EAA2B,QAC/BF,EAAGG,eAAeD,EAAGE,UAAYxF,KAAK4D,SAAS7K,IAAIuM,EAAGpD,OAAO+B,UAFjC,kFAIhCmB,EAAGC,kBAAoB,KACK,MAAzBD,EAAGK,qBACFL,EAAGK,mBAAqBzF,KAAK4D,SAAS7K,IAAIqM,EAAGK,oBAAoBxB,WA9BjE,wF,2BAtHhB,K,68CCJA,SAAYT,GAAa,uBAAQ,6BAAW,yBAA5C,CAAYA,MAAU,KAqBf,IAAM,EAAb,YAoCI,WAAYpJ,EAAoBnC,EAAgB8H,GAAsB,wBAClE,2BAlCJ2F,cAAgC,GAEhC,EAAAC,gBAA0B,EAC1B,EAAAC,oBAA8B,EAa9B,EAAAC,WAA0B,GAC1B,EAAAC,oBAAgC,GAEhC,EAAA3E,YAAsB,EAItB,EAAA4E,yBAA2D,KAEpD,EAAAC,QAAoB,GACnB,EAAAC,UAAiC,IAAInG,IAEtC,EAAAuD,WAA0B,GAC1B,EAAA6C,aAAuC,IAAIpG,IAO9C,EAAKC,cAAgBA,EAErB,EAAK3F,WAAaA,EAClB,EAAKnC,OAASA,EACd,EAAK4I,WAAa2C,EAAW2C,OAE7B,EAAKC,YAAc,IAAI,EAAJ,MAEnB,EAAKC,+BAAiC,CAClC3E,OAAQ,KACRzJ,OAAQ,EAAKA,OACboM,WAAY,GACZiC,aAAc,MAGlB,EAAKD,+BAA+BC,aAAe,IAAI,EAAa,EAAKD,gCAlBP,EApC1E,8DA4DQ,IADA,IAAIE,EAAWvG,KACkB,MAA1BuG,EAAEC,sBAA8BD,EAAIA,EAAEC,qBAC7C,OAAOD,IA7Df,gDAkEQ,IADA,IAAIA,EAAWvG,KACkB,MAA1BuG,EAAEC,sBAA8BD,EAAIA,EAAEC,qBAC7C,OAAOD,EAAEnM,aAnEjB,0CAsEwBlC,GAEhB,IADA,IAAI4K,EAAe9C,KACH,MAAT8C,GAAe,4BAClB,YAAeA,EAAM+C,WAArB,+CAAiC,CAC7B,GAAiE,MADpC,QACvBY,2BAA2BvO,EAAEwO,2BAAoC,OAAO,GAFhE,kFAIlB5D,EAAQA,EAAMK,UAGlB,OAAO,IA/Ef,8CAmF4B/I,GAEpB,IADA,IAAI0I,EAAe9C,KACH,MAAT8C,GAAe,4BAClB,YAAeA,EAAM+C,WAArB,+CAAiC,KACzBc,EADyB,QACNF,2BAA2BrM,GAClD,GAAS,MAANuM,EAAY,OAAOA,GAHR,kFAKlB7D,EAAQA,EAAMK,UAGlB,OAAO,OA7Ff,gDAkG8ByD,GACA,MAAlB5G,KAAKmD,WAA8C,MAAzBnD,KAAKmD,UAAUlL,QAAkB+H,KAAKmD,UAAUlL,OAAO4O,gBACjFD,EAAkBhC,QAAQ5E,KAAKmD,WAAa,GAC5CyD,EAAkB5C,KAAKhE,KAAKmD,WAH8B,2BAK9D,YAAenD,KAAK8G,mBAApB,+CAAwC,KAA/BC,EAA+B,QACpB,MAAZA,EAAGjE,OAAoC,MAAnBiE,EAAGjE,MAAM7K,QAAkB8O,EAAGjE,MAAM7K,OAAO4O,gBAC/DD,EAAkBhC,QAAQmC,EAAGjE,OAAS,GACtC8D,EAAkB5C,KAAK+C,EAAGjE,QAR4B,6GAW9D,YAAmB9C,KAAK6F,WAAxB,+CAAoC,KAA3BmB,EAA2B,QAClB,MAAVA,GAAkBA,EAAO/O,OAAO4O,gBAChCD,EAAkBhC,QAAQoC,GAAU,GACpCJ,EAAkB5C,KAAKgD,IAd+B,qFAlGtE,yCAuHQ,IAAID,EAAuB,GACvBE,EAAgD,IAAInH,IAH5C,uBAKZ,YAAcE,KAAKqD,WAAnB,+CAA+B,KAAtB6D,EAAsB,QAC3B,GAAIA,EAAE9G,gBAAgB+G,GAASD,EAAE9G,gBAAgB,EAAW,CACxD,IAAIgH,EAAMH,EAAMlO,IAAImO,EAAE9G,MACX,MAAPgH,GACAA,EAAM,CACFtE,MAAOoE,EAAE9G,KACTiH,WAAW,EACXjN,WAAY8M,EAAE9M,YAElB6M,EAAM7D,IAAI8D,EAAE9G,KAAMgH,GAClBL,EAAG/C,KAAKoD,IAERA,EAAIhN,YAAc,KAAO8M,EAAE9M,eAE5B,CAEH,IADA,IAAIgG,EAAa8G,EAAE9G,KACZA,aAAgB,GACnBA,EAAOA,EAAKgC,YAEhB,GAAIhC,aAAgB+G,GAAS/G,aAAgB,EAAW,CACpD,IAAI,EAAM6G,EAAMlO,IAAIqH,GACT,MAAP,GACA,EAAM,CACF0C,MAAO1C,EACPiH,WAAW,EACXjN,WAAY8M,EAAE9M,YAElB6M,EAAM7D,IAAIhD,EAAM,GAChB2G,EAAG/C,KAAK,KAER,EAAI5J,YAAc,KAAO8M,EAAE9M,WAC3B,EAAIiN,WAAY,MApCpB,kFA0CZ,OAAON,IA/Jf,4CAoKQ,wDADe,2BAGf,YAAc/G,KAAKgG,QAAnB,+CAA4B,SACtBsB,uBAJS,6GAOf,YAActH,KAAKqD,WAAnB,+CAA+B,SACzBxD,eAAiB,IAAIC,KARZ,kFAWS,MAApBE,KAAKoG,aACLpG,KAAKoG,YAAYkB,wBA/K7B,oDAyLQ,IAHA,IAAI/O,EAAWyH,KACXuH,EAA4C,KAEpC,MAALhP,GAC+B,MAA9BA,EAAEwN,2BACuBwB,EAAR,MAAbA,EAAiChP,EAAEwN,yBAEvBwB,EAAUC,OAAOjP,EAAEwN,2BAGvCxN,EAAIA,EAAE4K,UAEV,OAAOoE,IAlMf,yCAqMuBE,EACfpF,EAAkCqF,EAClCC,GAEA,IAAIC,EAA8C,GAFrB,uBAI7B,YAAsB5H,KAAK6H,cAAcJ,GAAzC,+CAA0D,KAAjDK,EAAiD,QACtDF,EAAS5D,KAAK,CACV9B,MAAO4F,EAAU1N,WAAa,GAC9B2N,KAAMC,OAAOC,UAAUC,mBAAmBC,MAC1CC,WAAYN,EAAU1N,WACtBiO,MAAOV,EACP5H,cAA0C,MAA3B+H,EAAU/H,mBAAwBuI,EAAY,CACzDnP,MAAO2O,EAAU/H,kBAXA,6GAgB7B,YAAmBC,KAAKuI,WAAWd,GAAnC,+CAAoD,KAA3C/F,EAA2C,QAC5CA,EAAON,eACXwG,EAAS5D,KAAK,CACV9B,MAAOR,EAAO8G,qBACdC,WAAY/G,EAAOtH,WACnBsO,QAAS,CACL9G,GAAI,sCACJ+G,MAAO,MACPC,UAAW,IAEfb,KAAMC,OAAOC,UAAUC,mBAAmBnH,OAC1CqH,WAAY1G,EAAOmH,qBAAqBxG,GACxCgG,MAAOV,EACPmB,gBAAiBd,OAAOC,UAAUc,6BAA6BC,gBAC/DjJ,cAAuC,MAAxB2B,EAAO3B,mBAAwBuI,EAAY,CACtDnP,MAAOuI,EAAO3B,kBA/BG,kFAwC7B,OAJA6H,EAAWA,EAASJ,OAAOxH,KAAKoG,YAAY6C,mBAAmBxB,EAC3DpF,EAAyBqF,EACzBC,MA7OZ,uDAkPqCuB,GAEzBlJ,KAAKoG,YAAYC,+BAA+BhC,WAAWtC,OAAS,GACpEmH,EAAalF,KAAK,CACdvC,QAASzB,KAAKoG,YAAYC,+BAC1B8C,gBAAiB,EACjBC,aAAc,CAAEC,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GAC5CL,OAAQ,mDAAqD1B,KAAKoG,YAAYhM,WAC9EmP,oBAAqB,KACrBC,oBAAqB,2CA3PrC,2CAiQyB7H,GAGjB,IADA,IAAIpJ,EAAWyH,KACH,MAALzH,GAAW,CACd,IAAImJ,EAASnJ,EAAE0N,UAAUlN,IAAI4I,GAC7B,GAAc,MAAVD,EAAgB,OAAOA,EAC3BnJ,EAAIA,EAAE4K,UAGV,OAAO,OA1Qf,6BA8QkB/C,GACV,OAAOA,GAAQJ,OA/QvB,mCAkRiBmD,GACTnD,KAAKmD,UAAYA,EACjBnD,KAAKoG,YAAYjD,UAAYA,EAAUiD,cApR/C,gCAuRqB1E,GACTA,EAAOd,SACPZ,KAAKoG,YAAYqD,UAAU/H,IAE3B1B,KAAKgG,QAAQhC,KAAKtC,GAClB1B,KAAKiG,UAAU7C,IAAI1B,EAAOC,UAAWD,MA5RjD,mCAgSwBoG,GACZA,EAAUlH,SACVZ,KAAKoG,YAAYsD,aAAa5B,IAE9B9H,KAAKqD,WAAWW,KAAK8D,GACrB9H,KAAKkG,aAAa9C,IAAI0E,EAAU1N,WAAY0N,MArSxD,oCAySyBzH,EAAsBC,GAEvC,OAAID,GAAanG,EAAU+D,OAASoC,GAAanG,EAAUgE,YACnDoC,aAA6B6G,GAAS7G,GAAqBqJ,IAK/DtJ,GAAanG,EAAUuC,oBACnB6D,aAA6B,GAAeA,aAA6B,GAClEmD,EAIR,KAVQA,IA7SvB,8BA2TmBpD,EAAsBkC,EAAqBC,GACtD,GAAInC,GAAanG,EAAU+D,MACvB,OAAOsE,EAAapJ,OAASqJ,EAAcrJ,MAG/C,GAAIkH,GAAanG,EAAUgE,SACvB,OAAOqE,EAAapJ,OAASqJ,EAAcrJ,MAG/C,GAAIkH,GAAanG,EAAUuC,kBAAmB,CAC1C,IAAImN,EAAyCrH,EAAapJ,MAAO8J,MAC7D4G,EAAYrH,EAAcpC,KAC9B,GAAIyJ,aAAqB,EAAa,CAElC,KAAmB,MAAZD,GAAkB,CACrB,GAAIA,IAAaC,EAAU1C,MAAO,OAAO,EACzCyC,EAAWA,EAASzG,UAExB,OAAO,EAEX,GAAI0G,aAAqB,EACrB,KAAmB,MAAZD,GAAkB,4BACrB,YAAcA,EAAS/D,WAAvB,+CAAmC,CAC/B,GAD+B,UACrBgE,EAAW,OAAO,GAFX,kFAIrBD,EAAWA,EAASzG,UAG5B,OAAO,EAGX,OAAO,OA1Vf,iCAgWsB2G,EAA4B1P,GAE1C,IAAI4L,EAAoBhG,KAAKgG,QAAQ+D,QAAO,SAACrI,GACzC,OAAOA,EAAOb,YAAciJ,IAAiC,MAAd1P,GAAsBsH,EAAOtH,YAAcA,MAG9F,GAAsB,MAAlB4F,KAAKmD,YAAoC,MAAd/I,GAAsBA,GAAc4F,KAAK5F,YAAgC,GAAlB4L,EAAQjE,QAAc,CACxG,IAAIiI,EAA0BF,GAAkBtG,EAAW2C,OAAS2D,EAAiBtG,EAAWyG,UADQ,uBAGxG,YAAcjK,KAAKmD,UAAUoF,WAAWyB,EAAyB5P,GAAc4F,KAAK5F,WAAa4F,KAAKmD,UAAU/I,WAAaA,GAA7H,+CAA0I,KAAjI9B,EAAiI,QAElI4R,GAAQ,EAF0H,uBAGtI,YAAelE,EAAf,+CAAwB,CACpB,GADoB,QACbrE,WAAarJ,EAAEqJ,UAAW,CAC7BuI,GAAQ,EACR,QAN8H,kFAUjIA,GACDlE,EAAQhC,KAAK1L,IAdmF,mFAoB5G,OAAO0N,IA1Xf,oCAgYyB8D,GAEjB,IAAIzG,EAA0B,GAFa,uBAG3C,YAAcrD,KAAKqD,WAAnB,+CAA+B,KAAtB,EAAsB,QACvB,EAAExC,YAAciJ,GAChBzG,EAAWW,KAAK,IALmB,kFAS3C,GAAsB,MAAlBhE,KAAKmD,UAAmB,CAExB,IAAIgH,EAA4BL,GAAkBtG,EAAW2C,OAAS2D,EAAiBtG,EAAWyG,UAF1E,uBAIxB,YAAcjK,KAAKmD,UAAU0E,cAAcsC,GAA3C,+CAAuE,KAA9DjD,EAA8D,QAE/DgD,GAAQ,EAEZ,KAAIhD,EAAErG,WAAasJ,GAAnB,CAJmE,2BAMnE,YAAe9G,EAAf,+CAA2B,CACvB,GADuB,QAChBjJ,YAAc8M,EAAE9M,WAAY,CAC/B8P,GAAQ,EACR,QAT2D,kFAa9DA,GACD7G,EAAWW,KAAKkD,KAlBA,mFAwB5B,OAAO7D,IAjaf,uCAoayB,2BACjB,YAAcrD,KAAKgG,QAAnB,+CAA4B,CACxB,GADwB,QAClB5E,cAAe,OAAO,GAFf,kFAKjB,OAAsB,MAAlBpB,KAAKmD,WAA0BnD,KAAKmD,UAAUiH,mBAza1D,qCA8a0BC,EAAwBP,GAAqE,IAAzCQ,EAAyC,uDAAftK,KAAK5F,WAEjGmQ,EAAyBvK,KAAKgG,QAAQ+D,QAAO,SAACzR,GAC9C,OAAOA,EAAE8I,iBAGb,OAA2B,GAAvBmJ,EAAaxI,QAAiC,MAAlB/B,KAAKmD,UAC1BnD,KAAKmD,UAAUqH,eAAeH,EAAgBP,EAAgBQ,GAE9DG,EAAoBF,EAAcvK,KAAK5F,WAAYiQ,EAAgBC,GAAiB,KAvbvG,mDA4bwClQ,EAAoBiQ,EACpDK,EAA4BZ,GAE5B,IAEI9D,EAAUyE,EAFGzK,KAAKuI,WAAWuB,GAEa1P,EAAYiQ,EAAgBrK,KAAK5F,WAAYsQ,GAE3F,GAAiC,GAA7B1E,EAAQ2E,WAAW5I,SAAgB2I,EAAmB,CACtD,IAAIE,EAAgB5K,KAAKoG,YAAYyE,6BAA6BzQ,EAAYiQ,GAAgB,EAAOP,GACrG,OAA2B,MAAvBc,EAAcE,MACPF,EAGJ5E,EAGX,OAAOA,IA5cf,gCAgdqB5L,EAAoB4G,GAEjC,IAAIU,EAAS1B,KAAKiG,UAAUlN,IAAIqB,EAAa4G,EAAcY,IAE3D,OAAc,MAAVF,GAAoC,MAAlB1B,KAAKmD,UAChBnD,KAAKmD,UAAU4H,UAAU3Q,EAAY4G,GAGzCU,IAxdf,mCA2dwBtH,EAAoB0P,GAEpC,IAAIgB,EAAQ,KACRE,GAA6B,EAE7BlD,EAAY9H,KAAKkG,aAAanN,IAAIqB,GAClC6Q,EAAiC,MAAbnD,EAWxB,GATiB,MAAbA,EACAgD,EAAQ,gBAAkB1Q,EAAa,+BAEnC0N,EAAUjH,WAAaiJ,IACvBgB,EAAQ,gBAAkB1Q,EAAa,yBAA2BoJ,EAAWsE,EAAUjH,YAAc,sCACrGiH,EAAY,KACZkD,GAAoB,GAGX,MAAblD,GAAuC,MAAlB9H,KAAKmD,UAAmB,CAC7C,IAAIgH,EAA4BL,GAAkBtG,EAAW2C,OAAS2D,EAAiBtG,EAAWyG,UAE9FiB,EAAqBlL,KAAKmD,UAAUgI,aAAa/Q,EAAY+P,GACjE,GAAoC,MAAhCe,EAAmBpD,WAAqBmD,EACxC,OAAOC,EAKf,MAAO,CAAEpD,UAAWA,EAAWgD,MAAOA,EAAOE,kBAAmBA,KAtfxE,gCAyfqB5K,GAEb,GAAIA,GAAQgL,GACR,OAAO,EAGX,GAAIhL,aAAgB+G,EAGhB,IAFA,IAAIhE,EAAmBnD,KAEH,MAAbmD,GAAmB,CACtB,GAAI/C,EAAKsG,2BAA6BvD,EAAUuD,0BAA2B,CACvE,GAAItG,EAAKsF,cAAc3D,OAAS,EAAG,CAE/B,IADA,IAAIpI,EAAY0R,KAAKC,IAAIlL,EAAKsF,cAAc3D,OAAQoB,EAAUuC,cAAc3D,QACnE7J,EAAI,EAAGA,EAAIyB,EAAGzB,IACnB,IAAKiL,EAAUuC,cAAcxN,GAAGkI,KAAKmL,UAAUnL,EAAKsF,cAAcxN,GAAGkI,MAAO,OAAO,EAEvF,OAAO,EAEX,OAAO,EAEX+C,EAAYA,EAAUA,UAI9B,GAAI/C,aAAgB,EAGhB,IADA,IAAI0C,EAAe9C,KACJ,MAAT8C,GAAc,4BAChB,YAAcA,EAAM+C,WAApB,+CAAgC,KAAvB,EAAuB,QAC5B,GAAIzF,EAAKsG,2BAA6B,EAAEA,0BACpC,OAAO,GAHC,kFAMhB5D,EAAQA,EAAMK,UAItB,OAAO,IA9hBf,6BAkiBkBhK,EAAciH,GAExB,OAAOjH,IApiBf,yCA0iBQ,GAAsB,MAAlB6G,KAAKmD,WAAqBgE,EAAMqE,gBAAgB5G,QAAQ5E,KAAKmD,UAAU/I,aAAe,EACtF,MAAO,CAAEqR,QAAS,gJAAiJC,eAAgB,IAUvL,IAPA,IAAID,EAAU,GACVE,EAAmC,GACnCC,EAAkC,GAClCC,EAAoC,GAEpC/I,EAAe9C,KACf8L,EAAsB,CAAChJ,EAAM1I,YACP,MAAnB0I,EAAMK,WAAmB,CAE5B,GADAL,EAAQA,EAAMK,UACV2I,EAAUlH,QAAQ9B,EAAM1I,aAAe,EAAG,CAC1C0I,EAAMK,UAAY,KAClB2I,EAAY,CAAChJ,EAAM1I,YAAYoN,OAAOsE,GACtCL,EAAU,cAAgB3I,EAAM1I,WAAa,0BAC7CqR,GAAW,IAAMK,EAAUjJ,KAAK,aAAe,IAC/C,MAEJiJ,EAAY,CAAChJ,EAAM1I,YAAYoN,OAAOsE,GAG1C,GAAe,IAAXL,EAAe,CAEf,GAAsB,MAAlBzL,KAAKmD,YAAsBnD,KAAKmB,WAAY,CAO5C,IALA,IAAI4K,EAA4B,GAE5B,EAAe/L,KAGH,MAAT,GAAe,4BAClB,YAAc,EAAMgG,QAApB,+CAA6B,KAApB1N,EAAoB,QACrBA,EAAE6I,WACF4K,EAAgB/H,KAAK1L,GAErBsT,EAAsB5H,KAAK1L,EAAE0T,oCALnB,kFAQlB,EAAQ,EAAM7I,UAGlB,cAAc4I,EAAd,eAA+B,CAA1B,IAAI,EAAC,KAEFH,EAAsBhH,QAAQ,EAAEoH,mCAAqC,GACrEL,EAAuB3H,KAAK,IAOpC2H,EAAuB5J,OAAS,IAChC0J,EAAU,cAAgBzL,KAAK5F,WAAa,8EAE5CqR,GAAWE,EAAuBhJ,KAAI,SAACrK,GAAD,OAAOA,EAAE0T,qCAAmCnJ,KAAK,OAjC5E,2BAqCf,YAAc7C,KAAK6F,WAAnB,+CAA+B,KAAtB3N,EAAsB,+BAC3B,YAAcA,EAAEqQ,aAAhB,+CAA8B,KAArB,EAAqB,QACtBqD,EAAsBhH,QAAQ,EAAEoH,mCAAqC,GACrEH,EAAwB7H,KAAK,IAHV,oFArChB,kFA6CX6H,EAAwB9J,OAAS,IAElB,IAAX0J,IAAeA,GAAW,MAE9BA,GAAW,cAAgBzL,KAAK5F,WAAa,uFAE7CqR,GAAWI,EAAwBlJ,KAAI,SAACrK,GAAD,OAAOA,EAAEqJ,aAAWkB,KAAK,OAMxE,MAAO,CAAE4I,QAASA,EAASC,eAAgBC,EAAuBnE,OAAOqE,MA1nBjF,sCA8nBoB3E,GACZ,IAAI3O,EAAyByH,KACzB4B,EAAKsF,EAAE9M,WAGX,IAFI8M,aAAaC,IAAOvF,EAAKsF,EAAER,2BAEnB,MAALnO,GAAW,CACd,GAAIA,EAAEmO,2BAA6B9E,EAAI,OAAO,EAC9CrJ,EAAIA,EAAE4K,UAEV,OAAO,IAvoBf,kCA0oBuBhK,GAAoC,IAAtB8S,EAAsB,uDAAF,GAE7ChS,EAAY,IACZoJ,EAAarD,KAAK6H,cAAcrE,EAAW0I,SAC3CtS,EAAwBT,EAAMA,MAElC,GAAc,MAAVS,EACA,MAAO,OAGX,IAAK,IAAI1B,EAAI,EAAGA,EAAImL,EAAWtB,OAAQ7J,IAAK,CAExC,IAAI4P,EAAYzE,EAAWnL,GACvBqL,EAAI3J,EAAOuS,SAASrE,EAAU1N,YAC9B0N,EAAU1H,gBAAgBH,EAC1BhG,GAAK6N,EAAU1N,WAAa,UAAY0N,EAAU1H,KAAKgM,YAAY7I,EAAG0I,EAAY,GAElFhS,GAAK6N,EAAU1N,WAAa,gBAE5BlC,EAAImL,EAAWtB,OAAS,IACxB9H,GAAK,WAKb,OAAOA,EAAI,MAnqBnB,8BA0qBQ,IAAIoS,EAAkBzT,OAAOY,OAAOwG,MAMpC,OAJAqM,EAASxG,WAAa7F,KAAK6F,WAAWyG,MAAM,GAC5CD,EAASxM,eAAiB,IAAIC,IAC9BuM,EAAS7F,qBAAuBxG,KAEzBqM,MAhrBf,GAA2B1M,GAQR,EAAA6L,gBAA4B,CAAC,UAAW,QAAS,SAAU,UAAW,YAAa,UA6qB/F,IAAM,EAAb,YAeI,WAAY1I,GAAY,wBACpB,2BAPGkD,QAAoB,GACnB,EAAAC,UAAiC,IAAInG,IAEtC,EAAAuD,WAA0B,GAC1B,EAAA6C,aAAuC,IAAIpG,IAK9C,EAAKqH,MAAQrE,EACb,EAAK1I,WAAa0I,EAAM1I,WAED,MAAnB0I,EAAMK,YACN,EAAKA,UAAYL,EAAMK,UAAUiD,aAGrC,EAAKC,+BAAiC,CAClC3E,OAAQ,KACRzJ,OAAQ,EAAKkP,MAAMlP,OACnBoM,WAAY,GACZiC,aAAc,MAGlB,EAAKD,+BAA+BC,aAAe,IAAI,EAAa,EAAKD,gCAjBrD,EAf5B,+DAqCQ,wDADe,2BAGf,YAAcrG,KAAKgG,QAAnB,+CAA4B,SACtBsB,uBAJS,6GAOf,YAActH,KAAKqD,WAAnB,+CAA+B,SACzBxD,eAAiB,IAAIC,KARZ,qFApCvB,kCAiDuB3G,GAMf,IANmD,IAAtB8S,EAAsB,uDAAF,GAE7ChS,EAAY,IACZoJ,EAAarD,KAAK6H,cAAcrE,EAAW0I,SAC3CtS,EAASoG,KAAKuM,YAETrU,EAAI,EAAGA,EAAImL,EAAWtB,OAAQ7J,IAAK,CAExC,IAAI4P,EAAYzE,EAAWnL,GAC3B+B,GAAK6N,EAAU1N,WAAa,KAAOR,GAAU,KAAO,MAAQkO,EAAU1H,KAAKgM,YAAYxS,EAAOuS,SAASrE,EAAU1N,YAAa6R,EAAY,GACtI/T,EAAImL,EAAWtB,OAAS,IACxB9H,GAAK,MAKb,OAAOA,EAAI,MAjEnB,yCAqEuBwN,EACfpF,EAAkCqF,EAClCC,GAEA,IAAIC,EAA8C,GAFrB,uBAI7B,YAAsB5H,KAAK6H,cAAcJ,GAAzC,+CAA0D,KAAjDK,EAAiD,QACtDF,EAAS5D,KAAK,CACV9B,MAAO4F,EAAU1N,WACjB2N,KAAMC,OAAOC,UAAUC,mBAAmBC,MAC1CC,WAAYN,EAAU1N,WACtBiO,MAAOV,EACP5H,cAA0C,MAA3B+H,EAAU/H,mBAAwBuI,EAAY,CACzDnP,MAAO2O,EAAU/H,kBAXA,6GAgB7B,YAAmBC,KAAKuI,WAAWd,GAAnC,+CAAoD,KAA3C/F,EAA2C,QAChDkG,EAAS5D,KAAK,CACV9B,MAAOR,EAAO8G,qBACdC,WAAY/G,EAAOtH,WACnB2N,KAAMC,OAAOC,UAAUC,mBAAmBnH,OAC1CqH,WAAY1G,EAAOmH,qBAAqBxG,GACxCgG,MAAOV,EACPe,QAAS,CACL9G,GAAI,sCACJ+G,MAAO,MACPC,UAAW,IAEfE,gBAAiBd,OAAOC,UAAUc,6BAA6BC,gBAC/DjJ,cAAuC,MAAxB2B,EAAO3B,mBAAwBuI,EAAY,CACtDnP,MAAOuI,EAAO3B,kBA9BG,kFAmC7B,OAAO6H,IA1Gf,6BA6GkBxH,GACV,OAAOA,GAAQJ,OA9GvB,gCAiHqB0B,GACb1B,KAAKgG,QAAQhC,KAAKtC,GAClB1B,KAAKiG,UAAU7C,IAAI1B,EAAOC,UAAWD,KAnH7C,mCAsHwBoG,GAChB9H,KAAKqD,WAAWW,KAAK8D,GACrB9H,KAAKkG,aAAa9C,IAAI0E,EAAU1N,WAAY0N,KAxHpD,oCA2HyBzH,EAAsBC,GAEvC,OAAO,OA7Hf,8BAiImBD,EAAsBkC,EAAqBC,GACtD,OAAO,OAlIf,mDAqIwCpI,EAAoBiQ,EACpDK,EAA4BZ,GAE5B,OAAOW,EAAoBzK,KAAKuI,WAAWuB,GAAiB1P,EAAYiQ,EACpErK,KAAKmH,MAAM/M,WAAYsQ,KAzInC,iCAiJsBZ,EAA4B1P,GAE1C,IAAI4L,EAAoBhG,KAAKgG,QAAQsG,QAAQvC,QAAO,SAACrI,GACjD,OAAOA,EAAOb,YAAciJ,IAAiC,MAAd1P,GAAsBA,GAAcsH,EAAOtH,eAG9F,GAAsB,MAAlB4F,KAAKmD,UAAmB,CACxB,IAAI6G,EAA0BF,GAAkBtG,EAAW2C,OAAS3C,EAAW2C,OAAS3C,EAAWyG,UAD3E,uBAExB,YAAcjK,KAAKmD,UAAUoF,WAAWyB,EAAyB5P,GAAjE,+CAA8E,KAArE9B,EAAqE,QAEtE4R,GAAQ,EAF8D,uBAG1E,YAAelE,EAAf,+CAAwB,CACpB,GADoB,QACbrE,WAAarJ,EAAEqJ,UAAW,CAC7BuI,GAAQ,EACR,QANkE,kFAUrEA,GACDlE,EAAQhC,KAAK1L,IAbG,mFAmB5B,OAAO0N,IA1Kf,oCAiLyByB,GAEjB,IAAIpE,EAA0BrD,KAAKqD,WAAW0G,QAAO,SAACjC,GAClD,OAAOA,EAAUjH,YAAc4G,KAGnC,GAAsB,MAAlBzH,KAAKmD,UAAmB,CAExB,IAAIqJ,EAA0B/E,GAAkBjE,EAAW2C,OAASsB,EAAiBjE,EAAWyG,UAFxE,uBAIxB,YAAcjK,KAAKmD,UAAU0E,cAAc2E,GAA3C,+CAAqE,KAA5DtF,EAA4D,QAE7DgD,GAAQ,EAFqD,uBAIjE,YAAe7G,EAAf,+CAA2B,CACvB,GADuB,QAChBjJ,YAAc8M,EAAE9M,WAAY,CAC/B8P,GAAQ,EACR,QAPyD,kFAW5DA,GACD7G,EAAWW,KAAKkD,IAhBA,mFAsB5B,OAAO7D,IA7Mf,gCAgNqBjJ,EAAoB4G,GAEjC,IAAIU,EAAS1B,KAAKiG,UAAUlN,IAAIqB,EAAa4G,EAAcY,IAE3D,OAAc,MAAVF,GAAoC,MAAlB1B,KAAKmD,UAChBnD,KAAKmD,UAAU4H,UAAU3Q,EAAY4G,GAGzCU,IAxNf,mCA2NwBtH,EAAoB0P,GAEpC,IAAIgB,EAAQ,GACR2B,GAAW,EACX3E,EAAY9H,KAAKkG,aAAanN,IAAIqB,GAUtC,GARiB,MAAb0N,GACA2E,GAAW,EACX3B,EAAQ,gBAAkB1Q,EAAa,kCAChC0N,EAAUjH,WAAaiJ,IAC9BgB,EAAQ,gBAAkB1Q,EAAa,yBAA2BoJ,EAAWsE,EAAUjH,YAAc,sCACrGiH,EAAY,MAGC,MAAbA,GAAuC,MAAlB9H,KAAKmD,UAAmB,CAC7C,IAAIgH,EAA4BL,GAAkBtG,EAAW2C,OAAS2D,EAAiBtG,EAAWyG,UAE9FyC,EAA8B1M,KAAKmD,UAAUgI,aAAa/Q,EAAY+P,GAC1E,GAAIsC,EACA,OAAOC,EAIf,MAAO,CAAE5E,UAAWA,EAAWgD,MAAOA,EAAOE,mBAAoByB,KAlPzE,gCAqPqBrM,GAEb,OAAO,IAvPf,6BA2PkBjH,EAAciH,GACxB,OAAOjH,IA5Pf,sCA+PoB+N,GAEZ,IADA,IAAI3O,EAAyByH,KACjB,MAALzH,GAAW,CACd,GAAIA,GAAK2O,EAAG,OAAO,EACnB3O,EAAIA,EAAE4K,UAEV,OAAO,MArQf,GAAiCxD,GA0QpB,EAAb,YAcI,WAAYvF,EAAoBnC,EAAgB8H,GAAsB,wBAClE,2BAZJ2F,cAAgC,GAEhC,EAAAE,oBAA8B,EAIvB,EAAA+G,QAAuB,GAEvB,EAAA3G,QAAoB,GACnB,EAAAC,UAAiC,IAAInG,IAIzC,EAAKC,cAAgBA,EACrB,EAAK3F,WAAaA,EAClB,EAAKnC,OAASA,EAJoD,EAd1E,mEAuBQ,IADA,IAAIsO,EAAevG,KACc,MAA1BuG,EAAEC,sBAA8BD,EAAIA,EAAEC,qBAC7C,OAAOD,EAAEnM,aAxBjB,iDA2B+BA,GACvB,GAAG4F,KAAK0G,2BAA6BtM,EAAY,OAAO4F,KADf,2BAEzC,YAAeA,KAAK2M,QAApB,+CAA4B,KACpBC,EADoB,QACVnG,2BAA2BrM,GACzC,GAAU,MAAPwS,EAAa,OAAOA,GAJc,kFAMzC,OAAO,OAjCf,8BAuCQ,IAAIC,EAA0BjU,OAAOY,OAAOwG,MAK5C,OAHA6M,EAAahN,eAAiB,IAAIC,IAClC+M,EAAarG,qBAAuBxG,KAE7B6M,IA5Cf,4CAgDQ,wDADe,2BAGf,YAAc7M,KAAKgG,QAAnB,+CAA4B,SACtBsB,uBAJS,qFA/CvB,yCAyDuBjF,EAAkCqF,EACjDC,GAEA,IAAIC,EAA8C,GAFrB,uBAI7B,YAAmB5H,KAAKuI,aAAxB,+CAAsC,KAA7B7G,EAA6B,QAClCkG,EAAS5D,KAAK,CACV9B,MAAOR,EAAO8G,qBACdC,WAAY/G,EAAOtH,WACnB2N,KAAMC,OAAOC,UAAUC,mBAAmBnH,OAC1CqH,WAAY1G,EAAOmH,qBAAqBxG,GACxCgG,MAAOV,EACPe,QAAS,CACL9G,GAAI,sCACJ+G,MAAO,MACPC,UAAW,IAEfE,gBAAiBd,OAAOC,UAAUc,6BAA6BC,gBAC/DjJ,cAAuC,MAAxB2B,EAAO3B,mBAAwBuI,EAAY,CACtDnP,MAAOuI,EAAO3B,kBAlBG,kFAuB7B,OAAO6H,IAjFf,kCAoFuBzO,GAAoC,wDACnD,OAAmB,MAAfA,EAAMA,MACC,OAEHA,EAAMA,iBAAiB,EAChBA,EAAMA,MAAM8J,MAAMmJ,YAAYjT,GAE9B,UA3FvB,6BAgGkBiH,GACV,OAAOA,GAAQJ,OAjGvB,gCAoGqB0B,GACb1B,KAAKgG,QAAQhC,KAAKtC,GAClB1B,KAAKiG,UAAU7C,IAAI1B,EAAOC,UAAWD,KAtG7C,oCAyGyBrB,EAAsBC,GAEvC,OAAID,GAAanG,EAAU+D,OAASoC,GAAanG,EAAUgE,UAIvDmC,GAAanG,EAAUuC,oBACnB6D,aAA6B,GAAeA,aAA6BwM,GAJtErJ,EASJ,OArHf,8BAyHmBpD,EAAsBkC,EAAqBC,GAEtD,OAAInC,GAAanG,EAAU+D,MAChBsE,EAAapJ,OAASqJ,EAAcrJ,MAG3CkH,GAAanG,EAAUgE,SAChBqE,EAAapJ,OAASqJ,EAAcrJ,MAGxC,OAnIf,mCA6IQ,OAAO6G,KAAKgG,UA7IpB,gCAiJqB5L,EAAoB4G,GAEjC,OAAOhB,KAAKiG,UAAUlN,IAAIqB,EAAa4G,EAAcY,MAnJ7D,gCAuJqBxB,GAEb,GAAIA,aAAgB0M,EAAW,CAE3B,GAAI1M,EAAKsG,2BAA6B1G,KAAK0G,0BAA2B,CAElE,IADqB,EACY,GAA7B1G,KAAK0F,cAAc3D,OAAa,OAAO,EAC3C,IAAIgL,EAAmB3M,EACvB,GAAIJ,KAAK0F,cAAc3D,QAAUgL,EAAMrH,cAAc3D,OAAQ,OAAO,EACpE,IAAK,IAAI7J,EAAI,EAAGA,EAAI8H,KAAK0F,cAAc3D,OAAQ7J,IAAK,CAChD,IAAI0K,EAAK5C,KAAK0F,cAAcxN,GAE5B,IADc6U,EAAMrH,cAAcxN,GACrBkI,KAAKmL,UAAU3I,EAAGxC,MAAO,OAAO,EAEjD,OAAO,EACJ,2BACH,YAAkBJ,KAAK2M,QAAvB,+CAAgC,CAC5B,GAD4B,QAClBpB,UAAUnL,GAChB,OAAO,GAHZ,kFAOP,OAAO,EAKP,OAHIA,aAAgB,GAASA,EAAKsG,2BAG3B,IAlLnB,6BAwLkBvN,EAAciH,GACxB,OAAOjH,IAzLf,mDA4LwCiB,EAAoBiQ,EAAwBK,GAE5E,OAAOD,EAAoBzK,KAAKuI,aAAcnO,EAAYiQ,EAAgBrK,KAAK5F,WAAYsQ,OA9LnG,GAA+B/K,GAqM/B,SAAS8K,EAAoBE,EAAsBvQ,EAAoBiQ,EACnEC,EACAI,GAEA,IAAIsC,EAA4B,GAC5BC,EAA6B,IAC7BnC,EAAQ,KAERoC,GAAgC,EANV,uBAQ1B,YAAcvC,EAAd,+CAA0B,KAAjBrS,EAAiB,QAElB6U,EAAkB,EACtB,GAAI7U,EAAE8B,YAAcA,GAAc9B,EAAE8I,eAAiBsJ,EAAmB,CAEpEwC,GAAgC,EAEhC,IAAIlL,EAAa1J,EAAE8U,cACnB,GAAI9U,EAAE+U,qBAAuBhD,EAAetI,QAAWC,GAAc1J,EAAE+U,qBAAuBhD,EAAetI,OAAS,CAElH,IAAIuL,GAAQ,EAERpV,EAAI,EAER,IAAKA,EAAI,EAAGA,EAAII,EAAE+U,qBAAuBrL,EAAa,EAAI,GAAI9J,IAAK,CAC/D,IAAIqV,EAAiBjV,EAAEkV,iBAAiBtV,GACpCuV,EAAYpD,EAAenS,GAE/B,GAAiB,MAAbuV,EAAmB,CACnBH,GAAQ,EAAO,MAGnB,GAAIC,GAAkBE,EAAtB,CAIA,IAAIA,EAAUlC,UAAUgC,GAAxB,CAKAD,GAAQ,EACR,MALIH,KASR,GAAGG,GAAStL,EAKJ,IAJJ,IACI0L,EADqBpV,EAAEqV,aAAazV,GACqBkI,KAAMgC,YAGtDwL,EAAI1V,EAAG0V,EAAIvD,EAAetI,OAAQ6L,IAAK,CAC5C,IAAI,EAAYvD,EAAenS,GAE/B,GAAiB,MAAb,EAAmB,CACnBoV,GAAQ,EAAO,MAGnB,GAAII,GAA2B,EAA/B,CAIA,IAAI,EAAUnC,UAAUmC,GAAxB,CAKAJ,GAAQ,EACR,MALIH,KAUZG,GAASH,GAAmBF,IACxBE,EAAkBF,IAClBD,EAAkB,IAEtBA,EAAgBhJ,KAAK1L,GACrB2U,EAAqBE,MA5EX,kFAoF1B,GAA8B,GAA1BH,EAAgBjL,OAEhB,GAAImL,EACA,GAA4B,GAAzB7C,EAAetI,OACd+I,EAAQJ,EAAoB,wDAA0DJ,EAAkB,+CAAiDlQ,EAAa,2FACnK,CACH,IAAIyT,EAAaxD,EAAe1H,KAAI,SAAAvC,GAAI,OAAIA,EAAKhG,cAAYyI,KAAK,MAClEiI,EAAQJ,EAAoB,uBAAH,OAA0BmD,EAA1B,qDAAiFvD,GAAjF,8BAA4HuD,EAA5H,0EAAwMzT,EAAxM,UAG7B0Q,EAAQ,WAAaR,EAAkB,6CAA+ClQ,EAAa,IAU3G,OALI4S,EAAgBjL,OAAS,IACzBiL,EAAkBA,EAAgBV,MAAM,EAAG,IAIxC,CACHxB,MAAOA,EACPH,WAAYqC,GAKd,SAAUc,EAAkBC,EAAiCC,GAE/D,OAA2B,MAAvBA,EACOxK,EAAW2C,QAGlB4H,aAAsB,IAAaA,EAAaA,EAAW5G,OAC3D6G,aAA+B,IAAaA,EAAsBA,EAAoB7G,OAEtF4G,GAAcC,EACPxK,EAAW0I,QAGlB8B,EAAoBC,gBAAgBF,GAC7BvK,EAAWyG,UAGfzG,EAAW2C,Q,uyBClyCf,IAAM,EAAb,YAKI,WAAY/D,GAAiB,a,4FAAA,UACzB,2BACKA,YAAcA,EACnB,EAAKhI,WAAa,QAEA,MAAfgI,IACC,EAAKhI,WAAagI,EAAYhI,WAAa,MAG/C,EAAK8T,gBAAkB,IAAIxN,EAAU,SAAUyN,IAAkB,SAACvU,GAC9D,OAAeA,EAAOT,MAAO4I,UAC9B,EAAOyB,EAAW2C,QAAQ,GAXJ,E,UALjC,O,kOAAA,M,EAAA,G,EAAA,8BAmBkB/F,GACV,OAAQA,aAAgBgO,GAAchO,EAAKgC,YAAYiM,OAAOrO,KAAKoC,eApB3E,oCA2ByB/B,EAAsBC,GACvC,OAAGD,GAAanG,EAAUoU,iBACftO,KAAKoC,YAGT,OAhCf,8BAoCmB/B,EAAsBkC,EAAqBC,GAEtD,GAAGnC,GAAanG,EAAUoU,iBACtB,OAAc/L,EAAapJ,MAAcqJ,EAAcrJ,SAvCnE,gCA4CqBiB,EAAoBuH,GACjC,OAAO,OA7Cf,mCAgDwBvH,GAChB,MAAiB,UAAdA,EACQ4F,KAAKkO,gBAET,OApDf,gCAuDqB9N,GAEb,OAAKA,aAAgBgO,GAIdpO,KAAKoC,YAAYmJ,UAAUnL,EAAKgC,eA7D/C,6BAgEkBjJ,EAAciH,GAExB,IAAImO,EAAkBpV,EAAMA,MAAOmT,QAC/BkC,EAAgCpO,EAAMgC,YAHR,uBAKlC,YAAamM,EAAb,+CAAmB,KAAXrH,EAAW,QACflH,KAAKoC,YAAYqM,OAAOvH,EAAGsH,IANG,kFASlC,MAAO,CACHpO,KAAMA,EACNjH,MAAOoV,KA3EnB,kCAgFuBpV,GAAoC,IAAtB8S,EAAsB,uDAAF,GAE7ClK,EAAiB,EAErB,GAAkB,MAAf5I,EAAMA,MAAc,CAMf,IAJJ,IAAIc,EAAY,IAERiN,EAAsB/N,EAAMA,MAExBjB,EAAI,EAAGA,EAAIgP,EAAEnF,OAAQ7J,IAAI,CAE7B,IAAIqL,EAAI2D,EAAEhP,GAENwW,EAAKnL,EAAEnD,KAAKgM,YAAY7I,EAAG0I,EAAU,GAMzC,GAJAhS,GAAKyU,EACFxW,EAAIgP,EAAEnF,OAAS,IAAG9H,GAAK,YAC1B8H,GAAU2M,EAAG3M,QAEDkK,EAAW,MAI/B,OAAOhS,EAAI,IAER,MAAO,SA1GtB,yBAwBQ,OAAO+F,KAAKoC,YAAYhI,WAAa,U,2BAxB7C,GAA+BuF,G,ioBCWxB,IAAM,GAAb,YAEI,WAAY1H,GAAc,a,4FAAA,UACtB,wBAAM,SAAUA,EAAQ,+BAInBwR,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IAAK2I,IACzD,SAACvJ,GAEG,MAAO,IAA+BA,EAAW,GAAG1I,MAAO8J,MAAM7I,WAAa,OAE/E,GAAO,IAVQ,EAF9B,O,kOAAA,SAAiC,G,0lCCV1B,IAAM,GAAb,YAII,WAAY+I,GAAgB,a,4FAAA,UACxB,0BAAM,UAAW,KAAM,qEAH3BwL,YAAc,GAIV,EAAKxL,UAAYA,EAEjB,EAAKuG,aAAa,IAAIhJ,EAAU,YAAayN,IAAkB,SAAChV,GAAYA,EAAMA,MAAQyV,OAAOC,oBAAoB,EAAMrL,EAAW2C,QAAQ,EAAM,iEACpJ,EAAKuD,aAAa,IAAIhJ,EAAU,YAAayN,IAAkB,SAAChV,GAAYA,EAAMA,MAAQyV,OAAOE,oBAAoB,EAAMtL,EAAW2C,QAAQ,EAAM,mEAEpJ,EAAKC,YAAYmG,YAAc,IAAI,EAAc,EAAKnG,aACtD,EAAKA,YAAYmG,YAAYwC,4BARL,E,UAJhC,O,mOAAA,M,EAAA,G,EAAA,iCAgBc3O,GACN,OAAOJ,KAAK2O,YAAY/J,QAAQxE,IAAS,GAAlC,+BAAAJ,MAAA,KAAAA,KAAuDI,KAjBtE,6BAsBQJ,KAAK2O,YAAc,CAACR,GAAkBa,GAAoBC,IAE1DjP,KAAKyJ,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,WAAYgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACpG,MACA,SAACe,GAEGA,EAAW,GAAG1I,MAAQ0I,EAAW,GAAG1I,SAErC,GAAO,EAAO,wCAAwC,IAE7D6G,KAAKyJ,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,OAAQgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACnG,MACA,SAACe,GAEGA,EAAW,GAAG1I,MAAQyV,OAAOO,SAAStN,EAAW,GAAG1I,UAErD,GAAO,EAAO,+GAA+G,IAGpI6G,KAAKyJ,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,IAAKwM,IAC5D,SAACpN,GAAiB,OAAOA,EAAW,GAAG1I,SAAU,GAAO,EAAO,uDACnE6G,KAAKyJ,UAAU,IAAI1I,EAAO,aAAc,IAAI0B,EAAc,IAAKuM,IAC3D,SAACnN,GAAiB,OAAOA,EAAW,GAAG1I,SAAU,GAAO,EAAO,sDACnE6G,KAAKyJ,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IAAK0L,IACzD,SAACtM,GAAiB,OAAOA,EAAW,GAAG1I,SAAU,GAAO,EAAO,oDAEnE6G,KAAKyJ,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,CACrD,CAAErI,WAAY,iBAAkBgG,KAAMJ,KAAMkP,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC9FqN,IACA,SAACtM,GACG,IAAIuN,EAAKvN,EAAW,GAAG1I,MACnBkW,EAAKxN,EAAW,GAAG1I,MACvB,OAAIiW,EAAKC,EAAW,EAChBD,EAAKC,GAAY,EACd,KACR,GAAO,EAAO,qKAErBrP,KAAKyJ,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,iBAAkBgG,KAAMJ,KAAMkP,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC9FwO,IACA,SAACzN,GACG,OAAOA,EAAW,GAAG1I,OAAS0I,EAAW,GAAG1I,SAC7C,GAAO,EAAO,gFAErB6G,KAAKyJ,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IACpD2I,IACA,SAACvJ,GACG,MAAO,GAAKA,EAAW,GAAG1I,SAC3B,GAAO,EAAO,mEAErB6G,KAAKyJ,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IACpD0L,IACA,SAACtM,GACG,OAAOA,EAAW,GAAG1I,SACtB,GAAO,EAAO,0CAErB6G,KAAKyJ,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,IAAKgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChGqN,IACA,SAACtM,GACG,OAAO+M,OAAOO,SAAStN,EAAW,GAAG1I,UACtC,GAAO,EAAM,kDAEpB6G,KAAKyJ,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,IAAKgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,QAASgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACjGqN,IACA,SAACtM,GACG,OAAO+M,OAAOO,SAAStN,EAAW,GAAG1I,MAAO0I,EAAW,GAAG1I,UAC3D,GAAO,EAAM,8HAEpB6G,KAAKyJ,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,IAAKgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC7FqN,IACA,SAACtM,GACG,OAAOwJ,KAAKkE,KAAK1N,EAAW,GAAG1I,UAChC,GAAO,EAAM,wGAEpB6G,KAAKyJ,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,IAAKgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC7FsK,IACA,SAACvJ,GACG,OAAQA,EAAW,GAAG1I,QAAU,GAAGqW,SAAS,MAC7C,GAAO,EAAM,6DAEpBxP,KAAKyJ,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,CACjD,CAAErI,WAAY,IAAKgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC7FsK,IACA,SAACvJ,GACG,OAAQA,EAAW,GAAG1I,QAAU,GAAGqW,SAAS,OAC7C,GAAO,EAAM,mEAEpBxP,KAAKyJ,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,IAAKgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC7FsK,IACA,SAACvJ,GACG,OAAQA,EAAW,GAAG1I,QAAU,GAAGqW,SAAS,MAC7C,GAAO,EAAM,6DAEpBxP,KAAKyJ,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,IAAKgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC7FsK,IACA,SAACvJ,GACG,OAAQA,EAAW,GAAG1I,MAAOqW,cAC9B,GAAO,EAAM,kEAEpBxP,KAAKyJ,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,IAAKgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC7F,CAAE1G,WAAY,QAASgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACjGsK,IACA,SAACvJ,GACG,OAAQA,EAAW,GAAG1I,QAAU,GAAGqW,SAAS3N,EAAW,GAAG1I,UAC3D,GAAO,EAAM,qEAEpB6G,KAAKyJ,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,IAAKgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC7Fd,MACA,SAAC6B,GACG,OAAOA,EAAW,GAAG1I,SACtB,GAAO,EAAM,wDAEpB6G,KAAKyJ,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,IAAKgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChGd,MACA,SAAC6B,GACG,OAAO+M,OAAOO,SAAStN,EAAW,GAAG1I,UACtC,GAAO,EAAM,qGAEpB6G,KAAKyJ,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,IAAKgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,QAASgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACjGd,MACA,SAAC6B,GACG,OAAO+M,OAAOO,SAAStN,EAAW,GAAG1I,MAAO0I,EAAW,GAAG1I,UAC3D,GAAO,EAAM,gHA9J5B,kCAqKuBA,GACf,MAAO,GAAaA,EAAMA,W,6BAtKlC,GAAkC,G,0lCCA3B,IAAM,GAAb,YAII,WAAYgK,GAAgB,a,4FAAA,UACxB,0BAAM,QAAS,KAAM,uEAHzBwL,YAAc,GAIV,EAAKxL,UAAYA,EAEjB,EAAKuG,aAAa,IAAIhJ,EAAU,YAAasO,IAAoB,SAAC7V,GAAYA,EAAMA,MAAQyV,OAAOa,aAAa,EAAMjM,EAAW2C,QAAQ,EAAM,mEAC/I,EAAKuD,aAAa,IAAIhJ,EAAU,YAAasO,IAAoB,SAAC7V,GAAYA,EAAMA,MAAQyV,OAAOc,aAAa,EAAMlM,EAAW2C,QAAQ,EAAM,qEAC/I,EAAKuD,aAAa,IAAIhJ,EAAU,YAAasO,IAAoB,SAAC7V,GAAYA,EAAMA,MAAQyV,OAAOe,OAAO,EAAMnM,EAAW2C,QAAQ,EAAM,0CACzI,EAAKuD,aAAa,IAAIhJ,EAAU,oBAAqBsO,IAAoB,SAAC7V,GAAYA,EAAMA,MAAQyV,OAAOgB,qBAAqB,EAAMpM,EAAW2C,QAAQ,EAAM,+CAC/J,EAAKuD,aAAa,IAAIhJ,EAAU,oBAAqBsO,IAAoB,SAAC7V,GAAYA,EAAMA,MAAQyV,OAAOiB,qBAAqB,EAAMrM,EAAW2C,QAAQ,EAAM,+CAE/J,EAAKC,YAAYmG,YAAc,IAAI,EAAc,EAAKnG,aACtD,EAAKA,YAAYmG,YAAYwC,4BAXL,E,UAJhC,O,mOAAA,M,EAAA,G,EAAA,iCAmBc3O,GACN,OAAOJ,KAAK2O,YAAY/J,QAAQxE,IAAS,GAAlC,+BAAAJ,MAAA,KAAAA,KAAuDI,KApBtE,6BAyBQJ,KAAK2O,YAAc,CAACK,GAAoBC,IAExCjP,KAAKyJ,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,CACjD,CAAErI,WAAY,eAAgBgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC3G,MACA,SAACe,GAEGA,EAAW,GAAG1I,MAAQ0I,EAAW,GAAG1I,SAErC,GAAO,EAAO,sCAAsC,IAE3D6G,KAAKyJ,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,CACjD,CAAErI,WAAY,YAAagG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACrG,MACA,SAACe,GAEGA,EAAW,GAAG1I,MAAQ0I,EAAW,GAAG1I,SAErC,GAAO,EAAO,sCAAsC,IAE3D6G,KAAKyJ,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,CACjD,CAAErI,WAAY,OAAQgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACnG,MACA,SAACe,GAEGA,EAAW,GAAG1I,MAAQyV,OAAOkB,WAAWjO,EAAW,GAAG1I,UAEvD,GAAO,EAAO,+GAA+G,IAGpI6G,KAAKyJ,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,IAAKwM,IAC5D,SAACpN,GAAiB,OAAOA,EAAW,GAAG1I,SAAU,GAAO,EAAO,sDACnE6G,KAAKyJ,UAAU,IAAI1I,EAAO,aAAc,IAAI0B,EAAc,IAAKuM,IAC3D,SAACnN,GAAiB,OAAOA,EAAW,GAAG1I,SAAU,GAAO,EAAO,qDACnE6G,KAAKyJ,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IAAK0L,IACzD,SAACtM,GAAiB,OAAOwJ,KAAK0E,MAAMlO,EAAW,GAAG1I,UAAW,GAAO,EAAO,kEAE/E6G,KAAKyJ,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,CACrD,CAAErI,WAAY,eAAgBgG,KAAMJ,KAAMkP,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC5FqN,IACA,SAACtM,GACG,IAAIuN,EAAKvN,EAAW,GAAG1I,MACnBkW,EAAKxN,EAAW,GAAG1I,MACvB,OAAIiW,EAAKC,EAAW,EAChBD,EAAKC,GAAY,EACd,KACR,GAAO,EAAO,qKAErBrP,KAAKyJ,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,eAAgBgG,KAAMJ,KAAMkP,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC5FwO,IACA,SAACzN,GACG,OAAOA,EAAW,GAAG1I,OAAS0I,EAAW,GAAG1I,SAC7C,GAAO,EAAO,gFAErB6G,KAAKyJ,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IACpD2I,IACA,SAACvJ,GACG,MAAO,GAAKA,EAAW,GAAG1I,SAC3B,GAAO,EAAO,sDAErB6G,KAAKyJ,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IACpD0L,IACA,SAACtM,GACG,OAAOwJ,KAAK0E,MAAMlO,EAAW,GAAG1I,UACjC,GAAO,EAAO,0CAErB6G,KAAKyJ,UAAU,IAAI1I,EAAO,aAAc,IAAI0B,EAAc,CACtD,CAAErI,WAAY,IAAKgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChGkO,IACA,SAACnN,GACG,OAAO+M,OAAOkB,WAAWjO,EAAW,GAAG1I,UACxC,GAAO,EAAM,oDAEpB6G,KAAKyJ,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,IAAKgG,KAAM4O,GAAoBE,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC/FsK,IACA,SAACvJ,GACG,MAAO,GAAKA,EAAW,GAAG1I,SAC3B,GAAO,EAAM,qDAEpB6G,KAAKyJ,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,IAAKgG,KAAM4O,GAAoBE,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC/Fd,MACA,SAAC6B,GACG,OAAOA,EAAW,GAAG1I,SACtB,GAAO,EAAM,sDAEpB6G,KAAKyJ,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,IAAKgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChGd,MACA,SAAC6B,GACG,OAAO+M,OAAOkB,WAAWjO,EAAW,GAAG1I,UACxC,GAAO,EAAM,mGAEpB6G,KAAKyJ,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,CACjD,CAAErI,WAAY,IAAKgG,KAAM4O,GAAoBE,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC/FwO,IACA,SAACzN,GACG,OAA8B8N,KAAvB9N,EAAW,GAAG1I,SACtB,GAAO,EAAM,yFAEpB6G,KAAKyJ,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,IACjD6M,IACA,SAACzN,GACG,OAA8B8N,KAAvB9N,EAAW,GAAG1I,SACtB,GAAO,EAAO,0EAErB6G,KAAKyJ,UAAU,IAAI1I,EAAO,aAAc,IAAI0B,EAAc,CACtD,CAAErI,WAAY,IAAKgG,KAAM4O,GAAoBE,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC/FwO,IACA,SAACzN,GACG,OAAOA,EAAW,GAAG1I,OAAS6W,OAC/B,GAAO,EAAM,gFAEpBhQ,KAAKyJ,UAAU,IAAI1I,EAAO,aAAc,IAAI0B,EAAc,IACtD6M,IACA,SAACzN,GACG,OAAOA,EAAW,GAAG1I,OAAS6W,OAC/B,GAAO,EAAO,kEAhJ7B,kCAoJuB7W,GACf,MAAO,GAAaA,EAAMA,W,6BArJlC,GAAgC,G,0lCCAzB,IAAM,GAAb,YAII,WAAYgK,GAAgB,a,4FAAA,UACxB,0BAAM,YAAa,KAAM,sEAH7BwL,YAAc,GAIV,EAAKxL,UAAYA,EAEjB,EAAKiD,YAAYmG,YAAc,IAAI,EAAc,EAAKnG,aACtD,EAAKA,YAAYmG,YAAYwC,4BALL,E,UAJhC,O,mOAAA,M,EAAA,G,EAAA,iCAac3O,GACN,OAAOJ,KAAK2O,YAAY/J,QAAQxE,IAAS,GAAlC,+BAAAJ,MAAA,KAAAA,KAAuDI,KAdtE,6BAmBQJ,KAAK2O,YAAc,CAACsB,GAAmB7E,IAEvCpL,KAAKyJ,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,CACrD,CAAErI,WAAY,aAAcgG,KAAM6P,GAAmBf,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACvG,MACA,SAACe,GAEGA,EAAW,GAAG1I,MAAQ0I,EAAW,GAAG1I,SAErC,GAAO,EAAO,0CAA0C,IAG/D6G,KAAKyJ,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,IAAKwN,IAC1D,SAACpO,GAAiB,OAAOA,EAAW,GAAG1I,SAAU,GAAO,EAAO,uDAEnE6G,KAAKyJ,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,CACrD,CAAErI,WAAY,mBAAoBgG,KAAMJ,KAAMkP,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChGqN,IACA,SAACtM,GACG,IAAIuN,EAAKvN,EAAW,GAAG1I,MACnBkW,EAAKxN,EAAW,GAAG1I,MACvB,OAAIiW,EAAKC,EAAW,EAChBD,EAAKC,GAAY,EACd,KACR,GAAO,EAAO,qKAErBrP,KAAKyJ,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,mBAAoBgG,KAAMJ,KAAMkP,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChGwO,IACA,SAACzN,GACG,OAAOA,EAAW,GAAG1I,OAAS0I,EAAW,GAAG1I,SAC7C,GAAO,EAAO,gFAErB6G,KAAKyJ,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IACpD2I,IACA,SAACvJ,GACG,OAAOA,EAAW,GAAG1I,SACtB,GAAO,EAAO,sDAErB6G,KAAKyJ,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IACpD0L,IACA,SAACtM,GACG,OAAgBA,EAAW,GAAG1I,MAAO+W,WAAW,MACjD,GAAO,EAAO,0CAErBlQ,KAAKyJ,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,IACrDwN,IACA,SAACpO,GACG,OAAOA,EAAW,GAAG1I,SACtB,GAAO,EAAO,2CAErB6G,KAAKyJ,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,CACjD,CAAErI,WAAY,aAAcgG,KAAM6P,GAAmBf,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACvG,CAAE1G,WAAY,QAASgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACjGqN,IACA,SAACtM,GACG,OAAO+M,OAAOO,SAAStN,EAAW,GAAG1I,MAAO0I,EAAW,GAAG1I,UAC3D,GAAO,EAAM,mEAEpB6G,KAAKyJ,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,YAAagG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACrG,CAAE1G,WAAY,QAASgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACjGmP,IACA,SAACpO,GACG,OAAgBA,EAAW,GAAG1I,MAAOqW,SAAS3N,EAAW,GAAG1I,OAAOgX,OAAO,MAC3E,GAAO,EAAM,iFAEpBnQ,KAAKyJ,UAAU,IAAI1I,EAAO,kBAAmB,IAAI0B,EAAc,CAC3D,CAAErI,WAAY,aAAcgG,KAAM6P,GAAmBf,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACvGqN,IACA,SAACtM,GACG,OAAgBA,EAAW,GAAG1I,MAAO+W,WAAW,MACjD,GAAO,EAAM,qEAEpBlQ,KAAKyJ,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,aAAcgG,KAAM6P,GAAmBf,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACvGwO,IACA,SAACzN,GACG,OAA4D,MAA5CA,EAAW,GAAG1I,MAAOiX,MAAM,iBAC5C,GAAO,EAAM,sFAEpBpQ,KAAKyJ,UAAU,IAAI1I,EAAO,kBAAmB,IAAI0B,EAAc,CAC3D,CAAErI,WAAY,aAAcgG,KAAM6P,GAAmBf,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACvGwO,IACA,SAACzN,GACG,OAA+D,MAA/CA,EAAW,GAAG1I,MAAOiX,MAAM,oBAC5C,GAAO,EAAM,uGAEpBpQ,KAAKyJ,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,aAAcgG,KAAM6P,GAAmBf,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACvGwO,IACA,SAACzN,GACG,OAAwD,MAAxCA,EAAW,GAAG1I,MAAOiX,MAAM,aAC5C,GAAO,EAAM,mEAEhBpQ,KAAKyJ,UAAU,IAAI1I,EAAO,eAAgB,IAAI0B,EAAc,CAC5D,CAAErI,WAAY,aAAcgG,KAAM6P,GAAmBf,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACvGwO,IACA,SAACzN,GACG,OAA4D,MAA5CA,EAAW,GAAG1I,MAAOiX,MAAM,iBAC5C,GAAO,EAAM,4GAEpBpQ,KAAKyJ,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,CACvD,CAAErI,WAAY,aAAcgG,KAAM6P,GAAmBf,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACvGmP,IACA,SAACpO,GACG,OAAgBA,EAAW,GAAG1I,MAAOkX,uBACtC,GAAO,EAAM,8CAEpBrQ,KAAKyJ,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,CACvD,CAAErI,WAAY,aAAcgG,KAAM6P,GAAmBf,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACvGmP,IACA,SAACpO,GACG,OAAgBA,EAAW,GAAG1I,MAAOmX,uBACtC,GAAO,EAAM,+CAEpBtQ,KAAKyJ,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,aAAcgG,KAAM6P,GAAmBf,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACvGd,MACA,SAAC6B,GACG,OAAOA,EAAW,GAAG1I,SACtB,GAAO,EAAM,wDA5I5B,kCAiJuBA,GACf,MAAO,GAAaA,EAAMA,W,6BAlJlC,GAAoC,G,qhCCA7B,IAAM,GAAb,YAII,WAAYgK,GAAgB,M,IAAA,O,4FAAA,S,EACxB,U,EAAA,gBAAM,UAAW,KAAM,yE,gDAH3BwL,YAAc,GAIV,EAAKxL,UAAYA,EAEjB,EAAKuG,aAAa,IAAIhJ,EAAU,OAAd,OAA4B,SAACvH,GAAYA,EAAMA,OAAQ,KAAQ,EAAMqK,EAAW2C,QAAQ,EAAM,+CAChH,EAAKuD,aAAa,IAAIhJ,EAAU,QAAd,OAA6B,SAACvH,GAAYA,EAAMA,OAAQ,KAAS,EAAMqK,EAAW2C,QAAQ,EAAM,gDAElH,EAAKC,YAAYmG,YAAc,IAAI,EAAc,EAAKnG,aACtD,EAAKA,YAAYmG,YAAYwC,4BARL,E,UAJhC,O,mOAAA,M,EAAA,G,EAAA,iCAgBc3O,GACN,OAAOJ,KAAK2O,YAAY/J,QAAQxE,IAAS,GAAlC,+BAAAJ,MAAA,KAAAA,KAAuDI,KAjBtE,6BAsBQJ,KAAK2O,YAAc,CAACW,IAEpBtP,KAAKyJ,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,gBAAiBgG,KAAMkP,GAAsBJ,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC7G,MACA,SAACe,GAEGA,EAAW,GAAG1I,MAAQ0I,EAAW,GAAG1I,SAErC,GAAO,EAAO,wCAAwC,IAE7D6G,KAAKyJ,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,eAAgBgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC3G,MACA,SAACe,GAEGA,EAAW,GAAG1I,MAAyB,MAAjB0I,EAAW,IAAmD,QAArCA,EAAW,GAAG1I,MAAMoX,iBAEpE,GAAO,EAAO,qLAAuL,IAE5MvQ,KAAKyJ,UAAU,IAAI1I,EAAO,eAAgB,IAAI0B,EAAc,IAAK6M,IAC7D,SAACzN,GAAiB,OAAOA,EAAW,GAAG1I,SAAU,GAAO,EAAO,wDAEnE6G,KAAKyJ,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,CACrD,CAAErI,WAAY,iBAAkBgG,KAAMJ,KAAMkP,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC9FqN,IACA,SAACtM,GAGG,OAFSA,EAAW,GAAG1I,OACd0I,EAAW,GAAG1I,MACL,EAAI,KACvB,GAAO,EAAO,sGAErB6G,KAAKyJ,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,iBAAkBgG,KAAMJ,KAAMkP,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC9FwO,IACA,SAACzN,GACG,OAAOA,EAAW,GAAG1I,OAAS0I,EAAW,GAAG1I,SAC7C,GAAO,EAAO,gFAErB6G,KAAKyJ,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IACpD2I,IACA,SAACvJ,GACG,MAAO,GAAKA,EAAW,GAAG1I,SAC3B,GAAO,EAAO,sDAErB6G,KAAKyJ,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IACpD0L,IACA,SAACtM,GACG,OAAiBA,EAAW,GAAG1I,MAAS,EAAI,KAC7C,GAAO,EAAO,0CAErB6G,KAAKyJ,UAAU,IAAI1I,EAAO,eAAgB,IAAI0B,EAAc,IACxD6M,IACA,SAACzN,GACG,OAAOA,EAAW,GAAG1I,SACtB,GAAO,EAAO,8CAErB6G,KAAKyJ,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,gBAAiBgG,KAAMkP,GAAsBJ,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC7Gd,MACA,SAAC6B,GACG,OAAOA,EAAW,GAAG1I,SACtB,GAAO,EAAM,uDAEpB6G,KAAKyJ,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,eAAgBgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC3GwO,IACA,SAACzN,GACG,OAA8B,MAAvBA,EAAW,GAAG1I,OAAgE,QAAtC0I,EAAW,GAAG1I,MAAOoX,iBACrE,GAAO,EAAM,iMAEpBvQ,KAAKyJ,UAAU,IAAI1I,EAAO,eAAgB,IAAI0B,EAAc,CACxD,CAAErI,WAAY,eAAgBgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC3GwO,IACA,SAACzN,GACG,OAA8B,MAAvBA,EAAW,GAAG1I,OAAgE,QAAtC0I,EAAW,GAAG1I,MAAOoX,iBACrE,GAAO,EAAM,mMAlG5B,kCAuGuBpX,GACf,MAAO,GAAaA,EAAMA,W,6BAxGlC,GAAkC,G,0lCCA3B,I,GAAM,GAAb,YAII,WAAYgK,GAAgB,a,4FAAA,UACxB,0BAAM,SAAU,KAAM,wEAH1BwL,YAAc,GAIV,EAAKxL,UAAYA,EAEjB,EAAKuG,aAAa,IAAIhJ,EAAU,YAAauO,IAAqB,SAAC9V,GAAYA,EAAMA,MAAQyV,OAAOa,aAAa,EAAMjM,EAAW2C,QAAQ,EAAM,oEAChJ,EAAKuD,aAAa,IAAIhJ,EAAU,YAAauO,IAAqB,SAAC9V,GAAYA,EAAMA,MAAQyV,OAAOc,aAAa,EAAMlM,EAAW2C,QAAQ,EAAM,sEAChJ,EAAKuD,aAAa,IAAIhJ,EAAU,YAAauO,IAAqB,SAAC9V,GAAYA,EAAMA,MAAQyV,OAAOe,OAAO,EAAMnM,EAAW2C,QAAQ,EAAM,2CAC1I,EAAKuD,aAAa,IAAIhJ,EAAU,oBAAqBuO,IAAqB,SAAC9V,GAAYA,EAAMA,MAAQyV,OAAOgB,qBAAqB,EAAMpM,EAAW2C,QAAQ,EAAM,gDAChK,EAAKuD,aAAa,IAAIhJ,EAAU,oBAAqBuO,IAAqB,SAAC9V,GAAYA,EAAMA,MAAQyV,OAAOiB,qBAAqB,EAAMrM,EAAW2C,QAAQ,EAAM,gDAEhK,EAAKC,YAAYmG,YAAc,IAAI,EAAc,EAAKnG,aACtD,EAAKA,YAAYmG,YAAYwC,4BAXL,E,UAJhC,O,mOAAA,M,EAAA,G,EAAA,iCAmBc3O,GACN,OAAOJ,KAAK2O,YAAY/J,QAAQxE,IAAS,GAAlC,+BAAAJ,MAAA,KAAAA,KAAuDI,KApBtE,6BAyBQJ,KAAK2O,YAAc,CAACM,IAEpBjP,KAAKyJ,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,eAAgBgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC3G,MACA,SAACe,GAEGA,EAAW,GAAG1I,MAAQ0I,EAAW,GAAG1I,SAErC,GAAO,EAAO,uCAAuC,IAE5D6G,KAAKyJ,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,YAAagG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACrG,MACA,SAACe,GAEGA,EAAW,GAAG1I,MAAQ0I,EAAW,GAAG1I,SAErC,GAAO,EAAO,uCAAuC,IAE5D6G,KAAKyJ,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,OAAQgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACnG,MACA,SAACe,GAEGA,EAAW,GAAG1I,MAAQyV,OAAOkB,WAAWjO,EAAW,GAAG1I,UAEvD,GAAO,EAAO,iHAAiH,IAGtI6G,KAAKyJ,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,IAAKwM,IAC5D,SAACpN,GAAiB,OAAOA,EAAW,GAAG1I,SAAU,GAAO,EAAO,uDACnE6G,KAAKyJ,UAAU,IAAI1I,EAAO,aAAc,IAAI0B,EAAc,IAAKuM,IAC3D,SAACnN,GAAiB,OAAOA,EAAW,GAAG1I,SAAU,GAAO,EAAO,sDACnE6G,KAAKyJ,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IAAK0L,IACzD,SAACtM,GAAiB,OAAOwJ,KAAK0E,MAAMlO,EAAW,GAAG1I,UAAW,GAAO,EAAO,mEAE/E6G,KAAKyJ,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,CACrD,CAAErI,WAAY,gBAAiBgG,KAAMJ,KAAMkP,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC7FqN,IACA,SAACtM,GACG,IAAIuN,EAAKvN,EAAW,GAAG1I,MACnBkW,EAAKxN,EAAW,GAAG1I,MACvB,OAAIiW,EAAKC,EAAW,EAChBD,EAAKC,GAAY,EACd,KACR,GAAO,EAAO,qKAErBrP,KAAKyJ,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,gBAAiBgG,KAAMJ,KAAMkP,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC7FwO,IACA,SAACzN,GACG,OAAOA,EAAW,GAAG1I,OAAS0I,EAAW,GAAG1I,SAC7C,GAAO,EAAO,gFAErB6G,KAAKyJ,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IACpD2I,IACA,SAACvJ,GACG,MAAO,GAAKA,EAAW,GAAG1I,SAC3B,GAAO,EAAO,sDAErB6G,KAAKyJ,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IACpD0L,IACA,SAACtM,GACG,OAAOwJ,KAAK0E,MAAMlO,EAAW,GAAG1I,UACjC,GAAO,EAAO,0CAErB6G,KAAKyJ,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,CACvD,CAAErI,WAAY,IAAKgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChGmO,IACA,SAACpN,GACG,OAAO+M,OAAOkB,WAAWjO,EAAW,GAAG1I,UACxC,GAAO,EAAM,qDAEpB6G,KAAKyJ,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChGsK,IACA,SAACvJ,GACG,MAAO,GAAKA,EAAW,GAAG1I,SAC3B,GAAO,EAAM,qDAEpB6G,KAAKyJ,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChGd,MACA,SAAC6B,GACG,OAAOA,EAAW,GAAG1I,SACtB,GAAO,EAAM,uDAEpB6G,KAAKyJ,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,IAAKgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChGd,MACA,SAAC6B,GACG,OAAO+M,OAAOkB,WAAWjO,EAAW,GAAG1I,UACxC,GAAO,EAAM,oGAEpB6G,KAAKyJ,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,CACjD,CAAErI,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChGwO,IACA,SAACzN,GACG,OAA8B8N,KAAvB9N,EAAW,GAAG1I,SACtB,GAAO,EAAM,0FAEpB6G,KAAKyJ,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,IACjD6M,IACA,SAACzN,GACG,OAA8B8N,KAAvB9N,EAAW,GAAG1I,SACtB,GAAO,EAAO,0EAErB6G,KAAKyJ,UAAU,IAAI1I,EAAO,aAAc,IAAI0B,EAAc,CACtD,CAAErI,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChGwO,IACA,SAACzN,GACG,OAAOA,EAAW,GAAG1I,OAAS6W,OAC/B,GAAO,EAAM,iFAEpBhQ,KAAKyJ,UAAU,IAAI1I,EAAO,aAAc,IAAI0B,EAAc,IACtD6M,IACA,SAACzN,GACG,OAAOA,EAAW,GAAG1I,OAAS6W,OAC/B,GAAO,EAAO,kEAhJ7B,kCAoJuB7W,GACf,MAAO,GAAaA,EAAMA,W,6BArJlC,GAAiC,G,ylDCK1B,IAAM,GAAb,YAEI,sCACI,6BACKiB,WAAa,OAFtB,EAFJ,yDAOkBiG,EAAsBC,GAChC,OAAO,OARf,8BAUYD,EAAsBkC,EAAqBC,GAC/C,OAAO,OAXf,gCAacpC,GACN,OAAQA,aAAgB,GAASA,aAAgB,IAdzD,6BAgBWjH,EAAciH,GACjB,OAAOjH,IAjBf,6BAmBWiH,GACH,OAAQA,aAAgB,GAASA,aAAgB,IApBzD,kCAuBuBjH,GACf,MAAO,WAxBf,GAA8BwG,GA4BjB,GAAb,YAEI,sCACI,6BACKvF,WAAa,MAFtB,EAFJ,yDAOkBiG,EAAsBC,GAChC,OAAO,OARf,8BAUYD,EAAsBkC,EAAqBC,GAC/C,OAAO,OAXf,gCAacpC,GACN,OAAQA,aAAgB,GAASA,aAAgB,IAdzD,6BAgBWjH,EAAciH,GACjB,OAAOjH,IAjBf,6BAmBWiH,GACH,OAAQA,aAAgB,GAASA,aAAgB,IApBzD,kCAuBuBjH,GACf,MAAO,UAxBf,GAA6BwG,GA4BhB,GAAb,kIAEQ,MACAK,KAAKE,aAAe,EAEpBF,KAAK5F,WAAa,MAElB4F,KAAKG,YAAc,aAEnBH,KAAKQ,gBAAL,QACKtG,EAAUoD,KAAO,CAAE,IAAO6Q,GAAkB,QAAWA,GAAkB,MAASa,GAAoB,MAASA,GAAoB,OAAUC,GAAqB,OAAUA,GAAqB,OAAU7D,KADhN,KAEKlR,EAAUkD,MAAQ,CAAE,KAAQ+Q,GAAkB,IAAOA,GAAkB,QAAWA,GAAkB,MAASa,GAAoB,MAASA,GAAoB,OAAUC,GAAqB,OAAUA,KAF5M,KAGK/U,EAAUqD,eAAiB,CAAE,IAAO4Q,GAAkB,QAAWA,GAAkB,MAASa,GAAoB,MAASA,GAAoB,OAAUC,GAAqB,OAAUA,KAH3L,KAIK/U,EAAUmD,OAAS,CAAE,IAAO8Q,GAAkB,QAAWA,KAJ9D,KAKKjU,EAAUsD,SAAW,CAAE,IAAO2Q,GAAkB,QAAWA,GAAkB,MAASa,GAAoB,MAASA,GAAoB,OAAUC,GAAqB,OAAUA,KALrL,KAMK/U,EAAU0D,WAAa,CAAE,KAAQuQ,KANtC,KAOKjU,EAAUyD,YAAc,CAAE,KAAQwQ,KAPvC,KAQKjU,EAAUsW,SAAW,CAAE,KAAQrC,KARpC,KASKjU,EAAU2D,MAAQ,CAAE,IAAOyR,GAAsB,MAASA,GAAsB,OAAUA,GAAsB,QAAWA,GAAsB,MAASA,GAAsB,OAAUA,KAT/L,KAUKpV,EAAU4D,QAAU,CAAE,IAAOwR,GAAsB,MAASA,GAAsB,OAAUA,GAAsB,QAAWA,GAAsB,MAASA,GAAsB,OAAUA,KAVjM,KAWKpV,EAAU6D,aAAe,CAAE,IAAOuR,GAAsB,MAASA,GAAsB,OAAUA,GAAsB,QAAWA,GAAsB,MAASA,GAAsB,OAAUA,KAXtM,KAYKpV,EAAU8D,eAAiB,CAAE,IAAOsR,GAAsB,MAASA,GAAsB,OAAUA,GAAsB,QAAWA,GAAsB,MAASA,GAAsB,OAAUA,KAZxM,KAaKpV,EAAU+D,MAAQ,CAAE,IAAOqR,GAAsB,MAASA,GAAsB,OAAUA,GAAsB,QAAWA,GAAsB,MAASA,GAAsB,OAAUA,KAb/L,KAcKpV,EAAUgE,SAAW,CAAE,IAAOoR,GAAsB,MAASA,GAAsB,OAAUA,GAAsB,QAAWA,GAAsB,MAASA,GAAsB,OAAUA,KAdlM,GAmBAtP,KAAKS,aAAe,CAChB,MAAS,CAAEgQ,WAAW,EAAMC,gBAAgB,GAC5C,OAAU,CAAED,WAAW,EAAMC,gBAAgB,GAC7C,OAAU,CAAED,WAAW,EAAMC,gBAAgB,GAC7C,KAAQ,CAAED,WAAW,EAAMC,gBAAgB,GAC3C,IAAO,CAAED,WAAW,EAAMC,gBAAgB,GAC1C,QAAW,CAAED,WAAW,EAAMC,gBAAgB,MAlC1D,oCAyCQ,OAAOxW,EAAUG,kBAzCzB,6BA4CkBlB,EAAciH,GAExB,OAAIA,GAAQ4O,IAAsB5O,GAAQ6O,GAC/B,CACH7O,KAAMA,EACNjH,MAAOA,EAAMA,OAIjBiH,GAAQgL,GACD,CACHhL,KAAMA,EACNjH,MAAO,GAAaA,EAAMA,OAI9BiH,GAAQ6P,GACD,CACH7P,KAAMA,EACNjH,MAAOwX,OAAOC,aAAqBzX,EAAMA,aAHjD,IA5DR,8BAsEmBkH,EAAsBkC,EAAqBC,GAEtD,IAAIrJ,EAAiBoJ,EAAapJ,MAElC,OAAQkH,GACJ,KAAKnG,EAAUoD,KACX,OAAIkF,EAAcpC,KACPjH,EAAiBqJ,EAAcrJ,MAK9C,KAAKe,EAAUkD,MACX,OAAqB,MAAjBoF,GAA+BrJ,EAC5BA,EAAiBqJ,EAAcrJ,MAE1C,KAAKe,EAAUqD,eACX,OAAOpE,EAAiBqJ,EAAcrJ,MAE1C,KAAKe,EAAUsD,SACX,OAAIgF,EAAcpC,MAAQ+N,GACf9C,KAAK0E,MAAM5W,EAAiBqJ,EAAcrJ,OAE9CA,EAAiBqJ,EAAcrJ,MAE1C,KAAKe,EAAUmD,OACX,OAAImF,EAAcpC,MAAQ+N,GACf9C,KAAK0E,MAAM5W,EAAiBqJ,EAAcrJ,OAE9C,EAEX,KAAKe,EAAU0D,WACX,OAAOzE,IAEX,KAAKe,EAAUyD,YACX,OAAOxE,IAEX,KAAKe,EAAUsW,SACX,OAAQrX,EAEZ,KAAKe,EAAU2D,MACX,OAAO1E,EAAkBqJ,EAAcrJ,MAE3C,KAAKe,EAAU4D,QACX,OAAO3E,EAAiBqJ,EAAcrJ,MAE1C,KAAKe,EAAU6D,aACX,OAAO5E,GAAkBqJ,EAAcrJ,MAE3C,KAAKe,EAAU8D,eACX,OAAO7E,GAAkBqJ,EAAcrJ,MAE3C,KAAKe,EAAU+D,MACX,OAAO9E,GAAkBqJ,EAAcrJ,MAE3C,KAAKe,EAAUgE,SACX,OAAO/E,GAAkBqJ,EAAcrJ,SA9HvD,kCAqIuBA,GACf,MAAO,GAAaA,EAAMA,UAtIlC,GAAsC8G,GA4IzB,GAAb,kIAEQ,MAEAD,KAAKE,aAAe,EAEpBF,KAAK5F,WAAa,QAElB4F,KAAKG,YAAc,2CAEnBH,KAAKQ,gBAAL,QACKtG,EAAUoD,KAAO,CAAE,QAAW0R,GAAoB,IAAOA,GAAoB,MAASA,GAAoB,MAASA,GAAoB,OAAUC,GAAqB,OAAUA,GAAqB,OAAU7D,KADpN,KAEKlR,EAAUkD,MAAQ,CAAE,KAAQ4R,GAAoB,QAAWA,GAAoB,IAAOA,GAAoB,MAASA,GAAoB,MAASA,GAAoB,OAAUC,GAAqB,OAAUA,KAFlN,KAGK/U,EAAUqD,eAAiB,CAAE,QAAWyR,GAAoB,IAAOA,GAAoB,MAASA,GAAoB,MAASA,GAAoB,OAAUC,GAAqB,OAAUA,KAH/L,KAIK/U,EAAUsD,SAAW,CAAE,QAAWwR,GAAoB,IAAOA,GAAoB,MAASA,GAAoB,MAASA,GAAoB,OAAUC,GAAqB,OAAUA,KAJzL,KAKK/U,EAAU0D,WAAa,CAAE,KAAQoR,KALtC,KAMK9U,EAAUyD,YAAc,CAAE,KAAQqR,KANvC,KAOK9U,EAAUsW,SAAW,CAAE,KAAQxB,KAPpC,KAQK9U,EAAU2D,MAAQ,CAAE,IAAOyR,GAAsB,MAASA,GAAsB,OAAUA,GAAsB,QAAWA,GAAsB,MAASA,GAAsB,OAAUA,KAR/L,KASKpV,EAAU4D,QAAU,CAAE,IAAOwR,GAAsB,MAASA,GAAsB,OAAUA,GAAsB,QAAWA,GAAsB,MAASA,GAAsB,OAAUA,KATjM,KAUKpV,EAAU6D,aAAe,CAAE,IAAOuR,GAAsB,MAASA,GAAsB,OAAUA,GAAsB,QAAWA,GAAsB,MAASA,GAAsB,OAAUA,KAVtM,KAWKpV,EAAU8D,eAAiB,CAAE,IAAOsR,GAAsB,MAASA,GAAsB,OAAUA,GAAsB,QAAWA,GAAsB,MAASA,GAAsB,OAAUA,KAXxM,KAYKpV,EAAU+D,MAAQ,CAAE,IAAOqR,GAAsB,MAASA,GAAsB,OAAUA,GAAsB,QAAWA,GAAsB,MAASA,GAAsB,OAAUA,KAZ/L,KAaKpV,EAAUgE,SAAW,CAAE,IAAOoR,GAAsB,MAASA,GAAsB,OAAUA,GAAsB,QAAWA,GAAsB,MAASA,GAAsB,OAAUA,KAblM,GAkBAtP,KAAKS,aAAe,CAChB,IAAO,CAAEgQ,WAAW,EAAOC,gBAAgB,GAC3C,OAAU,CAAED,WAAW,EAAMC,gBAAgB,GAC7C,MAAS,CAAED,WAAW,EAAMC,gBAAgB,GAC5C,OAAU,CAAED,WAAW,EAAMC,gBAAgB,GAC7C,MAAS,CAAED,WAAW,EAAMC,gBAAgB,GAC5C,OAAU,CAAED,WAAW,EAAMC,gBAAgB,MAlCzD,oCAwCQ,OAAOxW,EAAUI,wBAxCzB,6BA2CkBnB,EAAciH,GAExB,OAAIA,GAAQgL,GACD,CACHhL,KAAMA,EACNjH,MAAO,GAAaA,EAAMA,OAI9BiH,GAAQ+N,GACD,CACH/N,KAAMA,EACNjH,MAAOkS,KAAK0E,MAAc5W,EAAMA,QAIpCiH,GAAQ6O,GACD,CACH7O,KAAMA,EACNjH,MAAOA,EAAMA,YAHrB,IA3DR,8BAqEmBkH,EAAsBkC,EAAqBC,GAEtD,IAAIrJ,EAAiBoJ,EAAapJ,MAElC,OAAQkH,GACJ,KAAKnG,EAAUoD,KACX,OAAIkF,EAAcpC,KACPjH,EAAiBqJ,EAAcrJ,MAK9C,KAAKe,EAAUkD,MACX,OAAqB,MAAjBoF,GAA+BrJ,EAC5BA,EAAiBqJ,EAAcrJ,MAE1C,KAAKe,EAAUqD,eACX,OAAOpE,EAAiBqJ,EAAcrJ,MAE1C,KAAKe,EAAUsD,SACX,OAAOrE,EAAiBqJ,EAAcrJ,MAE1C,KAAKe,EAAU0D,WACX,OAAOzE,IAEX,KAAKe,EAAUyD,YACX,OAAOxE,IAEX,KAAKe,EAAUsW,SACX,OAAQrX,EAEZ,KAAKe,EAAU2D,MACX,OAAO1E,EAAkBqJ,EAAcrJ,MAE3C,KAAKe,EAAU4D,QACX,OAAO3E,EAAiBqJ,EAAcrJ,MAE1C,KAAKe,EAAU6D,aACX,OAAO5E,GAAkBqJ,EAAcrJ,MAE3C,KAAKe,EAAU8D,eACX,OAAO7E,GAAkBqJ,EAAcrJ,MAE3C,KAAKe,EAAU+D,MACX,OAAO9E,GAAkBqJ,EAAcrJ,MAE3C,KAAKe,EAAUgE,SACX,OAAO/E,GAAkBqJ,EAAcrJ,SApHvD,kCA2HuBA,GACf,MAAO,GAAaA,EAAMA,UA5HlC,GAAwC8G,GAkI3B,GAAb,kIAEQ,MAEAD,KAAKE,aAAe,EAEpBF,KAAK5F,WAAa,SAElB4F,KAAKG,YAAc,2CAEnBH,KAAKQ,gBAAL,QACKtG,EAAUoD,KAAO,CAAE,IAAO2R,GAAqB,QAAWA,GAAqB,MAASA,GAAqB,MAASA,GAAqB,OAAUA,GAAqB,OAAUA,GAAqB,OAAU7D,KADxN,KAEKlR,EAAUkD,MAAQ,CAAE,KAAQ6R,GAAqB,IAAOA,GAAqB,QAAWA,GAAqB,MAASA,GAAqB,MAASA,GAAqB,OAAUA,GAAqB,OAAUA,KAFvN,KAGK/U,EAAUqD,eAAiB,CAAE,IAAO0R,GAAqB,QAAWA,GAAqB,MAASA,GAAqB,MAASA,GAAqB,OAAUA,GAAqB,OAAUA,KAHnM,KAIK/U,EAAUsD,SAAW,CAAE,IAAOyR,GAAqB,QAAWA,GAAqB,MAASA,GAAqB,MAASA,GAAqB,OAAUA,GAAqB,OAAUA,KAJ7L,KAKK/U,EAAU0D,WAAa,CAAE,KAAQqR,KALtC,KAMK/U,EAAUyD,YAAc,CAAE,KAAQsR,KANvC,KAOK/U,EAAUsW,SAAW,CAAE,KAAQvB,KAPpC,KAQK/U,EAAU2D,MAAQ,CAAE,IAAOyR,GAAsB,MAASA,GAAsB,OAAUA,GAAsB,QAAWA,GAAsB,MAASA,GAAsB,OAAUA,KAR/L,KASKpV,EAAU4D,QAAU,CAAE,IAAOwR,GAAsB,MAASA,GAAsB,OAAUA,GAAsB,QAAWA,GAAsB,MAASA,GAAsB,OAAUA,KATjM,KAUKpV,EAAU6D,aAAe,CAAE,IAAOuR,GAAsB,MAASA,GAAsB,OAAUA,GAAsB,QAAWA,GAAsB,MAASA,GAAsB,OAAUA,KAVtM,KAWKpV,EAAU8D,eAAiB,CAAE,IAAOsR,GAAsB,MAASA,GAAsB,OAAUA,GAAsB,QAAWA,GAAsB,MAASA,GAAsB,OAAUA,KAXxM,KAYKpV,EAAU+D,MAAQ,CAAE,IAAOqR,GAAsB,MAASA,GAAsB,OAAUA,GAAsB,QAAWA,GAAsB,MAASA,GAAsB,OAAUA,KAZ/L,KAaKpV,EAAUgE,SAAW,CAAE,IAAOoR,GAAsB,MAASA,GAAsB,OAAUA,GAAsB,QAAWA,GAAsB,MAASA,GAAsB,OAAUA,KAblM,GAiBAtP,KAAKS,aAAe,CAChB,IAAO,CAAEgQ,WAAW,EAAOC,gBAAgB,GAC3C,MAAS,CAAED,WAAW,EAAMC,gBAAgB,GAC5C,OAAU,CAAED,WAAW,EAAMC,gBAAgB,GAC7C,OAAU,CAAED,WAAW,EAAMC,gBAAgB,GAC7C,MAAS,CAAED,WAAW,EAAMC,gBAAgB,GAC5C,OAAU,CAAED,WAAW,EAAMC,gBAAgB,MAjCzD,oCAwCQ,OAAOxW,EAAUI,wBAxCzB,6BA2CkBnB,EAAciH,GAExB,OAAIA,GAAQgL,GACD,CACHhL,KAAMA,EACNjH,MAAO,GAAaA,EAAMA,OAI9BiH,GAAQ+N,GACD,CACH/N,KAAMA,EACNjH,MAAOkS,KAAK0E,MAAc5W,EAAMA,QAIpCiH,GAAQ4O,GACD,CACH5O,KAAMA,EACNjH,MAAOA,EAAMA,YAHrB,IA3DR,8BAqEmBkH,EAAsBkC,EAAqBC,GAEtD,IAAIrJ,EAAiBoJ,EAAapJ,MAElC,OAAQkH,GACJ,KAAKnG,EAAUoD,KACX,OAAIkF,EAAcpC,KACPjH,EAAiBqJ,EAAcrJ,MAK9C,KAAKe,EAAUkD,MACX,OAAqB,MAAjBoF,GAA+BrJ,EAC5BA,EAAiBqJ,EAAcrJ,MAE1C,KAAKe,EAAUqD,eACX,OAAOpE,EAAiBqJ,EAAcrJ,MAE1C,KAAKe,EAAUsD,SACX,OAAOrE,EAAiBqJ,EAAcrJ,MAE1C,KAAKe,EAAU0D,WACX,OAAOzE,IAEX,KAAKe,EAAUyD,YACX,OAAOxE,IAEX,KAAKe,EAAUsW,SACX,OAAQrX,EAEZ,KAAKe,EAAU2D,MACX,OAAO1E,EAAkBqJ,EAAcrJ,MAE3C,KAAKe,EAAU4D,QACX,OAAO3E,EAAiBqJ,EAAcrJ,MAE1C,KAAKe,EAAU6D,aACX,OAAO5E,GAAkBqJ,EAAcrJ,MAE3C,KAAKe,EAAU8D,eACX,OAAO7E,GAAkBqJ,EAAcrJ,MAE3C,KAAKe,EAAU+D,MACX,OAAO9E,GAAkBqJ,EAAcrJ,MAE3C,KAAKe,EAAUgE,SACX,OAAO/E,GAAkBqJ,EAAcrJ,SApHvD,kCA2HuBA,GACf,MAAO,GAAaA,EAAMA,UA5HlC,GAAyC8G,GAkI5B,GAAb,kIAEQ,MAEAD,KAAKE,cAAe,EAEpBF,KAAK5F,WAAa,UAElB4F,KAAKG,YAAc,oCAEnBH,KAAKQ,gBAAL,QACKtG,EAAUoD,KAAO,CAAE,OAAU8N,KADlC,KAEKlR,EAAUwE,IAAM,CAAE,QAAW4Q,KAFlC,KAGKpV,EAAUyE,GAAK,CAAE,QAAW2Q,KAHjC,KAIKpV,EAAU0E,IAAM,CAAE,KAAQ0Q,KAJ/B,KAKKpV,EAAU+D,MAAQ,CAAE,QAAWqR,KALpC,KAMKpV,EAAUgE,SAAW,CAAE,QAAWoR,KANvC,GASAtP,KAAKS,aAAe,CAChB,OAAU,CAAEgQ,WAAW,EAAMC,gBAAgB,GAC7C,QAAW,CAAED,WAAW,EAAMC,gBAAgB,GAC9C,QAAW,CAAED,WAAW,EAAMC,gBAAgB,MAtB1D,oCA6BQ,OAAOxW,EAAUK,kBA7BzB,6BAgCkBpB,EAAciH,GAExB,GAAIA,GAAQgL,GACR,MAAO,CACHhL,KAAMA,EACNjH,MAAO,GAAaA,EAAMA,SArC1C,8BA4CmBkH,EAAsBkC,EAAqBC,GAEtD,IAAIrJ,EAAkBoJ,EAAapJ,MAEnC,OAAQkH,GACJ,KAAKnG,EAAUoD,KACX,OAAOnE,EAAiBqJ,EAAcrJ,MAE1C,KAAKe,EAAU+D,MACX,OAAO9E,GAAmBqJ,EAAcrJ,MAE5C,KAAKe,EAAUgE,SACX,OAAO/E,GAAmBqJ,EAAcrJ,MAE5C,KAAKe,EAAUwE,IACX,OAAOvF,GAAmBqJ,EAAcrJ,MAE5C,KAAKe,EAAUyE,GACX,OAAOxF,GAAmBqJ,EAAcrJ,MAE5C,KAAKe,EAAU0E,IACX,OAAQzF,KAjExB,kCAwEuBA,GACf,MAAO,GAAcA,EAAMA,UAzEnC,GAA0C8G,GA+E7B,GAAb,kIAIQD,KAAKE,cAAe,EAEpBF,KAAK5F,WAAa,OAElB4F,KAAKG,YAAc,sBAEnBH,KAAKQ,eAAiB,GAGtBR,KAAKS,aAAe,KAb5B,oCAkBQ,OAAOvG,EAAUgB,cAlBzB,6BAqBkB/B,EAAciH,GAExB,OAAOjH,IAvBf,8BA4BmBkH,EAAsBkC,EAAqBC,GAEtD,OAAO,OA9Bf,kCAkCuBrJ,GACf,MAAO,WAnCf,GAAuC8G,GAyC1B,GAAb,YA6BI,WAAYkD,GAAgB,kBACxB,0BAAM,SAAU,KAAM,+DACjBA,UAAYA,EACjB,IAAI0N,EAAc,MAHM,OAIxB1N,EAAU6C,QAAQ+D,QAAO,SAAAzR,GAAC,MAAoB,YAAhBA,EAAE8B,cAA0B0W,SAAQ,SAAAxY,GAAC,OAAIA,EAAE2I,WAAa4P,KAJ9D,EA7BhC,yDAKQ,OAAO3W,EAAUM,iBALzB,oCAQyB6F,EAAsBC,GAEvC,GAAGD,GAAanG,EAAUuC,kBACtB,0DAA2B4D,EAAWC,GAG1C,IAAIC,EAAYP,KAAKQ,eAAeH,GAEpC,OAAiB,MAAbE,EACO,KAGc,MAArBD,EACOC,EAAUD,EAAkBlG,YAGhCmG,EAAS,OAxBxB,6BAoCQ,MACAP,KAAKQ,gBAAL,QACKtG,EAAUoD,KAAO,CAAE,OAAU8N,GAAqB,IAAOA,GAC1D,MAASA,GAAqB,OAAU6D,GACxC,QAAW7D,GAAqB,KAAQA,KAH5C,KAIKlR,EAAU+D,MAAQ,CAAE,OAAUqR,GAAsB,KAAQA,KAJjE,KAKKpV,EAAUgE,SAAW,CAAE,OAAUoR,GAAsB,KAAQA,KALpE,KAMKpV,EAAU2D,MAAQ,CAAE,OAAUyR,KANnC,KAOKpV,EAAU4D,QAAU,CAAE,OAAUwR,KAPrC,KAQKpV,EAAU6D,aAAe,CAAE,OAAUuR,KAR1C,KASKpV,EAAU8D,eAAiB,CAAE,OAAUsR,KAT5C,GAcAtP,KAAKyJ,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,IAAK0L,IACvD,SAACtM,GAAiB,OAAgBA,EAAW,GAAG1I,MAAO4I,UAAW,GAAO,EAAO,yEACpF/B,KAAKyJ,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAAC,CAAErI,WAAY,WAAYgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAAWmP,IAClK,SAACpO,GAAiB,OAAgBA,EAAW,GAAG1I,MAAOgX,OAAgBtO,EAAW,GAAG1I,UAAY,GAAO,EAAO,iJACnH6G,KAAKyJ,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAAC,CAAErI,WAAY,cAAegG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAAWwO,IACxK,SAACzN,GAAiB,OAAeA,EAAW,GAAG1I,OAAkB0I,EAAW,GAAG1I,SAAW,GAAO,EAAO,oIAC5G6G,KAAKyJ,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,CAAC,CAAErI,WAAY,cAAegG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAAWqN,IAC3K,SAACtM,GAAiB,OAAiBA,EAAW,GAAG1I,MAAQ4X,cAAuBlP,EAAW,GAAG1I,UAAY,GAAO,EAAO,qLAC5H6G,KAAKyJ,UAAU,IAAI1I,EAAO,mBAAoB,IAAI0B,EAAc,CAAC,CAAErI,WAAY,cAAegG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAAWwO,IAClL,SAACzN,GAAiB,OAAiBA,EAAW,GAAG1I,MAAQoX,eAA2B1O,EAAW,GAAG1I,MAAOoX,iBAAmB,GAAO,EAAO,uIAC9IvQ,KAAKyJ,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CAAC,CAAErI,WAAY,SAAUgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAAWwO,IACrK,SAACzN,GAAiB,OAAiBA,EAAW,GAAG1I,MAAQ6X,SAAkBnP,EAAW,GAAG1I,UAAY,GAAO,EAAO,gKACvH6G,KAAKyJ,UAAU,IAAI1I,EAAO,aAAc,IAAI0B,EAAc,CAAC,CAAErI,WAAY,SAAUgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAAWwO,IACvK,SAACzN,GAAiB,OAAiBA,EAAW,GAAG1I,MAAQ8X,WAAoBpP,EAAW,GAAG1I,UAAY,GAAO,EAAO,kKACzH6G,KAAKyJ,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,IAAK2I,IAC5D,SAACvJ,GAAiB,OAAiBA,EAAW,GAAG1I,MAAQmX,uBAAwB,GAAO,EAAO,sOACnGtQ,KAAKyJ,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,IAAK2I,IAC5D,SAACvJ,GAAiB,OAAiBA,EAAW,GAAG1I,MAAQkX,uBAAwB,GAAO,EAAO,sOACnGrQ,KAAKyJ,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,CAAC,CAAErI,WAAY,aAAcgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAAWsK,IACvK,SAACvJ,GAAiB,OAAiBA,EAAW,GAAG1I,MAAQ+X,UAAmBrP,EAAW,GAAG1I,UAAY,GAAO,EAAO,mKACxH6G,KAAKyJ,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,CAAC,CAAErI,WAAY,aAAcgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChK,CAAE1G,WAAY,WAAYgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAAWsK,IAC3G,SAACvJ,GAAiB,OAAiBA,EAAW,GAAG1I,MAAQ+X,UAAmBrP,EAAW,GAAG1I,MAAiB0I,EAAW,GAAG1I,UAAY,GAAO,EAAO,wMACvJ6G,KAAKyJ,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,IAAK2I,IACrD,SAACvJ,GAAiB,OAAiBA,EAAW,GAAG1I,MAAQgY,UAAW,GAAO,EAAO,iJACtFnR,KAAKyJ,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,IAAK6M,IACxD,SAACzN,GAAiB,MAA0C,IAAzBA,EAAW,GAAG1I,SAAkB,GAAO,EAAO,oJACrF6G,KAAKyJ,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CAAC,CAAErI,WAAY,cAAegG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAAWqN,IACzK,SAACtM,GAAiB,OAAiBA,EAAW,GAAG1I,MAAQyL,QAAiB/C,EAAW,GAAG1I,UAAY,GAAO,EAAO,8FACtH6G,KAAKyJ,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,cAAegG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC1G,CAAE1G,WAAY,YAAagG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACrGqN,IACA,SAACtM,GAAiB,OAAiBA,EAAW,GAAG1I,MAAQyL,QAAiB/C,EAAW,GAAG1I,MAAiB0I,EAAW,GAAG1I,UAAY,GAAO,EAAO,oJACrJ6G,KAAKyJ,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,CAAC,CAAErI,WAAY,cAAegG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAAWqN,IAC7K,SAACtM,GAAiB,OAAiBA,EAAW,GAAG1I,MAAQiY,YAAqBvP,EAAW,GAAG1I,UAAY,GAAO,EAAO,4FAC1H6G,KAAKyJ,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,CACvD,CAAErI,WAAY,cAAegG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC1G,CAAE1G,WAAY,YAAagG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACrGqN,IACA,SAACtM,GAAiB,OAAiBA,EAAW,GAAG1I,MAAQiY,YAAqBvP,EAAW,GAAG1I,MAAiB0I,EAAW,GAAG1I,UAAY,GAAO,EAAO,gKACzJ6G,KAAKyJ,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,SAAUgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACrG,CAAE1G,WAAY,cAAegG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC1GsK,IACA,SAACvJ,GAAiB,OAAiBA,EAAW,GAAG1I,MAAQkY,QAAiBxP,EAAW,GAAG1I,MAAiB0I,EAAW,GAAG1I,UAAY,GAAO,EAAO,4JACrJ6G,KAAKyJ,UAAU,IAAI1I,EAAO,aAAc,IAAI0B,EAAc,CACtD,CAAErI,WAAY,QAASgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACpG,CAAE1G,WAAY,cAAegG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC1GsK,IACA,SAACvJ,GACG,IAAIyP,EAAmBzP,EAAW,GAAG1I,MACjCoY,EAAS,IAAIC,OAAOF,EAAS,KAEjC,OAAiBzP,EAAW,GAAG1I,MAAQkY,QAAQE,EAAiB1P,EAAW,GAAG1I,UAC/E,GAAO,EAAO,qHACrB6G,KAAKyJ,UAAU,IAAI1I,EAAO,eAAgB,IAAI0B,EAAc,CACxD,CAAErI,WAAY,QAASgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACpG,CAAE1G,WAAY,cAAegG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC1GsK,IACA,SAACvJ,GACG,IAAIyP,EAAmBzP,EAAW,GAAG1I,MACjCoY,EAAS,IAAIC,OAAOF,EAAS,IAEjC,OAAiBzP,EAAW,GAAG1I,MAAQkY,QAAQE,EAAiB1P,EAAW,GAAG1I,UAC/E,GAAO,EAAO,yHACrB6G,KAAKyJ,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,CACjD,CAAErI,WAAY,QAASgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACpG,IAAI,EAAUsK,KACd,SAACvJ,GACG,IAAIyP,EAAmBzP,EAAW,GAAG1I,MACjCoY,EAAS,IAAIC,OAAOF,EAAS,IAE7BG,EAAoB5P,EAAW,GAAG1I,MAAQuY,MAAMH,GAChDI,EAAkB,GALX,uBAMX,YAAaF,EAAb,+CAAqB,KAAbxX,EAAa,QACjB0X,EAAO3N,KAAK,CAAC5D,KAAMgL,GAAqBjS,MAAOc,KAPxC,kFAUX,OAAO0X,KAER,GAAO,EAAO,gNApI7B,8BAwImBtR,EAAsBkC,EAAqBC,GAEtD,IAAIrJ,EAAiBoJ,EAAapJ,MAElC,OAAQkH,GACJ,KAAKnG,EAAUoD,KACX,OAAIkF,EAAcpC,MAAQgL,IAAuB5I,EAAcpC,MAAQ6P,IAE5DzN,EAAcpC,KADdjH,EAAiBqJ,EAAcrJ,MAO9C,KAAKe,EAAU2D,MACX,OAAO1E,EAAkBqJ,EAAcrJ,MAE3C,KAAKe,EAAU4D,QACX,OAAO3E,EAAiBqJ,EAAcrJ,MAE1C,KAAKe,EAAU6D,aACX,OAAO5E,GAAkBqJ,EAAcrJ,MAE3C,KAAKe,EAAU8D,eACX,OAAO7E,GAAkBqJ,EAAcrJ,MAE3C,KAAKe,EAAU+D,MACX,OAAO9E,GAAkBqJ,EAAcrJ,MAE3C,KAAKe,EAAUgE,SACX,OAAO/E,GAAkBqJ,EAAcrJ,MAE3C,KAAKe,EAAUuC,kBACX,oDAAqB4D,EAAWkC,EAAcC,MAzK9D,kCAgLuBrJ,GACf,MAAO,IAAcA,EAAMA,MAAQ,QAjL3C,GAAyC,GAuL5B,GAAb,kIAEQ,MAEA6G,KAAKE,aAAe,KAEpBF,KAAK5F,WAAa,OAElB4F,KAAKG,YAAc,cAEnBH,KAAKQ,gBAAL,QACKtG,EAAUoD,KAAO,CAAE,OAAU8N,GAAqB,KAAQA,KAD/D,KAEKlR,EAAU+D,MAAQ,CAAE,KAAQqR,KAFjC,KAGKpV,EAAUgE,SAAW,CAAE,KAAQoR,KAHpC,KAIKpV,EAAU2D,MAAQ,CAAE,KAAQyR,KAJjC,KAKKpV,EAAU4D,QAAU,CAAE,KAAQwR,KALnC,KAMKpV,EAAU6D,aAAe,CAAE,KAAQuR,KANxC,KAOKpV,EAAU8D,eAAiB,CAAE,KAAQsR,KAP1C,GAYAtP,KAAKS,aAAe,CAChB,IAAO,CAAEgQ,WAAW,EAAMC,gBAAgB,GAC1C,MAAS,CAAED,WAAW,EAAMC,gBAAgB,GAC5C,OAAU,CAAED,WAAW,EAAMC,gBAAgB,GAC7C,OAAU,CAAED,WAAW,EAAMC,gBAAgB,GAC7C,KAAQ,CAAED,WAAW,EAAMC,gBAAgB,GAC3C,UAAa,CAAED,WAAW,EAAMC,gBAAgB,MA5B5D,oCAkCQ,OAAOxW,EAAUO,eAlCzB,6BAqCkBtB,EAAciH,GAExB,OAAIA,GAAQgL,GACDjS,EAGPiH,GAAQ+N,IAAoB/N,GAAQ4O,IAAsB5O,GAAQ6O,GAC3D,CACH7O,KAAMA,EACNjH,MAAgBA,EAAMA,MAAO+W,WAAW,SAHhD,IA3CR,8BAoDmB7P,EAAsBkC,EAAqBC,GAEtD,IAAIrJ,EAAiBoJ,EAAapJ,MAElC,OAAQkH,GACJ,KAAKnG,EAAUoD,KACX,OAAOnE,EAAiBqJ,EAAcrJ,MAE1C,KAAKe,EAAU2D,MACX,OAAO1E,EAAkBqJ,EAAcrJ,MAE3C,KAAKe,EAAU4D,QACX,OAAO3E,EAAiBqJ,EAAcrJ,MAE1C,KAAKe,EAAU6D,aACX,OAAO5E,GAAkBqJ,EAAcrJ,MAE3C,KAAKe,EAAU8D,eACX,OAAO7E,GAAkBqJ,EAAcrJ,MAE3C,KAAKe,EAAU+D,MACX,OAAO9E,GAAkBqJ,EAAcrJ,MAE3C,KAAKe,EAAUgE,SACX,OAAO/E,GAAkBqJ,EAAcrJ,SA5EvD,kCAmFuBA,GACf,MAAO,IAAcA,EAAMA,MAAQ,QApF3C,GAAuC8G,GA0F5B2R,GAAoB,IAAI,GACxBzD,GAAmB,IAAI,GACvBa,GAAqB,IAAI,GACzBC,GAAsB,IAAI,GAC1BK,GAAuB,IAAI,GRh1BlC7L,EQi1BwB6L,GACrB,IAAI,GAAa,IAAI,GAAY,MAC7BlE,GAAsB,IAAI,GAAoB,IAC9C6E,GAAoB,IAAI,GACxBtG,GAAW,IAAI,GACfkI,GAAU,IAAI,GAEdC,GAAc,IAAI,GAAa,IAC/BC,GAAY,IAAI,GAAW,IAC3BC,GAAa,IAAI,GAAY,IAC7BC,GAAgB,IAAI,GAAe,IACnCC,GAAc,IAAI,GAAa,IAE/BC,IAAsB,SAC5BjY,EAAUG,gBAAkB8T,IADA,MAE5BjU,EAAUI,sBAAwB0U,IAFN,MAG5B9U,EAAUK,gBAAkB+U,IAHA,MAI5BpV,EAAUM,eAAiB4Q,IAJC,MAK5BlR,EAAUO,aAAewV,IALG,MAM5B/V,EAAUqC,YAAcoN,IANI,I,28BCp2B1B,IAAM,GAAb,YAcI,WAAY1R,GAAc,iBAEtB,0BAAM,mBAAoBA,IAE1B,IAAI8V,EAAa9V,EAAOma,UAAUC,QAAQ,UAE1C,EAAKC,aAAoBvE,GAEzB,IAAIwE,EAAuBxE,EAAYyE,QACvCD,EAAMnY,WAAa,IACnBmY,EAAM5M,gBAAiB,EAEvB,IAAI8M,EAAoB,CACpBrY,WAAY,IACZsY,UAAW,CAAErJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACzC4Q,QAAS,CAAEtJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACvC3B,KAAMmS,GAGV,EAAK7M,cAAc1B,KAAKyO,GAExB,IAAIG,EAAgC3a,EAAOma,UAAUC,QAAQ,YAAaG,QArBpD,OAsBtBI,EAAkBlN,cAAgB,CAAC+M,GAEnC,EAAK5M,WAAW7B,KAAK4O,GAErB,EAAKnJ,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,IACnD6M,IACA,SAACzN,GAKG,OAHuBA,EAAW,GAAG1I,MACV4J,cAAF,eAEf8P,aAGd,GAAO,EAAO,4GAElB,EAAKpJ,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,IAChD8P,GACA,SAAC1Q,GAKG,OAHuBA,EAAW,GAAG1I,MACV4J,cAAF,eAEf+P,UAGd,GAAO,EAAO,oDAElB,EAAKrJ,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,IAClD,MACA,SAACZ,GAKG,OAHuBA,EAAW,GAAG1I,MACV4J,cAAF,eAEfgQ,YAGd,GAAO,EAAO,qJA5DI,EAd9B,O,mOAAA,mDAE8BC,EAAwBC,EAA0Bhb,EAAgB8P,GAExF,IAAIjF,EAAe7K,EAAOma,UAAUC,QAAQ,oBACxCa,EAAoB,IAAI,EAAcpQ,GAG1C,OAFAoQ,EAAGnQ,cAAH,eAAqC,IAAIoQ,GAAeH,EAAYC,EAAalL,GAE1E,CACH5O,MAAO+Z,EACP9S,KAAM0C,OAVlB,GAA2C,GAiFrCqQ,G,WAIF,WAAoBH,EAAgCC,EAAkClL,GAClF,OADoG,WAApF,KAAAiL,aAAgC,KAAAC,cAAkC,KAAAlL,OAC1EA,GACJ,IAAK,YAAa/H,KAAKoT,QAAU,EAAG,MACpC,IAAK,aAAcpT,KAAKoT,QAAUJ,EAAWK,YAAYtR,OAAS,G,4CAKtE,OAAQ/B,KAAK+H,MACT,IAAK,YACmB,GAAhB/H,KAAKoT,QACLpT,KAAKiT,YAAYK,eAAe,iGACzBtT,KAAKoT,QAAUpT,KAAKgT,WAAWK,YAAYtR,OAAS,EAC3D/B,KAAKiT,YAAYK,eAAe,0IAEhCtT,KAAKgT,WAAWO,WAAWC,OAAOxT,KAAKoT,QAAU,EAAG,GACpDpT,KAAKgT,WAAWK,YAAYG,OAAOxT,KAAKoT,QAAU,EAAG,GACrDpT,KAAKoT,SAAW,GAEpB,MACJ,IAAK,aACGpT,KAAKoT,SAAWpT,KAAKgT,WAAWK,YAAYtR,OAAS,EACrD/B,KAAKiT,YAAYK,eAAe,iGACzBtT,KAAKoT,QAAU,EACtBpT,KAAKiT,YAAYK,eAAe,0IAEhCtT,KAAKgT,WAAWO,WAAWC,OAAOxT,KAAKoT,QAAU,EAAG,GACpDpT,KAAKgT,WAAWK,YAAYG,OAAOxT,KAAKoT,QAAU,EAAG,GACrDpT,KAAKoT,SAAW,M,6BAO5B,OAAQpT,KAAK+H,MACT,IAAK,YACD,OAAI/H,KAAKoT,QAAUpT,KAAKgT,WAAWK,YAAYtR,OAAS,GACpD/B,KAAKiT,YAAYK,eAAe,uIACzB,MAEJtT,KAAKgT,WAAWK,YAAYrT,KAAKoT,WAC5C,IAAK,aACD,OAAIpT,KAAKoT,QAAU,GACfpT,KAAKiT,YAAYK,eAAe,uIACzB,MAEJtT,KAAKgT,WAAWK,YAAYrT,KAAKoT,c,gCAKhD,OAAQpT,KAAK+H,MACT,IAAK,YACD,OAAO/H,KAAKoT,QAAUpT,KAAKgT,WAAWK,YAAYtR,OACtD,IAAK,aACD,OAAO/B,KAAKoT,SAAW,O,+0BC3IhC,IAAM,GAAb,YAEI,WAAYnb,GAAc,M,IAAA,W,EAEtB,S,EAAA,gBAAM,YAAaA,EAAQ,uH,+CAE3B,IAAI8V,EAAa9V,EAAOma,UAAUC,QAAQ,UAE1C,EAAKC,aAAoBvE,GAEzB,IAAI0F,EAAuB1F,EAAYyE,QACvCiB,EAAMrZ,WAAa,IACnBqZ,EAAM9N,gBAAiB,EAEvB,IAAI+N,EAAoB,CACpBtZ,WAAY,IACZsY,UAAW,CAAErJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACzC4Q,QAAS,CAAEtJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACvC3B,KAAMqT,GAGV,EAAK/N,cAAc1B,KAAK0P,GAExB,IAAIC,EAA4B1b,EAAOma,UAAUC,QAAQ,QAASG,QAClEmB,EAAcjO,cAAgB,CAACgO,GAE/B,EAAK7N,WAAW7B,KAAK2P,GAErB,IAAIC,EAAuB3b,EAAOma,UAAUC,QAAQ,YAAaG,QA1B3C,OA2BtBoB,EAAalO,cAAgB,CAACgO,GAE9B,EAAKjK,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,IAErD,MACA,SAACZ,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MAEjC0a,EAAK,IAAI,GAAWlb,EAAGV,EAAO6b,KAAKC,iBAAkB9b,GACzDU,EAAEoK,cAAF,WAAgC8Q,KAEjC,GAAO,EAAO,mCAAmC,IAExD,EAAKpK,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IACpDmR,GACA,SAAC/R,GAEG,IACIgS,EADmBhS,EAAW,GAAG1I,MACd4J,cAAF,WAErB,OAAO,GAAsBiR,YAAYH,EAAIA,EAAGZ,YAAahb,EAAQ,aAAakB,SAEnF,GAAM,EAAO,oEAEpB,EAAKsQ,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,CAC/C,CAAErI,WAAY,UAAWgG,KAAMqT,EAAOvE,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACxFwO,IACA,SAACzN,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCH,EAAW6I,EAAW,GAG1B,OAFqBlJ,EAAEoK,cAAF,WAEXkR,IAAIjb,MAEf,GAAO,EAAO,yHAErB,EAAKyQ,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,CAC/C,CAAErI,WAAY,QAASgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACjG,CAAE1G,WAAY,UAAWgG,KAAMqT,EAAOvE,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACxFwO,IACA,SAACzN,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC8I,EAAgBJ,EAAW,GAAG1I,MAC9BH,EAAW6I,EAAW,GAG1B,OAFqBlJ,EAAEoK,cAAF,WAEXkR,IAAIjb,EAAGiJ,MAElB,GAAO,EAAO,0GAErB,EAAKwH,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,CAC/C,CAAErI,WAAY,QAASgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACjG2S,GACA,SAAC5R,G,MAEOlJ,EAAmBkJ,EAAW,GAAG1I,MACjC8I,EAAgBJ,EAAW,GAAG1I,MAGlC,OAAoB,QAApB,EAFqBR,EAAEoK,cAAF,WAEXhK,IAAIkJ,UAAM,eAAE9I,SAEvB,GAAO,EAAO,4CAErB,EAAKsQ,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,QAASgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACjG,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC8I,EAAgBJ,EAAW,GAAG1I,MAKlC,OAJqBR,EAAEoK,cAAF,WAElBgQ,OAAO9Q,GAEH,QAER,GAAM,EAAO,qHAEpB,EAAKwH,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,IAAKgG,KAAMqT,EAAOvE,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAClFqN,IACA,SAACtM,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCS,EAAgBiI,EAAW,GAG/B,OAFqBlJ,EAAEoK,cAAF,WAEX6B,QAAQhL,MAEnB,GAAM,EAAO,oLAEpB,EAAK6P,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,IAAKgG,KAAM,MAAM8O,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACjFwO,IACA,SAACzN,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCS,EAAwBiI,EAAW,GAAG1I,MAG1C,OAFqBR,EAAEoK,cAAF,WAEXmR,MAAMta,MAGpB,GAAM,EAAO,sDAEjB,EAAK6P,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,IACjD,MACA,SAACZ,GAKG,OAHuBA,EAAW,GAAG1I,MACd4J,cAAF,WAEXoR,WAGd,GAAM,EAAO,iDAEjB,EAAK1K,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,IAAKgG,KAAMqT,EAAOvE,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAClFwO,IACA,SAACzN,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCS,EAAgBiI,EAAW,GAG/B,OAFqBlJ,EAAEoK,cAAF,WAEXqR,SAASxa,MAGvB,GAAM,EAAO,mDAEjB,EAAK6P,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,IAAKgG,KAAMqT,EAAOvE,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAClFwO,IACA,SAACzN,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCS,EAAgBiI,EAAW,GAG/B,OAFqBlJ,EAAEoK,cAAF,WAEXsR,aAAaza,MAG3B,GAAM,EAAO,kHAEjB,EAAK6P,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,IACnD6M,IACA,SAACzN,GAKG,OAHuBA,EAAW,GAAG1I,MACd4J,cAAF,WAEXuR,aAGd,GAAM,EAAO,4CAEjB,EAAK7K,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,IAChD0L,IACA,SAACtM,GAKG,OAHuBA,EAAW,GAAG1I,MACd4J,cAAF,WAEXwR,UAGd,GAAM,EAAO,wDAEjB,EAAK9K,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IAAK2I,IACzD,SAACvJ,GAKG,OAHuBA,EAAW,GAAG1I,MACd4J,cAAF,WAEXyR,eAEX,GAAO,IA/MQ,EAF9B,O,mOAAA,SAAoC,GAuNvB,GAAb,WAKI,WAAoBC,EAAqCxB,EAAkChb,GAAc,WAArF,KAAAwc,gBAAqC,KAAAxB,cAAkC,KAAAhb,SAH3F,KAAAsb,WAAsB,GACtB,KAAAF,YAAqB,G,UAHzB,O,EAAA,G,EAAA,8CAQwB,2BAChB,YAAcrT,KAAKuT,WAAnB,+CAA+B,KAAtBhQ,EAAsB,QAC3B,KAAMA,EAAEnD,gBAAgBH,GAAiB,CAAC,SAAU,UAAW,UAAW,UAAW,aAAa2E,QAAQrB,EAAEnD,KAAKhG,aAAe,GAC5H,OAAO,GAHC,kFAOhB,OAAO,IAff,kCAoBQ,GAAI4F,KAAK0U,uBACL,MAAO,IAAM1U,KAAKqT,YAAY1Q,KAAI,SAAAhK,GAAC,MAAI,GAAKA,KAAGkK,KAAK,MAAQ,IA0BhE,IAvBA,IAAIoB,EAAyB,CACzBoF,KAAM,EACNC,OAAQ,EACRvH,OAAQ,GAGRsC,EAA0B,CAC1B,CACIjE,KAAMlG,EAAU8K,KAChBf,SAAUA,EACVM,cAAc,GAElB,CACInE,KAAMlG,EAAUya,aAChBC,SAAUxJ,GACVjS,MAAO,IACP8K,SAAUA,EACVM,cAAc,IAIlBsQ,EAAqB,IAAIpS,EAAc,IAElCvK,EAAI,EAAGA,EAAI8H,KAAKuT,WAAWxR,OAAQ7J,IAAK,CAC7C,IAAIiB,EAAQ6G,KAAKuT,WAAWrb,GACT,MAAfiB,EAAMA,OAAiBA,EAAMiH,gBAAgBH,GAAiB9G,EAAMiH,gBAAgB,GACpFiE,EAAWL,KAAK,CACZ5D,KAAMlG,EAAUya,aAChBC,SAAUxJ,GACVjS,MAAsB,MAAfA,EAAMA,MAAgB,OAASA,EAAMiH,KAAKqO,OAAOtV,EAAOiS,IAAqBjS,MACpF8K,SAAUA,EACVM,cAAc,KAGlBF,EAAWL,KAAK,CACZ5D,KAAMlG,EAAUya,aAChBC,SAAUzb,EAAMiH,KAChBjH,MAAOA,EAAMA,MACboL,cAAc,EACdN,SAAUA,IAEdI,EAAWL,KAAK,CACZ5D,KAAMlG,EAAU4a,WAChBpT,OAAmCvI,EAAMiH,KAAM2K,UAAU,WAAY8J,GACrEE,aAAa,EACbC,iBAAkB,EAClBzQ,cAAc,EACdN,SAAUA,KAKlBI,EAAWL,KAAK,CACZ5D,KAAMlG,EAAU+a,SAChBC,SAAUhb,EAAUoD,KACpB6X,SAAU/J,GACV7G,cAAc,EACdN,SAAUA,IAGV/L,EAAI8H,KAAKuT,WAAWxR,OAAS,IAC7BsC,EAAWL,KAAK,CACZ5D,KAAMlG,EAAUya,aAChBC,SAAUxJ,GACVjS,MAAO,KACP8K,SAAUA,EACVM,cAAc,IAElBF,EAAWL,KAAK,CACZ5D,KAAMlG,EAAU+a,SAChBC,SAAUhb,EAAUoD,KACpB6X,SAAU/J,GACV7G,cAAc,EACdN,SAAUA,KAOtBI,EAAWL,KAAK,CACZ5D,KAAMlG,EAAUya,aAChBC,SAAUxJ,GACVjS,MAAO,IACP8K,SAAUA,EACVM,cAAc,IAGlBF,EAAWL,KAAK,CACZ5D,KAAMlG,EAAU+a,SAChBC,SAAUhb,EAAUoD,KACpB6X,SAAU/J,GACV7G,cAAc,EACdN,SAAUA,IAWdI,EAAWL,KAAK,CACZ5D,KAAMlG,EAAUkb,OAChBC,iCAAiC,EACjCC,wBAAwB,EACxB/Q,cAAc,EACdN,SAAUA,EACVsR,mBAAmB,IAGvB,IAAI9T,EAAmB,CACnBxJ,OAAQ+H,KAAK/H,OACboM,WAAYA,EACZiC,aAAc,MAGd5E,EAAiB,IAAIX,EAAO,WAAY,IAAI0B,EAAc,IAAK2I,GAAqB3J,GAAS,GAAO,GAGxG,OAFAzB,KAAKiT,YAAYuC,SAAS9T,EAAQ,IAAI,eAAU,GAEzC,KAlJf,4BAqJU9H,GAEF,IAAIia,EAAiBja,EAAOmJ,cAAP,WAMrB,OALU,MAAN8Q,IACA7T,KAAKuT,WAAavT,KAAKuT,WAAW/L,OAAOqM,EAAGN,YAC5CvT,KAAKqT,YAAcrT,KAAKqT,YAAY7L,OAAOqM,EAAGR,eAG3C,IA7Jf,0BAiKQpR,GACA,OAAIA,GAAS,GAAKA,EAAQjC,KAAKuT,WAAWxR,OAC/B/B,KAAKuT,WAAWtR,IAE3BjC,KAAKiT,YAAYK,eAAe,+DAAiEtT,KAAKuT,WAAWxR,OAAS,GAAK,MACxH,QAtKf,6BAyKWE,GAEH,OAAIA,GAAS,GAAKA,EAAQjC,KAAKuT,WAAWxR,QACtC/B,KAAKuT,WAAWC,OAAOvR,EAAO,GAC9BjC,KAAKqT,YAAYG,OAAOvR,EAAO,GACxB,OAGXjC,KAAKiT,YAAYK,eAAe,+DAAiEtT,KAAKuT,WAAWxR,OAAS,GAAK,MAExH,QAnLf,0BAsLQ/I,EAAUiJ,GAYV,OAXY,MAATA,GACCjC,KAAKuT,WAAWvP,KAAKhL,GACrBgH,KAAKqT,YAAYrP,KAAKhL,EAAEG,QAErB8I,EAAQjC,KAAKqT,YAAYtR,QAAUE,GAAS,GAC3CjC,KAAKuT,WAAWtR,GAASjJ,EACzBgH,KAAKqT,YAAYpR,GAASjJ,EAAEG,OAE5B6G,KAAKiT,YAAYK,eAAe,+DAAiEtT,KAAKuT,WAAWxR,OAAS,GAAK,OAGhI,IAlMf,4BAsMQ,OAA+B,GAA3B/B,KAAKqT,YAAYtR,QACjB/B,KAAKiT,YAAYK,eAAe,+DAAiEtT,KAAKuT,WAAWxR,OAAS,GAAK,MACxH,OAEP/B,KAAKuT,WAAWkC,MACTzV,KAAKqT,YAAYoC,SA3MpC,6BAgNQ,OAA+B,GAA3BzV,KAAKqT,YAAYtR,QACjB/B,KAAKiT,YAAYK,eAAe,+DAAiEtT,KAAKuT,WAAWxR,OAAS,GAAK,MACxH,MAEA/B,KAAKqT,YAAYrT,KAAKqT,YAAYtR,OAAS,KApN9D,8BAwNYpJ,GACJ,OAAOqH,KAAKqT,YAAYzO,QAAQjM,EAAEQ,SAzN1C,6BA6NQ,OAAO6G,KAAKqT,YAAYtR,SA7NhC,gCAiOQ,OAAiC,GAA1B/B,KAAKuT,WAAWxR,SAjO/B,mCAoOiBnI,GACT,IAAIqI,EAAQjC,KAAKqT,YAAYzO,QAAQhL,EAAOT,OACxC8I,GAAS,IACTjC,KAAKqT,YAAYG,OAAOvR,EAAO,GAC/BjC,KAAKuT,WAAWC,OAAOvR,EAAO,MAxO1C,+BA4OarI,GACL,OAAOoG,KAAKqT,YAAYzO,QAAQhL,EAAOT,QAAU,IA7OzD,8BAiPQ6G,KAAKuT,WAAa,GAClBvT,KAAKqT,YAAc,KAlP3B,0CAsPQ,OAA+B,GAA3BrT,KAAKqT,YAAYtR,OACV,KAEA/B,KAAKqT,YAAYrT,KAAKqT,YAAYtR,OAAS,KAzP9D,2CA6PQ,OAA+B,GAA3B/B,KAAKqT,YAAYtR,OACV,KAEA/B,KAAKqT,YAAY,KAhQpC,4CAqQQ,OAA+B,GAA3BrT,KAAKqT,YAAYtR,OACV,MAEP/B,KAAKuT,WAAWkC,MACTzV,KAAKqT,YAAYoC,SAzQpC,8BA6QY7b,GAGJ,OAFAoG,KAAKuT,WAAWvP,KAAKpK,GACrBoG,KAAKqT,YAAYrP,KAAKpK,EAAOT,QACtB,IAhRf,+BAkRaS,GAGL,OAFAoG,KAAKuT,WAAWC,OAAO,EAAG,EAAG5Z,GAC7BoG,KAAKqT,YAAYG,OAAO,EAAG,EAAG5Z,EAAOT,QAC9B,IArRf,4CAuR0BS,GAClB,IAAIqI,EAAQjC,KAAKqT,YAAYzO,QAAQhL,EAAOT,OAC5C,OAAG8I,GAAS,IACRjC,KAAKuT,WAAWC,OAAOvR,EAAO,GAC9BjC,KAAKqT,YAAYG,OAAOvR,EAAO,IACxB,KA5RnB,qCAkSQ,OAA+B,GAA3BjC,KAAKqT,YAAYtR,OACV,KAEA/B,KAAKqT,YAAYrT,KAAKqT,YAAYtR,OAAS,KArS9D,qCA0SQ,OAA+B,GAA3B/B,KAAKqT,YAAYtR,OACV,MAEP/B,KAAKuT,WAAWkC,MACTzV,KAAKqT,YAAYoC,SA9SpC,6CAmTQ,GAA8B,GAA3BzV,KAAKqT,YAAYtR,OAEb,CACH,IAAInI,EAASoG,KAAKqT,YAAY,GAG9B,OAFArT,KAAKqT,YAAYG,OAAO,EAAG,GAC3BxT,KAAKuT,WAAWC,OAAO,EAAG,GACnB5Z,EALPoG,KAAKiT,YAAYK,eAAe,+DAAiEtT,KAAKuT,WAAWxR,OAAS,GAAK,W,6BApT3I,K,okBC9NO,IAAM,GAAb,YAEI,WAAY9J,GAAc,M,iGAAA,S,EAEtB,S,EAAA,gBAAM,aAAcA,EAAQ,iJ,+CAE5B,IAAI8V,EAAa9V,EAAOma,UAAUC,QAAQ,UAEtCE,EAAuBxE,EAAYyE,QACvCD,EAAMnY,WAAa,IACnBmY,EAAM5M,gBAAiB,EAEvB,IAAI8M,EAAoB,CACpBrY,WAAY,IACZsY,UAAW,CAACrJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACxC4Q,QAAS,CAACtJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACtC3B,KAAMmS,GAEV,EAAK7M,cAAc1B,KAAKyO,GAExB,IAAIiD,EAAgCzd,EAAOma,UAAUC,QAAQ,YAAaG,QAlBpD,OAmBtBkD,EAAkBhQ,cAAgB,CAAC+M,GAEnC,EAAK9F,QAAQ3I,KAAK0R,GAGlB,EAAKjM,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,CAC/C,CAAErI,WAAY,UAAWgG,KAAMmS,EAAOrD,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACxFwO,GACA,MACA,GAAM,EAAO,mIAEjB,EAAK7F,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,IAAKgG,KAAM,MAAM8O,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACjFwO,GACA,MACA,GAAM,EAAO,sDASjB,EAAK7F,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,IACjD,KACA,MACA,GAAM,EAAO,iDAEjB,EAAKgH,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,IAAKgG,KAAM2N,EAAYmB,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACvFwO,GACA,MACA,GAAM,EAAO,mDAEjB,EAAK7F,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,IAAKgG,KAAM2N,EAAYmB,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACvFwO,GACA,MACA,GAAM,EAAO,kHAEjB,EAAK7F,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,IACnD6M,GACA,MACA,GAAM,EAAO,4CAEjB,EAAK7F,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,IAChD0L,GACA,MACA,GAAM,EAAO,wDApEK,EAF9B,O,mOAAA,SAAqC,G,yoBCA9B,IAAM,GAAb,YAEI,WAAYlW,GAAc,O,4FAAA,SAEtB,0BAAM,WAAYA,EAAQ,iFAE1B,IAAIsa,EAAuBta,EAAOma,UAAUC,QAAQ,UAAWG,QAC/DD,EAAMnY,WAAa,IACnBmY,EAAM5M,gBAAiB,EAEvB,IAAI8M,EAAoB,CACpBrY,WAAY,IACZsY,UAAW,CAACrJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACxC4Q,QAAS,CAACtJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACtC3B,KAAMmS,GAEV,EAAK7M,cAAc1B,KAAKyO,GAExB,IAAImB,EAAuB3b,EAAOma,UAAUC,QAAQ,YAAaG,QAhB3C,OAiBtBoB,EAAalO,cAAgB,CAAC+M,GAG9B,EAAKhJ,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IACpDmR,EACA,MACA,GAAM,EAAO,oEAvBK,EAF9B,O,mOAAA,SAAmC,G,yoBCA5B,IAAM,GAAb,YAEI,WAAY3b,GAAc,O,4FAAA,SAEtB,0BAAM,WAAYA,IAElB,IAAIwb,EAAuBxb,EAAOma,UAAUC,QAAQ,UAAWG,QAC/DiB,EAAMrZ,WAAa,IACnBqZ,EAAM9N,gBAAiB,EAEvB,IAAI8M,EAAoB,CACpBrY,WAAY,IACZsY,UAAW,CAACrJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACxC4Q,QAAS,CAACtJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACtC3B,KAAMqT,GAZY,OAetB,EAAK/N,cAAc1B,KAAKyO,GAGxB,EAAKhJ,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,IACnD6M,GACA,MACA,GAAM,EAAO,4GAEjB,EAAK7F,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,IAEhDgR,EACA,MACA,GAAM,EAAO,oDAEjB,EAAKhK,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,IAElD,KACA,MACA,GAAM,EAAO,qJAjCK,EAF9B,O,mOAAA,SAAmC,G,yoBCA5B,IAAM,GAAb,YAEI,WAAYxK,GAAc,O,4FAAA,SAEtB,0BAAM,OAAQA,EAAQ,gFAEtB,IAAI8V,EAAa9V,EAAOma,UAAUC,QAAQ,UAEtCE,EAAuBta,EAAOma,UAAUC,QAAQ,UAAWG,QAC/DD,EAAMnY,WAAa,IACnBmY,EAAM5M,gBAAiB,EAEvB,IAAI8M,EAAoB,CACpBrY,WAAY,IACZsY,UAAW,CAACrJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACxC4Q,QAAS,CAACtJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACtC3B,KAAMmS,GAGV,EAAK7M,cAAc1B,KAAKyO,GAExB,IAAIkD,EAAkC1d,EAAOma,UAAUC,QAAQ,cAAeG,QAnBxD,OAoBtBmD,EAAoBjQ,cAAgB,CAAC+M,GAErC,EAAK9F,QAAQ3I,KAAK2R,GAElB,EAAKlM,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,CAC/C,CAAErI,WAAY,QAASgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACjGyR,EACA,MACA,GAAM,EAAO,kIAEjB,EAAK9I,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,QAASgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACjG,KACA,MACA,GAAM,EAAO,qHAEb,EAAK2I,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACvD,CAAErI,WAAY,IAAKgG,KAAM2N,EAAYmB,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACvFqN,GACA,MACA,GAAM,EAAO,oLAxCK,EAF9B,O,mOAAA,SAA+B,G,yoBCExB,IAAM,GAAb,YAEI,WAAYlW,GAAc,O,4FAAA,SAEtB,0BAAM,QAASA,EAAQ,2BAENA,EAAOma,UAAUC,QAAQ,UAA1C,IACIuD,EAAoB3d,EAAOma,UAAUC,QAAQ,UAEjD,EAAKC,aAAasD,GAClB,EAAKlQ,cAAgBkQ,EAAWlQ,cAChC,IAAI6M,EAAQ,EAAK7M,cAAc,GAAGtF,KATZ,OAWtB,EAAKqJ,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,CAChD,CAAErI,WAAY,UAAWgG,KAAMmS,EAAOrD,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACxFyR,GACA,SAAC1Q,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCH,EAAW6I,EAAW,GAK1B,OAJqBlJ,EAAEoK,cAAF,WAElBkR,IAAIjb,GAEAA,EAAEG,SAEV,GAAO,EAAO,oFAErB,EAAKsQ,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,IAC/C8P,GACA,SAAC1Q,GAKG,OAHuBA,EAAW,GAAG1I,MACd4J,cAAF,WAEX0S,SAEX,GAAO,EAAO,4DAEjB,EAAKhM,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,IACpD8P,GACA,SAAC1Q,GAKG,OAHuBA,EAAW,GAAG1I,MACd4J,cAAF,WAEX8S,UAEX,GAAO,EAAO,wFAErB,EAAKpM,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,IACjD6M,IACA,SAACzN,GAKG,OAHuBA,EAAW,GAAG1I,MACd4J,cAAF,WAEXuR,aAGd,GAAM,EAAO,4CAEjB,EAAK7K,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,UAAWgG,KAAMmS,EAAOrD,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACxFqN,IACA,SAACtM,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCH,EAAW6I,EAAW,GACtBgS,EAAiBlb,EAAEoK,cAAF,WAEjBd,EAAQ4R,EAAGjP,QAAQ5L,GACvB,OAAiB,GAAViJ,EAAcA,EAAQ4R,EAAGR,YAAYtR,OAASE,KAGzD,GAAM,EAAO,oNAzEK,EAF9B,O,mOAAA,SAAgC,G,okBCGzB,IAAM,GAAb,YAEI,WAAYhK,GAAc,M,iGAAA,S,EAEtB,S,EAAA,gBAAM,SAAUA,EAAQ,+D,+CAExB,IAAI8V,EAAa9V,EAAOma,UAAUC,QAAQ,UAE1C,EAAKC,aAAoBvE,GAEzB,IAAI0F,EAAuB1F,EAAYyE,QACvCiB,EAAMrZ,WAAa,IACnBqZ,EAAM9N,gBAAiB,EAEvB,IAAI+N,EAAoB,CACpBtZ,WAAY,IACZsY,UAAW,CAAErJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACzC4Q,QAAS,CAAEtJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACvC3B,KAAMqT,GAGV,EAAK/N,cAAc1B,KAAK0P,GAExB,IAAIC,EAA4B1b,EAAOma,UAAUC,QAAQ,QAASG,QAClEmB,EAAcjO,cAAgB,CAACgO,GAE/B,EAAK7N,WAAW7B,KAAK2P,GAErB,IAAIC,EAAuB3b,EAAOma,UAAUC,QAAQ,YAAaG,QA1B3C,OA2BtBoB,EAAalO,cAAgB,CAACgO,GAE9B,EAAKjK,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,IAElD,MACA,SAACZ,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MAEjC0a,EAAK,IAAI,GAAWlb,EAAGV,EAAO6b,KAAKC,iBAAkB9b,GACzDU,EAAEoK,cAAF,WAAgC8Q,KAEjC,GAAO,EAAO,uCAAuC,IAExD,EAAKpK,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IACpDmR,GACA,SAAC/R,GAEG,IACIgS,EADmBhS,EAAW,GAAG1I,MACd4J,cAAF,WAErB,OAAO,GAAsBiR,YAAYH,EAAIA,EAAGZ,YAAahb,EAAQ,aAAakB,SAEnF,GAAO,EAAO,oEAGzB,EAAKsQ,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,CAC/C,CAAErI,WAAY,UAAWgG,KAAMqT,EAAOvE,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACxFwO,IACA,SAACzN,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCH,EAAW6I,EAAW,GAG1B,OAFqBlJ,EAAEoK,cAAF,WAEXkR,IAAIjb,MAEf,GAAO,EAAO,yHAErB,EAAKyQ,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,CAC/C,CAAErI,WAAY,QAASgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACjG2S,GACA,SAAC5R,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC8I,EAAgBJ,EAAW,GAAG1I,MAGlC,OAFqBR,EAAEoK,cAAF,WAEXhK,IAAIkJ,GAAO9I,SAEtB,GAAO,EAAO,4CAErB,EAAKsQ,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,QAASgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACjG,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC8I,EAAgBJ,EAAW,GAAG1I,MAKlC,OAJqBR,EAAEoK,cAAF,WAElBgQ,OAAO9Q,GAAO9I,MAEV,QAER,GAAO,EAAO,qHAErB,EAAKsQ,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,IAAKgG,KAAMqT,EAAOvE,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAClFqN,IACA,SAACtM,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCS,EAAgBiI,EAAW,GAG/B,OAFqBlJ,EAAEoK,cAAF,WAEX6B,QAAQhL,MAEnB,GAAO,EAAO,oLAErB,EAAK6P,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,IAAKgG,KAAM,MAAM8O,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACjFwO,IACA,SAACzN,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCS,EAAwBiI,EAAW,GAAG1I,MAG1C,OAFqBR,EAAEoK,cAAF,WAEXmR,MAAMta,MAGpB,GAAO,EAAO,sDAElB,EAAK6P,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,IACjD,MACA,SAACZ,GAKG,OAHuBA,EAAW,GAAG1I,MACd4J,cAAF,WAEXoR,WAGd,GAAO,EAAO,iDAElB,EAAK1K,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,IAAKgG,KAAMqT,EAAOvE,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAClFwO,IACA,SAACzN,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCS,EAAgBiI,EAAW,GAG/B,OAFqBlJ,EAAEoK,cAAF,WAEXqR,SAASxa,MAGvB,GAAO,EAAO,mDAElB,EAAK6P,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,IAAKgG,KAAMqT,EAAOvE,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAClFwO,IACA,SAACzN,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCS,EAAgBiI,EAAW,GAG/B,OAFqBlJ,EAAEoK,cAAF,WAEXsR,aAAaza,MAG3B,GAAO,EAAO,kHAElB,EAAK6P,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,IACnD6M,IACA,SAACzN,GAKG,OAHuBA,EAAW,GAAG1I,MACd4J,cAAF,WAEXuR,aAGd,GAAO,EAAO,4CAElB,EAAK7K,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,IAChD0L,IACA,SAACtM,GAKG,OAHuBA,EAAW,GAAG1I,MACd4J,cAAF,WAEXwR,UAGd,GAAO,EAAO,wDAvLI,EAF9B,O,mOAAA,SAAiC,G,yoBCL1B,IAAM,GAAb,YAEI,WAAYtc,GAAc,O,4FAAA,SAEtB,0BAAM,MAAOA,EAAQ,iGAErB,IAAI8V,EAAa9V,EAAOma,UAAUC,QAAQ,UAEtCE,EAAuBta,EAAOma,UAAUC,QAAQ,UAAWG,QAC/DD,EAAMnY,WAAa,IACnBmY,EAAM5M,gBAAiB,EAEvB,IAAI8M,EAAoB,CACpBrY,WAAY,IACZsY,UAAW,CAAErJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACzC4Q,QAAS,CAAEtJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACvC3B,KAAMmS,GAGV,EAAK7M,cAAc1B,KAAKyO,GAExB,IAAIkD,EAAkC1d,EAAOma,UAAUC,QAAQ,cAAeG,QAnBxD,OAoBtBmD,EAAoBjQ,cAAgB,CAAC+M,GAErC,EAAK9F,QAAQ3I,KAAK2R,GAElB,EAAKlM,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,IAAKgG,KAAM2N,EAAYmB,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACvFwO,GACA,MACA,GAAM,EAAO,oEAEjB,EAAK7F,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,CACvD,CAAErI,WAAY,IAAKgG,KAAMuV,EAAqBzG,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChGwO,GACA,MACA,GAAM,EAAO,gGAlCK,EAF9B,O,mOAAA,SAA8B,G,28BCKvB,IAAM,GAAb,YAcI,WAAYrX,GAAc,iBAEtB,0BAAM,kBAAmBA,IAEzB,IAAI8V,EAAa9V,EAAOma,UAAUC,QAAQ,UAE1C,EAAKC,aAAoBvE,GAEzB,IAAIwE,EAAuBxE,EAAYyE,QACvCD,EAAMnY,WAAa,IACnBmY,EAAM5M,gBAAiB,EAEvB,IAAI8M,EAAoB,CACpBrY,WAAY,IACZsY,UAAW,CAAErJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACzC4Q,QAAS,CAAEtJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACvC3B,KAAMmS,GAGV,EAAK7M,cAAc1B,KAAKyO,GAExB,IAAIG,EAAgC3a,EAAOma,UAAUC,QAAQ,YAAaG,QArBpD,OAsBtBI,EAAkBlN,cAAgB,CAAC+M,GAEnC,EAAK5M,WAAW7B,KAAK4O,GAErB,EAAKnJ,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,IACnD6M,IACA,SAACzN,GAKG,OAHuBA,EAAW,GAAG1I,MACP4J,cAAF,kBAElB8P,aAGd,GAAO,EAAO,4GAElB,EAAKpJ,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,IAChD8P,GACA,SAAC1Q,GAKG,OAHuBA,EAAW,GAAG1I,MACP4J,cAAF,kBAElB+P,UAGd,GAAO,EAAO,oDAElB,EAAKrJ,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,IAClD,MACA,SAACZ,GAKG,OAHuBA,EAAW,GAAG1I,MACP4J,cAAF,kBAElBgQ,YAGd,GAAO,EAAO,qJA5DI,EAd9B,O,mOAAA,mDAE8B+C,EAAsB7C,EAA0Bhb,EAAgB8P,GAEtF,IAAIjF,EAAe7K,EAAOma,UAAUC,QAAQ,mBACxCa,EAAoB,IAAI,EAAcpQ,GAG1C,OAFAoQ,EAAGnQ,cAAH,kBAAwC,IAAIgT,GAAkBD,EAAW7C,EAAalL,GAE/E,CACH5O,MAAO+Z,EACP9S,KAAM0C,OAVlB,GAA0C,GAiFpCiT,G,WAIF,WAAoBD,EAA8B7C,EAAkClL,GAChF,OADkG,WAAlF,KAAA+N,YAA8B,KAAA7C,cAAkC,KAAAlL,OACxEA,GACJ,IAAK,YAAa/H,KAAKoT,QAAU,EAAG,MACpC,IAAK,aAAcpT,KAAKoT,QAAU0C,EAAUvC,WAAWxR,OAAS,G,4CAKpE,OAAQ/B,KAAK+H,MACT,IAAK,YACmB,GAAhB/H,KAAKoT,QACLpT,KAAKiT,YAAYK,eAAe,iGACzBtT,KAAKoT,QAAUpT,KAAK8V,UAAUvC,WAAWxR,OAAS,EACzD/B,KAAKiT,YAAYK,eAAe,0IAEhCtT,KAAK8V,UAAUzB,aAAarU,KAAK8V,UAAUvC,WAAWvT,KAAKoT,QAAU,GAAGja,OACxE6G,KAAKoT,SAAW,GAEpB,MACJ,IAAK,aACGpT,KAAKoT,SAAWpT,KAAK8V,UAAUvC,WAAWxR,OAAS,EACnD/B,KAAKiT,YAAYK,eAAe,iGACzBtT,KAAKoT,QAAU,EACtBpT,KAAKiT,YAAYK,eAAe,0IAEhCtT,KAAK8V,UAAUzB,aAAarU,KAAK8V,UAAUvC,WAAWvT,KAAKoT,QAAU,GAAGja,OACxE6G,KAAKoT,SAAW,M,6BAO5B,OAAQpT,KAAK+H,MACT,IAAK,YACD,OAAI/H,KAAKoT,QAAUpT,KAAK8V,UAAUvC,WAAWxR,OAAS,GAClD/B,KAAKiT,YAAYK,eAAe,uIACzB,MAEJtT,KAAK8V,UAAUvC,WAAWvT,KAAKoT,WAC1C,IAAK,aACD,OAAIpT,KAAKoT,QAAU,GACfpT,KAAKiT,YAAYK,eAAe,uIACzB,MAEJtT,KAAK8V,UAAUvC,WAAWvT,KAAKoT,c,gCAK9C,OAAQpT,KAAK+H,MACT,IAAK,YACD,OAAO/H,KAAKoT,QAAUpT,KAAK8V,UAAUvC,WAAWxR,OACpD,IAAK,aACD,OAAO/B,KAAKoT,SAAW,O,4KCzIhC,IAAM,GAAb,WAMI,WAAoBqB,EAAqCxB,EAAkChb,I,4FAAc,SAArF,KAAAwc,gBAAqC,KAAAxB,cAAkC,KAAAhb,SAJ3F,KAAAsb,WAAsB,GAEtB,KAAA5Q,IAAyB,IAAI7C,I,UAJjC,O,EAAA,G,EAAA,8CASwB,2BAChB,YAAcE,KAAKuT,WAAnB,+CAA+B,KAAtBhQ,EAAsB,QAC3B,KAAMA,EAAEnD,gBAAgBH,GAAiB,CAAC,SAAU,UAAW,UAAW,UAAW,aAAa2E,QAAQrB,EAAEnD,KAAKhG,aAAe,GAC5H,OAAO,GAHC,kFAMhB,OAAO,IAff,kCAoBQ,GAAI4F,KAAK0U,uBACL,MAAO,IAAM1U,KAAKuT,WAAW5Q,KAAI,SAAAhK,GAAC,MAAI,GAAKA,EAAEQ,SAAO0J,KAAK,MAAQ,IA0BrE,IAvBA,IAAIoB,EAAyB,CACzBoF,KAAM,EACNC,OAAQ,EACRvH,OAAQ,GAGRsC,EAA0B,CAC1B,CACIjE,KAAMlG,EAAU8K,KAChBf,SAAUA,EACVM,cAAc,GAElB,CACInE,KAAMlG,EAAUya,aAChBC,SAAUxJ,GACVjS,MAAO,IACP8K,SAAUA,EACVM,cAAc,IAIlBsQ,EAAqB,IAAIpS,EAAc,IAElCvK,EAAI,EAAGA,EAAI8H,KAAKuT,WAAWxR,OAAQ7J,IAAK,CAE7C,IAAIuB,EAAMuG,KAAKuT,WAAWrb,GACtBuB,EAAI2G,gBAAgBH,GAAiBxG,EAAI2G,gBAAgB,GACzDiE,EAAWL,KAAK,CACZ5D,KAAMlG,EAAUya,aAChBC,SAAUxJ,GACVjS,MAAOM,EAAI2G,KAAKqO,OAAOhV,EAAK2R,IAAqBjS,MACjD8K,SAAUA,EACVM,cAAc,KAGlBF,EAAWL,KAAK,CACZ5D,KAAMlG,EAAUya,aAChBC,SAAUnb,EAAI2G,KACdjH,MAAOM,EAAIN,MACXoL,cAAc,EACdN,SAAUA,IAEdI,EAAWL,KAAK,CACZ5D,KAAMlG,EAAU4a,WAChBpT,OAAmCjI,EAAI2G,KAAM2K,UAAU,WAAY8J,GACnEE,aAAa,EACbC,iBAAkB,EAClBzQ,cAAc,EACdN,SAAUA,KAKlBI,EAAWL,KAAK,CACZ5D,KAAMlG,EAAU+a,SAChBC,SAAUhb,EAAUoD,KACpB6X,SAAU/J,GACV7G,cAAc,EACdN,SAAUA,IAGdI,EAAWL,KAAK,CACZ5D,KAAMlG,EAAU+a,SAChBC,SAAUhb,EAAUoD,KACpB6X,SAAU/J,GACV7G,cAAc,EACdN,SAAUA,IAGV/L,EAAI8H,KAAKuT,WAAWxR,OAAS,IAC7BsC,EAAWL,KAAK,CACZ5D,KAAMlG,EAAUya,aAChBC,SAAUxJ,GACVjS,MAAO,KACP8K,SAAUA,EACVM,cAAc,IAElBF,EAAWL,KAAK,CACZ5D,KAAMlG,EAAU+a,SAChBC,SAAUhb,EAAUoD,KACpB6X,SAAU/J,GACV7G,cAAc,EACdN,SAAUA,KAOtBI,EAAWL,KAAK,CACZ5D,KAAMlG,EAAUya,aAChBC,SAAUxJ,GACVjS,MAAO,IACP8K,SAAUA,EACVM,cAAc,IAGlBF,EAAWL,KAAK,CACZ5D,KAAMlG,EAAU+a,SAChBC,SAAUhb,EAAUoD,KACpB6X,SAAU/J,GACV7G,cAAc,EACdN,SAAUA,IAWdI,EAAWL,KAAK,CACZ5D,KAAMlG,EAAUkb,OAChBC,iCAAiC,EACjCC,wBAAwB,EACxB/Q,cAAc,EACdN,SAAUA,EACVsR,mBAAmB,IAGvB,IAAI9T,EAAmB,CACnBxJ,OAAQ+H,KAAK/H,OACboM,WAAYA,EACZiC,aAAc,MAGd5E,EAAiB,IAAIX,EAAO,WAAY,IAAI0B,EAAc,IAAK2I,GAAqB3J,GAAS,GAAO,GAGxG,OAFAzB,KAAKiT,YAAYuC,SAAS9T,EAAQ,IAAI,kBAAMsU,QAAQC,IAAI,4BAA0B,GAE3E,KA3Jf,4BA+JUrc,GAEF,IAAIsc,GAAe,EACfrC,EAA6Bja,EAAOmJ,cAAP,WACjC,GAAU,MAAN8Q,EAAY,4BACZ,YAAkBA,EAAGN,WAArB,+CAAiC,KAAxBpa,EAAwB,QAC7B+c,EAAMA,GAAOlW,KAAKmW,SAAShd,IAFnB,mFAMhB,OAAO+c,IAzKf,+BA4Kald,GACL,OAAIgH,KAAKoU,SAASpb,KAElBgH,KAAKuT,WAAWvP,KAAKhL,GACrBgH,KAAK2C,IAAIS,IAAIpK,EAAEG,OAAO,IACf,KAjLf,6BAqLQ,OAAO6G,KAAKuT,WAAWxR,SArL/B,gCAyLQ,OAAiC,GAA1B/B,KAAKuT,WAAWxR,SAzL/B,mCA4LiBnI,GAET,GAAiC,MAA9BoG,KAAK2C,IAAI5J,IAAIa,EAAOT,OAAgB,OAAO,EAE9C,IAAI,IAAIjB,EAAI,EAAGA,EAAI8H,KAAKuT,WAAWxR,OAAQ7J,IACpC8H,KAAKuT,WAAWrb,GAAGiB,OAASS,EAAOT,OAClC6G,KAAKuT,WAAWC,OAAOtb,EAAG,GAIlC8H,KAAK2C,IAAIyT,OAAOxc,EAAOT,SAtM/B,+BAyMaS,GACL,OAAqC,MAA9BoG,KAAK2C,IAAI5J,IAAIa,EAAOT,SA1MnC,8BA8MQ6G,KAAKuT,WAAa,GAClBvT,KAAK2C,IAAIwR,a,6BA/MjB,K,okBCJO,IAAM,GAAb,YAEI,WAAYlc,GAAc,M,iGAAA,S,EAEtB,S,EAAA,gBAAM,UAAWA,EAAQ,mE,+CAEzB,IAAI8V,EAAa9V,EAAOma,UAAUC,QAAQ,UAE1C,EAAKC,aAAoBvE,GAEzB,IAAIwE,EAAuBxE,EAAYyE,QACvCD,EAAMnY,WAAa,IACnBmY,EAAM5M,gBAAiB,EAEvB,IAAI8M,EAAoB,CACpBrY,WAAY,IACZsY,UAAW,CAAErJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACzC4Q,QAAS,CAAEtJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACvC3B,KAAMmS,GAGV,EAAK7M,cAAc1B,KAAKyO,GAExB,IAAI4D,EAA2Bpe,EAAOma,UAAUC,QAAQ,OAAQG,QAChE6D,EAAa3Q,cAAgB,CAAC+M,GAE9B,EAAK5M,WAAW7B,KAAKqS,GAErB,IAAIzC,EAAuB3b,EAAOma,UAAUC,QAAQ,YAAaG,QA1B3C,OA2BtBoB,EAAalO,cAAgB,CAAC+M,GAE9B,EAAKhJ,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,IAEnD,MACA,SAACZ,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MAEjCmd,EAAK,IAAI,GAAU3d,EAAGV,EAAO6b,KAAKC,iBAAkB9b,GACxDU,EAAEoK,cAAF,WAAgCuT,KAEjC,GAAO,EAAO,iCAAiC,IAEtD,EAAK7M,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IACpDmR,GACA,SAAC/R,GAEG,IACIgS,EADmBhS,EAAW,GAAG1I,MACf4J,cAAF,WAEpB,OAAO,GAAqBiR,YAAYH,EAAIA,EAAGZ,YAAahb,EAAQ,aAAakB,SAElF,GAAO,EAAO,oEAErB,EAAKsQ,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,CAC/C,CAAErI,WAAY,UAAWgG,KAAMmS,EAAOrD,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACxFwO,IACA,SAACzN,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCH,EAAW6I,EAAW,GAG1B,OAFoBlJ,EAAEoK,cAAF,WAEVoT,SAASnd,MAEpB,GAAO,EAAO,yHAErB,EAAKyQ,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,IAAKgG,KAAM,MAAM8O,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACjFwO,IACA,SAACzN,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCS,EAAwBiI,EAAW,GAAG1I,MAG1C,OAFoBR,EAAEoK,cAAF,WAEVmR,MAAMta,MAGpB,GAAO,EAAO,sDAElB,EAAK6P,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,IACjD,MACA,SAACZ,GAKG,OAHuBA,EAAW,GAAG1I,MACf4J,cAAF,WAEVoR,WAGd,GAAO,EAAO,iDAElB,EAAK1K,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,IAAKgG,KAAMmS,EAAOrD,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAClFwO,IACA,SAACzN,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCS,EAAgBiI,EAAW,GAG/B,OAFoBlJ,EAAEoK,cAAF,WAEVqR,SAASxa,MAGvB,GAAO,EAAO,mDAElB,EAAK6P,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,IAAKgG,KAAMmS,EAAOrD,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAClFwO,IACA,SAACzN,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCS,EAAgBiI,EAAW,GAG/B,OAFoBlJ,EAAEoK,cAAF,WAEVsR,aAAaza,MAG3B,GAAO,EAAO,kHAElB,EAAK6P,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,IACnD6M,IACA,SAACzN,GAKG,OAHuBA,EAAW,GAAG1I,MACf4J,cAAF,WAEVuR,aAGd,GAAO,EAAO,4CAElB,EAAK7K,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,IAChD0L,IACA,SAACtM,GAKG,OAHuBA,EAAW,GAAG1I,MACf4J,cAAF,WAEVwR,UAGd,GAAO,EAAO,wDAElB,EAAK9K,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IAAK2I,IACzD,SAACvJ,GAKG,OAHuBA,EAAW,GAAG1I,MACf4J,cAAF,WAEVyR,eAEX,GAAO,IAvJQ,EAF9B,O,mOAAA,SAAkC,G,okBCA3B,IAAM,GAAb,YAEI,WAAYvc,GAAc,M,iGAAA,S,EAEtB,S,EAAA,gBAAM,gBAAiBA,EAAQ,kE,+CAE/B,IAAI8V,EAAa9V,EAAOma,UAAUC,QAAQ,UAE1C,EAAKC,aAAoBvE,GAEzB,IAAIwE,EAAuBxE,EAAYyE,QACvCD,EAAMnY,WAAa,IACnBmY,EAAM5M,gBAAiB,EAEvB,IAAI8M,EAAoB,CACpBrY,WAAY,IACZsY,UAAW,CAAErJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACzC4Q,QAAS,CAAEtJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACvC3B,KAAMmS,GAGV,EAAK7M,cAAc1B,KAAKyO,GAExB,IAAI4D,EAA2Bpe,EAAOma,UAAUC,QAAQ,OAAQG,QAChE6D,EAAa3Q,cAAgB,CAAC+M,GAE9B,EAAK5M,WAAW7B,KAAKqS,GAErB,IAAIzC,EAAuB3b,EAAOma,UAAUC,QAAQ,YAAaG,QA1B3C,OA2BtBoB,EAAalO,cAAgB,CAAC+M,GAE9B,EAAKhJ,UAAU,IAAI1I,EAAO,gBAAiB,IAAI0B,EAAc,IAEzD,MACA,SAACZ,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MAEjCmd,EAAK,IAAI,GAAU3d,EAAGV,EAAO6b,KAAKC,iBAAkB9b,GACxDU,EAAEoK,cAAF,UAA+BuT,KAEhC,GAAO,EAAO,uCAAuC,IAE5D,EAAK7M,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IACpDmR,GACA,SAAC/R,GAEG,IACIgS,EADmBhS,EAAW,GAAG1I,MACf4J,cAAF,WAEpB,OAAO,GAAqBiR,YAAYH,EAAIA,EAAGZ,YAAahb,EAAQ,aAAakB,SAElF,GAAO,EAAO,oEAErB,EAAKsQ,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,CAC/C,CAAErI,WAAY,UAAWgG,KAAMmS,EAAOrD,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACxFwO,IACA,SAACzN,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCH,EAAW6I,EAAW,GAG1B,OAFoBlJ,EAAEoK,cAAF,WAEVoT,SAASnd,MAEpB,GAAO,EAAO,yHAErB,EAAKyQ,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,IAAKgG,KAAM,MAAM8O,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACjFwO,IACA,SAACzN,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCS,EAAwBiI,EAAW,GAAG1I,MAG1C,OAFoBR,EAAEoK,cAAF,WAEVmR,MAAMta,MAGpB,GAAO,EAAO,sDAElB,EAAK6P,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,IACjD,MACA,SAACZ,GAKG,OAHuBA,EAAW,GAAG1I,MACf4J,cAAF,WAEVoR,WAGd,GAAO,EAAO,iDAElB,EAAK1K,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,IAAKgG,KAAMmS,EAAOrD,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAClFwO,IACA,SAACzN,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCS,EAAgBiI,EAAW,GAG/B,OAFoBlJ,EAAEoK,cAAF,WAEVqR,SAASxa,MAGvB,GAAO,EAAO,mDAElB,EAAK6P,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,IAAKgG,KAAMmS,EAAOrD,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAClFwO,IACA,SAACzN,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCS,EAAgBiI,EAAW,GAG/B,OAFoBlJ,EAAEoK,cAAF,WAEVsR,aAAaza,MAG3B,GAAO,EAAO,kHAElB,EAAK6P,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,IACnD6M,IACA,SAACzN,GAKG,OAHuBA,EAAW,GAAG1I,MACf4J,cAAF,WAEVuR,aAGd,GAAO,EAAO,4CAElB,EAAK7K,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,IAChD0L,IACA,SAACtM,GAKG,OAHuBA,EAAW,GAAG1I,MACf4J,cAAF,WAEVwR,UAGd,GAAO,EAAO,wDAElB,EAAK9K,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IAAK2I,IACzD,SAACvJ,GAKG,OAHuBA,EAAW,GAAG1I,MACf4J,cAAF,WAEVyR,eAEX,GAAO,IAvJQ,EAF9B,O,mOAAA,SAAwC,G,yoBCHjC,IAAM,GAAb,YAEI,WAAYvc,GAAc,O,4FAAA,SAEtB,0BAAM,QAASA,IAEf,IAEIsa,EAFoBta,EAAOma,UAAUC,QAAQ,UAEnBG,QAC9BD,EAAMnY,WAAa,IACnBmY,EAAM5M,gBAAiB,EAEvB,IAAI8M,EAAoB,CACpBrY,WAAY,IACZsY,UAAW,CAAErJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACzC4Q,QAAS,CAAEtJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACvC3B,KAAMmS,GAGV,EAAK7M,cAAc1B,KAAKyO,GAExB,IAAIkD,EAAkC1d,EAAOma,UAAUC,QAAQ,cAAeG,QAnBxD,OAoBtBmD,EAAoBjQ,cAAgB,CAAC+M,GAErC,EAAK9F,QAAQ3I,KAAK2R,GAGlB,EAAKlM,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,IAClD8P,EACA,MACA,GAAM,EAAO,0GAEjB,EAAK9I,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,CAChD,CAAErI,WAAY,UAAWgG,KAAMmS,EAAOrD,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACxFyR,EACA,MACA,GAAM,EAAO,0GAEjB,EAAK9I,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,IAChD8P,EACA,MACA,GAAM,EAAO,iHAvCK,EAF9B,O,mOAAA,SAAgC,G,yoBCAzB,IAAM,GAAb,YAEI,WAAYta,GAAc,O,4FAAA,SAEtB,0BAAM,QAASA,EAAQ,wFAEvB,IAEIsa,EAFoBta,EAAOma,UAAUC,QAAQ,UAEnBG,QAC9BD,EAAMnY,WAAa,IACnBmY,EAAM5M,gBAAiB,EAEvB,IAAI8M,EAAoB,CACpBrY,WAAY,IACZsY,UAAW,CAAErJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACzC4Q,QAAS,CAAEtJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACvC3B,KAAMmS,GAGV,EAAK7M,cAAc1B,KAAKyO,GAExB,IAAI8D,EAA6Bte,EAAOma,UAAUC,QAAQ,SAAUG,QACpE+D,EAAe7Q,cAAgB,CAAC+M,GAEhC,EAAK9F,QAAQ3I,KAAKuS,GAGlB,EAAK9M,UAAU,IAAI1I,EAAO,wBAAyB,IAAI0B,EAAc,CACjE,CAAErI,WAAY,UAAWgG,KAAMmS,EAAOrD,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACxFwO,GACA,MACA,GAAM,EAAO,sGAEjB,EAAK7F,UAAU,IAAI1I,EAAO,uBAAwB,IAAI0B,EAAc,CAChE,CAAErI,WAAY,UAAWgG,KAAMmS,EAAOrD,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACxFwO,GACA,MACA,GAAM,EAAO,uGAEjB,EAAK7F,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,UAAWgG,KAAMmS,EAAOrD,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACxF,KACA,MACA,GAAM,EAAO,gDAEjB,EAAK2I,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,UAAWgG,KAAMmS,EAAOrD,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACxF,KACA,MACA,GAAM,EAAO,8CAEjB,EAAK2I,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,IACvD8P,EACA,MACA,GAAM,EAAO,4GAEjB,EAAK9I,UAAU,IAAI1I,EAAO,aAAc,IAAI0B,EAAc,IACtD8P,EACA,MACA,GAAM,EAAO,0GAEjB,EAAK9I,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,IACrD8P,EACA,MACA,GAAM,EAAO,mHAEjB,EAAK9I,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IACpD8P,EACA,MACA,GAAM,EAAO,iHAEjB,EAAK9I,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,CAChD,CAAErI,WAAY,UAAWgG,KAAMmS,EAAOrD,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACxF,KACA,MACA,GAAM,EAAO,8CAEjB,EAAK2I,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,IAC/C8P,EACA,MACA,GAAM,EAAO,4HAEjB,IAAIqB,EAAuB3b,EAAOma,UAAUC,QAAQ,YAAaG,QAhF3C,OAiFtBoB,EAAalO,cAAgB,CAAC+M,GAE9B,EAAKhJ,UAAU,IAAI1I,EAAO,qBAAsB,IAAI0B,EAAc,IAC9DmR,EACA,MACA,GAAM,EAAO,0IAtFK,EAF9B,O,mOAAA,SAAgC,G,okBCQzB,IAAM,GAAb,YAEI,WAAY3b,GAAc,M,iGAAA,S,EAEtB,S,EAAA,gBAAM,aAAcA,EAAQ,sB,+CAE5B,IAAI8V,EAAa9V,EAAOma,UAAUC,QAAQ,UAE1C,EAAKC,aAAoBvE,GAEzB,IAAI0F,EAAuB1F,EAAYyE,QACvCiB,EAAMrZ,WAAa,IACnBqZ,EAAM9N,gBAAiB,EAEvB,IAAI+N,EAAoB,CACpBtZ,WAAY,IACZsY,UAAW,CAAErJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACzC4Q,QAAS,CAAEtJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACvC3B,KAAMqT,GAGV,EAAK/N,cAAc1B,KAAK0P,GAExB,IAAI8C,EAA6Bve,EAAOma,UAAUC,QAAQ,SAAUG,QACpEgE,EAAe9Q,cAAgB,CAACgO,GAEhC,EAAK7N,WAAW7B,KAAKwS,GAErB,IAAI5C,EAAuB3b,EAAOma,UAAUC,QAAQ,YAAaG,QA1B3C,OA2BtBoB,EAAalO,cAAgB,CAACgO,GAE9B,EAAKjK,UAAU,IAAI1I,EAAO,aAAc,IAAI0B,EAAc,IACtD,MACA,SAACZ,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MAEjC0a,EAAK,IAAI,GAAWlb,EAAGV,EAAO6b,KAAKC,iBAAkB9b,GACzDU,EAAEoK,cAAF,WAAgC8Q,KAEjC,GAAO,EAAO,oCAAoC,IAEzD,EAAKpK,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IACpDmR,GACA,SAAC/R,GAEG,IACIgS,EADmBhS,EAAW,GAAG1I,MACd4J,cAAF,WAErB,OAAO,GAAsBiR,YAAYH,EAAIA,EAAGZ,YAAahb,EAAQ,aAAakB,SAEnF,GAAO,EAAO,oEAErB,EAAKsQ,UAAU,IAAI1I,EAAO,qBAAsB,IAAI0B,EAAc,IAC9DmR,GACA,SAAC/R,GAEG,IACIgS,EADmBhS,EAAW,GAAG1I,MACd4J,cAAF,WAErB,OAAO,GAAsBiR,YAAYH,EAAIA,EAAGZ,YAAahb,EAAQ,cAAckB,SAEpF,GAAO,EAAO,0IAErB,EAAKsQ,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,CAC/C,CAAErI,WAAY,UAAWgG,KAAMqT,EAAOvE,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACxFwO,IACA,SAACzN,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCH,EAAW6I,EAAW,GAG1B,OAFqBlJ,EAAEoK,cAAF,WAEXkR,IAAIjb,MAEf,GAAO,EAAO,iIAErB,EAAKyQ,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,IAAKgG,KAAM,MAAM8O,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACjFwO,IACA,SAACzN,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCS,EAAwBiI,EAAW,GAAG1I,MAG1C,OAFqBR,EAAEoK,cAAF,WAEXmR,MAAMta,MAGpB,GAAO,EAAO,sDAElB,EAAK6P,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,IACjD,MACA,SAACZ,GAKG,OAHuBA,EAAW,GAAG1I,MACd4J,cAAF,WAEXoR,WAGd,GAAO,EAAO,iDAElB,EAAK1K,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,IAAKgG,KAAMqT,EAAOvE,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAClFwO,IACA,SAACzN,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCS,EAAgBiI,EAAW,GAG/B,OAFqBlJ,EAAEoK,cAAF,WAEXqR,SAASxa,MAGvB,GAAO,EAAO,mDAElB,EAAK6P,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,IAAKgG,KAAMqT,EAAOvE,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAClFwO,IACA,SAACzN,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCS,EAAgBiI,EAAW,GAG/B,OAFqBlJ,EAAEoK,cAAF,WAEXsR,aAAaza,MAG3B,GAAO,EAAO,kHAElB,EAAK6P,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,IACnD6M,IACA,SAACzN,GAKG,OAHuBA,EAAW,GAAG1I,MACd4J,cAAF,WAEXuR,aAGd,GAAO,EAAO,4CAElB,EAAK7K,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,IAChD0L,IACA,SAACtM,GAKG,OAHuBA,EAAW,GAAG1I,MACd4J,cAAF,WAEXwR,UAGd,GAAO,EAAO,wDAElB,EAAK9K,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IAAK2I,IACzD,SAACvJ,GAKG,OAHuBA,EAAW,GAAG1I,MACd4J,cAAF,WAEXyR,eAEX,GAAO,IAGd,EAAK/K,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,IAClDgR,GACA,SAAC5R,GAKG,OAHuBA,EAAW,GAAG1I,MACd4J,cAAF,WAEX0T,0BAGd,GAAO,EAAO,0GAElB,EAAKhN,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,IAChDgR,GACA,SAAC5R,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjB0I,EAAW,GAG/B,OAFqBlJ,EAAEoK,cAAF,WAEX2T,kBAGd,GAAO,EAAO,0GAElB,EAAKjN,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,IAChDgR,GACA,SAAC5R,GAKG,OAHuBA,EAAW,GAAG1I,MACd4J,cAAF,WAEX4T,kBAGd,GAAO,EAAO,iHAElB,EAAKlN,UAAU,IAAI1I,EAAO,wBAAyB,IAAI0B,EAAc,CACjE,CAAErI,WAAY,UAAWgG,KAAMqT,EAAOvE,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACxFwO,IACA,SAACzN,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCS,EAAgBiI,EAAW,GAG/B,OAFqBlJ,EAAEoK,cAAF,WAEX6T,sBAAsBhd,MAGpC,GAAO,EAAO,sGAElB,EAAK6P,UAAU,IAAI1I,EAAO,uBAAwB,IAAI0B,EAAc,CAChE,CAAErI,WAAY,UAAWgG,KAAMqT,EAAOvE,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACxFwO,IACA,SAACzN,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCS,EAAgBiI,EAAW,GAG/B,OAFqBlJ,EAAEoK,cAAF,WAEX6T,sBAAsBhd,MAGpC,GAAO,EAAO,uGAElB,EAAK6P,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,UAAWgG,KAAMqT,EAAOvE,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACxF,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCS,EAAgBiI,EAAW,GAG/B,OAFqBlJ,EAAEoK,cAAF,WAEX8T,SAASjd,MAGvB,GAAO,EAAO,gDAElB,EAAK6P,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,UAAWgG,KAAMqT,EAAOvE,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACxF,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCS,EAAgBiI,EAAW,GAG/B,OAFqBlJ,EAAEoK,cAAF,WAEX+T,QAAQld,MAGtB,GAAO,EAAO,8CAElB,EAAK6P,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,IACvDgR,GACA,SAAC5R,GAKG,OAHuBA,EAAW,GAAG1I,MACd4J,cAAF,WAEX0T,0BAGd,GAAO,EAAO,4GAElB,EAAKhN,UAAU,IAAI1I,EAAO,aAAc,IAAI0B,EAAc,IACtDgR,GACA,SAAC5R,GAKG,OAHuBA,EAAW,GAAG1I,MACd4J,cAAF,WAEXgU,yBAGd,GAAO,EAAO,0GAElB,EAAKtN,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,IACrDgR,GACA,SAAC5R,GAKG,OAHuBA,EAAW,GAAG1I,MACd4J,cAAF,WAEXiU,wBAGd,GAAO,EAAO,mHAElB,EAAKvN,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IACpDgR,GACA,SAAC5R,GAKG,OAHuBA,EAAW,GAAG1I,MACd4J,cAAF,WAEXkU,uBAGd,GAAO,EAAO,iHAElB,EAAKxN,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,CAChD,CAAErI,WAAY,UAAWgG,KAAMqT,EAAOvE,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACxF,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCS,EAAgBiI,EAAW,GAG/B,OAFqBlJ,EAAEoK,cAAF,WAEXkR,IAAIra,MAGlB,GAAO,EAAO,8CAElB,EAAK6P,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,IAC/CgR,GACA,SAAC5R,GAKG,OAHuBA,EAAW,GAAG1I,MACd4J,cAAF,WAEX0S,SAGd,GAAO,EAAO,4HAzUI,EAF9B,O,mOAAA,SAAqC,G,yoBCP9B,IAAM,GAAb,YAEI,WAAYxd,GAAc,a,4FAAA,UACtB,0BAAM,UAAWA,EAAQ,4CAEpBqa,aAAoBra,EAAOma,UAAUC,QAAQ,WAElD,EAAK5I,UAAW,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,CAAC,CAACrI,WAAY,OAAQgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAAU,MACzJ,SAACe,G,MAE6B,QAA1B,EAAA5J,EAAO6b,KAAKoD,sBAAc,SAAElB,QAAQmB,YAAYC,KAAK,mBAAmBC,OAAO,QAAmBxV,EAAW,GAAG1I,MAAS,aAC1H,GAAO,IATI,EAF9B,O,mOAAA,SAAkC,G,o6CCI3B,IAAMme,GAAb,YAII,WAAYC,EAAUC,GAAmB,yBACrC,0BAAMD,KACDC,UAAYA,EAFoB,EAJ7C,kBAAuC,GAoB1B,GAAb,YAqBI,WAAYpd,EAAoBnC,EAAgBwf,GAA+B,kBAE3E,0BAAMrd,EAAYnC,KArBtByf,aAA2B,GAC3B,EAAAC,oBAA0D,GAC1D,EAAAC,eAAgD,GAEhD,EAAAC,UAAmB,KAkBf,EAAK1U,UAAY,GAEjB,IAAIjL,EAAY,EAL2D,uBAO3E,YAAgBuf,EAAhB,+CAAgC,KAAvBK,EAAuB,QAExBhQ,EAAuB,IAAIpH,EAAUoX,EAAI1d,WAAlB,MAAoC,MAAM,EAAMoJ,EAAW2C,QAAQ,GAE1E,MAAhB2R,EAAI7T,WACJ6D,EAAUoH,YAAc,CACpBjX,OAAQA,EACRgM,SAAU6T,EAAI7T,UAGlB6D,EAAUjI,eAAeuD,IAAInL,EAAQ,CAAC6f,EAAI7T,YAG9C,EAAKmC,YAAYsD,aACb5B,GAIJ,IAAIiQ,EAAe,CACf3d,WAAY0d,EAAI1d,WAChB4d,QAAS9f,KAGb,EAAKwf,aAAa1T,KAAK+T,GACvB,EAAKJ,oBAAoBG,EAAI1d,YAAc2d,EAC3C,EAAKH,eAAeG,EAAGC,SAAWD,GAhCqC,kFAoC3E,GAAG9f,EAAO4O,eAAe,CACrB,EAAKgR,UAAY,CACbzX,KAAM,IAAI,EAAJ,OACNjH,MAAO,IAHU,2BAKrB,YAAc,EAAKue,aAAnB,+CAAgC,KAAxBO,EAAwB,QAE5BA,EAAGre,OAAS,IAAI0d,GAAJ,MAA4BW,GAExC,EAAKJ,UAAU1e,MAAM6K,KAAK,CACtB5D,KAAM,MACNjH,MAAO8e,EAAGre,UAXG,mFAgBzB,IAAIse,EAAO,MApDgE,OAsD3E,EAAK9R,YAAYqD,UAAU,IAAI1I,EAAO,YAClC,IAAI0B,EAAc,IAAK,IAAI,EAAJ,QAAqB,SAACZ,GAEzC,GAAsB,MAAlB,EAAKgW,UAAmB,CAExB,IAAIlG,EAAS,GAFW,uBAGxB,YAAe,EAAK+F,aAApB,+CAAkC,KAAzBS,EAAyB,QAE9BxG,EAAO3N,KAAK,CACR5D,KAAM8X,EACN/e,MAAOgf,EAAGve,UAPM,kFAYxB,EAAKie,UAAY,CACbzX,KAAM,IAAI,EAAU8X,GACpB/e,MAAOwY,GAKf,OAAO,EAAKkG,aAEb,GAAO,IAGd,EAAKpO,UAAU,IAAI1I,EAAO,WACtB,IAAI0B,EAAc,IAAK2I,IAAqB,SAACvJ,GAIzC,OAFkDA,EAAW,GAAG1I,MAEpDqe,UAAUpd,cAEvB,GAAO,IAGd,EAAKqP,UAAU,IAAI1I,EAAO,YACtB,IAAI0B,EAAc,IAAK0L,IAAkB,SAACtM,GAItC,OAFkDA,EAAW,GAAG1I,MAEpDqe,UAAUQ,WAEvB,GAAO,IAlG6D,E,UArBnF,e,EAAA,G,EAAA,kCAQeI,GAEP,IAAIC,EAAqBrY,KAAK2X,oBAAoBS,GAClD,OAAgB,MAAZC,GAA0B,EACvBA,EAASL,UAZxB,kCAgBuB7e,GAAoC,4DAC/Cmf,EAAgCnf,EAAMA,MAC1C,OAAO6G,KAAK5F,WAAa,IAAMke,EAAWd,UAAUpd,aAlB5D,gCA4HqBgG,GAEb,OAAIA,GAAQ+N,IAIZ,+CAAuB/N,KAlI/B,6BAsIkBjH,EAAciH,GAExB,GAAIA,GAAQ+N,GAAkB,CAC1B,IAAIoJ,EAAwBpe,EAAMA,MAClC,MAAO,CACHiH,KAAM+N,GACNhV,MAAOoe,EAAGC,UAAUQ,SAI5B,mDAAoB7e,EAAOiH,Q,6BAhJnC,GAA0B,GCzBpB,SAAUmY,GAAKC,EAAaC,EAAcC,EAC5CC,GACAC,IAAgB,GAChBC,EAAEN,KAAK,CACHnY,KAAM,OACN0Y,OAAO,EACPC,KAAMC,KAAKC,UAAUR,GACrBS,YAAa,mBACbV,IAAKA,EACLW,QAAS,SAAUC,GAEf,GADAR,IAAgB,GACQ,MAApBQ,EAASD,SAAuC,GAApBC,EAASD,SAAyC,iBAAbC,GAAqC,IAAZA,EAAgB,CAC1G,IAAItO,EAAQ,yCACY,MAApBsO,EAAS3N,UAAiBX,EAAQsO,EAAS3N,SAElC,iBAATX,GAEAuO,SAASC,SAGTX,GAAeA,EAAc7N,QAEjC4N,EAAgBU,IAKxBtO,MAAO,SAAUyO,EAAO9N,GAEpB,GADAmN,IAAgB,GACZD,EAAe,CACf,IAAIa,EAAa,2BAKjB,OAJoB,GAAhBD,EAAME,SACND,EAAa,GAAKD,EAAME,aAE5Bd,EAAclN,EAAU,KAAO+N,OAOzC,SAAUZ,GAAgBc,GACxBA,EACAC,OAAO,oBAAoBC,OAE3BD,OAAO,oBAAoBE,OC5C5B,ICHFC,IAAL,SAAKA,GACD,uBAAQ,+BAAY,uCAAgB,6CAAmB,2CAAkB,2CAD7E,CAAKA,QAAU,K,uKCGR,IAAM,GAAb,WAoBI,WAAYC,EAAgCC,EAA4BC,I,4FAAwB,SAhBzF,KAAArY,GAAKsY,EAAYC,QAMxB,KAAAC,qBAA+B,EAG/B,KAAAC,kBAAmC,GAEnC,KAAAC,YAAqC,IAAIxa,IAEzC,KAAAya,aAAoC,KACpC,KAAA7Y,OAAiB,KAIb1B,KAAKwa,OAAST,EAEd/Z,KAAKga,aAAeA,EACpBha,KAAKia,WAAaA,EAElBja,KAAKua,aAAoC,MAArBR,EAA4B,KAAOA,EAAkBQ,aAEtD,MAAfva,KAAKwa,SACLxa,KAAKwa,OAAOH,kBAAkBrW,KAAKhE,MACnCA,KAAK0B,OAAS1B,KAAKwa,OAAO9Y,Q,UA/BtC,O,EAAA,G,EAAA,sCAoCQ,IAAI+Y,EAAY,IAAIP,EAAY,KAAM,CAAE7Q,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GAAK,CAAEsH,KAAM,EAAGC,OAAQ,IAAOvH,OAAQ,IAE3G0Y,EAAUL,qBAAsB,EAKhC,IAJA,IAAIM,EAAkB1a,KAElB2a,GAAe,EAEN,MAAND,GACoB,MAAnBA,EAAGH,eACHE,EAAUF,aAAeG,EAAGH,cAGhCG,EAAGJ,YAAYxJ,SAAQ,SAAC8J,EAAUxgB,GAEe,MAAzCqgB,EAAUH,YAAYvhB,IAAIqB,IAC1BqgB,EAAUH,YAAYlX,IAAIhJ,EAAYwgB,GAGtCA,EAASC,SAAWF,IACpBA,EAAcC,EAASC,aAK/BH,EAAKA,EAAGF,OAMZ,OAFAC,EAAUK,eAAiBH,EAAc,EAElCF,IAlEf,sDAuEoC9S,GAE5B,IAAIoT,EAAqD,GAmCzD,OAjCA/a,KAAKsa,YAAYxJ,SAAQ,SAAC8J,EAAUxgB,GAGf,GAAdA,IAIa,MAAZwgB,GAAqC,MAAjBA,EAASxa,MAAgBwa,EAASxa,gBAAgB,GACtE2a,EAAgB/W,KAAK,CACjB9B,MAAO9H,EAAa,KACpBgO,WAAYhO,EAAa,OACzB2F,cAAe,qBACf+I,gBAAiBd,OAAOC,UAAUc,6BAA6BC,gBAC/DjB,KAAMC,OAAOC,UAAUC,mBAAmB8S,QAC1C3S,MAAOV,IAKfoT,EAAgB/W,KAAK,CACjB9B,MAAO9H,EACPgO,WAAYhO,EACZ2N,KAAMC,OAAOC,UAAUC,mBAAmB+S,SAC1C5S,MAAOV,QAMI,MAAf3H,KAAKwa,QAAkBxa,KAAKwa,OAAOD,cAAgBva,KAAKua,eACxDQ,EAAkBA,EAAgBvT,OAAOxH,KAAKwa,OAAOU,gCAAgCvT,KAGlFoT,IA5Gf,0CA+GwB1R,EAAcC,GAE9B,IAAKtJ,KAAKmb,iBAAiB9R,EAAMC,GAC7B,OAAO,KAGX,IAAI8R,EAAwC,KACxCC,EAAmB,IAPqB,uBAS5C,YAAerb,KAAKqa,kBAApB,+CAAuC,KAA9BK,EAA8B,QACnC,GAAIA,EAAGS,iBAAiB9R,EAAMC,GAAS,CACnC,IAAIgS,EAAMZ,EAAGa,oBAAoBlS,EAAMC,GACnCgS,EAAIrB,WAAW5Q,KAAOiS,EAAItB,aAAa3Q,KAAOgS,IAC9CD,EAAwCE,EACxCD,EAAmBC,EAAIrB,WAAW5Q,KAAOiS,EAAItB,aAAa3Q,QAd1B,kFAuB5C,OAA6C,MAAzC+R,EACOA,EAEApb,OAzInB,uCA8IqBqJ,EAAcC,GAC3B,QAAID,EAAOrJ,KAAKga,aAAa3Q,MAAQA,EAAOrJ,KAAKia,WAAW5Q,QAIxDA,GAAQrJ,KAAKga,aAAa3Q,KAAaC,GAAUtJ,KAAKga,aAAa1Q,OACnED,GAAQrJ,KAAKia,WAAW5Q,MAAaC,GAAUtJ,KAAKia,WAAW3Q,a,6BApJ3E,K,yoBAEW,GAAA6Q,MAAgB,ECFpB,IAAM,GAAb,YAEI,WAAYliB,GAAc,a,4FAAA,UACtB,0BAAM,QAASA,EAAQ,sEAElBqa,aAAoBra,EAAOma,UAAUC,QAAQ,WAElD,EAAK5I,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,eAAgBgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC3G,CAAE1G,WAAY,cAAegG,KAAM6P,GAAmBf,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACpGmP,IACJ,SAACpO,GACG,OAAO,QAEf,GAAO,EAAM,qEAEb,EAAK4H,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,eAAgBgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC3G,CAAE1G,WAAY,cAAegG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACnGqN,IACJ,SAACtM,GACG,OAAO,QAEf,GAAO,EAAM,oEAEb,EAAK4H,UAAU,IAAI1I,EAAO,aAAc,IAAI0B,EAAc,CACtD,CAAErI,WAAY,eAAgBgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC3G,CAAE1G,WAAY,cAAegG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACtGsK,IACJ,SAACvJ,GACG,OAAO,QAEf,GAAO,EAAM,uEAEb,EAAK4H,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,CACrD,CAAErI,WAAY,eAAgBgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC3G,CAAE1G,WAAY,cAAegG,KAAM4O,GAAoBE,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACrGkO,IACJ,SAACnN,GACG,OAAO,QAEf,GAAO,EAAM,sEAEb,EAAK4H,UAAU,IAAI1I,EAAO,aAAc,IAAI0B,EAAc,CACtD,CAAErI,WAAY,eAAgBgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC3G,CAAE1G,WAAY,cAAegG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACtGmO,IACJ,SAACpN,GACG,OAAO,QAEf,GAAO,EAAM,uEAEb,EAAK4H,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,CACvD,CAAErI,WAAY,eAAgBgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC3G,CAAE1G,WAAY,cAAegG,KAAMkP,GAAsBJ,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACvGwO,IACJ,SAACzN,GACG,OAAO,QAEf,GAAO,EAAM,wEAMb,EAAK4H,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,eAAgBgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACvGmP,IACJ,SAACpO,GACG,OAAO,QAEf,GAAO,EAAM,qEAEb,EAAK4H,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,eAAgBgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACvGqN,IACJ,SAACtM,GACG,OAAO,QAEf,GAAO,EAAM,oEAEb,EAAK4H,UAAU,IAAI1I,EAAO,aAAc,IAAI0B,EAAc,CACtD,CAAErI,WAAY,eAAgBgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACvGsK,IACJ,SAACvJ,GACG,OAAO,QAEf,GAAO,EAAM,uEAEb,EAAK4H,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,CACrD,CAAErI,WAAY,eAAgBgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACvGkO,IACJ,SAACnN,GACG,OAAO,QAEf,GAAO,EAAM,sEAEb,EAAK4H,UAAU,IAAI1I,EAAO,aAAc,IAAI0B,EAAc,CACtD,CAAErI,WAAY,eAAgBgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACvGmO,IACJ,SAACpN,GACG,OAAO,QAEf,GAAO,EAAM,uEAEb,EAAK4H,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,CACvD,CAAErI,WAAY,eAAgBgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACvGwO,IACJ,SAACzN,GACG,OAAO,QAEf,GAAO,EAAM,wEA7GS,EAF9B,O,mOAAA,SAAgC,G,uKCezB,I,GAAM,GAAb,yB,4FAAA,SAw6BI,KAAA2Z,oBAAiD,G,UAx6BrD,O,EAAA,G,EAAA,6CAqB0BvjB,EAAgBwjB,EAA0BC,EAA0BC,GAEtF3b,KAAKyb,YAAcA,EACnBzb,KAAK/H,OAASA,EAEd+H,KAAK4b,iBAAmB,GACxB5b,KAAK4b,iBAAiB5X,KAAK0X,GAC3B1b,KAAK6b,mBAAqBH,EAE1B1b,KAAK2b,KAAOA,EAEZ,IAAIG,EAAoBJ,EAAYZ,eAWpC,OAVA9a,KAAK+b,yBAA2BD,EAEhC9b,KAAKgc,eAAiB,KACtBhc,KAAKic,UAAY,GAEjBjc,KAAKkc,eAAiB,GACtBlc,KAAKmc,kBAAoB,GAEzBnc,KAAKoc,cAAa,GAEXpc,KAAKic,YA3CpB,4BA+CUhkB,EAAgBwjB,GAalB,GAXAzb,KAAKyb,YAAcA,EACnBzb,KAAK/H,OAASA,EAEd+H,KAAK4b,iBAAmB,GACxB5b,KAAK6b,mBAAqB,KAE1B7b,KAAKgc,eAAiB,KACtBhc,KAAKic,UAAY,GAEjBjc,KAAK+b,yBAA2B,EAE5B/b,KAAK/H,OAAOokB,UAAUta,OAAS,EAAG,CAClC,IAAIua,EAAYtc,KAAK/H,OAAOokB,UAAUrc,KAAK/H,OAAOokB,UAAUta,OAAS,GACrE/B,KAAK/H,OAAOskB,gBAAgBtC,WAAa,CAAE5Q,KAAMiT,EAAUrY,SAASoF,KAAMC,OAAQgT,EAAUrY,SAASqF,OAAS,EAAGvH,OAAQ,GAG7H/B,KAAK4b,iBAAiB5X,KAAKhE,KAAK/H,OAAOskB,iBACvCvc,KAAK6b,mBAAqB7b,KAAK/H,OAAOskB,gBAEtCvc,KAAKkc,eAAiB,GACtBlc,KAAKmc,kBAAoB,GAEzBnc,KAAKoc,eAELpc,KAAKwc,kBAELxc,KAAKyc,wBAELzc,KAAK/H,OAAOykB,OAAO,GAAK1c,KAAKic,YA7ErC,8CAmFQ,IAAIU,EAAc3c,KAAK/H,OAAO0kB,YAE9B,KAAmB,MAAfA,GAAuBA,EAAYtY,WAAWtC,OAAS,GAA3D,CAEA,IAAI6a,EAAqB,KACrBxW,EAA2B,KAPd,uBAUjB,YAAsBpG,KAAK/H,OAAO4kB,oBAAlC,+CAAuD,KAA9CC,EAA8C,QACnD,GAAIA,EAAU1c,MAAQlG,EAAUU,aAAc,CAE1C,IAAImiB,EAAKD,EAAUE,aAFuB,uBAI1C,YAAcD,EAAG3W,YAAYJ,QAA7B,+CAAsC,KAA7B1N,EAA6B,QAClC,GAAoB,QAAhBA,EAAE8B,YAA6D,GAArC9B,EAAE0I,cAAca,WAAWE,OAAa,CAClE,IAAIkb,EAAK3kB,EAAE0I,cAAca,WAAW,GAChCob,EAAG7c,gBAAgB,GAAa6c,EAAG7c,KAAKgC,aAAegJ,KACrC,MAAdwR,EACA5c,KAAKkd,UAAU,8DAA+DJ,EAAU7Y,WAExF2Y,EAAatkB,EACb8N,EAAc2W,EAAG3W,gBAZS,qFAXjC,kFAgCjB,GAAkB,MAAdwW,EAAoB,CAEpB,IAAI3Y,EAAyB2Y,EAAW/c,eAAe,GAC7B,MAAtB+c,EAAWnb,SAAmBmb,EAAWnb,QAAQ4C,WAAWtC,OAAS,IACrEkC,EAAW2Y,EAAWnb,QAAQ4C,WAAW,GAAGJ,UAGhDjE,KAAKmd,qBAELnd,KAAK/H,OAAO0kB,YAAc3c,KAAKgc,eAE/Bhc,KAAKwE,eAAe,CAAC,CACjBpE,KAAMlG,EAAUkjB,eAChBnZ,SAAUA,EACVM,cAAc,EACd7C,OAAQkb,EACRxW,YAAaA,GACd,CACChG,KAAMlG,EAAUmjB,gBAChBpZ,SAAU2Y,EAAW/c,eAAe9G,IAAIiH,KAAK/H,QAAQ,MAEtD,OAtIf,wCA6IQ,GAAuC,MAAnC+H,KAAK/H,OAAO4kB,oBAAhB,CADW,2BAGX,YAAsB7c,KAAK/H,OAAO4kB,oBAAlC,+CAAuD,KAA9CC,EAA8C,QAOnD,GANIA,EAAU1c,MAAQlG,EAAUU,cAC5BoF,KAAKsd,cAAcR,GAEnBA,EAAU1c,MAAQlG,EAAUe,aAC5B+E,KAAKud,aAAaT,GAElBA,EAAU1c,MAAQlG,EAAUc,iBAAkB,CAC9C,IAAIgM,EAAS8V,EAAUE,aACT,MAAVhW,GACAhH,KAAKwd,6BAA6BxW,KAbnC,sFA5InB,mCAiKiByW,GAET,GAA6B,MAAzBA,EAAST,aAAb,CAEAhd,KAAK0d,oBAAmB,EAAOD,EAAS/K,UAAW+K,EAAS9K,SAE5D,IAAIgL,EAAkBF,EAAST,aAI/Bhd,KAAK6b,mBAAmBtB,aAAeoD,EACvC3d,KAAKgc,eAAiB2B,EAAUtX,+BAXM,2BAatC,YAAsBoX,EAASpa,WAA/B,+CAA2C,KAAlCyE,EAAkC,QACtB,MAAbA,GAAsBA,EAAUlH,UAAwC,MAA5BkH,EAAU8V,gBACtD5d,KAAK6d,oBAAoB/V,IAfK,kFAmBlC6V,EAAUtX,+BAA+BhC,WAAWtC,OAAS,GAC7D/B,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUkb,OAChBnR,SAAUjE,KAAK8d,cAAc7Z,SAC7BoR,iCAAiC,EACjC9Q,cAAc,EACd+Q,wBAAwB,IAKhCtV,KAAKgc,eAAe1V,aAAayX,eA9BK,2BAgCtC,YAAuBN,EAASzX,QAAhC,+CAAyC,KAAhCgY,EAAgC,QACnB,MAAdA,GAAuBA,EAAW7c,YAAe6c,EAAWpd,UAC5DZ,KAAKie,cAAcD,IAlCW,kFAsCtChe,KAAKke,eAAe,MAGpBle,KAAK0d,oBAAmB,EAAOD,EAAS/K,UAAW+K,EAAS9K,SAzCtB,2BA2CtC,YAA0B8K,EAAS9L,OAAnC,+CAA2C,KAAlCwM,EAAkC,QAEvC,GAA2C,MAAvCA,EAAcC,sBAA+B,CAE7C,IAAIpkB,EAAa,CACb/B,OAAQ+H,KAAK/H,OACbqO,aAAc,KACdjC,WAAY,IAGhBrE,KAAKgc,eAAiBhiB,EAEtBgG,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUmkB,cAChBpa,SAAUka,EAAcla,SACxB0Z,UAAWA,EACXvF,gBAAiB+F,EAAc/jB,aAGnC4F,KAAKse,2BAA2BX,EAAWQ,EAAcC,sBACrDD,EAAcla,SAAUka,EAAcI,eAAgBJ,EAAcK,sBAExExe,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUukB,WAChBxa,SAAUka,EAAcla,SACxBM,cAAc,IAGlB,IAAI8T,EAAqBsF,EAAUhG,oBAAoBwG,EAAc/jB,YACrEie,EAASqG,uBAAyB1kB,EAClCqe,EAASpU,SAAWka,EAAcla,WAzEJ,kFA+EtCjE,KAAKke,eAAe,MAIpBle,KAAK0d,oBAAmB,EAAOD,EAAS/K,UAAW+K,EAAS9K,SAE5D3S,KAAK6b,mBAAmBtB,aAAeoD,EAAUvX,YACjDpG,KAAKgc,eAAiB2B,EAAUvX,YAAYC,+BAtFN,2BAwFtC,YAAsBoX,EAASpa,WAA/B,+CAA2C,KAAlC,EAAkC,QACtB,MAAb,GAAqB,EAAUzC,UAAwC,MAA5B,EAAUgd,gBACrD5d,KAAK6d,oBAAoB,IA1FK,kFA8FtC7d,KAAKgc,eAAe1V,aAAayX,eA9FK,2BAgGtC,YAAuBN,EAASzX,QAAhC,+CAAyC,KAAhC,EAAgC,QACnB,MAAd,GAAsB,EAAWpF,UACjCZ,KAAKie,cAAc,IAlGW,kFAqGtCje,KAAKwd,6BAA6BG,GAElC3d,KAAKke,eAAe,SAxQ5B,iDA4Q+BP,EAAiBgB,EACxC1a,EAAwBsa,EAAgCC,GACxD,IAAInU,EAAyB,GAD6D,uBAG1F,YAAcsU,EAAd,+CAA8B,KAArB3kB,EAAqB,QACtB4kB,EAAW5e,KAAK6e,YAAY7kB,GAChB,MAAZ4kB,GACJvU,EAAerG,KAAK4a,EAASxe,OANyD,kFAS1F,IAAI4F,EAAU2X,EAAU9S,6BAA6B8S,EAAUvjB,WAC3DiQ,GAAgB,EAAM7G,EAAW0I,SAKrC,GAHAlM,KAAK/H,OAAO6mB,uBAAuB7a,EAAUsa,EAAgBZ,EAAUpV,WAAW/E,EAAW0I,QAASyR,EAAUvjB,YAAaokB,GAGxG,MAAjBxY,EAAQ8E,MAER,OADA9K,KAAKkd,UAAUlX,EAAQ8E,MAAO7G,GACvB,CAAE7D,KAAMgL,GAAqB2T,cAAc,GAKtD,IAFA,IAAIrd,EAASsE,EAAQ2E,WAAW,GAEvBzS,EAAI,EAAGA,EAAImS,EAAetI,OAAQ7J,IAAK,CAC5C,IAAIsW,EAAW9M,EAAO8L,iBAAiBtV,GACnC8mB,EAAU3U,EAAenS,GACxB8mB,EAAQ3Q,OAAOG,IAEZwQ,aAAmB/e,GAAiBuO,aAAoBvO,GACpD+e,EAAQC,mBAAmBzQ,GAAUkC,gBACrC1Q,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUglB,UAChBjb,SAAU,KACVkb,QAAS3Q,EACT4Q,iBAA2C,EAAxB/U,EAAetI,OAAa7J,IAQnE8H,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAU4a,WAChBpT,OAAQA,EACRuC,SAAUA,EACVM,cAAc,EACdwQ,aAAa,EACbC,kBAAmB3K,EAAetI,OAAS,OA5TvD,oCAgUkB+a,GAEV,GAA8B,MAA1BA,EAAUE,aAAd,CAEAhd,KAAK0d,oBAAmB,EAAOZ,EAAUpK,UAAWoK,EAAUnK,SAE9D,IAAI7P,EAAega,EAAUE,aAIzBqC,EAAmBvc,EAAMwc,mBAEG,IAA5BD,EAAiB5T,SACjBzL,KAAKkd,UAAUmC,EAAiB5T,QAASqR,EAAU7Y,SAAU,QAASjE,KAAKuf,uBAAuBzC,EAAUnK,QAAS0M,IAGzH,IAAIlc,EAAYL,EAAMK,UACL,MAAbA,GAAqBA,EAAUlL,QAAU6K,EAAM7K,QAAUkL,EAAUtC,YAAc2C,EAAW0I,SAC5FlM,KAAKkd,UAAU,mBAAqB/Z,EAAU/I,WAAa,eAAiB0I,EAAM1I,WAAa,4BAA6B0iB,EAAU7Y,UAG1IjE,KAAK6b,mBAAmBtB,aAAezX,EACvC9C,KAAKgc,eAAiBlZ,EAAMuD,+BAtBa,2BAwBzC,YAAsByW,EAAUzZ,WAAhC,+CAA4C,KAAnCyE,EAAmC,QACvB,MAAbA,GAAsBA,EAAUlH,UAAwC,MAA5BkH,EAAU8V,gBACtD5d,KAAK6d,oBAAoB/V,IA1BQ,kFA8BrChF,EAAMuD,+BAA+BhC,WAAWtC,OAAS,GACzD/B,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUkb,OAChBnR,SAAUjE,KAAK8d,cAAc7Z,SAC7BoR,iCAAiC,EACjC9Q,cAAc,EACd+Q,wBAAwB,IAKhCtV,KAAKgc,eAAe1V,aAAayX,eAzCQ,2BA2CzC,YAAuBjB,EAAU9W,QAAjC,+CAA0C,KAAjCgY,EAAiC,QACpB,MAAdA,GAAuBA,EAAW7c,YAAe6c,EAAWpd,UAC5DZ,KAAKie,cAAcD,IA7Cc,kFAiDzChe,KAAKwd,6BAA6B1a,GAElC9C,KAAKke,eAAe,MAGpBle,KAAK0d,oBAAmB,EAAOZ,EAAUpK,UAAWoK,EAAUnK,SAE9D3S,KAAK6b,mBAAmBtB,aAAezX,EAAMsD,YAC7CpG,KAAKgc,eAAiBlZ,EAAMsD,YAAYC,+BAzDC,2BA2DzC,YAAsByW,EAAUzZ,WAAhC,+CAA4C,KAAnC,EAAmC,QACvB,MAAb,GAAqB,EAAUzC,UAAwC,MAA5B,EAAUgd,gBACrD5d,KAAK6d,oBAAoB,IA7DQ,kFAiErC/a,EAAMsD,YAAYC,+BAA+BhC,WAAWtC,OAAS,GACrE/B,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUkb,OAChBnR,SAAUjE,KAAK8d,cAAc7Z,SAC7BoR,iCAAiC,EACjC9Q,cAAc,EACd+Q,wBAAwB,IAKhCtV,KAAKgc,eAAe1V,aAAayX,eA5EQ,2BA8EzC,YAAuBjB,EAAU9W,QAAjC,+CAA0C,KAAjC,EAAiC,QACpB,MAAd,GAAsB,EAAWpF,UACjCZ,KAAKie,cAAc,IAhFc,kFAoFzCje,KAAKke,eAAe,SApZ5B,mDAyZiCsB,GAEzB,IAAIC,EAA0C,GAFC,uBAI/C,YAAcD,EAAIxZ,QAAlB,+CAA2B,KAAlB1N,EAAkB,QAEnBqJ,EAAYrJ,EAAE0T,kCAClB,GAA+B,MAA3ByT,EAAa9d,GAAoB,CAEjC,IAAI+d,EAAkB,iBAClBF,aAAe,IAAWE,EAAU,iBACpCF,aAAe,KAAME,EAAU,YAEnC1f,KAAKkd,UAAUwC,EAAUF,EAAIplB,WAAa,kDAAoDuH,EAAWrJ,EAAEuH,eAAe9G,IAAIiH,KAAK/H,QAAQ,GAAI,SAC/I+H,KAAKkd,UAAUwC,EAAUF,EAAIplB,WAAa,kDAAoDuH,EAAW8d,EAAa9d,GAAW9B,eAAe9G,IAAIiH,KAAK/H,QAAQ,GAAI,cAGrKwnB,EAAa9d,GAAarJ,GAjBa,qFAzZvD,6CAib2B2L,EAAwBob,GAE3C,IAAIplB,EAAY,GAF2F,uBAG3G,YAAcolB,EAAiB3T,eAA/B,+CAA+C,KAAtCpT,EAAsC,QAC3C2B,GAAK,aAA+B,MAAhB3B,EAAE2I,WAAqB,QAAUkB,EAAkB7J,EAAE2I,aAAe,IAAM3I,EAAE8B,WAAa,IAC7GH,GAAK3B,EAAE0I,cAAca,WAAWc,KAAI,SAAA3I,GAAC,OAAImI,EAAkBnI,EAAEoG,MAAQ,IAAMpG,EAAEI,cAAYyI,KAAK,MAC9F5I,GAAK,4CANkG,kFAS3G,MAAO,CACH0O,MAAO,6BACPgX,cAAe,SAACC,GACZ,MAAO,CACH,CACIC,SAAUD,EACVE,KAAM,CACFzX,MAAO,CAAE0X,gBAAiB9b,EAASoF,KAAM2W,YAAa/b,EAASqF,OAAS,EAAG2W,cAAehc,EAASoF,KAAM6W,UAAWjc,EAASqF,OAAS,GACtI6W,KAAMlmB,SAlclC,oCA4ckB+jB,G,MAENtc,EAASsc,EAAWhB,aAIxB,GAFAhd,KAAKogB,uBAAuB1e,GAEd,MAAVA,EAAJ,CAIA1B,KAAKmd,qBACLzb,EAAOD,QAAUzB,KAAKgc,eAEtBhc,KAAK0d,oBAAmB,EAAOM,EAAWtL,UAAWsL,EAAWrL,SAChE3S,KAAK6b,mBAAmBna,OAASA,EAEjC,IAAImZ,EAAmB,EAhBoB,uBAkB3C,YAAcnZ,EAAO2e,mBAAmBxe,WAAxC,+CAAoD,KAA3C0B,EAA2C,QAChDA,EAAEsX,SAAWA,IAEb7a,KAAK6b,mBAAmBvB,YAAYlX,IAAIG,EAAEnJ,WAAYmJ,IArBf,kFA2B3C,GAFAvD,KAAK+b,yBAA2BiC,EAAWnc,WAAWE,OAAS,EAE3DL,EAAON,eAAiBpB,KAAK6b,mBAAmBtB,wBAAwB,EAAO,CAC/E,IAAIhiB,EAAWyH,KAAK6b,mBAAmBtB,aACvC,GAAS,MAALhiB,IAAwB,QAAf,EAAIA,EAAE4K,iBAAS,eAAEiH,kBAAkB,CAC5C,IAAIU,GAAiB,EAErB,GAD6B,MAAzBkT,EAAW3Z,YAAsD,GAAhC2Z,EAAW3Z,WAAWtC,SAAa+I,GAAQ,IAC3EA,EAED,GADAA,GAAQ,EACJkT,EAAW3Z,WAAW,GAAGjE,MAAQlG,EAAUomB,UAAW,CACtD,IAAIC,EAAMvC,EAAW3Z,WAAW,GAAGA,WAC/Bkc,EAAIxe,OAAS,GAAKwe,EAAI,GAAGngB,MAAQlG,EAAUsmB,uBAC3C1V,GAAQ,QAELkT,EAAW3Z,WAAW,GAAGjE,MAAQlG,EAAUsmB,uBAClD1V,GAAQ,GAGhB,GAAIA,EAAO,CACP,IAAI2V,EAAqB,KACrBlW,EAAehS,EAAE4K,UAAU6C,QAAQ+D,QAAO,SAAAzR,GAAC,OAAIA,EAAE8I,iBACrD,GAA2B,GAAvBmJ,EAAaxI,OAAa,CAC1B,IAAI2e,EAAa,SAAWnW,EAAa,GAAGvJ,cAAca,WAAWc,KAAI,SAAA3I,GAAC,OAAIA,EAAEI,cAAYyI,KAAK,MAAQ,KACrGoB,EAAW+Z,EAAW/Z,SAC1Bwc,EAAW,CACP9X,MAAO,mDAEPgX,cAAe,SAACC,GACZ,MAAO,CAAC,CACJC,SAAUD,EACVE,KAAM,CACFzX,MAAO,CACH0X,gBAAiB9b,EAASoF,KAAO,EAAG2W,YAAa,EAAGC,cAAehc,EAASoF,KAAO,EAAG6W,UAAW,EACjGzU,QAAS,GACTkV,SAAU3Y,OAAO4Y,eAAeC,OAEpCV,KAAM,OAASO,EAAa,UAOhD1gB,KAAKkd,UAAU,8BAAgC3kB,EAAE6B,WAAa,4IAC1D4jB,EAAW/Z,SAAU,QAASwc,KAK9C,IAAIK,EAAoB9gB,KAAKyb,YAAYpJ,QAAQ,SAASjS,KAc1D,GAbwB,CAAC,MAAO,aAAc,YAAa,UACvD,cAAe,YAAa,cAAe,eAAgB,gBACzCwE,QAAQlD,EAAOtH,aAAe,GAAK4F,KAAK6b,mBAAmBtB,aAAatM,gBAAgB6S,IAC1G9gB,KAAKwE,eAAe,CAChB,CACIpE,KAAMlG,EAAU6mB,kBAChB9c,SAAU+Z,EAAW/Z,aAKPjE,KAAKghB,mBAAmBhD,EAAW3Z,YAAY4c,oBAE/C,CACtBjhB,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUkb,OAChBnR,SAAU+Z,EAAWrL,QACrB0C,iCAAiC,EACjC9Q,cAAc,EACd+Q,wBAAwB,IAG5B,IAAIpC,EAAKxR,EAAOwf,gBACXxf,EAAON,eAAuB,MAAN8R,GAAcA,GAAMtB,IAC7C5R,KAAKkd,UAAU,0EAA4EhK,EAAG9Y,WAAa,+DAAgE4jB,EAAW/Z,UAI9LvC,EAAOJ,8BAAgCtB,KAAK+b,yBACtCiC,EAAWnc,WAAWE,OAAS,EAErC/B,KAAKke,iBACLle,KAAKgc,eAAe1V,aAAayX,kBAvjBzC,6CA8jB2Brc,GAEnB,IAAIoB,EAAQ9C,KAAK6b,mBAAmBtB,aACpC,GAAa,MAATzX,EAAe,4BAEf,YAAe9C,KAAKyb,YAAY0F,YAAW,GAA3C,+CAAmD,KAA1CC,EAA0C,+BAC/C,YAAcA,EAAGhP,UAAUiP,SAA3B,+CAAqC,KAA5B9oB,EAA4B,QACjC,GAAIA,aAAa,GAASA,GAAKuK,GAASvK,EAAE0V,gBAAgBnL,GAAQ,4BAC9D,YAAcvK,EAAEyN,QAAhB,+CAAyB,KAAhB1N,EAAgB,QACrB,GAAS,MAALA,GAAuB,MAAVoJ,GAAkBpJ,EAAEqJ,WAAaD,EAAOC,UAErD,YADAD,EAAOL,WAAY,IAHmC,qFAFvB,oFAFpC,sFAjkB3B,0CAolBwByG,GAEhB,GAAiB,MAAbA,GAGwB,MAAxBA,EAAU1N,YAAkD,MAA5B0N,EAAU8V,eAA9C,CAEI9V,EAAUlH,SACVZ,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUonB,oBAChBC,oBAAqBzZ,EAAU1N,WAC/B6J,SAAU6D,EAAU8V,eAAe3Z,SACnCnB,MAAqB9C,KAAK6b,mBAAmBtB,eAGjDva,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUsnB,cAChBD,oBAAqBzZ,EAAU1N,WAC/B6J,SAAU6D,EAAU8V,eAAe3Z,SACnCwd,eAAe,IAKvB,IAAIC,EAAqB1hB,KAAK6e,YAAY/W,EAAU8V,gBAE1B,MAAtB8D,GAAyD,MAA3BA,EAAmBthB,OAC5CJ,KAAK2hB,uBAAuBD,EAAmBthB,KAAM0H,EAAU8Z,cAAc5E,gBAElC,MAAxClV,EAAU8Z,cAAc5E,aACxBhd,KAAKkd,UAAU,oBAAsBpV,EAAU1N,WAAa,mCAAoC0N,EAAU7D,UAE1GjE,KAAKkd,UAAU,kCAAoCwE,EAAmBthB,KAAO,sBAAwB0H,EAAU1N,WAAa,YAAc0N,EAAU8Z,cAAc5E,aAAa5iB,WAAa,4BAA6B0N,EAAU8V,eAAe3Z,WAM1PjE,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUiE,WAChB8F,SAAU6D,EAAU8V,eAAe3Z,SACnCM,cAAc,EACdsd,mBAAmB,QA9nBnC,2CAwoBQ7hB,KAAKgc,eAAiB,CAClB/jB,OAAQ+H,KAAK/H,OACboM,WAAY,GACZiC,aAAc,MAGlBtG,KAAKgc,eAAe1V,aAAe,IAAI,EAAatG,KAAKgc,gBAEzDhc,KAAK8d,cAAgB,OAhpB7B,qCAopBoD,IAAnCgE,EAAmC,wDAE5C9hB,KAAKmd,qBAEL,IAAIlZ,EAAyB,CAAEoF,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GAEvDggB,EAAiB/hB,KAAK/H,OAAO8pB,eACX,MAAlBA,GAA0BA,EAAehgB,OAAS,GAA0B,MAArBggB,EAAe,KACtE9d,EAAWjE,KAAK/H,OAAO8pB,eAAe,GAAG9d,UAGxC6d,IACD9hB,KAAK0d,oBAAmB,EAAMzZ,EAAU,CAAEoF,KAAM,IAAQC,OAAQ,EAAGvH,OAAQ,GAAK/B,KAAKgc,gBACrFhc,KAAK2b,KAAO,IAGhB3b,KAAK/H,OAAO0kB,YAAc3c,KAAKgc,eAE/B,IAAIgG,GAA0B,EAEI,MAA9BhiB,KAAK/H,OAAO8pB,gBAA0B/hB,KAAK/H,OAAO8pB,eAAehgB,OAAS,IAE1EigB,GAAiB,EACjBhiB,KAAKghB,mBAAmBhhB,KAAK/H,OAAO8pB,gBAEhCD,GAA4C,MAAtB9hB,KAAK8d,eAAyB9d,KAAK8d,cAAc1d,MAAQlG,EAAU+nB,sBACzFjiB,KAAKkiB,sBAGTliB,KAAKmiB,aAAeniB,KAAK/H,OAAOmqB,eACP,MAArBpiB,KAAKmiB,eAAsBniB,KAAKmiB,aAAe,CAAE9Y,KAAM,IAAQC,OAAQ,EAAGvH,OAAQ,IAGtF/B,KAAK6b,mBAAmB5B,WAAaja,KAAKmiB,aACrCL,GAAoB9hB,KAAKke,eAAele,KAAKgc,gBAAgB,GAClEhc,KAAK2b,KAAO,KAEZ3b,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUukB,WAChBxa,SAAUjE,KAAKmiB,aACf5d,cAAc,EACd8d,sBAAsB,IACvB,IAIPriB,KAAKgc,eAAe1V,aAAayX,eAE5B+D,GAAuBE,IACxBhiB,KAAKke,eAAele,KAAKgc,gBACzBhc,KAAK2b,KAAO,QAtsBxB,6CA2sB2B2G,EAAgBC,EAActe,EAAyBue,GAE1E,GAAgB,MAAZF,EAAkB,OAAO,EAE7B,GAAIA,EAASjU,OAAOkU,GAChB,OAAO,EAGX,GAAgB,MAAZD,GAA8B,MAAVC,EAAgB,OAAO,EAE/C,IAAKD,EAAS/W,UAAUgX,GASpB,OAPIA,GAAUjT,IAAoC,MAAZkT,GAElCxiB,KAAKyiB,+BAA+BD,IAKjC,EAGX,GAA+B,MAA3BF,EAAQ,aAA2BA,EAAQ,YAAgB1d,QAAQ2d,IAAW,EAC9E,OAAO,EAGX,GAAID,aAAoB,GAASC,GAAUnX,GAAqB,CAE5D,IAAIsX,EAAoB1iB,KAAK2iB,qBAAqBL,EAAUre,GAE5D,OAAyB,MAArBye,IACA1iB,KAAKwE,eAAeke,IACb,GAOf,GAAIJ,aAAoBriB,IAAkBsiB,aAAkBtiB,GAAiBsiB,GAAUnX,IAAsB,CACzG,IAAIwX,EAAWN,EAASrD,mBAAmBsD,GAC3C,IAAKK,EAASnS,UACV,OAAO,EAEPmS,EAASlS,gBACT1Q,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUglB,UAChBC,QAASoD,EACTte,SAAUA,IAKtB,OAAO,IAhwBf,2CAowByB7D,EAAa6D,GAC9B,IAAI4e,EAAiBziB,EAAK0iB,qBAAqB,cAC/C,OAAsB,MAAlBD,GAA0BA,EAAe3B,iBAAmB9V,GAErD,CACHhL,KAAMlG,EAAU4a,WAChB7Q,SAAUA,EACVvC,OAAQmhB,EACR9N,aAAa,EACbC,iBAAkB,EAClBzQ,cAAc,GAKX,OAnxBnB,qDAuxBmCie,GAC3B,GAAIA,EAASpiB,MAAQlG,EAAU+a,UAAYuN,EAAStN,UAAYhb,EAAUiE,WAAY,CAClF,IAAI4kB,EAAMP,EAASve,SACnBjE,KAAKkd,UAAU,sHACX6F,EAAK,QAAS,CACdpa,MAAO,sBACPgX,cAAe,SAACC,GACZ,MAAO,CAAC,CACJC,SAAUD,EACVE,KAAM,CACFzX,MAAO,CACH0X,gBAAiBgD,EAAI1Z,KAAM2W,YAAa+C,EAAIzZ,OAAQ2W,cAAe8C,EAAI1Z,KAAM6W,UAAW6C,EAAIzZ,OAAS,EACrGmC,QAAS,GACTkV,SAAU3Y,OAAO4Y,eAAeC,OAEpCV,KAAM,cAtyBlC,yCAizBuB6C,GAGf,GAAa,MAATA,GAAiC,GAAhBA,EAAMjhB,QAA2B,MAAZihB,EAAM,GAAY,MAAO,CAAE/B,qBAAqB,GAE1F,IAGIgC,EAHAhC,EAA+BjhB,KAAKkjB,6BAA6BF,GAEjEG,EAAWH,EAAMA,EAAMjhB,OAAS,GAiBpC,OAfgB,MAAZohB,GACIA,EAAS/iB,MAAQlG,EAAUomB,UAC3B2C,EAAcE,EAASlJ,WAGJ,OADnBgJ,EAAcrqB,OAAOwqB,OAAO,GAAID,EAASlf,aAErCgf,EAAY3Z,QAAU2Z,EAAYlhB,OAClCkhB,EAAYlhB,OAAS,GAG7B/B,KAAKmiB,aAAec,GAEpBA,EAAcjjB,KAAKmiB,aAGhB,CAAElB,oBAAqBA,EAAqBgC,YAAaA,KAz0BxE,mDA60BiCD,GACzB,IAAI/B,GAAsB,EADe,uBAGzC,YAAiB+B,EAAjB,+CAAwB,KAAf1e,EAAe,QAEpB,GAAY,MAARA,EAAJ,CAEA,IAAIlE,EAAOJ,KAAK6e,YAAYva,GAEhB,MAARlE,GAA4C,MAA5BA,EAAK6gB,qBAA+B7gB,EAAK6gB,sBACzDA,GAAsB,GAMd,MAAR7gB,GAA6B,MAAbA,EAAKA,MAAgBA,EAAKA,MAAQwR,KAExB,MAAtB5R,KAAK8d,eACL9d,KAAK8d,cAAc1d,MAAQlG,EAAUiE,YAAc6B,KAAK8d,cAAc+D,kBACtE7hB,KAAK8d,cAAc+D,mBAAoB,EAEvC7hB,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAU+nB,qBAChBhe,SAAU,KACVof,SAAU,EACV9e,cAAc,IACf,MA3B0B,kFAkCzC,OAAO0c,IA/2Bf,uCAs3BqB8B,EAAa1e,GAC1B,GAAkB,MAAdA,EAAJ,CACKif,MAAMC,QAAQlf,KAAaA,EAAa,CAACA,IAFe,2BAG7D,YAAeA,EAAf,+CAA2B,KAAlBqW,EAAkB,QACvB1a,KAAKgc,eAAe3X,WAAWmP,OAAOuP,IAAO,EAAGrI,IAJS,sFAt3BrE,qCA83BmB8I,GAAuF,IAAnDC,EAAmD,wDAElG,GAAiB,MAAbD,EAAJ,CAEA,GAAIC,GAAsCzjB,KAAKgc,eAAe3X,WAAWtC,OAAS,EAAG,CACjF,IAAI2hB,EAAwB1jB,KAAKgc,eAAe3X,WAAWrE,KAAKgc,eAAe3X,WAAWtC,OAAS,GACnG2hB,EAAWnf,cAAe,EAG9B,GAAI+e,MAAMC,QAAQC,GAAY,4BAC1B,YAAeA,EAAf,+CAA0B,KAAjB9I,EAAiB,QACtB1a,KAAKgc,eAAe3X,WAAWL,KAAK0W,GAChCA,EAAGta,MAAQlG,EAAUkb,QAAUsF,EAAGta,MAAQlG,EAAUypB,YAC1B,MAAtB3jB,KAAK8d,gBAAuB9d,KAAK8d,cAAcvZ,cAAe,GAEnD,MAAfmW,EAAGzW,SACHjE,KAAKmiB,aAAezH,EAAGzW,SAEvByW,EAAGzW,SAAWjE,KAAKmiB,aAEvBniB,KAAK8d,cAAgBpD,GAXC,wFAc1B1a,KAAKgc,eAAe3X,WAAWL,KAAKwf,GAChCA,EAAUpjB,MAAQlG,EAAUkb,QAAUoO,EAAUpjB,MAAQlG,EAAUypB,YACxC,MAAtB3jB,KAAK8d,gBAAuB9d,KAAK8d,cAAcvZ,cAAe,GAE5C,MAAtBif,EAAUvf,SACVjE,KAAKmiB,aAAeqB,EAAUvf,SAE9Buf,EAAUvf,SAAWjE,KAAKmiB,aAG9BniB,KAAK8d,cAAgB0F,KA/5BjC,4CAo6BQ,IAAII,EAAM5jB,KAAKgc,eAAe3X,WAAWoR,MACzCzV,KAAKgc,eAAe1V,aAAaud,WAAWD,KAr6BpD,yCA26BuBE,EAA6B9J,EAA4BC,EACxExY,GAEA,IAAIiZ,EAAK,IAAI,GAAY1a,KAAK6b,mBAAoB7B,EAAcC,GAIhE,GAFAja,KAAK4b,iBAAiB5X,KAAKhE,KAAK6b,oBAE5BiI,IACApJ,EAAGN,qBAAsB,EACzBpa,KAAK6b,mBAAmBf,eAAiB9a,KAAK+b,yBAC9C/b,KAAK+b,yBAA2B,EAEjB,MAAXta,GAAiB,CACjB,IAAIsiB,EAA8C,CAC9C3jB,KAAMlG,EAAU8pB,eAChB/f,SAAU+V,EACViK,yBAA0B,GAG9BxiB,EAAQ4C,WAAWL,KAAK+f,GACxB/jB,KAAKwb,oBAAoBxX,KAAK+f,GAOtC,OAFA/jB,KAAK6b,mBAAqBnB,EAEnBA,IAt8Bf,qCA08BmBjZ,GAAsE,WAAnDgiB,EAAmD,wDAE7E/I,EAAK1a,KAAK6b,mBAoBV,GAnBJ7b,KAAK6b,mBAAqB7b,KAAK4b,iBAAiBnG,MAGhDiF,EAAGJ,YAAYxJ,SAAQ,SAAAvN,GACO,MAAtBA,EAAE2gB,kBAA4B3gB,EAAE4gB,2BAChC,EAAKlI,UAAUjY,KAAKT,EAAE2gB,kBACtB3gB,EAAE2gB,iBAAmB,SAarBxJ,EAAGN,sBAEHM,EAAGI,eAAiB9a,KAAK+b,yBACzB/b,KAAK+b,yBAA2B/b,KAAK6b,mBAAmBf,eAEzC,MAAXrZ,GAAiB,CACjB,IAAI2iB,EAAqBpkB,KAAKwb,oBAAoB/F,MAGlD,GAF0B,MAAtB2O,IAA4BA,EAAmBH,yBAA2BvJ,EAAGI,gBAE7ErZ,EAAQ4C,WAAWtC,OAAS,GAAK0hB,EAAoC,CACrE,IAAID,EAAY/hB,EAAQ4C,WAAW5C,EAAQ4C,WAAWtC,OAAS,IAIgH,GAA3K,CAAC7H,EAAUypB,WAAYzpB,EAAUmqB,WAAYnqB,EAAUoqB,YAAapqB,EAAUqqB,2BAA4BrqB,EAAUsqB,2BAA2B5f,QAAQ4e,EAAUpjB,QACjKqB,EAAQ4C,WAAW5C,EAAQ4C,WAAWtC,OAAS,GAAGwC,cAAe,GAIzE9C,EAAQ4C,WAAWL,KAAK,CACpB5D,KAAMlG,EAAUmjB,gBAChBpZ,SAAUyW,EAAGT,gBAr/BrC,gCA+/BckG,EAAclc,GAA6E,IAArDwgB,EAAqD,uDAA5B,QAAShE,EAAmB,uCACjGzgB,KAAKic,UAAUjY,KAAK,CAChBmc,KAAMA,EACNlc,SAAUA,EACVwc,SAAUA,EACViE,MAAOD,MApgCnB,uCAygCQzkB,KAAKkc,eAAelY,KAAK,MAzgCjC,0CA6gCQhE,KAAKmc,kBAAkBnY,KAAK,MA7gCpC,oCAghCkB2gB,GACwB,GAA9B3kB,KAAKkc,eAAena,OACpB/B,KAAKkd,UAAU,mGAAoGyH,EAAU1gB,WAE7HjE,KAAKkc,eAAelc,KAAKkc,eAAena,OAAS,GAAGiC,KAAK2gB,GACzD3kB,KAAKwE,eAAemgB,MArhChC,uCAyhCqBC,GACwB,GAAjC5kB,KAAKmc,kBAAkBpa,OACvB/B,KAAKkd,UAAU,sGAAuG0H,EAAa3gB,WAEnIjE,KAAKmc,kBAAkBnc,KAAKmc,kBAAkBpa,OAAS,GAAGiC,KAAK4gB,GAC/D5kB,KAAKwE,eAAeogB,MA9hChC,sCAkiCoBC,EAA0BC,GACtC,IAAIC,EAAa/kB,KAAKkc,eAAezG,MADiB,uBAEtD,YAAesP,EAAf,+CAA2B,KAAlBC,EAAkB,QACvBF,EAAGrgB,iBAAiBugB,EAAIH,IAH0B,qFAliC9D,yCAyiCuBI,EAA6BH,GAC5C,IAAII,EAAgBllB,KAAKmc,kBAAkB1G,MADiB,uBAE5D,YAAeyP,EAAf,+CAA8B,KAArBF,EAAqB,QAC1BF,EAAGrgB,iBAAiBugB,EAAIC,IAHgC,qFAziCpE,qCAijCQ,OAAOjlB,KAAKkc,eAAena,OAAS,GAAK/B,KAAKkc,eAAelc,KAAKkc,eAAena,OAAS,GAAGA,OAAS,IAjjC9G,kCAojCgBuC,GAAsD,IAAvC6gB,EAAuC,wDAE9D,GAAY,MAAR7gB,EAEJ,OAAQA,EAAKlE,MACT,KAAKlG,EAAU+a,SACX,OAAOjV,KAAKolB,gBAAgB9gB,GAChC,KAAKpK,EAAUmrB,QACX,OAAOrlB,KAAKslB,eAAehhB,GAC/B,KAAKpK,EAAUya,aACX,OAAO3U,KAAK2U,aAAarQ,GAC7B,KAAKpK,EAAU4a,WACX,OAAO9U,KAAK8U,WAAWxQ,GAC3B,KAAKpK,EAAUE,WAEP,IAAImrB,EAAYvlB,KAAKwlB,kBAAkBlhB,GACnCf,EAAIe,EAAKsW,SAcb,OAbS,MAALrX,IACI4hB,GACA5hB,EAAEkiB,aAAc,EACXliB,EAAE4gB,2BACH5gB,EAAE2gB,iBAAmB,OAGJ,MAAjB3gB,EAAEkiB,aAAwBliB,EAAEkiB,cAC5BliB,EAAE4gB,0BAA2B,EAC7BnkB,KAAKkd,UAAU,gBAAkB3Z,EAAEnJ,WAAa,oDAAqDkK,EAAKL,SAAU,UAIzHshB,EAEf,KAAKrrB,EAAUwrB,mBACX,OAAO1lB,KAAK0lB,mBAAmBphB,GACnC,KAAKpK,EAAUyrB,yBACf,KAAKzrB,EAAU0rB,wBACX,OAAO5lB,KAAK6lB,gCAAgCvhB,GAChD,KAAKpK,EAAUsmB,qBACX,OAAOxgB,KAAK8lB,qBAAqBxhB,GACrC,KAAKpK,EAAUW,YACX,OAAOmF,KAAK+lB,gBAAgBzhB,GAAM,GACtC,KAAKpK,EAAUY,aACX,OAAOkF,KAAK+lB,gBAAgBzhB,GAAM,GACtC,KAAKpK,EAAUsnB,cACX,OAAOxhB,KAAKwhB,cAAcld,GAC9B,KAAKpK,EAAU8rB,UACX,OAAOhmB,KAAKgmB,UAAU1hB,GAC1B,KAAKpK,EAAUyB,aACX,OAAOqE,KAAKimB,aAAa3hB,GAC7B,KAAKpK,EAAU0B,UACX,OAAOoE,KAAKkmB,UAAU5hB,GAC1B,KAAKpK,EAAU2B,WACX,OAAOmE,KAAKmmB,WAAW7hB,GAC3B,KAAKpK,EAAUksB,sBACX,OAAOpmB,KAAKqmB,6BAA6B/hB,GAC7C,KAAKpK,EAAU+B,UACX,OAAO+D,KAAKsmB,UAAUhiB,GAC1B,KAAKpK,EAAU4B,cACX,OAAOkE,KAAKumB,cAAcjiB,GAC9B,KAAKpK,EAAUkC,cACX,OAAO4D,KAAKwmB,cAAcliB,GAC9B,KAAKpK,EAAUusB,yBACX,OAAOzmB,KAAKymB,yBAAyBniB,GACzC,KAAKpK,EAAUwsB,oBACX,OAAO1mB,KAAK2mB,oBAAoBriB,GACpC,KAAKpK,EAAU0sB,SACX,OAAO5mB,KAAK6mB,gBAAgBviB,GAChC,KAAKpK,EAAUwC,aACf,KAAKxC,EAAUyC,eACX,OAAOqD,KAAK8mB,aAAaxiB,GAC7B,KAAKpK,EAAUglB,UACX,OAAOlf,KAAK+mB,kBAAkBziB,GAClC,KAAKpK,EAAUmC,aAKX,OAJA2D,KAAKgnB,cAAc,CACf5mB,KAAMlG,EAAUypB,WAChB1f,SAAUK,EAAKL,WAEZ,KACX,KAAK/J,EAAUoC,gBAKX,OAJA0D,KAAKinB,iBAAiB,CAClB7mB,KAAMlG,EAAUypB,WAChB1f,SAAUK,EAAKL,WAEZ,KACX,KAAK/J,EAAU2C,aACX,IAAIuD,EAAOJ,KAAK6e,YAAYva,EAAK4iB,oBAEjC,OADY,MAAR9mB,GAAgBA,EAAKA,gBAAgB,GAAOJ,KAAKmnB,iBAAiB7iB,EAAKL,SAAU7D,EAAKA,MACnFA,EACX,KAAKlG,EAAUomB,UACXtgB,KAAK0d,oBAAmB,EAAOpZ,EAAKL,SAAUK,EAAK2V,YAEnD,IAAIgH,EAAsBjhB,KAAKkjB,6BAA6B5e,EAAKD,YAIjE,OAFArE,KAAKke,iBAEE,CAAE9d,KAAM,KAAM2e,cAAc,EAAOkC,oBAAqBA,MAnpC/E,wCAypCsB3c,GAEd,IAAI8iB,EAAYpnB,KAAK6e,YAAYva,EAAK+iB,YAEtC,GAAiB,MAAbD,GAAuC,MAAlBA,EAAUhnB,KAAnC,CACA,IAAIkiB,EAAiB8E,EAAUhnB,KAE/B,GAAgB,MAAZkiB,GAAuC,MAAnBhe,EAAKgjB,YAAsD,MAAhChjB,EAAKgjB,WAAWtK,aAAsB,CAErF,IAAIuF,EAASje,EAAKgjB,WAAWtK,aAE7B,GAAIsF,EAAS/W,UAAUgX,GAAS,CAE5B,GAAID,aAAoBriB,GAAiBsiB,aAAkBtiB,EACxCqiB,EAASrD,mBAAmBsD,GAC9B7R,gBACT1Q,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUglB,UAChBjb,SAAUK,EAAKL,SACfkb,QAASoD,SAGd,GAAID,aAAoB,GAASC,GAAUnX,GAAqB,CACnE,IAAIyX,EAAiBP,EAASQ,qBAAqB,cAC7B,MAAlBD,GAA0BA,EAAe3B,iBAAmB9V,GAE5DpL,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAU4a,WAChB7Q,SAAUK,EAAKL,SACfvC,OAAQmhB,EACR9N,aAAa,EACbC,iBAAkB,EAClBzQ,cAAc,KAIlBvE,KAAKkd,UAAU,gBAAkBoF,EAASloB,WAAa,yDAA2DmoB,EAAOnoB,WAAa,uBAAwBkK,EAAKL,UACnKjE,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUglB,UAChBjb,SAAUK,EAAKL,SACfkb,QAASoD,KAMrB,MAAO,CACHxD,aAAcqI,EAAUrI,aACxB3e,KAAMmiB,GAKd,IAAKD,aAAoB,GAASA,aAAoB,KAAeC,aAAkB,GAASA,aAAkB,GAc9G,OAPAviB,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUqtB,UAChBtjB,SAAUK,EAAKL,SACfkb,QAASoD,EACThe,cAAc,IAGX,CACHwa,aAAcqI,EAAUrI,aACxB3e,KAAMmiB,GAIVviB,KAAKkd,UAAU,gBAAkBoF,EAASloB,WAAa,yDAA2DmoB,EAAOnoB,WAAa,uBAAwBkK,EAAKL,cAluCnL,mCAyuCiBK,G,MAELlE,EAAOkE,EAAKlE,MAAQlG,EAAUwC,aAAexC,EAAUstB,MAAQttB,EAAUutB,QAI7E,GAFAznB,KAAK/H,OAAO6mB,uBAAuBxa,EAAKL,SAAUK,EAAKia,eAAgBpkB,EAAkBmK,EAAKlE,MAAOkE,EAAKka,sBAEzF,MAAbla,EAAK6b,KAAc,CAEnB,IAAI,EAAOngB,KAAK6e,YAAYva,EAAK6b,MAErB,MAAR,IACKngB,KAAK2hB,uBAAuB,EAAKvhB,KAAMgL,KACxCpL,KAAKkd,UAAU,4GAAsH,QAAZ,EAAG,EAAK9c,YAAI,eAAEhG,YAAa,IAAKkK,EAAKL,WAM1K,IAAIyjB,GAAqB,EAEzB,GAAkB,MAAdpjB,EAAKqjB,MAAe,CAEpB,IAAI,EAAO3nB,KAAK6e,YAAYva,EAAKqjB,OAErB,MAAR,GACI,EAAKvnB,MAAQgL,IAAuB,EAAKhL,MAAQ+N,KAC5CnO,KAAK2hB,uBAAuB,EAAKvhB,KAAMgL,KACxCpL,KAAKkd,UAAU,8HAAgI,EAAK9c,KAAKhG,WAAa,IAAKkK,EAAKL,WAK5LyjB,GAAY,EAahB,OATA1nB,KAAKwE,eAAe,CAChBpE,KAAMA,EACN6D,SAAUK,EAAKL,SACf2jB,MAAqB,MAAbtjB,EAAK6b,KACb5b,cAAc,EACdmjB,UAAWA,IAIR,OAtxCf,sCAyxCoBpjB,GAEZ,GAA2B,MAAvBA,EAAKsZ,eACL,OAAO5d,KAAK2mB,oBAAoBriB,EAAKsZ,gBAKzC,IAAIiK,EAAY,EARc,uBAS9B,YAAevjB,EAAKwjB,aAApB,+CAAkC,KAAzBC,EAAyB,QAC9B,GAAU,MAANA,EAIA,MAHA/nB,KAAK6e,YAAYkJ,GACjBF,KAZsB,kFA0B9B,OAPA7nB,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAU8tB,eAChB/jB,SAAUK,EAAKL,SACfgkB,UAAW3jB,EAAK2jB,UAAUjL,aAC1B6K,UAAWA,IAGR,CACH9I,cAAc,EACd3e,KAAMkE,EAAK2jB,UAAUjL,gBArzCjC,0CA2zCwB1Y,GAEhB,IAAI4jB,EAA2B,CAC3B9nB,KAAMlG,EAAUiuB,WAChBlkB,SAAUK,EAAKL,SACfgkB,UAAW3jB,EAAK2jB,UAAUjL,cAG9Bhd,KAAKwE,eAAe0jB,GARyB,2BAU7C,YAAgB5jB,EAAK0e,MAArB,+CAA4B,KAAnBoF,EAAmB,QAGxB,GAAW,MAAPA,EAIJ,GAAIA,EAAIhoB,MAAQlG,EAAUwsB,oBACtB1mB,KAAK2mB,oBAAoByB,OACtB,CACH,IAAIC,EAAQroB,KAAK6e,YAAYuJ,GAC7B,GAAa,MAATC,EACA,OAEJ,IAAIC,EAAyBhkB,EAAK2jB,UAAUjL,aAAc5a,YACrDpC,KAAK2hB,uBAAuB0G,EAAMjoB,KAAMkoB,EAAYF,EAAInkB,WACzDjE,KAAKkd,UAAU,2BAA6BmL,EAAMjoB,KAAKhG,WAAa,gCAAkCkuB,EAAWluB,WAAa,uBAAwBguB,EAAInkB,YA1BzH,kFAsC7C,OANAjE,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUquB,WAChBtkB,SAAUK,EAAKL,SACfukB,sBAAuBlkB,EAAK0e,MAAMjhB,SAG/B,CACHgd,cAAc,EACd3e,KAAMkE,EAAK2jB,UAAUjL,gBAn2CjC,+CAw2C6B1Y,GAAiF,IAA7CmkB,EAA6C,wDAEhE,MAAlCnkB,EAAKokB,aAAa1L,eAClB1Y,EAAKokB,aAAa1L,aAAerT,IAGrC,IAAIgf,EAAsC,MAAb3oB,KAAK2b,MAAgB3b,KAAK4b,iBAAiB7Z,QAAU,EAE9E6Y,EAAqB,CACrBxgB,WAAYkK,EAAKlK,WACjBygB,SAAU8N,EAAwB,KAAO3oB,KAAK+b,2BAC9C3b,KAAMkE,EAAKokB,aAAa1L,aACxBnd,eAAgB,IAAIC,IACpBoP,YAAa,CAAEjX,OAAQ+H,KAAK/H,OAAQgM,SAAUK,EAAKL,UACnDnD,QAASwD,EAAKxD,SAyClB,GAtCAd,KAAK4oB,kBAAkBtkB,EAAKL,SAAU2W,GAElC+N,GAEA3oB,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAU2uB,wBAChB5kB,SAAUK,EAAKL,SACf6kB,kCAA0D,MAAvBxkB,EAAKsZ,eACxChD,SAAUA,EACVrW,aAAqC,MAAvBD,EAAKsZ,iBAGnB5d,KAAK2b,KAAKf,EAASxgB,aACnB4F,KAAKkd,UAAU,gBAAkB5Y,EAAKlK,WAAa,gFAAiFkK,EAAKL,UAG7IjE,KAAK2b,KAAKf,EAASxgB,YAAcwgB,EAEjC5a,KAAK6b,mBAAmBvB,YAAYlX,IAAIkB,EAAKlK,WAAYwgB,KAIrD5a,KAAK6b,mBAAmBvB,YAAYvhB,IAAIuL,EAAKlK,aAC7C4F,KAAKkd,UAAU,gBAAkB5Y,EAAKlK,WAAa,gFAAiFkK,EAAKL,UAG7IjE,KAAK6b,mBAAmBvB,YAAYlX,IAAIkB,EAAKlK,WAAYwgB,GAEzD5a,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUusB,yBAChBxiB,SAAUK,EAAKL,SACf6kB,kCAA0D,MAAvBxkB,EAAKsZ,eACxChD,SAAUA,EACVrW,aAAqC,MAAvBD,EAAKsZ,kBAKA,MAAvBtZ,EAAKsZ,eAAwB,CAC7B,IAAImL,EAAW/oB,KAAK6e,YAAYva,EAAKsZ,gBAErB,MAAZmL,IAEInO,EAASxa,MAAQyR,GACjB+I,EAASxa,KAAO2oB,EAAS3oB,KACD,MAAjB2oB,EAAS3oB,KAChBJ,KAAKkd,UAAU,oGAAqG5Y,EAAKsZ,eAAe3Z,UAEnIjE,KAAK2hB,uBAAuBoH,EAAS3oB,KAAMwa,EAASxa,OACrDJ,KAAKkd,UAAU,oBAAsB6L,EAAS3oB,KAAKhG,WAAa,8BAAgCwgB,EAASxa,KAAKhG,WAAa,4BAA6BkK,EAAKsZ,eAAe3Z,UAEpLjE,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUiE,WAChB8F,SAAUK,EAAKsZ,eAAe3Z,SAC9BM,cAAc,EACdsd,mBAAmB,UAK3B,GAAIjH,EAASxa,MAAQyR,GACjB7R,KAAKkd,UAAU,sJAAuJ5Y,EAAKokB,aAAazkB,cACrL,CACH,IAAI+kB,EAAsB,UACtBpO,EAASxa,MAAQ+N,KAAkB6a,EAAc,QACjDpO,EAASxa,MAAQ6O,KAAqB+Z,EAAc,UACpDpO,EAASxa,MAAQkP,KAAsB0Z,EAAc,YACrDpO,EAASxa,MAAQ6P,KAAmB+Y,EAAc,UAClDpO,EAASxa,MAAQgL,KAAqB4d,EAAc,SAExDpO,EAASsJ,iBAAmB,CACxB/D,KAAM,gFACNlc,SAAUK,EAAKL,SACfwc,SACA,CACI9X,MAAOqgB,EAAc,YACrBrJ,cAAe,SAACC,GACZ,IAAImD,EAAMze,EAAKL,SACf,MAAO,CACH,CACI4b,SAAUD,EACVE,KAAM,CACFzX,MAAO,CAAE0X,gBAAiBgD,EAAI1Z,KAAM2W,YAAa+C,EAAIzZ,OAASyZ,EAAIhhB,OAAQke,cAAe8C,EAAI1Z,KAAM6W,UAAW6C,EAAIzZ,OAASyZ,EAAIhhB,QAC/Hoe,KAAM6I,OAM1BtE,MAAO,QAGX9J,EAASuJ,0BAA2B,EACpCvJ,EAAS6K,YAAcgD,EAK/B,OAAO,OA39Cf,oCA+9CkBnkB,GAEV,IAAI5C,EAAS1B,KAAK6b,mBAAmBna,OAErC,GAAc,MAAVA,EAEA,OADA1B,KAAKkd,UAAU,kEAAmE5Y,EAAKL,UAChF,KAGX,GAAiB,MAAbK,EAAK2kB,KAAc,CAEnB,GAA8B,MAA1BvnB,EAAOwf,gBAEP,OADAlhB,KAAKkd,UAAU,eAAiBxb,EAAOtH,WAAa,iCAAkCkK,EAAKL,UACpF,KAGX,IAAI7D,EAAOJ,KAAK6e,YAAYva,EAAK2kB,MAErB,MAAR7oB,IACKJ,KAAK2hB,uBAAuBvhB,EAAKA,KAAMsB,EAAOwf,gBAAiB,KAAM5c,IACtEtE,KAAKkd,UAAU,eAAiBxb,EAAOtH,WAAa,uCAAyCsH,EAAOwf,gBAAgB9mB,WAAa,qCAAuCgG,EAAKA,KAAKhG,WAAa,IAAKkK,EAAKL,gBAMnL,MAA1BvC,EAAOwf,iBAA2Bxf,EAAOwf,iBAAmBtP,IAC5D5R,KAAKkd,UAAU,eAAiBxb,EAAOtH,WAAa,wCAA0CsH,EAAOwf,gBAAgB9mB,WAAa,sEAAuEkK,EAAKL,UAYtN,OARAjE,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUkb,OAChBnR,SAAUK,EAAKL,SACfoR,gCAA8C,MAAb/Q,EAAK2kB,KACtC1kB,cAAc,EACd+Q,wBAAwB,IAGrB,CAAElV,KAAM,KAAM2e,cAAc,EAAOkC,qBAAqB,KAtgDvE,oCA0gDkB3c,GAEV,IAAIwgB,EAAK9kB,KAAKgc,eAAe1V,aAE7BtG,KAAK0d,oBAAmB,EAAOpZ,EAAKoO,UAAWpO,EAAKqO,SAEpD,IAAIoK,EAAK/c,KAAK6e,YAAYva,EAAK4kB,WAC/B,GAAU,MAANnM,GAAyB,MAAXA,EAAG3c,KAArB,CAEA,IAAI+oB,EAAgBpM,EAAG3c,KAEnBgpB,EAAWD,GAAiB/d,IAAuB+d,GAAiBlZ,GAEpEoZ,EAASF,aAAyB,GAEhCC,GAHUD,GAAiBhb,IAGFkb,GAC3BrpB,KAAKkd,UAAU,mIAAqIiM,EAAc/uB,WAAYkK,EAAK4kB,UAAUjlB,UAG7LolB,GACArpB,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUglB,UAChBjb,SAAUK,EAAK4kB,UAAUjlB,SACzBkb,QAAShR,KAIjB,IAAIpK,EAAyC,CACzC3D,KAAMlG,EAAU4B,cAChBmI,SAAUK,EAAKL,SACfwB,mBAAoB,KACpB6jB,WAAYF,EAAW,SAAW,SAClC/jB,kBAAmB,GACnBE,eAAgB,IAGpBvF,KAAKwE,eAAeT,GAGpB,IAAIwlB,EAAWzE,EAAG0E,eAAetvB,EAAUypB,WAAYrf,EAAKL,SAAUjE,MAEtE+D,EAAgBQ,cAAe,EAE/BugB,EAAG2E,wBAAwB1lB,GAE3B/D,KAAK0pB,iBAEL,IAAIzI,EAAsB3c,EAAKqlB,UAAU5nB,OAAS,EA/CxB,uBAiD1B,YAAqBuC,EAAKqlB,UAA1B,+CAAqC,KAA5BC,EAA4B,QAIjC,GAFqC,MAArBA,EAASC,SA6ClB,CACH,IAAI,EAAQ/E,EAAGgF,oBAAoB,GACnC9pB,KAAKghB,mBAAmB4I,EAASvlB,YACjCN,EAAgB0B,mBAAqB,MA9CzB,CAEZ,IAAID,EAA4B,KAEhC,GAAI6jB,GAAUO,EAASC,SAASzpB,MAAQlG,EAAUE,WAAY,CAC1D,IACI2vB,EADiBZ,EACPxR,oBAAoBiS,EAASC,SAASzvB,YACxC,MAAR2vB,EACA/pB,KAAKkd,UAAU,mBAAqBiM,EAAc/uB,WAAa,wCAA0CwvB,EAASC,SAASzvB,WAAYwvB,EAAS3lB,SAAU,SAE1JuB,EAAWukB,EAAK/R,YAEjB,CACYhY,KAAK6e,YAAY+K,EAASC,UAAzC,IAEIG,EAAKhqB,KAAK8d,cAEVkM,EAAG5pB,MAAQlG,EAAUya,eACrBnP,EAAWwkB,EAAG7wB,OAGd6wB,EAAG5pB,MAAQlG,EAAUmkB,gBACrB7Y,EAAWwkB,EAAGrM,UAAUsM,WAAWD,EAAG5R,kBAG1CpY,KAAKkiB,sBAGO,MAAZ1c,GACAxF,KAAKkd,UAAU,wCAAyC0M,EAASC,SAAS5lB,UAG9E,IAAI/B,EAAQ4iB,EAAGgF,oBAAoB,GAC/BzlB,EAAarE,KAAKghB,mBAAmB4I,EAASvlB,YAEX,OAAnCA,aAAU,EAAVA,EAAY4c,sBAAgC5c,EAAW4c,sBACvDA,GAAsB,GAG1Bld,EAAgBsB,kBAAkBrB,KAAK,CACnCwB,SAAUA,EACVtD,MAAOA,MA9FO,kFA+G1B,OANA4iB,EAAGgF,oBAAoB,EAAGP,GAE1BvpB,KAAKkqB,gBAAgBX,EAAUzE,GAE/B9kB,KAAKke,eAAe,MAEb,CAAE9d,KAAM,KAAM2e,cAAc,EAAOkC,oBAAqBA,MAznDvE,gCA4nDc3c,GAEN,IAAIwgB,EAAK9kB,KAAKgc,eAAe1V,aAEzB6iB,EAAgBnpB,KAAK6e,YAAYva,EAAK4kB,WAErB,MAAjBC,GAAyBA,EAAc/oB,MAAQkP,KAC/CtP,KAAKyiB,+BAA+Bne,EAAK4kB,WACzClpB,KAAKkd,UAAU,iFAAkF5Y,EAAK4kB,UAAUjlB,WAGpH,IAIIkmB,EAOAC,EAXAC,EAAYvF,EAAG0E,eAAetvB,EAAUoqB,YAAa,KAAMtkB,MAE3DsqB,EAAwBtqB,KAAKghB,mBAAmB1c,EAAKimB,kBAAkBtJ,oBAoB3E,OAjB8B,MAA1B3c,EAAKkmB,oBACLL,EAAUrF,EAAG0E,eAAetvB,EAAUypB,WAAY,KAAM3jB,OAG5D8kB,EAAGgF,oBAAoB,EAAGO,GAItBD,EAD0B,MAA1B9lB,EAAKkmB,mBAA8D,GAAjClmB,EAAKkmB,kBAAkBzoB,QAG/B/B,KAAKghB,mBAAmB1c,EAAKkmB,mBAAmBvJ,oBAG/D,MAAXkJ,GACArF,EAAGgF,oBAAoB,EAAGK,GAGvB,CAAE/pB,KAAM,KAAM2e,cAAc,EAAOkC,oBAAqBqJ,GAAyBF,KA7pDhG,iCAkqDe9lB,GAEP,IAAIwgB,EAAK9kB,KAAKgc,eAAe1V,aAE7BtG,KAAK0d,oBAAmB,EAAOpZ,EAAKoO,UAAWpO,EAAKqO,SAEpD3S,KAAKghB,mBAAmB1c,EAAKmmB,kBAE7B,IAAIC,EAAuB5F,EAAGgF,oBAAoB,GAE9CX,EAAgBnpB,KAAK6e,YAAYva,EAAK4kB,WAErB,MAAjBC,GAAyBA,EAAc/oB,MAAQkP,KAC/CtP,KAAKyiB,+BAA+Bne,EAAK4kB,WACzClpB,KAAKkd,UAAU,6DAA8D5Y,EAAK4kB,UAAUjlB,WAGhG,IAAI0mB,EAAoB7F,EAAG0E,eAAetvB,EAAUoqB,YAAa,KAAMtkB,MAEvEA,KAAK0pB,iBACL1pB,KAAK4qB,oBAEL,IAAIvmB,EAAarE,KAAKghB,mBAAmB1c,EAAKD,YAC1C4c,EAAsB5c,EAAW4c,oBAEjC4J,EAAqB/F,EAAGgF,oBAAoB,GAYhD,OAXA9pB,KAAK8qB,mBAAmBD,EAAoB/F,GAC5C9kB,KAAKghB,mBAAmB1c,EAAKymB,iBAE7BjG,EAAG0E,eAAetvB,EAAUypB,WAAYtf,EAAW4e,YAAajjB,KAAM0qB,GAEtE5F,EAAGgF,oBAAoB,EAAGa,GAE1B3qB,KAAKkqB,gBAAgBS,EAAmB7F,GAExC9kB,KAAKke,iBAEE,CAAE9d,KAAM,KAAM2e,cAAc,EAAOkC,oBAAqBA,KAvsDvE,mDA2sDiC3c,GAEzB,IAAIwgB,EAAK9kB,KAAKgc,eAAe1V,aAE7BtG,KAAK0d,oBAAmB,EAAOpZ,EAAKoO,UAAWpO,EAAKqO,SAGpD,IAAIqY,EAAwBhrB,KAAK+b,2BAG7BgB,EAAK/c,KAAK6e,YAAYva,EAAK2mB,YAC/B,GAAU,MAANlO,EAAJ,CACA,IASImO,EATAC,EAAiBpO,EAAG3c,KAExBJ,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUkxB,wBAChBnnB,SAAUK,EAAK2mB,WAAWhnB,SAC1BonB,mBAAoBL,EACpBzmB,cAAc,IAKlB,IAAIwD,EAAmE,KAEvE,GAAIojB,aAA0B,EAC1BD,EAAwBC,EAAe/oB,YACvC2F,EAAO,aACJ,GAAIojB,aAA0B,GAA+D,MAAtDA,EAAeG,wBAAwB,YAE7EvjB,EADAojB,EAAelzB,OAAO4O,eACf,eAEA,sBAEaskB,EAAeG,wBAAwB,YAC/DJ,EAAwBC,EAAezlB,cAAc,GAAGtF,SACrD,MAAI+qB,aAA0B,GAAsC,SAA7BA,EAAe/wB,YAMzD,OADA4F,KAAKkd,UAAU,uKAAwK5Y,EAAK2mB,WAAWhnB,UAChM,KALP8D,EAAO,QACPmjB,EAAwBlrB,KAAKyb,YAAYpJ,QAAQ,SAASjS,KAO9D,IAAIsoB,EAAepkB,EAAKokB,aAAa1L,aACrC,GAAoB,MAAhB0L,EAAsB,OAAO,KAEjC,IAAI6C,EAAkB7C,GAAgB7W,GACtC,GAAI0Z,EACA7C,EAAewC,EACf5mB,EAAKokB,aAAa1L,aAAekO,OAEjC,IAAKA,EAAsB3f,UAAUmd,GAEjC,OADA1oB,KAAKkd,UAAU,kBAAoBgO,EAAsB9wB,WAAa,yCAA2CsuB,EAAatuB,WAAa,2BAA6BkK,EAAKknB,mBAAqB,uBAAwBlnB,EAAKL,UACxN,KAIfjE,KAAKymB,yBAAyB,CAC1BrmB,KAAMlG,EAAUusB,yBAChBrsB,WAAYkK,EAAKknB,mBACjB5N,eAAgB,KAChB9c,SAAS,EACTmD,SAAUK,EAAKmnB,iBACf/C,aAAcpkB,EAAKokB,eACpB,GAEH,IAAIgD,EAAmB1rB,KAAK+b,yBAA2B,EACnD4P,EAAsC3rB,KAAK+b,2BAEnC,SAARhU,GAA2B,gBAARA,GAAkC,SAARA,EAC7C/H,KAAKwE,eAAe,CAAC,CACjBpE,KAAMlG,EAAU0xB,oBAChB3nB,SAAUK,EAAKL,SACfM,cAAc,EACdsnB,qBAAsBb,EACtBc,kBAAmBJ,EACnBK,cAAerD,EACfsD,kBAAmBL,KACnB,GAGJ3rB,KAAKwE,eAAe,CAChB,CACIpE,KAAMlG,EAAU+xB,yBAChBhoB,SAAUK,EAAKL,SACfonB,mBAAoBM,EACpBpnB,cAAc,GAElB,CACInE,KAAMlG,EAAU+xB,yBAChBhoB,SAAUK,EAAKL,SACfonB,mBAAoBL,EACpBzmB,cAAc,GAElB,CACInE,KAAMlG,EAAU4a,WAChB7Q,SAAUK,EAAKL,SACfM,cAAc,EACdwQ,aAAa,EACbrT,OAAQypB,EAAepgB,UAAU,WAAY,IAAItI,EAAc,KAC/DuS,iBAAkB,GAEtB,CACI5U,KAAMlG,EAAUiE,WAChB8F,SAAUK,EAAKL,SACfM,cAAc,EACdsd,mBAAmB,KACnB,GAGZ,IACI8I,EACAuB,EAFAxB,EAAuB5F,EAAGgF,oBAAoB,GAIlD,GAAY,SAAR/hB,GAA2B,gBAARA,GAAkC,SAARA,EAAiB,CAC9D,IAAIokB,EAAqD,CACrD/rB,KAAMlG,EAAUkyB,yCAChBrkB,KAAMA,EACN9D,SAAUK,EAAKmnB,iBACflnB,cAAc,EACdsnB,qBAAsBb,EACtBc,kBAAmBJ,EACnBM,kBAAmBL,EACnBxmB,YAAa,GAEjB+mB,EAA6BC,EAC7BxB,EAAoB7F,EAAGrgB,iBAAiB0nB,GAExCnsB,KAAKwE,eACD2nB,QAKJnsB,KAAKwE,eAAe,CAChB,CACIpE,KAAMlG,EAAU+xB,yBAChBhoB,SAAUK,EAAKmnB,iBACfJ,mBAAoBL,EACpBzmB,cAAc,GAElB,CACInE,KAAMlG,EAAU4a,WAChB7Q,SAAUK,EAAKL,SACfM,cAAc,EACdwQ,aAAa,EACbrT,OAAQypB,EAAepgB,UAAU,UAAW,IAAItI,EAAc,KAC9DuS,iBAAkB,KAG1B2V,EAAoB7F,EAAG0E,eAAetvB,EAAUoqB,YAAa,KAAMtkB,MAEnEA,KAAKwE,eAAe,CAChB,CACIpE,KAAMlG,EAAU+xB,yBAChBhoB,SAAUK,EAAKL,SACfonB,mBAAoBK,EACpBnnB,cAAc,GAElB,CACInE,KAAMlG,EAAU+xB,yBAChBhoB,SAAUK,EAAKL,SACfonB,mBAAoBL,EACpBzmB,cAAc,GAElB,CACInE,KAAMlG,EAAU4a,WAChB7Q,SAAUK,EAAKL,SACfM,cAAc,EACdwQ,aAAa,EACbrT,OAAQypB,EAAepgB,UAAU,OAAQ,IAAItI,EAAc,KAC3DuS,iBAAkB,GAEtB,CACI5U,KAAMlG,EAAUiE,WAChB8F,SAAUK,EAAKL,SACfM,cAAc,EACdsd,mBAAmB,KAI/B,IAAK0J,EAAiB,CAClB,IAAIc,EAAoBrsB,KAAKgc,eAAe3X,WAAWtC,OACvD/B,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAU+xB,yBAChBhoB,SAAUK,EAAKL,SACfonB,mBAAoBK,EACpBnnB,cAAc,IAElBvE,KAAK2hB,uBAAuBuJ,EAAuBxC,GAC/C1oB,KAAKgc,eAAe3X,WAAWtC,OAASsqB,EAAoB,EAE5DrsB,KAAKgc,eAAe3X,WAAWoR,OAE/BzV,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUkxB,wBAChBC,mBAAoBK,EACpBznB,SAAUK,EAAKL,SACfM,cAAc,IAElB2nB,EAA2B3nB,cAAe,GAIlDvE,KAAK0pB,iBACL1pB,KAAK4qB,oBAEL,IAAIvmB,EAAarE,KAAKghB,mBAAmB1c,EAAKD,YAC1C4c,EAAsB5c,EAAW4c,oBAEjC4J,EAAqB/F,EAAGgF,oBAAoB,GAWhD,OAVA9pB,KAAK8qB,mBAAmBD,EAAoB/F,GAE5CA,EAAG0E,eAAetvB,EAAUypB,WAAYtf,EAAW4e,YAAajjB,KAAM0qB,GAEtE5F,EAAGgF,oBAAoB,EAAGa,GAE1B3qB,KAAKkqB,gBAAgBS,EAAmB7F,GAExC9kB,KAAKke,iBAEE,CAAE9d,KAAM,KAAM2e,cAAc,EAAOkC,oBAAqBA,MA16DvE,mCA86DiB3c,GAET,IAAIwgB,EAAK9kB,KAAKgc,eAAe1V,aAE7BtG,KAAK0d,oBAAmB,EAAOpZ,EAAKoO,UAAWpO,EAAKqO,SAEpD,IAAI2Z,EAAsBxH,EAAGgF,oBAAoB,GAE7CX,EAAgBnpB,KAAK6e,YAAYva,EAAK4kB,WAErB,MAAjBC,GAAyBA,EAAc/oB,MAAQkP,KAC/CtP,KAAKyiB,+BAA+Bne,EAAK4kB,WACzClpB,KAAKkd,UAAU,oFAAqF5Y,EAAK4kB,UAAUjlB,WAGvH,IAAIA,EAAWK,EAAKL,SAEE,MAAlBK,EAAK4kB,YACLjlB,EAAWK,EAAK4kB,UAAUjlB,UAG9B,IAAIsoB,EAA2BzH,EAAG0E,eAAetvB,EAAUoqB,YAAargB,EAAUjE,MAElFA,KAAK0pB,iBACL1pB,KAAK4qB,oBAEL,IAAIvmB,EAAarE,KAAKghB,mBAAmB1c,EAAKD,YAC1C4c,EAAsB5c,EAAW4c,oBAWrC,OATAjhB,KAAK8qB,mBAAmBwB,EAAqBxH,GAC7CA,EAAG0E,eAAetvB,EAAUypB,WAAYtf,EAAW4e,YAAajjB,KAAMssB,GAEtExH,EAAGgF,oBAAoB,EAAGyC,GAE1BvsB,KAAKkqB,gBAAgBqC,EAA0BzH,GAE/C9kB,KAAKke,iBAEE,CAAE9d,KAAM,KAAM2e,cAAc,EAAOkC,oBAAqBA,KAp9DvE,gCAw9Dc3c,GAEN,IAAIwgB,EAAK9kB,KAAKgc,eAAe1V,aAE7BtG,KAAK0d,oBAAmB,EAAOpZ,EAAKoO,UAAWpO,EAAKqO,SAEpD,IAAI6Z,EAAuB1H,EAAGgF,oBAAoB,GAElD9pB,KAAK0pB,iBACL1pB,KAAK4qB,oBAEL,IAAIvmB,EAAarE,KAAKghB,mBAAmB1c,EAAKD,YAC1C4c,EAAsB5c,EAAW4c,oBAEjC4J,EAAqB/F,EAAGgF,oBAAoB,GAChD9pB,KAAK8qB,mBAAmBD,EAAoB/F,GAE5C,IAAIqE,EAAgBnpB,KAAK6e,YAAYva,EAAK4kB,WAErB,MAAjBC,GAAyBA,EAAc/oB,MAAQkP,KAC/CtP,KAAKyiB,+BAA+Bne,EAAK4kB,WACzClpB,KAAKkd,UAAU,oFAAqF5Y,EAAK4kB,UAAUjlB,WAGvH6gB,EAAG0E,eAAetvB,EAAUmqB,WAAYhgB,EAAW4e,YAAajjB,KAAMwsB,GAEtE,IAAIjD,EAAWzE,EAAGgF,oBAAoB,GAMtC,OAJA9pB,KAAKkqB,gBAAgBX,EAAUzE,GAE/B9kB,KAAKke,iBAEE,CAAE9d,KAAM,KAAM2e,cAAc,EAAOkC,oBAAqBA,KAx/DvE,gCA4/Dc3c,G,MAEN,GAAsB,MAAlBA,EAAKmoB,WAAoD,MAA/BnoB,EAAKmoB,UAAUzP,aAAsB,OAAO,KAE1E,IAAIA,EAA6B1Y,EAAKmoB,UAAUzP,aAChD,KAAMA,aAAwB,GAE1B,OADAhd,KAAKkd,UAAU5Y,EAAKmoB,UAAUryB,WAAa,4EAA6EkK,EAAKL,UACtH,KAGX,GAAI+Y,EAAa7b,WAEb,OADAnB,KAAKkd,UAAL,UAAkB5Y,EAAKmoB,UAAUryB,WAAjC,0GAA6IkK,EAAKmoB,UAAUryB,WAA5J,+FAAqQkK,EAAKL,UACnQ,KAKP+Y,EAAa/kB,QAAU+H,KAAK/H,QAAU+kB,EAAanc,YAAc2C,EAAW2C,QAC5EnG,KAAKkd,UAAU,cAAgBF,EAAa5iB,WAAa,4BAA6BkK,EAAKL,UAG/F,IAAIyoB,EAAmC,CACnCtsB,KAAMlG,EAAU8rB,UAChB/hB,SAAUK,EAAKL,SACfhB,MAAO+Z,EACP2P,2BAA2B,EAC3BpoB,cAAc,GAGlBvE,KAAKwE,eAAekoB,GACpB1sB,KAAKmnB,iBAAiB7iB,EAAKka,qBAAsBxB,GAEjD,IAAI3S,EAAyB,GACzBuiB,EAAqC,GACrCC,EAAgB7sB,KAAKgc,eAAe3X,WAExC,IAA4B,QAAxB,EAAAC,EAAKwoB,2BAAmB,eAAE/qB,QAAS,EAAG,4BACtC,YAAcuC,EAAKwoB,oBAAnB,+CAAwC,KAA/B9yB,EAA+B,QAChC+yB,EAAiBF,EAAc9qB,OAC/B6c,EAAW5e,KAAK6e,YAAY7kB,GAChC4yB,EAAoB5oB,KAAK6oB,EAAcrZ,OAAOuZ,EAAgBF,EAAc9qB,OAASgrB,IACrE,MAAZnO,EACAvU,EAAerG,KAAK4N,IAEpBvH,EAAerG,KAAK4a,EAASxe,OARC,mFAa1C,IAAI0J,EAAiBgE,EAAkBkP,EAAchd,KAAK6b,mBAAmBtB,cAKzEvU,EAAUgX,EAAaxS,eAAeH,EAAgBP,GAK1D,GAHA9J,KAAK/H,OAAO6mB,uBAAuBxa,EAAKL,SAAUK,EAAKia,eAAgBvB,EAAazU,WAAW/E,EAAW2C,OAAQ6W,EAAa5iB,YAAakK,EAAKka,sBAG7InU,EAAetI,OAAS,GAAKib,EAAa5S,iBAAkB,CAE5D,GAAqB,MAAjBpE,EAAQ8E,MAER,OADA9K,KAAKkd,UAAUlX,EAAQ8E,MAAOxG,EAAKL,UAC5B,CAAE7D,KAAM4c,EAAc+B,cAAc,GAG/C,IAAIrd,EAASsE,EAAQ2E,WAAW,GAChC3K,KAAK4oB,kBAAkBtkB,EAAKL,SAAUvC,GAEtC,IAAIsrB,EAAqB,KACrBzS,EAAeva,KAAK6b,mBAAmBtB,aACvB,MAAhBA,GAAwBA,aAAwB,IAChDyS,EAAqBzS,EAAanU,aAGlC1E,EAAOb,YAAc2C,EAAW0I,SAAW8Q,GAAgBzC,GAAgByC,GAAgBgQ,GAC3FhtB,KAAKkd,UAAU,oEAAqE5Y,EAAKL,UAK7F,IADA,IAAIuK,EAAiB,KACZtW,EAAI,EAAGA,EAAImS,EAAetI,OAAQ7J,IAAK,CACxCA,EAAIwJ,EAAO2L,sBACXmB,EAAW9M,EAAO8L,iBAAiBtV,GAC/BA,GAAKwJ,EAAO2L,oBAAsB,GAAK3L,EAAO0L,gBAC9CoB,EAAuBA,EAAUpM,cAGzC,IAAI4c,EAAU3U,EAAenS,GAPe,uBAQ5C,YAAe00B,EAAoB10B,GAAnC,+CAAuC,KAA9BwiB,EAA8B,QACnC1a,KAAKgc,eAAe3X,WAAWL,KAAK0W,IATI,kFAWvC1a,KAAK2hB,uBAAuB3C,EAASxQ,EAAUlK,EAAKwoB,oBAAoB50B,GAAG+L,SAAUK,EAAKwoB,oBAAoB50B,KAC/G8H,KAAKkd,UAAU,yBAA2B8B,EAAQ5kB,WAAa,uCAAyCoU,EAASpU,WAAa,sBAAuBkK,EAAKwoB,oBAAoB50B,GAAG+L,UAKzL,IAAIgpB,EAAkB,EACtB,GAAIvrB,EAAO0L,cAAe,CACtB,IAAI8f,EAAyB7iB,EAAetI,OAASL,EAAO2L,oBAAsB,EAClF4f,IAAqBC,EAAyB,GAC9CltB,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUizB,kBAChBlpB,SAAUK,EAAKwoB,oBAAoBprB,EAAO2L,oBAAsB,GAAGpJ,SACnEmpB,eAAgBF,EAChB3oB,cAAc,EACd0jB,UAAWvmB,EAAOiM,aAAajM,EAAO2L,oBAAsB,GAAGjN,OAKvEJ,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAU4a,WAChBpT,OAAQA,EACRuC,SAAUK,EAAKL,SACf8Q,aAAa,EACbxQ,aAA4D,MAA9CyY,EAAaqQ,8BAC3BrY,kBAAmB3K,EAAetI,OAAS,EAAIkrB,KAChD,GAEHP,EAAaC,2BAA4B,EACzCD,EAAanoB,cAAe,EAYhC,OARkD,MAA9CyY,EAAaqQ,+BACbrtB,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUozB,gCAChBrpB,SAAUK,EAAKL,SACfM,cAAc,IACf,GAGA,CAAEnE,KAAM4c,EAAc+B,cAAc,KAloEnD,oCAsoEkBza,GAEV,GAAmB,MAAfA,EAAK1K,QAAqC,MAAnB0K,EAAKlK,WAAoB,OAAO,KAE3D,IAAImzB,EAAKvtB,KAAK6e,YAAYva,EAAK1K,QAC/B,GAAU,MAAN2zB,EAEA,OADAvtB,KAAKkd,UAAU,qCAAsC5Y,EAAKL,UACnD,KAGX,KAAMspB,EAAGntB,gBAAgB,GAASmtB,EAAGntB,gBAAgB,GAAemtB,EAAGntB,gBAAgB,GAMnF,OALe,MAAXmtB,EAAGntB,KACHJ,KAAKkd,UAAU,kDAAoD5Y,EAAKlK,WAAa,IAAKkK,EAAKL,UAE/FjE,KAAKkd,UAAU,mDAAqDqQ,EAAGntB,KAAKhG,WAAa,8BAAgCkK,EAAKlK,WAAa,IAAKkK,EAAKL,UAElJ,KAGX,IAAI8J,EAA8Cwf,EAAGntB,KAErD,GAAI2N,aAAsB,EAAO,CAE7B,IAoBQjG,EApBJL,EAAiBqG,EAAkBC,EAAY/N,KAAK6b,mBAAmBtB,cAEvEiT,EAAqBzf,EAAW5C,aAAa7G,EAAKlK,WAAYqN,GAE9DgmB,EAA2B,KAK/B,OAJoC,MAAhCD,EAAmB1lB,YACnB2lB,EAA2B1f,EAAW3H,YAAY+E,aAAa7G,EAAKlK,WAAYqN,IAGhD,MAAhC+lB,EAAmB1lB,WAA2D,MAAtC2lB,EAAyB3lB,WAC7D0lB,EAAmBxiB,oBAAsByiB,EAAyBziB,kBAClEhL,KAAKkd,UAAUsQ,EAAmB1iB,MAAOxG,EAAKL,UAE9CjE,KAAKkd,UAAUuQ,EAAyB3iB,MAAOxG,EAAKL,UAEjD,CACH7D,KAAM2N,EACNgR,cAAc,KAIkB,MAAhCyO,EAAmB1lB,WACnB9H,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUsnB,cAChBvd,SAAUK,EAAKL,SACfsd,oBAAqBjd,EAAKlK,WAC1BqnB,eAAe,IAEnB3Z,EAAY0lB,EAAmB1lB,YAE/B9H,KAAKwE,eAAe,CAAC,CACjBpE,KAAMlG,EAAU+nB,qBAChBhe,SAAUK,EAAKL,SACfof,SAAU,GACX,CACCjjB,KAAMlG,EAAUonB,oBAChBrd,SAAUK,EAAKL,SACfnB,MAAeiL,EAAY3H,YAC3Bmb,oBAAqBjd,EAAKlK,cAE9B0N,EAAY2lB,EAAyB3lB,WAGzC9H,KAAK4oB,kBAAkBtkB,EAAKL,SAAU6D,GAE/B,CACH1H,KAAM0H,EAAU1H,KAChB2e,cAAejX,EAAUhH,UAI9B,GAAIiN,aAAsB,EAAa,CAE1C,GAAIA,EAAW5G,iBAAiB,GAgB5B,OAfAnH,KAAKkiB,sBAIW,MAFDnU,EAAW5G,MAAMuQ,aAAaN,MAAK,SAAAa,GAAE,OAAIA,EAAG7d,YAAckK,EAAKlK,eAG1E4F,KAAKkd,UAAU,mBAAqBnP,EAAW3T,WAAa,4CAA8CkK,EAAKlK,WAAYkK,EAAKL,UAGpIjE,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUmkB,cAChBpa,SAAUK,EAAKL,SACf0Z,UAAW5P,EAAW5G,MACtBiR,gBAAiB9T,EAAKlK,aAGnB,CACHgG,KAAM2N,EAAW5G,MACjB4X,cAAc,GAIlB,IAAIjV,EAAiBgE,EAAkBC,EAAY/N,KAAK6b,mBAAmBtB,cACvE,EAA2BxM,EAAW5C,aAAa7G,EAAKlK,WAAY0P,GACxE,OAA0C,MAAtC,EAAyBhC,WAUrB9H,KAAKkiB,sBACLliB,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUonB,oBAChBrd,SAAUK,EAAKL,SACfsd,oBAAqBjd,EAAKlK,WAC1B0I,MAAOiL,IAEX/N,KAAK4oB,kBAAkBtkB,EAAKL,SAAU,EAAyB6D,WAG5D,CACH1H,KAAM,EAAyB0H,UAAU1H,KACzC2e,cAAe,EAAyBjX,UAAUhH,WAGtDd,KAAKkd,UAAU,EAAyBpS,MAAOxG,EAAKL,UAC7C,CACH7D,KAAM2N,EACNgR,cAAc,IAO1B,GAAuB,UAAnBza,EAAKlK,WAEL,OADA4F,KAAKkd,UAAU,yBAA2BqQ,EAAGntB,KAAKhG,WAAa,sBAAwBkK,EAAKlK,WAAYkK,EAAKL,UACtG,KAGXjE,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUwzB,gBAChBzpB,SAAUK,EAAKL,WAGnB,IAAI0pB,EAAqB,IAAIjtB,EAAU,SAAUyN,GAAkB,MAAM,EAAM3K,EAAW2C,QAAQ,EAAM,oBAIxG,OAFAnG,KAAK/H,OAAO21B,sBAAsBtpB,EAAKL,SAAU0pB,GAE1C,CACHvtB,KAAM+N,GACN4Q,cAAc,KA7xE9B,sCAqyEoBza,EAA4BupB,GAExC,IAAItT,EAAeva,KAAK6b,mBAAmBtB,aAEvCsT,GAA2B,MAAhBtT,IACXA,EAAeA,EAAapX,WAGhC,IAAI2qB,EAAgB9tB,KAAK6b,mBAAmBna,OAE5C,OAAoB,MAAhB6Y,GAAyC,MAAjBuT,GACxB9tB,KAAKkd,UAAU,eAAiB2Q,EAAU,QAAU,QAAU,sDAAuDvpB,EAAKL,UACnH,OAEPjE,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAU+xB,yBAChBhoB,SAAUK,EAAKL,SACfonB,mBAAoB,IAGxBrrB,KAAKmnB,iBAAiB7iB,EAAKL,SAAUsW,GAC9B,CAAEna,KAAMma,EAAcwE,cAAc,EAAO8O,QAASA,MA1zEvE,2CA+zEyBvpB,GAEjB,IAAIiW,EAAeva,KAAK6b,mBAAmBtB,aAEZ,OAA3BA,aAAY,EAAZA,EAAcpX,YAA0D,UAArCoX,EAAapX,UAAU/I,YAC1D4F,KAAKkd,UAAU,6GAA8G5Y,EAAKL,UAGtI,IAAI6pB,EAAgB9tB,KAAK6b,mBAAmBna,OAE5C,GAAoB,MAAhB6Y,GAAyC,MAAjBuT,IAA0BA,EAAc1sB,cAEhE,OADApB,KAAKkd,UAAU,4FAA6F5Y,EAAKL,UAC1G,KAGX,IAAI8pB,EAA+BxT,EAAapX,UAChD,GAAI4qB,aAA0B,EAE1B,OADA/tB,KAAKkd,UAAU,iDAAkD5Y,EAAKL,UAC/D,CAAE7D,KAAM,KAAM2e,cAAc,GAEjB,MAAlBgP,IAAwBA,EAAwB/tB,KAAKyb,YAAYpJ,QAAQ,UAAUjS,MAGvFJ,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAU+xB,yBAChBhoB,SAAUK,EAAKL,SACfonB,mBAAoB,IAGxB,IAAIhhB,EAAyB,GAE7B,GAAqB,MAAjB/F,EAAK0pB,SAAkB,CACvB,IAAIC,GAA2B,EADR,uBAEvB,YAAc3pB,EAAK0pB,SAAnB,+CAA6B,KAApBh0B,EAAoB,QACrBijB,EAAKjd,KAAK6e,YAAY7kB,GAChB,MAANijB,EACA5S,EAAerG,KAAKiZ,EAAG7c,MAEvB6tB,GAAkB,GAPH,kFAUvB,GAAIA,EACA,MAAO,CAAE7tB,KAAMgL,GAAqB2T,cAAc,GAI1D,IAAI/Y,EAAU+nB,EAAevjB,eAAeH,EAAgB7G,EAAWyG,WAKvE,GAHAjK,KAAK/H,OAAO6mB,uBAAuBxa,EAAKL,SAAUK,EAAKia,eAAgBwP,EAAexlB,WAAW/E,EAAWyG,UAAW8jB,EAAe3zB,YAClIkK,EAAKka,sBAEY,MAAjBxY,EAAQ8E,MAER,OADA9K,KAAKkd,UAAUlX,EAAQ8E,MAAOxG,EAAKL,UAC5B,CAAE7D,KAAMgL,GAAqB2T,cAAc,GAGtD,IAAIrd,EAASsE,EAAQ2E,WAAW,GAchC,OAZA3K,KAAK4oB,kBAAkBtkB,EAAKL,SAAUvC,GAEtC1B,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAU4a,WAChBpT,OAAQA,EACRqT,aAAa,EACb9Q,SAAUK,EAAKL,SACf+Q,kBAAmB3K,EAAetI,OAAS,KAKxC,CAAE3B,KAAM,KAAM2e,cAAc,KAr4E3C,sDAy4EoCza,GAC5B,IAAIlE,EAAOJ,KAAK6e,YAAYva,EAAK4pB,SAEjC,GAAY,MAAR9tB,EAEJ,OAAKA,EAAK2e,aAKL3e,EAAKA,KAAKmL,UAAUyD,KAKzBhP,KAAKwE,eAAe,CAChBpE,KAAMkE,EAAKlE,KACX6D,SAAUK,EAAKL,SACfkqB,qBAAsB7pB,EAAK4Q,UAAYhb,EAAUyD,aAAgB,EAAI,IAIlEyC,IAXHJ,KAAKkd,UAAU,mGAAqG9c,EAAKA,KAAKhG,WAAYkK,EAAKL,UACxI7D,IANPJ,KAAKkd,UAAU,kIAAmI5Y,EAAKL,UAChJ7D,KAh5EnB,yCAm6EuBkE,GAEf,IAAI2jB,EAAYjoB,KAAK6e,YAAYva,EAAK1K,QAClCw0B,EAAYpuB,KAAK6e,YAAYva,EAAKrC,OAEtC,GAAiB,MAAbgmB,GAAkC,MAAbmG,EAEzB,OAAMnG,EAAU7nB,gBAAgB,GAKhCJ,KAAK/H,OAAO21B,sBAAsB,CAC9BvkB,KAAM/E,EAAKL,SAASoF,KACpBC,OAAQhF,EAAKL,SAASqF,OAAShF,EAAKL,SAASlC,OAC7CA,OAAQ,GACTkmB,EAAU7nB,KAAKgC,aAEbpC,KAAK2hB,uBAAuByM,EAAUhuB,KAAM+N,KAMjDnO,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUwrB,mBAChBzhB,SAAUK,EAAKL,WAGZ,CAAE7D,KAAkB6nB,EAAU7nB,KAAMgC,YAAa2c,aAAckJ,EAAUlJ,gBAV5E/e,KAAKkd,UAAU,+FAAiGkR,EAAUhuB,KAAKhG,WAAa,IAAKkK,EAAKrC,MAAMgC,UACrJ,CAAE7D,KAAkB6nB,EAAU7nB,KAAMgC,YAAa2c,aAAckJ,EAAUlJ,iBAZhF/e,KAAKkd,UAAU,sEAAuE5Y,EAAK1K,OAAOqK,UAC3F,QA56EnB,uCAo8EqBA,EAAwB7D,GACrB,MAAZ6D,IACAA,EAASlC,OAAS,IAClBkC,EAAW,CACPoF,KAAMpF,EAASoF,KACfC,OAAQrF,EAASqF,OAASrF,EAASlC,OACnCA,OAAQ,IAGhB/B,KAAK/H,OAAO21B,sBAAsB3pB,EAAU7D,MA78EpD,wCAk9EsB6D,EAAwB0pB,GAItC,GAFA3tB,KAAK/H,OAAO21B,sBAAsB3pB,EAAU0pB,KAExCA,aAAmB1tB,GAAvB,CAIA,IAAIouB,EAA+BV,EAAQ9tB,eAAe9G,IAAIiH,KAAK/H,QAC/C,MAAhBo2B,IACAA,EAAe,GACfV,EAAQ9tB,eAAeuD,IAAIpD,KAAK/H,OAAQo2B,IAG5CA,EAAarqB,KAAKC,MAh+E1B,wCAo+EsBK,GAEd,GAAuB,MAAnBA,EAAKlK,WAAoB,OAAO,KAEpC,IAAIwgB,EAAW5a,KAAKsuB,kBAAkBhqB,EAAKlK,YAC3C,GAAgB,MAAZwgB,EAUA,OATA5a,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAU+xB,yBAChBhoB,SAAUK,EAAKL,SACfonB,mBAAoBzQ,EAASC,WAGjC7a,KAAK4oB,kBAAkBtkB,EAAKL,SAAU2W,GACtCtW,EAAKsW,SAAWA,EAET,CAAExa,KAAMwa,EAASxa,KAAM2e,cAAenE,EAAS9Z,SAG1D,GAAiB,MAAbd,KAAK2b,KAAc,CACnB,IAAI,EAAW3b,KAAK2b,KAAKrX,EAAKlK,YAC9B,GAAgB,MAAZ,EAWA,OAVA4F,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUq0B,oBAChBtqB,SAAUK,EAAKL,SACf7J,WAAYkK,EAAKlK,aAGrB4F,KAAK4oB,kBAAkBtkB,EAAKL,SAAU,GACtCK,EAAKsW,SAAW,EAGT,CAAExa,KAAM,EAASA,KAAM2e,cAAe,EAASje,SAK9D,IAAIgH,EAAY9H,KAAKwuB,cAAclqB,EAAKlK,WAAYkK,EAAKL,UACzD,GAAiB,MAAb6D,EAAmB,CAEnB,GAAIA,EAAUlH,SAAU,CACpB,IAAI6tB,EAAKzuB,KAAK6b,mBAAmBtB,aAC7BmU,EAAOD,aAAc,EAAeA,EAAKA,EAAGroB,YAChDpG,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUonB,oBAChBrd,SAAUK,EAAKL,SACfnB,MAAO4rB,EACPnN,oBAAqBzZ,EAAU1N,kBAGnC4F,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUsnB,cAChBvd,SAAUK,EAAKL,SACfsd,oBAAqBzZ,EAAU1N,WAC/BqnB,eAAe,IAOvB,OAFAzhB,KAAK4oB,kBAAkBtkB,EAAKL,SAAU6D,GAE/B,CAAE1H,KAAM0H,EAAU1H,KAAM2e,cAAejX,EAAUhH,SAG5D,IAAI6tB,EAAc3uB,KAAKyb,YAAYpJ,QAAQ/N,EAAKlK,YAChD,GAAmB,MAAfu0B,EAAqB,CACrB,IAAI7rB,EAAQ6rB,EAAYvuB,KACxB,OAAM0C,aAAiB,GAASA,aAAiB,GAG7C9C,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAU00B,sBAChB3qB,SAAUK,EAAKL,SACfnB,MAAOA,IAGX9C,KAAK4oB,kBAAkBtkB,EAAKL,SAAUnB,GAE/B,CACH1C,KAAM0C,aAAiB,EAAQA,EAAMsD,YAActD,EACnDic,cAAc,KAZlB/e,KAAKkd,UAAU,WAAapa,EAAM1I,WAAa,4CAA6CkK,EAAKL,UAgB9F,CACH7D,KAAM0C,EACNic,cAAc,IAItB/e,KAAKkd,UAAU,kBAAoB5Y,EAAKlK,WAAa,2BAA4BkK,EAAKL,YA7jF9F,wCAikFsB7J,GAGd,IAFA,IAAIsgB,EAAK1a,KAAK6b,mBAED,MAANnB,GAAY,CAEf,IAAIE,EAAWF,EAAGJ,YAAYvhB,IAAIqB,GAElC,GAAgB,MAAZwgB,GAAyC,MAArBA,EAASC,SAC7B,OAAOD,EAGXF,EAAKA,EAAGF,OAGZ,OAAO,OA/kFf,oCAmlFkBpgB,EAAoB6J,GAC9B,IAAIsW,EAAeva,KAAK6b,mBAAmBtB,aAC3C,GAAoB,MAAhBA,EACA,OAAO,KAGX,IAAIzS,EAAYyS,EAAapP,aAAa/Q,EAAYoJ,EAAW0I,SACjE,GAA2B,MAAvBpE,EAAUA,UAAmB,OAAOA,EAAUA,UAElD,GAAIyS,aAAwB,EAAO,CAC/B,IAAIsU,EAAkBtU,EAAanU,YAAY+E,aAAa/Q,EAAYoJ,EAAW0I,SACnF,GAAiC,MAA7B2iB,EAAgB/mB,UAAmB,OAAO+mB,EAAgB/mB,UAKlE,OAAO,OAnmFf,iCAsmFexD,GAEP,IAAIwqB,EAAwB,KAE5B,GAAmB,MAAfxqB,EAAK1K,OAAgB,CAIrB,IAAIm1B,EAAY/uB,KAAK6b,mBAAmBtB,aACxC,GAAiB,MAAbwU,EAgBA,OAFA/uB,KAAKkd,UAAU,6BAA+B5Y,EAAKlK,WAC/C,uEAAwEkK,EAAKL,UAC1E,KAdPjE,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAU+xB,yBAChBhoB,SAAUK,EAAKL,SACfonB,mBAAoB,IAGxByD,EAAa,CACT1uB,KAAM2uB,EACNhQ,cAAc,QAUtB+P,EAAa9uB,KAAK6e,YAAYva,EAAK1K,QAGvC,GAAkB,MAAdk1B,EAAoB,OAAO,KAE/B,KACKA,EAAW1uB,gBAAgB,GAAW0uB,EAAW1uB,gBAAgB,GACjE0uB,EAAW1uB,gBAAgB,GAAe0uB,EAAW1uB,gBAAgB,IAQtE,OANuB,MAAnB0uB,EAAW1uB,KACXJ,KAAKkd,UAAU,kDAAmD5Y,EAAKL,UAEvEjE,KAAKkd,UAAU,uBAAyB4R,EAAW1uB,KAAKhG,WAAa,4BAA6BkK,EAAKL,UAGpG,KAGX,IAsBI+B,EAtBA+H,EAAmD+gB,EAAW1uB,KAE9D4uB,EAA+BhvB,KAAKgc,eAAe3X,WAAWtC,OAE9DsI,EAAyB,GACzBuiB,EAAqC,GAErCC,EAAgB7sB,KAAKgc,eAAe3X,WACxC,GAAqB,MAAjBC,EAAK0pB,SAAkB,4BACvB,YAAc1pB,EAAK0pB,SAAnB,+CAA6B,KAApBh0B,EAAoB,QACrB+yB,EAAiBF,EAAc9qB,OAC/B6c,EAAW5e,KAAK6e,YAAY7kB,GAChC4yB,EAAoB5oB,KAAK6oB,EAAcrZ,OAAOuZ,EAAgBF,EAAc9qB,OAASgrB,IACrE,MAAZnO,EACAvU,EAAerG,KAAK4N,IAEpBvH,EAAerG,KAAK4a,EAASxe,OARd,mFAe3B,GAAI2N,aAAsB,EACtB/H,EAAU+H,EAAWlD,6BAA6BvG,EAAKlK,WACnDiQ,GAAgB,OACjB,CACH,IAAIP,EAAiBgE,EAAkBC,EAAY/N,KAAK6b,mBAAmBtB,cAE3EvU,EAAU+H,EAAWlD,6BAA6BvG,EAAKlK,WACnDiQ,GAAgB,EAAOP,GAM/B,GAFA9J,KAAK/H,OAAO6mB,uBAAuBxa,EAAKL,SAAUK,EAAKia,eAAgBxQ,EAAWxF,WAAW/E,EAAW0I,QAAS5H,EAAKlK,YAAakK,EAAKka,sBAEnH,MAAjBxY,EAAQ8E,MAER,OADA9K,KAAKkd,UAAUlX,EAAQ8E,MAAOxG,EAAKL,UAC5B,CAAE7D,KAAMgL,GAAqB2T,cAAc,GAGtD,IAAIrd,EAASsE,EAAQ2E,WAAW,GAEhC3K,KAAK4oB,kBAAkBtkB,EAAKL,SAAUvC,GAGlCA,EAAOd,UAAYmN,aAAsB,GAAkC,eAAzBA,EAAW3T,aAC7D4F,KAAKkd,UAAU,0HAA4HnP,EAAW3T,WAAa,IAAMsH,EAAOtH,WAAa,SAAUkK,EAAKL,SAAU,QACtNjE,KAAKivB,iBAAiBD,EAA8B,CAAC,CACjD5uB,KAAMlG,EAAU+nB,qBAChBhe,SAAUK,EAAKL,SACfof,SAAU,GAEd,CACIjjB,KAAMlG,EAAU00B,sBAChB3qB,SAAUK,EAAKL,SACfnB,MAAOiL,MAMf,IADA,IAAIS,EAAiB,KACZtW,EAAI,EAAGA,EAAImS,EAAetI,OAAQ7J,IAAK,CACxCA,EAAIwJ,EAAO2L,sBACXmB,EAAW9M,EAAO8L,iBAAiBtV,GAC/BA,GAAKwJ,EAAO2L,oBAAsB,GAAK3L,EAAO0L,gBAC9CoB,EAAuBA,EAAUpM,cAGzC,IAAI4c,EAAU3U,EAAenS,GAPe,uBAQ5C,YAAe00B,EAAoB10B,GAAnC,+CAAuC,KAA9BwiB,EAA8B,QACnC1a,KAAKgc,eAAe3X,WAAWL,KAAK0W,IATI,kFAWvC1a,KAAK2hB,uBAAuB3C,EAASxQ,EAAUlK,EAAK0pB,SAAS91B,GAAG+L,SAAUK,EAAK0pB,SAAS91B,KACzF8H,KAAKkd,UAAU,yBAA2B8B,EAAQ5kB,WAAa,uCAAyCoU,EAASpU,WAAa,sBAAuBkK,EAAK0pB,SAAS91B,GAAG+L,UAgB9K,IAAIgpB,EAAkB,EACtB,GAAIvrB,EAAO0L,cAAe,CACtB,IAAI8f,EAAyB7iB,EAAetI,OAASL,EAAO2L,oBAAsB,EAClF4f,IAAqBC,EAAyB,GAC9CltB,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUizB,kBAChBlpB,SAAUK,EAAK0pB,SAAStsB,EAAO2L,oBAAsB,GAAGpJ,SACxDmpB,eAAgBF,EAChB3oB,cAAc,EACd0jB,UAAWvmB,EAAOiM,aAAajM,EAAO2L,oBAAsB,GAAGjN,OAIvE,GAAIsB,EAAOb,YAAc2C,EAAW2C,OAAQ,CAExC,IAAI+oB,GAAU,EACV3U,EAAeva,KAAK6b,mBAAmBtB,aACvB,MAAhBA,EACA2U,GAAU,EAEN3U,GAAgBxM,GACdwM,aAAwB,GAASA,EAAa1U,WAAWjB,QAAmBmJ,GAAc,IAExFmhB,EADAxtB,EAAOb,YAAc2C,EAAW0I,SAGtBqO,EAAatM,gBAAqCF,IAInEmhB,GACDlvB,KAAKkd,UAAU,eAAiBxb,EAAOtH,WAAa,sDAAuDkK,EAAKL,UA+BxH,OA3BIvC,EAAOd,UAA+B,MAAnBkuB,EAAW1uB,MAC7B0uB,EAAW1uB,gBAAgB,GAC3B0uB,EAAW1uB,KAAK+G,iBAAiB,GAElCnH,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUi1B,gBAChBztB,OAAQA,EACRuC,SAAUK,EAAKL,SACfM,cAAc,EACdyQ,kBAAmB3K,EAAetI,OAAS,KAI/C/B,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAU4a,WAChBpT,OAAQA,EACRuC,SAAUK,EAAKL,SACf8Q,YAAmC,MAAtB+Z,EAAWjB,SAA0BiB,EAAWjB,QAC7DtpB,cAAc,EACdyQ,kBAAmB3K,EAAetI,OAAS,EAAIkrB,KAMvDjtB,KAAKmnB,iBAAiB7iB,EAAKka,qBAAsB9c,EAAOwf,iBAEjD,CAAE9gB,KAAMsB,EAAOwf,gBAAiBnC,cAAc,KA5yF7D,mCAgzFiBza,GAET,IAAIlE,EAEJ,OAAQkE,EAAK8qB,cACT,KAAKl1B,EAAUG,gBACX+F,EAAO+N,GACP,MACJ,KAAKjU,EAAUK,gBACX6F,EAAOkP,GACP,MACJ,KAAKpV,EAAUI,sBACX8F,EAAO4O,GACP,MACJ,KAAK9U,EAAUM,eACX4F,EAAOgL,GACPpL,KAAKmnB,iBAAiB7iB,EAAKL,SAAU7D,GACrC,MACJ,KAAKlG,EAAUO,aACX2F,EAAO6P,GACP,MACJ,KAAK/V,EAAUqC,YACX6D,EAAOuJ,GAWf,OAPA3J,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUya,aAChBC,SAAUxU,EACV6D,SAAUK,EAAKL,SACf9K,MAAOmL,EAAKkB,WAGT,CAAEpF,KAAMA,EAAM2e,cAAc,KAj1F3C,sCAq1FoBza,GAEZ,IAAI+qB,EAAeC,EAAcC,oBAAoB3qB,QAAQN,EAAK4Q,WAAa,EAE/E,GAAI5Q,EAAK4Q,UAAYhb,EAAU2E,gBAC3B,OAAOmB,KAAKwvB,uBAAuBlrB,GAGvC,IAAI6Q,EAAWnV,KAAK6e,YAAYva,EAAK/B,aAAc8sB,GAE/CI,EAA8BzvB,KAAKgc,eAAe3X,WAAWtC,OAE7D2tB,EAAqB,KACrBprB,EAAK4Q,UAAYhb,EAAUwE,IAC3BgxB,EAAqB1vB,KAAKgc,eAAe1V,aAAakjB,eAAetvB,EAAUqqB,2BAA4BjgB,EAAK/B,aAAa0B,SAAUjE,MAChIsE,EAAK4Q,UAAYhb,EAAUyE,KAClC+wB,EAAqB1vB,KAAKgc,eAAe1V,aAAakjB,eAAetvB,EAAUsqB,0BAA2BlgB,EAAK/B,aAAa0B,SAAUjE,OAG1I,IAAI2vB,EAAY3vB,KAAK6e,YAAYva,EAAK9B,eAEtC,GAAgB,MAAZ2S,GAAqC,MAAjBA,EAAS/U,MAA6B,MAAbuvB,GAAuC,MAAlBA,EAAUvvB,KAAc,OAAO,KAErG,GAAIivB,EAAc,CACd,IAAKrvB,KAAK2hB,uBAAuBgO,EAAUvvB,KAAM+U,EAAS/U,KAAMkE,EAAKL,SAAUK,EAAK/B,cAEhF,OADAvC,KAAKkd,UAAU,yBAA2ByS,EAAUvvB,KAAKhG,WAAa,4EAA8E+a,EAAS/U,KAAKhG,WAAa,6BAA8BkK,EAAKL,UAC3MkR,EAGNA,EAAS4J,cACV/e,KAAKkd,UAAU,4GAA6G5Y,EAAKL,UAGrI,IAAIuf,EAAiC,CAEjCpjB,KAAMkE,EAAK4Q,SACXjR,SAAUK,EAAKL,SACfM,cAAc,EACdsd,mBAAmB,GAMvB,OAHA7hB,KAAKwE,eAAegf,GAGbrO,EAIP,GAAI7Q,EAAK/B,aAAanC,MAAQlG,EAAUE,YAA4C,MAA9BkK,EAAK/B,aAAaqY,SAAkB,CACtF,IAAIrX,EAAIe,EAAK/B,aAAaqY,SACL,MAAjBrX,EAAEkiB,aAAwBliB,EAAEkiB,cAC5BliB,EAAE4gB,0BAA2B,EAC7BnkB,KAAKkd,UAAU,gBAAkB3Z,EAAEnJ,WAAa,oDAAqDkK,EAAKL,SAAU,SAI5H,IAAI2rB,EAAaza,EAAS/U,KAAKyvB,cAAcvrB,EAAK4Q,SAAUya,EAAUvvB,MAElE0vB,EAAgB3a,EAAS/U,KAAT,YAChB2vB,EAAiBJ,EAAUvvB,KAAV,YAErB,GAAkB,MAAdwvB,IAAwC,MAAjBE,GAA2C,MAAlBC,GAAyB,CACzE,IAAIC,EAAqC,MAAjBF,EAAwB,CAAC3a,EAAS/U,MAAQ0vB,EAC9DG,EAAuC,MAAlBF,EAAyB,CAACJ,EAAUvvB,MAAQ2vB,EAFI,uBAIzE,YAAeC,EAAf,+CAA0B,KAAjBE,EAAiB,+BACtB,YAAeD,EAAf,+CAA2B,KAAlB/c,EAAkB,QAEvB,GAAkB,OADlB0c,EAAaM,EAAGL,cAAcvrB,EAAK4Q,SAAUhC,IACrB,CACpBiC,EAAS/U,KAAO8vB,EAChBP,EAAUvvB,KAAO8S,EACjB,QANc,kFAStB,GAAkB,MAAd0c,EAAoB,OAb6C,mFAkC7E,OAhBkB,MAAdA,GAAsBtrB,EAAK4Q,UAAYhb,EAAUoD,OAC7C6X,EAAS/U,gBAAgB,GAASuvB,EAAUvvB,MAAQgL,IACpDpL,KAAKivB,iBAAiBQ,EAA6BzvB,KAAK2iB,qBAAqBxN,EAAS/U,KAAMkE,EAAK/B,aAAa0B,WAC9G2rB,EAAaxkB,IACNukB,EAAUvvB,gBAAgB,GAAS+U,EAAS/U,MAAQgL,KAC3DpL,KAAKwE,eAAexE,KAAK2iB,qBAAqBgN,EAAUvvB,KAAMkE,EAAK/B,aAAa0B,WAChF2rB,EAAaxkB,KAKjB9G,EAAK4Q,WAAY,CAAChb,EAAUwE,IAAKxE,EAAUyE,MAC3CqB,KAAKyiB,+BAA+Bne,EAAK/B,cACzCvC,KAAKyiB,+BAA+Bne,EAAK9B,gBAG3B,MAAdotB,GACA5vB,KAAKkd,UAAU,iBAAmB/iB,EAAkBmK,EAAK4Q,UAAY,oCAAsCC,EAAS/U,KAAKhG,WAAa,QAAUu1B,EAAUvvB,KAAKhG,WAAa,oBAAqBkK,EAAKL,UAC/LkR,IAIXnV,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAU+a,SAChBE,SAAUA,EAAS/U,KACnB8U,SAAU5Q,EAAK4Q,SACfjR,SAAUK,EAAKL,WAGO,MAAtByrB,GACA1vB,KAAKgc,eAAe1V,aAAawjB,oBAAoB,EAAG4F,GAGrD,CAAEtvB,KAAMwvB,EAAY7Q,cAAc,MAr8FrD,6CA28F2Bza,GAEnB,IAAI6Q,EAAWnV,KAAK6e,YAAYva,EAAK/B,cAErC,GAAgB,MAAZ4S,GAEAnV,KAAK2hB,uBAAuBxM,EAAS/U,KAAMkP,GAAsB,KAAMhL,EAAK/B,cAAe,CAE3F,IAAIC,EAAgB8B,EAAK9B,cACzB,GAAqB,MAAjBA,EAAuB,CACvB,GAAIA,EAAcpC,MAAQlG,EAAU+a,UAAYzS,EAAc0S,UAAYhb,EAAU6E,MAE7E,CACH,IAAI+lB,EAAK9kB,KAAKgc,eAAe1V,aACzB6pB,EAAoBrL,EAAG0E,eAAetvB,EAAUoqB,YAAahgB,EAAKL,SAAUjE,MAC5EowB,EAAYpwB,KAAK6e,YAAYrc,EAAcD,cAC3CgnB,EAAWzE,EAAG0E,eAAetvB,EAAUypB,WAAYnhB,EAAcD,aAAa0B,SAAUjE,MAC5F8kB,EAAGgF,oBAAoB,EAAGqG,GAC1B,IAAIE,EAAarwB,KAAK6e,YAAYrc,EAAcA,eAChDsiB,EAAGgF,oBAAoB,EAAGP,GAE1B,IAAInpB,EAAOgwB,EAAUhwB,KAKrB,OAJIA,GAAQiwB,EAAWjwB,MAAQA,EAAKmL,UAAU8kB,EAAWjwB,QACrDA,EAAOiwB,EAAWjwB,MAGf,CACHA,KAAMA,EACN2e,cAAc,GAjBlB/e,KAAKkd,UAAU,gGAAiG5Y,EAAKL,cAt9FzI,qCAi/FmBK,GACX,IAAI6Q,EAAWnV,KAAK6e,YAAYva,EAAK4pB,SAErC,GAAgB,MAAZ/Y,GAAqC,MAAjBA,EAAS/U,KAEjC,OAAIkE,EAAK4Q,UAAYhb,EAAUkD,OACtB+X,EAAS/U,KAAKmL,UAAUyD,IAO7B1K,EAAK4Q,UAAYhb,EAAU0E,KACrBuW,EAAS/U,MAAQkP,IACnBtP,KAAKyiB,+BAA+Bne,EAAK4pB,SACzCluB,KAAKkd,UAAU,kCAAoC/H,EAAS/U,KAAKhG,WAAa,oBAAqBkK,EAAKL,UACjGkR,IAKfnV,KAAKwE,eAAe,CAChBpE,KAAMlG,EAAUmrB,QAChBnQ,SAAU5Q,EAAK4Q,SACfjR,SAAUK,EAAKL,WAGZkR,IArBCnV,KAAKkd,UAAU,kCAAoC/H,EAAS/U,KAAKhG,WAAa,oBAAqBkK,EAAKL,UACjGkR,Q,6BAz/FvB,K,gSAEW,GAAAoa,oBAAsB,CAACr1B,EAAUiE,WAAYjE,EAAUkE,eAAgBlE,EAAUmE,gBAAiBnE,EAAUoE,yBAA0BpE,EAAUqE,oBCZpJ,IAAM,GAAb,WA4CI,WAAoB+xB,I,4FAAwB,SAAxB,KAAAA,kBAfpB,KAAAC,UAAY,EAQZ,KAAAC,SAAkB,CACdvsB,SAAU,CAAEoF,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACxC0uB,GAAIv2B,EAAUuF,gBACdtG,MAAO,0BAskCX,KAAAu3B,sBAAqC,CAACx2B,EAAUqD,eAAgBrD,EAAUsD,SAAUtD,EAAUoD,KAC9FpD,EAAUkD,MAAOlD,EAAUiD,IAAKjD,EAAUmD,OAAQnD,EAAU4E,UAAW5E,EAAU2C,c,UA/mCrF,O,EAAA,G,EAAA,6BAgDUvE,GAOF,GALA0H,KAAK/H,OAASK,EAEd0H,KAAKqc,UAAY/jB,EAAE+jB,UACnBrc,KAAKic,UAAY,GAEY,GAAzBjc,KAAKqc,UAAUta,OAKf,OAJA/B,KAAK/H,OAAO8pB,eAAiB,GAC7B/hB,KAAK/H,OAAO4kB,oBAAsB,GAClC7c,KAAK/H,OAAO04B,UAAY,QACxB3wB,KAAK/H,OAAOykB,OAAO,GAAK1c,KAAKic,WAIjCjc,KAAK+iB,IAAM,EACX/iB,KAAK4wB,sBAEL5wB,KAAK2wB,UAAY,GAEjB,IAAIrU,EAAYtc,KAAKqc,UAAUrc,KAAKqc,UAAUta,OAAS,GACvD/B,KAAKwwB,SAASvsB,SAAW,CAAEoF,KAAMiT,EAAUrY,SAASoF,KAAMC,OAAQgT,EAAUrY,SAASqF,OAASgT,EAAUrY,SAASlC,OAAQA,OAAQ,GAEjI,IAAI8uB,EAAW7wB,KAAK8wB,YACpB9wB,KAAK/H,OAAO8pB,eAAiB8O,EAASE,eACtC/wB,KAAK/H,OAAO4kB,oBAAsBgU,EAASG,mBAC3ChxB,KAAK/H,OAAOmqB,eAAiByO,EAASzO,eACtCpiB,KAAK/H,OAAO04B,UAAY3wB,KAAK2wB,UAE7B3wB,KAAK/H,OAAOykB,OAAO,GAAK1c,KAAKic,YA7ErC,4CAmFQjc,KAAK+c,GAAK,GAEV,IAAK,IAAI7kB,EAAI,EAAGA,EAAI8H,KAAKuwB,UAAWr4B,IAAK,CAIrC,IAFA,IAAI+4B,EAAejxB,KAAKwwB,WAIhBxwB,KAAK+iB,KAAO/iB,KAAKqc,UAAUta,SAFtB,CAIT,IAAImvB,EAASlxB,KAAKqc,UAAUrc,KAAK+iB,KAKjC,GAJGmO,EAAOT,IAAMv2B,EAAUsF,UACtBQ,KAAKmxB,YAAcD,GAGnBA,EAAOT,IAAMv2B,EAAUoF,SAAW4xB,EAAOT,IAAMv2B,EAAUkF,OAAS8xB,EAAOT,IAAMv2B,EAAUsF,QAAS,CAClGyxB,EAAQC,EACe,MAApBlxB,KAAKmxB,cACJF,EAAMG,cAAgBpxB,KAAKmxB,YAC3BnxB,KAAKmxB,YAAc,MAEvB,MAGJnxB,KAAK+iB,MAIT/iB,KAAK+c,GAAG/Y,KAAKitB,GAET/4B,EAAI8H,KAAKuwB,UAAY,GACrBvwB,KAAK+iB,MAKb/iB,KAAKqxB,IAAMrxB,KAAK+c,GAAG,GACnB/c,KAAKywB,GAAKzwB,KAAKqxB,IAAIZ,GACnBzwB,KAAKiE,SAAWjE,KAAKqxB,IAAIptB,WAzHjC,kCA+HQ,IAAIgtB,EAGJ,IAFAjxB,KAAKsc,UAAYtc,KAAKqxB,MAET,CAIT,GAFArxB,KAAK+iB,MAED/iB,KAAK+iB,KAAO/iB,KAAKqc,UAAUta,OAAQ,CACnCkvB,EAAQjxB,KAAKwwB,SACb,MAQJ,IALAS,EAAQjxB,KAAKqc,UAAUrc,KAAK+iB,MACnB0N,IAAMv2B,EAAUsF,UACrBQ,KAAKmxB,YAAcF,GAGnBA,EAAMR,IAAMv2B,EAAUoF,SAAW2xB,EAAMR,IAAMv2B,EAAUkF,OAAS6xB,EAAMR,IAAMv2B,EAAUsF,QAAS,CAC/FyxB,EAAMG,cAAgBpxB,KAAKmxB,YAC3BnxB,KAAKmxB,YAAc,KACnB,OAKR,IAAK,IAAIj5B,EAAI,EAAGA,EAAI8H,KAAKuwB,UAAY,EAAGr4B,IACpC8H,KAAK+c,GAAG7kB,GAAK8H,KAAK+c,GAAG7kB,EAAI,GAG7B8H,KAAK+c,GAAG/c,KAAKuwB,UAAY,GAAKU,EAE9BjxB,KAAKqxB,IAAMrxB,KAAK+c,GAAG,GACnB/c,KAAKywB,GAAKzwB,KAAKqxB,IAAIZ,GACnBzwB,KAAKiE,SAAWjE,KAAKqxB,IAAIptB,WAhKjC,gCAoKckc,GAA4F,IAA9EsE,EAA8E,uDAArD,QAASxgB,EAA4C,uCAAnBwc,EAAmB,uCAClF,MAAZxc,IAAkBA,EAAWrL,OAAOwqB,OAAO,GAAIpjB,KAAKiE,WACxDjE,KAAKic,UAAUjY,KAAK,CAChBmc,KAAMA,EACNlc,SAAUA,EACVwc,SAAUA,EACViE,MAAOD,MA1KnB,6BA8KWgM,GAA0E,IAA3Da,IAA2D,yDAArCC,EAAqC,wDAC7E,GAAIvxB,KAAKywB,IAAMA,EAAI,CACf,GAAIA,GAAMv2B,EAAU4E,WAAakB,KAAKywB,IAAMv2B,EAAUuF,gBAClD,OAAO,EAGX,IAAIwE,EAAyBjE,KAAKqxB,IAAIptB,SAClCwsB,GAAMv2B,EAAU4E,WAA+B,MAAlBkB,KAAKsc,WAE9Btc,KAAKsc,UAAUrY,SAASoF,KAAOpF,EAASoF,OACxCpF,EAAW,CACPoF,KAAMrJ,KAAKsc,UAAUrY,SAASoF,KAC9BC,OAAQtJ,KAAKsc,UAAUrY,SAASqF,OAAStJ,KAAKsc,UAAUrY,SAASlC,OACjEA,OAAQ,IAKpB,IAAI0e,EAAqB,KA6BzB,OA5BIgQ,GAAMv2B,EAAU4E,WAAakB,KAAKsc,UAAUrY,SAASoF,KAAOrJ,KAAKqxB,IAAIptB,SAASoF,OAC7ErJ,KAAKwxB,gBAAgBxxB,KAAKsc,UAAUmU,MAErChQ,EAAW,CACP9X,MAAO,4BACPgX,cAAe,SAACC,GACZ,MAAO,CAAC,CACJC,SAAUD,EACVE,KAAM,CACFzX,MAAO,CACH0X,gBAAiB9b,EAASoF,KAAM2W,YAAa/b,EAASqF,OAAQ2W,cAAehc,EAASoF,KAAM6W,UAAWjc,EAASqF,OAChHmC,QAAS,GACTkV,SAAU3Y,OAAO4Y,eAAeC,OAEpCV,KAAM,SAOlBoR,GACAvxB,KAAK/H,OAAO6b,KAAK2d,oBAAoBC,SAASztB,EAAUjE,KAAK/H,SAKrE+H,KAAKkd,UAAU,kBAAoB/iB,EAAkBs2B,GAAM,sBAAwBt2B,EAAkB6F,KAAKywB,IAAK,QAASxsB,EAAUwc,IAC3H,EAOX,OAJI6Q,GACAtxB,KAAK2xB,aAGF,IApOf,sCAsOoBlB,GACZ,GAAIA,GAAMv2B,EAAUiD,IAAK,OAAO,EADP,2BAEzB,YAAey0B,EAAOC,mBAAtB,+CAA0C,KAAjCC,EAAiC,+BACtC,YAAqBA,EAArB,+CACI,GAAIrB,GADiB,QACD,OAAO,EAFO,oFAFjB,qFAtOjC,8BAgPQ,OAAOzwB,KAAKqxB,KAAOrxB,KAAKwwB,WAhPhC,iCAmPeS,GAEP,OAAK3N,MAAMC,QAAQ0N,GAIZA,EAAMrsB,QAAQ5E,KAAKywB,KAAO,EAHtBzwB,KAAKywB,IAAMQ,IAtP9B,2CA8PQ,OAAOr4B,OAAOwqB,OAAO,GAAIpjB,KAAKiE,YA9PtC,6CAmQQ,IAAIA,EAAWjE,KAAK+xB,qBAIpB,OAHA9tB,EAASqF,OAASrF,EAASqF,OAAStJ,KAAKiE,SAASlC,OAClDkC,EAASlC,OAAS,EAEXkC,IAvQf,kCAyRQ,IATA,IAAI0Y,EAAwB,GACxBqV,EAA6B,GAE7B5P,EAA+B,CAC/B9Y,OAAQ,EACRD,KAAM,IACNtH,OAAQ,IAGJ/B,KAAKiyB,SAAS,CAElB,IAAIC,EAASlyB,KAAK+iB,IAElB,GAAI/iB,KAAKmyB,WAAWP,EAAOQ,6BAA8B,CACrD,IAAIrrB,EAAK/G,KAAKqyB,uBACJ,MAANtrB,IAAYirB,EAAmBA,EAAiBxqB,OAAOT,QACxD,CACH,IAAI2T,EAAK1a,KAAKsyB,iBAEJ,MAAN5X,IACAiC,EAAcA,EAAYnV,OAAOkT,IAErC0H,EAAiBpiB,KAAK+xB,qBAItB/xB,KAAK+iB,KAAOmP,IACZlyB,KAAK+iB,MACL/iB,KAAK4wB,uBAKb,MAAO,CACHG,eAAgBpU,EAChBqU,mBAAoBgB,EACpB5P,eAAgBA,KApT5B,kDA0TgC1H,GAExB,IAAG1a,KAAKswB,gBAER,GAAK5V,EAAGta,MAAQlG,EAAU+a,UAAY2c,EAAOrC,oBAAoB3qB,QAAQ8V,EAAGxF,UAAY,EAAI,CACxF,IAAIjb,EAAI,eACR,OAAQygB,EAAGxF,UACP,KAAKhb,EAAUoD,KAAMrD,EAAI,eAAgB,MACzC,KAAKC,EAAUkD,MAAOnD,EAAI,mBAAoB,MAC9C,KAAKC,EAAUqD,eAAgBtD,EAAI,kBAAmB,MACtD,KAAKC,EAAUsD,SAAUvD,EAAI,oBAEjCA,GAAK,cAAgBE,EAAkBugB,EAAGxF,UAAY,IACtDlV,KAAKkd,UAAL,mBAA2BjjB,EAA3B,qGACI,OAAQygB,EAAGzW,cAEf,CAAC/J,EAAUmrB,QAASnrB,EAAUya,aAC9Bza,EAAUE,WAAYF,EAAUwrB,oBAAoB9gB,QAAQ8V,EAAGta,OAAS,GACxEJ,KAAKkd,UAAU,yHACX,OAAQxC,EAAGzW,YA7U3B,uCAiVkD,IAA/BsuB,IAA+B,yDAEtCC,EAA2B,KAE/B,OAAQxyB,KAAKywB,IACT,KAAKv2B,EAAU0C,YACf,KAAK1C,EAAUE,WACf,KAAKF,EAAUW,YACf,KAAKX,EAAUY,aACf,KAAKZ,EAAUsC,aACf,KAAKtC,EAAUO,aACf,KAAKP,EAAUG,gBACf,KAAKH,EAAUM,eACf,KAAKN,EAAUK,gBACf,KAAKL,EAAUI,sBACf,KAAKJ,EAAUa,WACX,IAAImb,EAAMlW,KAAKyyB,iCACXF,GAAiBvyB,KAAK0yB,OAAOx4B,EAAU4E,WAAW,GAAM,GAC5D0zB,EAAgBtc,EAChB,MACJ,KAAKhc,EAAU8C,iBACX,IAAIqH,EAAwB,GACxB2V,EAAeha,KAAK+xB,qBAGxB,IAFA/xB,KAAK2xB,YAEE3xB,KAAKywB,IAAMv2B,EAAU+C,mBAAqB+C,KAAKywB,IAAMv2B,EAAUuF,iBAC/DmyB,EAAOQ,4BAA4BxtB,QAAQ5E,KAAKywB,IAAM,GACzDpsB,EAAaA,EAAWmD,OAAOxH,KAAKsyB,kBAExC,IAAIrY,EAAaja,KAAK+xB,qBACtB9X,EAAW3Q,OAAS2Q,EAAW3Q,OAAS2Q,EAAWlY,OACnDkY,EAAWlY,OAAS,EACpB/B,KAAK0yB,OAAOx4B,EAAU+C,mBAEtBu1B,EAAgB,CAAC,CACbpyB,KAAMlG,EAAUomB,UAChBrc,SAAU+V,EACVC,WAAYA,EACZ5V,WAAYA,IAEhB,MAEJ,KAAKnK,EAAUyB,aACX62B,EAAgBxyB,KAAK2yB,aACrB,MACJ,KAAKz4B,EAAU2B,WACX22B,EAAgBxyB,KAAK4yB,WACrB,MACJ,KAAK14B,EAAU0B,UACX42B,EAAgBxyB,KAAK6yB,UACrB,MACJ,KAAK34B,EAAU+B,UACXu2B,EAAgBxyB,KAAK8yB,UACrB,MACJ,KAAK54B,EAAUkC,cACXo2B,EAAgBxyB,KAAK+yB,cACrB,MACJ,KAAK74B,EAAUwC,aACf,KAAKxC,EAAUyC,eACX61B,EAAgBxyB,KAAKgzB,aACrB,MACJ,KAAK94B,EAAU4B,cACX02B,EAAgBxyB,KAAKizB,cACrB,MACJ,KAAK/4B,EAAUmC,aACX,IAAI4H,EAAWjE,KAAK+xB,qBACpB/xB,KAAK2xB,YACLa,EAAgB,CAAC,CACbpyB,KAAMlG,EAAUmC,aAChB4H,SAAUA,IAEd,MACJ,KAAK/J,EAAUoC,gBACX,IAAI42B,EAAYlzB,KAAK+xB,qBACrB/xB,KAAK2xB,YACLa,EAAgB,CAAC,CACbpyB,KAAMlG,EAAUoC,gBAChB2H,SAAUivB,IAEd,MACJ,KAAKh5B,EAAU4E,UACX,MACJ,QACI,IAAI7E,EAAIE,EAAkB6F,KAAKywB,IAC3Bx2B,GAAK+F,KAAKqxB,IAAIl4B,QAAOc,GAAK,IAAM+F,KAAKqxB,IAAIl4B,MAAQ,KACrDc,GAAK,6BACL+F,KAAKkd,UAAUjjB,GAEf,IAAIk5B,EAAWvB,EAAOQ,4BAA4BxtB,QAAQ5E,KAAKywB,KAAO,EACjE0C,GACDnzB,KAAK2xB,YAKjB,GAAoB,MAAjBa,EAEC,KAAOxyB,KAAKywB,IAAMv2B,EAAU4E,WAAayzB,GACrCvyB,KAAK2xB,YAIb,GAAoB,MAAjBa,GAAyBA,EAAczwB,OAAS,EAAE,CACjD,IAAIqxB,EAAUZ,EAAcA,EAAczwB,OAAS,GACrC,MAAXqxB,EACCpzB,KAAKqzB,4BAA4Bb,EAAcA,EAAczwB,OAAS,IAEtEywB,EAAgB,KAIxB,OAAOA,IAhcf,oCAscQ,IAIIvJ,EAJAhlB,EAAWjE,KAAK+xB,qBAWpB,OATA/xB,KAAK2xB,YAIC3xB,KAAKywB,IAAMv2B,EAAU4E,YACvBmqB,EAAOjpB,KAAKszB,YACZtzB,KAAK0yB,OAAOx4B,EAAU4E,WAAW,GAAM,IAGpC,CAAC,CACJsB,KAAMlG,EAAUkC,cAChB6H,SAAUA,EACVglB,KAAMA,MApdlB,mCA2dQ,IAAIhlB,EAAWjE,KAAK+xB,qBAEpB/xB,KAAK2xB,YACL,IAAIjf,EAAY1S,KAAK+xB,qBAErB,GAAI/xB,KAAK0yB,OAAOx4B,EAAU0C,aAAa,GAAO,CAC1C,IAAIssB,EAAYlpB,KAAKszB,YACjB9U,EAAwBxe,KAAK+xB,qBAEjC/xB,KAAK/H,OAAO6mB,uBAAuB7a,EAAU,GAAI,QAASua,GAE1Dxe,KAAK0yB,OAAOx4B,EAAU2C,cAAc,GAChCmD,KAAKywB,IAAMv2B,EAAU4E,WACrBkB,KAAKkd,UAAU,qEAAsE,WAEzF,IAAI7Y,EAAarE,KAAKsyB,iBAClB3f,EAAU3S,KAAK+xB,qBAOnB,OANApf,EAAQ5Q,OAAS,EAEC,MAAdsC,GAAsBA,EAAWtC,OAAS,GAAKsC,EAAW,GAAGjE,MAAQlG,EAAUomB,YAC/E3N,EAAsBtO,EAAW,GAAI4V,YAGlC,CACH,CACI7Z,KAAMlG,EAAUyB,aAChBsI,SAAUA,EACVyO,UAAWA,EACXC,QAASA,EACTuW,UAAWA,EACX7kB,WAAYA,IAMxB,MAAO,KA/ff,iCAqgBQ,IAAIJ,EAAWjE,KAAK+xB,qBAEhBwB,EAAqC,GAEzCvzB,KAAK2xB,YAEL,IAAIjf,EAAY1S,KAAK+xB,qBAErB,GAAI/xB,KAAK0yB,OAAOx4B,EAAU0C,aAAa,GAAO,CAE1C,GAAIoD,KAAK+c,GAAG,GAAG0T,IAAMv2B,EAAU6E,MAC3B,OAAOiB,KAAKwzB,2BAA2BvvB,EAAUyO,GAGrD,IAAI+X,EAAmBzqB,KAAKsyB,gBAAe,GAC3CiB,EAAmBvvB,KAAKhE,KAAK+xB,sBAC7B/xB,KAAK0yB,OAAOx4B,EAAU4E,WACtB,IAAIoqB,EAAYlpB,KAAKszB,YACrBC,EAAmBvvB,KAAKhE,KAAK+xB,sBAC7B/xB,KAAK0yB,OAAOx4B,EAAU4E,WAAW,GACjC,IAAIisB,EAAkB/qB,KAAKsyB,gBAAe,GAEtC9T,EAAuBxe,KAAK+xB,qBAChC/xB,KAAK0yB,OAAOx4B,EAAU2C,cAAc,GAEpCmD,KAAK/H,OAAO6mB,uBAAuB7a,EAAUsvB,EAAoB,MAAO/U,GAEpExe,KAAKywB,IAAMv2B,EAAU4E,WACrBkB,KAAKkd,UAAU,mEAAoE,WAIvF,IAAI7Y,EAAarE,KAAKsyB,iBAClB3f,EAAU3S,KAAK+xB,qBAgBnB,OAfApf,EAAQ5Q,OAAS,EAEC,MAAdsC,GAAsBA,EAAWtC,OAAS,GAAKsC,EAAW,GAAGjE,MAAQlG,EAAUomB,YAC/E3N,EAAsBtO,EAAW,GAAI4V,YAGxB,MAAbiP,IACAA,EAAY,CACR9oB,KAAMlG,EAAUya,aAChB1Q,SAAUjE,KAAK+xB,qBACf3C,aAAcl1B,EAAUK,gBACxBiL,UAAU,IAIX,CACH,CACIpF,KAAMlG,EAAU2B,WAChBoI,SAAUA,EACVyO,UAAWA,EACXC,QAASA,EACTuW,UAAWA,EACXuB,iBAAkBA,EAClBM,gBAAiBA,EACjB1mB,WAAYA,IAMxB,MAAO,KArkBf,iDAykB+BJ,EAAwByO,GAE/C,IAAIgW,EAAe1oB,KAAKyzB,YAEpBjI,EAA6BxrB,KAAKqxB,IAAIl4B,MACtCu6B,EAA6B1zB,KAAK+xB,qBACtC/xB,KAAK2xB,YAEL3xB,KAAK0yB,OAAOx4B,EAAU6E,OAAO,GAE7B,IAAIksB,EAAajrB,KAAKszB,YAEtBtzB,KAAK0yB,OAAOx4B,EAAU2C,cAAc,GAEhCmD,KAAKywB,IAAMv2B,EAAU4E,WACrBkB,KAAKkd,UAAU,mEAAoE,WAGvF,IAAI7Y,EAAarE,KAAKsyB,iBAClB3f,EAAU3S,KAAK+xB,qBAOnB,OANApf,EAAQ5Q,OAAS,EAEC,MAAdsC,GAAsBA,EAAWtC,OAAS,GAAKsC,EAAW,GAAGjE,MAAQlG,EAAUomB,YAC/E3N,EAAsBtO,EAAW,GAAI4V,YAGvB,MAAdgR,GAAsC,MAAhBvC,GAAsC,MAAdrkB,EAA2B,GAEtE,CACH,CACIjE,KAAMlG,EAAUksB,sBAChBniB,SAAUA,EACVyO,UAAWA,EACXC,QAASA,EACT6Y,mBAAoBA,EACpB9C,aAAcA,EACd+C,iBAAkBiI,EAClBzI,WAAYA,EACZ5mB,WAAYA,MA/mB5B,mCAunBQ,IAAIosB,EAAKzwB,KAAKywB,GACVxsB,EAAWjE,KAAK+xB,qBAIpB,GAFA/xB,KAAK2xB,YAED3xB,KAAK0yB,OAAOx4B,EAAU0C,aAAa,GAAQ,CAC3C,IAAI+2B,EAAM3zB,KAAK4zB,4BACXC,EAAcF,EAAI3Q,MAOtB,OANI6Q,EAAY9xB,OAAS,GACrB/B,KAAKkd,UAAU,+DAAgE,QAASjZ,GAG5FjE,KAAK0yB,OAAOx4B,EAAU4E,WAAW,GAAM,GAEhC,CAAC,CAEJsB,KAAMqwB,EACNxsB,SAAUA,EACVkc,KAA4B,GAAtB0T,EAAY9xB,OAAc,KAAO8xB,EAAY,GACnDlM,MAAOkM,EAAY9xB,QAAU,EAAI,KAAO8xB,EAAY,GACpDtV,eAAgBoV,EAAIpV,eACpBC,qBAAsBmV,EAAInV,uBAIlC,OAAO,OAhpBf,oCAspBQ,IAAIva,EAAWjE,KAAK+xB,qBAEpB,GADA/xB,KAAK2xB,YACD3xB,KAAK0yB,OAAOx4B,EAAU0C,aAAa,GAAO,CAE1C,IAAIk3B,EAAa9zB,KAAKszB,YAEtBtzB,KAAK/H,OAAO6mB,uBAAuB7a,EAAU,GAAI,SAAUjE,KAAK+xB,sBAEhE/xB,KAAK0yB,OAAOx4B,EAAU2C,cACtB,IAAI6V,EAAY1S,KAAK+xB,qBAErB/xB,KAAK0yB,OAAOx4B,EAAU8C,kBAAkB,GAaxC,IAXA,IAAI+2B,EAAyB,CACzB3zB,KAAMlG,EAAU4B,cAChBmI,SAAUA,EACVyO,UAAWA,EACXC,QAAS,KACTuW,UAAW4K,EACXnK,UAAW,IAGXqK,GAAsB,EAEnBh0B,KAAKywB,IAAMv2B,EAAU6B,aAAeiE,KAAKywB,IAAMv2B,EAAU8B,gBAAgB,CAC5E,IAAIi4B,EAAej0B,KAAK+xB,qBAEpBmC,EAAYl0B,KAAKywB,IAAMv2B,EAAU8B,eACjCk4B,IACIF,EACAh0B,KAAKkd,UAAU,oEAAqE,QAAS+W,GAE7FD,GAAsB,GAI9Bh0B,KAAK2xB,YAEL,IAAI9H,EAAW,KACVqK,IACDrK,EAAW7pB,KAAKszB,aAGpBtzB,KAAK0yB,OAAOx4B,EAAU6E,OAAO,GAI7B,IAFA,IAAIsF,EAAwB,GAErBrE,KAAKywB,IAAMv2B,EAAU+C,mBAAqB+C,KAAKywB,IAAMv2B,EAAUuF,iBAC/DO,KAAKywB,IAAMv2B,EAAU6B,aAAeiE,KAAKywB,IAAMv2B,EAAU8B,gBAC9D,CACE,IAAIwnB,EAAYxjB,KAAKsyB,iBACJ,MAAb9O,IACAnf,EAAaA,EAAWmD,OAAOgc,IAIvC,IAAI2Q,EAAiC,CACjC/zB,KAAMlG,EAAU6B,YAChBkI,SAAUgwB,EACVpK,SAAUA,EACVxlB,WAAYA,GAGhB0vB,EAAWpK,UAAU3lB,KAAKmwB,GAO9B,OAHAJ,EAAWphB,QAAU3S,KAAKo0B,uBAC1Bp0B,KAAK0yB,OAAOx4B,EAAU+C,mBAAmB,GAElC,CAAC82B,GAIZ,OAAO,OAhuBf,gCAsuBQ,IAAI9vB,EAAWjE,KAAK+xB,qBAGpB,GADA/xB,KAAK2xB,YACD3xB,KAAK0yB,OAAOx4B,EAAU0C,aAAa,GAAO,CAC1C,IAAIssB,EAAYlpB,KAAKszB,YACjB9U,EAAuBxe,KAAK+xB,qBAChC/xB,KAAK/H,OAAO6mB,uBAAuB7a,EAAU,GAAI,KAAMua,GACvDxe,KAAK0yB,OAAOx4B,EAAU2C,cAAc,GAEhCmD,KAAKywB,IAAMv2B,EAAU4E,WACrBkB,KAAKkd,UAAU,uFAAwF,WAG3G,IAAI7Y,EAAarE,KAAKsyB,iBAElBtyB,KAAKywB,IAAMv2B,EAAU4E,WACrBkB,KAAK2xB,YAGT,IAAI0C,EAA4B,KAgBhC,OAdIr0B,KAAKmyB,WAAWj4B,EAAUiC,eAC1B6D,KAAK2xB,YACL0C,EAAiBr0B,KAAKsyB,kBAGT,MAAbpJ,GAA8C,GAAzBlpB,KAAKic,UAAUla,SACpCmnB,EAAY,CACR9oB,KAAMlG,EAAUya,aAChB1Q,SAAUjE,KAAK+xB,qBACf3C,aAAcl1B,EAAUK,gBACxBiL,UAAU,IAIX,CACH,CACIpF,KAAMlG,EAAU+B,UAChBgI,SAAUA,EACVilB,UAAWA,EACXqB,iBAAkBlmB,EAClBmmB,kBAAmB6J,IAM/B,MAAO,KArxBf,gCAgyBQ,IAAIpwB,EAAWjE,KAAK+xB,qBAEhBrf,EAAY1S,KAAK+xB,qBACrB/xB,KAAK2xB,YACL,IAAIttB,EAAarE,KAAKsyB,iBAEtB,GAAItyB,KAAK0yB,OAAOx4B,EAAUyB,cAAc,IAChCqE,KAAK0yB,OAAOx4B,EAAU0C,aAAa,GAAO,CAC1C,IAAIssB,EAAYlpB,KAAKszB,YACjB3gB,EAAU3S,KAAKo0B,uBAInB,OAFAp0B,KAAK0yB,OAAOx4B,EAAU2C,cAAc,GAE7B,CACH,CACIuD,KAAMlG,EAAU0B,UAChBqI,SAAUA,EACVyO,UAAWA,EACXC,QAASA,EACTuW,UAAWA,EACX7kB,WAAYA,IAM5B,MAAO,KA1zBf,yCA+zBQ,OAAIrE,KAAK+c,GAAG,GAAG0T,IAAMv2B,EAAU2D,OAC3BmC,KAAK+c,GAAG,GAAG0T,IAAMv2B,EAAUE,aACxB4F,KAAK+c,GAAG,GAAG0T,IAAMv2B,EAAU4D,SAAWkC,KAAK+c,GAAG,GAAG0T,IAAMv2B,EAAU+E,SAj0BhF,uDAw0BQ,GACKe,KAAKywB,IAAMv2B,EAAUE,YAAc4F,KAAKywB,IAAMv2B,EAAUsC,cACxDwD,KAAK+c,GAAG,GAAG0T,IAAMv2B,EAAUE,YACrB4F,KAAK+c,GAAG,GAAG0T,IAAMv2B,EAAUgD,yBAC9B8C,KAAKs0B,mBAeT,MAAO,CAACt0B,KAAKszB,aAZb,IAAIpd,EAAiB,GACjB9V,EAAiB,KACrB,EAAG,CACa,MAARA,GAAcJ,KAAK0yB,OAAOx4B,EAAU+E,OAAO,GAC/C,IAAIs1B,EAAKv0B,KAAKw0B,yBAAyBp0B,GACvC8V,EAAIlS,KAAKuwB,GACTn0B,EAAOm0B,aAAE,EAAFA,EAAI7L,mBAEN1oB,KAAKywB,IAAMv2B,EAAU+E,OAE9B,OAAOiX,IAz1BnB,kCAi2BQ,OAAOlW,KAAKy0B,gBAAgB,KAj2BpC,sCAo2BoBC,GAAkB,IAE1BC,EAF0B,OAI1BA,EADAD,EAAa9C,EAAOC,mBAAmB9vB,OAAS,EACzC/B,KAAKy0B,gBAAgBC,EAAa,GAElC10B,KAAK40B,0BAGhB,IAAIC,EAAYjD,EAAOC,mBAAmB6C,GAE1C,GAAY,MAARC,GAAgBE,EAAUjwB,QAAQ5E,KAAKywB,IAAM,EAC7C,OAAOkE,EAGX,IAAIG,GAAQ,EAEZ,GAAI90B,KAAKywB,IAAMv2B,EAAU6E,MACrB,OAAO41B,EAGX,IArB8B,iBAuB1B,IAAIzf,EAAsB,EAAKub,GAE/BqE,GAAQ,EACR,IAAI7wB,EAAW,EAAK8tB,qBAEpB,EAAKJ,YAEL,IA9B0B,iBA8BrB,IAAIoD,EAAM,KAEX,GAAI7f,GAAYhb,EAAUiE,YAAc,EAAKsyB,IAAMsE,EAAOjD,GAAI,CAC1D,IAAIkD,EAAY,EAAKjD,qBACrB,EAAK7U,UAAL,uBAA+B6X,EAAOE,MAAtC,+CAAkFF,EAAOG,OAAS,QAC9Ft8B,OAAOwqB,OAAO,GAAInf,EAAU,CAAElC,OAAQ,IAAM,CAC5C4G,MAAO,GAAF,OAAKosB,EAAOE,MAAZ,kBAA2BF,EAAOG,MAAlC,aACLvV,cAAe,SAACC,GACZ,MAAO,CACH,CACIC,SAAUD,EACVE,KAAM,CACFzX,MAAO,CAAE0X,gBAAiB9b,EAASoF,KAAM2W,YAAa/b,EAASqF,OAAQ2W,cAAehc,EAASoF,KAAM6W,UAAW8U,EAAU1rB,OAAS0rB,EAAUjzB,QAC7Ioe,KAAM4U,EAAOG,YAMjC,EAAKvD,YACLzc,EAAW6f,EAAOI,YApB1B,MAAmB,CAAC,CAAErD,GAAI53B,EAAU2D,MAAOo3B,MAAO,KAAMC,MAAO,KAAMC,UAAWj7B,EAAU6D,cACtE,CAAE+zB,GAAI53B,EAAU4D,QAASm3B,MAAO,KAAMC,MAAO,KAAMC,UAAWj7B,EAAU8D,iBAD5F,eAC+G,IAuB/G,IAAIk3B,OAAe,EAOnB,GAAa,OALTA,EADAR,EAAa9C,EAAOC,mBAAmB9vB,OAAS,EACxC,EAAK0yB,gBAAgBC,EAAa,GAElC,EAAKE,2BAGE,CAEf,IAAIQ,GAAkB,EACtB,GAAI,EAAKC,WAAWV,IAAS,EAAKU,WAAWH,GAAQ,CACjD,IAAII,EAAuBX,EACvBY,EAAwBL,EACxBtrB,EAAWuI,GAAuBmjB,EAAOlG,cACzCvlB,EAAYsI,GAAuBojB,EAAQnG,cAC3CQ,EAAahmB,EAASimB,cAAc3a,EAAUrL,GAClD,GAAkB,MAAd+lB,EAAoB,CACpBwF,GAAkB,EAClB,IAAII,EAAS5rB,EAAS6rB,QAAQvgB,EAAU,CAAE9U,KAAMwJ,EAAUzQ,MAAOm8B,EAAO9vB,UACpE,CAAEpF,KAAMyJ,EAAW1Q,MAAOo8B,EAAQ/vB,WACtC8vB,EAAOlG,aAA+BQ,EAAY8F,cAClDJ,EAAO9vB,SAAWgwB,EAClBF,EAAOrxB,SAASlC,OAASwzB,EAAQtxB,SAASqF,OAASisB,EAAQtxB,SAASlC,OAASuzB,EAAOrxB,SAASqF,QAIhG8rB,IACDT,EAAO,CACHv0B,KAAMlG,EAAU+a,SAChBhR,SAAUA,EACViR,SAAUA,EACV3S,aAAcoyB,EACdnyB,cAAe0yB,MAjExBJ,GAASD,EAAUjwB,QAAQ5E,KAAKywB,KAAO,GAAG,IAyEjD,OAAOkE,IAl8Bf,iCAs8BerwB,GAEP,OAAgB,MAARA,GAAgBA,EAAKlE,MAAQlG,EAAUya,eAx8BvD,gDA88BQ,IAAIgR,EAAsC,KACtC1hB,EAAW,KAEXjE,KAAKmyB,WAAW,CAACj4B,EAAU0D,WAAY1D,EAAUyD,gBACjDgoB,EAA2B3lB,KAAKywB,GAChCxsB,EAAWjE,KAAK+xB,qBAChB/xB,KAAK2xB,aAGT,IAAIv4B,EAAc4G,KAAK21B,aAqBvB,OAnBgC,MAA5BhQ,IACAvsB,EAAI,CACAgH,KAAMlG,EAAUyrB,yBAChB1hB,SAAUA,EACViR,SAAUyQ,EACVuI,QAAS90B,IAIb4G,KAAKmyB,WAAW,CAACj4B,EAAU0D,WAAY1D,EAAUyD,gBACjDvE,EAAI,CACAgH,KAAMlG,EAAU0rB,wBAChB3hB,SAAUjE,KAAK+xB,qBACf7c,SAAUlV,KAAKywB,GACfvC,QAAS90B,GAEb4G,KAAK2xB,aAGFv4B,IA5+Bf,mCAm/BQ,IAAI6vB,EACAhlB,EAAyBjE,KAAK+xB,qBAElC,OAAQ/xB,KAAKywB,IACT,KAAKv2B,EAAU0C,YACX,OAAOoD,KAAK41B,sBAAsB51B,KAAK61B,oBAC3C,KAAK37B,EAAUkD,MACf,KAAKlD,EAAU0E,IACXqF,EAAWA,EACX,IAAI6xB,EAAM91B,KAAKywB,GAIf,GAHAzwB,KAAK2xB,YACL1I,EAAOjpB,KAAK21B,aAER31B,KAAKq1B,WAAWpM,GAAO,CACvB,IAAI8M,EAAuB9M,EACvB+M,EAAW7jB,GAAuB4jB,EAAO3G,cACzCQ,EAAaoG,EAASnG,cAAciG,GACxC,GAAkB,MAAdlG,EAAoB,CACpB,IAAI4F,EAASQ,EAASP,QAAQK,EAAK,CAAE11B,KAAM41B,EAAU78B,MAAO48B,EAAOvwB,WAInE,OAHAuwB,EAAO3G,aAA+BQ,EAAY8F,cAClDK,EAAOvwB,SAAWgwB,EAClBvxB,EAASlC,OAASg0B,EAAO9xB,SAASqF,OAASrF,EAASqF,OAAS,EACtDysB,GAIf,MAAO,CACH31B,KAAMlG,EAAUmrB,QAChBphB,SAAUA,EACViqB,QAASjF,EACT/T,SAAU4gB,GAElB,KAAK57B,EAAUY,aACX,GAAIkF,KAAK+c,GAAG,GAAG0T,IAAMv2B,EAAU0C,YAAa,CACxCoD,KAAK2xB,YACL,IAAI9vB,EAAa7B,KAAK4zB,4BAQtB,OAPA3K,EAAO,CACH7oB,KAAMlG,EAAUsmB,qBAChBvc,SAAUA,EACV+pB,SAAUnsB,EAAWmhB,MACrBzE,eAAgB1c,EAAW0c,eAC3BC,qBAAsB3c,EAAW2c,sBAUzC,OANIyK,EAAO,CACH7oB,KAAMlG,EAAUY,aAChBmJ,SAAUA,GAGlBjE,KAAK2xB,YACE3xB,KAAK41B,sBAAsB3M,GACtC,KAAK/uB,EAAUW,YAMX,OALAouB,EAAO,CACH7oB,KAAMlG,EAAUW,YAChBoJ,SAAUA,GAEdjE,KAAK2xB,YACE3xB,KAAK41B,sBAAsB3M,GACtC,KAAK/uB,EAAUa,WACX,OAAOiF,KAAK41B,sBAAsB51B,KAAKi2B,YAC3C,KAAK/7B,EAAUG,gBACf,KAAKH,EAAUO,aACf,KAAKP,EAAUI,sBACf,KAAKJ,EAAUM,eACf,KAAKN,EAAUK,gBACX0uB,EAAO,CACH7oB,KAAMlG,EAAUya,aAChB1Q,SAAUjE,KAAK+xB,qBACf3C,aAAcpvB,KAAKywB,GACnBjrB,SAAUxF,KAAKqxB,IAAIl4B,OAEvB,IAAI+8B,EAAmBl2B,KAAKywB,IAAMv2B,EAAUM,eAG5C,OAFAwF,KAAK2xB,YAEDuE,EAAyBl2B,KAAK41B,sBAAsB3M,GAEjDA,EACX,KAAK/uB,EAAUqC,YAQX,OAPA0sB,EAAO,CACH7oB,KAAMlG,EAAUya,aAChB1Q,SAAUjE,KAAK+xB,qBACf3C,aAAcl1B,EAAUqC,YACxBiJ,SAAU,MAEdxF,KAAK2xB,YACE1I,EACX,KAAK/uB,EAAUE,WAEX,IAAI+7B,EAAsBn2B,KAAKqxB,IAAIl4B,MAC/B+5B,EAAYlzB,KAAK+xB,qBAIrB,GAFA/xB,KAAK2xB,YAED3xB,KAAKywB,IAAMv2B,EAAU0C,YAAa,CAClC,IAAI,EAAaoD,KAAK4zB,4BAClBpV,EAAuB,EAAWA,qBAEtCyK,EAAO,CACH7oB,KAAMlG,EAAU4a,WAChB7Q,SAAUivB,EACV1U,qBAAsBA,EACtBwP,SAAU,EAAWhL,MACrBppB,OAAQqvB,EACR7uB,WAAY+7B,EACZ5X,eAAgB,EAAWA,qBAG/B0K,EAAO,CACH7oB,KAAMlG,EAAUE,WAChBA,WAAY+7B,EACZlyB,SAAUA,GAIlB,OAAOjE,KAAK41B,sBAAsB3M,GACtC,QAEI,OADAjpB,KAAKkd,UAAU,yFAA2Fld,KAAKqxB,IAAIl4B,OAC5G,QAzmCvB,yCAmnCQ,IAAI8K,EAAWjE,KAAK+xB,qBAIpB,GAFA/xB,KAAK2xB,YAED3xB,KAAKywB,IAAMv2B,EAAUE,YAAc4F,KAAK+c,GAAG,GAAG0T,IAAMv2B,EAAU2C,cAC9DmD,KAAK0wB,sBAAsB9rB,QAAQ5E,KAAK+c,GAAG,GAAG0T,IAAM,EAAG,CAEvD,IAAInJ,EAAatnB,KAAKyzB,YAClBP,EAAYlzB,KAAK+xB,qBACrB9tB,EAASlC,OAASmxB,EAAU5pB,OAASrF,EAASqF,OAAS,EAEvDtJ,KAAK0yB,OAAOx4B,EAAU2C,cAAc,GAEpC,IAAIwqB,EAAarnB,KAAK40B,0BAEtB,MAAO,CACHx0B,KAAMlG,EAAUglB,UAChBjb,SAAUA,EACVqjB,WAAYA,EACZD,WAAYA,GAMhB,IAAI4B,EAAOjpB,KAAKszB,YACZ9U,EAAuBxe,KAAK+xB,qBAGhC,OAFA/xB,KAAK0yB,OAAOx4B,EAAU2C,cAAc,GAEhCmD,KAAKq1B,WAAWpM,GACTA,EAGsB,CAC7BhlB,SAAUua,EACVpe,KAAMlG,EAAU2C,aAChBqqB,mBAAoB+B,KAvpCpC,iCAmqCQjpB,KAAK2xB,YACL,IAAI1tB,EAAWjE,KAAK+xB,qBAEpB,GAAI/xB,KAAK0yB,OAAOx4B,EAAUE,YAAY,GAAQ,CAC1C,IAAIA,EAAqB4F,KAAKqxB,IAAIl4B,MAC9Bi9B,EAAqBp2B,KAAK+xB,qBAC9B/xB,KAAK2xB,YAGL,IAAI0E,EAAoC,KAExC,GAAIr2B,KAAKywB,IAAMv2B,EAAU2D,MAAO,CAE5Bw4B,EAAwB,GACxB,IAAIvB,GAAiB,EAIrB,IAHA90B,KAAK2xB,YAGGmD,GAAS90B,KAAKywB,IAAMv2B,EAAUE,aAAiB06B,GAAS90B,KAAKywB,IAAMv2B,EAAU+E,OAE5E61B,GAAO90B,KAAK2xB,YAEjBmD,GAAQ,EAERuB,EAAsBryB,KAAKhE,KAAKyzB,aAIpCzzB,KAAK0yB,OAAOx4B,EAAU4D,SACc,GAAhCu4B,EAAsBt0B,SAAas0B,EAAwB,MAGnE,GAAIr2B,KAAKywB,IAAMv2B,EAAU4C,mBAAqBkD,KAAKywB,IAAMv2B,EAAUgD,uBAAwB,CAEvF,IAAIo5B,EAAqB,CACrBl2B,KAAMlG,EAAUkG,KAChB6D,SAAUA,EACVsyB,eAAgB,EAChBn8B,WAAYA,EACZi8B,sBAAuBA,GAE3Br2B,KAAK2wB,UAAU3sB,KAAKsyB,GAIpB,IAFA,IAAIxO,EAA2B,GAExB9nB,KAAKywB,IAAMv2B,EAAU4C,mBAAqBkD,KAAKywB,IAAMv2B,EAAUgD,wBAClEo5B,EAASC,iBAGLv2B,KAAKywB,IAAMv2B,EAAUgD,wBACrB4qB,EAAa9jB,KAAK,MAClBhE,KAAK2xB,cAEL3xB,KAAK2xB,YACL7J,EAAa9jB,KAAKhE,KAAKszB,aACvBtzB,KAAK0yB,OAAOx4B,EAAU6C,oBAAoB,IAKlD,IAAI6gB,EAAiB,KAcrB,OAZI5d,KAAKywB,IAAMv2B,EAAU8C,mBACrB4gB,EAAiB5d,KAAKw2B,kBAAkBF,IAGX,CAC7Bl2B,KAAMlG,EAAU0sB,SAChB3iB,SAAUA,EACVgkB,UAAWqO,EACXxO,aAAcA,EACdlK,eAAgBA,GAMjB,GAAI5d,KAAKywB,IAAMv2B,EAAU0C,YAAa,CACzC,IAAIiF,EAAa7B,KAAK4zB,4BAElBnH,EAAsB,CACtBrsB,KAAMlG,EAAUkG,KAChB6D,SAAUmyB,EACVG,eAAgB,EAChBn8B,WAAYA,EACZi8B,sBAAuBA,GAK3B,OAFAr2B,KAAK2wB,UAAU3sB,KAAKyoB,GAEb,CACHrsB,KAAMlG,EAAU8rB,UAChB/hB,SAAUA,EACVwoB,UAAWA,EACXK,oBAAqBjrB,EAAWmhB,MAChCxE,qBAAsB3c,EAAW2c,qBACjCD,eAAgB1c,EAAW0c,gBAG/Bve,KAAKkd,UAAU,oGAAqG,QAASld,KAAK+xB,sBAI1I,OAAO,OA1wCf,wCA6wCsB9J,GAGd,IAAIjF,EAAgD,GAChD/e,EAAWjE,KAAK+xB,qBAChBlK,EAAY,KAGhB,GADA7nB,KAAK0yB,OAAOx4B,EAAU8C,kBAAkB,GACpCgD,KAAKywB,IAAMv2B,EAAU+C,kBAGrB,IADA,IAAI63B,GAAQ,EACLA,GAAS90B,KAAKywB,IAAMv2B,EAAU+E,OAAO,CACxC,IAAIi0B,EAAYlzB,KAAK+xB,qBAEhB+C,GACD90B,KAAK2xB,YAETmD,GAAQ,EAER,IAAI2B,OAAoB,EACxB,GAAIz2B,KAAKywB,IAAMv2B,EAAU8C,iBAAkB,CACvC,IAAImiB,EAAoB,CACpB/e,KAAMlG,EAAUkG,KAChB6D,SAAUjE,KAAK+xB,qBACfwE,eAAgBtO,EAAUsO,eAAiB,EAC3Cn8B,WAAY6tB,EAAU7tB,YAE1B4F,KAAK2wB,UAAU3sB,KAAKmb,GACpB,IAAIuX,EAAK12B,KAAKw2B,kBAAkBrX,GAChCsX,EAAeC,EAAG7O,UAAY,EAC9B7E,EAAMhf,KAAK0yB,QAEX1T,EAAMhf,KAAKhE,KAAKszB,aAChBmD,EAAe,EAGF,MAAb5O,GACIA,GAAa4O,GACbz2B,KAAKkd,UAAU,yCAA2CuZ,EAAe,GAAK,iEAAmE5O,EAAY,GAAK,KAAM,QAASqL,GAGzLrL,EAAY4O,EAgBpB,OAVAz2B,KAAK0yB,OAAOx4B,EAAU+C,mBAAmB,GAEN,CAC/BmD,KAAMlG,EAAUwsB,oBAChBziB,SAAUA,EACVgkB,UAAWA,EACXJ,UAAWA,EACX7E,MAAOA,KAn0CnB,kDA60CQ,GADAhjB,KAAK2xB,YACD3xB,KAAKywB,IAAMv2B,EAAU2C,aAAc,CACnC,IAAI2hB,EAAuBxe,KAAK+xB,qBAEhC,OADA/xB,KAAK2xB,YACE,CAAEnT,qBAAsBA,EAAsBwE,MAAO,GAAIzE,eAAgB,IAMpF,IAHA,IAAI1c,EAAyB,GACzB0c,EAAiC,KAExB,CACT,IAAIwE,EAAM/iB,KAAK+iB,IAEX4T,EAAY32B,KAAKszB,YAKrB,GAJiB,MAAbqD,GACA90B,EAAWmC,KAAK2yB,GAGhB32B,KAAKywB,IAAMv2B,EAAU+E,MACrB,MAEAsf,EAAeva,KAAKhE,KAAK+xB,sBACzB/xB,KAAK2xB,YAIL3xB,KAAK+iB,KAAOA,GACZ/iB,KAAK2xB,YAKb,IAAI1tB,EAAWjE,KAAK+xB,qBAGpB,MAAO,CAAEvT,qBAFexe,KAAK0yB,OAAOx4B,EAAU2C,cAAc,GAEToH,EAAW,KAAM+e,MAAOnhB,EAAY0c,eAAgBA,KA/2C/G,4CAm3C0B0K,GAElB,GAAY,MAARA,EAAc,OAAO,KAEzB,KAAOjpB,KAAKmyB,WAAW,CAACj4B,EAAUiD,IAAKjD,EAAU4C,qBAC7C,GAAIkD,KAAKywB,IAAMv2B,EAAUiD,IAAK,CAI1B,GAFA6C,KAAK2xB,YAED3xB,KAAKywB,IAAMv2B,EAAUE,WAErB,OADA4F,KAAKkd,UAAU,oFAAsFld,KAAKqxB,IAAIl4B,OACvG8vB,EAGX,IAAI7uB,EAAqB4F,KAAKqxB,IAAIl4B,MAC9B8K,EAAWjE,KAAK+xB,qBAGpB,GAFA/xB,KAAK2xB,YAED3xB,KAAKywB,IAAMv2B,EAAU0C,YAAa,CAClC,IAAIiF,EAAa7B,KAAK4zB,4BACtB3K,EAAO,CACH7oB,KAAMlG,EAAU4a,WAChB7Q,SAAUA,EACVua,qBAAsB3c,EAAW2c,qBACjCwP,SAAUnsB,EAAWmhB,MACrBppB,OAAQqvB,EACR7uB,WAAYA,EACZmkB,eAAgB1c,EAAW0c,qBAG/B0K,EAAO,CACH7oB,KAAMlG,EAAUsnB,cAChBvd,SAAUA,EACV7J,WAAYA,EACZR,OAAQqvB,OAIb,CAEH,IAAI,EAAWA,EAAKhlB,SACpBjE,KAAK2xB,YACL,IAAI1vB,EAAQjC,KAAKszB,YACbsD,EAAc52B,KAAK+xB,qBACnBmB,EAA0Bt6B,OAAOwqB,OAAO,GAAI,GAChDpjB,KAAK0yB,OAAOx4B,EAAU6C,oBAAoB,GACtC65B,EAAYvtB,MAAQ,EAASA,KAC7B6pB,EAAUnxB,OAAS60B,EAAYttB,OAASstB,EAAY70B,OAASmxB,EAAU5pB,OAEvE4pB,EAAY0D,EAEhB3N,EAAO,CACH7oB,KAAMlG,EAAUwrB,mBAChBzhB,SAAUivB,EACVjxB,MAAOA,EACPrI,OAAQqvB,GAMpB,OAAOA,IAh7Cf,+CAm7C6B7oB,GAErB,IAAIU,GAAU,EAUd,GATId,KAAKywB,IAAMv2B,EAAUsC,eACrBsE,GAAU,EACVd,KAAK2xB,aAGG,MAARvxB,IACAA,EAAOJ,KAAKyzB,aAGbzzB,KAAKywB,IAAMv2B,EAAUE,WAEpB,OADA4F,KAAKkd,UAAU,2DAA4D,QAASld,KAAK+xB,sBAClF,KAGX,IAAI33B,EAAqB4F,KAAKqxB,IAAIl4B,MAC9B8K,EAAWjE,KAAK+xB,qBACpB/xB,KAAK2xB,YAEL,IAAI/T,EAA2B,KAc/B,OAXI5d,KAAKywB,IAAMv2B,EAAUiE,aACrB6B,KAAK2xB,YAGD/T,EADAxd,EAAKm2B,eAAiB,GAAKv2B,KAAKywB,IAAMv2B,EAAU8C,iBAC/BgD,KAAKw2B,kBAAkBp2B,GAEvBJ,KAAKszB,aAK1BtzB,KAAKywB,IAAMv2B,EAAUuF,iBAA2B,MAARW,GAA8B,MAAdhG,EAA2B,KAEhF,CACHgG,KAAMlG,EAAUusB,yBAChBxiB,SAAUA,EACV7J,WAAYA,EACZsuB,aAActoB,EACdwd,eAAgBA,EAChB9c,QAASA,KA99CrB,kCAy+CQ,IAAI1G,EAAqB4F,KAAKqxB,IAAIl4B,MAC9B8K,EAAWjE,KAAK+xB,qBACpB/xB,KAAK2xB,YAEL,IAAI0E,EAAoC,KAExC,GAAIr2B,KAAKywB,IAAMv2B,EAAU2D,MAAO,CAE5Bw4B,EAAwB,GACxB,IAAIvB,GAAiB,EAIrB,IAHA90B,KAAK2xB,YAGGmD,GAAS90B,KAAKywB,IAAMv2B,EAAUE,aAAiB06B,GAAS90B,KAAKywB,IAAMv2B,EAAU+E,OAE5E61B,GAAO90B,KAAK2xB,YAEjBmD,GAAQ,EAERuB,EAAsBryB,KAAKhE,KAAKyzB,aAIpCzzB,KAAK0yB,OAAOx4B,EAAU4D,SAK1B,IADA,IAAIy4B,EAAiB,EACdv2B,KAAKywB,IAAMv2B,EAAUgD,wBACxBq5B,IACAtyB,EAASlC,QAAU,EACnB/B,KAAK2xB,YAGT,IAAI2E,EAAqB,CACrBl2B,KAAMlG,EAAUkG,KAChB6D,SAAUA,EACVsyB,eAAgBA,EAChBn8B,WAAYA,EACZi8B,sBAAuBA,GAK3B,OAFAr2B,KAAK2wB,UAAU3sB,KAAKsyB,GAEbA,IArhDf,6CA4hDQ,IAAIlF,EAAgBpxB,KAAKqxB,IAAID,cACzByF,EAAY72B,KAAK82B,mBAErB,IAAK92B,KAAKmyB,WAAWP,EAAOmF,aAExB,OADA/2B,KAAKkd,UAAU,6DAA+Dld,KAAKqxB,IAAIl4B,OAChF,KAGX,IAAIszB,EAAYzsB,KAAKywB,GAGrB,GAFAzwB,KAAK2xB,YAED3xB,KAAK0yB,OAAOx4B,EAAUE,YAAY,GAAQ,CAE1C,IAAIA,EAAqB4F,KAAKqxB,IAAIl4B,MAC9B8K,EAAWjE,KAAK+xB,qBACpB/xB,KAAK2xB,YAEL,IAAIqF,EAAsC,GAEtCh3B,KAAKywB,IAAMv2B,EAAU2D,QACrBm5B,EAAiBh3B,KAAKi3B,gCAG1B,IAAIC,EAAoBl3B,KAAKm3B,uBAAuB1K,GAAavyB,EAAUc,kBAE3E,GAAIyxB,GAAavyB,EAAUe,YACvB,OAAO+E,KAAKo3B,UAAUh9B,EAAY88B,EAAmBjzB,EAAU4yB,EAAUh2B,WAAYuwB,GAGzF,IAAI1e,EAAY1S,KAAK+xB,qBACrB,GAAI/xB,KAAK0yB,OAAOx4B,EAAU8C,kBAAkB,GAAO,CAE/C,IAAIq6B,EAAuBr3B,KAAKs3B,eAAe7K,EAAWryB,GACtDuY,EAAU3S,KAAKo0B,uBAEnB,OADAp0B,KAAK0yB,OAAOx4B,EAAU+C,mBAAmB,GACjCwvB,GAEJ,KAAKvyB,EAAUU,aAAc,MAAO,CAChCwF,KAAMlG,EAAUU,aAChBqJ,SAAUA,EACVyO,UAAWA,EACXC,QAASA,EACTvY,WAAYA,EACZiJ,WAAYg0B,EAAqBh0B,WACjC2C,QAASqxB,EAAqBrxB,QAC9B7E,WAAY01B,EAAU11B,WACtBN,WAAYg2B,EAAUh2B,WACtB8L,QAASuqB,EAAkBvqB,QAC3B9G,WAAYqxB,EAAkBrxB,WAC9BmxB,eAAgBA,EAChB5F,cAAeA,GAGnB,KAAKl3B,EAAUc,iBAAkB,MAAO,CACpCoF,KAAMlG,EAAUc,iBAChBiJ,SAAUA,EACV7J,WAAYA,EACZsY,UAAWA,EACXC,QAASA,EACT3M,QAASqxB,EAAqBrxB,QAC9BgxB,eAAgBA,EAChBrqB,QAASuqB,EAAkBrxB,WAC3BurB,cAAeA,QA1lDvC,qDAqmDgC,WAEpB4F,EAAsC,GAEtCO,EAAgB,GAEpBv3B,KAAK0yB,OAAOx4B,EAAU2D,OAAO,GAG7B,IAFA,IAAIi3B,GAAiB,EAPG,aAWfA,GAAO,EAAKpC,OAAOx4B,EAAU+E,OAAO,GAEzC,IAAIu4B,EAAwB,CACxBp3B,KAAMlG,EAAUu9B,cAChBxzB,SAAU,EAAK8tB,qBACf33B,WAAoB,EAAKi3B,IAAIl4B,MAC7BwT,QAAS,KACT9G,WAAY,MAGoB,MAAhC0xB,EAAcC,EAAGp9B,aACjB,EAAK8iB,UAAU,8DAGnBqa,EAAcC,EAAGp9B,aAAc,EAE/B,EAAKu3B,YAEL,IAAIuF,EAAoB,EAAKQ,2BAE7BF,EAAG7qB,QAAUuqB,EAAkBvqB,QAEb,MAAd6qB,EAAG7qB,SAAmB6qB,EAAG7qB,QAAQ4pB,eAAiB,GAClD,EAAKrZ,UAAU,kCAAoCsa,EAAGp9B,WAAa,0BAGvEo9B,EAAG3xB,WAAaqxB,EAAkBrxB,WAElC2xB,EAAG3xB,WAAWiL,SAAQ,SAAC6mB,GACfA,EAAGpB,eAAiB,GACpB,EAAKrZ,UAAU,kCAAoCsa,EAAGp9B,WAAa,6BAI3E06B,GAAQ,EAERkC,EAAehzB,KAAKwzB,IAtChB1C,GAAS90B,KAAKywB,IAAMv2B,EAAUE,aAAiB06B,GAAS90B,KAAKywB,IAAMv2B,EAAU+E,OAAQ,IA4C7F,OAFAe,KAAK0yB,OAAOx4B,EAAU4D,SAAS,GAExBk5B,IA1pDf,gCA6pDc58B,EAAoB88B,EAG3BjzB,EAAwBpD,EAAwBuwB,GAEd,MAA7B8F,EAAkBvqB,SAClB3M,KAAKkd,UAAU,qDAEfga,EAAkBrxB,WAAW9D,OAAS,GACtC/B,KAAKkd,UAAU,gDAGnB,IAAIxK,EAAY1S,KAAK+xB,qBACrB,GAAI/xB,KAAK0yB,OAAOx4B,EAAU8C,kBAAkB,GAAO,CAE/C,IAAI2U,EAA0B3R,KAAK43B,kBAE/BP,EAAuBr3B,KAAKs3B,eAAep9B,EAAUe,YAAab,GAElEuY,EAAU3S,KAAKo0B,uBAKnB,OAHAp0B,KAAK0yB,OAAOx4B,EAAU+C,mBAAmB,GAGlC,CACHmD,KAAMlG,EAAUe,YAChBgJ,SAAUA,EACVyO,UAAWA,EACXC,QAASA,EACTtP,WAAYg0B,EAAqBh0B,WACjC2C,QAASqxB,EAAqBrxB,QAC9B5L,WAAYA,EACZuX,OAAQA,EACR9Q,WAAYA,EACZuwB,cAAeA,GAKvB,OAAO,OApsDf,wCA+sDQ,IALA,IAAIzf,EAA0B,GAE1BoR,EAAc,EACd+R,GAAiB,EAEbA,GAAS90B,KAAKywB,IAAMv2B,EAAUE,YAAe4F,KAAKywB,IAAMv2B,EAAU+E,OAAO,CAK7E,GAJA8jB,EAAM/iB,KAAK+iB,IACN+R,GAAO90B,KAAK2xB,YACjBmD,GAAQ,EAEJ90B,KAAK0yB,OAAOx4B,EAAUE,YAAY,GAAQ,CAE1C,IAAIA,EAAqB4F,KAAKqxB,IAAIl4B,MAC9B8K,EAAWjE,KAAK+xB,qBACpB/xB,KAAK2xB,YACL,IAAIvT,EAAoC,KAEpCG,EAAiC,GACjCC,EAAqC,KAEzC,GAAIxe,KAAKywB,IAAMv2B,EAAU0C,YAAa,CAClC,IAAI+2B,EAAM3zB,KAAK4zB,4BACfxV,EAAwBuV,EAAI3Q,MAC5BzE,EAAiBoV,EAAIpV,eACrBC,EAAuBmV,EAAInV,qBAG/B7M,EAAO3N,KAAK,CACR5D,KAAMlG,EAAUmkB,cAChBD,sBAAuBA,EACvBhkB,WAAYA,EACZ6J,SAAUA,EACVsa,eAAgBA,EAChBC,qBAAsBA,IAK1Bxe,KAAK+iB,KAAOA,GACZ/iB,KAAK2xB,YAQb,OAJI3xB,KAAKywB,IAAMv2B,EAAU4E,WACrBkB,KAAK2xB,YAGFhgB,IAzvDf,qCA6vDmB8a,EAAsBoL,GAOjC,IAHA,IAAI7xB,EAAmC,GACnC3C,EAAyC,GAIrCrD,KAAKywB,IAAMv2B,EAAU+C,mBAAqB+C,KAAKywB,IAAMv2B,EAAUuF,iBAF1D,CAMT,IAAI2xB,EAAuBpxB,KAAKqxB,IAAID,cAEhC0G,EAAa,KACd93B,KAAKywB,IAAMv2B,EAAUiF,KACpB24B,EAAa93B,KAAKqxB,IAAIl4B,OAE1B,IAAI09B,EAAY72B,KAAK82B,mBAEjB11B,GAAgB,EAChB6C,EAAWjE,KAAK+xB,qBAEhB/xB,KAAKywB,IAAMv2B,EAAUE,YAAsB4F,KAAKqxB,IAAIl4B,OAAS0+B,GAAa73B,KAAK+c,GAAG,GAAG0T,IAAMv2B,EAAU0C,cACrGwE,GAAgB,GAGpB,IAAIhB,EAAOJ,KAAKyzB,YAEhB,GAAIryB,GAAiBpB,KAAK0yB,OAAOx4B,EAAUE,YAAY,GAAQ,CAE3D,IAAIA,EAAay9B,EASjB,GAPKz2B,IACD6C,EAAWjE,KAAK+xB,qBAEhB33B,EAAqB4F,KAAKqxB,IAAIl4B,MAC9B6G,KAAK2xB,aAGL3xB,KAAKywB,IAAMv2B,EAAU0C,YAAa,CAE9BwE,GAAiBqrB,GAAavyB,EAAUe,aAAe47B,EAAUh2B,YAAc2C,EAAW0I,SAC1FlM,KAAKkd,UAAU,8CAA+C,QAASjZ,GAG3E,IAAIpC,EAA8B7B,KAAK+3B,mCAEnC1zB,OAAqB,EACrBqO,EAA0B1S,KAAK+xB,qBAC/Bpf,EAAwBD,EAE5B,GAAImkB,EAAU11B,WACVnB,KAAK0yB,OAAOx4B,EAAU4E,WAAW,GAC7BsC,GACApB,KAAKkd,UAAU,4CAA6C,QAASjZ,GAEzEI,EAAa,QAKb,GAHAqO,EAAY1S,KAAK+xB,qBACjB1tB,EAAarE,KAAKsyB,iBAClB3f,EAAU3S,KAAKo0B,uBACG,MAAd/vB,GAAsBA,EAAWtC,OAAS,GAAKsC,EAAW,GAAGjE,MAAQlG,EAAUomB,UAAW,CAC1F,IAAIA,EAAuBjc,EAAW,GACtCqO,EAAY4N,EAAUrc,SACtB0O,EAAU2N,EAAUrG,WAK5BjU,EAAQhC,KAAK,CACT5D,KAAMlG,EAAU89B,kBAChB59B,WAAYA,EACZ6J,SAAUA,EACVyO,UAAWA,EACXC,QAASA,EACT9Q,WAAYA,EACZwC,WAAYA,EACZxD,WAAYg2B,EAAUh2B,WACtBM,WAAY01B,EAAU11B,YAAcsrB,GAAavyB,EAAUc,iBAC3D4F,SAAUi2B,EAAUj2B,SACpBQ,cAAeA,EACfH,WAAYb,EACZ03B,WAAYA,EACZG,YAAapB,EAAUoB,YACvB7G,cAAeA,QAGhB,CAECh3B,GAAcy9B,GACd73B,KAAKkd,UAAU,gBAAkB2a,EAAY,yDAA0D,QAAS5zB,GAGpH,IAAI2Z,EAA2B,KAE3B5d,KAAKywB,IAAMv2B,EAAUiE,aACrB6B,KAAK2xB,YAGD/T,EADAxd,EAAKm2B,eAAiB,GAAKv2B,KAAKywB,IAAMv2B,EAAU8C,iBAC/BgD,KAAKw2B,kBAAkBp2B,GAEvBJ,KAAKszB,aAI9BtzB,KAAK0yB,OAAOx4B,EAAU4E,WAEtBuE,EAAWW,KAAK,CACZ5D,KAAMlG,EAAUg+B,qBAChB99B,WAAYA,EACZ6J,SAAUA,EACV2d,cAAexhB,EACfQ,SAAUi2B,EAAUj2B,SACpBE,QAAS+1B,EAAU/1B,QACnBD,WAAYg2B,EAAUh2B,WACtB+c,eAAgBA,EAChBka,WAAYA,EACZG,YAAapB,EAAUoB,YACvB7G,cAAeA,IAGf3E,GAAavyB,EAAUc,kBACvBgF,KAAKkd,UAAU,+CAAgD,QAASjZ,KAWxF,MAAO,CAAE+B,QAASA,EAAS3C,WAAYA,KAp4D/C,yDA24DQ,IAAIxB,EAA8B,GAGlC,GAFA7B,KAAK2xB,YAED3xB,KAAKywB,IAAMv2B,EAAU2C,aAErB,OADAmD,KAAK2xB,YACE,GAKX,IAFA,IAAI3yB,GAAW,IAEF,CACLA,GACAgB,KAAKkd,UAAU,sEAEnB,IAAIpc,EAAUd,KAAKywB,IAAMv2B,EAAUsC,aAE/BsE,GAASd,KAAK2xB,YAElB,IAAIvxB,EAAiBJ,KAAKyzB,YAQ1B,IANAz0B,EAAWgB,KAAKywB,IAAMv2B,EAAU8E,YAE5BgB,KAAK2xB,YACLvxB,EAAKm2B,kBAGLv2B,KAAK0yB,OAAOx4B,EAAUE,YAAY,GAAQ,CAC1C,IAAIA,EAAqB4F,KAAKqxB,IAAIl4B,MAClC0I,EAAWmC,KAAK,CACZ5D,KAAMlG,EAAUi+B,qBAChBl0B,SAAUjE,KAAK+xB,qBACf33B,WAAYA,EACZg+B,cAAeh4B,EACfU,QAASA,EACTkB,WAAYhD,IAEhBgB,KAAK2xB,YAET,GAAI3xB,KAAKywB,IAAMv2B,EAAU+E,MACrB,MAEJe,KAAK2xB,YAKT,OAFA3xB,KAAK0yB,OAAOx4B,EAAU2C,cAAc,GAE7BgF,IAz7Df,6CA67D2Bw2B,GAKnB,IALuC,WAEnCC,EAAqB,KACrBC,EAA0B,GAExBv4B,KAAKmyB,WAAW,CAACj4B,EAAUuB,eAAgBvB,EAAUwB,qBAYvD,GAXIsE,KAAKmyB,WAAWj4B,EAAUuB,kBAAoB48B,IAC/B,MAAZC,GACCt4B,KAAKkd,UAAU,uHAAwH,QAASob,EAASr0B,UAE7JjE,KAAK2xB,YAEW,OADhB2G,EAAWt4B,KAAKyzB,cACQ6E,EAAS/B,eAAiB,GAC9Cv2B,KAAKkd,UAAU,qDAAsD,QAASob,EAASr0B,YAIzFo0B,GAAer4B,KAAKmyB,WAAWj4B,EAAUwB,oBAAwB28B,GAAer4B,KAAKmyB,WAAWj4B,EAAUuB,gBAAkB,CAC3H88B,EAAYx2B,OAAS,GACpB/B,KAAKkd,UAAU,gIAAiI,WAEpJld,KAAK2xB,YAEL,IADA,IAAImD,GAAQ,EACJA,GAAS90B,KAAKywB,IAAMv2B,EAAUE,aAAiB06B,GAAS90B,KAAKywB,IAAMv2B,EAAU+E,OAC5E61B,GAAO90B,KAAK2xB,YACjBmD,GAAQ,EACRyD,EAAYv0B,KAAKhE,KAAKyzB,aAWlC,OANA8E,EAAYznB,SAAQ,SAAC6mB,GACbA,EAAGpB,eAAiB,GACpB,EAAKrZ,UAAUya,EAAGv9B,WAAa,0FAIhC,CACHuS,QAAS2rB,EAAUzyB,WAAY0yB,KAn+D3C,iDAy+DQ,IAAID,EAAqB,KACrBC,EAA0B,GAO9B,IALIv4B,KAAKmyB,WAAWj4B,EAAUuB,kBAC1BuE,KAAK2xB,YACL2G,EAAWt4B,KAAKyzB,aAGbzzB,KAAKmyB,WAAWj4B,EAAUuE,YAC7BuB,KAAK2xB,YACL4G,EAAYv0B,KAAKhE,KAAKyzB,aAG1B,MAAO,CACH9mB,QAAS2rB,EAAUzyB,WAAY0yB,KAv/D3C,yCAsgEQ,IARA,IAAI13B,EAAa2C,EAAW2C,OACxBhF,GAAa,EACbP,GAAW,EACXE,GAAU,EACVm3B,GAAc,EAEdO,GAAO,GAEHA,GAEJ,OAAQx4B,KAAKywB,IACT,KAAKv2B,EAAUkB,cACXyF,EAAa2C,EAAW2C,OACxBnG,KAAK2xB,YACL,MACJ,KAAKz3B,EAAUoB,eACXuF,EAAa2C,EAAW0I,QACxBlM,KAAK2xB,YACL,MACJ,KAAKz3B,EAAUmB,iBACXwF,EAAa2C,EAAWyG,UACxBjK,KAAK2xB,YACL,MACJ,KAAKz3B,EAAUsB,cACXoF,GAAW,EACXZ,KAAK2xB,YACL,MACJ,KAAKz3B,EAAUiB,gBACXgG,GAAa,EACbnB,KAAK2xB,YACL,MACJ,KAAKz3B,EAAUsC,aACXsE,GAAU,EACVd,KAAK2xB,YACL,MACJ,KAAKz3B,EAAUqB,iBACX08B,GAAc,EACdj4B,KAAK2xB,YACL,MACJ,QAAS6G,GAAO,EAKxB,MAAO,CAAEr3B,WAAYA,EAAYP,SAAUA,EAAUC,WAAYA,EAAYC,QAASA,EAASm3B,YAAaA,Q,6BA1iEpH,KAEW,GAAA1I,oBAAsB,CAACr1B,EAAUiE,WAAYjE,EAAUkE,eAAgBlE,EAAUmE,gBAAiBnE,EAAUoE,yBAA0BpE,EAAUqE,mBAAoBrE,EAAUsE,kBAE9K,GAAAqzB,mBAAoC,CAAC,GAAOtC,oBACnD,CAACr1B,EAAU2E,iBAAkB,CAAC3E,EAAU6E,OACxC,CAAC7E,EAAUyE,IAAK,CAACzE,EAAUwE,KAC3B,CAACxE,EAAUuC,kBAAmBvC,EAAU2D,MAAO3D,EAAU6D,aAAc7D,EAAU4D,QAAS5D,EAAU8D,eAAgB9D,EAAU+D,MAAO/D,EAAUgE,UAC/I,CAAChE,EAAUoD,KAAMpD,EAAUkD,OAAQ,CAAClD,EAAUqD,eAAgBrD,EAAUsD,SAAUtD,EAAUmD,SAGrF,GAAAo7B,0BAAA,SACFv+B,EAAUkB,cAAgBoI,EAAW2C,QADnC,MAEFjM,EAAUoB,eAAiBkI,EAAW0I,SAFpC,MAGFhS,EAAUmB,iBAAmBmI,EAAWyG,WAHtC,IAMA,GAAAyuB,qBAAuB,CAACx+B,EAAUkB,cAAelB,EAAUoB,eAAgBpB,EAAUmB,iBAAkBnB,EAAUgB,YACxHhB,EAAUE,WAAYF,EAAU+C,kBAAmB/C,EAAUsB,cAAetB,EAAUiB,gBACtFjB,EAAUU,aAAcV,EAAUe,YAAaf,EAAUc,kBAuPlD,GAAA+7B,YAA2B,CAAC78B,EAAUU,aAAcV,EAAUe,YAAaf,EAAUc,kBACrF,GAAA29B,iBAAgC,CAACz+B,EAAUoB,eAAgBpB,EAAUmB,iBAAkBnB,EAAUkB,eACjG,GAAAg3B,4BAA2C,GAAO2E,YAAYvvB,OAAO,GAAOmxB,kBAAkBnxB,OAAOtN,EAAUiB,iBAAiBqM,OAAO,GAAOuvB,aC5OnJ,SAAU6B,GAAW3+B,EAAW8H,GACpC,OAAO9H,EAAEoX,QACP,IAAIG,OAAJ,sBAA0BzP,EAA1B,wBAAgDA,EAAhD,SAA+D,KAAM,QAInE,SAAU82B,GAAuB5+B,GAAqC,IAA1B6+B,EAA0B,uDAAF,GACpEC,EAAe,GAEnB,GAAoB,iBAAVD,EACRC,EAAeD,OAEf,IAAI,IAAI5gC,EAAI,EAAGA,EAAI4gC,EAAQ5gC,IACzB6gC,GAAgB,IAOpB,OAHA9+B,EAAI2+B,GAAW3+B,EAAG,KACb8H,OAAS,IAAG9H,EAAI,KAAOA,GAC5BA,EAAI8+B,EAAe,MAAQ9+B,EAAEoX,QAAQ,MAAO,KAAO0nB,EAAe,OAAS,KAAOA,EAAe,MC0G7F,SAAUC,GAAkBC,GAE9B,OADAA,EAAWA,EAAS5nB,QAAQ,KAAM,IAAIF,OAC/BvC,OAAOO,SAAS8pB,G,uKCnKpB,IAAMC,GAAb,yB,4FAAA,S,UAAA,O,EAAA,E,EAAA,8BAuFsB,2BAEd,YAAiBA,EAAWC,OAA5B,+CAAmC,KAA3BC,EAA2B,QAC/BA,EAAMC,OAAS,IAAIC,KAAK,CAACC,IAAK,CAACH,EAAM5gB,KAAMghB,SAAS,IACpDN,EAAWO,SAASr2B,IAAIg2B,EAAM3gC,KAAM2gC,IAJ1B,qFAvFtB,2BAgGuB3gC,GACf,IAAIiiB,EAAgBwe,EAAWO,SAAS1gC,IAAIN,GACnC,MAANiiB,GACCA,EAAG2e,OAAOK,W,EAnGtB,O,6BAAA,KAEW,GAAAP,OAAsB,CACzB,CACI3gB,IAAK,8CACL/f,KAAM,+BACN0H,YAAa,8CAEjB,CACIqY,IAAK,kCACL/f,KAAM,mBACN0H,YAAa,kBAEjB,CACIqY,IAAK,0BACL/f,KAAM,WACN0H,YAAa,+BAEjB,CACIqY,IAAK,6BACL/f,KAAM,cACN0H,YAAa,2BAEjB,CACIqY,IAAK,+BACL/f,KAAM,gBACN0H,YAAa,mBAEjB,CACIqY,IAAK,6BACL/f,KAAM,cACN0H,YAAa,4CAEjB,CACIqY,IAAK,4BACL/f,KAAM,aACN0H,YAAa,+CAEjB,CACIqY,IAAK,8BACL/f,KAAM,eACN0H,YAAa,iBAEjB,CACIqY,IAAK,yBACL/f,KAAM,UACN0H,YAAa,+BAEjB,CACIqY,IAAK,+BACL/f,KAAM,gBACN0H,YAAa,sCAEjB,CACIqY,IAAK,uBACL/f,KAAM,QACN0H,YAAa,kBAEjB,CACIqY,IAAK,6BACL/f,KAAM,cACN0H,YAAa,qBAEjB,CACIqY,IAAK,sBACL/f,KAAM,OACN0H,YAAa,eAEjB,CACIqY,IAAK,yBACL/f,KAAM,UACN0H,YAAa,sDAEjB,CACIqY,IAAK,yBACL/f,KAAM,SACN0H,YAAa,mBAEjB,CACIqY,IAAK,yBACL/f,KAAM,SACN0H,YAAa,mBAId,GAAAs5B,SAAmC,IAAI35B,ICxF5C,SAAU65B,KACZ3xB,OAAOC,UAAUypB,SAAS,CAAE9vB,GAAI,SAChCg4B,WAAY,CAAC,gBAIb,IAAIC,EAA+C,CAC/CC,iBAAkB,CAEdC,sBAAuB,qBAEvBC,sBAAuB,iBAE3BC,aAAc,CACV,CAEIC,WAAY,qCACZC,UAAW,YACXC,OAAQ,CAAEC,aAAcryB,OAAOC,UAAUqyB,aAAaC,cAAeC,WAAY,QAErF,CAEIN,WAAY,qCACZE,OAAQ,CAAEC,aAAcryB,OAAOC,UAAUqyB,aAAaG,KAAMD,WAAY,QAE5E,CAEIN,WAAY,2CACZE,OAAQ,CAAEC,aAAcryB,OAAOC,UAAUqyB,aAAaG,KAAMD,WAAY,OAE5E,CAEIN,WAAY,0BACZE,OAAQ,CAAEC,aAAcryB,OAAOC,UAAUqyB,aAAaG,KAAMC,WAAY,IAE5E,CAEIR,WAAY,iCACZE,OAAQ,CAAEC,aAAcryB,OAAOC,UAAUqyB,aAAaG,KAAMC,WAAY,KAIhFC,YAAa,qFACbC,SAAU,CACNC,YAAa,KACbC,aAAc,CAAC,KAAM,OAEzBC,SAAU,CACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,MAEVC,iBAAkB,CACd,CAAEC,KAAM,IAAKC,MAAO,KACpB,CAAED,KAAM,IAAKC,MAAO,KACpB,CAAED,KAAM,IAAKC,MAAO,KACpB,CAAED,KAAM,IAAKC,MAAO,KACpB,CAAED,KAAM,IAAMC,MAAO,MAEzBC,iBAAkB,CACd,CAAEF,KAAM,IAAKC,MAAO,KACpB,CAAED,KAAM,IAAKC,MAAO,KACpB,CAAED,KAAM,IAAKC,MAAO,KACpB,CAAED,KAAM,IAAKC,MAAO,KACpB,CAAED,KAAM,IAAMC,MAAO,KACrB,CAAED,KAAM,IAAKC,MAAO,MAExBE,QAAS,CACLC,QAAS,CACLC,MAAO,IAAI9pB,OAAO,sDAClB+pB,IAAK,IAAI/pB,OAAO,2DAwH5BxJ,OAAOC,UAAUuzB,yBAAyB,SAAU3B,GAEpD7xB,OAAOC,UAAUwzB,yBAAyB,SArH3B,CACXC,aAAc,GACdC,aAAc,QACdC,SAAU,CACN,WAAY,WAAY,MAAO,SAAU,SAAU,UACnD,OAAQ,UAAW,eAAgB,UACnC,OAAQ,aAAc,YAAa,QACnC,SAAU,SAAU,SAAU,OAAQ,aAAc,SACpD,YAAa,QAAS,UAAW,MAAO,QACxC,SAAU,UAAW,WACrB,WAAY,QAAS,SAAU,QAAS,OAAQ,QAAS,QAE7DpU,MAAO,CAAC,QAAS,WACjBnjB,WAAY,CAAC,MAAO,QAAS,KAAM,OAAQ,OAAQ,KAAM,QAAS,YAClEw3B,MAAO,CAAC,MAAO,UAAW,OAAQ,QAAS,SAAU,OAAQ,OAAQ,OAAQ,QAC7E,QAAS,OAAQ,aACjBhH,UAAW,CACP,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAC9B,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAC1C,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACxC,KAAM,MAAO,KAAM,KAAM,KAAM,KAAM,KAAM,KAC3C,KAAM,KAAM,MAAO,MAAO,QAG9BiH,QAAS,wBACTC,QAAS,wEACTC,OAAQ,cACRC,YAAa,oBACbC,aAAc,oBACdC,UAAW,iCAEXC,UAAW,CACPC,KAAM,CAGF,CAAC,gCAAiC,CAC9BC,MAAO,CACH,YAAa,CAAErL,MAAO,cACtB,cAAe,CAAEA,MAAO,gBACxB,SAAU,CAAEA,MAAO,WACnB,SAAU,CAAEA,MAAO,YACnB,WAAY,YAGpB,CAAC,2BAA4B,CACzBqL,MAAO,CACH,YAAa,CAAErL,MAAO,cACtB,cAAe,CAAEA,MAAO,gBACxB,SAAU,CAAEA,MAAO,WACnB,WAAY,gBAGpB,CAAC,yBAA0B,SAE3B,CAAEsL,QAAS,eAEX,CAAC,aAAc,aACf,CAAC,mBAAoB,aACrB,CAAC,WAAY,CACTD,MAAO,CACH,aAAc,YACd,WAAY,MAIpB,CAAC,yBAA0B,cAE3B,CAAC,yCAA0C,gBAC3C,CAAC,oDAAqD,gBACtD,CAAC,yBAA0B,cAC3B,CAAC,uBAAwB,gBACzB,CAAC,4BAA6B,iBAC9B,CAAC,kBAAmB,gBACpB,CAAC,iBAAkB,UAEnB,CAAC,QAAS,aAEV,CAAC,kBAAmB,kBACpB,CAAC,IAAK,SAAU,WAEhB,CAAC,WAAY,UACb,CAAC,mBAAoB,CAAC,SAAU,gBAAiB,WACjD,CAAC,IAAK,mBAEVE,WAAY,CACR,CAAC,aAAc,IACf,CAAC,eAAgB,cAAe,YAChC,CAAC,OAAQ,UAAW,YACpB,CAAC,UAAW,YAEhBh9B,QAAS,CACL,CAAC,UAAW,WAGZ,CAAC,OAAQ,UAAW,QACpB,CAAC,QAAS,YAGdi9B,QAAS,CACL,CAAC,UAAW,eAEZ,CAAC,OAAQ,uBACT,CAAC,OAAQ,cAAe,QACxB,CAAC,QAAS,gBAEdC,OAAQ,CACJ,CAAC,UAAW,UACZ,CAAC,WAAY,iBACb,CAAC,MAAO,yBACR,CAAC,IAAK,SAAU,YCtL1B,SAAUC,GAAuBhP,GACQ,IAA3CmL,EAA2C,uDAA1B,GAAI8D,EAAsB,wDAE3C,GAAIjP,aAAmB,EAAO,CAE1B,GAAIA,EAAQhoB,eACR,OAAOk3B,GAA2BlP,GAGtC,IAAI1zB,EAAI,GA2BR,GAzB6B,MAAzB0zB,EAAQ5tB,eAAkD,IAAzB4tB,EAAQ5tB,gBACtC4tB,EAAQ5tB,cAAckR,WAAW,MAChChX,IAAM6+B,EAASnL,EAAQ5tB,eAAesR,QAAQ,MAAO,KAAOynB,GAAU,KAGtE7+B,GAAK4+B,GAAuBlL,EAAQ5tB,cAAe+4B,GAAU,MAI3C,MAAtBnL,EAAQ9sB,aAAoB5G,GAAKuJ,EAAWmqB,EAAQ9sB,YAAc,KAClE8sB,EAAQxsB,aAAYlH,GAAK,aAC7BA,GAAK,SAAW0zB,EAAQvzB,WAAa,IAEjCuzB,EAAQjoB,cAAc3D,OAAS,IAC/B9H,GAAK6iC,GAA8BnP,IAId,MAArBA,EAAQxqB,WAAqD,UAAhCwqB,EAAQxqB,UAAU/I,aAC/CH,GAAK,WAAa0zB,EAAQxqB,UAAU/I,WAAa,IAC7CuzB,EAAQxqB,UAAUuC,cAAc3D,OAAS,IACzC9H,GAAK6iC,GAA8BnP,EAAQxqB,aAIzB,MAAtBwqB,EAAQ9nB,YAAsB8nB,EAAQ9nB,WAAW9D,OAAS,EAAG,CAC7D9H,GAAK,cACL,IAAK,IAAI/B,EAAI,EAAGA,EAAIy1B,EAAQ9nB,WAAW9D,OAAQ7J,IAC3C+B,GAAK0zB,EAAQ9nB,WAAW3N,GAAGkC,WACvBuzB,EAAQ9nB,WAAW3N,GAAGwN,cAAc3D,OAAS,IAC7C9H,GAAK6iC,GAA8BnP,EAAQ9nB,WAAW3N,KAEtDA,EAAIy1B,EAAQ9nB,WAAW9D,OAAS,IAChC9H,GAAK,MAKjB,GAAI2iC,EAAO,OAAO3iC,EAElBA,GAAK6+B,EAAS,QAhDY,2BAkD1B,YAAcnL,EAAQ9lB,cAAcrE,EAAWyG,WAA/C,+CAA2D,KAAlD,EAAkD,QACvDhQ,GAAK6+B,EAAS,KAAO6D,GAAuB,EAAG,MAAQ,OAnDjC,kFAsD1B,GAA2B,MAAvBhP,EAAQvnB,YAAqB,4BAC7B,YAAcunB,EAAQvnB,YAAYyB,cAAcrE,EAAWyG,WAA3D,+CAAuE,KAA9D/C,EAA8D,QACnEjN,GAAK6+B,EAAS,KAAO6D,GAAuBz1B,EAAG,MAAQ,OAF9B,mFAtDP,2BA4D1B,YAAcymB,EAAQplB,WAAW/E,EAAWyG,WAA5C,+CAAwD,KAA/C,EAA+C,QACpDhQ,GAAK6+B,EAAS,KAAO6D,GAAuB,EAAG,MAAQ,OA7DjC,kFAgE1B,GAA2B,MAAvBhP,EAAQvnB,YAAqB,4BAC7B,YAAcunB,EAAQvnB,YAAYmC,WAAW/E,EAAWyG,WAAxD,+CAAoE,KAA3D3R,EAA2D,QAChE2B,GAAK6+B,EAAS,KAAO6D,GAAuBrkC,EAAG,MAAQ,OAF9B,mFASjC,OAFA2B,GAAK,MAMT,GAAI0zB,aAAmB,EAAW,CAE9B,IAAIoP,EAAO,GAgBX,GAd6B,MAAzBpP,EAAQ5tB,eAAkD,IAAzB4tB,EAAQ5tB,eAAwB68B,IAC9DjP,EAAQ5tB,cAAckR,WAAW,MAChC8rB,IAASjE,EAASnL,EAAQ5tB,eAAesR,QAAQ,MAAO,KAAOynB,GAAU,KAEzEiE,GAAQlE,GAAuBlL,EAAQ5tB,cAAe+4B,GAAU,MAIxEiE,GAAQjE,EAAS,aAAenL,EAAQvzB,WAEpCuzB,EAAQjoB,cAAc3D,OAAS,IAC/Bg7B,GAAQD,GAA8BnP,IAGnB,MAAnBA,EAAQhhB,SAAmBghB,EAAQhhB,QAAQ5K,OAAS,EAAG,CACvDg7B,GAAQ,WACR,IAAK,IAAI,EAAI,EAAG,EAAIpP,EAAQhhB,QAAQ5K,OAAQ,IACxCg7B,GAAQpP,EAAQhhB,QAAQ,GAAGvS,WACvBuzB,EAAQhhB,QAAQ,GAAGjH,cAAc3D,OAAS,IAC1Cg7B,GAAQD,GAA8BnP,EAAQhhB,QAAQ,KAEtD,EAAIghB,EAAQhhB,QAAQ5K,OAAS,IAC7Bg7B,GAAQ,MAKpB,IAAKH,EAAO,CAERG,GAAQ,MAFA,2BAIR,YAAcpP,EAAQplB,aAAtB,+CAAoC,KAA3B,EAA2B,QAChCw0B,GAAQjE,EAAS,KAAO6D,GAAuB,EAAG,MAAQ,OALtD,kFAQRI,GAAQ,MAGZ,OAAOA,EAIX,GAAIpP,aAAmBjtB,EAAW,CAC9B,IAAI,EAAI,GAkBR,OAhB6B,MAAzBitB,EAAQ5tB,eAAkD,IAAzB4tB,EAAQ5tB,eAAwB68B,IAC9DjP,EAAQ5tB,cAAckR,WAAW,MAChC,GAAK6nB,EAASnL,EAAQ5tB,cAAcsR,QAAQ,MAAO,KAAOynB,GAAU,KAEpE,GAAKD,GAAuBlL,EAAQ5tB,cAAe+4B,GAAU,MAIrE,GAAKA,EAEqB,MAAtBnL,EAAQ9sB,aAAoB,GAAK2C,EAAWmqB,EAAQ9sB,YAAc,KAElE8sB,EAAQ/sB,WAAU,GAAK,WAE3B,GAAK,GAAkB+sB,EAAQvtB,MAAQ,IAAMutB,EAAQvzB,WAKzD,GAAIuzB,aAAmB5sB,EAAQ,CAE3B,IAAI,EAAI,GAEqB,MAAzB4sB,EAAQ5tB,eAAkD,IAAzB4tB,EAAQ5tB,eAAwB68B,IAC9DjP,EAAQ5tB,cAAckR,WAAW,MAChC,GAAK6nB,EAASnL,EAAQ5tB,cAAcsR,QAAQ,MAAO,KAAOynB,GAAU,KAEpE,GAAKD,GAAuBlL,EAAQ5tB,cAAe+4B,GAAU,MAIrE,GAAKA,EAEqB,MAAtBnL,EAAQ9sB,aAAoB,GAAK2C,EAAWmqB,EAAQ9sB,YAAc,KAElE8sB,EAAQ/sB,WAAU,GAAK,WAEI,MAA3B+sB,EAAQzM,gBACR,GAAK,GAAkByM,EAAQzM,iBAAmB,IAElD,GAAKyM,EAAQvsB,cAAgB,GAAK,QAGtC,GAAKusB,EAAQvzB,WAAa,IAG1B,IADA,IAAIyH,EAAa8rB,EAAQtN,mBAAmBxe,WACnC,EAAI,EAAG,EAAIA,EAAWE,OAAQ,IAAK,CAExC,IAAI/H,EAAI6H,EAAW,GACfzB,EAAautB,EAAQngB,iBAAiB,GAEtCxT,EAAEgI,aACF5B,EAAmBA,EAAMgC,aAG7B,GAAK,GAAkBhC,IAASpG,EAAEgI,WAAa,MAAQ,IAAM,IAAMhI,EAAEI,WAEjE,EAAIyH,EAAWE,OAAS,IACxB,GAAK,MAOb,OAFA,GAAK,IAOT,MAAO,GAGX,SAAS86B,GAA2BlP,GAChC,IAAI1zB,EAAY0zB,EAAQvzB,WAGxB,GADIuzB,EAAQnnB,sBAAwB,KAAYvM,GAAK,YAAc,GAAkB0zB,EAAQnnB,uBACzFmnB,EAAQ9nB,WAAW9D,OAAS,EAAG,CAC/B,IAAIi7B,EAAWrP,EAAQ9nB,WAAWkE,QAAO,SAAAkzB,GAAI,OAAItP,EAAQnnB,qBAAqBX,WAAWjB,QAAQq4B,GAAQ,KACpGt6B,KAAI,SAAAs6B,GAAI,OAAI,GAAkBA,MAAOp6B,KAAK,MAC/B,IAAZm6B,IACA/iC,GAAK,eAAiB+iC,GAI9B,OAAO/iC,EAGL,SAAU,GAAkBmG,G,QAC9B,IAAIA,aAAgB,GAASA,aAAgB,IACrCA,EAAKsF,cAAc3D,OAAS,EAAG,CAC/B,IAAI9H,GAAamG,EAAI,eAAsBA,EAAKhG,WAAa,aAAuC,QAA5B,EAAGgG,EAAKoG,4BAAoB,eAAEpM,YAAcgG,EAAKhG,YACnH,IAEN,OADAH,GAAKmG,EAAKsF,cAAc/C,KAAI,SAAAC,GAAE,OAAI,GAAkBA,EAAGxC,SAAOyC,KAAK,OACxD,IAInB,OAAOzC,EAAI,eAAsBA,EAAKhG,WAAa,aAA0C,QAA/B,EAAGgG,EAAI,4BAAwB,eAAEhG,YAAcgG,EAAKhG,WAGhH,SAAU0iC,GAA8BnP,GAE1C,IAAI1zB,EAAY,GAEhB,GAAI0zB,EAAQjoB,cAAc3D,OAAS,EAAG,CAClC9H,EAAI,IAEJ,IAAIonB,EAAqB,GAHS,uBAIlC,IAJkC,IAIlC,EAJkC,iBAIzBze,EAJyB,QAK1BxJ,EAAYwJ,EAAGxC,KAAKhG,WACpBmM,EAAW3D,EAAGxC,KAIlB,GAH8B,MAA1BmG,EAAEC,sBAAqE,UAArCD,EAAEC,qBAAqBpM,aACzDhB,GAAK,YAAcmN,EAAEC,qBAAqBpM,YAE1B,MAAhBmM,EAAEV,WAAoB,CAEtB,IAAIm3B,EAAWz2B,EAAEV,WACa,MAA1BU,EAAEC,uBACFw2B,EAAWA,EAASjzB,QAAO,SAAAkzB,GAAI,OAAI12B,EAAEC,qBAAqBX,WAAWjB,QAAQq4B,GAAQ,MAJnE,2BAOtB,YAAeD,EAAf,+CAAyB,CACrB5jC,GAAK,MADgB,QACLgB,YARE,mFAW1BinB,EAASrd,KAAK5K,IAjBlB,EAAeu0B,EAAQjoB,cAAvB,+CAAsC,IAJJ,kFAwBlCzL,GAAKonB,EAASxe,KAAK,MACnB5I,GAAK,KAGT,OAAOA,E,uKCnQJ,IAAM,GAAb,WAkCI,WAAoBijC,I,4FAAc,SAAd,KAAAA,S,UAlCxB,O,EAAA,G,EAAA,oCAsCiBC,EAAiCl5B,EAA2BgtB,G,QAGjEmM,EAA8Bp9B,KAAKk9B,OAAOA,OAAOG,eAIrD,GAAgB,MAAbD,GACIA,EAAUrd,iBAAmBqd,EAAUnd,eAAiBmd,EAAUpd,aAAeod,EAAUld,aAErFkd,EAAUrd,gBAAkB9b,EAASq5B,YAAcF,EAAUrd,iBAAmB9b,EAASq5B,YAAcF,EAAUpd,aAAe/b,EAASqF,WACzI8zB,EAAUnd,cAAgBhc,EAASq5B,YAAcF,EAAUnd,eAAiBhc,EAASq5B,YAAcF,EAAUld,WAAajc,EAASqF,QAJhJ,CAWA,IAAIrR,EAAuD,QAAjD,EAAW+H,KAAKk9B,OAAOppB,KAAKypB,6BAAqB,eAAEC,uBAAuBL,GAEpF,GAAc,MAAVllC,EACA,OAAO,KArByF,2BAwBpG,YAAqBA,EAAOykB,OAA5B,+CAAmC,KAA3BT,EAA2B,+BAC/B,YAAiBA,EAAjB,+CAA2B,KAAnBnR,EAAmB,QACvB,GAAGA,EAAM7G,SAASoF,MAAQpF,EAASq5B,YAC/BxyB,EAAM7G,SAASqF,QAAUrF,EAASqF,QAClCwB,EAAM7G,SAASqF,OAASwB,EAAM7G,SAASlC,QAAUkC,EAASqF,OACtD,OAAO,MALY,oFAxBiE,kFAkCpG,IAAIqkB,EAAU11B,EAAOwlC,qBAAqBx5B,EAASq5B,WAAYr5B,EAASqF,QAEpEo0B,EAAsB,GAE1B,GAAe,MAAX/P,EACA,GAAIA,aAAmB,GAASA,aAAmB5sB,GAAU4sB,aAAmB,GACzEA,aAAmBjtB,EACtBg9B,EAAsBf,GAAuBhP,OAC1C,IAAIA,aAAmB1tB,EAE1B,MAAO,CACHoI,MAAO,KACPs1B,SAAU,CAAC,CAAExkC,MAHjBukC,EAAsB,QAAU/P,EAAQvzB,WAAa,iCAAmCuzB,EAAQxtB,eAOhG,IAAIy9B,EAAsC,QAAxB,EAAWjQ,aAAO,EAAPA,EAASvtB,YAAI,eAAEhG,aACzCuzB,aAAO,EAAPA,EAASvtB,gBAAgB,IAASutB,aAAO,EAAPA,EAASvtB,gBAAgB,KAC1Dw9B,GAAkB,IAAMd,GAA8BnP,EAAQvtB,OAG5C,MAAlBw9B,EACAA,EAAiB,GAEjBA,GAAkB,IAGtBF,EAAsBE,GAAiBjQ,aAAO,EAAPA,EAASvzB,gBAEjD,CACH,IAAIyjC,EAAO79B,KAAK89B,mBAAmBX,EAAOl5B,GACtC85B,EAAOC,EAAgBC,oBAAoBJ,GAC/C,GAAY,MAARE,EACA,MAAO,CACH11B,MAAO,KACPs1B,SAAU,CAAC,CAAExkC,MAAO4kC,KAKhC,IAEI5kC,EAAgB,KAEpB,GAJY6G,KAAKk9B,OAAOppB,KAAKC,iBAAiBmqB,OAIjCC,GAAiBC,OAAQ,CAClC,IAAIC,EAAYr+B,KAAKk9B,OAAOppB,KAAKypB,sBAAsBc,UAEnDjkC,EAAqB4F,KAAKs+B,iBAAiBnB,EAAOl5B,EAAU0pB,aAAO,EAAPA,EAASvzB,YAEzE,GAAiB,MAAdA,EACC,OAAO,KAGX,IAAIo7B,EAAS6I,EAAUE,SAASnkC,GACZ,MAAhBo7B,EAAO1qB,OAAiC,MAAhB0qB,EAAOr8B,QAC/BA,EAAQq8B,EAAOr8B,MAAMiH,KAAKgM,YAAYopB,EAAOr8B,OAC7CukC,EAAsBtjC,GAK9B,IAAIujC,EAAW,GAEf,OAAa,MAATxkC,GAA+C,GAA9BukC,EAAoB37B,OAC9B,MAGE,MAAT5I,EACIA,EAAM4I,OAAS27B,EAAoB37B,OAAS,IAC5C47B,EAAS35B,KAAK,CAAE7K,MAAO,QAAUukC,EAAsB,aACvDC,EAAS35B,KAAK,CAAE7K,MAAO,QAAUA,EAAMkY,QAAQ,UAAW,KAAO,WAEjEssB,EAAS35B,KAAK,CAAE7K,MAAO,QAAUukC,EAAsB,OAASvkC,EAAMkY,QAAQ,UAAW,KAAO,UAGpGssB,EAAS35B,KAAK,CAAE7K,MAAO,QAAUukC,EAAsB,UAKpD,CACHr1B,MAHQ,KAIRs1B,SAAUA,OA1JtB,yCA+JuBR,EAAiCl5B,GAehD,IAZA,IAAI8e,EAAMoa,EAAMqB,sBAAsB,CAClCxe,YAAa,EACbD,gBAAiB,EACjBE,cAAehc,EAASq5B,WACxBpd,UAAWjc,EAASqF,SAGpB6W,EAAOgd,EAAMhxB,WAEb0xB,EAAO,GAEPtC,EAAMxY,EACHwY,EAAMpb,EAAKpe,QAAU/B,KAAKy+B,oCAAoCte,EAAKhQ,OAAOorB,KAC7EA,IAIJ,IADA,IAAImD,EAAQ3b,EACL2b,EAAQ,GAAK1+B,KAAKy+B,oCAAoCte,EAAKhQ,OAAOuuB,EAAQ,KAC7EA,IAGJ,GAAInD,EAAMmD,EAAQ,EACdb,EAAO1d,EAAKjP,UAAUwtB,EAAOnD,OAC1B,CAEH,IADAA,EAAMxY,EACCwY,EAAMpb,EAAKpe,QAAU/B,KAAK2+B,iBAAiBxe,EAAKhQ,OAAOorB,KAC1DA,IAIJ,IADAmD,EAAQ3b,EACD2b,EAAQ,GAAK1+B,KAAK2+B,iBAAiBxe,EAAKhQ,OAAOuuB,EAAQ,KAC1DA,IAGAnD,EAAMmD,EAAQ,IACdb,EAAO1d,EAAKjP,UAAUwtB,EAAOnD,IAIrC,OAAOsC,IAzMf,uCA6MqBV,EAAiCl5B,EAC9C7J,GAYA,IAVA,IAAI2oB,EAAMoa,EAAMqB,sBAAsB,CAClCxe,YAAa,EACbD,gBAAiB,EACjBE,cAAehc,EAASq5B,WACxBpd,UAAWjc,EAASqF,SAGpB6W,EAAOgd,EAAMhxB,WAEbovB,EAAMxY,EACHwY,EAAMpb,EAAKpe,QAAU/B,KAAKy+B,oCAAoCte,EAAKhQ,OAAOorB,KAC7EA,IAIJ,IADA,IAAImD,EAAQ3b,EACL2b,EAAQ,GAAK1+B,KAAK4+B,wBAAwBze,EAAKhQ,OAAOuuB,EAAQ,KACjEA,IAKJ,OAF2C,OAAtBtkC,aAAU,EAAVA,EAAY2H,SAAqB3H,EAAW2H,OAE7Dw5B,EAAMmD,EAAQ38B,OACPoe,EAAKjP,UAAUwtB,EAAOnD,GAG1BnhC,IAzOf,8CA4O4BhB,GAEpB,OAAOA,EAAEkX,oBAAoBF,MAAM,0BA9O3C,uCAkPqBhX,GAEb,OAAOA,EAAEkX,oBAAoBF,MAAM,sBApP3C,0DAwPwChX,GAEhC,OAAOA,EAAEkX,oBAAoBF,MAAM,0B,6BA1P3C,KAEmB,GAAA6tB,oBAAqD,CAChE,MAAS,wDACT,IAAO,2GACP,QAAW,0FACX,MAAS,6HACT,IAAO,6QAEP,GAAM,0RACN,KAAQ,qOACR,OAAU,uVACV,IAAK,mGACL,KAAM,gRACN,KAAM,4HACN,KAAM,2HACN,KAAM,uSACN,KAAM,2LACN,KAAM,+LACN,KAAM,mMACN,KAAM,iMACN,KAAM,6GACN,KAAM,gHACN,IAAK,wMACL,IAAK,qHACL,OAAU,yIACV,QAAW,mJACX,UAAa,mMACb,OAAU,wIACV,MAAS,kR,uKCpCV,IAAM,GAAb,WAgBI,WAAYY,EAA6CC,GAAuC,Y,4FAAA,SAAvC,KAAAA,WAZzD,KAAA76B,SAAmB,EAKnB,KAAA86B,WAAqB,GACrB,KAAAC,cAAwB,IAExB,KAAAC,QAAkB,GAClB,KAAAC,QAAkB,EAId,IAAIC,EAAoBxlB,OAAO,2EAC/BklB,EAAexnB,OAAO8nB,GACtB,IAOIC,EACAC,EARAC,EAAkB3lB,OAAO,4DAC7BwlB,EAAkB9nB,OAAOioB,GACzBt/B,KAAKu/B,MAAQ5lB,OAAO,6DACpBwlB,EAAkB9nB,OAAOrX,KAAKu/B,OAC9Bv/B,KAAKw/B,oBAAsB7lB,OAAO,8CAClC3Z,KAAKu/B,MAAMloB,OAAOrX,KAAKw/B,qBAIvB,IAAItnB,EAAOlY,KACXkY,EAAK8mB,cAAgBhG,GAAkBmG,EAAkBM,IAAI,WAC7DvnB,EAAK6mB,WAAa/F,GAAkB9gB,EAAKqnB,MAAME,IAAI,WACnDvnB,EAAKwnB,KAAOxnB,EAAK8mB,cAAgB9mB,EAAK6mB,WAEtCO,EAAgBK,GAAG,aAAa,SAACC,GAE7B,IAAIC,EAAID,EAAEE,MAAQX,EAAkBz6B,SAASq7B,IAAM,EACnD7nB,EAAK8nB,QAAQH,GACb3nB,EAAKqnB,MAAME,IAAI,MAAOI,EAAI,MAE1B3nB,EAAKqnB,MAAMU,QAAQ,YAAa,CAACL,EAAEM,aAKvClgC,KAAKu/B,MAAMI,GAAG,aAAa,SAACC,EAAGC,GACnB,MAALA,IAAWA,EAAID,EAAEM,SACpBd,EAAaS,EACbR,EAAcnnB,EAAKjU,SACnB,EAAKu7B,oBAAoB5lB,OAEzBD,OAAOwmB,UAAUR,GAAG,yBAAyB,SAACC,GAC1C,IAAIQ,EAASR,EAAEM,QAAUd,EACzBlnB,EAAK8nB,QAAQX,EAAce,MAG/BzmB,OAAOwmB,UAAUR,GAAG,uBAAuB,WACvChmB,OAAOwmB,UAAUE,IAAI,uBACrB1mB,OAAOwmB,UAAUE,IAAI,yBACrB,EAAKb,oBAAoB3lB,UAG7B+lB,EAAEU,qBAINzB,EAAec,GAAG,cAAc,SAACC,GACzBW,EAAYC,eAChBrB,EAAkBsB,YAGtB5B,EAAec,GAAG,cAAc,SAACC,GACzBW,EAAYC,eAChBrB,EAAkBuB,aAGtB,IAAIC,GAAU,EAAM3gC,KAAKi/B,UAAUj/B,KAAKk/B,QAAUl/B,KAAKi/B,SACvDj/B,KAAKiE,SAAW08B,GAAQ3gC,KAAKg/B,cAAgBh/B,KAAK++B,YAClD/+B,KAAKu/B,MAAME,IAAI,MAAOz/B,KAAKiE,SAAW,M,UA7E9C,O,EAAA,G,EAAA,+BAgFY28B,GAEDA,EAAc,IACbA,EAAc,GAGfA,EAAc5gC,KAAK0/B,OAClBkB,EAAc5gC,KAAK0/B,MAGvB1/B,KAAKiE,SAAW28B,EAEhB5gC,KAAKu/B,MAAME,IAAI,MAAOmB,EAAc,MAEpC,IAAIC,EAAaD,GAAa5gC,KAAKg/B,cAAgBh/B,KAAK++B,YACxD8B,EAAa7gC,KAAKi/B,QAAU4B,GAAY7gC,KAAKk/B,QAAUl/B,KAAKi/B,SAE5D,IAAI6B,EAAMz1B,KAAK01B,MAAmB,IAAbF,GAAoB,KACzC7gC,KAAKw/B,oBAAoBwB,KAAKF,GAEV,MAAjB9gC,KAAK8+B,UACJ9+B,KAAK8+B,SAAS+B,Q,6BArG1B,KAEkB,GAAAL,eAAwB,ECGnC,ICJKS,G,wKAAZ,SAAYA,GACR,mBAAM,uBAAQ,qBADlB,CAAYA,QAAS,KAyBd,IAAe,GAAtB,WAgBI,WAAsBzmB,I,4FAAe,SAAf,KAAAA,SAVf,KAAA0mB,OAAiB,EACjB,KAAAC,MAAgB,EAKb,KAAAC,MAAuC,GAE1C,KAAAC,gBAA0B,U,UAdrC,O,EAAA,G,EAAA,6CAqBQ,MAAO,CACH1M,KAAMtpB,KAAK01B,MAAM/gC,KAAKkhC,OD3CP,IC4CfnB,IAAK10B,KAAK01B,MAAM/gC,KAAKmhC,MD5CN,IC6CfG,MAAOj2B,KAAK01B,MAAM/gC,KAAKuhC,QD7CR,IC8CfC,OAAQn2B,KAAK01B,MAAM/gC,KAAKyhC,SD9CT,OCqB3B,6BA8B4B,MAAjBzhC,KAAK0hC,UACR1hC,KAAK0hC,SAAS9nB,SA/BtB,6BAmC4B,MAAjB5Z,KAAK0hC,UACR1hC,KAAK0hC,SAAS7nB,SApCtB,+BAwC4B,MAAjB7Z,KAAK0hC,UACR1hC,KAAK0hC,SAASC,WAzCtB,+BA6C4B,MAAjB3hC,KAAK0hC,WACR1hC,KAAK0hC,SAAS3uB,SACd/S,KAAK0hC,SAAW,QA/CxB,+BAkDaA,GACLA,EAASrqB,OAAOrX,KAAK0hC,YAnD7B,8BAuD4B,MAAjB1hC,KAAK0hC,WACR1hC,KAAK0hC,SAAS9Z,QACd5nB,KAAKohC,MAAQ,MAzDrB,2BA4DgBQ,EAAaC,EAAaC,GAAoD,IAA/BC,EAA+B,wDACtF/hC,KAAKkhC,QAAUU,EACf5hC,KAAKmhC,OAASU,EAEd,IAAIG,EAAIhiC,KAAKkhC,OACTrB,EAAI7/B,KAAKmhC,MAEVW,IACCE,EDzFe,GCyFX32B,KAAK01B,MAAMiB,EDzFA,IC0FfnC,ED1Fe,GC0FXx0B,KAAK01B,MAAMlB,ED1FA,KC6FhBkC,IACC/hC,KAAKkhC,OAASc,EACdhiC,KAAKmhC,MAAQtB,GAGjBlmB,OAAO3Z,KAAK0hC,UAAUjC,IAAI,YAAa,aAAeuC,EAAI,MAAQnC,EAAI,SA7E9E,6BAgFkB+B,EAAaC,EAAaC,GACpC9hC,KAAKiiC,KAAKL,EAAM5hC,KAAKkhC,OAAQW,EAAM7hC,KAAKmhC,MAAOW,KAjFvD,oCAoFyBrpC,GACQ,IADM+hB,EACN,uDADwB,KAAMnX,EAC9B,uCAErB9J,EAAK,6BACLmoC,EAAW/nB,OAAOwmB,SAAS+B,gBAAgB3oC,EAAId,IAMnD,OAJiB,MAAd4K,GAAoBq+B,EAASS,KAAK9+B,GAExB,MAAVmX,GAAgBA,EAAO4nB,YAAYV,EAAS,IAExCA,IA9Ff,wCAkG6BvhB,GACI,IADU3F,EACV,uDAD4B,KAAMnX,EAClC,uCAEjBq+B,EAA4B1hC,KAAKqiC,cAAc,OAAQ7nB,EAAQ,CAC/D8nB,KAAM,cACN,cAAe,aACfC,KAAM,OACN,qBAAqB,YAOzB,OAJiB,MAAdl/B,GAAoBq+B,EAASS,KAAK9+B,GAErCq+B,EAASvhB,KAAKA,GAEPuhB,IAhHnB,qCAmH0Bc,GAClB,IAAIC,EAAeD,EAAY,GAAGE,UAElC,MAAO,CACHlB,OAAQiB,EAAKjB,OAASmB,EAAeC,QACrCtB,MAAOmB,EAAKnB,MAAQqB,EAAeC,WAxH/C,kCA6HuBv5B,GAEfrJ,KAAKohC,MAAMp9B,KAAKqF,GAEA,QAAbA,EAAKjJ,OACiB,MAAlBiJ,EAAKw5B,YAAmBx5B,EAAKw5B,UAAY5B,GAAUtM,MACtC,MAAbtrB,EAAKy5B,OAAcz5B,EAAKy5B,MAAO,GACf,MAAhBz5B,EAAK05B,UAAiB15B,EAAK05B,SAAU,MApIpD,+BAyIiB,WAELC,EAAShjC,KAAK0hC,SACL,MAAVsB,KACCA,EAAShjC,KAAKqiC,cAAc,IAAKriC,KAAKwa,SAC/ByoB,SAAS,iBAChBD,EAAOC,SAAS,0BAChBjjC,KAAK0hC,SAAWsB,EAChBrpB,OAAO3Z,KAAK0hC,UAAUjC,IAAI,YAAa,aAAez/B,KAAKkhC,OAAS,MAAQlhC,KAAKmhC,MAAQ,QAG7F,IAAI+B,EAAQljC,KAAKqiC,cAAc,OAAQW,EAAO,IAE1CG,EAAqB,GACrBC,EAAqB,EAErBtO,GAAiB,EAhBZ,uBAiBT,IAjBS,IAiBT,EAjBS,iBAiBDzrB,EAjBC,QAkBL,GAAgB,QAAbA,EAAKjJ,KAAe,CAChB00B,IAAOqO,GAAc,IACxBrO,GAAQ,EACRzrB,EAAKw4B,IAAMsB,EACX95B,EAAKq4B,SAAmC,EAAK2B,kBAAkBh6B,EAAK8W,KAAM6iB,EAAO,GAAI,CACjF,cAAgB35B,EAAKy5B,KAAK,OAAO,SACjC,YAAa,OACb,aAAcz5B,EAAK05B,QAAQ,SAAS,SACpC,cAAe15B,EAAKw5B,WAAa5B,GAAUtM,KAAO,QAAUtrB,EAAKw5B,WAAa5B,GAAUqC,OAAS,SAAW,MAC5G,OAA0B,MAAhBj6B,EAAKk6B,QAAkB,GAAK,YAE1Cl6B,EAAKq4B,SAASjC,IAAI,YAAa,iBAAmB0D,EAAa,OAC5C,MAAhB95B,EAAKk6B,UACJl6B,EAAKq4B,SAASuB,SAAS,aACvB55B,EAAKq4B,SAAS/B,GAAG,aAAa,SAAC6D,GAE3Bn6B,EAAKk6B,UACLC,EAAMlD,sBAGd,IAAImD,EAAU,EAAKC,eAAer6B,EAAKq4B,UACvCr4B,EAAKs6B,aAAeF,EAAQjC,OAC5Bn4B,EAAKu6B,YAAcH,EAAQnC,MAC3B8B,EAAa/3B,KAAKw4B,IAAIT,EAAY/5B,EAAKu6B,aACvCT,GAAc95B,EAAKs6B,aACA,MAAhBt6B,EAAKy6B,SACW,EAAKzB,cAAc,QAASh5B,EAAKq4B,SAAS,IAChDvhB,KAAK9W,EAAKy6B,cAGvBz6B,EAAKw4B,IAAMsB,EAAa95B,EAAK06B,YAAY,EACzCZ,GAAc95B,EAAK06B,YAAc,GACjCjP,GAAQ,GAjChB,EAAgB90B,KAAKohC,MAArB,+CAA2B,IAjBlB,kFAsDT,IAAIE,EAAQ,GAAmB8B,EAC/BpjC,KAAKuhC,QDrNc,ICqNHl2B,KAAK0E,MAAMuxB,EDrNR,ICqN+B,GAClDthC,KAAKyhC,SDtNc,ICsNFp2B,KAAK0E,MAAMozB,EDtNT,ICsNqC,GAExD,IACIa,EAAa1C,EAAM,EACnB2C,EAAY3C,EAFD,IAIf4B,EAAMzD,IAAI,CACN6B,MAAOthC,KAAKuhC,QAAU,KACtBC,OAAQxhC,KAAKyhC,SAAW,KACxBc,KAAMviC,KAAKqhC,gBACX6C,OAAQ,OACR,eAAgB,WAnEX,2BAuET,YAAgBlkC,KAAKohC,MAArB,+CAA2B,KAAnB/3B,EAAmB,QACvB,GAAgB,QAAbA,EAAKjJ,KAAe,CAEnB,IAAI4hC,OAAS,EACb,OAAO34B,EAAKw5B,WACR,KAAK5B,GAAUqC,OAAQtB,EAAIgC,EAAY,MACvC,KAAK/C,GAAUtM,KAAMqN,EAnBlB,IAmBgC,MACnC,KAAKf,GAAU/L,MAAO8M,EAAIiC,EAE9B56B,EAAKq4B,SAASjC,IAAI,YAAa,aAAeuC,EAAI,MAAM34B,EAAKw4B,IAAM,YAGnEx4B,EAAKq4B,SAAmC1hC,KAAKqiC,cAAc,OAAQW,EAAO,GAAI,CAC1EmB,GAAI,IACJC,GAAI/6B,EAAKw4B,IAAM,KACfwC,GAAIrkC,KAAKuhC,QAAU,KACnB+C,GAAIj7B,EAAKw4B,IAAM,OAGnBx4B,EAAKq4B,SAASjC,IAAI,CACdyE,OAAQ,OACR,eAAgB76B,EAAK06B,YAAc,QA5FtC,wF,6BAzIjB,KAEkB,GAAAnB,QAAkB,KAAK,G,uKClBlC,IAAM,GAAb,yB,4FAAA,S,UAAA,O,EAAA,E,EAAA,gCAyBoB2B,EAAoBC,EAAoBpkC,GAMpD,IAAIqkC,EAAKD,EAAYxC,EAAIuC,EAAYvC,EACjC0C,EAAKF,EAAY3E,EAAI0E,EAAY1E,EAEjCrnC,EAAI6S,KAAKs5B,KAAKF,EAAGA,EAAGC,EAAGA,GAE3B,GAAGlsC,EAAI,KAAS,MAAO,CAACosC,KAAM,GAAIV,OAAQ,OAAQ3B,KAAM,QAExD,IAAIsC,EAAKJ,EAAGjsC,EACRssC,EAAKJ,EAAGlsC,EAERosC,EAAe,KF9CA,GE8COJ,EAAYxC,EAAoB,GAAaY,QACjE,IF/Ca,GE+CP4B,EAAY3E,EAAoB,GAAa+C,QAErDmC,EAAQ/kC,KAAKglC,OAAO5kC,GAnBwC,uBAqBhE,YAAgB2kC,EAAME,MAAtB,+CAA4B,KAApBC,EAAoB,QACpBC,EAAQD,EAAKlsC,EAAI,IAAMqS,KAAK+5B,GAC5BC,EAAMR,EAAKx5B,KAAKi6B,IAAIH,GAASL,EAAKz5B,KAAKk6B,IAAIJ,GAC3CK,EAAMX,EAAKx5B,KAAKk6B,IAAIJ,GAASL,EAAKz5B,KAAKi6B,IAAIH,GAC/CP,GAAQ,MAAQS,EAAMH,EAAKO,EAAI,GAAa7C,QAAU,IAAM4C,EAAMN,EAAKO,EAAI,GAAa7C,QACxFiC,EAAKQ,EACLP,EAAKU,GA3BuD,kFA8BhE,MAAO,CACHZ,KAAMA,EACNrC,KAAMwC,EAAMxC,KACZ2B,OAAQa,EAAMb,Y,EA1D1B,O,6BAAA,K,uKAEW,GAAAwB,WAAa,GACb,GAAAV,OAAkC,CACrC,YAAe,CACXC,MAAO,CAAC,CAACjsC,EAAG,IAAKysC,EAAG,IAAM,CAACzsC,EAAG,IAAKysC,EAAG,IAAM,CAACzsC,EAAG,IAAKysC,EAAG,KACxDvB,OAAQ,UACR3B,KAAM,UACN,wBAAoBj6B,GAExB,YAAe,CACX28B,MAAO,CAAC,CAACjsC,EAAG,IAAKysC,EAAG,IAAM,CAACzsC,EAAG,IAAKysC,EAAG,IAAM,CAACzsC,EAAG,IAAKysC,EAAG,KACxDvB,OAAQ,UACR3B,KAAM,UACN,mBAAoB,KAExB,YAAe,CACX0C,MAAO,CAAC,CAACjsC,EAAG,GAAK,GAAU0sC,WAAYD,EAAG,IAAM,CAACzsC,EAAG,IAAM,EAAE,GAAU0sC,WAAYD,EAAG,IAChF,CAACzsC,EAAG,EAAE,GAAU0sC,WAAYD,EAAG,IAAM,CAACzsC,EAAG,IAAM,EAAE,GAAU0sC,WAAYD,EAAG,KAC/EvB,OAAQ,UACR3B,KAAM,UACN,wBAAoBj6B,IC7BzB,IAAM,GAAb,WAMI,WAAsBkS,EAAyBmrB,EAAoChe,I,4FAAa,SAA1E,KAAAnN,SAAyB,KAAAmrB,eAAoC,KAAAhe,Q,UANvF,O,EAAA,G,EAAA,8BAW6B,MAAjB3nB,KAAK0hC,UACT1hC,KAAK0hC,SAAS9nB,SAZtB,6BAgB6B,MAAjB5Z,KAAK0hC,UACT1hC,KAAK0hC,SAAS7nB,SAjBtB,+BAqB6B,MAAjB7Z,KAAK0hC,UACT1hC,KAAK0hC,SAASC,WAtBtB,+BA0B6B,MAAjB3hC,KAAK0hC,UACT1hC,KAAK0hC,SAAS3uB,WA3BtB,+BA8Ba2uB,GACLA,EAASrqB,OAAOrX,KAAK0hC,YA/B7B,8BAmC6B,MAAjB1hC,KAAK0hC,UACT1hC,KAAK0hC,SAAS9Z,UApCtB,oCAuCyBnvB,GACQ,IADM+hB,EACN,uDADwB,KAAMnX,EAC9B,uCAErB9J,EAAK,6BACLmoC,EAAW/nB,OAAOwmB,SAAS+B,gBAAgB3oC,EAAId,IAMnD,OAJkB,MAAd4K,GAAoBq+B,EAASS,KAAK9+B,GAExB,MAAVmX,GAAgBA,EAAO4nB,YAAYV,EAAS,IAEzCA,IAjDf,wCAsD6BvhB,GACI,IADU3F,EACV,uDAD4B,KAAMnX,EAClC,uCAErBq+B,EAA4B1hC,KAAKqiC,cAAc,OAAQ7nB,EAAQ,CAC/D8nB,KAAM,cACN,cAAe,aACfC,KAAM,OACN,qBAAsB,YAO1B,OAJkB,MAAdl/B,GAAoBq+B,EAASS,KAAK9+B,GAEtCq+B,EAASvhB,KAAKA,GAEPuhB,IApEf,qCAuE0Bc,GAClB,IAAIC,EAAgBD,EAAY,GAAGE,UAEnC,MAAO,CACHlB,OAAQiB,EAAKjB,OAASoE,EAAahD,QACnCtB,MAAOmB,EAAKnB,MAAQsE,EAAahD,WA5E7C,+BAoFQ,IAAII,EAAShjC,KAAK0hC,SACJ,MAAVsB,GACAA,EAAShjC,KAAKqiC,cAAc,IAAKriC,KAAKwa,QACtCxa,KAAK0hC,SAAWsB,EAChBA,EAAOvD,IAAI,SAAUz/B,KAAK2nB,QAE1Bqb,EAAOpb,QAGX,IAAIie,EAAS7lC,KAAK2lC,aAAaG,cAC/B,KAAc,MAAVD,GAAkBA,EAAO9jC,OAAS,GAAtC,CAMA,IAFA,IAAI6iC,EAAO,KAAO5kC,KAAK+lC,mBAAmBF,EAAO,IAExC3tC,EAAI,EAAGA,EAAI2tC,EAAO9jC,OAAQ7J,IAC/B0sC,GAAQ,MAAQ5kC,KAAK+lC,mBAAmBF,EAAO3tC,IAGnD,IAAI8tC,EAAY,GAAUhB,OAAOhlC,KAAK2lC,aAAaM,WASnD,IARYjmC,KAAKqiC,cAAc,OAAQW,EAAO,GAAI,CAAExqC,EAAGosC,IACjDnF,IAAI,CAEN,eAAgB,SAChB,KAAQ,OACR,mBAAoBuG,EAAU,sBAG3BH,EAAO9jC,OAAS,GAAK8jC,EAAOA,EAAO9jC,OAAS,GAAGigC,GAAK6D,EAAOA,EAAO9jC,OAAS,GAAGigC,GACjF6D,EAAOA,EAAO9jC,OAAS,GAAG89B,GAAKgG,EAAOA,EAAO9jC,OAAS,GAAG89B,GACzDgG,EAAOpwB,MAGX,GAAIowB,EAAO9jC,OAAS,GAAoD,MAA/C/B,KAAK2lC,aAAaO,0BAAmC,CAC1E,IAAIC,EAAO,GAAUC,SAASP,EAAOA,EAAO9jC,OAAS,GAAI8jC,EAAOA,EAAO9jC,OAAS,GAC5E/B,KAAK2lC,aAAaM,WAEVjmC,KAAKqiC,cAAc,OAAQW,EAAO,GAAI,CAAExqC,EAAG2tC,EAAKvB,OACtDnF,IAAI,CACNyE,OAAQlkC,KAAK2nB,MACb,eAAgB,SAChB,KAAQwe,EAAK5D,WA9H7B,yCAoIuB8D,GAGf,MHpImB,GGkIXA,EAAMrE,EAAoB4D,EAAahD,QAE/B,IHpIG,GGmIXyD,EAAMxG,EAAoB+F,EAAahD,a,6BAtIvD,KAEkB,GAAAA,QAAkB,KAAO,GCwBpC,ICnBK0D,IAAZ,SAAYA,GACR,6BAAW,qBAAO,yDAAyB,+BAD/C,CAAYA,QAAc,KCRnB,ICsBKnI,IAAZ,SAAYA,GACR,yCAAiB,yBAAS,uBAAQ,qBAAO,mBAAM,yCAAiB,qDADpE,CAAYA,QAAgB,K,uKCzBrB,IAAMoI,GAAb,yB,4FAAA,S,UAAA,O,EAAA,E,EAAA,wCA0J4B5e,GACpB,GAAY,MAATA,EACC,MAAO,MAGP,IADA,IAAI1tB,EAAY0tB,EAAMnY,SAAS,IACxBvV,EAAE8H,OAAS,GAAG9H,EAAI,IAAMA,EAC/B,MAAO,IAAMA,IAhKzB,oCAoKyB0tB,GACjB,OAAY,MAATA,EAAuB,MAClB,SAAmB,SAARA,IAAqB,IAAM,OAAiB,MAARA,IAAmB,GAAK,MAAgB,IAARA,GAAgB,MAtK/G,yCAyK8BA,GAEtB,GAAY,MAATA,EACC,MAAO,CACHA,MAAO,KACP6e,MAAO,GAIf,IAAIjuC,EAAIyH,KAAKymC,iBAAiB9e,GAC9B,GAAS,MAALpvB,EAAW,MAAO,CAAEovB,MAAOpvB,EAAGiuC,MAAO,GAIzC,IAAIE,EAAK/e,EAAMvX,MAAM,qBACrB,GAAIs2B,GAAMA,EAAG3kC,OAAS,EAAG,CACrB,IAAIzJ,EAAIouC,EAAG,GACX,GAAIpuC,EACA,MAAO,CACHqvB,MAAO,MAAUxY,SAAS7W,EAAEquC,OAAO,EAAG,GAAI,IAAM,IAAQx3B,SAAS7W,EAAEquC,OAAO,EAAG,GAAI,IAAMx3B,SAAS7W,EAAEquC,OAAO,EAAG,GAAI,IAChHH,MAAO,GAKnB,IAAII,EAAKjf,EAAMvX,MAAM,qBACrB,GAAIw2B,GAAMA,EAAG7kC,OAAS,EAAE,CACpB,IAAI,EAAI6kC,EAAG,GACX,GAAI,EACA,MAAO,CACHjf,MAAO,MAAUxY,SAAS,EAAEw3B,OAAO,EAAG,GAAI,IAAM,IAAQx3B,SAAS,EAAEw3B,OAAO,EAAG,GAAI,IAAMx3B,SAAS,EAAEw3B,OAAO,EAAG,GAAI,IAChHH,MAAOr3B,SAAS,EAAEw3B,OAAO,EAAG,GAAI,IAAM,KAKlD,IAAIE,EAAKlf,EAAMvX,MAAM,oDACrB,OAAIy2B,EACO,CACHlf,MAAyB,MAAlBxY,SAAS03B,EAAG,IAAkC,IAAlB13B,SAAS03B,EAAG,IAAc13B,SAAS03B,EAAG,IACzEL,MAAO,IAIfK,EAAKlf,EAAMvX,MAAM,wEAEN,CACHuX,MAAyB,MAAlBxY,SAAS03B,EAAG,IAAkC,IAAlB13B,SAAS03B,EAAG,IAAc13B,SAAS03B,EAAG,IACzEL,MAAO12B,WAAW+2B,EAAG,KAItB,CAAElf,MAAO,SAAU6e,MAAO,O,EA7NzC,O,6BAAA,K,28BAEW,GAAAC,iBAAmB,CACtB,UAAa,SACb,aAAgB,SAChB,KAAQ,MACR,WAAc,QACd,MAAS,SACT,MAAS,SACT,OAAU,SACV,MAAS,EACT,eAAkB,SAClB,KAAQ,IACR,WAAc,QACd,MAAS,SACT,UAAa,SACb,UAAa,QACb,WAAc,QACd,UAAa,SACb,MAAS,SACT,eAAkB,QAClB,SAAY,SACZ,QAAW,SACX,KAAQ,MACR,SAAY,IACZ,SAAY,MACZ,cAAiB,SACjB,SAAY,SACZ,SAAY,SACZ,UAAa,MACb,UAAa,SACb,YAAe,QACf,eAAkB,QAClB,WAAc,SACd,WAAc,SACd,QAAW,QACX,WAAc,SACd,aAAgB,QAChB,cAAiB,QACjB,cAAiB,QACjB,cAAiB,QACjB,cAAiB,MACjB,WAAc,QACd,SAAY,SACZ,YAAe,MACf,QAAW,QACX,QAAW,QACX,WAAc,QACd,UAAa,SACb,YAAe,SACf,YAAe,QACf,QAAW,SACX,UAAa,SACb,WAAc,SACd,KAAQ,SACR,UAAa,SACb,KAAQ,QACR,KAAQ,QACR,MAAS,MACT,YAAe,SACf,SAAY,SACZ,QAAW,SACX,aAAc,SACd,UAAW,QACX,MAAS,SACT,MAAS,SACT,SAAY,SACZ,cAAiB,SACjB,UAAa,QACb,aAAgB,SAChB,UAAa,SACb,WAAc,SACd,UAAa,SACb,qBAAwB,SACxB,UAAa,SACb,UAAa,SACb,WAAc,QACd,UAAa,SACb,YAAe,SACf,cAAiB,QACjB,aAAgB,QAChB,eAAkB,QAClB,eAAkB,QAClB,eAAkB,SAClB,YAAe,SACf,KAAQ,MACR,UAAa,QACb,MAAS,SACT,QAAW,SACX,OAAU,QACV,iBAAoB,QACpB,WAAc,IACd,aAAgB,SAChB,aAAgB,QAChB,eAAkB,QAClB,gBAAmB,QACnB,kBAAqB,MACrB,gBAAmB,QACnB,gBAAmB,SACnB,aAAgB,QAChB,UAAa,SACb,UAAa,SACb,SAAY,SACZ,YAAe,SACf,KAAQ,IACR,QAAW,SACX,MAAS,QACT,UAAa,QACb,OAAU,SACV,UAAa,SACb,OAAU,SACV,cAAiB,SACjB,UAAa,SACb,cAAiB,SACjB,cAAiB,SACjB,WAAc,SACd,UAAa,SACb,KAAQ,SACR,KAAQ,SACR,KAAQ,SACR,WAAc,SACd,OAAU,QACV,cAAiB,QACjB,IAAO,SACP,UAAa,SACb,UAAa,QACb,YAAe,QACf,OAAU,SACV,WAAc,SACd,KAAQ,SACR,SAAY,QACZ,SAAY,SACZ,OAAU,SACV,OAAU,SACV,QAAW,QACX,UAAa,QACb,UAAa,QACb,UAAa,QACb,KAAQ,SACR,YAAe,MACf,UAAa,QACb,IAAO,SACP,KAAQ,MACR,QAAW,SACX,OAAU,SACV,UAAa,QACb,OAAU,SACV,MAAS,SACT,MAAS,SACT,WAAc,SACd,OAAU,SACV,YAAe,UCvIhB,IAAM,GAAb,YAEI,WAAmBxuC,GAAc,kBAE7B,0BAAM,QAASA,EAAQ,mDAFRA,SAIf,EAAKqa,aAAoBra,EAAOma,UAAUC,QAAQ,WAElD,IAAIy0B,EAAwB7uC,EAAOma,UAAUC,QAAQ,SACjD00B,EAA4C9uC,EAAOma,UAAUC,QAAQ,iBAP5C,OAW7B,EAAK5I,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,CACjD,CAAErI,WAAY,SAAUgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAClG,CAAE1G,WAAY,OAAQgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChG,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC6tC,EAAiBnlC,EAAW,GAAG1I,MAC/B8tC,EAAeplC,EAAW,GAAG1I,MAC7B+tC,EAAkB,EAAKC,eAAexuC,EAAGquC,EAAQC,GACrDtuC,EAAEoK,cAAF,MAA2BmkC,KAE5B,GAAO,EAAO,+CAA+C,IAEpE,EAAKz9B,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,IACjD,MACA,SAACZ,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC+tC,EAAkB,EAAKC,eAAexuC,GAC1CA,EAAEoK,cAAF,MAA2BmkC,KAE5B,GAAO,EAAO,sIAAsI,IAE3J,EAAKz9B,UAAU,IAAI1I,EAAO,qBAAsB,IAAI0B,EAAc,CAC9D,CAAErI,WAAY,oBAAqBgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChH8Q,IACA,SAAC/P,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCwuB,EAAgB9lB,EAAW,GAAG1I,MACZR,EAAEoK,cAAF,MAEnBqkC,mBAAmBzf,MAEvB,GAAO,EAAO,oOAAoO,IAEzP,EAAKle,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,CAChD,CAAErI,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChG8Q,IACA,SAAC/P,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC6oC,EAAYngC,EAAW,GAAG1I,MAC1B0mC,EAAYh+B,EAAW,GAAG1I,MAC1BkuC,EAAkB1uC,EAAEoK,cAAF,MAElBukC,GAAS,IAAIC,KAAKC,QAASC,SAASJ,EAAGK,MAAMC,gBACjDN,EAAGK,MAAMC,eAAeC,WACxBP,EAAGK,MAAMC,eAAeE,UAAU7F,EAAEnC,GACpCwH,EAAGK,MAAMC,eAAeG,QAAQR,GAIhCD,EAAGK,MAAMK,UAAUC,cAEpB,GAAO,EAAO,uEAAuE,IAE5F,EAAKv+B,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,aAAcgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACzG,CAAE1G,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChG8Q,IACA,SAAC/P,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCgsC,EAAgBtjC,EAAW,GAAG1I,MAC9B6oC,EAAYngC,EAAW,GAAG1I,MAC1B0mC,EAAYh+B,EAAW,GAAG1I,MAC1BkuC,EAAkB1uC,EAAEoK,cAAF,MAElBukC,GAAS,IAAIC,KAAKC,QAASC,SAASJ,EAAGK,MAAMC,gBACjDN,EAAGK,MAAMC,eAAeC,WACxBP,EAAGK,MAAMC,eAAeE,WAAW7F,GAAInC,GACvCwH,EAAGK,MAAMC,eAAeM,QAAQ9C,EAAQ,IAAM95B,KAAK+5B,IACnDiC,EAAGK,MAAMC,eAAeE,UAAU7F,EAAGnC,GACrCwH,EAAGK,MAAMC,eAAeG,QAAQR,GAMhCD,EAAGK,MAAMK,UAAUC,cAEpB,GAAO,EAAO,8FAA8F,IAEnH,EAAKv+B,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,CACjD,CAAErI,WAAY,SAAUgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACrG,CAAE1G,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChG8Q,IACA,SAAC/P,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCwnC,EAAiB9+B,EAAW,GAAG1I,MAC/B6oC,EAAYngC,EAAW,GAAG1I,MAC1B0mC,EAAYh+B,EAAW,GAAG1I,MAC1BkuC,EAAkB1uC,EAAEoK,cAAF,MAGlBukC,GAAS,IAAIC,KAAKC,QAASC,SAASJ,EAAGK,MAAMC,gBACjDN,EAAGK,MAAMC,eAAeC,WACxBP,EAAGK,MAAMC,eAAeE,WAAW7F,GAAInC,GACvCwH,EAAGK,MAAMC,eAAeO,MAAMvH,EAAQA,GACtC0G,EAAGK,MAAMC,eAAeE,UAAU7F,EAAGnC,GACrCwH,EAAGK,MAAMC,eAAeG,QAAQR,GAMhCD,EAAGK,MAAMK,UAAUC,cAEpB,GAAO,EAAO,gFAAgF,IAErG,EAAKv+B,UAAU,IAAI1I,EAAO,sBAAuB,IAAI0B,EAAc,CAC/D,CAAErI,WAAY,OAAQgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACnG,CAAE1G,WAAY,MAAOgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAClG,CAAE1G,WAAY,QAASgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACpG,CAAE1G,WAAY,SAAUgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACrG8Q,IACA,SAAC/P,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCw7B,EAAe9yB,EAAW,GAAG1I,MAC7B4mC,EAAcl+B,EAAW,GAAG1I,MAC5BmoC,EAAgBz/B,EAAW,GAAG1I,MAC9BqoC,EAAiB3/B,EAAW,GAAG1I,MAC/BkuC,EAAkB1uC,EAAEoK,cAAF,MAEtBskC,EAAGK,MAAMC,eAAeC,WACxBP,EAAGK,MAAMC,eAAeE,WAAWlT,GAAOoL,GAC1CsH,EAAGK,MAAMC,eAAeO,MAAMb,EAAGc,aAAa7G,EAAO+F,EAAGe,cAAc5G,GAGtE6F,EAAGK,MAAMK,UAAUC,cAEpB,GAAO,EAAO,gFAAgF,IAGrG,EAAKv+B,UAAU,IAAI1I,EAAO,kBAAmB,IAAI0B,EAAc,CAC3D,CAAErI,WAAY,QAASgG,KAAM0mC,EAAW53B,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC1F8Q,IACA,SAAC/P,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCkvC,EAAuBxmC,EAAW,GAAG1I,MACnBR,EAAEoK,cAAF,MAEnBulC,aAAwB,MAATD,EAAgB,KAAOA,EAAMtlC,cAAN,SAE1C,GAAO,EAAO,sLAAsL,IAE3M,EAAK0G,UAAU,IAAI1I,EAAO,mBAAoB,IAAI0B,EAAc,CAC5D,CAAErI,WAAY,WAAYgG,KAAM2mC,EAAmB73B,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACrG8Q,IACA,SAAC/P,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCovC,EAA0B1mC,EAAW,GAAG1I,MACtBR,EAAEoK,cAAF,MAEnBylC,iBAAiBD,MAErB,GAAO,EAAO,gGAAgG,IAGrH,EAAK9+B,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IACpD0L,IACA,SAACtM,GAEG,IACIwlC,EADmBxlC,EAAW,GAAG1I,MACb4J,cAAF,MAEtB,OAAOsI,KAAK01B,MAAMsG,EAAG/F,UAEtB,GAAO,EAAO,2FAA2F,IAEhH,EAAK73B,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,IACrD0L,IACA,SAACtM,GAEG,IACIwlC,EADmBxlC,EAAW,GAAG1I,MACb4J,cAAF,MAEtB,OAAOsI,KAAK01B,MAAMsG,EAAG7F,WAEtB,GAAO,EAAO,yFAAyF,IAE9G,EAAK/3B,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,CACrD,CAAErI,WAAY,SAAUgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACrG,MACA,SAACe,GAEG,IACIwlC,EADmBxlC,EAAW,GAAG1I,MACb4J,cAAF,MAClB0lC,EAAiB5mC,EAAW,GAAG1I,MAEnCkuC,EAAGqB,UAAUD,MAEd,GAAO,EAAO,yIAAyI,IApNjI,EAFrC,O,mOAAA,iDA2NmBE,GAAoE,I,QAAxC3B,EAAwC,uDAAvB,IAAKC,EAAkB,uDAAH,IAExEI,EAAsC,QAApC,EAAoB,QAApB,EAAc,QAAd,EAAGrnC,KAAK/H,cAAM,eAAE6b,YAAI,eAAEC,wBAAc,eAAI60B,YAG9C,GAAU,MAANvB,EAAY,CAEZ,GAAIA,EAAG/F,OAAS0F,GAAUK,EAAG7F,QAAUyF,EAAM,CAEzC,IAAI4B,EAAgBx9B,KAAK01B,MAAMkG,EAAOD,EAAS,KAC/CK,EAAGyB,gBAAgBrJ,IAAI,iBAAkBoJ,EAAQ,KAEjDxB,EAAGK,MAAMC,eAAeO,MAAMb,EAAG/F,MAAQ0F,EAAQK,EAAG7F,OAASyF,GAC7DI,EAAG/F,MAAQ0F,EACXK,EAAG7F,OAASyF,EAGZI,EAAGK,MAAMK,UAAUC,WAEW,QAA9B,EAAAhoC,KAAK/H,OAAO6b,KAAKi1B,qBAAa,SAAEC,qBAIpC,OAAO3B,EAGP,OAAO,IAAI,GAAYL,EAAQC,EAAMjnC,KAAK/H,OAAQ0wC,OArP9D,GAAgC,GA8QnB,GAAb,WAoCI,WAAmBrH,EAAsBE,EAAwBvpC,EAAuBgxC,GAAoB,I,MAAA,kBAAzF,KAAA3H,QAAsB,KAAAE,SAAwB,KAAAvpC,SAAuB,KAAAgxC,QA7BxF,KAAAC,UAAyB,GACzB,KAAAC,iBAAgC,GAChC,KAAAC,YAA2B,GAC3B,KAAAC,cAA6B,GAC7B,KAAAC,sBAAuC,GAEvC,KAAAC,oBAAgD,GAChD,KAAAC,eAAsC,GAGtC,KAAAC,gBAA0B,EAC1B,KAAAC,YAAsB,EAOf,KAAAC,eAAmD,GA6J1D,KAAAC,kBAA4B,EAC5B,KAAAC,MAAgB,EAChB,KAAAC,SAAmB,EAEnB,KAAAC,iBAAmC,GApJ/BxC,KAAKyC,SAASC,WAAa1C,KAAK2C,YAAYC,QAE5CnqC,KAAKooC,cAAgB5G,EACrBxhC,KAAKmoC,aAAe7G,EAEpBthC,KAAKiT,YAA+B,QAApB,EAAc,QAAd,EAAGjT,KAAK/H,cAAM,eAAE6b,YAAI,eAAEC,iBAEG,MAArC/T,KAAKiT,YAAYm3B,kBACjBpqC,KAAKiT,YAAYK,eAAe,qFAGA,MAAhCtT,KAAKiT,YAAY21B,aACjB5oC,KAAKiT,YAAYK,eAAe,oDAGpCtT,KAAKiT,YAAY21B,YAAc5oC,KAE/BA,KAAK8oC,gBAAkBnvB,OAAO,eAC9B,IAAI0wB,EAAerqC,KAAK/H,OAAO6b,KAAKC,iBAAiBu2B,aAAaC,iBAE9D9E,EAAI,WACJ,IAAI+E,EAAWH,EAAaI,QAAQ,YAChCC,EAAmBF,EAASlJ,QAC5BqJ,EAAoBH,EAAShJ,SAI7BA,EAASF,EAAQqJ,EAAYD,EAC7BL,EAAa5K,IAAI,CACb,MAAS6B,EAAQE,EAASmJ,EAAY,KACtC,OAAUA,EAAY,OAG1BN,EAAa5K,IAAI,CACb,OAAU+B,EAASF,EAAQoJ,EAAW,KACtC,MAASA,EAAW,QAKhCL,EAAahK,IAAI,eACjBgK,EAAa1K,GAAG,cAAe8F,GAE/BA,IAEAzlC,KAAK4qC,gBAAkBjxB,OAAO,eAC9B3Z,KAAK8oC,gBAAgBzxB,OAAOrX,KAAK4qC,iBAEjCP,EAAahzB,OAAOrX,KAAK8oC,iBACzBuB,EAAazwB,OAEbywB,EAAa,GAAGQ,cAAgB,SAAUjL,GACtCA,EAAEkL,kBAGNvD,KAAKyC,SAASe,YAAc,IAE5B/qC,KAAKgrC,IAAM,IAAIzD,KAAK0D,YAAY,CAC5BC,WAAW,EACX5J,MAAOA,EAAOE,OAAQA,IAK1B,IAAItpB,EAAOlY,KAGXA,KAAKmrC,eAAiB,SAACC,GAEnBlzB,EAAKmzB,KAAK9D,KAAK+D,OAAOC,OAAOC,YAGjCxrC,KAAKgrC,IAAIS,OAAOx3B,IAAIjU,KAAKmrC,gBACzBnrC,KAAKgrC,IAAIS,OAAOC,OAAS,GAEzB1rC,KAAKiT,YAAY04B,aAAc,EAE/B3rC,KAAK0nC,MAAQ,IAAIH,KAAKqE,UAEtB5rC,KAAKgrC,IAAItD,MAAMmE,SAAS7rC,KAAK0nC,OAE7B1nC,KAAK4qC,gBAAgBvzB,OAAOrX,KAAKgrC,IAAIc,MAQrC9rC,KAAKiT,YAAY84B,aAAaC,oBAAoBhoC,MAAK,SAACvK,GAAO,2BAC3D,YAAgBye,EAAKixB,iBAArB,+CAAuC,KAA9B8C,EAA8B,QAEnC/zB,EAAKg0B,qBAAqBD,EAAKxyC,IAHwB,sFAQ/DuG,KAAKiT,YAAY84B,aAAaI,eAAenoC,MAAK,SAACvK,GAAO,2BACtD,YAAgBye,EAAKkxB,YAArB,+CAAkC,KAAzB6C,EAAyB,QAE9B/zB,EAAKg0B,qBAAqBD,EAAKxyC,IAHmB,sFAQ1DuG,KAAKiT,YAAY84B,aAAaK,iBAAiBpoC,MAAK,SAACvK,GAAO,2BACxD,YAAgBye,EAAKmxB,cAArB,+CAAoC,KAA3B4C,EAA2B,QAEhC/zB,EAAKg0B,qBAAqBD,EAAKxyC,IAHqB,sFAS5D,IApHwG,iBAoHnG,IAAI4yC,EAAY,KACjB,EAAKzB,gBAAgBjL,GAAG0M,GAAc,SAACzM,GACnC,IAAIoC,EAAIV,EAAQ1B,EAAE0M,QAAU,EAAK1B,gBAAgBtJ,QAC7CzB,EAAI2B,EAAS5B,EAAE2M,QAAU,EAAK3B,gBAAgBpJ,SAE9CxnC,EAAI,IAAIutC,KAAKiF,MAAMxK,EAAGnC,GAC1B,EAAK6H,MAAMC,eAAe8E,aAAazyC,EAAGA,GAC1CgoC,EAAIhoC,EAAEgoC,EACNnC,EAAI7lC,EAAE6lC,EAEN3nB,EAAKw0B,aAAaL,EAAcrK,EAAGnC,EAAGD,EAAE+M,QATA,2BAWxC,YAAqB,EAAKnD,eAA1B,+CAA0C,KAAjCjB,EAAiC,QACF,MAAhCA,EAAS1M,MAAMwQ,IACf,EAAKO,oBAAoBrE,EAAU8D,EAAcrK,EAAGnC,EAAGD,EAAE+M,SAbzB,uFADhD,MAAyB,CAAC,UAAW,YAAa,YAAa,aAAc,cAA7E,eAA4F,IAqB9D,QAA9B,EAAA3sC,KAAK/H,OAAO6b,KAAKi1B,qBAAa,SAAEC,qBA7KxC,qDA8BQhpC,KAAKkpC,UAAY,GACjBlpC,KAAKmpC,iBAAmB,GACxBnpC,KAAKopC,YAAc,GACnBppC,KAAKqpC,cAAgB,KAjC7B,gCAiLcZ,GACNzoC,KAAK4qC,gBAAgBnL,IAAI,SAAUgJ,KAlL3C,2BA4LS2C,G,MAEDprC,KAAK0pC,aAAe0B,EAFT,2BAIX,YAAyBprC,KAAK+pC,iBAA9B,+CAAgD,SAC/BsB,KAAKD,IALX,kFAQX,GAAwB,MAApBprC,KAAKiT,YACL,OAAQjT,KAAKiT,YAAYirB,OACrB,KAAKC,GAAiB0O,QAElB,IAAK7sC,KAAKypC,eAAgB,CACtBzpC,KAAK4pC,oBACL,MAGJ,IAAI9U,GAAiB,EAPzB,uBASI,YAAsB90B,KAAKkpC,UAA3B,+CAAsC,KAA7B4D,EAA6B,QAE9BC,EAAcD,EAAUC,YAC5B,IAAIA,EAAYC,cAAeD,EAAYE,YAA3C,CAEA,IAAIxrC,EAA0B,QAAnB,EAAGqrC,EAAUprC,cAAM,eAAED,QAChCzB,KAAKktC,SAASpY,EAAOgY,EAAW9sC,KAAK0pC,aACtB,MAAXjoC,GAAoBqrC,EAAUC,YAAYE,cAC1CnY,GAAQ,EACR90B,KAAKypC,gBAAiB,KAlBlC,kFAqBI,MACJ,KAAKtL,GAAiB3F,KACtB,KAAK2F,GAAiBrzB,MACtB,KAAKqzB,GAAiBgP,gBAClBntC,KAAKotC,kBAkBjB,IAZAptC,KAAK0pC,YAAc,EAEf1pC,KAAKiT,YAAYirB,OAASC,GAAiB0O,UACvC7sC,KAAKkpC,UAAUnnC,OAAS,GACxB/B,KAAKiT,YAAYo6B,cAAc,OAAO,EAAM,IAC5CrtC,KAAKiT,YAAYq6B,cAAe,EAChCttC,KAAKiT,YAAYo6B,cAAc,OAAO,EAAO,MAE7CrtC,KAAKiT,YAAYo6B,cAAc,OAAO,EAAO,KAI9CrtC,KAAKspC,sBAAsBvnC,OAAS,GAAG,CAQ1C,IANA,IAAI,EAAc/B,KAAKspC,sBAAsB7zB,MAM7C,MAAsB,CAACzV,KAAKmpC,iBAAkBnpC,KAAKopC,YAAappC,KAAKqpC,eAArE,eACI,IADC,IAAIkE,EAAS,KACL,EAAI,EAAG,EAAIA,EAAUxrC,OAAQ,IAC9BwrC,EAAU,GAAGR,cAAgB,IAC7BQ,EAAU/5B,OAAO,EAAG,GACpB,KAMZ,IAAK,IAAItb,EAAI,EAAGA,EAAI8H,KAAKupC,oBAAoBxnC,OAAQ7J,IAC7C8H,KAAKupC,oBAAoBrxC,GAAGs1C,cAAgB,IAC5CxtC,KAAKupC,oBAAoB/1B,OAAOtb,EAAG,GACnCA,KAIR,IAAK,IAAI,EAAI,EAAG,EAAI8H,KAAKkpC,UAAUnnC,OAAQ,IACnC/B,KAAKkpC,UAAU,GAAG6D,cAAgB,IAClC/sC,KAAKkpC,UAAU11B,OAAO,EAAG,GACzB,KAIR,IAAIi6B,EAA8B,EAAaA,cAC1B,MAAjBA,IACAA,EAAcC,UACA,EAAaD,cAAgB,SApR3D,yCA2RuB9lB,GACf,IAAIpvB,EAAIguC,GAAYoH,mBAAmBhmB,GACvC3nB,KAAKgrC,IAAI4C,SAASvM,gBAAkB9oC,EAAEovB,QA7R9C,2CAiSyBmlB,EAAsBrzC,G,QAEnCgI,EAA0B,QAAnB,EAAGqrC,EAAUprC,cAAM,eAAED,QAC5BD,EAAyB,QAAnB,EAAGsrC,EAAUprC,cAAM,eAAEF,OAE3BqsC,EAAMf,EAAUC,YAAYt4B,cAE5Bq5B,EAAyB,CACzB,CACI1tC,KAAMytC,EAAI5qC,MACV9J,MAAO00C,GAEX,CACIztC,KAAMgL,GACNjS,MAAOM,IAIA,MAAXgI,EACAzB,KAAKiT,YAAYuC,SAASs3B,EAAUprC,OAAQosC,EAAe,MAAM,GAChD,MAAVtsC,GACPA,EAAO,MAtTnB,+BA2TaszB,EAAgBgY,EAAsB1B,G,QAEvC3pC,EAA0B,QAAnB,EAAGqrC,EAAUprC,cAAM,eAAED,QAC5BD,EAAyB,QAAnB,EAAGsrC,EAAUprC,cAAM,eAAEF,OAE3BqsC,EAAMf,EAAUC,YAAYt4B,cAE5Bq5B,EAAyB,CACzB,CACI1tC,KAAMytC,EAAI5qC,MACV9J,MAAO00C,IAIXf,EAAUprC,OAAO2L,oBAAsB,GACvCygC,EAAc9pC,KACV,CACI5D,KAAM6O,GACN9V,MAAOiyC,IAMnB,IAAIlzB,EAAOlY,KAEI,MAAXyB,EACAzB,KAAKiT,YAAYuC,SAASs3B,EAAUprC,OAAQosC,EAAehZ,EAAQ,SAAC7hB,GAChEiF,EAAKuxB,gBAAiB,EACtBx2B,EAAYq6B,cAAe,GAC3B,MAAM,GACO,MAAV9rC,GACPA,EAAO,MA3VnB,qCAiWQ,cAAyB,CAAC,UAAW,YAAa,YAAa,aAAc,cAA7E,eAA4F,CAAvF,IAAI6qC,EAAY,KACjBrsC,KAAK4qC,gBAAgBvK,IAAIgM,GAE7BrsC,KAAK+pC,iBAAmB,GACxB/pC,KAAKgrC,IAAIS,OAAO14B,OAAO/S,KAAKmrC,gBAC5BnrC,KAAKgrC,IAAI0C,UACT1tC,KAAK8oC,gBAAgB/1B,SACrB/S,KAAK/H,OAAO6b,KAAKC,iBAAiBu2B,aAAaC,iBAAiB1wB,OAChE7Z,KAAKiT,YAAY04B,aAAc,EAC/B3rC,KAAKiT,YAAY21B,YAAc,OA1WvC,mCA6WiByD,EAAsBrK,EAAWnC,EAAW8M,GAAc,WAEnE,OAAQN,GACJ,IAAK,YACL,IAAK,UAAL,2BACI,YAAqBrsC,KAAKupC,oBAA1B,+CAA+C,KAAtChB,EAAsC,QACvCiF,EAA2BjF,EAASiF,YAEJ,MAAhCjF,EAAS1M,MAAMwQ,KAA0BmB,EAAYO,cAAc/L,EAAGnC,IAAM2N,EAAYQ,iBACxFhuC,KAAKiuC,yBAAyB1F,EAAU8D,EAAcrK,EAAGnC,EAAG8M,IALxE,kFAUI,MACJ,IAAK,aAAL,2BACI,IADJ,IACI,EADJ,iBACapE,EADb,QAEYiF,EAA2BjF,EAASiF,YAEJ,MAAhCjF,EAAS1M,MAAMwQ,IAAyBmB,EAAYO,cAAc/L,EAAGnC,KAAO2N,EAAYU,2BACxF,EAAKD,yBAAyB1F,EAAU8D,EAAcrK,EAAGnC,EAAG8M,GAAQ,WAChEa,EAAYU,2BAA4B,MALpD,EAAqBluC,KAAKupC,oBAA1B,+CAA+C,IADnD,kFAWI,MACJ,IAAK,aAAL,2BACI,IADJ,IACI,EADJ,iBACahB,EADb,QAEYiF,EAA2BjF,EAASiF,YAEJ,MAAhCjF,EAAS1M,MAAMwQ,IAAyBmB,EAAYU,2BACpD,EAAKD,yBAAyB1F,EAAU8D,EAAcrK,EAAGnC,EAAG8M,GAAQ,WAChEa,EAAYU,2BAA4B,MALpD,EAAqBluC,KAAKupC,oBAA1B,+CAA+C,IADnD,kFAWI,MACJ,IAAK,YAAL,2BACI,IADJ,IACI,EADJ,iBACahB,EADb,QAEYiF,EAA2BjF,EAASiF,YAExC,GAAmC,MAA/BjF,EAAS1M,MAAT,WACiC,MAAhC0M,EAAS1M,MAAT,aAAyC2R,EAAYU,2BACrB,MAAhC3F,EAAS1M,MAAT,YAAwC2R,EAAYU,0BACvD,CACE,IAAIH,EAAgBP,EAAYO,cAAc/L,EAAGnC,IAC5C2N,EAAYQ,gBAAkBD,IAAiD,MAA/BxF,EAAS1M,MAAT,WACjD,EAAKoS,yBAAyB1F,EAAU,YAAavG,EAAGnC,EAAG8M,GAE3DoB,GAAiD,MAAhCxF,EAAS1M,MAAT,aAAyC2R,EAAYU,2BACtE,EAAKD,yBAAyB1F,EAAU,aAAcvG,EAAGnC,EAAG8M,GAAQ,WAChEa,EAAYU,2BAA4B,MAG3CH,GAAiD,MAAhCxF,EAAS1M,MAAT,YAAwC2R,EAAYU,2BACtE,EAAKD,yBAAyB1F,EAAU,aAAcvG,EAAGnC,EAAG8M,GAAQ,WAChEa,EAAYU,2BAA4B,OAlBxD,EAAqBluC,KAAKupC,oBAA1B,+CAA+C,IADnD,sFApZZ,+CAgb6BhB,EAAkC8D,EACvDrK,EAAWnC,EAAW8M,EAAgB7N,GAEtC,GAAKyJ,EAASiF,YAAYW,iCACrB5F,EAASiF,YAAYC,cAAcve,QADxC,CAGA,IAAIxtB,EAAS6mC,EAASviC,QAAQqmC,GAC1B5qC,EAAUC,EAAOD,QACjBD,EAASE,EAAOF,OAEhBqsC,EAAMtF,EAASiF,YAAY/4B,cAE3Bq5B,EAAyB,CACzB,CACI1tC,KAAMytC,EAAI5qC,MACV9J,MAAO00C,GAEX,CACIztC,KAAM6O,GACN9V,MAAO6oC,GAEX,CACI5hC,KAAM6O,GACN9V,MAAO0mC,IAIK,aAAhBwM,GAA+C,cAAhBA,GAAgD,cAAhBA,GAC/DyB,EAAc9pC,KACV,CACI5D,KAAM+N,GACNhV,MAAOwzC,IAIJ,MAAXlrC,EACAzB,KAAKiT,YAAYuC,SAAS9T,EAAQosC,EAAehP,GAAU,GAC1C,MAAVt9B,GACPA,EAAO,OAtdnB,uCA2dqB+mC,GAYb,IAVA,IAQI6F,EAAwB,KAE5B,MAVoB,CAChB,CAAEh0C,WAAY,UAAWuH,UAAW,yBACpC,CAAEvH,WAAY,YAAauH,UAAW,yBACtC,CAAEvH,WAAY,YAAauH,UAAW,oBACtC,CAAEvH,WAAY,aAAcuH,UAAW,oBACvC,CAAEvH,WAAY,aAAcuH,UAAW,qBAK3C,eAA8B,CAAzB,IAAIuuB,EAAE,KACHxuB,EAAyB6mC,EAAStlC,MAAO6f,qBAAqB,KAAOoN,EAAG91B,WAAa81B,EAAGvuB,YAErE,OAAnBD,aAAM,EAANA,EAAQD,UAAmBC,EAAOD,QAAQ4C,WAAWtC,OAAS,GAAuB,OAAlBL,aAAM,EAANA,EAAQF,WAEjE,MAAN4sC,IACAA,EAAK,CACD7F,SAAUA,EACV1M,MAAO,GACP71B,QAAS,IAEbhG,KAAKwpC,eAAexlC,KAAKoqC,IAG7BA,EAAGvS,MAAM3L,EAAG91B,WAAWmW,gBAAiB,EACxC69B,EAAGpoC,QAAQkqB,EAAG91B,WAAWmW,eAAiB7O,MAtf1D,0CA8fwB6mC,EAA6B8D,EAC7CrK,EAAWnC,EAAW8M,EAAgB7N,GAEtC,IAAIp9B,EAAS6mC,EAASviC,QAAQqmC,GAC1B5qC,EAAUC,EAAOD,QACjBD,EAASE,EAAOF,OAEhBqsC,EAAMtF,EAASA,SAEfuF,EAAyB,CACzB,CACI1tC,KAAMytC,EAAI5qC,MACV9J,MAAO00C,GAEX,CACIztC,KAAM6O,GACN9V,MAAO6oC,GAEX,CACI5hC,KAAM6O,GACN9V,MAAO0mC,IAIK,aAAhBwM,GAA+C,cAAhBA,GAAgD,cAAhBA,GAC/DyB,EAAc9pC,KACV,CACI5D,KAAM+N,GACNhV,MAAOwzC,IAIJ,MAAXlrC,EACAzB,KAAKiT,YAAYuC,SAAS9T,EAAQosC,EAAehP,GAAU,GAC1C,MAAVt9B,GACPA,EAAO,QAjiBnB,K,28BCtRO,IAAM,GAAb,YAEI,WAAYvJ,GAAc,kBAEtB,0BAAM,QAASA,EAAQ,iKAElBqa,aAAoBra,EAAOma,UAAUC,QAAQ,WAClD,EAAKlR,YAAa,EAElB,IAAIktC,EAAyE,CACzE,CAAE1sC,UAAW,qBAAsB2sC,oBAAqB,oBACxD,CAAE3sC,UAAW,kBAAmB2sC,oBAAqB,eACrD,CAAE3sC,UAAW,oBAAqB2sC,oBAAqB,iBACvD,CAAE3sC,UAAW,QAAS2sC,oBAAqB,aAC3C,CAAE3sC,UAAW,cAAe2sC,oBAAqB,cAZ/B,OAetB,EAAKvoC,yBAA2B,CAC5B,SAAC/M,GAAoB,2BAEjB,YAAeq1C,EAAf,+CAAiC,KAAxBE,EAAwB,QACzB7sC,EAAyB1I,EAAEiK,MAAO6f,qBAAqByrB,EAAG5sC,WAE9D,GAAuB,OAAnBD,aAAM,EAANA,EAAQD,UAAqC,OAAlBC,aAAM,EAANA,EAAQF,QAAgB,CACnD,IAAIqS,EAA+B7a,EAAE+J,cAAF,MACnC8Q,EAAG+0B,YAAY2F,EAAGD,qBAAqBtqC,KAAK,CACxC+oC,YAAal5B,EACbnS,OAAQA,MATH,qFAiBzB,EAAK+H,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,IAGjD,MACA,SAACZ,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MAEjC4zC,EAAc,IAAI,GAAY90C,EAAO6b,KAAKC,iBAAkBpb,GAEhEA,EAAEoK,cAAF,MAA2BgqC,KAK/B,GAAO,EAAO,4DAA4D,IAE9E,EAAKtjC,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,IACnD,MACA,SAACZ,GAE0BA,EAAW,GAAG1I,MACb4J,cAAF,MACnB2qC,aAEJ,GAAO,EAAO,0IAA0I,IAE/J,EAAKjkC,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,MAAOgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAClGwO,IACA,SAACzN,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCM,EAAcoI,EAAW,GAAG1I,MAGhC,OAFsBR,EAAEoK,cAAF,MAEXyrC,UAAU/0C,MAEtB,GAAO,EAAO,+NAA+N,IAEpP,EAAKgQ,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,CACrD,CAAErI,WAAY,MAAOgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAClGwO,IACA,SAACzN,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCM,EAAcoI,EAAW,GAAG1I,MAGhC,OAFsBR,EAAEoK,cAAF,MAEZyrC,UAAU/0C,MAErB,GAAO,EAAO,yNAAyN,IAE9O,EAAKgQ,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,IACvD6M,IACA,SAACzN,GAKG,OAHuBA,EAAW,GAAG1I,MACb4J,cAAF,MAEZkqC,eAEX,GAAO,EAAO,0FAA0F,IAG/G,EAAKxjC,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IACpDxK,EAAOma,UAAUC,QAAQ,UACzB,SAACxQ,GAKG,OAHuBA,EAAW,GAAG1I,MACb4J,cAAF,MAEZ6lC,YAAYK,SAEvB,GAAO,EAAO,gCAAgC,IAErD,EAAKx/B,UAAU,IAAI1I,EAAO,aAAc,IAAI0B,EAAc,IACtDmP,IACA,SAAC/P,GAE0BA,EAAW,GAAG1I,MACb4J,cAAF,MAGnB0rC,gBAAe,MAInB,GAAO,EAAO,uFAAuF,IAExG,EAAKhlC,UAAU,IAAI1I,EAAO,gBAAiB,IAAI0B,EAAc,IAC7DmP,IACA,SAAC/P,GAE0BA,EAAW,GAAG1I,MACb4J,cAAF,MAGnB0rC,gBAAe,MAEnB,GAAO,EAAO,+FAA+F,IAEhH,EAAKhlC,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IACxD6M,IACA,SAACzN,GAKG,OAHuBA,EAAW,GAAG1I,MACb4J,cAAF,MAEXiqC,eAEZ,GAAO,EAAO,oFAAoF,IAEzG,EAAKvjC,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,CAC/C,CAAErI,WAAY,YAAagG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACxG,KACA,MACA,GAAO,EAAO,0CAA0C,IAE5D,EAAK2I,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,IAC/C,KACA,MACA,GAAO,EAAO,0CAA0C,IAE5D,EAAKgH,UAAU,IAAI1I,EAAO,aAAc,IAAI0B,EAAc,CACtD,CAAErI,WAAY,MAAOgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAClG,KACA,MACA,GAAO,EAAO,yFAAyF,IAE3G,EAAK2I,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,CACrD,CAAErI,WAAY,MAAOgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAClG,KACA,MACA,GAAO,EAAO,kEAAkE,IAEpF,EAAK2I,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,MAAOgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAClG,KACA,MACA,GAAO,EAAO,qEAAqE,IA7KjE,EAF9B,O,mOAAA,sDAqLQd,KAAKgG,QAAQ+D,QAAO,SAAAzR,GAAC,MAAoB,YAAhBA,EAAE8B,cAA0B,GAAG6G,WAAajB,KAAK/H,OAAOma,UAAUC,QAAQ,aArL3G,GAA2B,GA2Ld,GAAb,WAOI,WAAYY,EAAiCwB,GAA4B,WAA5B,KAAAA,gBAJ7C,KAAAw4B,aAAuB,EAEvB,KAAAD,aAAuB,EAGnB,IAAIpE,EAAc31B,EAAY21B,YAC9B,GAAmB,MAAfA,EAAqB,CACrB,IAAI8F,EAAmB,IAAI,EAAqBz7B,EAAYwI,YAAYpJ,QAAQ,SAASjS,MACzFwoC,EAAc,IAAI,GAAY,IAAK,IAAK31B,EAAYwI,YAAYkzB,UAAU,eAAgBD,GAE1FA,EAAE3rC,cAAF,MAA2B6lC,EAE/B5oC,KAAK4oC,YAAcA,EAf3B,kDAkBmBpR,GACXx3B,KAAKgtC,YAAcxV,IAnB3B,gCAuBc/9B,GACN,OAAOuG,KAAK4oC,YAAY31B,YAAY84B,aAAa6C,UAAUn1C,KAxBnE,gCA4BQuG,KAAKitC,aAAc,EACnBjtC,KAAK4oC,YAAYU,sBAAsBtlC,KAAKhE,UA7BpD,K,yoBC/LO,IAAM,GAAb,YAEI,WAAY/H,GAAc,a,4FAAA,UACtB,0BAAM,YAAaA,EAAQ,CACvB,CACImI,KAAMlG,EAAUmkB,cAChBpa,SAAU,KACV7J,WAAY,QAEhB,CACIgG,KAAMlG,EAAUmkB,cAChBpa,SAAU,KACV7J,WAAY,UAEhB,CACIgG,KAAMlG,EAAUmkB,cAChBpa,SAAU,KACV7J,WAAY,SAEhB,CACIgG,KAAMlG,EAAUmkB,cAChBpa,SAAU,KACV7J,WAAY,OAEhB,CACIgG,KAAMlG,EAAUmkB,cAChBpa,SAAU,KACV7J,WAAY,cAIf2F,cAAgB,yBA7BC,EAF9B,O,mOAAA,SAAoC,ICuE9B,SAAU8uC,GAAQC,EAAWC,GAE/B,IAAItK,EAAKsK,EAAG/M,EAAI8M,EAAG9M,EACf0C,EAAKqK,EAAGlP,EAAIiP,EAAGjP,EAEnB,OAAOx0B,KAAKs5B,KAAKF,EAAKA,EAAKC,EAAKA,GAa9B,SAAUsK,GAAoBC,EAAiBC,GAKjD,IAHA,IAAIC,GAAS,EACTC,EAAcH,EAAOltC,OAEhBE,EAAQ,EAAGA,GAASmtC,EAAc,EAAGntC,IAAS,CAEnD,IAAI/J,EAAI+J,EAAQmtC,EACZxhC,GAAK3L,EAAQ,GAAKmtC,EAClBxhC,EAAI,IACJA,GAAKwhC,GAGHH,EAAO/2C,GAAG2nC,EAAIqP,EAAMrP,GAAOoP,EAAOrhC,GAAGiyB,EAAIqP,EAAMrP,GAChDqP,EAAMlN,GAAKiN,EAAOrhC,GAAGo0B,EAAIiN,EAAO/2C,GAAG8pC,IAAMkN,EAAMrP,EAAIoP,EAAO/2C,GAAG2nC,IAAMoP,EAAOrhC,GAAGiyB,EAAIoP,EAAO/2C,GAAG2nC,GAAKoP,EAAO/2C,GAAG8pC,IAC3GmN,GAAUA,GAGlB,OAAOA,EAsHL,SAAUE,GAAsBC,EAAkBC,GAKpD,IAAK,IAAIr3C,EAAI,EAAGA,EAAIo3C,EAAQvtC,OAAQ7J,IAChC,GAAI82C,GAAoBO,EAASD,EAAQp3C,IACrC,OAAO,EAIf,IAAK,IAAI,EAAI,EAAG,EAAIq3C,EAAQxtC,OAAQ,IAChC,GAAIitC,GAAoBM,EAASC,EAAQ,IACrC,OAAO,EAIf,OAAO,E,o6CCvOJ,IAAM,GAAb,YAEI,WAAYt3C,GAAc,kBAEtB,0BAAM,QAASA,EAAQ,iGAElBqa,aAAoBra,EAAOma,UAAUC,QAAQ,UAClD,EAAKlR,YAAa,EAGlB,IAAIquC,EAAYv3C,EAAOma,UAAUC,QAAQ,SACpB,IAAI,EAAUm9B,GATb,OAWtB,EAAK9lC,aAAa,IAAIhJ,EAAU,QAASuO,IACrC,SAAC9V,GAEG,IACIs2C,EADqBt2C,EAAMS,OACDmJ,cAAJ,MAEZ,MAAV0sC,GAAkBA,EAAOxC,aAAuC,MAAxBwC,EAAOhC,cAC/Ct0C,EAAMA,MAAQ,EAIlBA,EAAMA,MAAQs2C,EAAOtK,SAEtB,EAAO3hC,EAAWyG,WAAW,EAAM,aAE1C,EAAKP,aAAa,IAAIhJ,EAAU,UAAWuO,IACvC,SAAC9V,GAEG,IACIs2C,EADqBt2C,EAAMS,OACDmJ,cAAJ,MACZ,MAAV0sC,GAAkBA,EAAOxC,aAAuC,MAAxBwC,EAAOhC,cAC/Ct0C,EAAMA,MAAQ,EAIlBA,EAAMA,MAAQs2C,EAAOC,gBAEtB,EAAOlsC,EAAWyG,WAAW,EAAM,yEAE1C,EAAKP,aAAa,IAAIhJ,EAAU,UAAWuO,IACvC,SAAC9V,GAEG,IACIs2C,EADqBt2C,EAAMS,OACDmJ,cAAJ,MACZ,MAAV0sC,GAAkBA,EAAOxC,aAAuC,MAAxBwC,EAAOhC,cAC/Ct0C,EAAMA,MAAQ,EAIlBA,EAAMA,MAAQs2C,EAAOE,gBAEtB,EAAOnsC,EAAWyG,WAAW,EAAM,yEAiC1C,EAAKR,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,CAChD,CAAErI,WAAY,KAAMgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACjG,CAAE1G,WAAY,KAAMgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACjG8Q,IACA,SAAC/P,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCsrC,EAAa5iC,EAAW,GAAG1I,MAC3BurC,EAAa7iC,EAAW,GAAG1I,MAC3By2C,EAAkBj3C,EAAEoK,cAAF,MAElB6sC,EAAGC,cAAc,SAErBD,EAAG3N,KAAKwC,EAAIC,MAEb,GAAO,EAAO,mFAAmF,IAExG,EAAKj7B,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,aAAcgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACzG,CAAE1G,WAAY,UAAWgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACtG,CAAE1G,WAAY,UAAWgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACtG8Q,IACA,SAAC/P,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC22C,EAAqBjuC,EAAW,GAAG1I,MACnC42C,EAAkBluC,EAAW,GAAG1I,MAChC62C,EAAkBnuC,EAAW,GAAG1I,MAChCy2C,EAAkBj3C,EAAEoK,cAAF,MAElB6sC,EAAGC,cAAc,WAErBD,EAAG3H,OAAO6H,EAAYC,EAASC,MAEhC,GAAO,EAAO,uFAAuF,IAE5G,EAAKvmC,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,aAAcgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACzG8Q,IACA,SAAC/P,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC22C,EAAqBjuC,EAAW,GAAG1I,MACnCy2C,EAAkBj3C,EAAEoK,cAAF,MAElB6sC,EAAGC,cAAc,WAErBD,EAAG3H,OAAO6H,MAEX,GAAO,EAAO,iGAAiG,IAEtH,EAAKrmC,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,CACjD,CAAErI,WAAY,SAAUgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACrG,CAAE1G,WAAY,UAAWgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACtG,CAAE1G,WAAY,UAAWgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACtG8Q,IACA,SAAC/P,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCwnC,EAAiB9+B,EAAW,GAAG1I,MAC/B42C,EAAkBluC,EAAW,GAAG1I,MAChC62C,EAAkBnuC,EAAW,GAAG1I,MAChCy2C,EAAkBj3C,EAAEoK,cAAF,MAElB6sC,EAAGC,cAAc,UAErBD,EAAG1H,MAAMvH,EAAQoP,EAASC,MAE3B,GAAO,EAAO,kHAAkH,IAEvI,EAAKvmC,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,CACjD,CAAErI,WAAY,SAAUgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACrG8Q,IACA,SAAC/P,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC22C,EAAqBjuC,EAAW,GAAG1I,MACnCy2C,EAAkBj3C,EAAEoK,cAAF,MAElB6sC,EAAGC,cAAc,UAErBD,EAAG1H,MAAM4H,MAEV,GAAO,EAAO,oHAAoH,IAEzI,EAAKrmC,UAAU,IAAI1I,EAAO,gBAAiB,IAAI0B,EAAc,IACzD6M,IACA,SAACzN,GAEG,IACI+tC,EADmB/tC,EAAW,GAAG1I,MACb4J,cAAF,MAEtB,IAAI6sC,EAAGC,cAAc,iBAErB,OAAOD,EAAGK,mBAEX,GAAO,EAAO,oHAAoH,IAEzI,EAAKxmC,UAAU,IAAI1I,EAAO,aAAc,IAAI0B,EAAc,IACtDwM,IACA,SAACpN,GAEG,IACI+tC,EADmB/tC,EAAW,GAAG1I,MACb4J,cAAF,MAEtB,IAAI6sC,EAAGC,cAAc,cAErB,OAAOD,EAAGF,gBAEX,GAAO,EAAO,6JAA6J,IAElL,EAAKjmC,UAAU,IAAI1I,EAAO,aAAc,IAAI0B,EAAc,IACtDwM,IACA,SAACpN,GAEG,IACI+tC,EADmB/tC,EAAW,GAAG1I,MACb4J,cAAF,MAEtB,IAAI6sC,EAAGC,cAAc,cAErB,OAAOD,EAAGD,gBAEX,GAAO,EAAO,6JAA6J,IAElL,EAAKlmC,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IACpDwM,IACA,SAACpN,GAEG,IACI+tC,EADmB/tC,EAAW,GAAG1I,MACb4J,cAAF,MAEtB,IAAI6sC,EAAGC,cAAc,YAErB,OAAOD,EAAGzK,SAEX,GAAO,EAAO,4LAA4L,IAEjN,EAAK17B,UAAU,IAAI1I,EAAO,gBAAiB,IAAI0B,EAAc,CACzD,CAAErI,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChGwO,IACA,SAACzN,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC6oC,EAAYngC,EAAW,GAAG1I,MAC1B0mC,EAAYh+B,EAAW,GAAG1I,MAC1By2C,EAAkBj3C,EAAEoK,cAAF,MAEtB,IAAI6sC,EAAGC,cAAc,iBAErB,OAAOD,EAAG7B,cAAc/L,EAAGnC,MAE5B,GAAO,EAAO,gFAAgF,IAErG,EAAKp2B,UAAU,IAAI1I,EAAO,eAAgB,IAAI0B,EAAc,CACxD,CAAErI,WAAY,SAAUgG,KAAM,MAAM8O,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACtFwO,IACA,SAACzN,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC+2C,EAAuBruC,EAAW,GAAG1I,MAE5B,MAAT+2C,GACAj4C,EAAO6b,KAAKC,iBAAiBT,eAAe,uEAGhD,IAAIs8B,EAAkBj3C,EAAEoK,cAAF,MAClBotC,EAAmBD,EAAMntC,cAAN,MAEvB,IAAI6sC,EAAGC,cAAc,gBAErB,OAAOD,EAAGQ,aAAaD,MAExB,GAAO,EAAO,+FAA+F,IAEpH,EAAK1mC,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,CACrD,CAAErI,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChG8Q,IACA,SAAC/P,GAEG,IACI+tC,EADmB/tC,EAAW,GAAG1I,MACb4J,cAAF,MAClBi/B,EAAYngC,EAAW,GAAG1I,MAC1B0mC,EAAYh+B,EAAW,GAAG1I,MAE1By2C,EAAGC,cAAc,cAErBD,EAAG3N,KAAKD,EAAI4N,EAAGF,aAAc7P,EAAI+P,EAAGD,iBAErC,GAAO,EAAO,yGAAyG,IAE9H,EAAKlmC,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,WAAYgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACvG8Q,IACA,SAAC/P,GAEG,IACI+tC,EADmB/tC,EAAW,GAAG1I,MACb4J,cAAF,MAClBstC,EAAmBxuC,EAAW,GAAG1I,MAEjCy2C,EAAGC,cAAc,aAErBD,EAAG3H,OAAOoI,EAAWT,EAAGzK,UAEzB,GAAO,EAAO,8CAA8C,IAEnE,EAAK17B,UAAU,IAAI1I,EAAO,aAAc,IAAI0B,EAAc,CACtD,CAAErI,WAAY,UAAWgG,KAAMkP,GAAsBJ,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACvG8Q,IACA,SAAC/P,GAEG,IACI+tC,EADmB/tC,EAAW,GAAG1I,MACb4J,cAAF,MAClBmsB,EAAmBrtB,EAAW,GAAG1I,MAEjCy2C,EAAGC,cAAc,eAErBD,EAAGU,WAAWphB,MAEf,GAAO,EAAO,yFAAyF,IAE9G,EAAKzlB,UAAU,IAAI1I,EAAO,eAAgB,IAAI0B,EAAc,CACxD,CAAErI,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChG,KACA,MACA,GAAO,EAAO,wEAAwE,IAE1F,EAAK2I,UAAU,IAAI1I,EAAO,eAAgB,IAAI0B,EAAc,CACxD,CAAErI,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChG,KACA,MACA,GAAO,EAAO,wEAAwE,IAE1F,EAAK2I,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,CACvD,CAAErI,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,MAAOgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC/F,KACA,MACA,GAAO,EAAO,wHAAwH,IAE1I,EAAK2I,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,CACrD,CAAErI,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,MAAOgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC/F,KACA,MACA,GAAO,EAAO,+GAA+G,IAEjI,EAAK2I,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,CACvD,CAAErI,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChG,KACA,MACA,GAAO,EAAO,iFAAiF,IAEnG,EAAK2I,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,CAChD,CAAErI,WAAY,oBAAqBgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChH8Q,IACA,SAAC/P,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCwuB,EAAgB9lB,EAAW,GAAG1I,MAC9By2C,EAAkBj3C,EAAEoK,cAAF,MAElB6sC,EAAGC,cAAc,SAErBD,EAAGW,KAAK5oB,MAET,GAAO,EAAO,wEAAwE,IAE7F,EAAKle,UAAU,IAAI1I,EAAO,kCAAmC,IAAI0B,EAAc,IAC3EmP,IACA,SAAC/P,GAE0BA,EAAW,GAAG1I,MACb4J,cAAF,MAEnBirC,gBAAiB,KAErB,GAAO,EAAO,yOAAyO,IAE9P,EAAKvkC,UAAU,IAAI1I,EAAO,iCAAkC,IAAI0B,EAAc,IAC1EmP,IACA,SAAC/P,GAE0BA,EAAW,GAAG1I,MACb4J,cAAF,MAEnBirC,gBAAiB,KAErB,GAAO,EAAO,iPAAiP,IAEtQ,EAAKvkC,UAAU,IAAI1I,EAAO,kCAAmC,IAAI0B,EAAc,CAC3E,CAAErI,WAAY,QAASgG,KAAMkP,GAAsBJ,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACrG8Q,IACA,SAAC/P,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCq3C,EAAiB3uC,EAAW,GAAG1I,MACbR,EAAEoK,cAAF,MAEnBorC,gCAAkCqC,KAEtC,GAAO,EAAO,2GAA2G,IAEhI,EAAK/mC,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,CAChD,CAAErI,WAAY,oBAAqBgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChH8Q,IACA,SAAC/P,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCwuB,EAAgB9lB,EAAW,GAAG1I,MAC9By2C,EAAkBj3C,EAAEoK,cAAF,MAElB6sC,EAAGC,cAAc,SAErBD,EAAGW,KAAK5oB,MAET,GAAO,EAAO,wEAAwE,IAE7F,EAAKle,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,IAArC,OAEX,SAACZ,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCy2C,EAAkBj3C,EAAEoK,cAAF,MAEtB,IAAI6sC,EAAGC,cAAc,QAErB,OAAOD,EAAGa,QAAe93C,EAAEsK,UAE5B,GAAO,EAAO,6DAA6D,IAGlF,EAAKwG,UAAU,IAAI1I,EAAO,eAAgB,IAAI0B,EAAc,IACxDmP,IACA,SAAC/P,GAEG,IACI+tC,EADmB/tC,EAAW,GAAG1I,MACb4J,cAAF,MAEtB,IAAI6sC,EAAGC,cAAc,gBAErB,OAAOD,EAAGc,kBAEX,GAAO,EAAO,4CAA4C,IAEjE,EAAKjnC,UAAU,IAAI1I,EAAO,aAAc,IAAI0B,EAAc,IACtDmP,IACA,SAAC/P,GAEG,IACI+tC,EADmB/tC,EAAW,GAAG1I,MACb4J,cAAF,MAEtB,IAAI6sC,EAAGC,cAAc,cAErB,OAAOD,EAAGe,gBAEX,GAAO,EAAO,+CAA+C,IA/b9C,EAF9B,kBAAgC,GAwcV,GAAtB,YA0CI,WAAY19B,EAA0BwB,GAA4B,kBAE9D,0BAAMxB,EAAawB,KAnCvB0wB,MAAgB,EAEhB,EAAAyL,kBAA6B,KAC7B,EAAAC,sBAAiC,KACjC,EAAAC,iBAAkB,EAElB,EAAA3C,iCAA2C,EAE3C,EAAAD,2BAAqC,EAErC,EAAAF,gBAA0B,EAqCtB,IAVA,IAQII,EAA6B,KAEjC,MAVoB,CAChB,CAAEh0C,WAAY,UAAWuH,UAAW,yBACpC,CAAEvH,WAAY,YAAauH,UAAW,yBACtC,CAAEvH,WAAY,YAAauH,UAAW,oBACtC,CAAEvH,WAAY,aAAcuH,UAAW,oBACvC,CAAEvH,WAAY,aAAcuH,UAAW,qBAK3C,eAA8B,CAAzB,IAAIuuB,EAAE,KACHxuB,EAAyB+S,EAAcxR,MAAO6f,qBAAqB,KAAOoN,EAAG91B,WAAa81B,EAAGvuB,WAE1E,OAAnBD,aAAM,EAANA,EAAQD,UAAqC,OAAlBC,aAAM,EAANA,EAAQF,UAEzB,MAAN4sC,IACAA,EAAK,CACDZ,YAAa,MACb3R,MAAO,GACP71B,QAAS,IAEb,EAAK4iC,YAAYW,oBAAoBvlC,KAAKoqC,IAG9CA,EAAGvS,MAAM3L,EAAG91B,WAAWmW,gBAAiB,EACxC69B,EAAGpoC,QAAQkqB,EAAG91B,WAAWmW,eAAiB7O,GA7BY,S,UA1CtE,e,EAAA,G,EAAA,gCAqBa8rC,GAKL,GAHAxtC,KAAK+wC,eAAiBvD,EAAYuD,eAClC/wC,KAAKgxC,eAAiBxD,EAAYwD,eAEG,MAAjCxD,EAAYoD,kBAA2B,CACvC5wC,KAAK4wC,kBAAoB,GADc,2BAEvC,YAAcpD,EAAYoD,kBAA1B,oDAAS52C,EAAT,QAA6CgG,KAAK4wC,kBAAkB5sC,KAAKpL,OAAOwqB,OAAO,GAAIppB,KAFpD,mFAK3CgG,KAAKixC,oBAAmB,GAExBjxC,KAAK8wC,gBAAkBtD,EAAYsD,gBACnC9wC,KAAKmuC,gCAAkCX,EAAYW,gCACnDnuC,KAAKkuC,0BAA4BV,EAAYU,0BAE7CluC,KAAKytC,cAAc9F,eAAeF,SAAS+F,EAAYC,cAAc1F,UAAUJ,gBAC/E3nC,KAAKytC,cAAcyD,oBAtC3B,yCA8EuBC,GACfnxC,KAAK8wC,gBAAkBK,IA/E/B,qCAmFQ,IAAIC,EAA4BpxC,KAAKytC,cAAcjzB,OAC/C62B,EAAeD,EAAUE,SAASvvC,OAAS,EAC/CqvC,EAAUG,cAAcvxC,KAAKytC,cAAe4D,KArFpD,mCAyFwCrxC,KAAKytC,cAAcjzB,OACzC+2B,cAAcvxC,KAAKytC,cAAe,KA1FpD,0CA8F6C,MAAjCztC,KAAK4oC,YAAYN,eACjBtoC,KAAKyU,cAAc1R,cAAnB,MAA4C/C,KACbA,KAAK4oC,YAAYN,aACpCr0B,IAAIjU,KAAKyU,kBAjGjC,oCAqGkB/S,GACV,QAAI1B,KAAKitC,cACLjtC,KAAK4oC,YAAY31B,YAAYK,eAAe,wBAA0B5R,EAAS,sEACxE,KAxGnB,2BA6GSimB,GACD,IAAIpvB,EAAIguC,GAAYoH,mBAAmBhmB,GAEnC3nB,KAAKytC,cAAc8C,OAEnBvwC,KAAKytC,cAAc8C,KAAOh4C,EAAEovB,OAEhC3nB,KAAKwxC,WApHb,iCAuHetiB,GAEPlvB,KAAKytC,cAAcve,QAAUA,IAzHrC,mCA4HiBse,GAGT,GAA6B,MAAxBxtC,KAAA,cAAiE,MAA/BwtC,EAAW,aAC9C,OAAOA,EAAY4C,aAAapwC,MAGpCA,KAAKytC,cAAcyD,kBACnB1D,EAAYC,cAAcyD,kBAE1B,IAAIO,EAAKzxC,KAAKytC,cAAciE,YACxBC,EAAMnE,EAAYC,cAAciE,YAEpC,QAAID,EAAG9c,KAAOgd,EAAIzc,OAASyc,EAAIhd,KAAO8c,EAAGvc,UAErCuc,EAAG1R,IAAM4R,EAAIC,QAAUD,EAAI5R,IAAM0R,EAAGG,UAEpCpE,EAAW,OACJA,EAAY4C,aAAapwC,MAGN,MAA1BA,KAAK4wC,mBAA8D,MAAjCpD,EAAYoD,oBAG9C5wC,KAAK8wC,iBAAiB9wC,KAAK6xC,sBAC3BrE,EAAYsD,iBAAiBtD,EAAYqE,sBAEtCxC,GAAsBrvC,KAAK6wC,sBAAuBrD,EAAYqD,2BAvJ7E,oCA2JkB7O,EAAWnC,GACrB,QAAK7/B,KAAKytC,cAAciE,YAAYt9B,SAAS4tB,EAAGnC,KAElB,MAA1B7/B,KAAK4wC,oBAEL5wC,KAAK8wC,iBAAiB9wC,KAAK6xC,sBACxB7C,GAAoBhvC,KAAK6wC,sBAAuB,CAAE7O,EAAGA,EAAGnC,EAAGA,QAjK1E,4CAqKQ,IAAI7lC,EAAI,IAAIutC,KAAKiF,MAAMxsC,KAAK+wC,eAAgB/wC,KAAKgxC,gBACjDhxC,KAAKytC,cAAcyD,kBACnBlxC,KAAKytC,cAAc1F,UAAU+J,eAAeC,MAAM/3C,EAAGA,GAErDgG,KAAK6wC,sBAAwB,GAC7B,IAAIv4C,EAAI0H,KAAKytC,cAAc1F,UAAU+J,eANtB,uBAOf,YAAc9xC,KAAK4wC,kBAAnB,+CAAsC,KAA7B,EAA6B,QAClC5wC,KAAK6wC,sBAAsB7sC,KAAK,CAC5Bg+B,EAAI1pC,EAAE4O,EAAI,EAAE86B,EAAM1pC,EAAEC,EAAI,EAAEsnC,EAAKvnC,EAAE05C,GACjCnS,EAAIvnC,EAAE25C,EAAI,EAAEjQ,EAAM1pC,EAAEE,EAAI,EAAEqnC,EAAKvnC,EAAE45C,MAV1B,kFAaflyC,KAAKixC,oBAAmB,KAjLhC,sCAsLQ,IAAIkB,EAASnyC,KAAKytC,cAAciE,WAAU,GACtCU,EAASpyC,KAAK4oC,YAAYoC,IAAIoH,OAClC,OAAOD,EAAOjd,MAAQkd,EAAOzd,MAAQwd,EAAOxd,KAAOyd,EAAOld,OACnDid,EAAOP,OAASQ,EAAOrS,KAAOoS,EAAOpS,IAAMqS,EAAOR,SAzLjE,2BA4LSnN,EAAYC,GACb1kC,KAAKytC,cAAc9F,eAAeE,UAAUpD,EAAIC,GAChD1kC,KAAKytC,cAAc1F,UAAUC,WAC7BhoC,KAAKytC,cAAcyD,kBACnBlxC,KAAKixC,oBAAmB,KAhMhC,6BAmMWnB,EAAoBuC,EAAaC,GAGpC,GADAtyC,KAAKytC,cAAcyD,kBACT,MAANmB,EAAY,CACZ,IAAIr4C,EAAI,IAAIutC,KAAKiF,MAAMxsC,KAAK+wC,eAAgB/wC,KAAKgxC,gBACjDhxC,KAAKytC,cAAc9F,eAAeoK,MAAM/3C,EAAGA,GAC3Cq4C,EAAKr4C,EAAEgoC,EACPsQ,EAAKt4C,EAAE6lC,MACJ,CACH,IAAI,EAAI,IAAI0H,KAAKiF,MAAM6F,EAAIC,GAC3BtyC,KAAK4oC,YAAYlB,MAAMC,eAAeoK,MAAM,EAAG,GAC/C/xC,KAAKytC,cAAc1F,UAAU+J,eAAerF,aAAa,EAAG,GAC5DzsC,KAAKytC,cAAc9F,eAAeoK,MAAM,EAAG,GAC3CM,EAAK,EAAErQ,EACPsQ,EAAK,EAAEzS,EAGX7/B,KAAKytC,cAAc9F,eAAeE,WAAWwK,GAAKC,GAClDtyC,KAAKytC,cAAc9F,eAAeM,QAAQ6H,EAAa,IAAMzkC,KAAK+5B,IAClEplC,KAAKytC,cAAc9F,eAAeE,UAAUwK,EAAIC,GAChDtyC,KAAKytC,cAAc1F,UAAUC,WAC7BhoC,KAAKixC,oBAAmB,GAExBjxC,KAAKmlC,OAAS2K,IA1NtB,4BA6NUnP,EAAgB0R,EAAaC,GAG/B,GADAtyC,KAAKytC,cAAcyD,kBACT,MAANmB,EAAY,CACZ,IAAIr4C,EAAI,IAAIutC,KAAKiF,MAAMxsC,KAAK+wC,eAAgB/wC,KAAKgxC,gBACjDhxC,KAAKytC,cAAc9F,eAAeoK,MAAM/3C,EAAGA,GAC3Cq4C,EAAKr4C,EAAEgoC,EACPsQ,EAAKt4C,EAAE6lC,MACJ,CACH,IAAI,EAAI,IAAI0H,KAAKiF,MAAM6F,EAAIC,GAC3BtyC,KAAK4oC,YAAYlB,MAAMC,eAAeoK,MAAM,EAAG,GAC/C/xC,KAAKytC,cAAc1F,UAAU+J,eAAerF,aAAa,EAAG,GAC5DzsC,KAAKytC,cAAc9F,eAAeoK,MAAM,EAAG,GAC3CM,EAAK,EAAErQ,EACPsQ,EAAK,EAAEzS,EAGX7/B,KAAKytC,cAAc9F,eAAeE,WAAWwK,GAAKC,GAClDtyC,KAAKytC,cAAc9F,eAAeO,MAAMvH,EAAQA,GAChD3gC,KAAKytC,cAAc9F,eAAeE,UAAUwK,EAAIC,GAChDtyC,KAAKytC,cAAc1F,UAAUC,WAE7BhoC,KAAKixC,oBAAmB,KAnPhC,mCAwPQ,IAAIj3C,EAAI,IAAIutC,KAAKiF,MAAMxsC,KAAK+wC,eAAgB/wC,KAAKgxC,gBAKjD,OAJAhxC,KAAKytC,cAAcyD,kBAEnBlxC,KAAKytC,cAAc1F,UAAU+J,eAAeC,MAAM/3C,EAAGA,GACrDgG,KAAK4oC,YAAYlB,MAAMC,eAAe8E,aAAazyC,EAAGA,GAC/CA,EAAEgoC,IA7PjB,mCAiQQ,IAAIhoC,EAAI,IAAIutC,KAAKiF,MAAMxsC,KAAK+wC,eAAgB/wC,KAAKgxC,gBAIjD,OAHAhxC,KAAKytC,cAAcyD,kBACnBlxC,KAAKytC,cAAc1F,UAAU+J,eAAeC,MAAM/3C,EAAGA,GACrDgG,KAAK4oC,YAAYlB,MAAMC,eAAe8E,aAAazyC,EAAGA,GAC/CA,EAAE6lC,IArQjB,gCA2QQ,8CAC2B,MAAvB7/B,KAAKuyC,gBACLvyC,KAAKuyC,eAAex/B,OAAO/S,KAAKyU,iBA7Q5C,yCAiRuB+9B,EAA0BhD,GACzC,IAAIiD,EAA2B,GADyB,uBAExD,YAAkBD,EAAYE,OAA9B,+CAAsC,KAA7BxC,EAA6B,QACUA,EAAMntC,cAAN,MAC5BqtC,aAAapwC,OACzByyC,EAAgBzuC,KAAK,CACjB5D,KAAMovC,EACNr2C,MAAO+2C,KAPqC,kFAYxD,OAAOuC,O,6BA7Rf,GAA0C,I,0nCC3cnC,IAAM,GAAb,YAEI,WAAYx6C,GAAc,kBAEtB,0BAAM,SAAUA,EAAQ,yFAEnBqa,aAAoBra,EAAOma,UAAUC,QAAQ,UAIlD,IAAIsgC,EAA0B,EAAK16C,OAAOma,UAAUC,QAAQ,SARtC,OAUtB,EAAK5I,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,UAAWgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACnG,CAAE1G,WAAY,UAAWgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACnG,CAAE1G,WAAY,OAAQgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACnG,CAAE1G,WAAY,MAAOgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAClG,CAAE1G,WAAY,QAASgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACpG,CAAE1G,WAAY,SAAUgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACrG,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCy5C,EAAkB/wC,EAAW,GAAG1I,MAChC05C,EAAkBhxC,EAAW,GAAG1I,MAChCw7B,EAAe9yB,EAAW,GAAG1I,MAC7B4mC,EAAcl+B,EAAW,GAAG1I,MAC5BmoC,EAAgBz/B,EAAW,GAAG1I,MAC9BqoC,EAAiB3/B,EAAW,GAAG1I,MAE/B25C,EAAK,IAAI,GAAaF,EAASC,EAASle,EAAMoL,EAAKuB,EAAOE,EAAQvpC,EAAO6b,KAAKC,iBAAkBpb,GACpGA,EAAEoK,cAAF,MAA2B+vC,KAE5B,GAAO,EAAO,sKAAsK,IAE3L,EAAKrpC,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,IAAKgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC7F,CAAE1G,WAAY,IAAKgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC7F6xC,GACA,SAAC9wC,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC6oC,EAAYngC,EAAW,GAAG1I,MAC1B0mC,EAAYh+B,EAAW,GAAG1I,MAG9B,OAFuBR,EAAEoK,cAAF,MAEbgwC,iBAAiB/Q,EAAGnC,EAAG8S,MAElC,GAAO,EAAO,4CAA4C,IAEjE,EAAKlpC,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,IAAKgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC7F,CAAE1G,WAAY,IAAKgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC7F,CAAE1G,WAAY,QAASgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACjG,CAAE1G,WAAY,QAASgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACpG8Q,IACA,SAAC/P,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC6oC,EAAYngC,EAAW,GAAG1I,MAC1B0mC,EAAYh+B,EAAW,GAAG1I,MAC1BwuB,EAAgB9lB,EAAW,GAAG1I,MAC9BqtC,EAAgB3kC,EAAW,GAAG1I,MACXR,EAAEoK,cAAF,MAEpBiwC,WAAWhR,EAAGnC,EAAGlY,EAAO6e,MAE5B,GAAO,EAAO,qJAAqJ,IAE1K,EAAK/8B,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,IAAKgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC7F,CAAE1G,WAAY,IAAKgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC7F,CAAE1G,WAAY,QAASgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACjG8Q,IACA,SAAC/P,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC6oC,EAAYngC,EAAW,GAAG1I,MAC1B0mC,EAAYh+B,EAAW,GAAG1I,MAC1BwuB,EAAgB9lB,EAAW,GAAG1I,MACXR,EAAEoK,cAAF,MAEpBiwC,WAAWhR,EAAGnC,EAAGlY,MAErB,GAAO,EAAO,6HAA6H,IAElJ,EAAKle,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,IAAKgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC7F,CAAE1G,WAAY,IAAKgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC7F,CAAE1G,WAAY,QAASgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACpG8Q,IACA,SAAC/P,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC6oC,EAAYngC,EAAW,GAAG1I,MAC1B0mC,EAAYh+B,EAAW,GAAG1I,MAC1BwuB,EAAgB9lB,EAAW,GAAG1I,MACXR,EAAEoK,cAAF,MAEpBiwC,WAAWhR,EAAGnC,EAAGlY,MAErB,GAAO,EAAO,qPAAqP,IAE1Q,EAAKle,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,IAAKgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC7F,CAAE1G,WAAY,IAAKgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC7F,CAAE1G,WAAY,QAASgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACpG,CAAE1G,WAAY,QAASgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACpG8Q,IACA,SAAC/P,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC6oC,EAAYngC,EAAW,GAAG1I,MAC1B0mC,EAAYh+B,EAAW,GAAG1I,MAC1BwuB,EAAgB9lB,EAAW,GAAG1I,MAC9BqtC,EAAgB3kC,EAAW,GAAG1I,MACXR,EAAEoK,cAAF,MAEpBiwC,WAAWhR,EAAGnC,EAAGlY,EAAO6e,MAE5B,GAAO,EAAO,2QAA2Q,IAEhS,EAAK/8B,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,IAAKgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC7F,CAAE1G,WAAY,IAAKgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC7F,CAAE1G,WAAY,oBAAqBgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChHwO,IACA,SAACzN,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC6oC,EAAYngC,EAAW,GAAG1I,MAC1B0mC,EAAYh+B,EAAW,GAAG1I,MAC1BwuB,EAAgB9lB,EAAW,GAAG1I,MAGlC,OAFuBR,EAAEoK,cAAF,MAEbkwC,SAASjR,EAAGnC,EAAGlY,MAE1B,GAAO,EAAO,mSAAmS,IAExT,EAAKle,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,IAAKgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC7F,CAAE1G,WAAY,IAAKgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC7F,CAAE1G,WAAY,QAASgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACjGwO,IACA,SAACzN,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC6oC,EAAYngC,EAAW,GAAG1I,MAC1B0mC,EAAYh+B,EAAW,GAAG1I,MAC1BwuB,EAAgB9lB,EAAW,GAAG1I,MAGlC,OAFuBR,EAAEoK,cAAF,MAEbkwC,SAASjR,EAAGnC,EAAGlY,EAAO,MAEjC,GAAO,EAAO,kMAAkM,IAGvN,EAAKle,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,QAASgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACjG,CAAE1G,WAAY,QAASgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACpG8Q,IACA,SAAC/P,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCwuB,EAAgB9lB,EAAW,GAAG1I,MAC9BqtC,EAAgB3kC,EAAW,GAAG1I,MACXR,EAAEoK,cAAF,MAEpBmwC,QAAQvrB,EAAO6e,MAEnB,GAAO,EAAO,qJAAqJ,IAE1K,EAAK/8B,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,oBAAqBgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChH8Q,IACA,SAAC/P,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCwuB,EAAgB9lB,EAAW,GAAG1I,MACXR,EAAEoK,cAAF,MAEpBmwC,QAAQvrB,MAEZ,GAAO,EAAO,sPAAsP,IAE3Q,EAAKle,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,IAArC,OAEX,SAACZ,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCy2C,EAAmBj3C,EAAEoK,cAAF,MAEvB,IAAI6sC,EAAGC,cAAc,QAErB,OAAOD,EAAGa,QAAe93C,EAAEsK,UAE5B,GAAO,EAAO,8DAA8D,IAlM7D,EAF9B,kBAAiC,GA2MpB,GAAb,YAuBI,WAAmBkwC,EAAgBC,EAAgBze,EAAqBoL,EAAoBuB,EAAsBE,EAC9GvuB,EAA0BwB,GAA4B,yBACtD,0BAAMxB,EAAawB,KAFJ0+B,UAAgB,EAAAC,UAAgB,EAAAze,OAAqB,EAAAoL,MAAoB,EAAAuB,QAAsB,EAAAE,SAG9G,EAAKuP,eAAiBpc,EAAO2M,EAAQ,EACrC,EAAK0P,eAAiBjR,EAAMyB,EAAS,EAErC,EAAKoP,kBAAoB,CACrB,CAAE5O,EAAGrN,EAAMkL,EAAGE,GAAO,CAAEiC,EAAGrN,EAAMkL,EAAGE,EAAMyB,GAAU,CAAEQ,EAAGrN,EAAO2M,EAAOzB,EAAGE,EAAMyB,GAAU,CAAEQ,EAAGrN,EAAO2M,EAAOzB,EAAGE,IAGnH,EAAKyR,SACL,EAAK6B,oBAViD,E,UAxB9D,e,EAAA,G,EAAA,+BAMYvwC,GAKJ,IAHA,IAAIwwC,EAAoB,IAAI,EAAcxwC,GACtCywC,EAAmB,IAAIC,EAAaxzC,KAAKmzC,QAASnzC,KAAKozC,QAASpzC,KAAK20B,KAAM30B,KAAK+/B,IAAK//B,KAAKshC,MAAOthC,KAAKwhC,OAAQxhC,KAAK4oC,YAAY31B,YAAaqgC,GAEvIp7C,EAAI,EAAGA,EAAI8H,KAAKyzC,WAAW1xC,OAAQ7J,IAAKq7C,EAAGE,WAAWv7C,GAAK8H,KAAKyzC,WAAWv7C,GAQpF,OAPAq7C,EAAGG,YAAYC,SAEfL,EAAGvwC,cAAH,MAA4BwwC,EAE5BA,EAAG9L,SAASznC,MACZuzC,EAAG/B,SAEI8B,IAnBf,+BAuCkC,MAAtBtzC,KAAKytC,gBACLztC,KAAK4zC,eACL5zC,KAAK4oC,YAAYlB,MAAMmE,SAAS7rC,KAAKytC,kBAzCjD,qCAgDQ,IAAIoG,EAAc,IAAIC,aAAa9zC,KAAKmzC,QAAUnzC,KAAKozC,QAAU,EAAI,GACrEpzC,KAAKyzC,WAAa,IAAIK,aAAa9zC,KAAKmzC,QAAUnzC,KAAKozC,QAAU,EAAI,GAMrE,IALA,IAAIW,EAAmB,IAAIC,WAAWh0C,KAAKmzC,QAAUnzC,KAAKozC,QAAU,GAEhEa,EAAQj0C,KAAKshC,MAAQthC,KAAKmzC,QAC1Be,EAAQl0C,KAAKwhC,OAASxhC,KAAKozC,QAEtBvT,EAAI,EAAGA,EAAI7/B,KAAKozC,QAASvT,IAC9B,IAAK,IAAImC,EAAI,EAAGA,EAAIhiC,KAAKmzC,QAASnR,IAAK,CACnC,IAAIrN,EAAOqN,EAAIiS,EAAQj0C,KAAK20B,KACxBoL,EAAMF,EAAIqU,EAAQl0C,KAAK+/B,IACvB99B,EAAmC,GAA1B+/B,EAAInC,EAAK7/B,KAAKmzC,SAC3BU,EAAY5xC,GAAS0yB,EACrBkf,EAAY5xC,EAAQ,GAAK89B,EACzB8T,EAAY5xC,EAAQ,GAAK0yB,EAAOsf,EAChCJ,EAAY5xC,EAAQ,GAAK89B,EACzB8T,EAAY5xC,EAAQ,GAAK0yB,EACzBkf,EAAY5xC,EAAQ,GAAK89B,EAAMmU,EAC/BL,EAAY5xC,EAAQ,GAAK0yB,EAAOsf,EAChCJ,EAAY5xC,EAAQ,GAAK89B,EAAMmU,EAE/B,IAAIvsB,GAASqa,EAAInC,GAAK,EACtB59B,EAAmC,IAA1B+/B,EAAInC,EAAK7/B,KAAKmzC,SACvB,IAAK,IAAI,EAAI,EAAG,EAAI,GAAI,IACpBnzC,KAAKyzC,WAAWxxC,EAAQ,GAAK0lB,EAQzC,IAFA,IAAIzvB,EAAY,EAEP,EAAI,EAAG,EAAI8H,KAAKozC,QAAS,IAC9B,IAAK,IAAI,EAAI,EAAG,EAAIpzC,KAAKmzC,QAAS,IAAK,CAEnC,IAAI,EAAiC,GAAxB,EAAI,EAAInzC,KAAKmzC,SAE1BY,EADA77C,EAA6B,GAAxB,EAAI,EAAI8H,KAAKmzC,UACI,EACtBY,EAAiB77C,EAAI,GAAK,EAAQ,EAClC67C,EAAiB77C,EAAI,GAAK,EAAQ,EAClC67C,EAAiB77C,EAAI,GAAK,EAAQ,EAClC67C,EAAiB77C,EAAI,GAAK,EAAQ,EAClC67C,EAAiB77C,EAAI,GAAK,EAAQ,EAM1C,IAAIi8C,EAAe,IAAI5M,KAAK6M,OAAOP,GAAa,GAChD7zC,KAAK0zC,YAAc,IAAInM,KAAK6M,OAAOp0C,KAAKyzC,YAAY,GACpD,IAAIY,EAAoB,IAAI9M,KAAK6M,OAAOL,GAAkB,GAAM,GAI1DO,GAAW,IAAI/M,KAAKgN,UACrB7qC,aAAa,kBACVyqC,EACA,GAAGK,SAASH,GAEf3qC,aAAa,SACV1J,KAAK0zC,YACL,GAEFe,EAASlN,KAAKmN,OAAOC,KAAZ,4kBA4Bf30C,KAAKytC,cAAgB,IAAIlG,KAAKqN,KAAKN,EAAUG,EAAQ,KAAMlN,KAAKsN,WAAWC,WAE3E90C,KAAKytC,cAAcxpC,SAASb,IAAIpD,KAAK20B,KAAM30B,KAAK+/B,OA7IxD,uCAiJ4BiC,EAAWnC,EAAW8S,GAC1C,IAAIz6C,EAA+B,IAA1B8pC,EAAInC,EAAK7/B,KAAKmzC,SAGnBn6C,EAAIgH,KAAKyzC,WAAWv7C,GACpB68C,EAAI/0C,KAAKyzC,WAAWv7C,EAAI,GACxB+5C,EAAIjyC,KAAKyzC,WAAWv7C,EAAI,GAGxB21C,GAFI7tC,KAAKyzC,WAAWv7C,EAAI,GAEH,IAAI,EAAcy6C,IAEvC/wC,EAA8B,CAC9BozC,IAAK3pC,KAAK01B,MAAU,IAAJ/nC,GAChBi8C,MAAO5pC,KAAK01B,MAAU,IAAJgU,GAClBG,KAAM7pC,KAAK01B,MAAU,IAAJkR,GACjBkD,IAAK5O,GAAY6O,iBAAuC,MAAtB/pC,KAAK01B,MAAU,IAAJ/nC,GAA2C,IAAtBqS,KAAK01B,MAAU,IAAJgU,GAAmB1pC,KAAK01B,MAAU,IAAJkR,KAK/G,OAFApE,EAAI9qC,cAAgBnB,EAEbisC,IArKf,+BA0KoB7L,EAAWnC,EAAWlY,EAAwB6e,GAC1D,IACIjuC,EADAL,EAA+B,IAA1B8pC,EAAInC,EAAK7/B,KAAKmzC,SAGvB,GAAoB,iBAATxrB,EAAmB,CAC1B,IAAI0tB,EAAK9O,GAAYoH,mBAAmBhmB,GACxCpvB,EAAI88C,EAAG1tB,MACC0tB,EAAG7O,WAEXjuC,EAAIovB,EAGR,IAAI3uB,IAAU,SAAJT,IAAiB,IAAM,IAC7Bw8C,IAAU,MAAJx8C,IAAe,GAAK,IAC1B05C,GAAU,IAAJ15C,GAAa,IAEnB+8C,EAAKt1C,KAAKyzC,WAAWv7C,GACrBq9C,EAAKv1C,KAAKyzC,WAAWv7C,EAAI,GACzBs9C,EAAKx1C,KAAKyzC,WAAWv7C,EAAI,GAE7B,OAAOmT,KAAKoqC,IAAIz8C,EAAIs8C,GAAM,IAAOjqC,KAAKoqC,IAAIV,EAAIQ,GAAM,IAAOlqC,KAAKoqC,IAAIxD,EAAIuD,GAAM,KA9LtF,iCAkMsBxT,EAAWnC,EAAWlY,EAAwB6e,GAC5D,IACIjuC,EADAL,EAA+B,IAA1B8pC,EAAInC,EAAK7/B,KAAKmzC,SAGvB,GAAoB,iBAATxrB,EAAmB,CAC1B,IAAI0tB,EAAK9O,GAAYoH,mBAAmBhmB,GACxCpvB,EAAI88C,EAAG1tB,MACM,MAAT6e,IAAeA,EAAQ6O,EAAG7O,YAE9BjuC,EAAIovB,EACS,MAAT6e,IAAeA,EAAQ,GAG/B,IAAIxtC,IAAU,SAAJT,IAAiB,IAAM,IAC7Bw8C,IAAU,MAAJx8C,IAAe,GAAK,IAC1B05C,GAAU,IAAJ15C,GAAa,IAEvByH,KAAKyzC,WAAWv7C,GAAKc,EACrBgH,KAAKyzC,WAAWv7C,EAAI,GAAK68C,EACzB/0C,KAAKyzC,WAAWv7C,EAAI,GAAK+5C,EACzBjyC,KAAKyzC,WAAWv7C,EAAI,GAAKsuC,EACzBxmC,KAAKyzC,WAAWv7C,EAAI,GAAKc,EACzBgH,KAAKyzC,WAAWv7C,EAAI,GAAK68C,EACzB/0C,KAAKyzC,WAAWv7C,EAAI,GAAK+5C,EACzBjyC,KAAKyzC,WAAWv7C,EAAI,GAAKsuC,EACzBxmC,KAAKyzC,WAAWv7C,EAAI,GAAKc,EACzBgH,KAAKyzC,WAAWv7C,EAAI,GAAK68C,EACzB/0C,KAAKyzC,WAAWv7C,EAAI,IAAM+5C,EAC1BjyC,KAAKyzC,WAAWv7C,EAAI,IAAMsuC,EAC1BxmC,KAAKyzC,WAAWv7C,EAAI,IAAMc,EAC1BgH,KAAKyzC,WAAWv7C,EAAI,IAAM68C,EAC1B/0C,KAAKyzC,WAAWv7C,EAAI,IAAM+5C,EAC1BjyC,KAAKyzC,WAAWv7C,EAAI,IAAMsuC,EAC1BxmC,KAAK0zC,YAAYC,WAnOzB,8BAsOmBhsB,EAAwB6e,GACnC,IAAIjuC,EAEJ,GAAoB,iBAATovB,EAAmB,CAC1B,IAAI0tB,EAAK9O,GAAYoH,mBAAmBhmB,GACxCpvB,EAAI88C,EAAG1tB,MACP6e,EAAQ6O,EAAG7O,WAEXjuC,EAAIovB,EAGR,IAAK,IAAIkY,EAAI,EAAGA,EAAI7/B,KAAKozC,QAASvT,IAC9B,IAAK,IAAImC,EAAI,EAAGA,EAAIhiC,KAAKmzC,QAASnR,IAAK,CACnC,IAAI9pC,EAA+B,IAA1B8pC,EAAInC,EAAK7/B,KAAKmzC,SAEnBn6C,IAAU,SAAJT,IAAiB,IAAM,IAC7Bw8C,IAAU,MAAJx8C,IAAe,GAAK,IAC1B05C,GAAU,IAAJ15C,GAAa,IAEvByH,KAAKyzC,WAAWv7C,GAAKc,EACrBgH,KAAKyzC,WAAWv7C,EAAI,GAAK68C,EACzB/0C,KAAKyzC,WAAWv7C,EAAI,GAAK+5C,EACzBjyC,KAAKyzC,WAAWv7C,EAAI,GAAKsuC,EACzBxmC,KAAKyzC,WAAWv7C,EAAI,GAAKc,EACzBgH,KAAKyzC,WAAWv7C,EAAI,GAAK68C,EACzB/0C,KAAKyzC,WAAWv7C,EAAI,GAAK+5C,EACzBjyC,KAAKyzC,WAAWv7C,EAAI,GAAKsuC,EACzBxmC,KAAKyzC,WAAWv7C,EAAI,GAAKc,EACzBgH,KAAKyzC,WAAWv7C,EAAI,GAAK68C,EACzB/0C,KAAKyzC,WAAWv7C,EAAI,IAAM+5C,EAC1BjyC,KAAKyzC,WAAWv7C,EAAI,IAAMsuC,EAC1BxmC,KAAKyzC,WAAWv7C,EAAI,IAAMc,EAC1BgH,KAAKyzC,WAAWv7C,EAAI,IAAM68C,EAC1B/0C,KAAKyzC,WAAWv7C,EAAI,IAAM+5C,EAC1BjyC,KAAKyzC,WAAWv7C,EAAI,IAAMsuC,EAGlCxmC,KAAK0zC,YAAYC,WA3QzB,qCA8Q0B3R,EAAWnC,EAAW7mC,EAAW+7C,EAAW9C,EAAWzL,GACzE,IAAItuC,EAA+B,IAA1B8pC,EAAInC,EAAK7/B,KAAKmzC,SACvBn6C,GAAK,IACL+7C,GAAK,IACL9C,GAAK,IACLjyC,KAAKyzC,WAAWv7C,GAAKc,EACrBgH,KAAKyzC,WAAWv7C,EAAI,GAAK68C,EACzB/0C,KAAKyzC,WAAWv7C,EAAI,GAAK+5C,EACzBjyC,KAAKyzC,WAAWv7C,EAAI,GAAKsuC,EACzBxmC,KAAKyzC,WAAWv7C,EAAI,GAAKc,EACzBgH,KAAKyzC,WAAWv7C,EAAI,GAAK68C,EACzB/0C,KAAKyzC,WAAWv7C,EAAI,GAAK+5C,EACzBjyC,KAAKyzC,WAAWv7C,EAAI,GAAKsuC,EACzBxmC,KAAKyzC,WAAWv7C,EAAI,GAAKc,EACzBgH,KAAKyzC,WAAWv7C,EAAI,GAAK68C,EACzB/0C,KAAKyzC,WAAWv7C,EAAI,IAAM+5C,EAC1BjyC,KAAKyzC,WAAWv7C,EAAI,IAAMsuC,EAC1BxmC,KAAKyzC,WAAWv7C,EAAI,IAAMc,EAC1BgH,KAAKyzC,WAAWv7C,EAAI,IAAM68C,EAC1B/0C,KAAKyzC,WAAWv7C,EAAI,IAAM+5C,EAC1BjyC,KAAKyzC,WAAWv7C,EAAI,IAAMsuC,EAC1BxmC,KAAK0zC,YAAYC,WAnSzB,+BAsSoB3R,EAAWnC,GACvB,IAAI3nC,EAA6B,IAAxB8pC,EAAInC,EAAI7/B,KAAKmzC,SACtB,OAA8C,MAAvC9nC,KAAK0E,MAA2B,IAArB/P,KAAKyzC,WAAWv7C,IACa,IAA3CmT,KAAK0E,MAA+B,IAAzB/P,KAAKyzC,WAAWv7C,EAAI,IAC/BmT,KAAK0E,MAA+B,IAAzB/P,KAAKyzC,WAAWv7C,EAAI,S,6BA1S3C,GAAkC,I,g+CC5M3B,IAAM,GAAb,YAEI,WAAYD,GAAc,kBAEtB,0BAAM,cAAeA,EAAQ,qGAExBqa,aAAoBra,EAAOma,UAAUC,QAAQ,UAClD,EAAKlR,YAAa,EAEP,MAAX,IAEIwxC,EAA0B,EAAK16C,OAAOma,UAAUC,QAAQ,SATtC,OAWtB,EAAK5I,UAAU,IAAI1I,EAAO,eAAgB,IAAI0B,EAAc,IACxDkwC,GACA,SAAC9wC,GAEG,IACI+tC,EADmB/tC,EAAW,GAAG1I,MACP4J,cAAF,MAE5B,OAAO6sC,EAAGmD,iBAAiBnD,EAAG8F,UAAW9F,EAAG8F,UAAW/C,MAExD,GAAO,EAAO,0CAA0C,IAE/D,EAAKlpC,UAAU,IAAI1I,EAAO,iBAAkB,IAAI0B,EAAc,IAC1DkwC,GACA,SAAC9wC,GAEG,IACI+tC,EADmB/tC,EAAW,GAAG1I,MACP4J,cAAF,MAE5B,OAAO6sC,EAAGmD,iBAAiBnD,EAAG+F,YAAa/F,EAAG+F,YAAahD,MAE5D,GAAO,EAAO,0CAA0C,IAE/D,EAAKjpC,aAAa,IAAIhJ,EAAU,cAAeuO,IAC3C,SAAC9V,GAEG,IACIs2C,EADqBt2C,EAAMS,OACKmJ,cAAJ,MAMhC5J,EAAMA,MALQ,MAAVs2C,EAKUA,EAAOmG,YAJH,SAMnB,EAAOpyC,EAAWyG,WAAW,EAAM,yBAE1C,EAAKR,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,aAAcgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACzG8Q,IACA,SAAC/P,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCqtC,EAAgB3kC,EAAW,GAAG1I,MAC9By2C,EAAwBj3C,EAAEoK,cAAF,MAExB6sC,EAAGC,cAAc,aAErBD,EAAGiG,SAASrP,MAEb,GAAO,EAAO,mIAAmI,IAExJ,EAAK/8B,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IACpDwM,IACA,SAACpN,GAEG,IACI+tC,EADmB/tC,EAAW,GAAG1I,MACP4J,cAAF,MAE5B,IAAI6sC,EAAGC,cAAc,YAErB,OAAOD,EAAGkG,aAEX,GAAO,EAAO,mIAAmI,IAExJ,EAAKrsC,UAAU,IAAI1I,EAAO,eAAgB,IAAI0B,EAAc,CACxD,CAAErI,WAAY,QAASgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACjG8Q,IACA,SAAC/P,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCwuB,EAAgB9lB,EAAW,GAAG1I,MAC9By2C,EAAwBj3C,EAAEoK,cAAF,MAExB6sC,EAAGC,cAAc,iBAErBD,EAAGmG,aAAapuB,MAEjB,GAAO,EAAO,0GAA0G,IAE/H,EAAKle,UAAU,IAAI1I,EAAO,eAAgB,IAAI0B,EAAc,CACxD,CAAErI,WAAY,QAASgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACjG,CAAE1G,WAAY,QAASgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACpG8Q,IACA,SAAC/P,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCwuB,EAAgB9lB,EAAW,GAAG1I,MAC9BqtC,EAAgB3kC,EAAW,GAAG1I,MAC9By2C,EAAwBj3C,EAAEoK,cAAF,MAExB6sC,EAAGC,cAAc,iBAErBD,EAAGmG,aAAapuB,EAAO6e,MAExB,GAAO,EAAO,kIAAkI,IAEvJ,EAAK/8B,UAAU,IAAI1I,EAAO,eAAgB,IAAI0B,EAAc,CACxD,CAAErI,WAAY,QAASgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACpG8Q,IACA,SAAC/P,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCwuB,EAAgB9lB,EAAW,GAAG1I,MAC9By2C,EAAwBj3C,EAAEoK,cAAF,MAExB6sC,EAAGC,cAAc,iBAErBD,EAAGmG,aAAapuB,MAEjB,GAAO,EAAO,mOAAmO,IAExP,EAAKle,UAAU,IAAI1I,EAAO,eAAgB,IAAI0B,EAAc,CACxD,CAAErI,WAAY,QAASgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACpG,CAAE1G,WAAY,QAASgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACpG8Q,IACA,SAAC/P,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCwuB,EAAgB9lB,EAAW,GAAG1I,MAC9BqtC,EAAgB3kC,EAAW,GAAG1I,MAC9By2C,EAAwBj3C,EAAEoK,cAAF,MAExB6sC,EAAGC,cAAc,iBAErBD,EAAGmG,aAAapuB,EAAO6e,MAExB,GAAO,EAAO,6LAA6L,IAElN,EAAK/8B,UAAU,IAAI1I,EAAO,iBAAkB,IAAI0B,EAAc,CAC1D,CAAErI,WAAY,QAASgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACjG8Q,IACA,SAAC/P,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCwuB,EAAgB9lB,EAAW,GAAG1I,MAC9By2C,EAAwBj3C,EAAEoK,cAAF,MAExB6sC,EAAGC,cAAc,mBAErBD,EAAGoG,eAAeruB,MAEnB,GAAO,EAAO,2GAA2G,IAEhI,EAAKle,UAAU,IAAI1I,EAAO,iBAAkB,IAAI0B,EAAc,CAC1D,CAAErI,WAAY,QAASgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACjG,CAAE1G,WAAY,QAASgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACpG8Q,IACA,SAAC/P,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCwuB,EAAgB9lB,EAAW,GAAG1I,MAC9BqtC,EAAgB3kC,EAAW,GAAG1I,MAC9By2C,EAAwBj3C,EAAEoK,cAAF,MAExB6sC,EAAGC,cAAc,mBAErBD,EAAGoG,eAAeruB,EAAO6e,MAE1B,GAAO,EAAO,mIAAmI,IAExJ,EAAK/8B,UAAU,IAAI1I,EAAO,iBAAkB,IAAI0B,EAAc,CAC1D,CAAErI,WAAY,QAASgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACpG,CAAE1G,WAAY,QAASgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACpG8Q,IACA,SAAC/P,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCwuB,EAAgB9lB,EAAW,GAAG1I,MAC9BqtC,EAAgB3kC,EAAW,GAAG1I,MAC9By2C,EAAwBj3C,EAAEoK,cAAF,MAExB6sC,EAAGC,cAAc,mBAErBD,EAAGoG,eAAeruB,EAAO6e,MAE1B,GAAO,EAAO,6LAA6L,IAElN,EAAK/8B,UAAU,IAAI1I,EAAO,iBAAkB,IAAI0B,EAAc,CAC1D,CAAErI,WAAY,oBAAqBgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChH8Q,IACA,SAAC/P,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCwuB,EAAgB9lB,EAAW,GAAG1I,MAC9By2C,EAAwBj3C,EAAEoK,cAAF,MAExB6sC,EAAGC,cAAc,mBAErBD,EAAGoG,eAAeruB,MAEnB,GAAO,EAAO,mOAAmO,IAExP,EAAKle,UAAU,IAAI1I,EAAO,iBAAkB,IAAI0B,EAAc,CAC1D,CAAErI,WAAY,eAAgBgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC3G8Q,IACA,SAAC/P,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCmoC,EAAgBz/B,EAAW,GAAG1I,MAC9By2C,EAAwBj3C,EAAEoK,cAAF,MAExB6sC,EAAGC,cAAc,mBAErBD,EAAGqG,eAAe3U,MAEnB,GAAO,EAAO,uDAAuD,IAxNtD,EAF9B,qDA8Nc4U,EAAa1P,GAEnB,IADA,IAAIvsC,EAAW,MAAPi8C,EAAc,MAAQA,EAAI1mC,SAAS,IACpCvV,EAAE8H,OAAS,GAAG9H,EAAI,IAAMA,EAE/B,IAAIiN,EAAImE,KAAK01B,MAAc,IAARyF,GAAah3B,SAAS,IAGzC,OAFItI,EAAEnF,OAAS,IAAGmF,EAAI,IAAMA,GAErB,IAAMjN,EAAIiN,MArOzB,GAAsC,GA2OhB,GAAtB,YASI,WAAY+L,EAA0BwB,GAA4B,yBAC9D,0BAAMxB,EAAawB,KARvBihC,UAAoB,QACpB,EAAAI,UAAoB,EAEpB,EAAAH,YAAsB,KACtB,EAAAQ,YAAsB,EACtB,EAAAP,YAAsB,GAE4C,EATtE,oDAaaQ,GACL,8CAAeA,GACfp2C,KAAK01C,UAAYU,EAAIV,UACrB11C,KAAK81C,UAAYM,EAAIN,UAErB91C,KAAK21C,YAAcS,EAAIT,YACvB31C,KAAKm2C,YAAcC,EAAID,YACvBn2C,KAAK41C,YAAcQ,EAAIR,cApB/B,+BAuBapP,GAELxmC,KAAK81C,UAAYtP,EACjBxmC,KAAKm2C,YAAc3P,EACnBxmC,KAAKwxC,WA3Bb,qCA8BmB7pB,EAAwB6e,GAEnC,GAAoB,iBAAT7e,EAAmB,CAC1B,IAAIpvB,EAAIguC,GAAYoH,mBAAmBhmB,GACvC3nB,KAAK21C,YAAcp9C,EAAEovB,MACrB3nB,KAAKm2C,YAAuB,MAAT3P,EAAgBjuC,EAAEiuC,MAAQA,OAE7CxmC,KAAK21C,YAAchuB,EACnB3nB,KAAKm2C,YAAc3P,EAGvBxmC,KAAKwxC,WAzCb,mCA6CiB7pB,EAAwB6e,GAEjC,GAAoB,iBAAT7e,EAAmB,CAC1B,IAAIpvB,EAAIguC,GAAYoH,mBAAmBhmB,GACvC3nB,KAAK01C,UAAYn9C,EAAEovB,MACnB3nB,KAAK81C,UAAqB,MAATtP,EAAgBjuC,EAAEiuC,MAAQA,OAE3CxmC,KAAK01C,UAAY/tB,EACjB3nB,KAAK81C,UAAYtP,EAIrBxmC,KAAKwxC,WAzDb,qCA6DmBlQ,GACXthC,KAAK41C,YAActU,EACnBthC,KAAKwxC,WA/Db,uCAkE4B7pB,EAAe6e,EAAemM,GAElD,GAAa,MAAThrB,EAAe,OAAO,KAE1B,IAAI3uB,GAAa,SAAR2uB,IAAqB,GAC1BotB,GAAa,MAARptB,IAAmB,EACxBsqB,EAAY,IAARtqB,EAEJkmB,EAAqB,IAAI,EAAc8E,GAEvC/wC,EAA8B,CAC9BozC,IAAKh8C,EACLi8C,MAAOF,EACPG,KAAMjD,EACNkD,IAAK5O,GAAY6O,iBAAiBztB,IAKtC,OAFAkmB,EAAI9qC,cAAgBnB,EAEbisC,MArFf,GAAgD,I,o6CC5OzC,IAAM,GAAb,YAEI,WAAY51C,GAAc,yBAEtB,0BAAM,SAAUA,EAAQ,WAEnBqa,aAAoBra,EAAOma,UAAUC,QAAQ,gBAIlD,EAAK5I,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,KAAMgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACjG,CAAE1G,WAAY,KAAMgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACjG,CAAE1G,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChG,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCk9C,EAAax0C,EAAW,GAAG1I,MAC3Bm9C,EAAaz0C,EAAW,GAAG1I,MAC3BH,EAAY6I,EAAW,GAAG1I,MAE1B25C,EAAK,IAAI,GAAauD,EAAIC,EAAIt9C,EAAGf,EAAO6b,KAAKC,iBAAkBpb,GACnEA,EAAEoK,cAAF,MAA2B+vC,KAE5B,GAAO,EAAO,8EAA8E,IAEnG,EAAKrpC,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,CACrD,CAAErI,WAAY,SAAUgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACrG,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCH,EAAY6I,EAAW,GAAG1I,MAC1By2C,EAAmBj3C,EAAEoK,cAAF,MAEnB6sC,EAAGC,cAAc,cAErBD,EAAG2G,UAAUv9C,MAEd,GAAO,EAAO,kCAAkC,IAEvD,EAAKyQ,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,IACrDwM,IACA,SAACpN,GAEG,IACI+tC,EADmB/tC,EAAW,GAAG1I,MACZ4J,cAAF,MAEvB,IAAI6sC,EAAGC,cAAc,aAErB,OAAOD,EAAG52C,EAAI42C,EAAGnC,cAAcvF,MAAMlG,KAEtC,GAAO,EAAO,2BAA2B,IAEhD,EAAKv4B,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,IAArC,OAEX,SAACZ,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCy2C,EAAmBj3C,EAAEoK,cAAF,MAEvB,IAAI6sC,EAAGC,cAAc,QAErB,OAAOD,EAAGa,QAAe93C,EAAEsK,UAE5B,GAAO,EAAO,8DAA8D,IAhE7D,EAF9B,kBAAiC,GAyEpB,GAAb,YAEI,WAAmBozC,EAAmBC,EAAmBt9C,EACrDia,EAA0BwB,GAA4B,kBACtD,0BAAMxB,EAAawB,KAFJ4hC,KAAmB,EAAAC,KAAmB,EAAAt9C,IAGrD,EAAK+3C,eAAiBsF,EACtB,EAAKrF,eAAiBsF,EAEtB,EAAK1F,kBAAoB,GAGzB,IADA,IAAI4F,EAAanrC,KAAK+5B,GAAK,EAClBltC,EAAI,EAAGA,EAAI,GAAIA,IAAK,CACzB,IAAIsuC,EAAQgQ,EAAat+C,EACzB,EAAK04C,kBAAkB5sC,KAAK,CACxBg+B,EAAGqU,EAAKr9C,EAAIqS,KAAKi6B,IAAIkB,GACrB3G,EAAGyW,EAAKt9C,EAAIqS,KAAKk6B,IAAIiB,KAZyB,OAgBtD,EAAKgL,SACL,EAAK6B,oBAjBiD,E,UAH9D,e,EAAA,G,EAAA,+BAwBYvwC,GAEJ,IAAIwwC,EAAoB,IAAI,EAAcxwC,GACtCgwC,EAAmB,IAAI2D,EAAaz2C,KAAKq2C,GAAIr2C,KAAKs2C,GAAIt2C,KAAKhH,EAAGgH,KAAK4oC,YAAY31B,YAAaqgC,GAMhG,OALAA,EAAGvwC,cAAH,MAA4B+vC,EAE5BA,EAAGrL,SAASznC,MACZ8yC,EAAGtB,SAEI8B,IAjCf,+BAuCQ,IAAIyB,EAAwB/0C,KAAKytC,cAEP,MAAtBztC,KAAKytC,eACLsH,EAAI,IAAIxN,KAAKmP,SACb12C,KAAKytC,cAAgBsH,EACrB/0C,KAAK4oC,YAAYlB,MAAMmE,SAASkJ,IAGhCA,EAAE5gC,QAGgB,MAAlBnU,KAAK01C,WACLX,EAAE4B,UAAU32C,KAAK01C,UAAW11C,KAAK81C,WAEb,MAApB91C,KAAK21C,aACLZ,EAAE6B,UAAU52C,KAAK41C,YAAa51C,KAAK21C,YAAa31C,KAAKm2C,YAAa,IAGtEpB,EAAE8B,WAAW72C,KAAKq2C,GAAIr2C,KAAKs2C,GAAIt2C,KAAKhH,GACpC+7C,EAAE+B,YAEoB,MAAlB92C,KAAK01C,WACLX,EAAEgC,YA7Dd,gCAiEc/9C,GACNgH,KAAKhH,EAAIA,EACTgH,KAAKwxC,WAnEb,sCAwEQ,6DAxER,oCA4EkBxP,EAAWnC,GAErB,IAAK7/B,KAAKytC,cAAciE,YAAYt9B,SAAS4tB,EAAGnC,GAAI,OAAO,EAE3D,IAAI7lC,EAAgB,IAAIutC,KAAKiF,MAAMxK,EAAGnC,GAC9B7/B,KAAKytC,cAAc1F,UAAU+J,eAEnCrF,aAAazyC,EAAGA,GAElB,IAAIyqC,EAAKzqC,EAAEgoC,EAAIhiC,KAAKq2C,GAChB3R,EAAK1qC,EAAE6lC,EAAI7/B,KAAKs2C,GACpB,OAAO7R,EAAKA,EAAKC,EAAKA,GAAM1kC,KAAKhH,EAAIgH,KAAKhH,O,6BAvFlD,GAAkC,I,okBClE3B,IAAM,GAAb,YAEI,WAAYf,GAAc,M,iGAAA,S,EAEtB,K,EAAA,gBAAM,QAASA,EAAQ,UAAvB,G,mDAEKqa,aAAoBra,EAAOma,UAAUC,QAAQ,WAJ5B,eAMb2kC,GAEL,IAAIC,EAAW1Q,GAAYE,iBAAiBuQ,GAExCh+C,EAAmB,IAAI,EAAJ,OAMnB4I,EAA8B,CAC9BozC,KALkB,SAAXiC,IAAwB,GAM/BhC,OALoB,MAAXgC,IAAsB,EAM/B/B,KALmB,IAAX+B,EAMR9B,IAAK5O,GAAY6O,iBAAiB6B,IAGtCj+C,EAAE+J,cAAgBnB,EAElB,EAAK8H,aAAa,IAAIhJ,EAAUs2C,EAAd,OACd,SAAC79C,GAAYA,EAAMA,MAAQH,KAAK,EAAMwK,EAAW2C,QAAQ,EACzD,aAAe6wC,EAAY,KAAOzQ,GAAY6O,iBAAiB6B,GAAY,SAAW1Q,GAAY2Q,cAAcD,MArBxH,IAAK,IAAID,KAAazQ,GAAYE,iBAAkB,EAA3CuQ,GANa,OA8BtB,EAAK5wC,YAAYmG,YAAc,IAAI,EAAc,EAAKnG,aACtD,EAAKA,YAAYmG,YAAYwC,4BAE7B,EAAKtF,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,CACjD,CAAErI,WAAY,MAAOgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC/F,CAAE1G,WAAY,QAASgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACjG,CAAE1G,WAAY,OAAQgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChG,MACA,SAACe,GACG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC67C,EAAc3pC,KAAK0E,MAAMlO,EAAW,GAAG1I,OACvC87C,EAAgB5pC,KAAK0E,MAAMlO,EAAW,GAAG1I,OACzC+7C,EAAe7pC,KAAK0E,MAAMlO,EAAW,GAAG1I,OAGxC4J,EAAyC,CACzCiyC,IAAKA,EACLC,MAAOA,EACPC,KAAMA,EACNC,IAAK,OAASH,EAAM,KAAOC,EAAQ,KAAOC,EAAO,KAGrDv8C,EAAEoK,cAAgBA,KAEnB,GAAO,EAAO,+HACf,IAEN,EAAK0G,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,IACvD0L,IACA,SAACtM,GAC0BA,EAAW,GAAG1I,MAErC,OAAOkS,KAAK8rC,MAAsB,SAAhB9rC,KAAK+rC,aAExB,GAAO,EAAM,wDACd,IAEN,EAAK3tC,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,CACvD,CAAErI,WAAY,kBAAmBgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC3GqN,IACA,SAACtM,GAC0BA,EAAW,GAAG1I,MAArC,IACImS,EAAczJ,EAAW,GAAG1I,MAQhC,OAPImS,EAAM,IAAGA,EAAM,GACfA,EAAM,MAAKA,EAAM,KAMd,OAJSD,KAAK8rC,MAAM9rC,KAAK+rC,UAAY,IAAM9rC,IAAQA,GAIrC,KAHLD,KAAK8rC,MAAM9rC,KAAK+rC,UAAY,IAAM9rC,IAAQA,IAC1CD,KAAK8rC,MAAM9rC,KAAK+rC,UAAY,IAAM9rC,IAAQA,MAI3D,GAAO,EAAM,wNACd,IAEN,EAAK7B,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,CACvD,CAAErI,WAAY,kBAAmBgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC3G,CAAE1G,WAAY,kBAAmBgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC3GqN,IACA,SAACtM,GAC0BA,EAAW,GAAG1I,MAArC,IACImS,EAAczJ,EAAW,GAAG1I,MAC5B0qC,EAAchiC,EAAW,GAAG1I,MAMhC,GALImS,EAAM,IAAGA,EAAM,GACfA,EAAM,MAAKA,EAAM,KACjBu4B,EAAM,IAAGA,EAAM,GACfA,EAAM,MAAKA,EAAM,KAElBA,EAAMv4B,EAAI,CACT,IAAI+rC,EAAIxT,EACRA,EAAMv4B,EACNA,EAAM+rC,EAOV,OAAO,OAJShsC,KAAK8rC,MAAM9rC,KAAK+rC,UAAYvT,EAAMv4B,EAAM,IAAMA,GAIzC,KAHLD,KAAK8rC,MAAM9rC,KAAK+rC,UAAYvT,EAAMv4B,EAAM,IAAMA,IAC9CD,KAAK8rC,MAAM9rC,KAAK+rC,UAAYvT,EAAMv4B,EAAM,IAAMA,MAI/D,GAAO,EAAM,4OACd,IAEN,EAAK7B,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IACpD2I,IACA,SAACvJ,GAGG,OAFuBA,EAAW,GAAG1I,MAED4J,cAAgBoyC,OAErD,GAAO,EAAO,yCAAyC,IAE9D,EAAK1rC,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,aAAcgG,KAAM,MAAM8O,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC1FwO,IACA,SAACzN,GACG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCm+C,EAAoBz1C,EAAW,GAAG1I,MAElCX,EAA8BG,EAAEoK,cAChCw0C,EAA+BD,EAAGv0C,cAEtC,OAAQvK,EAAEw8C,KAAOuC,EAAGvC,KAAOx8C,EAAEy8C,OAASsC,EAAGtC,OAASz8C,EAAE08C,MAAQqC,EAAGrC,QAEhE,GAAO,EAAO,0BAA0B,IAE/C,EAAKzrC,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,IAClD0L,IACA,SAACtM,GAGG,OAFuBA,EAAW,GAAG1I,MAED4J,cAAgBiyC,OAErD,GAAO,EAAO,kDAAkD,IAEvE,EAAKvrC,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IACpD0L,IACA,SAACtM,GAGG,OAFuBA,EAAW,GAAG1I,MAED4J,cAAgBkyC,SAErD,GAAO,EAAO,mDAAmD,IAExE,EAAKxrC,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,IACnD0L,IACA,SAACtM,GAGG,OAFuBA,EAAW,GAAG1I,MAED4J,cAAgBmyC,QAErD,GAAO,EAAO,mDAAmD,IAExE,EAAKzrC,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,MAAOgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC/F,CAAE1G,WAAY,QAASgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACjG,CAAE1G,WAAY,OAAQgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChGqN,IACA,SAACtM,GAC0BA,EAAW,GAAG1I,MAIrC,OAAY,MAHI0I,EAAW,GAAG1I,MAGJ,IAFV0I,EAAW,GAAG1I,MACd0I,EAAW,GAAG1I,SAG/B,GAAO,EAAM,+EAA+E,IAEnG,EAAKsQ,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,MAAOgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC/F,CAAE1G,WAAY,QAASgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACjG,CAAE1G,WAAY,OAAQgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,QAASgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACpGsK,IACA,SAACvJ,GAC0BA,EAAW,GAAG1I,MAMrC,IANA,IACIH,EAAY6I,EAAW,GAAG1I,MAC1B47C,EAAYlzC,EAAW,GAAG1I,MAC1B84C,EAAYpwC,EAAW,GAAG1I,MAC1B+N,EAAYrF,EAAW,GAAG1I,MAC1BwuB,GAAqB,SAAJ3uB,EAAoB,MAAJ+7C,EAAkB,IAAJ9C,EAAY5mC,KAAK8rC,MAAU,IAAJjwC,IAAUsI,SAAS,IACtFmY,EAAM5lB,OAAS,GAAG4lB,EAAQ,IAAMA,EAEvC,MAAO,IAAMA,KAEd,GAAO,EAAM,mHAAmH,IAlMjH,EAF9B,O,mOAAA,SAAgC,G,o6CCPzB,IAAM,GAAb,YAEI,WAAY1vB,GAAc,yBAEtB,0BAAM,UAAWA,EAAQ,aAEpBqa,aAAoBra,EAAOma,UAAUC,QAAQ,gBAIlD,EAAK5I,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,KAAMgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACjG,CAAE1G,WAAY,KAAMgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACjG,CAAE1G,WAAY,KAAMgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACjG,CAAE1G,WAAY,KAAMgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACjG,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCk9C,EAAax0C,EAAW,GAAG1I,MAC3Bm9C,EAAaz0C,EAAW,GAAG1I,MAC3Bq+C,EAAa31C,EAAW,GAAG1I,MAC3Bs+C,EAAa51C,EAAW,GAAG1I,MAE3B25C,EAAK,IAAI,GAAcuD,EAAIC,EAAIkB,EAAIC,EAAIx/C,EAAO6b,KAAKC,iBAAkBpb,GACzEA,EAAEoK,cAAF,MAA2B+vC,KAE5B,GAAO,EAAO,2FAA2F,IAE5G,EAAKrpC,UAAU,IAAI1I,EAAO,aAAc,IAAI0B,EAAc,CACtD,CAAErI,WAAY,KAAMgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACjG,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCH,EAAY6I,EAAW,GAAG1I,MACNR,EAAEoK,cAAF,MAErB20C,WAAW1+C,MAEf,GAAO,EAAO,mCAAmC,IAExD,EAAKyQ,UAAU,IAAI1I,EAAO,aAAc,IAAI0B,EAAc,CACtD,CAAErI,WAAY,KAAMgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACjG,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCH,EAAY6I,EAAW,GAAG1I,MACNR,EAAEoK,cAAF,MAErB40C,WAAW3+C,MAEf,GAAO,EAAO,mCAAmC,IAEpD,EAAKyQ,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,IAArC,OAEX,SAACZ,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCy2C,EAAoBj3C,EAAEoK,cAAF,MAExB,IAAI6sC,EAAGC,cAAc,QAErB,OAAOD,EAAGa,QAAe93C,EAAEsK,UAE5B,GAAO,EAAO,+DAA+D,IAhEtE,EAF9B,kBAAkC,GAyErB,GAAb,YAEI,WAAmBozC,EAAmBC,EAAmBkB,EAAmBC,EACxExkC,EAA0BwB,GAA4B,kBACtD,0BAAMxB,EAAawB,KAFJ4hC,KAAmB,EAAAC,KAAmB,EAAAkB,KAAmB,EAAAC,KAGxE,EAAK1G,eAAiBsF,EACtB,EAAKrF,eAAiBsF,EAEtB,EAAK1F,kBAAoB,GAGzB,IADA,IAAI4F,EAAanrC,KAAK+5B,GAAG,EACjBltC,EAAI,EAAGA,EAAI,GAAIA,IAAI,CACvB,IAAIsuC,EAAQgQ,EAAat+C,EACzB,EAAK04C,kBAAkB5sC,KAAK,CACxBg+B,EAAGqU,EAAKmB,EAAGnsC,KAAKi6B,IAAIkB,GACpB3G,EAAGyW,EAAKmB,EAAGpsC,KAAKk6B,IAAIiB,KAZ0B,OAgBtD,EAAKgL,SACL,EAAK6B,oBAjBiD,E,UAH9D,e,EAAA,G,EAAA,+BAwBYvwC,GAEJ,IAAIwwC,EAAoB,IAAI,EAAcxwC,GACtCgwC,EAAoB,IAAI8E,EAAc53C,KAAKq2C,GAAIr2C,KAAKs2C,GAAIt2C,KAAKw3C,GAAIx3C,KAAKy3C,GAAIz3C,KAAK4oC,YAAY31B,YAAaqgC,GAM5G,OALAA,EAAGvwC,cAAH,MAA4B+vC,EAE5BA,EAAGrL,SAASznC,MACZ8yC,EAAGtB,SAEI8B,IAjCf,+BAuCQ,IAAIyB,EAAwB/0C,KAAKytC,cAEP,MAAtBztC,KAAKytC,eACLsH,EAAI,IAAIxN,KAAKmP,SACb12C,KAAKytC,cAAgBsH,EACrB/0C,KAAK4oC,YAAYlB,MAAMmE,SAASkJ,IAGhCA,EAAE5gC,QAGgB,MAAlBnU,KAAK01C,WACLX,EAAE4B,UAAU32C,KAAK01C,UAAW11C,KAAK81C,WAEb,MAApB91C,KAAK21C,aACLZ,EAAE6B,UAAU52C,KAAK41C,YAAa51C,KAAK21C,YAAa31C,KAAKm2C,YAAa,IAGtEpB,EAAE8C,YAAY73C,KAAKq2C,GAAIr2C,KAAKs2C,GAAIt2C,KAAKw3C,GAAIx3C,KAAKy3C,IAC9C1C,EAAE+B,YAEoB,MAAlB92C,KAAK01C,WACLX,EAAEgC,YA7Dd,iCAiEe/9C,GACPgH,KAAKw3C,GAAKx+C,EACVgH,KAAKwxC,WAnEb,iCAsEex4C,GACPgH,KAAKw3C,GAAKx+C,EACVgH,KAAKwxC,WAxEb,sCA6EQ,6DA7ER,oCAiFkBxP,EAAWnC,GAErB,IAAK7/B,KAAKytC,cAAciE,YAAYt9B,SAAS4tB,EAAGnC,GAAI,OAAO,EAE3D,IAAI7lC,EAAgB,IAAIutC,KAAKiF,MAAMxK,EAAGnC,GAC9B7/B,KAAKytC,cAAc1F,UAAU+J,eAEnCrF,aAAazyC,EAAGA,GAElB,IAAIyqC,EAAKzqC,EAAEgoC,EAAIhiC,KAAKq2C,GAChB3R,EAAK1qC,EAAE6lC,EAAI7/B,KAAKs2C,GACpB,OAAO7R,EAAGA,GAAIzkC,KAAKw3C,GAAGx3C,KAAKw3C,IAAM9S,EAAGA,GAAI1kC,KAAKy3C,GAAGz3C,KAAKy3C,KAAO,O,6BA5FpE,GAAmC,I,o6CCpE5B,IAAM,GAAb,YAEI,WAAYx/C,GAAc,kBAEtB,0BAAM,gBAAiBA,EAAQ,6IAE1Bqa,aAAoBra,EAAOma,UAAUC,QAAQ,WAElD,IAAIm9B,EAAYv3C,EAAOma,UAAUC,QAAQ,SANnB,OAQtB,EAAK3I,aAAa,IAAIhJ,EAAU,SAAU8uC,GACtC,SAACr2C,GAEG,IAAI00C,EAAqB10C,EAAMS,OAC/BT,EAAMA,MAAQ00C,EAAI9qC,cAAJ,UAEf,EAAOS,EAAW2C,QAAQ,EAAM,8CAEvC,EAAKuD,aAAa,IAAIhJ,EAAU,SAAU8uC,GACtC,SAACr2C,GAEG,IAAI00C,EAAqB10C,EAAMS,OAC/BT,EAAMA,MAAQ00C,EAAI9qC,cAAJ,UAEf,EAAOS,EAAW2C,QAAQ,EAAM,+CAtBjB,EAF9B,kBAAwC,GA+B3B,GAAb,YAEI,WAAYlO,GAAc,kBAEtB,0BAAM,QAASA,EAAQ,2QAElBqa,aAAoBra,EAAOma,UAAUC,QAAQ,UAElD,IAAIylC,EAAoB7/C,EAAOma,UAAUC,QAAQ,iBAC7C0lC,EAAyB,IAAI,EAAUD,GACvCtI,EAAYv3C,EAAOma,UAAUC,QAAQ,SAGzC,EAAK5I,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,IACjD,MACA,SAACZ,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MAEjC25C,EAAK,IAAI,GAAY76C,EAAO6b,KAAKC,iBAAkBpb,GACvDA,EAAEoK,cAAF,MAA2B+vC,KAE5B,GAAO,EAAO,sJAAsJ,IAE3K,EAAKrpC,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,CACjD,CAAErI,WAAY,SAAUgG,KAAM,IAAI,EAAUnI,EAAOma,UAAUC,QAAQ,UAAWnD,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,EAAMkB,YAAY,KACpJ,MACA,SAACH,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCu5C,EAAkB7wC,EAAW,GAAG1I,MAEhC25C,EAAK,IAAI,GAAY76C,EAAO6b,KAAKC,iBAAkBpb,GACvDA,EAAEoK,cAAF,MAA2B+vC,EANhB,2BAQX,YAAcJ,EAAd,+CAAsB,KAAbz4C,EAAa,QAClB64C,EAAG7+B,IAAIha,EAAEd,QATF,sFAYZ,GAAO,EAAO,kOAAkO,IAEvP,EAAKsQ,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,CAC/C,CAAErI,WAAY,SAAUgG,KAAM,IAAI,EAAUovC,GAAYtgC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,EAAMkB,YAAY,KAE5H,MACA,SAACH,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCu5C,EAAkB7wC,EAAW,GAAG1I,MAChCy2C,EAA+Bj3C,EAAEoK,cAAF,MAJxB,uBAMX,YAAc2vC,EAAd,+CAAsB,KAAbz4C,EAAa,QAClB21C,EAAG37B,IAAIha,EAAEd,QAPF,sFAUZ,GAAO,EAAO,4CAA4C,IAEjE,EAAKsQ,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,CAC/C,CAAErI,WAAY,QAASgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAEjG0uC,GACA,SAAC3tC,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC8I,EAAgBJ,EAAW,GAAG1I,MAGlC,OAFmCR,EAAEoK,cAAF,MAEzBi1C,WAAW/1C,MAEtB,GAAO,EAAO,mHAAmH,IAExI,EAAKwH,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,QAASgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAEjG,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC8I,EAAgBJ,EAAW,GAAG1I,MACCR,EAAEoK,cAAF,MAEhCk1C,gBAAgBh2C,MAEpB,GAAO,EAAO,8IAA8I,IAEnK,EAAKwH,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,QAASgG,KAAMovC,EAAWtgC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAE1F,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC+2C,EAAuBruC,EAAW,GAAG1I,MACNR,EAAEoK,cAAF,MAEhCgQ,OAAOm9B,MAEX,GAAO,EAAO,mFAAmF,IAGxG,IAAIgI,EAAiB,IAAI,EAAU1I,GAlGb,OAoGtB,EAAK/lC,UAAU,IAAI1I,EAAO,qBAAsB,IAAI0B,EAAc,CAC9D,CAAErI,WAAY,QAASgG,KAAMnI,EAAOma,UAAUC,QAAQ,SAAUnD,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAElHo3C,GACA,SAACr2C,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC+2C,EAAuBruC,EAAW,GAAG1I,MACrCy2C,EAA+Bj3C,EAAEoK,cAAF,MAEnC,GAAI6sC,EAAGC,cAAc,uBAAkC,MAATK,EAAe,MAAO,GAEpE,IAAIwC,EAA0B9C,EAAGuI,oBAAoBjI,GAEjDv+B,EAAkB,GAVX,uBAWX,YAAe+gC,EAAf,+CAAuB,KAAd,EAAc,QACnB/gC,EAAO3N,KAAK,CACR5D,KAAMovC,EACNr2C,MAAO,KAdJ,kFAmBX,OAAOwY,KAER,GAAO,EAAO,kFAAkF,IAEvG,EAAKlI,UAAU,IAAI1I,EAAO,oBAAqB,IAAI0B,EAAc,CAC7D,CAAErI,WAAY,QAASgG,KAAM,MAAM8O,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACrF,CAAE1G,WAAY,0BAA2BgG,KAAMkP,GAAsBJ,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACvHi3C,GACA,SAACl2C,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCi/C,EAAwBv2C,EAAW,GAAG1I,MACtCk/C,EAAmCx2C,EAAW,GAAG1I,MACjDy2C,EAA+Bj3C,EAAEoK,cAAF,MAC/Bu1C,EAAyCF,EAAOr1C,cAAP,MAE7C,IAAI6sC,EAAGC,cAAc,sBAErB,OAAOD,EAAG2I,qBAAqBD,EAAcR,EAAmBO,MAEjE,GAAO,EAAO,ySAEmG,IAGxH,EAAK5uC,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,IAChD0L,IACA,SAACtM,GAEG,IACI+tC,EADmB/tC,EAAW,GAAG1I,MACA4J,cAAF,MAEnC,IAAI6sC,EAAGC,cAAc,QAErB,OAAOD,EAAG8C,OAAO3wC,UAElB,GAAO,EAAO,iEAAiE,IAG9EytC,EAAW/lC,UAAU,IAAI1I,EAAO,qBAAsB,IAAI0B,EAAc,CAC5E,CAAErI,WAAY,QAASgG,KAAM,MAAM8O,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACrFo3C,GACA,SAACr2C,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MAEjCq5C,EADuB3wC,EAAW,GAAG1I,MACJ4J,cAAN,MAC3B6sC,EAAkBj3C,EAAEoK,cAAF,MAEtB,IAAI6sC,EAAGC,cAAc,sBAErB,OAAOD,EAAG4I,mBAAmBhG,EAAahD,MAE3C,GAAO,EAAO,4EAA4E,IAEjG,EAAK/lC,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,IAArC,OAEX,SAACZ,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCy2C,EAAkBj3C,EAAEoK,cAAF,MAEtB,IAAI6sC,EAAGC,cAAc,QAErB,OAAOD,EAAGa,QAAe93C,EAAEsK,UAE5B,GAAO,EAAO,2GAA2G,IA7L1G,EAF9B,kBAAgC,GAsMnB,GAAb,YAII,WAAYgQ,EAA0BwB,GAA4B,yBAC9D,0BAAMxB,EAAawB,KAHvBi+B,OAA0B,GAItB,EAAKjF,cAAgB,IAAIlG,KAAKqE,UAC9B,EAAKhD,YAAYlB,MAAMmE,SAAS,EAAK4B,eACrC,EAAK4F,oBAJyD,E,UAJtE,e,EAAA,G,EAAA,uCAYoBpxC,GACZ,GAAGA,EAAQ,GAAKA,GAASjC,KAAK0yC,OAAO3wC,OACjC/B,KAAK4oC,YAAY31B,YAAYK,eAAe,gDAAkDrR,EAAQ,SAD1G,CAKA,IAAIiuC,EAAQlwC,KAAK0yC,OAAOzwC,GACxBjC,KAAK+S,OAAOm9B,MAnBpB,iCAsBejuC,GACP,KAAGA,EAAQ,GAAKA,GAASjC,KAAK0yC,OAAO3wC,QAIrC,OAAO/B,KAAK0yC,OAAOzwC,GAHfjC,KAAK4oC,YAAY31B,YAAYK,eAAe,gDAAkDrR,EAAQ,OAxBlH,8BA8BYa,GAEJ,IAAIwwC,EAAoB,IAAI,EAAcxwC,GACtC21C,EAA+B,IAAIC,EAAY14C,KAAK4oC,YAAY31B,YAAaqgC,GACjFA,EAAGvwC,cAAH,MAA4B01C,EAJZ,2BAMhB,YAAez4C,KAAK0yC,OAApB,+CAA4B,KAAnB,EAAmB,QAGpBiG,EAF2B,EAAG51C,cAAH,MAES0tC,QAAe,EAAGxtC,OACtD21C,EAA+BD,EAAO51C,cAAP,MAEnC01C,EAAgB/F,OAAO1uC,KAAK20C,GAE5BC,EAAgBrG,eAAiBkG,EAEhBA,EAAgBhL,cAAe5B,SAAS+M,EAAgBnL,gBAhB7D,kFAuBhB,OAHAgL,EAAgBhR,SAASznC,MACzBy4C,EAAgBjH,SAET8B,IArDf,qCAwDmB9b,GACXx3B,KAAKgtC,YAAcxV,EADG,2BAGtB,YAAkBx3B,KAAK0yC,OAAvB,+CAA+B,QACc3vC,cAAN,MAChCiqC,YAAcxV,EALC,qFAxD9B,0BAmEQ0Y,GAEA,IAAI1C,EAAwC0C,EAAMntC,cAAN,MAE5C,GAAIyqC,EAAYP,YACZjtC,KAAK4oC,YAAY31B,YAAYK,eAAe,0EADhD,CAKAtT,KAAK0yC,OAAO1uC,KAAKksC,GAEiB,MAA9B1C,EAAY+E,gBACZ/E,EAAY+E,eAAex/B,OAAOm9B,GAGtC1C,EAAY+E,eAAiBvyC,KAE7B,IAAI64C,GAAU,IAAItR,KAAKC,QAASC,SAASznC,KAAKytC,cAAc1F,UAAU+J,gBACtE+G,EAAQC,SACRtL,EAAYC,cAAc9F,eAAeG,QAAQ+Q,EAAQ/Q,QAAQ9nC,KAAK4oC,YAAYlB,MAAMC,iBACxF6F,EAAYC,cAAc1F,UAAUC,WAEnBhoC,KAAKytC,cAAe5B,SAAS2B,EAAYC,eAC1DD,EAAYC,cAAcyD,kBAE1B,IAAI6H,EAAe,EACfC,EAAe,EA1BC,uBA4BpB,YAAkBh5C,KAAK0yC,OAAvB,+CAA+B,KACvB9C,EADuB,QACc7sC,cAAN,MACnCg2C,GAAQnJ,EAAGF,aACXsJ,GAAQpJ,EAAGD,cA/BK,kFAkCpB,IAAI3N,EAAI+W,EAAO/4C,KAAK0yC,OAAO3wC,OACvB89B,EAAImZ,EAAOh5C,KAAK0yC,OAAO3wC,OAE3B/B,KAAKytC,cAAcyD,kBACnB,IAAIpC,EAAiB9uC,KAAKytC,cAAcqE,eAAerF,aAAa,IAAIlF,KAAKiF,MAAMxK,EAAGnC,IAEtF7/B,KAAK+wC,eAAiBjC,EAAG9M,EACzBhiC,KAAKgxC,eAAiBlC,EAAGjP,KA5GjC,6BA+GkBqQ,GACV,IAAIjuC,EAAQjC,KAAK0yC,OAAO9tC,QAAQsrC,GAChC,GAAIjuC,GAAS,EAAG,CACZjC,KAAK0yC,OAAOl/B,OAAOvR,EAAO,GAE1B,IAAIurC,EAA2B0C,EAAMntC,cAAN,MAE3BglC,GAAY,IAAIR,KAAKC,QAASC,SAAS+F,EAAYC,cAAc1F,UAAU+J,gBAE9D9xC,KAAKytC,cAAewL,cAAch3C,GAEnD,IAAIi3C,GAAwB,IAAI3R,KAAKC,QAASC,SAASznC,KAAK4oC,YAAYlB,MAAMC,gBAC9EuR,EAAsBJ,SACtBtL,EAAYC,cAAc9F,eAAeC,WACzC4F,EAAYC,cAAc9F,eAAetwB,OAAO0wB,EAAUD,QAAQoR,IAClE1L,EAAYC,cAAc1F,UAAUC,WACpChoC,KAAK4oC,YAAYlB,MAAMmE,SAAS2B,EAAYC,eAC5CD,EAAYC,cAAcyD,kBAC1B1D,EAAY+E,eAAiB,QAjIzC,kEAwIkB,2BACV,YAAkBvyC,KAAK0yC,OAAOpmC,MAAM,GAApC,+CAAwC,QACKvJ,cAAN,MAChC2qC,UAHG,kFAKV,gDA7IR,mCAgJiBF,GAAwB,2BACjC,YAAkBxtC,KAAK0yC,OAAvB,+CAEI,GAF2B,QACc3vC,cAAN,MAC5BqtC,aAAa5C,GAChB,OAAO,EAJkB,kFAOjC,OAAO,IAvJf,yCA0JuB2D,GAAc,2BAC7B,YAAkBnxC,KAAK0yC,OAAvB,+CAA+B,QACc3vC,cAAN,MAChCkuC,mBAAmBE,GAHG,qFA1JrC,oCAiKkBnP,EAAWnC,GAAS,2BAC9B,YAAkB7/B,KAAK0yC,OAAvB,+CAEI,GAF2B,QACc3vC,cAAN,MAC5BgrC,cAAc/L,EAAGnC,GACpB,OAAO,EAJe,kFAO9B,OAAO,IAxKf,0CA2KwBqQ,GAEhB,IAAIuC,EAAmC,GACnCjF,EAAwC0C,EAAMntC,cAAN,MAHR,uBAKpC,YAAc/C,KAAK0yC,OAAnB,+CAA2B,KAAlBz4C,EAAkB,QACYA,EAAE8I,cAAF,MAC5BqtC,aAAa5C,IAChBiF,EAAgBzuC,KAAK/J,IARO,kFAYpC,OAAOw4C,IAvLf,2CA2LyB6F,EAA2BR,EAC5CO,GAEA,IAAIc,EAA0B,GAE1BC,EAAqD,IAAIt5C,IAJ7B,uBAMhC,YAAmBE,KAAK0yC,OAAxB,+CAAgC,KACxB2G,EADwB,QACwBt2C,cAAP,MADjB,uBAE5B,YAAmBu1C,EAAa5F,OAAhC,+CAAwC,KAChC4G,EADgC,QACgBv2C,cAAP,MAC7C,GAAIs2C,EAAajJ,aAAakJ,GAAe,CAEzC,IAAKjB,GAAwE,MAA7Ce,EAAwBrgD,IAAIugD,GAAuB,CAC/EF,EAAwBh2C,IAAIk2C,GAAc,GAC1C,IAAIzL,EAAqB,IAAI,EAAqBiK,GAClDjK,EAAI9+B,4BAEJ8+B,EAAI9qC,cAAJ,OAA8Bs2C,EAAa5kC,cAC3Co5B,EAAI9qC,cAAJ,OAA8Bu2C,EAAa7kC,cAC3C0kC,EAAen1C,KAAK,CAChB5D,KAAM03C,EACN3+C,MAAO00C,IAIf,GAAIwK,EACA,QApBgB,oFANA,kFAgChC,OAAOc,O,6BA5Nf,GAAiC,I,yoBC7O1B,IAAM,GAAb,YAEI,WAAYlhD,GAAc,a,4FAAA,UACtB,0BAAM,MAAOA,EAAQ,mHAEhBqa,aAAoBra,EAAOma,UAAUC,QAAQ,WAElD,EAAK3I,aAAa,IAAIhJ,EAAU,UAAW0K,IAAqB,SAACjS,GAAYA,EAAMA,MAAQ,aAAa,EAAMqK,EAAW2C,QAAQ,EAAM,KACvI,EAAKuD,aAAa,IAAIhJ,EAAU,YAAa0K,IAAqB,SAACjS,GAAYA,EAAMA,MAAQ,eAAe,EAAMqK,EAAW2C,QAAQ,EAAM,KAC3I,EAAKuD,aAAa,IAAIhJ,EAAU,YAAa0K,IAAqB,SAACjS,GAAYA,EAAMA,MAAQ,eAAe,EAAMqK,EAAW2C,QAAQ,EAAM,KAC3I,EAAKuD,aAAa,IAAIhJ,EAAU,aAAc0K,IAAqB,SAACjS,GAAYA,EAAMA,MAAQ,gBAAgB,EAAMqK,EAAW2C,QAAQ,EAAM,KAC7I,EAAKuD,aAAa,IAAIhJ,EAAU,QAAS0K,IAAqB,SAACjS,GAAYA,EAAMA,MAAQ,WAAW,EAAMqK,EAAW2C,QAAQ,EAAM,KACnI,EAAKuD,aAAa,IAAIhJ,EAAU,QAAS0K,IAAqB,SAACjS,GAAYA,EAAMA,MAAQ,OAAO,EAAMqK,EAAW2C,QAAQ,EAAM,KAC/H,EAAKuD,aAAa,IAAIhJ,EAAU,QAAS0K,IAAqB,SAACjS,GAAYA,EAAMA,MAAQ,WAAW,EAAMqK,EAAW2C,QAAQ,EAAM,KACnI,EAAKuD,aAAa,IAAIhJ,EAAU,MAAO0K,IAAqB,SAACjS,GAAYA,EAAMA,MAAQ,SAAS,EAAMqK,EAAW2C,QAAQ,EAAM,KAC/H,EAAKuD,aAAa,IAAIhJ,EAAU,OAAQ0K,IAAqB,SAACjS,GAAYA,EAAMA,MAAQ,aAAa,EAAMqK,EAAW2C,QAAQ,EAAM,KACpI,EAAKuD,aAAa,IAAIhJ,EAAU,SAAU0K,IAAqB,SAACjS,GAAYA,EAAMA,MAAQ,YAAY,EAAMqK,EAAW2C,QAAQ,EAAM,KACrI,EAAKuD,aAAa,IAAIhJ,EAAU,WAAY0K,IAAqB,SAACjS,GAAYA,EAAMA,MAAQ,cAAc,EAAMqK,EAAW2C,QAAQ,EAAM,KACzI,EAAKuD,aAAa,IAAIhJ,EAAU,YAAa0K,IAAqB,SAACjS,GAAYA,EAAMA,MAAQ,eAAe,EAAMqK,EAAW2C,QAAQ,EAAM,KAC3I,EAAKuD,aAAa,IAAIhJ,EAAU,SAAU0K,IAAqB,SAACjS,GAAYA,EAAMA,MAAQ,YAAY,EAAMqK,EAAW2C,QAAQ,EAAM,KACrI,EAAKuD,aAAa,IAAIhJ,EAAU,OAAQ0K,IAAqB,SAACjS,GAAYA,EAAMA,MAAQ,YAAY,EAAMqK,EAAW2C,QAAQ,EAAM,KACnI,EAAKuD,aAAa,IAAIhJ,EAAU,OAAQ0K,IAAqB,SAACjS,GAAYA,EAAMA,MAAQ,YAAY,EAAMqK,EAAW2C,QAAQ,EAAM,KACnI,EAAKuD,aAAa,IAAIhJ,EAAU,OAAQ0K,IAAqB,SAACjS,GAAYA,EAAMA,MAAQ,SAAS,EAAMqK,EAAW2C,QAAQ,EAAM,KAEhI,EAAKC,YAAYmG,YAAc,IAAI,EAAc,EAAKnG,aACtD,EAAKA,YAAYmG,YAAYwC,4BAvBP,EAF9B,O,mOAAA,SAA8B,G,0nCCEvB,IAAM,GAAb,YAEI,WAAY9W,GAAc,yBAEtB,0BAAM,UAAWA,EAAQ,qFAEpBqa,aAAoBra,EAAOma,UAAUC,QAAQ,gBAIlD,EAAK5I,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,eAAgBgG,KAAMkP,GAAsBJ,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC5G,CAAE1G,WAAY,SAAUgG,KAAM,IAAI,EAAU6O,IAAsBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACpH,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCogD,EAAwB13C,EAAW,GAAG1I,MACtC0sC,EAAkBhkC,EAAW,GAAG1I,MAEhCqgD,EAAyB,GAC7B3T,EAAO/0B,SAAQ,SAAAvN,GAAC,OAAIi2C,EAAax1C,KAAKT,EAAEpK,UAExC,IAAIsgD,EAAK,IAAI,GAAcD,EAAcD,EAActhD,EAAO6b,KAAKC,iBAAkBpb,GACrFA,EAAEoK,cAAF,MAA2B02C,KAE5B,GAAO,EAAO,0HAA0H,IAE/I,EAAKhwC,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,eAAgBgG,KAAMkP,GAAsBJ,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC5G,CAAE1G,WAAY,SAAUgG,KAAM,IAAI,EAAU6O,IAAsBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,EAAMkB,YAAY,KACtI,MACA,SAACH,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCogD,EAAwB13C,EAAW,GAAG1I,MACtC0sC,EAAkBhkC,EAAW,GAAG1I,MAEhCqgD,EAAyB,GAC7B3T,EAAO/0B,SAAQ,SAAAvN,GAAC,OAAIi2C,EAAax1C,KAAKT,EAAEpK,UAExC,IAAIsgD,EAAK,IAAI,GAAcD,EAAcD,EAActhD,EAAO6b,KAAKC,iBAAkBpb,GACrFA,EAAEoK,cAAF,MAA2B02C,KAE5B,GAAO,EAAO,6GAA6G,IAElI,EAAKhwC,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,eAAgBgG,KAAMkP,GAAsBJ,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC5G,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCogD,EAAwB13C,EAAW,GAAG1I,MAItCsgD,EAAK,IAAI,GAFgB,GAEYF,EAActhD,EAAO6b,KAAKC,iBAAkBpb,GACrFA,EAAEoK,cAAF,MAA2B02C,KAE5B,GAAO,EAAO,8CAA8C,IAGnE,EAAKhwC,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChG,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC6oC,EAAYngC,EAAW,GAAG1I,MAC1B0mC,EAAYh+B,EAAW,GAAG1I,MAC1By2C,EAAoBj3C,EAAEoK,cAAF,MAEpB6sC,EAAGC,cAAc,aAErBD,EAAG8J,SAAS1X,EAAGnC,MAEhB,GAAO,EAAO,wCAAwC,IAE7D,EAAKp2B,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,CACrD,CAAErI,WAAY,SAAUgG,KAAM,IAAI,EAAU6O,IAAsBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACpH,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC0sC,EAAkBhkC,EAAW,GAAG1I,MAChCy2C,EAAoBj3C,EAAEoK,cAAF,MAExB,IAAI6sC,EAAGC,cAAc,aAIrB,IAFA,IAEQ33C,EAAI,EAAGA,EAAI2tC,EAAO9jC,OAAS,EAAG7J,GAAK,EACnC03C,EAAG8J,SAAS7T,EAAO3tC,GAAGiB,MAAO0sC,EAAO3tC,EAAE,GAAGiB,MAAOjB,GAAK2tC,EAAO9jC,OAAQ,MAG7E,GAAO,EAAO,uIAAuI,IAExJ,EAAK0H,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,IAArC,OAEX,SAACZ,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCy2C,EAAoBj3C,EAAEoK,cAAF,MAExB,IAAI6sC,EAAGC,cAAc,QAErB,OAAOD,EAAGa,QAAe93C,EAAEsK,UAE5B,GAAO,EAAO,+DAA+D,IA3GlE,EAF9B,kBAAkC,GAoHrB,GAAb,YAEI,WAAY4iC,EAA0B0T,EAClCtmC,EAA0BwB,GAA4B,kBACtD,0BAAMxB,EAAawB,KAFe8kC,eAIlC,IAAIR,EAAO,EAAOC,EAAO,EACzB,EAAKpI,kBAAoB,GAEzB,IAAK,IAAI14C,EAAI,EAAGA,EAAI2tC,EAAO9jC,QAAS,CAChC,IAAIigC,EAAI6D,EAAO3tC,KACX2nC,EAAIgG,EAAO3tC,KACf6gD,GAAQ/W,EACRgX,GAAQnZ,EACR,EAAK+Q,kBAAkB5sC,KAAK,CAAEg+B,EAAGA,EAAGnC,EAAGA,IAXW,OAclDgG,EAAO9jC,OAAS,IAChB,EAAKgvC,eAAiBgI,EAAO,EAAKnI,kBAAkB7uC,OACpD,EAAKivC,eAAiBgI,EAAO,EAAKpI,kBAAkB7uC,QAGpDw3C,IACA,EAAK5D,YAAc,KAGvB,EAAKnE,SACL,EAAK6B,oBAxBiD,E,UAH9D,e,EAAA,G,EAAA,+BA+BYvwC,GAEJ,IAAIwwC,EAAoB,IAAI,EAAcxwC,GACtCgwC,EAAoB,IAAI6G,EAAc,GAAI35C,KAAKu5C,aAAcv5C,KAAK4oC,YAAY31B,YAAaqgC,GAM/F,OALAA,EAAGvwC,cAAH,MAA4B+vC,EAE5BA,EAAGrL,SAASznC,MACZ8yC,EAAGtB,SAEI8B,IAxCf,+BA8CQ,IAAIyB,EAAwB/0C,KAAKytC,cAkBjC,GAhB0B,MAAtBztC,KAAKytC,eACLsH,EAAI,IAAIxN,KAAKmP,SACb12C,KAAKytC,cAAgBsH,EACrB/0C,KAAK4oC,YAAYlB,MAAMmE,SAASkJ,IAGhCA,EAAE5gC,QAGgB,MAAlBnU,KAAK01C,WAAqB11C,KAAKu5C,cAC/BxE,EAAE4B,UAAU32C,KAAK01C,UAAW11C,KAAK81C,WAEb,MAApB91C,KAAK21C,aACLZ,EAAE6B,UAAU52C,KAAK41C,YAAa51C,KAAK21C,YAAa31C,KAAKm2C,YAAa,IAGnEn2C,KAAK4wC,kBAAkB7uC,OAAS,EAAE,CACjCgzC,EAAE6E,OAAO55C,KAAK4wC,kBAAkB,GAAG5O,EAAGhiC,KAAK4wC,kBAAkB,GAAG/Q,GAChE,IAAK,IAAI3nC,EAAI,EAAGA,EAAI8H,KAAK4wC,kBAAkB7uC,OAAQ7J,IAC/C68C,EAAE8E,OAAO75C,KAAK4wC,kBAAkB14C,GAAG8pC,EAAGhiC,KAAK4wC,kBAAkB14C,GAAG2nC,GAIpE7/B,KAAKu5C,cACLxE,EAAE+B,YAGgB,MAAlB92C,KAAK01C,WAAqB11C,KAAKu5C,cAC/BxE,EAAEgC,YA5Ed,+BAgFa/U,EAAWnC,GAAiC,IAAtB2R,IAAsB,yDAC7Cx3C,EAAI,IAAIutC,KAAKiF,MAAMxK,EAAGnC,GAC1B7/B,KAAKytC,cAAc1F,UAAU+J,eAAerF,aAAazyC,EAAGA,GAC5DgG,KAAK4wC,kBAAkB5sC,KAAK,CAAEg+B,EAAGhoC,EAAEgoC,EAAGnC,EAAG7lC,EAAE6lC,IAC3C7/B,KAAK8wC,iBAAkB,EACnBU,GAAQxxC,KAAKwxC,WArFzB,+BAwFaxP,EAAWnC,EAAW59B,GACf,GAATA,GAAuB,GAATA,IACbjC,KAAK4wC,kBAAkB3uC,GAAS,CAAC+/B,EAAGA,EAAGnC,EAAGA,GAC1C7/B,KAAK8wC,iBAAkB,EACvB9wC,KAAKwxC,YA5FjB,gCAgGcrN,EAAYC,EAAYC,EAAYC,GAC1CtkC,KAAK4wC,kBAAoB,CAAC,CAAC5O,EAAGmC,EAAGtE,EAAGuE,GAAK,CAACpC,EAAGqC,EAAGxE,EAAGyE,IACnDtkC,KAAK8wC,iBAAkB,EACvB9wC,KAAKwxC,c,6BAnGb,GAAmC,I,0nCCpH5B,IAAM,GAAb,YAEI,WAAYv5C,GAAc,yBAEtB,0BAAM,YAAaA,EAAQ,cAEtBqa,aAAoBra,EAAOma,UAAUC,QAAQ,gBAIlD,EAAK5I,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,CACrD,CAAErI,WAAY,OAAQgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACnG,CAAE1G,WAAY,MAAOgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAClG,CAAE1G,WAAY,QAASgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACpG,CAAE1G,WAAY,SAAUgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACrG,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCw7B,EAAe9yB,EAAW,GAAG1I,MAC7B4mC,EAAcl+B,EAAW,GAAG1I,MAC5BmoC,EAAgBz/B,EAAW,GAAG1I,MAC9BqoC,EAAiB3/B,EAAW,GAAG1I,MAE/B25C,EAAK,IAAI,GAAgBne,EAAMoL,EAAKuB,EAAOE,EAAQvpC,EAAO6b,KAAKC,iBAAkBpb,GACrFA,EAAEoK,cAAF,MAA2B+vC,KAE5B,GAAO,EAAO,qHAAqH,IAEtI,EAAKrpC,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,QAASgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACpG,MACJ,SAACe,GAEG,IACI+tC,EADmB/tC,EAAW,GAAG1I,MACT4J,cAAF,MACtBu+B,EAAgBz/B,EAAW,GAAG1I,MAE9By2C,EAAGC,cAAc,cAErBD,EAAGtO,MAAQA,EAAQsO,EAAGnC,cAAcvF,MAAMlG,EAC1C4N,EAAG4B,aAEJ,GAAO,EAAO,mCAAmC,IAEpD,EAAK/nC,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,CACrD,CAAErI,WAAY,SAAUgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACrG,MACJ,SAACe,GAEG,IACI+tC,EADmB/tC,EAAW,GAAG1I,MACT4J,cAAF,MACtBy+B,EAAiB3/B,EAAW,GAAG1I,MAE/By2C,EAAGC,cAAc,eAErBD,EAAGpO,OAASA,EAASoO,EAAGnC,cAAcvF,MAAMrI,EAC5C+P,EAAG4B,aAEJ,GAAO,EAAO,iCAAiC,IAEtD,EAAK/nC,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IACpDwM,IACA,SAACpN,GAEG,IACI+tC,EADmB/tC,EAAW,GAAG1I,MACT4J,cAAF,MAE1B,IAAI6sC,EAAGC,cAAc,YAErB,OAAOD,EAAGtO,MAAQsO,EAAGnC,cAAcvF,MAAMlG,KAE1C,GAAO,EAAO,2BAA2B,IAEhD,EAAKv4B,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,IACrDwM,IACA,SAACpN,GAEG,IACI+tC,EADmB/tC,EAAW,GAAG1I,MACT4J,cAAF,MAE1B,IAAI6sC,EAAGC,cAAc,aAErB,OAAOD,EAAGpO,OAASoO,EAAGnC,cAAcvF,MAAMrI,KAE3C,GAAO,EAAO,yBAAyB,IAE1C,EAAKp2B,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,IAArC,OAEX,SAACZ,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCy2C,EAAsBj3C,EAAEoK,cAAF,MAE1B,IAAI6sC,EAAGC,cAAc,QAErB,OAAOD,EAAGa,QAAe93C,EAAEsK,UAE5B,GAAO,EAAO,iEAAiE,IAhGpE,EAF9B,kBAAoC,GAyGvB,GAAb,YAEI,WAAmB0xB,EAAqBoL,EAAoBuB,EAAsBE,EAC9EvuB,EAA0BwB,GAA4B,yBACtD,0BAAMxB,EAAawB,KAFJkgB,OAAqB,EAAAoL,MAAoB,EAAAuB,QAAsB,EAAAE,SAG9E,EAAKuP,eAAiBpc,EAAO2M,EAAQ,EACrC,EAAK0P,eAAiBjR,EAAMyB,EAAS,EAErC,EAAKoP,kBAAoB,CACrB,CAAE5O,EAAGrN,EAAMkL,EAAGE,GAAO,CAAEiC,EAAGrN,EAAMkL,EAAGE,EAAMyB,GAAU,CAAEQ,EAAGrN,EAAO2M,EAAOzB,EAAGE,EAAMyB,GAAU,CAAEQ,EAAGrN,EAAO2M,EAAOzB,EAAGE,IAGnH,EAAKyR,SAEL,EAAK6B,oBAXiD,E,UAH9D,e,EAAA,G,EAAA,+BAkBYvwC,GAEJ,IAAIwwC,EAAoB,IAAI,EAAcxwC,GACtCgwC,EAAsB,IAAIgH,EAAgB95C,KAAK20B,KAAM30B,KAAK+/B,IAAK//B,KAAKshC,MAAOthC,KAAKwhC,OAAQxhC,KAAK4oC,YAAY31B,YAAaqgC,GAM1H,OALAA,EAAGvwC,cAAH,MAA4B+vC,EAE5BA,EAAGrL,SAASznC,MACZ8yC,EAAGtB,SAEI8B,IA3Bf,+BAgCQ,IAAIyB,EAAwB/0C,KAAKytC,cAEP,MAAtBztC,KAAKytC,eACLsH,EAAI,IAAIxN,KAAKmP,SACb12C,KAAKytC,cAAgBsH,EACrB/0C,KAAK4oC,YAAYlB,MAAMmE,SAASkJ,IAGhCA,EAAE5gC,QAGgB,MAAlBnU,KAAK01C,WACLX,EAAE4B,UAAU32C,KAAK01C,UAAW11C,KAAK81C,WAEb,MAApB91C,KAAK21C,aACLZ,EAAE6B,UAAU52C,KAAK41C,YAAa51C,KAAK21C,YAAa31C,KAAKm2C,YAAa,IAGtEpB,EAAE6E,OAAO55C,KAAK20B,KAAM30B,KAAK+/B,KACzBgV,EAAE8E,OAAO75C,KAAK20B,KAAO30B,KAAKshC,MAAOthC,KAAK+/B,KACtCgV,EAAE8E,OAAO75C,KAAK20B,KAAO30B,KAAKshC,MAAOthC,KAAK+/B,IAAM//B,KAAKwhC,QACjDuT,EAAE8E,OAAO75C,KAAK20B,KAAM30B,KAAK+/B,IAAM//B,KAAKwhC,QACpCuT,EAAE+B,YAEoB,MAAlB92C,KAAK01C,WACLX,EAAEgC,e,6BAzDd,GAAqC,I,yoBC9G9B,IAAM,GAAb,YAEI,WAAY9+C,GAAc,a,4FAAA,UACtB,0BAAM,aAAcA,EAAQ,CACxB,CACImI,KAAMlG,EAAUmkB,cAChBpa,SAAU,KACV7J,WAAY,QAEhB,CACIgG,KAAMlG,EAAUmkB,cAChBpa,SAAU,KACV7J,WAAY,QAEhB,CACIgG,KAAMlG,EAAUmkB,cAChBpa,SAAU,KACV7J,WAAY,oBAIf2F,cAAgB,wEAnBC,EAF9B,O,mOAAA,SAAqC,I,0nCCK9B,IAAM,GAAb,YAEI,WAAY9H,GAAc,yBAEtB,0BAAM,mBAAoBA,EAAQ,qCAE7Bqa,aAAoBra,EAAOma,UAAUC,QAAQ,gBAElD,EAAK5I,UAAU,IAAI1I,EAAO,mBAAoB,IAAI0B,EAAc,CAC5D,CAAErI,WAAY,OAAQgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACnG,CAAE1G,WAAY,MAAOgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAClG,CAAE1G,WAAY,QAASgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACpG,CAAE1G,WAAY,SAAUgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACrG,CAAE1G,WAAY,SAAUgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACrG,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCw7B,EAAe9yB,EAAW,GAAG1I,MAC7B4mC,EAAcl+B,EAAW,GAAG1I,MAC5BmoC,EAAgBz/B,EAAW,GAAG1I,MAC9BqoC,EAAiB3/B,EAAW,GAAG1I,MAC/B4gD,EAAiBl4C,EAAW,GAAG1I,MAE/B25C,EAAK,IAAI,GAAuBne,EAAMoL,EAAKuB,EAAOE,EAAQuY,EAAQ9hD,EAAO6b,KAAKC,iBAAkBpb,GACpGA,EAAEoK,cAAF,MAA2B+vC,KAE5B,GAAO,EAAO,kIAAkI,IAEvJ,EAAKrpC,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IACpDwM,IACA,SAACpN,GAEG,IACI+tC,EADmB/tC,EAAW,GAAG1I,MACF4J,cAAF,MAEjC,IAAI6sC,EAAGC,cAAc,YAErB,OAAOD,EAAGtO,MAAQsO,EAAGnC,cAAcvF,MAAMlG,KAE1C,GAAO,EAAO,2BAA2B,IAEhD,EAAKv4B,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,IACrDwM,IACA,SAACpN,GAEG,IACI+tC,EADmB/tC,EAAW,GAAG1I,MACF4J,cAAF,MAEjC,IAAI6sC,EAAGC,cAAc,aAErB,OAAOD,EAAGpO,OAASoO,EAAGnC,cAAcvF,MAAMrI,KAE3C,GAAO,EAAO,yBAAyB,IAE1C,EAAKp2B,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,IACzDwM,IACA,SAACpN,GAEG,IACI+tC,EADmB/tC,EAAW,GAAG1I,MACF4J,cAAF,MAEjC,IAAI6sC,EAAGC,cAAc,aAErB,OAAOD,EAAGmK,OAASnK,EAAGnC,cAAcvF,MAAMrI,KAE3C,GAAO,EAAO,8BAA8B,IAE/C,EAAKp2B,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,IAArC,OAEX,SAACZ,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCy2C,EAA6Bj3C,EAAEoK,cAAF,MAEjC,IAAI6sC,EAAGC,cAAc,QAErB,OAAOD,EAAGa,QAAe93C,EAAEsK,UAE5B,GAAO,EAAO,wEAAwE,IA7E3E,EAF9B,kBAA2C,GAsF9B,GAAb,YAEI,WAAmB0xB,EAAqBoL,EAAoBuB,EAAsBE,EAAuBuY,EACrG9mC,EAA0BwB,GAA4B,yBACtD,0BAAMxB,EAAawB,KAFJkgB,OAAqB,EAAAoL,MAAoB,EAAAuB,QAAsB,EAAAE,SAAuB,EAAAuY,SAGrG,EAAKhJ,eAAiBpc,EAAO2M,EAAQ,EACrC,EAAK0P,eAAiBjR,EAAMyB,EAAS,EAErC,EAAKoP,kBAAoB,GAEzB,EAAKoJ,gBAAgBrlB,EAAOolB,EAAQha,EAAMga,EAAQ1uC,KAAK+5B,GAAG,GAC1D,EAAK4U,gBAAgBrlB,EAAOolB,EAAQha,EAAMyB,EAASuY,EAAQ1uC,KAAK+5B,IAChE,EAAK4U,gBAAgBrlB,EAAO2M,EAAQyY,EAAQha,EAAMyB,EAASuY,EAAQ,EAAE1uC,KAAK+5B,GAAG,GAC7E,EAAK4U,gBAAgBrlB,EAAO2M,EAAQyY,EAAQha,EAAMga,EAAQ,GAC1D,EAAKnJ,kBAAkB5sC,KAAK,CAACg+B,EAAGrN,EAAOolB,EAAQla,EAAGE,IAElD,EAAKyR,SACL,EAAK6B,oBAdiD,E,UAH9D,e,EAAA,G,EAAA,+BAqBYvwC,GAEJ,IAAIwwC,EAAoB,IAAI,EAAcxwC,GACtCgwC,EAA6B,IAAImH,EAAuBj6C,KAAK20B,KAAM30B,KAAK+/B,IAAK//B,KAAKshC,MAAOthC,KAAKwhC,OAAQxhC,KAAK+5C,OAAQ/5C,KAAK4oC,YAAY31B,YAAaqgC,GAMrJ,OALAA,EAAGvwC,cAAH,MAA4B+vC,EAE5BA,EAAGrL,SAASznC,MACZ8yC,EAAGtB,SAEI8B,IA9Bf,sCAkCoB4G,EAAcC,EAAcC,GAIxC,IAHA,IACIC,EAAKhvC,KAAK+5B,GAAG,EADT,EAGAltC,EAAI,EAAGA,GAHP,EAGeA,IACnB8H,KAAK4wC,kBAAkB5sC,KAAK,CAACg+B,EAAGkY,EAAOl6C,KAAK+5C,OAAO1uC,KAAKi6B,IAAI8U,EAAaC,EAAGniD,GAAI2nC,EAAGsa,EAAOn6C,KAAK+5C,OAAO1uC,KAAKk6B,IAAI6U,EAAaC,EAAGniD,OAvC3I,+BA6CQ,IAAI68C,EAAwB/0C,KAAKytC,cAEP,MAAtBztC,KAAKytC,eACLsH,EAAI,IAAIxN,KAAKmP,SACb12C,KAAKytC,cAAgBsH,EACrB/0C,KAAK4oC,YAAYlB,MAAMmE,SAASkJ,IAGhCA,EAAE5gC,QAGgB,MAAlBnU,KAAK01C,WACLX,EAAE4B,UAAU32C,KAAK01C,UAAW11C,KAAK81C,WAEb,MAApB91C,KAAK21C,aACLZ,EAAE6B,UAAU52C,KAAK41C,YAAa51C,KAAK21C,YAAa31C,KAAKm2C,YAAa,IAGtEpB,EAAEuF,gBAAgBt6C,KAAK20B,KAAK30B,KAAK+/B,IAAK//B,KAAKshC,MAAOthC,KAAKwhC,OAAQxhC,KAAK+5C,QAE9C,MAAlB/5C,KAAK01C,WACLX,EAAEgC,e,6BAlEd,GAA4C,I,yoBC3FrC,IAAM,GAAb,YAEI,WAAY9+C,GAAc,a,4FAAA,UACtB,0BAAM,YAAaA,EAAQ,CACvB,CACImI,KAAMlG,EAAUmkB,cAChBpa,SAAU,KACV7J,WAAY,UAEhB,CACIgG,KAAMlG,EAAUmkB,cAChBpa,SAAU,KACV7J,WAAY,yBAIf2F,cAAgB,+EAdC,EAF9B,O,mOAAA,SAAoC,I,yoBCI7B,IAAM,GAAb,YAEI,WAAY9H,GAAc,O,4FAAA,UACtB,0BAAM,QAASA,EAAQ,gCAElBqa,aAAoBra,EAAOma,UAAUC,QAAQ,WAH5B,2BAKtB,IALsB,IAKtB,EALsB,iBAKd+mB,EALc,QAMlB,EAAK1vB,aAAa,IAAIhJ,EAAU04B,EAAM3gC,KAAM2S,IAAqB,SAACjS,GAAYA,EAAMA,MAAQigC,EAAM3gC,QAAQ,EAAM+K,EAAW2C,QAAQ,EAAMizB,EAAMj5B,eADnJ,EAAiB+4B,GAAWC,OAA5B,+CAAmC,IALb,yFAStB,EAAK/yB,YAAYmG,YAAc,IAAI,EAAc,EAAKnG,aACtD,EAAKA,YAAYmG,YAAYwC,4BAE7B,EAAKtF,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,CACrD,CAAErI,WAAY,QAASgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACpG,MACJ,SAACe,GACG,IAAIu3B,EAAgBv3B,EAAW,GAAG1I,MAClC+/B,GAAWQ,KAAKN,MAElB,GAAO,EAAM,gMAnBO,EAF9B,O,mOAAA,SAAgC,G,uKCJzB,IAAM,GAAb,yB,4FAAA,S,UAAA,O,EAAA,E,EAAA,4CAIuC3gC,EAAcwJ,EAAes4C,EAA4BC,GAE3E,MAATv4C,IACAA,EAAQ,GAEZxJ,GAAQ,IAAMwJ,EAEd,IAAIw4C,EAAUC,EAAgBC,aAAaliD,GAU3C,OARe,MAAXgiD,IAEAA,EAAUC,EAAgBE,WAAWJ,EAAQD,EAAa3R,aAE1D8R,EAAgBC,aAAaliD,GAAQgiD,GAIlCA,IArBf,iCAyB8BD,EAAqB5R,GAE3C,IAAIiS,EAASjS,EAAYoC,IAAI4C,SAASkN,QAAQC,QAAQF,OAAOL,GACzD9L,EAAI8L,EAAOlZ,MACX0Z,EAAIR,EAAOhZ,OAEf,GAAIqZ,EAAO94C,SAAW,EAAI2sC,EAAIsM,EAC1B,MAAO,CAAC,CAAEhZ,EAAG,EAAGnC,EAAG,GAAK,CAAEmC,EAAG0M,EAAG7O,EAAG,GAAK,CAAEmC,EAAG0M,EAAG7O,EAAGmb,GAAK,CAAEhZ,EAAG,EAAGnC,EAAGmb,IAGvE,IAAIP,EAAmB,GAInBQ,EAAkB,GACtBP,EAAgBQ,gBAAgB,CAAClZ,EAAG,EAAGnC,EAAG,GAAI,CAACmC,EAAG0M,EAAE,EAAG7O,EAAG,GAHpCsb,EAIDF,GACrBP,EAAgBQ,gBAAgB,CAAClZ,EAAG0M,EAAE,EAAG7O,EAAG,GAAI,CAACmC,EAAG0M,EAAE,EAAG7O,EAAGmb,EAAE,GALxCG,EAMDF,GACrBP,EAAgBQ,gBAAgB,CAAClZ,EAAG0M,EAAE,EAAG7O,EAAGmb,EAAE,GAAI,CAAChZ,EAAG,EAAGnC,EAAGmb,EAAE,GAPxCG,EAQDF,GACrBP,EAAgBQ,gBAAgB,CAAClZ,EAAG,EAAGnC,EAAGmb,EAAE,GAAI,CAAChZ,EAAG,EAAGnC,EAAG,GATpCsb,EAUDF,GAGrB,IADA,IAAIG,EAAM,CAACpZ,EAAG0M,EAAE,EAAG7O,EAAGmb,EAAE,GACxB,MAAiBC,EAAjB,eAAwB,CAApB,IAAII,EAAK,KACTX,EAAgBW,MAAMZ,EAASY,EAAOD,EAAI1M,EAAGsM,EAAGH,GAIpD,IADA,If4N6B3zC,EAAU+qC,EAAUj4C,EAEjDyqC,EACAC,EAEAvsC,EejOIqgC,GAAgB,GACbA,GAAK,CACRA,GAAO,EACP,IAAI,IAAItgC,EAAI,EAAGA,EAAIuiD,EAAQ14C,OAAS,EAAG7J,IfyNdgP,EexNQuzC,EAAQviD,GfwNN+5C,EexNUwI,GAASviD,EAAE,GAAGuiD,EAAQ14C,QfwNtB/H,EexN+BygD,EAAQviD,EAAE,Gf0N1FusC,SACAC,SAEAvsC,SAHAssC,EAAKwN,EAAEjQ,EAAI96B,EAAE86B,EACb0C,EAAKuN,EAAEpS,EAAI34B,EAAE24B,IAEb1nC,EAAIkT,KAAKs5B,KAAKD,EAAKA,EAAKD,EAAKA,IAEzB,KACGoK,GAAQ3nC,EAAGlN,GAGfqR,KAAKoqC,IAAI/Q,EAAK1qC,EAAEgoC,EAAIyC,EAAKzqC,EAAE6lC,EAAIoS,EAAEjQ,EAAI96B,EAAE24B,EAAIoS,EAAEpS,EAAI34B,EAAE86B,GAAK7pC,GelO5C,IACHsiD,EAAQjnC,OAAOtb,EAAE,EAAG,GACpBsgC,GAAO,GAOnB,OAAOiiB,IApEf,sCAwEmCnf,EAAcC,EAAY5hC,EAAWksC,GAKhE,IAHA,IAAIyV,GAAM/f,EAAIyG,EAAI1G,EAAM0G,IAAIroC,EAAE,GAC1B4hD,GAAMhgB,EAAIsE,EAAIvE,EAAMuE,IAAIlmC,EAAE,GAEtBzB,EAAI,EAAGA,GAAKyB,EAAI,EAAI,GAAKzB,IAC7B2tC,EAAO7hC,KAAK,CACRg+B,EAAG1G,EAAM0G,EAAIsZ,EAAGpjD,EAChB2nC,EAAGvE,EAAMuE,EAAI0b,EAAGrjD,MAhFhC,4BAuFyBuiD,EAAkBnf,EAAcC,EACjD+F,EAAeE,EAAgBqZ,GAQ/B,IANA,IAII7Y,EAAWnC,EAJX99B,EAAS8sC,GAAQvT,EAAOC,GACxB+f,GAAM/f,EAAIyG,EAAI1G,EAAM0G,GAAKjgC,EACzBw5C,GAAMhgB,EAAIsE,EAAIvE,EAAMuE,GAAK99B,EAIpB7J,EAAI,EAAGA,GAAK6J,EAAS,IAE1BigC,EAAI1G,EAAM0G,EAAI9pC,EAAIojD,EAClBzb,EAAIvE,EAAMuE,EAAI3nC,EAAIqjD,EAEbb,EAAgBc,cAAcxZ,EAAGnC,EAAGyB,EAAOE,EAAQqZ,IAL3B3iD,KAUjCuiD,EAAQz2C,KAAK,CAAEg+B,EAAGA,EAAGnC,EAAGA,MA1GhC,oCA+GiCmC,EAAWnC,EAAWyB,EAAeE,EAAgBqZ,GAE9E,OAAI7Y,EAAI,GAAKnC,EAAI,GAAKmC,EAAIV,GAASzB,EAAI2B,GAQ3B,GAJJqZ,EAAO,EAAIxvC,KAAK01B,MAAMiB,GAAK,EAAIV,EAAQj2B,KAAK01B,MAAMlB,GAAK,O,EArHvE,O,6BAAA,K,0nCAEmB,GAAA8a,aAA4C,GCQxD,IAAM,GAAb,YAEI,WAAY1iD,GAAc,kBAEtB,0BAAM,SAAUA,EAAQ,uLAEnBqa,aAAoBra,EAAOma,UAAUC,QAAQ,UAElD,IAAIopC,EAAwBxjD,EAAOma,UAAUC,QAAQ,aAN/B,OAUtB,EAAK5I,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,qBAAsBgG,KAAMnI,EAAOma,UAAUC,QAAQ,iBAAkBnD,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACvI,CAAE1G,WAAY,QAASgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACjG,CAAE1G,WAAY,YAAagG,KAAMq7C,EAAgBvsC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAEnG,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC6oC,EAAYngC,EAAW,GAAG1I,MAC1B0mC,EAAYh+B,EAAW,GAAG1I,MAC1BuiD,EAAwC75C,EAAW,GAAG1I,MACtD8I,EAAgBJ,EAAW,GAAG1I,MAC9BwiD,EAA+B95C,EAAW,GAAG1I,MAE7C25C,EAAK,IAAI,GAAa9Q,EAAGnC,EAAG6b,EAAmBlkC,UAAUpd,WAAY6H,EAAOhK,EAAO6b,KAAKC,iBAAkBpb,EAAGgjD,EAAUnkC,UAAUpd,YACrIzB,EAAEoK,cAAF,MAA2B+vC,KAE5B,GAAO,EAAO,khBAAkhB,IAEviB,EAAKrpC,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,qBAAsBgG,KAAMnI,EAAOma,UAAUC,QAAQ,iBAAkBnD,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACvI,CAAE1G,WAAY,QAASgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAEjG,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC6oC,EAAYngC,EAAW,GAAG1I,MAC1B0mC,EAAYh+B,EAAW,GAAG1I,MAC1BuiD,EAAwC75C,EAAW,GAAG1I,MACtD8I,EAAgBJ,EAAW,GAAG1I,MAE9B25C,EAAK,IAAI,GAAa9Q,EAAGnC,EAAG6b,EAAmBlkC,UAAUpd,WAAY6H,EAAOhK,EAAO6b,KAAKC,iBAAkBpb,GAC9GA,EAAEoK,cAAF,MAA2B+vC,KAE5B,GAAO,EAAO,oUAAoU,IAEzV,EAAKrpC,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,qBAAsBgG,KAAMnI,EAAOma,UAAUC,QAAQ,iBAAkBnD,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAEvI,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC6oC,EAAYngC,EAAW,GAAG1I,MAC1B0mC,EAAYh+B,EAAW,GAAG1I,MAC1BuiD,EAAwC75C,EAAW,GAAG1I,MAEtD25C,EAAK,IAAI,GAAa9Q,EAAGnC,EAAG6b,EAAmBlkC,UAAUpd,WAAY,KAAMnC,EAAO6b,KAAKC,iBAAkBpb,GAC7GA,EAAEoK,cAAF,MAA2B+vC,KAE5B,GAAO,EAAO,oUAAoU,IAEzV,EAAKrpC,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,qBAAsBgG,KAAMnI,EAAOma,UAAUC,QAAQ,iBAAkBnD,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAEvI,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCuiD,EAAwC75C,EAAW,GAAG1I,MACtDy2C,EAAiCj3C,EAAEoK,cAAF,MAEjC6sC,EAAGC,cAAc,aAErBD,EAAGgM,WAAWF,EAAmBlkC,UAAUpd,eAE5C,GAAO,EAAO,0RAA0R,IAE/S,EAAKqP,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,qBAAsBgG,KAAMnI,EAAOma,UAAUC,QAAQ,iBAAkBnD,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACvI,CAAE1G,WAAY,QAASgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAEjG,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCuiD,EAAwC75C,EAAW,GAAG1I,MACtD8I,EAAgBJ,EAAW,GAAG1I,MAC9By2C,EAAiCj3C,EAAEoK,cAAF,MAEjC6sC,EAAGC,cAAc,aAErBD,EAAGgM,WAAWF,EAAmBlkC,UAAUpd,WAAY6H,MAExD,GAAO,EAAO,0RAA0R,IAE/S,EAAKwH,UAAU,IAAI1I,EAAO,gBAAiB,IAAI0B,EAAc,CACzD,CAAErI,WAAY,QAASgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACjG,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC8I,EAAgBJ,EAAW,GAAG1I,MAC9By2C,EAAiCj3C,EAAEoK,cAAF,MAEjC6sC,EAAGC,cAAc,aAErBD,EAAGgM,WAAWhM,EAAGiM,YAAa55C,MAE/B,GAAO,EAAO,qCAAqC,IAE1D,EAAKwH,UAAU,IAAI1I,EAAO,gBAAiB,IAAI0B,EAAc,CACzD,CAAErI,WAAY,aAAcgG,KAAM,IAAI,EAAU+N,IAAmBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACrH,CAAE1G,WAAY,aAAcgG,KAAMnI,EAAOma,UAAUC,QAAQ,cAAenD,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC5H,CAAE1G,WAAY,kBAAmBgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAE3G,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC2iD,EAAsBj6C,EAAW,GAAG1I,MACpC4iD,EAAgCl6C,EAAW,GAAG1I,MAC9C6iD,EAA0Bn6C,EAAW,GAAG1I,MACxCy2C,EAAiCj3C,EAAEoK,cAAF,MAEjCk5C,EAAoB,GARb,uBASX,YAAcH,EAAd,+CAA0B,KAAjBv4C,EAAiB,QACtB04C,EAAQj4C,KAAKT,EAAEpK,QAVR,kFAaPy2C,EAAGC,cAAc,kBAErBD,EAAGsM,cAAcD,EAASF,EAAWvkC,UAAUpd,WAAY4hD,MAE5D,GAAO,EAAO,6BAA6B,IAElD,EAAKvyC,UAAU,IAAI1I,EAAO,gBAAiB,IAAI0B,EAAc,CACzD,CAAErI,WAAY,YAAagG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACrG,CAAE1G,WAAY,UAAWgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACnG,CAAE1G,WAAY,aAAcgG,KAAMnI,EAAOma,UAAUC,QAAQ,cAAenD,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC5H,CAAE1G,WAAY,kBAAmBgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAE3G,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCgjD,EAAoBt6C,EAAW,GAAG1I,MAClCijD,EAAkBv6C,EAAW,GAAG1I,MAChC4iD,EAAgCl6C,EAAW,GAAG1I,MAC9C6iD,EAA0Bn6C,EAAW,GAAG1I,MACxCy2C,EAAiCj3C,EAAEoK,cAAF,MAErC,IAAI6sC,EAAGC,cAAc,iBAArB,CAEA,IAAIoM,EAAoB,GAExB,GAAIE,EAAYC,GAAWA,EAAUD,EAAY,IAC7C,IAAK,IAAIjkD,EAAIikD,EAAWjkD,EAAIkkD,EAASlkD,IAAK+jD,EAAQj4C,KAAK9L,GAG3D03C,EAAGsM,cAAcD,EAASF,EAAWvkC,UAAUpd,WAAY4hD,OAE5D,GAAO,EAAO,6BAA6B,IAElD,EAAKvyC,UAAU,IAAI1I,EAAO,gBAAiB,IAAI0B,EAAc,IACzD,MACA,SAACZ,GAEG,IACI+tC,EADmB/tC,EAAW,GAAG1I,MACE4J,cAAF,MAEjC6sC,EAAGC,cAAc,kBAErBD,EAAGyM,eAAc,MAElB,GAAO,EAAO,yEAAyE,IAE9F,EAAK5yC,UAAU,IAAI1I,EAAO,iBAAkB,IAAI0B,EAAc,IAC1D,MACA,SAACZ,GAEG,IACI+tC,EADmB/tC,EAAW,GAAG1I,MACE4J,cAAF,MAEjC6sC,EAAGC,cAAc,mBAErBD,EAAG0M,oBAEJ,GAAO,EAAO,oCAAoC,IAEzD,EAAK7yC,UAAU,IAAI1I,EAAO,kBAAmB,IAAI0B,EAAc,IAC3D,MACA,SAACZ,GAEG,IACI+tC,EADmB/tC,EAAW,GAAG1I,MACE4J,cAAF,MAEjC6sC,EAAGC,cAAc,oBAErBD,EAAG2M,qBAEJ,GAAO,EAAO,qDAAqD,IAE1E,EAAK9yC,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,aAAcgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACzG8Q,IACA,SAAC/P,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCqtC,EAAgB3kC,EAAW,GAAG1I,MAC9By2C,EAAmBj3C,EAAEoK,cAAF,MAEnB6sC,EAAGC,cAAc,aAErBD,EAAGiG,SAASrP,MAEb,GAAO,EAAO,6GAA6G,IAElI,EAAK/8B,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,IAArC,OAEX,SAACZ,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCy2C,EAAmBj3C,EAAEoK,cAAF,MAEvB,IAAI6sC,EAAGC,cAAc,QAErB,OAAOD,EAAGa,QAAe93C,EAAEsK,UAE5B,GAAO,EAAO,8DAA8D,IA7O7D,EAF9B,kBAAiC,GAsPpB,GAAb,YAWI,WAAmB++B,EAAkBnC,EAAkBpnC,EAAqBwJ,EACxEgR,EAA0BwB,GACS,MAA5BknC,EAA4B,uDAAR,SAAQ,YACnC,0BAAM1oC,EAAawB,KAHJutB,IAAkB,EAAAnC,IAAkB,EAAApnC,OAAqB,EAAAwJ,QAEjE,EAAA05C,YAXX,EAAAa,iBAA6B,GAC7B,EAAAC,eAAyB,EACzB,EAAAC,qBAA+B,EAC/B,EAAAC,cAAwB,EACxB,EAAAC,iBAA2B,EAE3B,EAAAb,WAAa,OACb,EAAAF,YAAsB,GAOlB,EAAKD,WAAW,KAAM35C,GAEtB,IAAIu4C,EAAsB,EAAK/M,cALI,OAOnC,EAAKA,cAAc9F,eAAeE,UAAU,EAAK7F,EAAIwY,EAAOlZ,MAAQ,EAAG,EAAKzB,EAAI2a,EAAOhZ,OAAS,GAChG,EAAKiM,cAAc1F,UAAUC,WAE7B,EAAKY,YAAYlB,MAAMmE,SAAS2O,GAGhC,EAAKzJ,eAAiByJ,EAAOlZ,MAAQ,EACrC,EAAK0P,eAAiBwJ,EAAOhZ,OAAS,EAEtC,EAAK6R,oBAhB8B,E,UAb3C,e,EAAA,G,EAAA,+BAiCYvwC,GAEJ,IAAIwwC,EAAoB,IAAI,EAAcxwC,GACtCgwC,EAAmB,IAAI+J,EAAa78C,KAAKgiC,EAAGhiC,KAAK6/B,EAAG7/B,KAAKvH,KAAMuH,KAAKiC,MAAOjC,KAAK4oC,YAAY31B,YAAaqgC,GAM7G,OALAA,EAAGvwC,cAAH,MAA4B+vC,EAE5BA,EAAGrL,SAASznC,MACZ8yC,EAAGtB,SAEI8B,IA1Cf,+BA8Ca9M,GACLxmC,KAAKytC,cAAcjH,MAAQA,IA/CnC,iCAkDe/tC,EAAewJ,GAEtB,GAAIxJ,GAAQuH,KAAKvH,MAAQwJ,GAASjC,KAAKiC,MAAvC,CAEY,MAARxJ,IAAcA,EAAOuH,KAAKvH,MACjB,MAATwJ,IAAeA,EAAQ,GAC3BjC,KAAKiC,MAAQA,EAEbjC,KAAK67C,YAAcpjD,EAEnB,IAAIqkD,EAAS,GAEe,MAAxBC,OAAOC,gBAEPF,EAASC,OAAOC,eAGpB,IAAIC,EAAQ1V,KAAK2V,OAAO3R,OAAO4R,UAAUL,EAAS,oCAC9CM,EAAgB3kD,EAAO,IAAMwJ,EAC7Bo7C,EAAUJ,EAAMK,SAASF,GAE7B,GAAe,MAAXC,EAAiB,CAEjB,GAAsB,qBAAlBr9C,KAAK27C,UAAkC,CAEvC,IAAIviD,EAAI4G,KAAK4oC,YAAYe,eAAeyT,GAExC,GAAS,MAALhkD,EAAW,CACX,IAAI,EAAS,IAAImuC,KAAKgW,OAAOF,GAEzBG,EAAkBjW,KAAKkW,cAAcjkD,OAAO,CAC5C8nC,MAAO,EAAOA,MACdE,OAAQ,EAAOA,OACfma,UAAWpU,KAAK2C,YAAYC,UAGhCnqC,KAAK4oC,YAAYoC,IAAI4C,SAAS4D,OAAO,EAAQgM,GAAiB,GAC9Dx9C,KAAK4oC,YAAYe,eAAeyT,GAAiBI,EACjDpkD,EAAIokD,EAIO,OADfH,EAAUjkD,KACWikD,EAAUJ,EAAMK,SAASF,IAmClD,IAAI5C,EAAmCx6C,KAAKytC,cAC9B,MAAV+M,GACAA,EAAS,IAAIjT,KAAKgW,OAAOF,GACzBr9C,KAAKytC,cAAgB+M,GAErBA,EAAO6C,QAAUA,EAGrBr9C,KAAK4wC,kBAAoB,GAAgB8M,qBAAqBjlD,EAAMwJ,EAAOjC,KAAM,IAAIunC,KAAKgW,OAAON,EAAMK,SAASF,KAChHp9C,KAAK8wC,iBAAkB,OAGG,MAAtB9wC,KAAKytC,gBACLztC,KAAKytC,cAAgB,IAAIlG,KAAKgW,WA5I9C,sEAuJkBzB,EAAsBC,EAAoBC,GACpDh8C,KAAKq8C,eAAc,GACnBr8C,KAAKw8C,iBAAmBV,EACxB97C,KAAK+7C,WAAaA,EAClB/7C,KAAK08C,qBAAuBV,EAAkB,IAC9Ch8C,KAAK28C,cAAgB,EACrB38C,KAAKy8C,eAAgB,EACrBz8C,KAAK4oC,YAAYmB,iBAAiB/lC,KAAKhE,QA9J/C,oCAiKkB29C,GACV,GAAI39C,KAAKy8C,cAAe,CACpB,IAAImB,EAAmB59C,KAAK4oC,YAAYmB,iBACpC7xC,EAAI0lD,EAAiBh5C,QAAQ5E,MACjC49C,EAAiBpqC,OAAOtb,EAAG,GAE/B8H,KAAKy8C,eAAgB,EACjBkB,GAAc39C,KAAKswC,YAAW,KAxK1C,uCA4KQtwC,KAAK48C,iBAAkB,IA5K/B,wCAgLQ58C,KAAK48C,iBAAkB,IAhL/B,2BAmLSiB,GAED,IAAI79C,KAAK48C,gBAAT,CAEA,IAAIkB,EAEJ,GAAuB,gBAAnB99C,KAAK+7C,WAA8B,CACnC,IAAIgC,EAAyC,EAA/B/9C,KAAKw8C,iBAAiBz6C,OAAa/B,KAAK08C,qBAClDsB,EAAsB3yC,KAAK0E,MAAM/P,KAAK28C,cAAgBoB,GACtDE,EAAiBj+C,KAAK28C,cAAgBqB,EAAsBD,GAChED,EAAQ99C,KAAK08C,qBAAuBuB,IACvBj+C,KAAKw8C,iBAAiBz6C,SAC/B+7C,EAAQ,EAAI99C,KAAKw8C,iBAAiBz6C,OAAS+7C,GAE/CA,EAAQzyC,KAAK0E,MAAM+tC,QAEnB,GAAuB,QAAnB99C,KAAK+7C,WAAsB,CAC3B,IAAImC,EAASl+C,KAAKw8C,iBAAiBz6C,OAAS/B,KAAK08C,qBAC7C,EAAsBrxC,KAAK0E,MAAM/P,KAAK28C,cAAgBuB,GACtD,EAAiBl+C,KAAK28C,cAAgB,EAAsBuB,EAChEJ,EAAQ99C,KAAK08C,qBAAuB,EACpCoB,EAAQzyC,KAAK0E,MAAM+tC,QAGnB,IADAA,EAAQzyC,KAAK0E,MAAM/P,KAAK08C,qBAAuB18C,KAAK28C,iBACvC38C,KAAKw8C,iBAAiBz6C,OAE/B,YADA/B,KAAKq8C,eAAc,GAK/Br8C,KAAK28C,eAAiBkB,EAEtB79C,KAAK47C,WAAW,KAAM57C,KAAKw8C,iBAAiBsB,U,6BAnNpD,GAAkC,I,yoBCxP3B,IAAM,GAAb,YAEI,WAAY7lD,GAAc,a,4FAAA,UACtB,0BAAM,gBAAiBA,EAEnBkmD,cAAcp0C,QACV,SAACq0C,GACG,OAAoB,MAAbA,EAAIn8C,OAA8B,GAAbm8C,EAAIn8C,SAEtCU,KAAI,SAACy7C,GACH,MAAO,CACHh+C,KAAMlG,EAAUmkB,cAChBpa,SAAU,KACV7J,WAAYgkD,EAAI3lD,YAMvBsH,cAAgB,iCAjBC,EAF9B,O,mOAAA,SAAwC,I,0nCCFjC,IAAM,GAAb,YAEI,WAAY9H,GAAc,yBAEtB,0BAAM,OAAQA,EAAQ,mEAEjBqa,aAAoBra,EAAOma,UAAUC,QAAQ,gBAIlD,EAAK5I,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,CAChD,CAAErI,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,WAAYgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACvG,CAAE1G,WAAY,OAAQgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACnG,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC6oC,EAAYngC,EAAW,GAAG1I,MAC1B0mC,EAAYh+B,EAAW,GAAG1I,MAC1BklD,EAAmBx8C,EAAW,GAAG1I,MACjCgnB,EAAete,EAAW,GAAG1I,MAE7By2C,EAAK,IAAI,GAAW5N,EAAGnC,EAAGwe,EAAUl+B,EAAMloB,EAAO6b,KAAKC,iBAAkBpb,GAC5EA,EAAEoK,cAAF,MAA2B6sC,KAE5B,GAAO,EAAO,+IAA+I,IAEpK,EAAKnmC,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,CACvD,CAAErI,WAAY,WAAYgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACvG,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCklD,EAAmBx8C,EAAW,GAAG1I,MAChBR,EAAEoK,cAAF,MAElBu7C,YAAYD,MAEhB,GAAO,EAAO,wDAAwD,IAE7E,EAAK50C,UAAU,IAAI1I,EAAO,eAAgB,IAAI0B,EAAc,CACxD,CAAErI,WAAY,YAAagG,KAAMnI,EAAOma,UAAUC,QAAQ,aAAcnD,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC1H,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC0pC,EAA+BhhC,EAAW,GAAG1I,MAC5BR,EAAEoK,cAAF,MAElBw7C,aAAa1b,EAAUrrB,UAAUpd,eAErC,GAAO,EAAO,yHAAyH,IAE9I,EAAKqP,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,OAAQgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACnG,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCgnB,EAAete,EAAW,GAAG1I,MACZR,EAAEoK,cAAF,MAElBy7C,QAAQr+B,MAEZ,GAAO,EAAO,oBAAoB,IAEzC,EAAK1W,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,IAArC,OAEX,SAACZ,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCy2C,EAAiBj3C,EAAEoK,cAAF,MAErB,IAAI6sC,EAAGC,cAAc,QAErB,OAAOD,EAAGa,QAAe93C,EAAEsK,UAE5B,GAAO,EAAO,4DAA4D,IAEjF,EAAKwG,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IACpDwM,IACA,SAACpN,GAEG,IACI+tC,EADmB/tC,EAAW,GAAG1I,MACd4J,cAAF,MAErB,IAAI6sC,EAAGC,cAAc,YAErB,OAAOD,EAAG6O,cAEX,GAAO,EAAO,sCAAsC,IAE3D,EAAKh1C,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,IACrDwM,IACA,SAACpN,GAEG,IACI+tC,EADmB/tC,EAAW,GAAG1I,MACd4J,cAAF,MAErB,IAAI6sC,EAAGC,cAAc,aAErB,OAAOD,EAAG8O,eAEX,GAAO,EAAO,oCAAoC,IAvGnC,EAF9B,kBAA+B,GAgHlB,GAAb,YAkBI,WAAmB1c,EAAkBnC,EAAkBwe,EAC5Cl+B,EACPlN,EAA0BwB,GAA4B,yBACtD,0BAAMxB,EAAawB,KAHJutB,IAAkB,EAAAnC,IAAkB,EAAAwe,WAC5C,EAAAl+B,OAjBX,EAAA0iB,UAAoB,OAEpB,EAAA8b,UACI,IAAIpX,KAAKqX,UAAU,CACfC,WAAY,QACZC,SAAU,EAAKT,SACfU,UAAW,SACXC,WAAY,SACZzc,KAAM,CAAC,EAAKmT,WACZxR,OAAQ,EAAKyR,YACbsJ,gBAAiB,EAAKrJ,YACtBsJ,YAAY,EACZC,UAAU,EACVC,MAAO,SAOX,EAAKrO,eAAiB/O,EACtB,EAAKgP,eAAiBnR,EAEtB,EAAK8V,YAAc,KACnB,EAAKgJ,UAAUza,OAAS,KAExB,EAAK0M,kBAAoB,GAEzB,EAAKY,SACL,EAAK6B,oBAXiD,E,UApB9D,e,EAAA,G,EAAA,+BAkCYvwC,GAEJ,IAAIwwC,EAAoB,IAAI,EAAcxwC,GACtCgwC,EAAiB,IAAIuM,EAAWr/C,KAAKgiC,EAAGhiC,KAAK6/B,EAAG7/B,KAAKq+C,SAAUr+C,KAAKmgB,KAAMngB,KAAK4oC,YAAY31B,YAAaqgC,GAQ5G,OAPAA,EAAGvwC,cAAH,MAA4B+vC,EAE5BA,EAAGjQ,UAAY7iC,KAAK6iC,UAEpBiQ,EAAGrL,SAASznC,MACZ8yC,EAAGtB,SAEI8B,IA7Cf,+BAmDQ,IAAIyB,EAAoB/0C,KAAKytC,cAE7B,GAA0B,MAAtBztC,KAAKytC,cACLsH,EAAI,IAAIxN,KAAK+X,KAAKt/C,KAAKmgB,KAAMngB,KAAK2+C,WAClC3+C,KAAKytC,cAAgBsH,EACrB/0C,KAAKytC,cAAc9F,eAAeE,UAAU7nC,KAAKgiC,EAAGhiC,KAAK6/B,GACzD7/B,KAAKytC,cAAc1F,UAAUC,WAC7BhoC,KAAK4oC,YAAYlB,MAAMmE,SAASkJ,OAC7B,CAOH,OANAA,EAAE50B,KAAOngB,KAAKmgB,KACdngB,KAAK2+C,UAAUpc,KAAOviC,KAAK01C,UAC3B11C,KAAK2+C,UAAUza,OAASlkC,KAAK21C,YAC7B31C,KAAK2+C,UAAUM,gBAAkBj/C,KAAK41C,YACtCb,EAAEvO,MAAQxmC,KAAK81C,UACf91C,KAAK2+C,UAAUG,SAAW9+C,KAAKq+C,SACvBr+C,KAAK6iC,WACT,IAAK,OAAQkS,EAAEwK,OAAOvd,EAAI,EAAG,MAC7B,IAAK,SAAU+S,EAAEwK,OAAOvd,EAAI,GAAK,MACjC,IAAK,QAAS+S,EAAEwK,OAAOvd,EAAI,EAE/B+S,EAAEyK,MAAQx/C,KAAK2+C,UAKnB,GAFA3+C,KAAK+wC,eAAiB,EACtB/wC,KAAKgxC,eAAiB,EACN,MAAbhxC,KAAKmgB,KAAa,CACjB,IAAIs/B,EAAKlY,KAAKmY,YAAYC,YAAY3/C,KAAKmgB,KAAMngB,KAAK2+C,WAEtD3+C,KAAK+wC,eAAiB0O,EAAGne,MAAQ,EACjCthC,KAAKgxC,eAAiByO,EAAGje,OAAS,KAhF9C,kCAsFgB6c,GACRr+C,KAAKq+C,SAAWA,EAChBr+C,KAAKwxC,WAxFb,8BA2FYrxB,GACJngB,KAAKmgB,KAAOA,EACZngB,KAAKwxC,WA7Fb,mCAgGiB3O,GACT7iC,KAAK6iC,UAAYA,EACjB7iC,KAAKwxC,WAlGb,iCAuGQ,OADwBxxC,KAAKytC,cACpBnM,QAvGjB,kCA4GQ,OADwBthC,KAAKytC,cACpBjM,Y,6BA5GjB,GAAgC,I,yoBCnHzB,IAAM,GAAb,YAEI,WAAYvpC,GAAc,a,4FAAA,UACtB,0BAAM,OAAQA,EAAQ,wIAEjBqa,aAAoBra,EAAOma,UAAUC,QAAQ,WAElD,EAAK3I,aAAa,IAAIhJ,EAAU,KAAMuO,IAAqB,SAAC9V,GAAYA,EAAMA,MAAQkS,KAAK+5B,MAAM,EAAM5hC,EAAW2C,QAAQ,EAAM,iCAChI,EAAKuD,aAAa,IAAIhJ,EAAU,IAAKuO,IAAqB,SAAC9V,GAAYA,EAAMA,MAAQkS,KAAKu0C,KAAK,EAAMp8C,EAAW2C,QAAQ,EAAM,yBAE9H,EAAKC,YAAYmG,YAAc,IAAI,EAAc,EAAKnG,aACtD,EAAKA,YAAYmG,YAAYwC,4BAE7B,EAAKtF,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,CACjD,CAAErI,WAAY,OAAQgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACnGqN,IACA,SAACtM,GACG,OAAOwJ,KAAK01B,MAAcl/B,EAAW,GAAG1I,UACzC,GAAO,EAAM,wBAEpB,EAAKsQ,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,CACjD,CAAErI,WAAY,OAAQgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACnGqN,IACA,SAACtM,GACG,OAAOwJ,KAAK8rC,MAAct1C,EAAW,GAAG1I,UACzC,GAAO,EAAM,qEAEpB,EAAKsQ,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,CAChD,CAAErI,WAAY,OAAQgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACnGqN,IACA,SAACtM,GACG,OAAOwJ,KAAKw0C,KAAah+C,EAAW,GAAG1I,UACxC,GAAO,EAAM,gEAEpB,EAAKsQ,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,OAAQgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACnGqN,IACA,SAACtM,GACG,OAAOwJ,KAAKkE,KAAa1N,EAAW,GAAG1I,UACxC,GAAO,EAAM,sKAEpB,EAAKsQ,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,CAChD,CAAErI,WAAY,OAAQgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACnGmO,IACA,SAACpN,GACG,OAAOwJ,KAAKs5B,KAAa9iC,EAAW,GAAG1I,UACxC,GAAO,EAAM,kJAEpB,EAAKsQ,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,IAClDwM,IACA,SAACpN,GACG,OAAOwJ,KAAK+rC,YACb,GAAO,EAAM,0DAEpB,EAAK3tC,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,CAC/C,CAAErI,WAAY,QAASgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACpG,CAAE1G,WAAY,WAAYgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACvGmO,IACA,SAACpN,GACG,OAAOwJ,KAAKy0C,IAAYj+C,EAAW,GAAG1I,MAAe0I,EAAW,GAAG1I,UACpE,GAAO,EAAM,2CAEpB,EAAKsQ,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,CACrD,CAAErI,WAAY,cAAegG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC1GmO,IACA,SAACpN,GACG,OAAgBA,EAAW,GAAG1I,MAASkS,KAAK+5B,GAAK,OAClD,GAAO,EAAM,2EAEpB,EAAK37B,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,CACrD,CAAErI,WAAY,eAAgBgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC3GmO,IACA,SAACpN,GACG,OAAgBA,EAAW,GAAG1I,MAAS,IAAMkS,KAAK+5B,MACnD,GAAO,EAAM,2EAEpB,EAAK37B,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,CAC/C,CAAErI,WAAY,OAAQgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACnGmO,IACA,SAACpN,GACG,OAAOwJ,KAAK00C,IAAYl+C,EAAW,GAAG1I,UACvC,GAAO,EAAM,iCAEpB,EAAKsQ,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,CAC/C,CAAErI,WAAY,OAAQgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACnGmO,IACA,SAACpN,GACG,OAAOwJ,KAAK4K,IAAYpU,EAAW,GAAG1I,UACvC,GAAO,EAAM,oDAEpB,EAAKsQ,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,CACjD,CAAErI,WAAY,OAAQgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACnGmO,IACA,SAACpN,GACG,OAAOwJ,KAAK20C,MAAcn+C,EAAW,GAAG1I,UACzC,GAAO,EAAM,8CAEpB,EAAKsQ,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,CAC/C,CAAErI,WAAY,cAAegG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC1GmO,IACA,SAACpN,GACG,OAAOwJ,KAAKk6B,IAAY1jC,EAAW,GAAG1I,UACvC,GAAO,EAAM,qCAEpB,EAAKsQ,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,CAC/C,CAAErI,WAAY,cAAegG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC1GmO,IACA,SAACpN,GACG,OAAOwJ,KAAKi6B,IAAYzjC,EAAW,GAAG1I,UACvC,GAAO,EAAM,uCAEpB,EAAKsQ,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,CAC/C,CAAErI,WAAY,cAAegG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC1GmO,IACA,SAACpN,GACG,OAAOwJ,KAAK40C,IAAYp+C,EAAW,GAAG1I,UACvC,GAAO,EAAM,uCAEpB,EAAKsQ,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,CAChD,CAAErI,WAAY,eAAgBgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC3GmO,IACA,SAACpN,GACG,OAAOwJ,KAAK60C,KAAar+C,EAAW,GAAG1I,UACxC,GAAO,EAAM,iDAEpB,EAAKsQ,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,CAChD,CAAErI,WAAY,iBAAkBgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC7GmO,IACA,SAACpN,GACG,OAAOwJ,KAAK80C,KAAat+C,EAAW,GAAG1I,UACxC,GAAO,EAAM,mDAEpB,EAAKsQ,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,CAChD,CAAErI,WAAY,iBAAkBgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC7GmO,IACA,SAACpN,GACG,OAAOwJ,KAAK+0C,KAAav+C,EAAW,GAAG1I,UACxC,GAAO,EAAM,mDAEpB,EAAKsQ,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,CACjD,CAAErI,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChGmO,IACA,SAACpN,GACG,OAAOwJ,KAAKg1C,MAAcx+C,EAAW,GAAG1I,MAAe0I,EAAW,GAAG1I,UACtE,GAAO,EAAM,2LAEpB,EAAKsQ,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,CAC/C,CAAErI,WAAY,OAAQgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACnGmO,IACA,SAACpN,GACG,OAAOwJ,KAAKoqC,IAAY5zC,EAAW,GAAG1I,UACvC,GAAO,EAAM,qCAEpB,EAAKsQ,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,CAC/C,CAAErI,WAAY,OAAQgG,KAAM4O,GAAoBE,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAClGkO,IACA,SAACnN,GACG,OAAOwJ,KAAKoqC,IAAY5zC,EAAW,GAAG1I,UACvC,GAAO,EAAM,qCAEpB,EAAKsQ,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,CAC/C,CAAErI,WAAY,OAAQgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChGqN,IACA,SAACtM,GACG,OAAOwJ,KAAKoqC,IAAY5zC,EAAW,GAAG1I,UACvC,GAAO,EAAM,qCAEpB,EAAKsQ,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,CAC/C,CAAErI,WAAY,IAAKgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC7F,CAAE1G,WAAY,IAAKgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC7FqN,IACA,SAACtM,GACG,OAAOwJ,KAAKw4B,IAAYhiC,EAAW,GAAG1I,MAAe0I,EAAW,GAAG1I,UACpE,GAAO,EAAM,+CAEpB,EAAKsQ,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,CAC/C,CAAErI,WAAY,IAAKgG,KAAM4O,GAAoBE,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC/F,CAAE1G,WAAY,IAAKgG,KAAM4O,GAAoBE,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC/FkO,IACA,SAACnN,GACG,OAAOwJ,KAAKw4B,IAAYhiC,EAAW,GAAG1I,MAAe0I,EAAW,GAAG1I,UACpE,GAAO,EAAM,+CAEpB,EAAKsQ,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,CAC/C,CAAErI,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChGmO,IACA,SAACpN,GACG,OAAOwJ,KAAKw4B,IAAYhiC,EAAW,GAAG1I,MAAe0I,EAAW,GAAG1I,UACpE,GAAO,EAAM,+CAEpB,EAAKsQ,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,CAC/C,CAAErI,WAAY,IAAKgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC7F,CAAE1G,WAAY,IAAKgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC7FqN,IACA,SAACtM,GACG,OAAOwJ,KAAKC,IAAYzJ,EAAW,GAAG1I,MAAe0I,EAAW,GAAG1I,UACpE,GAAO,EAAM,gDAEpB,EAAKsQ,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,CAC/C,CAAErI,WAAY,IAAKgG,KAAM4O,GAAoBE,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC/F,CAAE1G,WAAY,IAAKgG,KAAM4O,GAAoBE,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC/FkO,IACA,SAACnN,GACG,OAAOwJ,KAAKC,IAAYzJ,EAAW,GAAG1I,MAAe0I,EAAW,GAAG1I,UACpE,GAAO,EAAM,gDAEpB,EAAKsQ,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,CAC/C,CAAErI,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChGmO,IACA,SAACpN,GACG,OAAOwJ,KAAKC,IAAYzJ,EAAW,GAAG1I,MAAe0I,EAAW,GAAG1I,UACpE,GAAO,EAAM,gDApNE,EAF9B,O,mOAAA,SAA+B,G,88BCExB,IAAM,GAAb,YAMI,WAAYlB,GAAc,yBACtB,0BAAM,SAAUA,EAAQ,+FAH5BqoD,gBAA0B,EAKtB,EAAKC,YAAc,IAAI,EAAqBtoD,EAAOma,UAAUC,QAAQ,gBAErE,EAAKC,aAAoBra,EAAOma,UAAUC,QAAQ,WAElD,EAAK3I,aAAa,IAAIhJ,EAAU,MAAOzI,EAAOma,UAAUC,QAAQ,gBAC5D,SAAClZ,GAAYA,EAAMA,MAAQ,EAAKonD,eAAe,EAAM/8C,EAAW2C,QAAQ,EAAM,6DAElF,EAAKC,YAAYmG,YAAc,IAAI,EAAc,EAAKnG,aACtD,EAAKA,YAAYmG,YAAYwC,4BAsD7B,EAAKtF,UAAU,IAAI1I,EAAO,oBAAqB,IAAI0B,EAAc,IAC7D0L,IACJ,SAACtM,GACG,OAAO2+C,KAAKC,MAAQ,EAAKH,mBAE3B,GAAO,EAAM,oGAtEO,EAN9B,kBAAiC,GAkFpB,GAAb,YAEI,WAAYroD,GAAc,yBACtB,0BAAM,cAAeA,EAAQ,sHAExBqa,aAAoBra,EAAOma,UAAUC,QAAQ,WAElD,EAAK5I,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,CACjD,CAAErI,WAAY,OAAQgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACnG,MACA,SAACe,GACG5J,EAAO6b,KAAKC,iBAAiBu2B,aAAa9iB,MAAM3lB,EAAW,GAAG1I,UAC/D,GAAO,EAAM,uBAEpB,EAAKsQ,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,OAAQgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACnG,MACA,SAACe,GACG5J,EAAO6b,KAAKC,iBAAiBu2B,aAAa7iB,QAAQ5lB,EAAW,GAAG1I,UACjE,GAAO,EAAM,uDAjBE,EAF9B,kBAAsC,G,88BClF/B,IAAM,GAAb,YAEI,WAAYlB,GAAc,yBACtB,0BAAM,cAAeA,EAAQ,8HAExBqa,aAAoBra,EAAOma,UAAUC,QAAQ,WAElD,EAAKjM,YAAYmG,YAAc,IAAI,EAAc,EAAKnG,aACtD,EAAKA,YAAYmG,YAAYwC,4BAE7B,EAAKtF,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,IACvD,MACA,SAACZ,GACG5J,EAAO6b,KAAKC,iBAAiBu2B,aAAan2B,WAC3C,GAAO,EAAM,0BAEpB,EAAK1K,UAAU,IAAI1I,EAAO,iBAAkB,IAAI0B,EAAc,CAC1D,CAAErI,WAAY,cAAegG,KAAMnI,EAAOma,UAAUC,QAAQ,eAAgBnD,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC9H,MACJ,SAACe,GACG,IAAI7I,EAAmB6I,EAAW,GAAG1I,MACjCuI,EAAiB1I,EAAEiK,MAAO6f,qBAAqB,sBAErC,MAAVphB,GAEAzJ,EAAO6b,KAAKC,iBAAiBg4B,aAAaC,oBAAoBhoC,MAAK,SAACvK,GAEhE,IAAIgI,EAAUC,aAAM,EAANA,EAAQD,QAClBD,EAASE,aAAM,EAANA,EAAQF,OAEjBssC,EAAyB,CACzB,CACI1tC,KAAMpH,EAAEiK,MACR9J,MAAOH,GAEX,CACIoH,KAAMgL,GACNjS,MAAOM,IAIA,MAAXgI,EACAxJ,EAAO6b,KAAKC,iBAAiByB,SAAS9T,EAAQosC,EAAe,MAAM,GAClD,MAAVtsC,GACPA,EAAO,UAOrB,GAAO,EAAM,kJAjDO,EAF9B,kBAAsC,GAgEzB,GAAb,YAEI,WAAYvJ,GAAc,yBACtB,0BAAM,cAAeA,EAAQ,sNAExBwR,UAAU,IAAI1I,EAAO,aAAc,IAAI0B,EAAc,CACtD,CAAErI,WAAY,MAAOgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAClG8Q,GACA,MACA,GAAO,EAAO,wDAPI,EAF9B,kBAAiC,G,qnCC9D1B,IAAM,GAAb,YAEI,WAAY3Z,GAAc,yBACtB,0BAAM,WAAYA,KAEbwR,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,IAE/CmP,GACA,MACA,GAAO,EAAO,2CAPI,EAF9B,kBAA8B,GAsBjB,GAAb,YAKI,WAAY3Z,GAAc,yBACtB,0BAAM,QAASA,EAAQ,2DAJ3ByoD,aAA6B,GAC7B,EAAAC,cAAwB,EAKpB,EAAKruC,aAAoBra,EAAOma,UAAUC,QAAQ,WAElD,EAAKjM,YAAYmG,YAAc,IAAI,EAAc,EAAKnG,aACtD,EAAKA,YAAYmG,YAAYwC,4BAE7B,EAAKtF,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CACIrI,WAAY,WAAYgG,KAAMnI,EAAOma,UAAUC,QAAQ,YACvDnD,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAEtD,CACI1G,WAAY,gBAAiBgG,KAAM+N,GACnCe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAEtD8Q,IACA,SAAC/P,GAEG,IAAI++C,EAAmC/+C,EAAW,GAAG1I,MACjD0nD,EAAqBh/C,EAAW,GAAG1I,MAEnC2nD,EAAyB,CACzBC,cAAeH,EACfC,GAAIA,EACJG,cAAe,EACfnU,SAAS,EACTnrC,OAAQk/C,EAAG39C,MAAM8H,UAAU,MAAO,IAAItI,EAAc,MAWxD,EAAKi+C,aAAa18C,KAAK88C,GAEvB9qC,QAAQC,IAAI,iCAAmC4qC,EAAK,WAErD,GAAO,EAAM,6FAGpB,EAAKI,sBA9CiB,E,UAL9B,e,EAAA,G,EAAA,6C,QAyDQ,GAAIjhD,KAAK0gD,aAAa3+C,OAAS,EAAG,CAC9B,IAAIkR,EAA+B,QAApB,EAAc,QAAd,EAAGjT,KAAK/H,cAAM,eAAE6b,YAAI,eAAEC,iBAErC,GAAmB,MAAfd,EAAqB,CACrB,IAAKjT,KAAK2gD,cAAgB1tC,EAAYirB,OAASC,GAAiB0O,QAAS,CACrE,IAAIzzC,EAAY8nD,YAAYT,MADyC,uBAErE,YAAuBzgD,KAAK0gD,aAA5B,+CAA0C,KAAjCS,EAAiC,QAClCN,EAAKznD,EAAI+nD,EAAWH,cACpBH,GAAMM,EAAWN,KACjB7gD,KAAKohD,SAASD,EAAYluC,EAAa5H,KAAK01B,MAAM8f,IAClDM,EAAWH,cAAgB5nD,IANkC,mFAWzE,OAAQ6Z,EAAYirB,OAChB,KAAKC,GAAiB3F,KACtB,KAAK2F,GAAiBrzB,MACtB,KAAKqzB,GAAiBgP,gBAClBntC,KAAK0gD,aAAe,GACpB1gD,KAAK2gD,cAAe,IASpC,IAAIzoC,EAAOlY,KAEXqhD,YAAW,WACPnpC,EAAK+oC,wBACN,MA1FX,+BA8FaE,EAAwBluC,EAA0B4tC,GACvD,IAAI/S,EAAyB,CACzB,CACI1tC,KAAM+gD,EAAWJ,cAAc99C,MAC/B9J,MAAOgoD,EAAWJ,gBAQ1B/gD,KAAK2gD,cAAe,EACpB,IAAIzoC,EAAOlY,KAEXiT,EAAYuC,SAAS2rC,EAAWz/C,OAAQosC,GAAe,SAAC76B,GACpDiF,EAAKyoC,cAAe,KACrB,Q,6BA/GX,GAAgC,G,yoBC5BzB,IAAM,GAAb,YAEI,WAAY1oD,GAAc,O,4FAAA,SAEtB,0BAAM,MAAOA,EAAQ,+DAErB,IAAI8V,EAAa9V,EAAOma,UAAUC,QAAQ,UAEtCivC,EAAuBvzC,EAAYyE,QACvC8uC,EAAMlnD,WAAa,IACnBknD,EAAM37C,gBAAiB,EAEvB,IAAI47C,EAAoB,CACpBnnD,WAAY,IACZsY,UAAW,CAAErJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACzC4Q,QAAS,CAAEtJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACvC3B,KAAMkhD,GAEV,EAAK57C,cAAc1B,KAAKu9C,GAExB,IAAIC,EAAuBzzC,EAAYyE,QACvCgvC,EAAMpnD,WAAa,IACnBonD,EAAM77C,gBAAiB,EAEvB,IAAI87C,EAAoB,CACpBrnD,WAAY,IACZsY,UAAW,CAAErJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACzC4Q,QAAS,CAAEtJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACvC3B,KAAMohD,GA1BY,OA4BtB,EAAK97C,cAAc1B,KAAKy9C,GAExB,EAAKh4C,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,IAChD0L,GACA,MACA,GAAM,EAAO,iDAEjB,EAAK1E,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,IACnD6M,GACA,MACA,GAAM,EAAO,iCAEjB,EAAK7F,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,CACvD,CAAErI,WAAY,MAAOgG,KAAMkhD,EAAOpyC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACpFwO,GACA,MACA,GAAM,EAAO,oFAEjB,EAAK7F,UAAU,IAAI1I,EAAO,gBAAiB,IAAI0B,EAAc,CACzD,CAAErI,WAAY,QAASgG,KAAMohD,EAAOtyC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACtFwO,GACA,MACA,GAAM,EAAO,gEAEjB,EAAK7F,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,CAC/C,CAAErI,WAAY,MAAOgG,KAAMkhD,EAAOpyC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACpF0gD,EACA,MACA,GAAM,EAAO,mHAEjB,EAAK/3C,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,CAC/C,CAAErI,WAAY,MAAOgG,KAAMkhD,EAAOpyC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACpF,CAAE1G,WAAY,QAASgG,KAAMkhD,EAAOpyC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACtF0gD,EACA,MACA,GAAM,EAAO,uQAEjB,EAAK/3C,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,IACjD,KACA,MACA,GAAM,EAAO,0CApEK,EAF9B,O,mOAAA,SAA8B,G,uKCOvB,IAAM,GAAb,WAOI,WAAoBgS,EAAqCxB,EAAkChb,I,4FAAc,SAArF,KAAAwc,gBAAqC,KAAAxB,cAAkC,KAAAhb,SAL3F,KAAAypD,SAAoB,GACpB,KAAAnuC,WAAsB,GAEtB,KAAA5Q,IAAuB,IAAI7C,I,UAL/B,O,EAAA,G,EAAA,2BAUQrG,GACA,OAAOuG,KAAK2C,IAAI5J,IAAIU,EAAIN,SAXhC,0BAcQM,EAAYN,GAEZ,IAAIwoD,EAAM3hD,KAAK2C,IAAI5J,IAAIU,EAAIN,OAY3B,OAVU,MAAPwoD,EACC3hD,KAAK0hD,SAAS19C,KAAKvK,GAEnBuG,KAAKuT,WAAWC,OAAOxT,KAAKuT,WAAW3O,QAAQ+8C,GAAM,GAGzD3hD,KAAKuT,WAAWvP,KAAK7K,GAErB6G,KAAK2C,IAAIS,IAAI3J,EAAIN,MAAOA,GAEjBwoD,IA5Bf,6CAgCwB,2BAChB,YAAc3hD,KAAK0hD,SAAnB,+CAA6B,KAApBn+C,EAAoB,QACzB,KAAMA,EAAEnD,gBAAgBH,GAAiB,CAAC,SAAU,UAAW,UAAW,UAAW,aAAa2E,QAAQrB,EAAEnD,KAAKhG,aAAe,GAC5H,OAAO,GAHC,6GAMhB,YAAc4F,KAAKuT,WAAnB,+CAA+B,KAAtB,EAAsB,QAC3B,KAAM,EAAEnT,gBAAgBH,GAAiB,CAAC,SAAU,UAAW,UAAW,UAAW,aAAa2E,QAAQ,EAAExE,KAAKhG,aAAe,GAC5H,OAAO,GARC,kFAWhB,OAAO,IA3Cf,kCAgDQ,GAAI4F,KAAK0U,uBAAwB,CAE7B,IADA,IAAIza,EAAI,IACC/B,EAAI,EAAGA,EAAI8H,KAAK0hD,SAAS3/C,OAAQ7J,IACtC+B,GAAU+F,KAAK0hD,SAASxpD,GAAGiB,MAAQ,OAAS6G,KAAKuT,WAAWrb,GAAGiB,MAC3DjB,EAAI8H,KAAK0hD,SAAS3/C,OAAS,IAAG9H,GAAK,MAG3C,OAAOA,EAAI,IA0Bf,IAvBA,IAAIgK,EAAyB,CACzBoF,KAAM,EACNC,OAAQ,EACRvH,OAAQ,GAGRsC,EAA0B,CAC1B,CACIjE,KAAMlG,EAAU8K,KAChBf,SAAUA,EACVM,cAAc,GAElB,CACInE,KAAMlG,EAAUya,aAChBC,SAAUxJ,GACVjS,MAAO,IACP8K,SAAUA,EACVM,cAAc,IAIlBsQ,EAAqB,IAAIpS,EAAc,IAElC,EAAI,EAAG,EAAIzC,KAAKuT,WAAWxR,OAAQ,IAAK,CAE7C,IAAItI,EAAMuG,KAAK0hD,SAAS,GACpBjoD,EAAI2G,gBAAgBH,GAAiBxG,EAAI2G,gBAAgB,GACzDiE,EAAWL,KAAK,CACZ5D,KAAMlG,EAAUya,aAChBC,SAAUxJ,GACVjS,MAAOM,EAAI2G,KAAKqO,OAAOhV,EAAK2R,IAAqBjS,MACjD8K,SAAUA,EACVM,cAAc,KAGlBF,EAAWL,KAAK,CACZ5D,KAAMlG,EAAUya,aAChBC,SAAUnb,EAAI2G,KACdjH,MAAOM,EAAIN,MACXoL,cAAc,EACdN,SAAUA,IAEdI,EAAWL,KAAK,CACZ5D,KAAMlG,EAAU4a,WAChBpT,OAAmCjI,EAAI2G,KAAM2K,UAAU,WAAY8J,GACnEE,aAAa,EACbC,iBAAkB,EAClBzQ,cAAc,EACdN,SAAUA,KAKlBI,EAAWL,KAAK,CACZ5D,KAAMlG,EAAU+a,SAChBC,SAAUhb,EAAUoD,KACpB6X,SAAU/J,GACV7G,cAAc,EACdN,SAAUA,IAGdI,EAAWL,KAAK,CACZ5D,KAAMlG,EAAUya,aAChBC,SAAUxJ,GACVjS,MAAO,OACP8K,SAAUA,EACVM,cAAc,IAElBF,EAAWL,KAAK,CACZ5D,KAAMlG,EAAU+a,SAChBC,SAAUhb,EAAUoD,KACpB6X,SAAU/J,GACV7G,cAAc,EACdN,SAAUA,IAId,IAAI9K,EAAQ6G,KAAKuT,WAAW,GACT,MAAfpa,EAAMA,OAAiBA,EAAMiH,gBAAgBH,GAAiB9G,EAAMiH,gBAAgB,GACpFiE,EAAWL,KAAK,CACZ5D,KAAMlG,EAAUya,aAChBC,SAAUxJ,GACVjS,MAAsB,MAAfA,EAAMA,MAAgB,OAASA,EAAMiH,KAAKqO,OAAOtV,EAAOiS,IAAqBjS,MACpF8K,SAAUA,EACVM,cAAc,KAGlBF,EAAWL,KAAK,CACZ5D,KAAMlG,EAAUya,aAChBC,SAAUzb,EAAMiH,KAChBjH,MAAOA,EAAMA,MACboL,cAAc,EACdN,SAAUA,IAEdI,EAAWL,KAAK,CACZ5D,KAAMlG,EAAU4a,WAChBpT,OAAmCvI,EAAMiH,KAAM2K,UAAU,WAAY8J,GACrEE,aAAa,EACbC,iBAAkB,EAClBzQ,cAAc,EACdN,SAAUA,KAKlBI,EAAWL,KAAK,CACZ5D,KAAMlG,EAAU+a,SAChBC,SAAUhb,EAAUoD,KACpB6X,SAAU/J,GACV7G,cAAc,EACdN,SAAUA,IAGV,EAAIjE,KAAKuT,WAAWxR,OAAS,IAC7BsC,EAAWL,KAAK,CACZ5D,KAAMlG,EAAUya,aAChBC,SAAUxJ,GACVjS,MAAO,KACP8K,SAAUA,EACVM,cAAc,IAElBF,EAAWL,KAAK,CACZ5D,KAAMlG,EAAU+a,SAChBE,SAAU/J,GACV8J,SAAUhb,EAAUoD,KACpBiH,cAAc,EACdN,SAAUA,KAOtBI,EAAWL,KAAK,CACZ5D,KAAMlG,EAAUya,aAChBC,SAAUxJ,GACVjS,MAAO,IACP8K,SAAUA,EACVM,cAAc,IAGlBF,EAAWL,KAAK,CACZ5D,KAAMlG,EAAU+a,SAChBC,SAAUhb,EAAUoD,KACpB6X,SAAU/J,GACV7G,cAAc,EACdN,SAAUA,IAWdI,EAAWL,KAAK,CACZ5D,KAAMlG,EAAUkb,OAChBC,iCAAiC,EACjCC,wBAAwB,EACxB/Q,cAAc,EACdN,SAAUA,EACVsR,mBAAmB,IAGvB,IAAI9T,EAAmB,CACnBxJ,OAAQ+H,KAAK/H,OACboM,WAAYA,EACZiC,aAAc,MAGd5E,EAAiB,IAAIX,EAAO,WAAY,IAAI0B,EAAc,IAAK2I,GAAqB3J,GAAS,GAAO,GAGxG,OAFAzB,KAAKiT,YAAYuC,SAAS9T,EAAQ,IAAI,kBAAMsU,QAAQC,IAAI,4BAA0B,GAE3E,KAzOf,6BA6OQ,OAAOjW,KAAKuT,WAAWxR,SA7O/B,gCAiPQ,OAAiC,GAA1B/B,KAAKuT,WAAWxR,SAjP/B,kCAoPgBtI,GACR,OAAkC,MAA3BuG,KAAK2C,IAAI5J,IAAIU,EAAIN,SArPhC,oCAwPkBA,GAAY,2BACtB,YAAa6G,KAAKuT,WAAlB,+CACI,GADyB,QACpBpa,OAASA,EAAMA,MAAO,OAAO,EAFhB,kFAItB,OAAO,IA5Pf,8BAgQQ6G,KAAKuT,WAAa,GAClBvT,KAAK0hD,SAAW,GAChB1hD,KAAK2C,IAAIwR,a,6BAlQjB,K,yoBCLO,IAAM,GAAb,YAEI,WAAYlc,GAAc,O,4FAAA,SAEtB,0BAAM,UAAWA,EAAQ,yEAEzB,IAAI8V,EAAa9V,EAAOma,UAAUC,QAAQ,UAE1C,EAAKC,aAAoBvE,GAEzB,IAAIuzC,EAAuBvzC,EAAYyE,QACvC8uC,EAAMlnD,WAAa,IACnBknD,EAAM37C,gBAAiB,EAEvB,IAAI47C,EAAoB,CACpBnnD,WAAY,IACZsY,UAAW,CAAErJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACzC4Q,QAAS,CAAEtJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACvC3B,KAAMkhD,GAEV,EAAK57C,cAAc1B,KAAKu9C,GAExB,IAAIC,EAAuBzzC,EAAYyE,QACvCgvC,EAAMpnD,WAAa,IACnBonD,EAAM77C,gBAAiB,EAEvB,IAAI87C,EAAoB,CACpBrnD,WAAY,IACZsY,UAAW,CAAErJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACzC4Q,QAAS,CAAEtJ,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GACvC3B,KAAMohD,GAEV,EAAK97C,cAAc1B,KAAKy9C,GAIxB,IAAIprC,EAA2Bpe,EAAOma,UAAUC,QAAQ,OAAQG,QAlC1C,OAmCtB6D,EAAa3Q,cAAgB,CAAC67C,EAAKE,GAEnC,EAAK57C,WAAW7B,KAAKqS,GAErB,EAAK5M,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,IACnD,MACA,SAACZ,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MAEjCmd,EAAK,IAAI,GAAU3d,EAAGV,EAAO6b,KAAKC,iBAAkB9b,GACxDU,EAAEoK,cAAF,UAA+BuT,KAEhC,GAAO,EAAO,iCAAiC,IAGtD,EAAK7M,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,CAC/C,CAAErI,WAAY,MAAOgG,KAAMkhD,EAAOpyC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACpF,CAAE1G,WAAY,QAASgG,KAAMohD,EAAOtyC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACtF0gD,GACA,SAAC3/C,GACG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCM,EAAaoI,EAAW,GACxB1I,EAAe0I,EAAW,GAG9B,OAFoBlJ,EAAEoK,cAAF,UAEVK,IAAI3J,EAAKN,MAEpB,GAAO,EAAO,uQAErB,EAAKsQ,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,IACjD,MACA,SAACZ,GAKG,OAHuBA,EAAW,GAAG1I,MACf4J,cAAF,UAEVoR,WAGd,GAAO,EAAO,sDAElB,EAAK1K,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,CACvD,CAAErI,WAAY,MAAOgG,KAAMkhD,EAAOpyC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACpFwO,IACA,SAACzN,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCM,EAAaoI,EAAW,GAG5B,OAFoBlJ,EAAEoK,cAAF,UAEV6+C,YAAYnoD,MAG1B,GAAO,EAAO,oFAElB,EAAKgQ,UAAU,IAAI1I,EAAO,gBAAiB,IAAI0B,EAAc,CACzD,CAAErI,WAAY,QAASgG,KAAMohD,EAAOtyC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACtFwO,IACA,SAACzN,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCA,EAAe0I,EAAW,GAG9B,OAFoBlJ,EAAEoK,cAAF,UAEV8+C,cAAc1oD,MAG5B,GAAO,EAAO,gEAElB,EAAKsQ,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,CAC/C,CAAErI,WAAY,MAAOgG,KAAMkhD,EAAOpyC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACpF0gD,GACA,SAAC3/C,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCM,EAAaoI,EAAW,GAGxB0B,EAFgB5K,EAAEoK,cAAF,UAEFhK,IAAIU,GACtB,OAAY,MAAL8J,EAAY,KAAOA,EAAEpK,SAGhC,GAAO,EAAO,mHAGlB,EAAKsQ,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,IACnD6M,IACA,SAACzN,GAKG,OAHuBA,EAAW,GAAG1I,MACf4J,cAAF,UAEVuR,aAGd,GAAO,EAAO,qCAElB,EAAK7K,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,IAChD0L,IACA,SAACtM,GAKG,OAHuBA,EAAW,GAAG1I,MACf4J,cAAF,UAEVwR,UAGd,GAAO,EAAO,4DAElB,EAAK9K,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IAAK2I,IACzD,SAACvJ,GAKG,OAHuBA,EAAW,GAAG1I,MACf4J,cAAF,UAEVyR,eAEX,GAAO,IAzJQ,EAF9B,O,mOAAA,SAAkC,G,okBCA3B,IAAM,GAAb,YAEI,WAAYvc,GAAc,M,IAAA,O,4FAAA,S,EAEtB,U,EAAA,gBAAM,WAAYA,EAAQ,a,gDAErBqa,aAAoBra,EAAOma,UAAUC,QAAQ,gBAElD,EAAK5I,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,KAAMgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACjG,CAAE1G,WAAY,KAAMgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACjG,CAAE1G,WAAY,KAAMgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACjG,CAAE1G,WAAY,KAAMgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACjG,CAAE1G,WAAY,KAAMgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACjG,CAAE1G,WAAY,KAAMgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACjG,MACA,SAACe,GAKG,IAHA,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MAEjCqgD,EAAyB,GACrBthD,EAAI,EAAGA,GAAK,EAAGA,IACnBshD,EAAax1C,KAAKnC,EAAW3J,GAAGiB,OAGpC,IAAIsgD,EAAK,IAAI,GAAcD,GAAc,EAAMvhD,EAAO6b,KAAKC,iBAAkBpb,GAC7EA,EAAEoK,cAAF,MAA2B02C,KAE5B,GAAO,EAAO,kCAAkC,IAEvD,EAAKhwC,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,IAArC,OAEX,SAACZ,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCy2C,EAAoBj3C,EAAEoK,cAAF,MAExB,IAAI6sC,EAAGC,cAAc,QAErB,OAAOD,EAAGa,QAAe93C,EAAEsK,UAE5B,GAAO,EAAO,gEAAgE,IAvC/D,EAF9B,O,mOAAA,SAAmC,G,m9BCK5B,IAAM,GAAb,YAEI,WAAYhL,GAAc,kBAEtB,0BAAM,gBAAiBA,EAAQ,yEAE1Bqa,aAAoBra,EAAOma,UAAUC,QAAQ,WAClD,IAAIyvC,EAAsB7pD,EAAOma,UAAUC,QAAQ,aAC/C0vC,EAAkB9pD,EAAOma,UAAUC,QAAQ,SANzB,OAWtB,EAAK5I,UAAU,IAAI1I,EAAO,MAAO,IAAI0B,EAAc,IAApC,OACX,SAACZ,GAEG,IAAIlJ,EAAmB,IAAI,EAAJ,OAInBoK,EAA4C,CAC5Ci/C,KAHQ,IAAIxB,MAQhB,OAFA7nD,EAAEoK,cAAgBA,EAEXpK,KAER,GAAO,EAAM,6GACd,IAEN,EAAK8Q,UAAU,IAAI1I,EAAO,KAAM,IAAI0B,EAAc,CAC9C,CAAErI,WAAY,OAAQgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,QAASgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACjG,CAAE1G,WAAY,aAAcgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACtG,CAAE1G,WAAY,OAAQgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,SAAUgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAClG,CAAE1G,WAAY,SAAUgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KANvF,OASX,SAACe,GAEG,IAAIlJ,EAAmB,IAAI,EAAJ,OACnBspD,EAAe52C,KAAK0E,MAAMlO,EAAW,GAAG1I,OACxC+oD,EAAgB72C,KAAK0E,MAAMlO,EAAW,GAAG1I,OACzCgpD,EAAqB92C,KAAK0E,MAAMlO,EAAW,GAAG1I,OAC9CipD,EAAe/2C,KAAK0E,MAAMlO,EAAW,GAAG1I,OACxCkpD,EAAiBh3C,KAAK0E,MAAMlO,EAAW,GAAG1I,OAC1CmpD,EAAiBj3C,KAAK0E,MAAMlO,EAAW,GAAG1I,OAI1C4J,EAA4C,CAC5Ci/C,KAHO,IAAIxB,KAAKyB,EAAMC,EAAQ,EAAGC,EAAYC,EAAMC,EAAQC,IAQ/D,OAFA3pD,EAAEoK,cAAgBA,EAEXpK,KAER,GAAO,EAAM,qJACd,IAEN,EAAK8Q,UAAU,IAAI1I,EAAO,KAAM,IAAI0B,EAAc,CAC9C,CAAErI,WAAY,OAAQgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,QAASgG,KAAM2hD,EAAW7yC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC1F,CAAE1G,WAAY,aAAcgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACtG,CAAE1G,WAAY,OAAQgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,SAAUgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAClG,CAAE1G,WAAY,SAAUgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KANvF,OASX,SAACe,GAEG,IAAIlJ,EAAmB,IAAI,EAAJ,OACnBspD,EAAe52C,KAAK0E,MAAMlO,EAAW,GAAG1I,OACxC+oD,EAA2BrgD,EAAW,GAAG1I,MACzCgpD,EAAqB92C,KAAK0E,MAAMlO,EAAW,GAAG1I,OAC9CipD,EAAe/2C,KAAK0E,MAAMlO,EAAW,GAAG1I,OACxCkpD,EAAiBh3C,KAAK0E,MAAMlO,EAAW,GAAG1I,OAC1CmpD,EAAiBj3C,KAAK0E,MAAMlO,EAAW,GAAG1I,OAI1C4J,EAA4C,CAC5Ci/C,KAHO,IAAIxB,KAAKyB,EAAMC,EAAM1qC,UAAUQ,QAASmqC,EAAYC,EAAMC,EAAQC,IAQ7E,OAFA3pD,EAAEoK,cAAgBA,EAEXpK,KAER,GAAO,EAAM,qJACd,IAEN,EAAK8Q,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,OAAQgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KADrF,OAGX,SAACe,GACG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCopD,EAAel3C,KAAK0E,MAAMlO,EAAW,GAAG1I,OAExCqpD,EAA8C7pD,EAAEoK,cAAgBi/C,KAChES,EAAgB,IAAIjC,KAAKgC,EAAQE,UAAiB,GAALH,EAAQ,KAAK,KAE1DjL,EAAoB,IAAI,EAAJ,OAEpBv0C,EAA4C,CAC5Ci/C,KAAMS,GAKV,OAFAnL,EAAGv0C,cAAgBA,EAEZu0C,KAER,GAAO,EAAO,uIAAuI,IAE5J,EAAK7tC,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,CACrD,CAAErI,WAAY,OAAQgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KADrF,OAGX,SAACe,GACG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCopD,EAAel3C,KAAK0E,MAAMlO,EAAW,GAAG1I,OAExCqpD,EAA8C7pD,EAAEoK,cAAgBi/C,KAChES,EAAgB,IAAIjC,KAAKgC,EAAQE,UAAiB,GAALH,EAAQ,KAAK,KAE1DjL,EAAoB,IAAI,EAAJ,OAEpBv0C,EAA4C,CAC5Ci/C,KAAMS,GAKV,OAFAnL,EAAGv0C,cAAgBA,EAEZu0C,KAER,GAAO,EAAO,uIAAuI,IAE5J,EAAK7tC,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,CACrD,CAAErI,WAAY,OAAQgG,KAAM,MAAM8O,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACpFqN,IACA,SAACtM,GACG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCm+C,EAAoBz1C,EAAW,GAAG1I,MAElCwpD,EAA8ChqD,EAAEoK,cAAgBi/C,KAAKU,UACrEE,EAA8CtL,EAAGv0C,cAAgBi/C,KAAKU,UAE1E,OAAOr3C,KAAKkE,KAAKozC,EAAQC,MAE1B,GAAO,EAAO,kJAAkJ,IAEvK,EAAKn5C,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,CACjD,CAAErI,WAAY,OAAQgG,KAAM,MAAM8O,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACpFqN,IACA,SAACtM,GACG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCm+C,EAAoBz1C,EAAW,GAAG1I,MAKtC,OAHkDR,EAAEoK,cAAgBi/C,KAAKU,UACvBpL,EAAGv0C,cAAgBi/C,KAAKU,WAEnE,SAER,GAAO,EAAO,kFAAkF,IAEvG,EAAKj5C,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,IACnD0L,IACA,SAACtM,GAGG,OAFuBA,EAAW,GAAG1I,MAEE4J,cAAgBi/C,KAAKa,iBAE7D,GAAO,EAAO,yBAAyB,IAE9C,EAAKp5C,UAAU,IAAI1I,EAAO,gBAAiB,IAAI0B,EAAc,IACzD0L,IACA,SAACtM,GAGG,OAFuBA,EAAW,GAAG1I,MAEE4J,cAAgBi/C,KAAKc,WAAa,KAE1E,GAAO,EAAO,oFAAoF,IAEzG,EAAKr5C,UAAU,IAAI1I,EAAO,gBAAiB,IAAI0B,EAAc,IACzD0L,IACA,SAACtM,GAGG,OAFuBA,EAAW,GAAG1I,MAEE4J,cAAgBi/C,KAAKe,aAE7D,GAAO,EAAO,iEAAiE,IAEtF,EAAKt5C,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,IACnD0L,IACA,SAACtM,GAGG,OAFuBA,EAAW,GAAG1I,MAEE4J,cAAgBi/C,KAAKgB,cAE7D,GAAO,EAAO,+CAA+C,IAEpE,EAAKv5C,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,IACrD0L,IACA,SAACtM,GAGG,OAFuBA,EAAW,GAAG1I,MAEE4J,cAAgBi/C,KAAKiB,gBAE7D,GAAO,EAAO,2BAA2B,IAEhD,EAAKx5C,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,IACrD0L,IACA,SAACtM,GAGG,OAFuBA,EAAW,GAAG1I,MAEE4J,cAAgBi/C,KAAKkB,gBAE7D,GAAO,EAAO,4BAA4B,IAEjD,EAAKz5C,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IACpD2I,IACA,SAACvJ,GACG,IAEImgD,EAFmBngD,EAAW,GAAG1I,MAEM4J,cAAgBi/C,KAEvDmB,EAAK,SAAChqD,GACN,OAAGA,EAAQ,GAAW,IAAMA,EACrB,GAAKA,GAGhB,gBAAUgqD,EAAGnB,EAAKe,WAAlB,YAAgCI,EAAGnB,EAAKc,WAAa,GAArD,YAA2DK,EAAGnB,EAAKa,eAAnE,YAAqFM,EAAGnB,EAAKgB,YAA7F,YAA4GG,EAAGnB,EAAKiB,cAApH,YAAqIE,EAAGnB,EAAKkB,kBAE9I,GAAO,EAAO,yDAAyD,IAE9E,EAAKz5C,UAAU,IAAI1I,EAAO,eAAgB,IAAI0B,EAAc,IACxDq/C,GACA,SAACjgD,GACG,IAEIuhD,EAFmBvhD,EAAW,GAAG1I,MAEK4J,cAAgBi/C,KAAKqB,SAC/D,OAAOvB,EAAcpqC,aAAa0rC,EAAM,GAAGxpD,UAE5C,GAAO,EAAO,yHAAyH,IAE9I,EAAK6P,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IACpDs/C,GACA,SAAClgD,GACG,IAEIyhD,EAFmBzhD,EAAW,GAAG1I,MAEY4J,cAAgBi/C,KAAKc,WACtE,OAAOf,EAAUrqC,aAAa4rC,GAAY1pD,UAE3C,GAAO,EAAO,wGAAwG,IA7PvG,EAF9B,kBAAwC,GAsQ3B,GAAb,YAEI,WAAY3B,GAAc,yBACtB,0BAAM,YAAaA,EAAQ,CACvB,CACImI,KAAMlG,EAAUmkB,cAChBpa,SAAU,KACV7J,WAAY,UAEhB,CACIgG,KAAMlG,EAAUmkB,cAChBpa,SAAU,KACV7J,WAAY,YAEhB,CACIgG,KAAMlG,EAAUmkB,cAChBpa,SAAU,KACV7J,WAAY,YAEhB,CACIgG,KAAMlG,EAAUmkB,cAChBpa,SAAU,KACV7J,WAAY,cAEhB,CACIgG,KAAMlG,EAAUmkB,cAChBpa,SAAU,KACV7J,WAAY,WAEhB,CACIgG,KAAMlG,EAAUmkB,cAChBpa,SAAU,KACV7J,WAAY,WAEhB,CACIgG,KAAMlG,EAAUmkB,cAChBpa,SAAU,KACV7J,WAAY,eAIf2F,cAAgB,YAvCC,EAF9B,kBAAmC,IA6CtB,GAAb,YAEI,WAAY9H,GAAc,yBACtB,0BAAM,QAASA,EAAQ,CACnB,CACImI,KAAMlG,EAAUmkB,cAChBpa,SAAU,KACV7J,WAAY,UAEhB,CACIgG,KAAMlG,EAAUmkB,cAChBpa,SAAU,KACV7J,WAAY,WAEhB,CACIgG,KAAMlG,EAAUmkB,cAChBpa,SAAU,KACV7J,WAAY,QAEhB,CACIgG,KAAMlG,EAAUmkB,cAChBpa,SAAU,KACV7J,WAAY,SAEhB,CACIgG,KAAMlG,EAAUmkB,cAChBpa,SAAU,KACV7J,WAAY,OAEhB,CACIgG,KAAMlG,EAAUmkB,cAChBpa,SAAU,KACV7J,WAAY,QAEhB,CACIgG,KAAMlG,EAAUmkB,cAChBpa,SAAU,KACV7J,WAAY,QAEhB,CACIgG,KAAMlG,EAAUmkB,cAChBpa,SAAU,KACV7J,WAAY,UAEhB,CACIgG,KAAMlG,EAAUmkB,cAChBpa,SAAU,KACV7J,WAAY,aAEhB,CACIgG,KAAMlG,EAAUmkB,cAChBpa,SAAU,KACV7J,WAAY,WAEhB,CACIgG,KAAMlG,EAAUmkB,cAChBpa,SAAU,KACV7J,WAAY,YAEhB,CACIgG,KAAMlG,EAAUmkB,cAChBpa,SAAU,KACV7J,WAAY,gBAIf2F,cAAgB,QAhEC,EAF9B,kBAA+B,I,okBCxTxB,IAAM,GAAb,YAEI,WAAY9H,GAAc,M,IAAA,O,4FAAA,S,EAEtB,U,EAAA,gBAAM,OAAQA,EAAQ,kD,gDAEjBqa,aAAoBra,EAAOma,UAAUC,QAAQ,gBAElD,EAAK5I,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,CAChD,CAAErI,WAAY,KAAMgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACjG,CAAE1G,WAAY,KAAMgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACjG,CAAE1G,WAAY,KAAMgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACjG,CAAE1G,WAAY,KAAMgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACjG,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCgrC,EAAatiC,EAAW,GAAG1I,MAC3BirC,EAAaviC,EAAW,GAAG1I,MAC3BkrC,EAAaxiC,EAAW,GAAG1I,MAC3BmrC,EAAaziC,EAAW,GAAG1I,MAI3BsgD,EAAK,IAAI,GAFgB,CAACtV,EAAIC,EAAIC,EAAIC,IAED,EAAOrsC,EAAO6b,KAAKC,iBAAkBpb,GAC9EA,EAAEoK,cAAF,MAA2B02C,KAE5B,GAAO,EAAO,2EAA2E,IAE5F,EAAKhwC,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,IAArC,OAEX,SAACZ,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCy2C,EAAoBj3C,EAAEoK,cAAF,MAExB,IAAI6sC,EAAGC,cAAc,QAErB,OAAOD,EAAGa,QAAe93C,EAAEsK,UAE5B,GAAO,EAAO,uDAAuD,IAExE,EAAKwG,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,QAASgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACjG,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC6oC,EAAYngC,EAAW,GAAG1I,MAC1B0mC,EAAYh+B,EAAW,GAAG1I,MAC1B8I,EAAgBJ,EAAW,GAAG1I,MAC9By2C,EAAoBj3C,EAAEoK,cAAF,MAEpB6sC,EAAGC,cAAc,aAErBD,EAAG2T,SAASvhB,EAAGnC,EAAG59B,EAAQ,MAE3B,GAAO,EAAO,qGAAqG,IAE1H,EAAKwH,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,CACrD,CAAErI,WAAY,KAAMgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACjG,CAAE1G,WAAY,KAAMgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACjG,CAAE1G,WAAY,KAAMgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACjG,CAAE1G,WAAY,KAAMgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACjG,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCgrC,EAAatiC,EAAW,GAAG1I,MAC3BirC,EAAaviC,EAAW,GAAG1I,MAC3BkrC,EAAaxiC,EAAW,GAAG1I,MAC3BmrC,EAAaziC,EAAW,GAAG1I,MACnBy2C,EAAoBj3C,EAAEoK,cAAF,MAE5B6sC,EAAGC,cAAc,cAErBD,EAAG4T,UAAUrf,EAAIC,EAAIC,EAAIC,MAE1B,GAAO,EAAO,oGAAoG,IA9E3G,EAF9B,O,mOAAA,SAA+B,G,okBCDxB,IAAM,GAAb,YAEI,WAAYrsC,GAAc,M,IAAA,O,4FAAA,S,EAEtB,K,EAAA,gBAAM,UAAWA,EAAQ,iDAAzB,G,mDAEKqa,aAAoBra,EAAOma,UAAUC,QAAQ,WAElD,EAAK5I,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,EAAMkB,YAAY,GAClH,CAAE5H,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,EAAMkB,YAAY,KAClH,MACA,SAACH,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC6oC,EAAYngC,EAAW,GAAG1I,MAC1B0mC,EAAYh+B,EAAW,GAAG1I,MAE1BsqD,EAA+B,IAAI3jD,IACvC2jD,EAASrgD,IAAI,IAAK,CAAChD,KAAM6O,GAAqB9V,MAAO6oC,IACrDyhB,EAASrgD,IAAI,IAAK,CAAChD,KAAM6O,GAAqB9V,MAAO0mC,IACrDlnC,EAAEqK,gBAAgBI,IAAI,UAAWqgD,MAElC,GAAO,EAAO,iFAAiF,IAEtG,EAAKh6C,UAAU,IAAI1I,EAAO,uBAAwB,IAAI0B,EAAc,CAChE,CAAErI,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,EAAMkB,YAAY,GAClH,CAAE5H,WAAY,WAAYgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,EAAMkB,YAAY,KAF9G,OAIX,SAACH,GAEG,IAAIlJ,EAAmB,IAAI,EAAJ,OACnBK,EAAY6I,EAAW,GAAG1I,MAC1BuqD,EAAmB7hD,EAAW,GAAG1I,MAErCuqD,GAAYr4C,KAAK+5B,GAAG,IAEpB,IAAIqe,EAA+B,IAAI3jD,IAKvC,OAJA2jD,EAASrgD,IAAI,IAAK,CAAChD,KAAM6O,GAAqB9V,MAAOkS,KAAKi6B,IAAIoe,GAAY1qD,IAC1EyqD,EAASrgD,IAAI,IAAK,CAAChD,KAAM6O,GAAqB9V,MAAOkS,KAAKk6B,IAAIme,GAAY1qD,IAC1EL,EAAEqK,gBAAgBI,IAAI,UAAWqgD,GAE1B9qD,KAER,GAAO,EAAM,6NAA6N,IAEjP,EAAK8Q,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IACpD2I,IACA,SAACvJ,GAEG,IAEI4hD,EAFmB5hD,EAAW,GAAG1I,MAEA6J,gBAAgBjK,IAAI,WACrDipC,EAAYyhB,EAAS1qD,IAAI,KAAKI,MAC9B0mC,EAAY4jB,EAAS1qD,IAAI,KAAKI,MAElC,iBAAW6oC,EAAX,YAAgBnC,EAAhB,QAED,GAAO,EAAO,gEAAgE,IAErF,EAAKp2B,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,IACvDwM,IACA,SAACpN,GAEG,IAEI4hD,EAFmB5hD,EAAW,GAAG1I,MAEA6J,gBAAgBjK,IAAI,WACrDipC,EAAYyhB,EAAS1qD,IAAI,KAAKI,MAC9B0mC,EAAY4jB,EAAS1qD,IAAI,KAAKI,MAE9BgsC,EAAQ95B,KAAKg1C,MAAMxgB,EAAGmC,GAAG32B,KAAK+5B,GAAG,IAErC,OAAOD,GAAS,EAAIA,EAAQ,IAAMA,KAEnC,GAAO,EAAO,kDAAkD,IAEvE,EAAK17B,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,IACvDwM,IACA,SAACpN,GAEG,IAEI4hD,EAFmB5hD,EAAW,GAAG1I,MAEA6J,gBAAgBjK,IAAI,WACrDipC,EAAYyhB,EAAS1qD,IAAI,KAAKI,MAC9B0mC,EAAY4jB,EAAS1qD,IAAI,KAAKI,MAE9BgsC,EAAQ95B,KAAKg1C,MAAMxgB,EAAGmC,GAE1B,OAAOmD,GAAS,EAAIA,EAAkB,EAAV95B,KAAK+5B,GAASD,KAE3C,GAAO,EAAO,sDAAsD,IAE3E,EAAK17B,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,IACrDwM,IACA,SAACpN,GAEG,IAEI4hD,EAFmB5hD,EAAW,GAAG1I,MAEA6J,gBAAgBjK,IAAI,WACrDipC,EAAYyhB,EAAS1qD,IAAI,KAAKI,MAC9B0mC,EAAY4jB,EAAS1qD,IAAI,KAAKI,MAElC,OAAOkS,KAAKs5B,KAAK3C,EAAEA,EAAEnC,EAAEA,MAExB,GAAO,EAAO,sCAAsC,IAE3D,EAAKp2B,UAAU,IAAI1I,EAAO,eAAgB,IAAI0B,EAAc,IAA7C,OAEX,SAACZ,GAEG,IAEI4hD,EAFmB5hD,EAAW,GAAG1I,MAEA6J,gBAAgBjK,IAAI,WACrDipC,EAAYyhB,EAAS1qD,IAAI,KAAKI,MAC9B0mC,EAAY4jB,EAAS1qD,IAAI,KAAKI,MAE9Bm+C,EAAoB,IAAI,EAAJ,OACpBv1C,EAAiBsJ,KAAKs5B,KAAK3C,EAAEA,EAAInC,EAAEA,GAEpCx0B,KAAKoqC,IAAI1zC,GAAU,OAClBigC,GAAKjgC,EACL89B,GAAK99B,IAELigC,EAAI,EACJnC,EAAI,GAGR,IAAI8jB,EAAgC,IAAI7jD,IAKxC,OAJA6jD,EAAUvgD,IAAI,IAAK,CAAChD,KAAM6O,GAAqB9V,MAAO6oC,IACtD2hB,EAAUvgD,IAAI,IAAK,CAAChD,KAAM6O,GAAqB9V,MAAO0mC,IACtDyX,EAAGt0C,gBAAgBI,IAAI,UAAWugD,GAE3BrM,KAER,GAAO,EAAO,qHAAqH,IAE1I,EAAK7tC,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,CACrD,CAAErI,WAAY,SAAUgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,EAAMkB,YAAY,KAD5G,OAGX,SAACH,GAEG,IAEI4hD,EAFmB5hD,EAAW,GAAG1I,MAEA6J,gBAAgBjK,IAAI,WACrDipC,EAAYyhB,EAAS1qD,IAAI,KAAKI,MAC9B0mC,EAAY4jB,EAAS1qD,IAAI,KAAKI,MAE9B4I,EAAiBF,EAAW,GAAG1I,MAE/BhB,EAAIkT,KAAKs5B,KAAK3C,EAAEA,EAAInC,EAAEA,GACvB1nC,EAAI,IAEHsrD,EAAS1qD,IAAI,KAAKI,MAAQ6oC,EAAE7pC,EAAE4J,EAC9B0hD,EAAS1qD,IAAI,KAAKI,MAAQ0mC,EAAE1nC,EAAE4J,MAInC,GAAO,EAAO,mHAAmH,IAExI,EAAK0H,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,CAChD,CAAErI,WAAY,SAAUgG,KAAM,MAAM8O,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,EAAMkB,YAAY,KAD7F,OAGX,SAACH,GAEG,IAEI4hD,EAFmB5hD,EAAW,GAAG1I,MAEA6J,gBAAgBjK,IAAI,WACrDipC,EAAYyhB,EAAS1qD,IAAI,KAAKI,MAC9B0mC,EAAY4jB,EAAS1qD,IAAI,KAAKI,MAG9BwqD,EADoB9hD,EAAW,GAAG1I,MACC6J,gBAAgBjK,IAAI,WACvDorC,EAAawf,EAAU5qD,IAAI,KAAKI,MAChCirC,EAAauf,EAAU5qD,IAAI,KAAKI,MAEhCyqD,EAAsB,IAAI,EAAJ,OACtBC,EAAkC,IAAI/jD,IAK1C,OAJA+jD,EAAYzgD,IAAI,IAAK,CAAChD,KAAM6O,GAAqB9V,MAAO6oC,EAAImC,IAC5D0f,EAAYzgD,IAAI,IAAK,CAAChD,KAAM6O,GAAqB9V,MAAO0mC,EAAIuE,IAC5Dwf,EAAK5gD,gBAAgBI,IAAI,UAAWygD,GAE7BD,KAER,GAAO,EAAO,+KAA+K,IAEpM,EAAKn6C,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,CACjD,CAAErI,WAAY,SAAUgG,KAAM,MAAM8O,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,EAAMkB,YAAY,KAD7F,OAGX,SAACH,GAEG,IAEI4hD,EAFmB5hD,EAAW,GAAG1I,MAEA6J,gBAAgBjK,IAAI,WACrDipC,EAAYyhB,EAAS1qD,IAAI,KAAKI,MAC9B0mC,EAAY4jB,EAAS1qD,IAAI,KAAKI,MAG9BwqD,EADoB9hD,EAAW,GAAG1I,MACC6J,gBAAgBjK,IAAI,WACvDorC,EAAawf,EAAU5qD,IAAI,KAAKI,MAChCirC,EAAauf,EAAU5qD,IAAI,KAAKI,MAEhCyqD,EAAsB,IAAI,EAAJ,OACtBC,EAAkC,IAAI/jD,IAK1C,OAJA+jD,EAAYzgD,IAAI,IAAK,CAAChD,KAAM6O,GAAqB9V,MAAO6oC,EAAImC,IAC5D0f,EAAYzgD,IAAI,IAAK,CAAChD,KAAM6O,GAAqB9V,MAAO0mC,EAAIuE,IAC5Dwf,EAAK5gD,gBAAgBI,IAAI,UAAWygD,GAE7BD,KAER,GAAO,EAAO,uLAAuL,IAE5M,EAAKn6C,UAAU,IAAI1I,EAAO,gBAAiB,IAAI0B,EAAc,CACzD,CAAErI,WAAY,UAAWgG,KAAM,MAAM8O,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,EAAMkB,YAAY,GACzG,CAAE5H,WAAY,UAAWgG,KAAM,MAAM8O,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,EAAMkB,YAAY,KACzGiN,IACA,SAACpN,GAEG,IAEI4hD,EAFmB5hD,EAAW,GAAG1I,MAEA6J,gBAAgBjK,IAAI,WACrDipC,EAAYyhB,EAAS1qD,IAAI,KAAKI,MAC9B0mC,EAAY4jB,EAAS1qD,IAAI,KAAKI,MAG9BwqD,EADoB9hD,EAAW,GAAG1I,MACC6J,gBAAgBjK,IAAI,WAI3D,OAAOipC,EAHU2hB,EAAU5qD,IAAI,KAAKI,MAGtB0mC,EAFG8jB,EAAU5qD,IAAI,KAAKI,SAIrC,GAAO,EAAM,sDAAsD,IAG1E,EAAKsQ,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,SAAUgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,EAAMkB,YAAY,KAD5G,OAGX,SAACH,GAEG,IAEI4hD,EAFmB5hD,EAAW,GAAG1I,MAEA6J,gBAAgBjK,IAAI,WACrDipC,EAAYyhB,EAAS1qD,IAAI,KAAKI,MAC9B0mC,EAAY4jB,EAAS1qD,IAAI,KAAKI,MAE9Bc,EAAY4H,EAAW,GAAG1I,MAE1ByqD,EAAsB,IAAI,EAAJ,OACtBC,EAAkC,IAAI/jD,IAK1C,OAJA+jD,EAAYzgD,IAAI,IAAK,CAAChD,KAAM6O,GAAqB9V,MAAO6oC,EAAE/nC,IAC1D4pD,EAAYzgD,IAAI,IAAK,CAAChD,KAAM6O,GAAqB9V,MAAO0mC,EAAE5lC,IAC1D2pD,EAAK5gD,gBAAgBI,IAAI,UAAWygD,GAE7BD,KAER,GAAO,EAAO,uLAAuL,IAE5M,EAAKn6C,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,CACrD,CAAErI,WAAY,WAAYgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,EAAMkB,YAAY,KAD9G,OAGX,SAACH,GAEG,IAEI4hD,EAFmB5hD,EAAW,GAAG1I,MAEA6J,gBAAgBjK,IAAI,WACrDipC,EAAYyhB,EAAS1qD,IAAI,KAAKI,MAC9B0mC,EAAY4jB,EAAS1qD,IAAI,KAAKI,MAE9BgsC,GAAiBtjC,EAAW,GAAG1I,MAAMkS,KAAK+5B,GAAG,IAC7CG,EAAcl6B,KAAKk6B,IAAIJ,GACvBG,EAAcj6B,KAAKi6B,IAAIH,GAEvBye,EAAsB,IAAI,EAAJ,OACtBC,EAAkC,IAAI/jD,IAK1C,OAJA+jD,EAAYzgD,IAAI,IAAK,CAAChD,KAAM6O,GAAqB9V,MAAO6oC,EAAEsD,EAAMzF,EAAE0F,IAClEse,EAAYzgD,IAAI,IAAK,CAAChD,KAAM6O,GAAqB9V,MAAO6oC,EAAEuD,EAAM1F,EAAEyF,IAClEse,EAAK5gD,gBAAgBI,IAAI,UAAWygD,GAE7BD,KAER,GAAO,EAAO,6MAA6M,IAG9N,EAAKn6C,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,CACpD,CAAErI,WAAY,KAAMgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACjG,CAAE1G,WAAY,KAAMgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACjG,CAAE1G,WAAY,KAAMgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACjG,CAAE1G,WAAY,KAAMgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACjGmO,IACA,SAACpN,GACG,IAAIsiC,EAAqBtiC,EAAW,GAAG1I,MACnCirC,EAAqBviC,EAAW,GAAG1I,MAGnCsrC,EAFqB5iC,EAAW,GAAG1I,MAEzBgrC,EACVO,EAFqB7iC,EAAW,GAAG1I,MAEzBirC,EACd,OAAO/4B,KAAKs5B,KAAKF,EAAGA,EAAGC,EAAGA,MAC3B,GAAO,EAAM,0DAIxB,EAAKh7B,aAAa,IAAIhJ,EAAU,IAAKuO,GACjC,MAAM,EAAOzL,EAAW2C,QAAQ,EAAO,6BAE3C,EAAKuD,aAAa,IAAIhJ,EAAU,IAAKuO,GACjC,MAAM,EAAOzL,EAAW2C,QAAQ,EAAO,6BA9SrB,EAF9B,O,mOAAA,SAAkC,G,88BCD3B,IAAM,GAAb,YAEI,WAAYlO,GAAc,yBACtB,0BAAM,gBAAiBA,EAAQ,yNAE1BwR,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,CACrD,CAAErI,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,SAAUgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAClG8Q,GACA,MACA,GAAO,EAAO,kFAElB,EAAKnI,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,CACvD,CAAErI,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,SAAUgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAClG8Q,GACA,MACA,GAAO,EAAO,+EAElB,EAAKnI,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,CACvD,CAAErI,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChG8Q,GACA,MACA,GAAO,EAAO,6EAElB,EAAKnI,UAAU,IAAI1I,EAAO,eAAgB,IAAI0B,EAAc,CACxD,CAAErI,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChG8Q,GACA,MACA,GAAO,EAAO,iFAElB,EAAKnI,UAAU,IAAI1I,EAAO,eAAgB,IAAI0B,EAAc,CACxD,CAAErI,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChG8Q,GACA,MACA,GAAO,EAAO,kFAtCI,EAF9B,kBAA4C,GA+C/B,GAAb,YAEI,WAAY3Z,GAAc,iBACtB,0BAAM,eAAgBA,EAAQ,6OAE9B,IAAI8uC,EAA4C9uC,EAAOma,UAAUC,QAAQ,iBAHnD,OAKtB,EAAKxM,WAAW7B,KAAK+iC,GAErB,EAAKt9B,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,CACrD,CAAErI,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,SAAUgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAClG8Q,GACA,MACA,GAAO,EAAO,kFAElB,EAAKnI,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,CACvD,CAAErI,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,SAAUgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAClG8Q,GACA,MACA,GAAO,EAAO,+EAElB,EAAKnI,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,CACvD,CAAErI,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChG8Q,GACA,MACA,GAAO,EAAO,6EAElB,EAAKnI,UAAU,IAAI1I,EAAO,eAAgB,IAAI0B,EAAc,CACxD,CAAErI,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChG8Q,GACA,MACA,GAAO,EAAO,iFAElB,EAAKnI,UAAU,IAAI1I,EAAO,eAAgB,IAAI0B,EAAc,CACxD,CAAErI,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChG8Q,GACA,MACA,GAAO,EAAO,kFA1CI,EAF9B,kBAAuC,G,+4BC3ChC,IAAM,GAAb,YAEI,WAAY3Z,GAAc,iBACtB,0BAAM,kBAAmBA,EAAQ,2IAEjC,IAAI8V,EAAoB9V,EAAOma,UAAUC,QAAQ,UACjD,EAAKC,aAAavE,GAElB,EAAKtE,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,CAChD,CAAErI,WAAY,UAAWgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACtG,CAAE1G,WAAY,cAAegG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC1G8Q,IACA,SAAC/P,GAEG,IACIwlC,EADmBxlC,EAAW,GAAG1I,MACH4J,cAAF,OAC5B0I,EAAkB5J,EAAW,GAAG1I,MAChC2qD,EAAsBjiD,EAAW,GAAG1I,MAExCkuC,EAAG0c,KAAKt4C,EAASq4C,MAElB,GAAO,EAAO,+RAA+R,IAEhT,EAAKr6C,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,CACvD,CAAErI,WAAY,YAAagG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACxG,CAAE1G,WAAY,OAAQgG,KAAM2N,EAAYmB,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC1F8Q,IACA,SAAC/P,GAEG,IACIwlC,EADmBxlC,EAAW,GAAG1I,MACH4J,cAAF,OAC5BtJ,EAAcoI,EAAW,GAAG1I,MAC5BA,EAAuB0I,EAAW,GAAG1I,MAEzCkuC,EAAG2c,YAAYvqD,EAAKN,MAErB,GAAO,EAAO,+NAA+N,IAEpP,EAAKsQ,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,CACvD,CAAErI,WAAY,YAAagG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACxGiN,GACA,SAAClM,GAEG,IACIwlC,EADmBxlC,EAAW,GAAG1I,MACH4J,cAAF,OAC5BtJ,EAAcoI,EAAW,GAAG1I,MAEhC,OAAOkuC,EAAG4c,YAAYxqD,MAEvB,GAAO,EAAO,meAAme,IAMxf,IAJA,IAjDkB,aAqDb,IAAIf,EAAM,KACX,EAAK+Q,UAAU,IAAI1I,EAAOrI,EAAOA,OAAQ,IAAI+J,EAAc,IACvD2I,IACA,SAACvJ,GAKG,OAHuBA,EAAW,GAAG1I,MACH4J,cAAF,OAEtBrK,EAAO4K,QAElB,GAAO,EAAO,YAAc5K,EAAOwrD,KAAO,wBAAwB,KAV7E,MAJiE,CAAC,CAAC5gD,IAAK,UAAW5K,OAAQ,eAAgBwrD,KAAM,YAChH,CAAC5gD,IAAK,eAAgB5K,OAAQ,cAAewrD,KAAM,iBACpD,CAAC5gD,IAAK,WAAY5K,OAAQ,cAAewrD,KAAM,iBAAkB,CAAC5gD,IAAK,WAAY5K,OAAQ,cAAewrD,KAAM,iBAEhH,eAA8B,IArDZ,OAmElB,EAAKz6C,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IACpD0L,IACA,SAACtM,GAKG,OAHuBA,EAAW,GAAG1I,MACH4J,cAAF,OAEtBd,SAEX,GAAO,EAAO,2cAA2c,IA5E9c,EAF9B,O,mOAAA,SAA0C,GAsF7BkiD,GAAb,WAOI,WAAmB1vC,EAAsC2vC,EAC7CxiD,EAAmByiD,EAAwBC,EAA6BC,EAAyBC,GAAgB,WAD1G,KAAA/vC,gBAAsC,KAAA2vC,kBAC7C,KAAAxiD,KAAmB,KAAAyiD,UAAwB,KAAAC,eAA6B,KAAAC,WAAyB,KAAAC,WAN7G,KAAAC,cAAgD,GAChD,KAAAxiD,MAAgB,EAET,KAAAyiD,WAAqB,E,UALhC,O,EAAA,G,EAAA,4BAYSj5C,EAAiBq4C,GAClB9jD,KAAKokD,gBAAgBO,aAAa3kD,KAAK4B,GAAI6J,EAASq4C,KAb5D,kCAgBgBrqD,GACR,OAAOuG,KAAKykD,cAAchrD,KAjBlC,kCAoBgBA,EAAaN,GACrB6G,KAAKykD,cAAchrD,GAAON,O,6BArBlC,K,+4BClFO,IAAM,GAAb,YAEI,WAAYlB,GAAc,kBACtB,0BAAM,YAAaA,EAAQ,8SAEtBqa,aAAoBra,EAAOma,UAAUC,QAAQ,WAClD,IAAIuyC,EAA6B3sD,EAAOma,UAAUC,QAAQ,mBACtDwyC,EAA+B5sD,EAAOma,UAAUC,QAAQ,UALtC,OAOtB,EAAK5I,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,IACrD,MACA,SAACZ,G,QAEOlJ,EAAmBkJ,EAAW,GAAG1I,MAEjC8Z,EAA+B,QAApB,EAAc,QAAd,EAAG,EAAKhb,cAAM,eAAE6b,YAAI,eAAEC,iBAEjCszB,EAAK,IAAI,GAAgB1uC,EAAGsa,EAAa2xC,EAAqBC,GAElElsD,EAAEoK,cAAF,OAA4BskC,KAE7B,GAAO,EAAO,2CAA2C,IAEhE,EAAK59B,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,CAChD,CAAErI,WAAY,cAAegG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAC1G,CAAE1G,WAAY,WAAYgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACvG,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC2rD,EAAsBjjD,EAAW,GAAG1I,MACpC4rD,EAAmBljD,EAAW,GAAG1I,MAEjCkuC,EAAsB1uC,EAAEoK,cAAF,OAC1BskC,EAAG2d,QAAQF,EAAaC,GAExBpsD,EAAEoK,cAAF,OAA4BskC,KAE7B,GAAO,EAAO,4RACjB,IAEJ,EAAK59B,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,CACrD,CAAErI,WAAY,UAAWgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACtG,CAAE1G,WAAY,cAAegG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC1G8Q,IACA,SAAC/P,GAEG,IACIwlC,EADmBxlC,EAAW,GAAG1I,MACT4J,cAAF,OACtB0I,EAAkB5J,EAAW,GAAG1I,MAChC2qD,EAAsBjiD,EAAW,GAAG1I,MAExCkuC,EAAG4d,UAAUx5C,EAASq4C,MAEvB,GAAO,EAAO,qTAAqT,IAE1U,EAAKr6C,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,CACvD,CAAErI,WAAY,QAASgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACjG8Q,IACA,SAAC/P,GAEG,IACIwlC,EADmBxlC,EAAW,GAAG1I,MACT4J,cAAF,OACtBmiD,EAAgBrjD,EAAW,GAAG1I,MAElCkuC,EAAG8d,qBAAqBD,MAEzB,GAAO,EAAO,gOAAgO,IAErP,EAAKz7C,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,CACvD,CAAErI,WAAY,YAAagG,KAAM,IAAI,EAAUgL,IAAsB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACvH8Q,IACA,SAAC/P,GAEG,IACIwlC,EADmBxlC,EAAW,GAAG1I,MACT4J,cAAF,OAGtBqiD,EAF2BvjD,EAAW,GAAG1I,MAEHwJ,KAAI,SAAC0iD,GAAD,OAASA,EAAIlsD,SAE3DkuC,EAAGie,yBAAyBF,MAE7B,GAAO,EAAO,2MAA2M,IAEhO,EAAK37C,UAAU,IAAI1I,EAAO,aAAc,IAAI0B,EAAc,CACtD,CAAErI,WAAY,WAAYgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACvG8Q,IACA,SAAC/P,GAEG,IACIwlC,EADmBxlC,EAAW,GAAG1I,MACT4J,cAAF,OACtBgiD,EAAmBljD,EAAW,GAAG1I,MAErCkuC,EAAGie,yBAAyB,CAACP,OAE9B,GAAO,EAAO,uMAAuM,IAE5N,EAAKt7C,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,IACjDmP,IACA,SAAC/P,GAE0BA,EAAW,GAAG1I,MACT4J,cAAF,OAEvBwiD,gBAEJ,GAAO,EAAO,yKAAyK,IAE9L,EAAK97C,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,IAClD,KACA,MACA,GAAO,EAAO,+EAA+E,IAEjG,EAAKgH,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,IACnD,KACA,MACA,GAAO,EAAO,8DAA8D,IAEhF,EAAKgH,UAAU,IAAI1I,EAAO,YAAa,IAAI0B,EAAc,CACrD,CAAErI,WAAY,SAAUgG,KAAMwkD,EAAqB11C,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACrG,CAAE1G,WAAY,UAAWgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACtG,CAAE1G,WAAY,cAAegG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC1G,KACA,MACA,GAAO,EAAO,0FAA0F,IAE5G,EAAK2I,UAAU,IAAI1I,EAAO,yBAA0B,IAAI0B,EAAc,CAClE,CAAErI,WAAY,cAAegG,KAAMwkD,EAAqB11C,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC1G,KACA,MACA,GAAO,EAAO,+HAA+H,IAEjJ,EAAK2I,UAAU,IAAI1I,EAAO,4BAA6B,IAAI0B,EAAc,CACrE,CAAErI,WAAY,cAAegG,KAAMwkD,EAAqB11C,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC1G,KACA,MACA,GAAO,EAAO,uIAAuI,IAEzJ,EAAK2I,UAAU,IAAI1I,EAAO,iBAAkB,IAAI0B,EAAc,CAC1D,CAAErI,WAAY,UAAWgG,KAAM,IAAI,EAAUwkD,GAAsB11C,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACrH,CAAE1G,WAAY,WAAYgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACpG,KACA,MACA,GAAO,EAAO,qHAAqH,IA7IjH,EAF9B,O,mOAAA,SAAoC,GAsJvB,GAAb,WAgBI,WAAoB2T,EAAsCxB,EAC9C2xC,EAAoCC,GAA4B,WADxD,KAAApwC,gBAAsC,KAAAxB,cAC9C,KAAA2xC,sBAAoC,KAAAC,kBARhD,KAAAW,WAAsC,GACtC,KAAAC,cAAyD,GAIzD,KAAAC,QAAkB,EA0DlB,KAAAC,eAA2B,GArDvB,IAAI7iD,EAAsB2R,EAAcxR,MAQxCjD,KAAK4lD,aAAe9iD,EAAMkD,QAAQoR,MAAK,SAAA9e,GAAC,MAAmB,YAAfA,EAAEqJ,aAC9C3B,KAAK6lD,cAAgB/iD,EAAMkD,QAAQoR,MAAK,SAAA9e,GAAC,MAAmB,aAAfA,EAAEqJ,aAC/C3B,KAAK8lD,gBAAkBhjD,EAAMkD,QAAQoR,MAAK,SAAA9e,GAAC,MAAmB,8CAAfA,EAAEqJ,aACjD3B,KAAK+lD,wBAA0BjjD,EAAMkD,QAAQoR,MAAK,SAAA9e,GAAC,MAAmB,2CAAfA,EAAEqJ,aACzD3B,KAAKgmD,2BAA6BljD,EAAMkD,QAAQoR,MAAK,SAAA9e,GAAC,MAAmB,8CAAfA,EAAEqJ,aAC5D3B,KAAKimD,qBAAuBnjD,EAAMkD,QAAQoR,MAAK,SAAA9e,GAAC,MAAmB,0CAAfA,EAAEqJ,a,UAhC9D,O,EAAA,G,EAAA,+BAoCYmjD,EAAqBC,GAAgB,WAEtC/kD,KAAKiT,YAAYa,KAAKoyC,aACrBlmD,KAAKiT,YAAYK,eAAe,iKAKpCiF,GAAK,oBAAqB,IAAI,SAACa,GAE3B,IAAIZ,GAAeukC,OAAO1jC,SAAS8sC,SAASl1C,WAAW,SAAW,SAAW,SAAW8rC,OAAO1jC,SAAS+sC,KAAO,aAC/G,EAAKC,WAAa,IAAIC,UAAU9tC,GAEhC,EAAK6tC,WAAWE,QAAU,SAACz7C,GAAmB,EAAK07C,QAAQ17C,IAC3D,EAAKu7C,WAAWI,QAAU,SAACjjB,GAAwB,EAAKkjB,QAAQljB,IAChE,EAAK6iB,WAAWM,UAAY,SAACnjB,GAA0B,EAAKojB,UAAUpjB,IAEtE,EAAK6iB,WAAWQ,OAAS,SAACrjB,GACtB,IAAI/qB,EAAmC,CACnC/P,QAAS,EACTuoB,MAAO7X,EAAS6X,MAChBuzB,SAAUO,EACVD,YAAaA,GAGjB,EAAK7xC,YAAY6zC,kCAAkC9iD,KAAK,EAAKqiD,YAC7D,EAAKX,QAAS,EACd,EAAKqB,WAAW/tC,KAAKC,UAAUR,IAC/B,EAAKuuC,eAhErB,iCAyEev7C,GAEP,GAAKzL,KAAK0lD,OAGN,IACI1lD,KAAKqmD,WAAWtC,KAAKt4C,GACvB,MAAOw7C,GACLjxC,QAAQC,IAAIgxC,QALhBjnD,KAAK2lD,eAAe3hD,KAAKyH,KA5ErC,8BAsFY+3B,GACJxjC,KAAK0lD,QAAS,EACd1lD,KAAKknD,UAAUlnD,KAAK6lD,cAAe,MAxF3C,mCA2FiBsB,EAAkBpuC,EAAcnE,GACzC,IAAInJ,EAAwC,CACxC/C,QAAS,EACTqQ,KAAMA,EACNnE,SAAUA,EACVwyC,aAAcD,GAElBnnD,KAAK+mD,WAAW/tC,KAAKC,UAAUxN,MAlGvC,gCAqGcsN,EAAcnE,GACpB,IAAInJ,EAAqC,CACrC/C,QAAS,EACTqQ,KAAMA,EACNnE,SAAUA,GAEd5U,KAAK+mD,WAAW/tC,KAAKC,UAAUxN,MA3GvC,mCAkHQzL,KAAK+mD,WAAW/tC,KAAKC,UAHqB,CACtCvQ,QAAS,KAGb1I,KAAKqmD,WAAWnrB,QAChB,IAAImsB,EAAMrnD,KAAKiT,YAAY6zC,kCAC3BO,EAAI7zC,OAAO6zC,EAAIziD,QAAQ5E,KAAKqmD,YAAa,KArHjD,gCAwHc7iB,GAEN,IAAIpqB,EAA8BJ,KAAKsuC,MAAM9jB,EAAMzqB,MACnD,GAAwBzQ,MAApB8Q,EAAS1Q,QAEb,OAAQ0Q,EAAS1Q,SACb,KAAK,EACD,IAAI6+C,EAAsB,IAAI,EAAcvnD,KAAK4kD,qBACjD2C,EAAoBx4C,4BACpB,IAAIy4C,EAA6B,IAAIrD,GAAsBoD,EAAqBvnD,KAAMoZ,EAASquC,QAC3FruC,EAASirC,QAASjrC,EAASkrC,aAAclrC,EAASmrC,SAAUnrC,EAASorC,UACzE+C,EAAoBxkD,cAApB,OAA8CykD,EAC9CxnD,KAAKwlD,WAAWxhD,KAAKwjD,GACrBxnD,KAAKylD,cAAcrsC,EAASquC,SAAWD,EACvCxnD,KAAKknD,UAAUlnD,KAAK+lD,wBAAyB,CAAC,CAAE3lD,KAAMJ,KAAK4kD,oBAAqBzrD,MAAOouD,KACvF,MACJ,KAAK,EACD,IAAIG,EAAe1nD,KAAKylD,cAAcrsC,EAASuuC,gBAC/C,GAAoB,MAAhBD,EAAsB,OAC1B1nD,KAAKknD,UAAUlnD,KAAK8lD,gBAAiB,CACjC,CAAE1lD,KAAMJ,KAAK4kD,oBAAqBzrD,MAAOuuD,EAAajzC,eACtD,CAAErU,KAAMgL,GAAqBjS,MAAOigB,EAASL,MAC7C,CAAE3Y,KAAMgL,GAAqBjS,MAAOigB,EAASxE,YAEjD,MACJ,KAAK,EACD,IAAIgzC,EAAgB5nD,KAAKylD,cAAcrsC,EAASyuC,yBAChD,GAAqB,MAAjBD,EAAuB,OAC3B5nD,KAAKwlD,WAAWhyC,OAAOxT,KAAKwlD,WAAW5gD,QAAQgjD,GAAgB,GAC/D5nD,KAAKylD,cAAcrsC,EAASyuC,8BAA2Bv/C,EACvDtI,KAAKknD,UAAUlnD,KAAKgmD,2BAA4B,CAC5C,CAAE5lD,KAAMJ,KAAK4kD,oBAAqBzrD,MAAOyuD,EAAcnzC,iBAE3D,MACJ,KAAK,EACDzU,KAAK6kD,gBAAgBvE,gBAAkBlnC,EAAS0uC,iBAAmBtH,KAAKC,MACxEzgD,KAAK+nD,UAAY3uC,EAAS2uC,UAC1B,MACJ,KAAK,EACD,MACJ,KAAK,EACD/nD,KAAKgoD,eAAe5uC,MAjKpC,qCAsKmBA,GACX,IAAI6uC,EAAoB,EACpBC,EAAwB,GAFsB,uBAIlD,YAAmB9uC,EAAS+uC,QAA5B,+CAAqC,KAA5BC,EAA4B,QACjC,GAAIA,EAAOxmD,IAAM5B,KAAK+nD,UAClBE,EAAYG,EAAOnmD,UAChB,CACH,IAAIomD,EAAcroD,KAAKylD,cAAc2C,EAAOxmD,IACzB,MAAfymD,IACAA,EAAYpmD,MAAQmmD,EAAOnmD,MAC3BimD,EAAalkD,KAAK,CACd5D,KAAMJ,KAAK4kD,oBACXzrD,MAAOkvD,EAAY5zC,mBAbe,kFAmBlD,IAAI6zC,EAAoB,CACpBloD,KAAM,IAAI,EAAUJ,KAAK4kD,qBACzBzrD,MAAO+uD,GAGXloD,KAAKknD,UAAUlnD,KAAKimD,qBAAsB,CAACqC,EAAY,CAAEloD,KAAM+N,GAAkBhV,MAAO8uD,OA9LhG,8BAkMYn9C,GACJ9K,KAAKiT,YAAYK,eAAe,yCAnMxC,+BAsMU,WACFtT,KAAK0lD,QAAS,EACX1lD,KAAK2lD,eAAe5jD,OAAS,IAC5B/B,KAAK2lD,eAAe70C,SAAQ,SAAAxY,GAAC,OAAI,EAAKyuD,WAAWzuD,MACjD0H,KAAK2lD,eAAiB,IAE1B3lD,KAAKknD,UAAUlnD,KAAK4lD,aAAc,MA5M1C,gCA+MclkD,EAAgBosC,GACR,MAAVpsC,IACJosC,EAAct6B,OAAO,EAAG,EAAG,CACvBpT,KAAMJ,KAAKyU,cAAcxR,MACzB9J,MAAO6G,KAAKyU,gBAGZzU,KAAKiT,YAAYirB,OAASC,GAAiBoqB,gBAC3CvoD,KAAKiT,YAAYu1C,kCAAkC9mD,EAAOD,QAASqsC,GAEnE9tC,KAAKiT,YAAYuC,SAAS9T,EAAQosC,GAAe,eAAW,MAzNxE,2CA6NyBoX,GACjB,IAAIz5C,EAAuC,CACvC/C,QAAS,EACTw8C,MAAOA,EACPE,UAAW,IAGfplD,KAAK+mD,WAAW/tC,KAAKC,UAAUxN,MApOvC,+CAuO6B25C,GACrB,IAAI35C,EAAuC,CACvC/C,QAAS,EACTw8C,MAAOE,EAAUrjD,OACjBqjD,UAAWA,GAGfplD,KAAK+mD,WAAW/tC,KAAKC,UAAUxN,S,6BA9OvC,K,iyCCvJO,IAAM,GAAb,YAEI,WAAmBxT,GAAc,kBAE7B,0BAAM,UAAWA,EAAQ,uBAFVA,SAIf,EAAKqa,aAAoBra,EAAOma,UAAUC,QAAQ,WAClD,EAAKtS,cAAgB,kYAQU,CAAC,CAAC,SAAU,yCAA0C,CAAC,SAAU,yCAChG,CAAC,UAAW,wDAAyD,CAAC,UAAW,wDACjF,CAAC,OAAQ,SAAU,CAAC,SAAU,SAAU,CAAC,QAAS,UAAW,CAAC,MAAO,cAAe,CAAC,WAAY,6BAA8B,CAAC,SAAU,eAC1I,CAAC,QAAS,8BAA+B,CAAC,SAAU,4BAA6B,CAAC,UAAW,2CAC7F,CAAC,cAAe,+EAChB,CAAC,SAAU,oCAAqC,CAAC,UAAW,oCAAqC,CAAC,SAAU,oCAE5G,CAAC,SAAU,oCACX,CAAC,QAAS,uCACV,CAAC,YAAa,yCACd,CAAC,iBAAkB,4CACnB,CAAC,eAAgB,0CACjB,CAAC,QAAS,gCACV,CAAC,aAAc,wCACf,CAAC,OAAQ,kFACT,CAAC,QAAS,0CAEV,CAAC,UAAW,iGACZ,CAAC,UAAW,sGAIC+Q,SAAQ,SAAAtL,GACjB,EAAKkE,aAAa,IAAIhJ,EAAU8E,EAAS,GAAI2I,IAAkB,SAACvU,GAAaA,EAAOT,MAAQlB,EAAO6b,KAAKC,iBAAiBq2B,iBAAiBqe,IAAIjjD,EAAS,OACnJ,EAAOhC,EAAW2C,QAAQ,EAAMX,EAAS,QArCpB,MAwCK,CAAC,CAAC,QAAS,iCAAkC,CAAC,MAAO,0CACvF,CAAC,MAAO,oCAAqC,CAAC,MAAO,kBAAmB,CAAC,MAAO,mBAGhEsL,SAAQ,SAAAtL,GACpB,EAAKkE,aAAa,IAAIhJ,EAAU8E,EAAS,GAAI4F,IAAqB,SAACxR,GAAaA,EAAOT,MAAQlB,EAAO6b,KAAKC,iBAAiBq2B,iBAAiBqe,IAAIjjD,EAAS,OACtJ,EAAOhC,EAAW2C,QAAQ,EAAMX,EAAS,QAGjD,EAAKkE,aAAa,IAAIhJ,EAAU,MAAOuP,IAAmB,SAACrW,GAAaA,EAAOT,MAAQlB,EAAO6b,KAAKC,iBAAiBq2B,iBAAiBqe,IAAIhvD,OACrI,EAAO+J,EAAW2C,QAAQ,EAAM,2BAGpC,EAAKsD,UAAU,IAAI1I,EAAO,aAAc,IAAI0B,EAAc,IACtD,MACA,SAACZ,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCsgD,EAAuB,EAAKiP,oBAAoB/vD,GACpDA,EAAEoK,cAAF,WAAgC02C,KAEjC,GAAO,EAAO,wCAAwC,IAE7D,EAAKhwC,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,CAChD,CAAErI,WAAY,OAAQgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACnG,MACA,SAACe,GAEG,IACI43C,EADmB53C,EAAW,GAAG1I,MACR4J,cAAF,WASvBkQ,EAAchb,EAAO6b,KAAKC,iBAC9Bd,EAAY01C,yBACZlP,EAAG3lC,OACHb,EAAY01C,4BAEb,GAAO,EAAO,kCAAkC,IAEvD,EAAKl/C,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,IAChD,MACA,SAACZ,GAEG,IACI43C,EADmB53C,EAAW,GAAG1I,MACR4J,cAAF,WAEvBkQ,EAAchb,EAAO6b,KAAKC,iBAC9Bd,EAAY01C,yBACZlP,EAAG3lC,OACHb,EAAY01C,4BAEb,GAAO,EAAO,kCAAkC,IAEvD,EAAKl/C,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,IAChD,MACA,SAACZ,GAE0BA,EAAW,GAAG1I,MACR4J,cAAF,WAExB6lD,UAEJ,GAAO,EAAO,yGAAyG,IAE9H,EAAKn/C,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,IAClD,MACA,SAACZ,GAE0BA,EAAW,GAAG1I,MACR4J,cAAF,WAExB8lD,YAEJ,GAAO,EAAO,+GAA+G,IAEpI,EAAKp/C,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,CAChD,CAAErI,WAAY,QAASgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACjG,CAAE1G,WAAY,SAAUgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAClG8Q,IACA,SAAC/P,GAEG,IACI43C,EADmB53C,EAAW,GAAG1I,MACR4J,cAAF,WACvBu+B,EAAgBz/B,EAAW,GAAG1I,MAC9BqoC,EAAiB3/B,EAAW,GAAG1I,MAEnCsgD,EAAGqP,aAAaxnB,EAAOE,MAExB,GAAO,EAAO,uEAAuE,IAE5F,EAAK/3B,UAAU,IAAI1I,EAAO,eAAgB,IAAI0B,EAAc,CACxD,CAAErI,WAAY,QAASgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACjG,CAAE1G,WAAY,SAAUgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAClG8Q,IACA,SAAC/P,GAEG,IACI43C,EADmB53C,EAAW,GAAG1I,MACR4J,cAAF,WACvBu+B,EAAgBz/B,EAAW,GAAG1I,MAC9BqoC,EAAiB3/B,EAAW,GAAG1I,MAEnCsgD,EAAGqP,aAAaxnB,EAAOE,MAExB,GAAO,EAAO,uEAAuE,IAE5F,EAAK/3B,UAAU,IAAI1I,EAAO,eAAgB,IAAI0B,EAAc,CACxD,CAAErI,WAAY,QAASgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GACjG,CAAE1G,WAAY,SAAUgG,KAAM+N,GAAkBe,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAClG,CAAE1G,WAAY,WAAYgG,KAAMgL,GAAqB8D,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACvG8Q,IACA,SAAC/P,GAEG,IACI43C,EADmB53C,EAAW,GAAG1I,MACR4J,cAAF,WACvBu+B,EAAgBz/B,EAAW,GAAG1I,MAC9BqoC,EAAiB3/B,EAAW,GAAG1I,MAC/By0C,EAAmB/rC,EAAW,GAAG1I,MAErCsgD,EAAG7L,SAAWA,EACd6L,EAAGqP,aAAaxnB,EAAOE,MAExB,GAAO,EAAO,uEAAuE,IAE5F,EAAK/3B,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,IAChDmP,GACA,MAAM,GAAO,EAAO,qOAAqO,IAE7P,EAAKnI,UAAU,IAAI1I,EAAO,WAAY,IAAI0B,EAAc,IACpDmP,GACA,MAAM,GAAO,EAAO,uZAAuZ,IAE/a,EAAKnI,UAAU,IAAI1I,EAAO,QAAS,IAAI0B,EAAc,IACjDmP,GACA,MAAM,GAAO,EAAO,mXAAmX,IAE3Y,EAAKnI,UAAU,IAAI1I,EAAO,eAAgB,IAAI0B,EAAc,IACxDmP,GACA,MAAM,GAAO,EAAO,4RAA4R,IAEpT,EAAKnI,UAAU,IAAI1I,EAAO,gBAAiB,IAAI0B,EAAc,IACzDmP,GACA,MAAM,GAAO,EAAO,mRAAmR,IAE3S,EAAKnI,UAAU,IAAI1I,EAAO,eAAgB,IAAI0B,EAAc,IACxDmP,GACA,MAAM,GAAO,EAAO,4TAA4T,IAEpV,EAAKnI,UAAU,IAAI1I,EAAO,eAAgB,IAAI0B,EAAc,IACxDmP,GACA,MAAM,GAAO,EAAO,uUAAuU,IAE/V,EAAKnI,UAAU,IAAI1I,EAAO,aAAc,IAAI0B,EAAc,IACtDmP,GACA,MAAM,GAAO,EAAO,sRAAsR,IAE9S,EAAKnI,UAAU,IAAI1I,EAAO,eAAgB,IAAI0B,EAAc,IACxDmP,GACA,MAAM,GAAO,EAAO,6HAA6H,IAErJ,EAAKnI,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,IACvDmP,GACA,MAAM,GAAO,EAAO,mHAAmH,IAE3I,EAAKnI,UAAU,IAAI1I,EAAO,aAAc,IAAI0B,EAAc,IACtDmP,GACA,MAAM,GAAO,EAAO,oMAAoM,IAE5N,EAAKnI,UAAU,IAAI1I,EAAO,cAAe,IAAI0B,EAAc,IACvDmP,GACA,MAAM,GAAO,EAAO,gMAAgM,IA4BxN,EAAKm3C,oBAAoB,QAAS,GAAI,GAClC,6BAEJ,EAAKA,oBAAoB,aAAc,CAAC,OAAQ/5C,GAC5C,mEAEJ,EAAK+5C,oBAAoB,aAAc,CAAC,iBAAkB39C,GACtD,uQAAwQA,IAE5Q,EAAK29C,oBAAoB,aAAc,CAAC,KAAM,KAAM,MAAO/5C,GACvD,wLAEJ,EAAK+5C,oBAAoB,OAAQ,CAAC,OAAQ56C,GACtC,wBAEJ,EAAK46C,oBAAoB,OAAQ,CAAC,OAAQ39C,GACtC,wBAEJ,EAAK29C,oBAAoB,OAAQ,CAAC,MAAO,SAAU,CAAC56C,GAAkBa,IAClE,wBAEJ,EAAK+5C,oBAAoB,OAAQ,CAAC,QAAS/5C,GACvC,wBAEJ,EAAK+5C,oBAAoB,OAAQ,CAAC,KAAM,KAAM,MAAO/5C,GACjD,6IAEJ,EAAK+5C,oBAAoB,OAAQ,CAAC,KAAM,KAAM,KAAM,SAAU/5C,GAC1D,6IAEJ,EAAK+5C,oBAAoB,SAAU,GAAI,GACnC,8DAEJ,EAAKA,oBAAoB,SAAU,CAAC,OAAQ56C,GACxC,0BAEJ,EAAK46C,oBAAoB,SAAU,CAAC,OAAQ39C,GACxC,0BAEJ,EAAK29C,oBAAoB,SAAU,CAAC,MAAO,SAAU,CAAC56C,GAAkBa,IACpE,0BAEJ,EAAK+5C,oBAAoB,SAAU,CAAC,QAAS/5C,GACzC,0BAEJ,EAAK+5C,oBAAoB,SAAU,CAAC,KAAM,KAAM,MAAO/5C,GACnD,+IAEJ,EAAK+5C,oBAAoB,SAAU,CAAC,KAAM,KAAM,KAAM,SAAU/5C,GAC5D,+IAEJ,EAAK+5C,oBAAoB,eAAgB,CAAC,UAAW/5C,GACjD,2BAEJ,EAAK+5C,oBAAoB,WAAY,GAAI,GACrC,qEAEJ,EAAKA,oBAAoB,QAAS,CAAC,QAAS/5C,GACxC,qDAAsD5D,IAE1D,EAAK29C,oBAAoB,QAAS,CAAC,iBAAkB39C,GACjD,8NAA+NA,IAEnO,EAAK29C,oBAAoB,QAAS,CAAC,OAAQ,SAAU/5C,GACjD,qDAAsD5D,IAE1D,EAAK29C,oBAAoB,QAAS,CAAC,KAAM,KAAM,MAAO/5C,GAClD,iEAAkE5D,IAEtE,EAAK29C,oBAAoB,QAAS,CAAC,KAAM,KAAM,KAAM,SAAU/5C,GAC3D,2EAA4E5D,IAEhF,EAAK29C,oBAAoB,YAAa,CAAC,SAAU,SAAU,KAAM,CAAC39C,GAAqBA,GAAqB4D,IACxG,8JAA+J5D,IAEnK,EAAK29C,oBAAoB,YAAa,CAAC,QAAS39C,GAC5C,8HAEJ,EAAK29C,oBAAoB,YAAa,CAAC,OAAQ,OAAQ,CAAC39C,GAAqB4D,IACzE,qLAEJ,EAAK+5C,oBAAoB,YAAa,CAAC,OAAQ,OAAQ,OAAQ,QAAS,CAAC39C,GAAqB4D,GAAoBA,GAAoBA,IAClI,qLAEJ,EAAK+5C,oBAAoB,YAAa,CAAC,OAAQ,OAAQ,OAAQ,OAAQ,YAAa,CAAC39C,GAAqB4D,GAAoBA,GAAoBA,GAAoBA,IAClK,qLAOJ,EAAK+5C,oBAAoB,WAAY,CAAC,QAAS39C,GAC3C,+IAEJ,EAAK29C,oBAAoB,OAAQ,CAAC,OAAQ,MAAO,QAAS,UAAW/5C,GACjE,oHAEJ,EAAK+5C,oBAAoB,OAAQ,CAAC,OAAQ,MAAO,QAAS,SAAU,UAAW/5C,GAC3E,2IAEJ,EAAK+5C,oBAAoB,OAAQ,CAAC,OAAQ,MAAO,QAAS,SAAU,UAAW,UAAW,UAAW,WAAY/5C,GAC7G,2IAEJ,EAAK+5C,oBAAoB,SAAU,CAAC,OAAQ,MAAO,SAAU/5C,GACzD,+FAEJ,EAAK+5C,oBAAoB,SAAU,CAAC,OAAQ,MAAO,QAAS,UAAW/5C,GACnE,kJAEJ,EAAK+5C,oBAAoB,SAAU,CAAC,OAAQ,MAAO,QAAS,UAAW,UAAW,UAAW,WAAY/5C,GACrG,kJAEJ,EAAK+5C,oBAAoB,OAAQ,CAAC,OAAQ,MAAO,QAAS,SAAU,UAAW/5C,GAC3E,+IAEJ,EAAK+5C,oBAAoB,UAAW,CAAC,OAAQ,MAAO,QAAS,UAAW/5C,GACpE,qLAEJ,EAAK+5C,oBAAoB,SAAU,CAAC,IAAK,IAAK,UAAW/5C,GACrD,6FAEJ,EAAK+5C,oBAAoB,cAAe,CAAC,QAAS39C,GAC9C,kJAGJ,EAAK29C,oBAAoB,OAAQ,CAAC,KAAM,KAAM,KAAM,MAAO/5C,GACvD,qDAEJ,EAAK+5C,oBAAoB,OAAQ,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,MAAO/5C,GACnE,6DAEJ,EAAK+5C,oBAAoB,WAAY,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,MAAO/5C,GACvE,6EAEJ,EAAK+5C,oBAAoB,OAAQ,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAO/5C,GAC/E,uFAEJ,EAAK+5C,oBAAoB,SAAU,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAO/5C,GACjF,0HAEJ,EAAK+5C,oBAAoB,QAAS,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAO/5C,GAChF,kJAEJ,EAAK+5C,oBAAoB,aAAc,CAAC,IAAK,IAAK,IAAK,IAAK,KAAM/5C,GAC9D,gTAAiTA,IAErT,EAAK+5C,oBAAoB,eAAgB,CAAC,IAAK,IAAK,IAAK,IAAK,KAAM/5C,GAChE,mTAAoTA,IAExT,EAAK+5C,oBAAoB,cAAe,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM/5C,GACnE,qTAAsTA,IAE1T,EAAK+5C,oBAAoB,gBAAiB,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM/5C,GACrE,wTAAyTA,IAG7T,EAAK+5C,oBAAoB,aAAc,GAAI,GACvC,8GAEJ,EAAKA,oBAAoB,WAAY,GAAI,GACrC,sCAEJ,EAAKA,oBAAoB,aAAc,CAAC,QAAS39C,GAC7C,sNAEJ,EAAK29C,oBAAoB,WAAY,CAAC,QAAS39C,GAC3C,2CAEJ,EAAK29C,oBAAoB,SAAU,CAAC,IAAK,KAAM/5C,GAC3C,2DAEJ,EAAK+5C,oBAAoB,QAAS,CAAC,IAAK,KAAM/5C,GAC1C,yBAEJ,EAAK+5C,oBAAoB,MAAO,CAAC,IAAK,IAAK,SAAU,CAAC/5C,GAAoBA,GAAoB5D,IAC1F,0CAEJ,EAAK29C,oBAAoB,SAAU,CAAC,IAAK,IAAK,KAAM/5C,GAChD,2DAEJ,EAAK+5C,oBAAoB,QAAS,CAAC,IAAK,IAAK,KAAM/5C,GAC/C,yBAEJ,EAAK+5C,oBAAoB,cAAe,CAAC,IAAK,KAAM/5C,GAChD,kIAEJ,EAAK+5C,oBAAoB,cAAe,CAAC,IAAK,IAAK,KAAM/5C,GACrD,kIAEJ,EAAK+5C,oBAAoB,MAAO,CAAC,QAAS/5C,GACtC,sDAEJ,EAAK+5C,oBAAoB,MAAO,CAAC,QAAS,QAAS,SAAU/5C,GACzD,8DAKJ,EAAK+5C,oBAAoB,cAAe,GAAI,GACxC,iDAEJ,EAAKA,oBAAoB,OAAQ,GAAI,GACjC,gGAEJ,EAAKA,oBAAoB,MAAO,GAAI,GAChC,sFAEJ,EAAKA,oBAAoB,QAAS,CAAC,UAAW/5C,GAC1C,iDAEJ,EAAK+5C,oBAAoB,QAAS,CAAC,UAAW,WAAY/5C,GACtD,iDAEJ,EAAK+5C,oBAAoB,QAAS,CAAC,UAAW,UAAW,WAAY/5C,GACjE,iDAEJ,EAAK+5C,oBAAoB,YAAa,CAAC,IAAK,KAAM/5C,GAC9C,oDAEJ,EAAK+5C,oBAAoB,YAAa,CAAC,IAAK,IAAK,KAAM/5C,GACnD,oDAEJ,EAAK+5C,oBAAoB,SAAU,CAAC,SAAU/5C,GAC1C,4KAEJ,EAAK+5C,oBAAoB,UAAW,CAAC,SAAU/5C,GAC3C,2LAEJ,EAAK+5C,oBAAoB,UAAW,CAAC,SAAU/5C,GAC3C,2LAEJ,EAAK+5C,oBAAoB,SAAU,CAAC,SAAU/5C,GAC1C,kMAEJ,EAAK+5C,oBAAoB,SAAU,CAAC,SAAU/5C,GAC1C,mMAEJ,EAAK+5C,oBAAoB,UAAW,CAAC,SAAU/5C,GAC3C,2LAEJ,EAAK+5C,oBAAoB,YAAa,CAAC,QAAS39C,GAC5C,gJAKJ,EAAK29C,oBAAoB,WAAY,CAAC,QAAS/5C,GAC3C,oCAKJ,EAAK+5C,oBAAoB,YAAa,CAAC,UAAW56C,GAC9C,iHAEJ,EAAK46C,oBAAoB,YAAa,CAAC,SAAU,UAAW56C,GACxD,4KAEJ,EAAK46C,oBAAoB,OAAQ,CAAC,OAAQ,IAAK,KAAM,CAAC39C,GAAqB4D,GAAoBA,IAC3F,kBAEJ,EAAK+5C,oBAAoB,OAAQ,CAAC,OAAQ,IAAK,IAAK,KAAM,MAAO,CAAC39C,GAAqB4D,GAAoBA,GAAoBA,GAAoBA,IAC/I,wJAKJ,EAAK+5C,oBAAoB,SAAU,CAAC,MAAO,QAAS/5C,GAChD,sDAAuDA,IAE3D,EAAK+5C,oBAAoB,SAAU,CAAC,QAAS/5C,GACzC,oDAAqDA,IAEzD,EAAK+5C,oBAAoB,OAAQ,CAAC,KAAM/5C,GACpC,uCAAwCA,IAE5C,EAAK+5C,oBAAoB,MAAO,CAAC,QAAS,YAAa/5C,GACnD,+DAAgEA,IAEpE,EAAK+5C,oBAAoB,MAAO,CAAC,IAAK,KAAM/5C,GACxC,6CAA8CA,IAElD,EAAK+5C,oBAAoB,MAAO,CAAC,IAAK,KAAM/5C,GACxC,8CAA+CA,IAEnD,EAAK+5C,oBAAoB,MAAO,CAAC,KAAM/5C,GACnC,qCAAsCA,IAE1C,EAAK+5C,oBAAoB,MAAO,CAAC,KAAM/5C,GACnC,oCAAqCA,IAEzC,EAAK+5C,oBAAoB,MAAO,CAAC,KAAM/5C,GACnC,sCAAuCA,IAE3C,EAAK+5C,oBAAoB,MAAO,CAAC,KAAM/5C,GACnC,sCAAuCA,IAE3C,EAAK+5C,oBAAoB,OAAQ,CAAC,KAAM/5C,GACpC,yCAA0CA,IAE9C,EAAK+5C,oBAAoB,OAAQ,CAAC,KAAM/5C,GACpC,2CAA4CA,IAEhD,EAAK+5C,oBAAoB,UAAW,CAAC,SAAU/5C,GAC3C,oDAAqDA,IAEzD,EAAK+5C,oBAAoB,UAAW,CAAC,SAAU/5C,GAC3C,oDAAqDA,IAEzD,EAAK+5C,oBAAoB,OAAQ,CAAC,KAAM/5C,GACpC,2CAA4CA,IAEhD,EAAK+5C,oBAAoB,QAAS,CAAC,IAAK,KAAM/5C,GAC1C,2CAA4CA,IAEhD,EAAK+5C,oBAAoB,OAAQ,CAAC,IAAK,KAAM/5C,GACzC,4CAA6CA,IAEjD,EAAK+5C,oBAAoB,KAAM,CAAC,IAAK,KAAM/5C,GACvC,sCAAuCA,IAE3C,EAAK+5C,oBAAoB,MAAO,CAAC,KAAM56C,GACnC,qCAAsCA,IAE1C,EAAK46C,oBAAoB,QAAS,CAAC,KAAM/5C,GACrC,uCAAwCb,IAE5C,EAAK46C,oBAAoB,OAAQ,CAAC,KAAM/5C,GACpC,oDAAqDb,IAEzD,EAAK46C,oBAAoB,QAAS,CAAC,KAAM/5C,GACrC,oDAAqDb,IAEzD,EAAK46C,oBAAoB,OAAQ,CAAC,KAAM,KAAM,KAAM,MAAO/5C,GACvD,0DAA2DA,IAE/D,EAAK+5C,oBAAoB,OAAQ,CAAC,IAAK,IAAK,KAAM/5C,GAC9C,6HAA8HA,IAElI,EAAK+5C,oBAAoB,YAAa,CAAC,QAAS,MAAO,OAAQ/5C,GAC3D,oLAAqLA,IAMzL,EAAK+5C,oBAAoB,OAAQ,GAAI,GACjC,sBAAuB56C,IAE3B,EAAK46C,oBAAoB,QAAS,GAAI,GAClC,qCAAsC56C,IAE1C,EAAK46C,oBAAoB,MAAO,GAAI,GAChC,kDAAmD56C,IAEvD,EAAK46C,oBAAoB,OAAQ,GAAI,GACjC,oCAAqC56C,IAEzC,EAAK46C,oBAAoB,OAAQ,GAAI,GACjC,oCAAqC56C,IAEzC,EAAK46C,oBAAoB,SAAU,GAAI,GACnC,oCAAqC56C,IAEzC,EAAK46C,oBAAoB,SAAU,GAAI,GACnC,qCAAsC56C,IAE1C,EAAK46C,oBAAoB,YAAa,CAAC,KAAM56C,GACzC,mEAEJ,EAAK46C,oBAAoB,YAAa,CAAC,QAAS39C,GAC5C,oCAAqC4D,IAEzC,EAAK+5C,oBAAoB,aAAc,CAAC,QAAS39C,GAC7C,oFAAqF4D,IAEzF,EAAK+5C,oBAAoB,cAAe,CAAC,QAAS39C,GAC9C,wFAAyF4D,IAE7F,EAAK+5C,oBAAoB,cAAe,CAAC,WAAY/5C,GACjD,6DAEJ,EAAK+5C,oBAAoB,SAAU,CAAC,QAAS39C,GACzC,+HAEJ,EAAK29C,oBAAoB,WAAY,CAAC,QAAS39C,GAC3C,8EAEJ,EAAK29C,oBAAoB,OAAQ,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAO/5C,GAC/E,+LAEJ,EAAK+5C,oBAAoB,SAAU,GAAI,GACnC,qFAEJ,EAAKA,oBAAoB,SAAU,GAAI,GACnC,4GA/nByB,EAFrC,O,mOAAA,sDAqoBwB3uD,EAAoB4uD,EAA0B3+C,EAA+B7K,EAAiByB,GAE9G,IAAIY,EAAyB,GAC7B,GAAIyhB,MAAMC,QAAQlZ,GACd,IAAK,IAAInS,EAAI,EAAGA,EAAI8wD,EAAejnD,OAAQ7J,IACvC2J,EAAWmC,KAAK,CAAE5J,WAAY4uD,EAAe9wD,GAAIkI,KAAMiK,EAAenS,GAAIgX,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,SAGhIe,EAAamnD,EAAermD,KAAI,SAAClK,GAAW,MAAO,CAAE2B,WAAY3B,EAAM2H,KAAMiK,EAAgB6E,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,MAGjI,MAAdG,EACAjB,KAAKyJ,UAAU,IAAI1I,EAAO3G,EAAY,IAAIqI,EAAcZ,GAAa,MACjE,SAACA,GAAc,MAEP43C,EADmB53C,EAAW,GAAG1I,MACR4J,cAAF,WACvBkmD,EAAQpnD,EAAWyK,MAAM,GAAG3J,KAAI,SAAA3I,GAAC,OAAIA,EAAEb,UAE3C,EAAAsgD,EAAGgP,KAAIruD,GAAP,WAAsB6uD,OAEvB,GAAO,EAAOzpD,GAAS,IAE9BQ,KAAKyJ,UAAU,IAAI1I,EAAO3G,EAAY,IAAIqI,EAAcZ,GAAaZ,GACjE,SAACY,GAAc,MAEP43C,EADmB53C,EAAW,GAAG1I,MACR4J,cAAF,WACvBkmD,EAAQpnD,EAAWyK,MAAM,GAAG3J,KAAI,SAAA3I,GAAC,OAAIA,EAAEb,SAE3C,OAAO,EAAAsgD,EAAGgP,KAAIruD,GAAP,WAAsB6uD,OAE9B,GAAO,EAAOzpD,GAAS,MAnqB1C,0CA0qBwB0pD,GAAyE,oH,IAErFj2C,EAA+B,QAApB,EAAc,QAAd,EAAGjT,KAAK/H,cAAM,eAAE6b,YAAI,eAAEC,iBAGrC,GAAoC,MAAhCd,EAAYm3B,iBAAhB,CAMA,GAA+B,MAA3Bn3B,EAAY21B,YAMhB,OAAO,IAAI,GAAiB5oC,KAAK/H,OAAQgb,EAAai2C,GAJlDj2C,EAAYK,eAAe,+FAN3BL,EAAYK,eAAe,sEAjrBvC,GAAqC,GAosBxB,GAAb,WAkBI,WAAoBrb,EAAwBgb,EAAiCwB,GAA4B,I,EAAA,kBAArF,KAAAxc,SAAwB,KAAAgb,cAAiC,KAAAwB,gBAX7E,KAAA6sB,MAAgB,IAChB,KAAAE,OAAiB,IAKjB,KAAA2nB,aAAuB,EAOnBnpD,KAAKiT,YAAYm3B,iBAAmBpqC,KAEpCA,KAAK8oC,gBAAkBnvB,OAAO,eAC9B,IAAI0wB,EAAerqC,KAAK/H,OAAO6b,KAAKC,iBAAiBu2B,aAAaC,iBAElEvqC,KAAKopD,cAAgB,WACjB,IAAI5e,EAAWH,EAAaI,QAAQ,YAChCC,EAAmBF,EAASlJ,QAC5BqJ,EAAoBH,EAAShJ,SAI7B,EAAKA,OAAS,EAAKF,MAAQqJ,EAAYD,EACvCL,EAAa5K,IAAI,CACb,MAAS,EAAK6B,MAAQ,EAAKE,OAASmJ,EAAY,KAChD,OAAUA,EAAY,OAG1BN,EAAa5K,IAAI,CACb,OAAU,EAAK+B,OAAS,EAAKF,MAAQoJ,EAAW,KAChD,MAASA,EAAW,QAKhCL,EAAahK,IAAI,eACjBgK,EAAa1K,GAAG,cAAe3/B,KAAKopD,eAEpCppD,KAAKopD,gBAELppD,KAAK4qC,gBAAkBjxB,OAAO,eAC9B3Z,KAAK8oC,gBAAgBzxB,OAAOrX,KAAK4qC,iBAEjCP,EAAahzB,OAAOrX,KAAK8oC,iBACzBuB,EAAazwB,OAEbywB,EAAa,GAAGQ,cAAgB,SAAUjL,GACtCA,EAAEkL,kBAGwB,QAA9B,EAAA9qC,KAAK/H,OAAO6b,KAAKi1B,qBAAa,SAAEC,qBA5DxC,gDAgEiB1H,EAAeE,GACxBxhC,KAAKshC,MAAQA,EACbthC,KAAKwhC,OAASA,EACdxhC,KAAKopD,gBACLppD,KAAKyoD,IAAIK,aAAa9oD,KAAKshC,MAAOthC,KAAKwhC,OAAQxhC,KAAK4tC,UACpD5tC,KAAKqpD,KAAKjyC,KAAK,UAAUqoB,IAAI,CACzB,MAAS,GACT,OAAU,OAvEtB,6BA6EYz/B,KAAKiT,YAAY04B,aAAc,EAC/B3rC,KAAKspD,gBAAgBtpD,KAAK4qC,mBA9EtC,sCAiFoBye,GAER,IAAInxC,EAAOlY,KACPupD,GAA6B,EACjCvpD,KAAKqpD,KAAOA,EAwFhBrpD,KAAKyoD,IAAM,IAAIe,IAtFE,SAACA,GAEVA,EAAGC,MAAQ,WACPvxC,EAAK01B,SAAW4b,EAAGE,IAEnB,IAAIC,EAAqB,WAErBJ,GAAoB,GAOpBrxD,EAAI,EAERggB,EAAKgvC,UAAU,SAAS,WACT,KAALhvD,GAAQyxD,OAGlBzxC,EAAKgvC,UAAU,YAAY,WACZ,KAALhvD,GAAQyxD,QAMtBH,EAAGhwB,QAAU,WACTthB,EAAKgvC,UAAU,YAGnBsC,EAAGI,KAAO,WACF1xC,EAAKjF,YAAYirB,OAASC,GAAiB0O,SAAY30B,EAAKixC,aACvDI,IACDA,GAAoB,EACpBrxC,EAAKgvC,UAAU,QAAQ,WACnBqC,GAAoB,MAIhCrxC,EAAKmzB,QAMTme,EAAGK,aAAe,WACd3xC,EAAKgvC,UAAU,iBAGnBsC,EAAGM,cAAgB,WACf5xC,EAAKgvC,UAAU,kBAGnBsC,EAAGO,aAAe,WACd7xC,EAAKgvC,UAAU,iBAGnBsC,EAAGQ,aAAe,WACd9xC,EAAKgvC,UAAU,iBAGnBsC,EAAGS,aAAe,WACd/xC,EAAKgvC,UAAU,iBAGnBsC,EAAGU,YAAc,WACbhyC,EAAKgvC,UAAU,gBAGnBsC,EAAGW,WAAa,WACZjyC,EAAKgvC,UAAU,eAGnBsC,EAAGY,WAAa,WACZlyC,EAAKgvC,UAAU,eAGnBsC,EAAGa,YAAc,WACbnyC,EAAKgvC,UAAU,kBAODmC,EAAK,IAC3BA,EAAKjyC,KAAK,UAAUqoB,IAAI,CACpB,MAAS,GACT,OAAU,OAhL1B,6BAwLez/B,KAAKiT,YAAYirB,OAASC,GAAiB0O,UAC9C7sC,KAAKiT,YAAYo6B,cAAc,OAAO,EAAM,IAC5CrtC,KAAKiT,YAAYq6B,cAAe,EAChCttC,KAAKiT,YAAYo6B,cAAc,OAAO,EAAO,QA3LzD,6BAiMQrtC,KAAKmpD,aAAc,IAjM3B,+BAqMQnpD,KAAKmpD,aAAc,IArM3B,gCAwMcmB,GAAqD,IAA3BxrB,EAA2B,uDAAJ,KAEnDh8B,EAAsB9C,KAAKyU,cAAcxR,MACzCvB,EAASoB,EAAMggB,qBAAqBwnC,EAAmB,MAEvD7oD,EAAUC,aAAM,EAANA,EAAQD,QAEtB,GAAe,MAAXA,EAAJ,CAKA,IAAIqsC,EAAyB,CACzB,CACI1tC,KAAM0C,EACN3J,MAAO6G,KAAKyU,gBAIpBzU,KAAKiT,YAAYuC,SAAS9T,EAAQosC,GAAe,SAAC76B,GAC9B,MAAZ6rB,GAAkBA,MACH,QAApBwrB,QAbiB,MAAZxrB,GAAkBA,MAhNlC,qCAkOwB,MAAZ9+B,KAAKyoD,KAAazoD,KAAKyoD,IAAI11C,SAC/B/S,KAAK8oC,gBAAgB/1B,SACrB/S,KAAK/H,OAAO6b,KAAKC,iBAAiBu2B,aAAaC,iBAAiB1wB,OAChE7Z,KAAKiT,YAAY04B,aAAc,EAC/B3rC,KAAKiT,YAAYm3B,iBAAmB,SAtO5C,K,o6CCvsBO,IAAM,GAAb,YAEI,WAAYnyC,GAAc,yBAEtB,0BAAM,SAAUA,EAAQ,kOAEnBqa,aAAoBra,EAAOma,UAAUC,QAAQ,gBAElD,EAAK5I,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAChG,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC6oC,EAAYngC,EAAW,GAAG1I,MAC1B0mC,EAAYh+B,EAAW,GAAG1I,MAE1BsgD,EAAK,IAAI,GAAazX,EAAGnC,GAAG,EAAO5nC,EAAO6b,KAAKC,iBAAkBpb,GACrEA,EAAEoK,cAAF,MAA2B02C,KAE5B,GAAO,EAAO,0KAA0K,IAG/L,EAAKhwC,UAAU,IAAI1I,EAAO,SAAU,IAAI0B,EAAc,CAClD,CAAErI,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,IAAKgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,GAChG,CAAE1G,WAAY,aAAcgG,KAAMkP,GAAsBJ,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC1G,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC6oC,EAAYngC,EAAW,GAAG1I,MAC1B0mC,EAAYh+B,EAAW,GAAG1I,MAC1BoxD,EAAsB1oD,EAAW,GAAG1I,MAEpCsgD,EAAK,IAAI,GAAazX,EAAGnC,EAAG0qB,EAAYtyD,EAAO6b,KAAKC,iBAAkBpb,GAC1EA,EAAEoK,cAAF,MAA2B02C,KAE5B,GAAO,EAAO,qMAAqM,IAG1N,EAAKhwC,UAAU,IAAI1I,EAAO,UAAW,IAAI0B,EAAc,CACnD,CAAErI,WAAY,SAAUgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACrG,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjC4I,EAAiBF,EAAW,GAAG1I,MAC/By2C,EAAmBj3C,EAAEoK,cAAF,MAEnB6sC,EAAGC,cAAc,YAErBD,EAAG4a,QAAQzoD,MAEZ,GAAO,EAAO,iPAAiP,IAEtQ,EAAK0H,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,CAChD,CAAErI,WAAY,aAAcgG,KAAM6O,GAAqBC,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KACzG,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCgsC,EAAgBtjC,EAAW,GAAG1I,MAC9By2C,EAAmBj3C,EAAEoK,cAAF,MAEnB6sC,EAAGC,cAAc,SAErBD,EAAG6a,KAAKtlB,MAET,GAAO,EAAO,kVAAkV,IAEvW,EAAK17B,UAAU,IAAI1I,EAAO,eAAgB,IAAI0B,EAAc,CACxD,CAAErI,WAAY,eAAgBgG,KAAMkP,GAAsBJ,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC5G,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCogD,EAAwB13C,EAAW,GAAG1I,MACtCy2C,EAAmBj3C,EAAEoK,cAAF,MAEnB6sC,EAAGC,cAAc,iBAErBD,EAAG2J,aAAaA,MAEjB,GAAO,EAAO,oGAAoG,IAEzH,EAAK9vC,UAAU,IAAI1I,EAAO,aAAc,IAAI0B,EAAc,CACtD,CAAErI,WAAY,aAAcgG,KAAMkP,GAAsBJ,YAAa,KAAMrP,eAAgB,KAAMiB,SAAS,KAC1G,MACA,SAACe,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCoxD,EAAsB1oD,EAAW,GAAG1I,MACpCy2C,EAAmBj3C,EAAEoK,cAAF,MAEnB6sC,EAAGC,cAAc,eAErBD,EAAG8a,cAAcH,MAElB,GAAO,EAAO,oGAAoG,IAEzH,EAAK9gD,UAAU,IAAI1I,EAAO,OAAQ,IAAI0B,EAAc,IAArC,OAEX,SAACZ,GAEG,IAAIlJ,EAAmBkJ,EAAW,GAAG1I,MACjCy2C,EAAmBj3C,EAAEoK,cAAF,MAEvB,IAAI6sC,EAAGC,cAAc,QAErB,OAAOD,EAAGa,QAAe93C,EAAEsK,UAE5B,GAAO,EAAO,8DAA8D,IA/G7D,EAF9B,kBAAiC,GAgIpB,GAAb,YAeI,WAAY0nD,EAAgBC,EAAwBL,EAChDt3C,EAA0BwB,GAA4B,kBACtD,0BAAMxB,EAAawB,KAF6B81C,aAbpD,EAAAM,aAA8B,GAC9B,EAAA1lB,MAAgB,EAEhB,EAAA2lB,UAAoB,EAKpB,EAAA/R,KAAe,EACf,EAAAC,KAAe,EAEf,EAAA+R,wBAAkC,EAM9B,EAAKF,aAAa7mD,KAAK,CACnBg+B,EAAG2oB,EACH9qB,EAAG+qB,EACHjjC,MAAO,EACP6e,MAAO,EACPwkB,UAAW,IAEf,EAAKC,gBAEL,EAAKtV,YAAc,SAEnB,EAAK/E,kBAAoB,GAEzB,IAAIQ,EAAY,IAAI7J,KAAKqE,UAhB6B,OAiBtD,EAAK6B,cAAgB2D,EAErB,EAAK8Z,YAAc,IAAI3jB,KAAKmP,SAC5BtF,EAAUvF,SAAS,EAAKqf,aAExB,EAAKC,OAAS,IAAI5jB,KAAKmP,SACvBtF,EAAUvF,SAAS,EAAKsf,QACxB,EAAKA,OAAOj8B,QAAU,EAAKq7B,WAC3B,EAAKa,WAAWT,EAAQC,EAAQ,EAAKzlB,OAKrC,EAAKyD,YAAYlB,MAAMmE,SAAS,EAAK4B,eAErC,EAAK4F,oBAhCiD,E,UAhB9D,e,EAAA,G,EAAA,yCAqDQ,IAAItxC,EAAS/B,KAAK6qD,aAAa9oD,OAC3BspD,EAAkBrrD,KAAK6qD,aAAa9oD,EAAS,GACjD/B,KAAK+4C,MAAQsS,EAAgBrpB,EAC7BhiC,KAAKg5C,MAAQqS,EAAgBxrB,EAC7B7/B,KAAK+wC,eAAiB/wC,KAAK+4C,KAAKh3C,EAChC/B,KAAKgxC,eAAiBhxC,KAAKg5C,KAAKj3C,IA1DxC,mCA6DiB,GACL,GAAgB/B,KAAK8qD,WACrB9qD,KAAK8qD,SAAW,EAChB9qD,KAAKwxC,SACLxxC,KAAK+qD,wBAAyB,KAjE1C,oCAqEkBnxC,GACV5Z,KAAKmrD,OAAOj8B,QAAUtV,IAtE9B,2BAyESurB,GACDnlC,KAAKmlC,OAASA,EAAQ,IAAM95B,KAAK+5B,KA1EzC,6BA6EWkmB,EAAwBC,EAAaC,GACxCxrD,KAAKyqD,KAAKzqD,KAAKmlC,OACf,IAAIkmB,EAAkBrrD,KAAK6qD,aAAa7qD,KAAK6qD,aAAa9oD,OAAS,GACnE/B,KAAKorD,WAAWC,EAAgBrpB,EAAGqpB,EAAgBxrB,EAAG7/B,KAAKmlC,OAC3D,4CAAammB,EAAgBC,EAAIC,KAjFzC,8BAoFY1oD,GAEJ,IAAIwwC,EAAoB,IAAI,EAAcxwC,GACtCgwC,EAAmB,IAAI2Y,EAAazrD,KAAK6qD,aAAa,GAAG7oB,EAAGhiC,KAAK6qD,aAAa,GAAGhrB,EACjF7/B,KAAKuqD,WAAYvqD,KAAK4oC,YAAY31B,YAAaqgC,GAMnD,OALAA,EAAGvwC,cAAH,MAA4B+vC,EAE5BA,EAAGrL,SAASznC,MACZ8yC,EAAGtB,SAEI8B,IA9Ff,8BAiGYvxC,GAEJ,IAAIspD,EAA+BrrD,KAAK6qD,aAAa7qD,KAAK6qD,aAAa9oD,OAAS,GAC5E2pD,EAA8B,CAC9B1pB,EAAGqpB,EAAgBrpB,EAAIjgC,EAASsJ,KAAKi6B,IAAItlC,KAAKmlC,OAC9CtF,EAAGwrB,EAAgBxrB,EAAI99B,EAASsJ,KAAKk6B,IAAIvlC,KAAKmlC,OAC9Cxd,MAAO3nB,KAAK21C,YACZnP,MAAOxmC,KAAKm2C,YACZ6U,UAAWhrD,KAAK41C,aAGpB51C,KAAK6qD,aAAa7mD,KAAK0nD,GAEnB1rD,KAAK8qD,SACL9qD,KAAKwxC,SAEmB,MAApBxxC,KAAK21C,cACL31C,KAAKkrD,YAAYtR,OAAOyR,EAAgBrpB,EAAGqpB,EAAgBxrB,GAC3D7/B,KAAKkrD,YAAYtU,UAAU52C,KAAK41C,YAAa51C,KAAK21C,YAAa31C,KAAKm2C,YAAa,IACjFn2C,KAAKkrD,YAAYrR,OAAO6R,EAAe1pB,EAAG0pB,EAAe7rB,IAIjE7/B,KAAK8wC,iBAAkB,EACvB9wC,KAAK+qD,wBAAyB,EAC9B/qD,KAAKirD,kBACLjrD,KAAKorD,WAAWM,EAAe1pB,EAAG0pB,EAAe7rB,EAAG7/B,KAAKmlC,SA3HjE,iCA+HenD,EAAWnC,EAAWsF,GAC7BnlC,KAAKmrD,OAAOh3C,QACZnU,KAAKmrD,OAAOvU,UAAU,EAAG,SAAU,EAAG,IACtC52C,KAAKmrD,OAAOvR,OAAO5X,EAAGnC,GAEtB,IAAI8rB,EAAKtgD,KAAKi6B,IAAIH,GACdymB,EAAKvgD,KAAKk6B,IAAIJ,GAEd0mB,GAAOxgD,KAAKk6B,IAAIJ,GAChB2mB,EAAMzgD,KAAKi6B,IAAIH,GAMnBnlC,KAAKmrD,OAAOvR,OAAO5X,EAJC,GAIG2pB,EAAoB9rB,EAJvB,GAI2B+rB,GAC/C5rD,KAAKmrD,OAAOtR,OAAO7X,EAJE,GAIE2pB,EAHD,GAGuBE,EAAuBhsB,EAJ/C,GAImD+rB,EAHlD,GAGwEE,GAC9F9rD,KAAKmrD,OAAOtR,OAAO7X,EALE,GAKE2pB,EAJD,GAIuBE,EAAuBhsB,EAL/C,GAKmD+rB,EAJlD,GAIwEE,GAC9F9rD,KAAKmrD,OAAOtR,OAAO7X,EAPC,GAOG2pB,EAAoB9rB,EAPvB,GAO2B+rB,KAjJvD,+BAsJQ,IAAI7W,EAAmB/0C,KAAKkrD,YAEF,MAAtBlrD,KAAKytC,eACLsH,EAAI,IAAIxN,KAAKmP,SACb12C,KAAKytC,cAAgBsH,EACrB/0C,KAAK4oC,YAAYlB,MAAMmE,SAASkJ,IAGhCA,EAAE5gC,QAGgB,MAAlBnU,KAAK01C,WAAqB11C,KAAK8qD,UAC/B/V,EAAE4B,UAAU32C,KAAK01C,UAAW11C,KAAK81C,WAGrC,IAAIiW,EAAa/rD,KAAK6qD,aAAa,GACnC9V,EAAE6E,OAAOmS,EAAW/pB,EAAG+pB,EAAWlsB,GAE9B7/B,KAAK8qD,UACL/V,EAAE6B,UAAU52C,KAAK41C,YAAa51C,KAAK21C,YAAa31C,KAAKm2C,YAAa,IAEtE,IAAK,IAAIj+C,EAAI,EAAGA,EAAI8H,KAAK6qD,aAAa9oD,OAAQ7J,IAAK,CAC/C,IAAI8zD,EAAkBhsD,KAAK6qD,aAAa3yD,GACxB,MAAZ8zD,EAAGrkC,OACE3nB,KAAK8qD,UACN/V,EAAE6B,UAAUoV,EAAGhB,UAAWgB,EAAGrkC,MAAOqkC,EAAGxlB,MAAO,IAElDuO,EAAE8E,OAAOmS,EAAGhqB,EAAGgqB,EAAGnsB,IAElBkV,EAAE6E,OAAOoS,EAAGhqB,EAAGgqB,EAAGnsB,GAItB7/B,KAAK8qD,UACL/V,EAAE+B,YAGgB,MAAlB92C,KAAK01C,WAAqB11C,KAAK8qD,UAC/B/V,EAAEgC,YA5Ld,mCAgMiBvJ,GAENA,aAAuBie,GAAgBje,EAAYud,wBAClDvd,EAAYye,yBAGbjsD,KAAK+qD,wBACJ/qD,KAAKisD,yBAGT,IAAIxa,EAAKzxC,KAAKytC,cAAciE,YACxBC,EAAMnE,EAAYC,cAAciE,YAEpC,QAAID,EAAG9c,KAAOgd,EAAIzc,OAASyc,EAAIhd,KAAO8c,EAAGvc,UAErCuc,EAAG1R,IAAM4R,EAAIC,QAAUD,EAAI5R,IAAM0R,EAAGG,UAEpCpE,EAAW,OACJA,EAAY4C,aAAapwC,MAGN,MAA1BA,KAAK4wC,mBAA8D,MAAjCpD,EAAYoD,oBAG9C5wC,KAAK8wC,iBAAiB9wC,KAAK6xC,sBAC3BrE,EAAYsD,iBAAiBtD,EAAYqE,sBAEtCxC,GAAsBrvC,KAAK6wC,sBAAuBrD,EAAYqD,2BA3N7E,+CAgOQ7wC,KAAK4wC,kBAAoB5wC,KAAK6qD,aAAaloD,KAAI,SAACqpD,GAAQ,MAAO,CAAChqB,EAAGgqB,EAAGhqB,EAAGnC,EAAGmsB,EAAGnsB,W,6BAhOvF,GAAkC,I,s4BCxC3B,IAAM,GAAb,WAkDI,WAAYqsB,EAAmBp4C,GAC3B,GADyC,WAAd,KAAAA,OA7C/B,KAAAq4C,oBAAgC,GAIhC,KAAAtlD,gBAA0B,EAE1B,KAAAulD,YAA4B,GAC5B,KAAAC,qBAAiC,GACjC,KAAAC,2BAA2D,GAE3D,KAAA5vC,OAAoB,CAAC,GAAI,GAAI,GAAI,IAyBjC,KAAA6vC,oBAAgE,GAChE,KAAAC,oBAAgE,GAUhD,MAARN,GAA6B,MAAblsD,KAAK8T,KAAzB,CAEA9T,KAAKksD,KAAOA,EAEZ,IAAItnB,EAAOsnB,EAAKzzD,KAEZg0D,EAAaC,EAAOC,OAAO/nB,GACb,MAAd6nB,EACAA,EAAa,EAEbA,IAEJC,EAAOC,OAAO/nB,GAAQ6nB,EAElBA,EAAa,IAAG7nB,GAAQ,KAAO6nB,EAAa,KAChDzsD,KAAK4f,IAAM5X,OAAO4kD,IAAIjY,KAAK,CAAE/P,KAAMA,EAAMioB,OAAQ,aACjD7sD,KAAKm9B,MAAQn1B,OAAOk1B,OAAO4vB,YAAYZ,EAAK/rC,KAAM,SAAUngB,KAAK4f,KACjE5f,KAAKm9B,MAAM4vB,cAAc,CAAEC,QAAS,IAEpChtD,KAAKitD,mBAAqBjtD,KAAKm9B,MAAM+vB,0BAErC,IAAIh1C,EAAOlY,KAEXA,KAAKm9B,MAAMgwB,oBAAmB,WAC1B,IAAIC,EAAYl1C,EAAKilB,MAAM+vB,0BAS3B,GAPIE,GAAal1C,EAAK+0C,qBAClB/0C,EAAKg0C,KAAK/a,OAAQ,EAClBj5B,EAAKg0C,KAAKmB,OAAQ,EAClBn1C,EAAKg0C,KAAKoB,iCAAkC,EAC5Cp1C,EAAK+0C,mBAAqBG,IAG1Bl1C,EAAKpE,KAAKoyC,aAAa,CACvB,IAAIqH,EAAoBz5C,EACrBy5C,EAAMC,mBAAqBD,EAAME,KAAK7rD,IACA,MAAlCsW,EAAKg0C,KAAKwB,sBAAgCx1C,EAAKg0C,KAAKyB,iCACnDz1C,EAAKg0C,KAAKyB,+BAAgC,EAC1Cz1C,EAAKg0C,KAAKwB,qBAAuBx1C,EAAKg0C,KAAK/rC,KAC3CjI,EAAKg0C,KAAKmB,OAAQ,EAClBE,EAAMK,eAAeC,YAAY,MAAM,GACvCN,EAAMO,UAAUC,gBAAgBC,6BAChCT,EAAMU,gBAAgBC,qBAAqBh2C,EAAKg0C,OAGpDh0C,EAAKg0C,KAAKyB,+BAAgC,OAhG9D,kEAuGmC1pD,GAE3B,GAA+B,MAA5BjE,KAAK6c,oBAA6B,OAAO,KAFgC,2BAI5E,YAAc7c,KAAK6c,oBAAnB,+CAAuC,KAA/B9V,EAA+B,QACnC,GAAGA,EAAG3G,MAAQlG,EAAUU,cAAgBmM,EAAG3G,MAAQlG,EAAUe,YAAY,4BACrE,YAAqB8L,EAAGf,QAAxB,+CAAgC,KAAxBmoD,EAAwB,QAC5B,GAAyB,MAAtBA,EAAUlqD,UAAyC,MAArBkqD,EAAUx7C,SACpCw7C,EAAUlqD,SAASoF,MAAQpF,EAASq5B,YAAc6wB,EAAUx7C,QAAQtJ,MAAQpF,EAASq5B,WACpF,OAAO6wB,GAJkD,qFALD,kFAgB5E,OAAO,OAvHf,kCAmJgBC,GACR,IAAIlC,EAAOlsD,KAAKksD,KAgBhB,MAfmB,CACftqD,GAAIsqD,EAAKtqD,GACTnJ,KAAMyzD,EAAKzzD,KACX0nB,KAAM+rC,EAAK/rC,KACXutC,qBAAsBxB,EAAKwB,qBAC3BW,eAAgBnC,EAAKmC,eACrBV,8BAA+BzB,EAAKyB,8BACpCW,QAASpC,EAAKoC,QACdC,cAAerC,EAAKqC,cACpBC,wBAAyBtC,EAAKsC,wBAC9BlB,gCAAiCpB,EAAKoB,gCACtCmB,aAAcL,EAAUxsD,GACxB8sD,aAAa,KAjKzB,6CAuK2Bt4B,EAAkC7X,EACrDowC,EAAoCnwC,GAEpC,IAAI4iB,EAAkB,GACtBA,EAAMp9B,KAAKoyB,EAAmB/sB,MAHwC,2BAItE,YAAekV,EAAf,+CAA+B,KAAtBqwC,EAAsB,QACvBxtB,EAAMx8B,QAAQgqD,EAAGvlD,MAAQ,GACzB+3B,EAAMp9B,KAAK4qD,EAAGvlD,OANgD,kFAiBtE,IAPA,IAAIsqB,EAA0B,CAC1ByC,mBAAoBA,EACpB7X,eAAgBA,EAChBowC,gBAAiBA,EACjBnwC,qBAAsBA,GAG1B,MAAiB4iB,EAAjB,eAAwB,CAAnB,IAAI/3B,EAAI,KACLwlD,EAAU7uD,KAAKwsD,oBAAoBnjD,GACxB,MAAXwlD,IACA7uD,KAAKwsD,oBAAoBnjD,GAAQ,GACjCwlD,EAAU7uD,KAAKwsD,oBAAoBnjD,IAEvCwlD,EAAQ7qD,KAAK2vB,MA/LzB,uCAqMqB2J,EAAoBwxB,GACjC9uD,KAAK+uD,mCACuC,MAAxC/uD,KAAKgvD,cAAc1xB,GAAY,IAC/Bt9B,KAAKivD,cAAc3xB,EAAY,GAE/BwxB,GACA9uD,KAAKkvD,+BA3MjB,oCA+MkB7lD,GAAqC,wDAE/C,IAF+C,IAEtCnR,EAAI,EAAGA,EAAI8H,KAAKosD,YAAYrqD,OAAQ7J,IAAK,CAC9C,IAAI+5C,EAAIjyC,KAAKosD,YAAYl0D,GACzB,GAAI+5C,EAAE5oC,MAAQA,EAKV,OAJArJ,KAAKosD,YAAY54C,OAAOtb,EAAG,GACR,MAAf+5C,EAAEzuB,YACFyuB,EAAEzuB,UAAU2rC,gBAAa7mD,GAEtB2pC,EAIf,OAAO,OA5Nf,oCAgOkB5oC,EAAcC,GAExB,IAAI6lD,EAAyB,CACzB9lD,KAAMA,EACNC,OAAQA,EACRka,UAAW,MAMf,OAHAxjB,KAAKovD,kBAAkBD,GACvBnvD,KAAKosD,YAAYpoD,KAAKmrD,GAEfA,IA3Of,wCA+OsBA,EAAwBE,G,MAEV,MAAxBF,EAAW3rC,YACX2rC,EAAW3rC,UAAU2rC,gBAAa7mD,GAGnB,MAAf+mD,IAAqBA,EAAcrvD,KAAKsvD,eAE5C,IAAIC,EAA8B,KAC9BC,EAA0B,IAT+B,uBAW7D,YAAoBH,EAApB,+CAAiC,KAAxB5tD,EAAwB,+BAC7B,YAAsBA,EAAQ4C,WAA9B,+CAA0C,KAAjCmf,EAAiC,QAElCna,EAA0B,QAAtB,EAAGma,aAAS,EAATA,EAAWvf,gBAAQ,eAAEoF,KAChC,GAAY,MAARA,GAAgBA,GAAQ8lD,EAAW9lD,KAAM,CACrCA,EAAO8lD,EAAW9lD,KAAOmmD,IACzBD,EAAmB/rC,EACnBgsC,EAAkBnmD,EAAO8lD,EAAW9lD,MAGxC,QAVqB,oFAX4B,kFA4B7D8lD,EAAW3rC,UAAY+rC,EACC,MAApBA,IACAA,EAAiBJ,WAAaA,KA7Q1C,oCAwRQ,IAAIE,EAAyB,GAM7B,GAJwB,MAApBrvD,KAAK2c,aACL0yC,EAAYrrD,KAAKhE,KAAK2c,aAGJ,MAAlB3c,KAAKoS,UAAmB,4BAExB,YAAiBpS,KAAKoS,UAAUiP,SAAhC,+CAA0C,KAAjCjhB,EAAiC,QACtC,GAAIA,aAAgB,EAAO,CACoB,MAAvCA,EAAKiG,gCACLgpD,EAAYrrD,KAAK5D,EAAKiG,gCAFH,2BAIvB,YAAmBjG,EAAK4F,QAAxB,+CAAiC,KAAxBtE,EAAwB,QACP,MAAlBA,EAAOD,SACP4tD,EAAYrrD,KAAKtC,EAAOD,UANT,kFASgC,MAAnDrB,EAAKgG,YAAYC,gCACjBgpD,EAAYrrD,KAAK5D,EAAKgG,YAAYC,gCAVf,2BAYvB,YAAmBjG,EAAKgG,YAAYJ,QAApC,+CAA6C,KAApC,EAAoC,QACnB,MAAlB,EAAOvE,SACP4tD,EAAYrrD,KAAK,EAAOvC,UAdT,qFAHP,mFAyB5B,OAAO4tD,IAvTf,mDA6TQrvD,KAAK+uD,mCAEL,IAAIU,EAAqD,GAJnC,uBAMtB,YAAuBzvD,KAAKosD,YAA5B,+CAAyC,KAAhC+C,EAAgC,QACrCM,EAAYzrD,KAAK,CACbqE,MAAO,CAAE0X,gBAAiBovC,EAAW9lD,KAAM4W,cAAekvC,EAAW9lD,KAAM2W,YAAa,EAAGE,UAAW,GACtGwvC,QAAS,CACLC,aAAa,EAAM93B,UAAW,yBAC9B+3B,cAAe,CACXjoC,MAAO,UACP1jB,SAAU+D,OAAOk1B,OAAO2yB,kBAAkBC,MAE9CC,QAAS,CACLpoC,MAAO,UACP1jB,SAAU+D,OAAOk1B,OAAO8yB,gBAAgBC,QAE5CC,gBAAiB,uBACjBC,WAAYnoD,OAAOk1B,OAAOkzB,uBAAuBC,6BAGrDlB,WAAYA,KAvBE,kFA2BtBnvD,KAAKqsD,qBAAuBrsD,KAAK8T,KAAKw8C,kBAAkBC,iBAAiBvwD,KAAKqsD,qBAAsBoD,GAEpGzvD,KAAKssD,2BAA6B,GAClC,IAAK,IAAIp0D,EAAI,EAAGA,EAAI8H,KAAKqsD,qBAAqBtqD,OAAQ7J,IAClD8H,KAAKssD,2BAA2BtsD,KAAKqsD,qBAAqBn0D,IAAM8H,KAAKosD,YAAYl0D,KA1V7F,yDA+VoC,2BAC5B,YAAuB8H,KAAK8T,KAAKw8C,kBAAkBE,WAAWC,oBAA9D,+CAAmF,KAA1EC,EAA0E,QAC/E,GAA0C,qBAAtCA,EAAWhB,QAAQQ,gBAAwC,CAC3D,IAAIf,EAAanvD,KAAKssD,2BAA2BoE,EAAW9uD,IAC1C,MAAdutD,IACAA,EAAW9lD,KAAOqnD,EAAWroD,MAAM0X,mBALnB,qFA/VpC,gDA0W8B1W,EAAcC,GACpC,OAA4B,MAAxBtJ,KAAKuc,gBACE,OAGPlT,EAAOrJ,KAAKuc,gBAAgBtC,WAAW5Q,MACvCA,GAAQrJ,KAAKuc,gBAAgBtC,WAAW5Q,MAAQC,EAAStJ,KAAKuc,gBAAgBtC,WAAW3Q,UAEzFD,EAAOrJ,KAAKuc,gBAAgBtC,WAAW5Q,KACvCC,EAAStJ,KAAKuc,gBAAgBtC,WAAW3Q,OAAS,GAG/CtJ,KAAKuc,gBAAgBhB,oBAAoBlS,EAAMC,MAtX9D,sCA2XQ,IAAIye,EAAK,EAFA,uBAGT,YAAe/nB,KAAK0c,OAApB,+CAA4B,SACrB5L,SAAQ,SAAAhG,GAAK,OAAIid,GAAqB,SAAfjd,EAAM4Z,MAAmB,EAAI,MAJlD,kFAQT,OAAOqD,IAjYf,uCAsYQ,OAAwB,MAApB/nB,KAAK2c,cAC0B,MAA/B3c,KAAK2c,YAAYtY,aACdrE,KAAK2c,YAAYtY,WAAWtC,OAAS,GAA2C,GAAtC/B,KAAK2c,YAAYtY,WAAWtC,QAAe/B,KAAK2c,YAAYtY,WAAW,GAAGjE,MAAQlG,EAAUkjB,mBAxYrJ,sDA6YQ,OAAOpd,KAAKm9B,MAAMhxB,SAASnE,OAAOk1B,OAAOyzB,oBAAoBC,IAAI,KA7YzE,4CAiZ0B3sD,EAAwB0pB,GAC1C,IAAIU,EAAqCruB,KAAKusD,oBAAoBtoD,EAASoF,MACvD,MAAhBglB,IACAA,EAAe,GACfruB,KAAKusD,oBAAoBtoD,EAASoF,MAAQglB,GAE9CA,EAAarqB,KAAK,CACdC,SAAUA,EACV0pB,QAASA,MAzZrB,wCA8ZsBtkB,EAAcC,GAE5B,IAAIunD,EAAkB7wD,KAAKusD,oBAAoBljD,GAC/C,GAAuB,MAAnBwnD,EAAyB,OAAO,KAEpC,IAAIC,EAAoC,KALE,uBAM1C,YAAcD,EAAd,+CAA+B,KAAtB72D,EAAsB,QAC3B,GAAIsP,GAAUtP,EAAEiK,SAASqF,QAAUA,GAAUtP,EAAEiK,SAASqF,OAAStP,EAAEiK,SAASlC,OAAQ,CAEhF,IAAI4rB,GADJmjC,EAAgB92D,GACY2zB,QAC5B,GAAIA,aAAmB5sB,EACnB,MAAO,CAAEX,KAAMutB,EAAS/sB,UAAU,GAGtC,IAAIR,EAAcutB,aAAmBhuB,EAAQguB,EAAUA,EAAQvtB,KAE/D,OAAI0wD,EAAc7sD,SAASlC,OAAS,GAAqB,MAAhB4rB,EAAQvtB,KAEtC,CAAEA,KAAYA,EAAMQ,UAAU,GAGlC,CAAER,KAAMA,EAAMQ,SAAUkwD,EAAc7sD,SAASlC,OAAS,KArB7B,kFA0B1C,OAAO,OAxbf,2CA2byBsH,EAAcC,GAE/B,IAAIunD,EAAkB7wD,KAAKusD,oBAAoBljD,GAC/C,GAAuB,MAAnBwnD,EAAyB,OAAO,KAEpC,IAAIE,EAAwC,KALC,uBAM7C,YAAcF,EAAd,+CAA+B,KAAtB72D,EAAsB,QACvBsP,GAAUtP,EAAEiK,SAASqF,QAAUA,EAAStP,EAAEiK,SAASqF,OAAStP,EAAEiK,SAASlC,QAEnE/H,EAAEiK,SAASlC,OAAS,IACK,MAArBgvD,GAGG/2D,EAAE2zB,mBAAmB5sB,GAAUgwD,EAAkBpjC,mBAAmB,KAFvEojC,EAAoB/2D,IAXS,kFAqB7C,OAA4B,MAArB+2D,EAA4B,KAAYA,EAAkBpjC,UAhdzE,6BAodQ,IAAIr1B,EAAI,IAAIo0D,EAAO1sD,KAAKksD,KAAMlsD,KAAK8T,MACnCxb,EAAE6kC,MAAQn9B,KAAKm9B,MACf7kC,EAAEqkB,YAAc3c,KAAK2c,YACrB3c,KAAK2c,YAAc,KACnBrkB,EAAEikB,gBAAkBvc,KAAKuc,gBACzBvc,KAAKuc,gBAAkB,KACvBjkB,EAAE8Z,UAAYpS,KAAKoS,UAEnB9Z,EAAE04D,YAAchxD,KAAKgxD,YACrB14D,EAAE24D,2BAA6BjxD,KAAKixD,2BAEpC34D,EAAE8zD,YAAcpsD,KAAKosD,YACrBpsD,KAAKosD,YAAc,GACnB,IAAI8E,EAAW54D,EAAEg3D,cAEjB4B,EAASpgD,SAAQ,SAAC9W,GAAD,OAAOA,EAAE/B,OAASK,KAhBnC,2BAkBA,YAAcA,EAAE8zD,YAAhB,+CAA6B,KAApBna,EAAoB,QACzBjyC,KAAKosD,YAAYpoD,KAAK,CAClBqF,KAAM4oC,EAAE5oC,KACRC,OAAQ2oC,EAAE3oC,OACVka,UAAW,OAGflrB,EAAE82D,kBAAkBnd,EAAGif,IAzB3B,kFA+BA,OAFAlxD,KAAKksD,KAAK/a,OAAQ,EAEX74C,IAlff,8BAufQ0H,KAAKusD,oBAAsB,GAEV,MAAbvsD,KAAKksD,MAAgBlsD,KAAKksD,KAAK/a,QAE/BnxC,KAAKqc,UAAY,KACjBrc,KAAK0c,OAAO,GAAK,GAGjB1c,KAAK0c,OAAO,GAAK,IAMrB1c,KAAK0c,OAAO,GAAK,GACjB1c,KAAK2wB,UAAY,GACjB3wB,KAAKoS,UAAY,IAAI++C,GAGrBnxD,KAAK0c,OAAO,GAAK,GACjB1c,KAAKuc,gBAAkB,IAAI,GAAY,KAAM,CAAElT,KAAM,EAAGC,OAAQ,EAAGvH,OAAQ,GAAK,CAAEsH,KAAM,IAAQC,OAAQ,EAAGvH,OAAQ,IACnH/B,KAAK2c,YAAc,KAEnB3c,KAAKwsD,oBAAsB,GAC3BxsD,KAAKoxD,iBAAmB,IAAItxD,MA/gBpC,kCAmhBa,2BAEL,YAAeE,KAAK0c,OAApB,+CAA4B,CACxB,GADwB,QAClBtF,MAAK,SAAAtM,GAAK,MAAmB,SAAfA,EAAM4Z,SACtB,OAAO,GAJV,kFAWL,OAAO,IA9hBf,mDAoiBQ,IAAI2sC,EAAgB,GAFE,uBAItB,YAAerxD,KAAK0c,OAApB,+CAA4B,KAAnB40C,EAAmB,QACxBD,EAAOA,EAAK7pD,OAAO8pD,IALD,kFAQtBD,EAAKE,MAAK,SAACrqD,EAAG+qC,GACV,OAAI/qC,EAAEjD,SAASoF,KAAO4oC,EAAEhuC,SAASoF,KACtB,EAEP4oC,EAAEhuC,SAASoF,KAAOnC,EAAEjD,SAASoF,MACrB,EAERnC,EAAEjD,SAASqF,QAAU2oC,EAAEhuC,SAASqF,OACzB,GAEH,KAGZ,IAAK,IAAIpR,EAAI,EAAGA,EAAIm5D,EAAKtvD,OAAS,EAAG7J,IAAK,CACtC,IAAIs5D,EAAKH,EAAKn5D,GACVu5D,EAAKJ,EAAKn5D,EAAI,GACds5D,EAAGvtD,SAASoF,MAAQooD,EAAGxtD,SAASoF,MAAQmoD,EAAGvtD,SAASqF,OAAS,GAAKmoD,EAAGxtD,SAASqF,SAC7B,GAA9CtJ,KAAK0xD,kBAAkBF,EAAG9sC,MAAO+sC,EAAG/sC,OACnC2sC,EAAK79C,OAAOtb,EAAI,EAAG,GAEnBm5D,EAAK79C,OAAOtb,EAAG,GAEnBA,KAIR,OAAOm5D,IApkBf,wCAukBsBM,EAAoBC,GAClC,MAAa,SAAVD,EAA0B,EAChB,SAAVC,EAA0B,EAChB,WAAVD,EAA4B,EAClB,WAAVC,EAA4B,EACxB,IA5kBf,0C,UAglBYC,EAAoD,QAA1C,EAA0B,QAA1B,EAAY,QAAZ,EAAG7xD,KAAKksD,YAAI,eAAE4F,oBAAY,eAAEC,sBAAc,eAAE36C,KAAK,6BAC/D,GAAkB,MAAdy6C,IAEJA,EAAWz6C,KAAK,mBAAmBrE,SAE/B/S,KAAKgxD,aAAa,CAClB,IAAIgB,EAAkBr4C,OAAO,oHAC7Bk4C,EAAWx6C,OAAO26C,GAClB,IAAI95C,EAAOlY,KACXgyD,EAAgBryB,GAAG,aAAa,SAACC,GAAD,OAAOA,EAAEU,qBACzC0xB,EAAgBryB,GAAG,SAAS,SAACC,GACzBA,EAAEU,kBAEFpoB,EAAKpE,KAAKm+C,gBAAgB/5C,GAE1BA,EAAKpE,KAAKC,iBAAiBunB,eA/lB3C,uCA4H2BmK,EAAa3xB,GAmBhC,OAFgB,IAAI44C,EAfL,CACXj0D,KAAMgtC,EAAEhtC,KACR0nB,KAAMslB,EAAEtlB,KACRutC,qBAAsBjoB,EAAEioB,qBACxBW,eAAgB5oB,EAAE4oB,eAClBV,+BAA+B,EAC/Bxc,OAAO,EACPkc,OAAO,EACPiB,QAAS7oB,EAAE6oB,QACX1sD,GAAI6jC,EAAE7jC,GACN2sD,cAAe9oB,EAAE8oB,cACjBC,wBAAyB/oB,EAAE+oB,wBAC3BlB,gCAAiC7nB,EAAE6nB,iCAGRx5C,OA7IvC,KAEW,GAAAo+C,aAAuB,EA6CvB,GAAAvF,OAAqC,GAyjBzC,IAAM,GAAb,YACI,WAAY74C,GAAc,M,IAAA,kB,EAEtB,U,EAAA,gBAAM,CAAErb,KAAM,cAAe0nB,KAAM,GAAIutC,qBAAsB,KAAMW,eAAgB,KAAMV,+BAA+B,EAAOxc,OAAO,EAAOkc,OAAO,EAAMiB,QAAS,EAAIhB,iCAAiC,GAAOx5C,K,gDAE1MjN,gBAAiB,EACtB,EAAK8V,YAAc,KAEnB,EAAKxI,QAGL,EAAK/B,UAAU+/C,QAAQvgD,IACvB,EAAKQ,UAAU+/C,QAAQhkD,IACvB,EAAKiE,UAAU+/C,QAAQnjD,IACvB,EAAKoD,UAAU+/C,QAAQljD,IACvB,EAAKmD,UAAU+/C,QAAQliD,IACvB,EAAKmC,UAAU+/C,QAAQ7iD,IACvB,EAAK8C,UAAU+/C,QAAQ/mD,IACvB,EAAKgH,UAAU+/C,QAAQ,IACvB,EAAK//C,UAAU+/C,QAAQtgD,IAEvB,EAAKO,UAAU+/C,QAAQrgD,IACvB,EAAKM,UAAU+/C,QAAQpgD,IACvB,EAAKK,UAAU+/C,QAAQngD,IACvB,EAAKI,UAAU+/C,QAAQlgD,IACvB,EAAKG,UAAU+/C,QAAQjgD,IAGvB,EAAKE,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QAEvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QAEvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QAEV,EAAK//C,UAAUC,QAAQ,SAAU+/C,oBAG9C,EAAKhgD,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QAEvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QACvB,EAAK//C,UAAU+/C,QAAQ,IAAI,GAAJ,QAIvB/mD,GAAoBnT,OAApB,MAhGsB,EAD9B,O,mOAAA,wDA4GuB,2BACf,YAAiB+H,KAAKoS,UAAUiP,SAAhC,+CAA0C,SACjC/Z,uBAFM,uFA5GvB,GAAgC,IAiTnB6pD,GAAb,mCAEI,KAAA9vC,SAAmB,GACnB,KAAAgxC,QAA6B,IAAIvyD,IAHrC,2CAKYM,GACJJ,KAAKqhB,SAASrd,KAAK5D,GACnBJ,KAAKqyD,QAAQjvD,IAAIhD,EAAKhG,WAAYgG,KAP1C,8BAWQJ,KAAKqhB,SAAStf,OAAS,EACvB/B,KAAKqyD,QAAQl+C,UAZrB,8BAeY/Z,GACJ,OAAO4F,KAAKqyD,QAAQt5D,IAAIqB,OAhBhC,K,+MCl/BO,IAAM,GAAb,yB,4FAAA,S,UAAA,O,EAAA,G,EAAA,+BAEQ4F,KAAKsyD,aACLtyD,KAAKuyD,YACLvyD,KAAKwyD,2BAJb,mCASQ74B,KAEA3xB,OAAOk1B,OAAOu1B,YAAY,oBAAqB,CAC3CC,KAAM,UACNC,SAAS,EACTC,MAAO,CACH,CAAE3hC,MAAO,SAAU4hC,WAAY,SAAU9T,UAAW,UACpD,CAAE9tB,MAAO,QAAS4hC,WAAY,SAAU9T,UAAW,eACnD,CAAE9tB,MAAO,QAAS4hC,WAAY,UAC9B,CAAE5hC,MAAO,SAAU4hC,WAAY,UAC/B,CAAE5hC,MAAO,OAAQ4hC,WAAY,UAC7B,CAAE5hC,MAAO,aAAc4hC,WAAY,UACnC,CAAE5hC,MAAO,YAAa4hC,WAAY,SAAU9T,UAAW,QACvD,CAAE9tB,MAAO,UAAW4hC,WAAY,SAAU9T,UAAW,SAGzD+T,OAAQ,CACJ,oBAAqB,aAI7B9qD,OAAOk1B,OAAO61B,SAAS,qBAEvB/qD,OAAOk1B,OAAO1jC,OAAOmgB,OAAO,cAAc,GAAI,CAC1Cq5C,SAAU,aAjCtB,+CAwCQ,IACIC,EAAyB,IAAI,GAAW,MACxC/6C,EAAOlY,KAEPqhB,EAAW4xC,EAAW7gD,UAAUiP,SAAStX,QAAO,SAAC7C,GAAD,OAA6B,MAAhBA,EAAE9M,cAC9Dm3D,MACG,SAACrqD,EAAS+qC,GAAV,OAAsB/qC,EAAE9M,WAAW2W,cAAckhC,EAAE73C,eAG3DinB,EAAStX,QAAO,SAAC3J,GAAD,OAAUA,aAAgB,KAAWA,aAAgB,OAAO0Q,SAAQ,SAAC1Q,EAAY6B,GAC7F,IAAIixD,EAAYv5C,OAAO,8BAAgCvZ,EAAKhG,WAAa,UACzEuf,OAAO,YAAYtC,OAAO67C,GAC1BA,EAAUvzB,GAAG,SAAS,WAClBznB,EAAKi7C,YAAY/yD,SAIzBihB,EAAStX,QAAO,SAAC3J,GAAD,OAAUA,aAAgB,KAAW0Q,SAAQ,SAAC1Q,EAAY6B,GACtE,IAAIixD,EAAYv5C,OAAO,8BAAgCvZ,EAAKhG,WAAa,UACzEuf,OAAO,eAAetC,OAAO67C,GAC7BA,EAAUvzB,GAAG,SAAS,WAClBznB,EAAKi7C,YAAY/yD,SAIzBihB,EAAStX,QAAO,SAAC3J,GAAD,OAAUA,aAAgB,MAAM0Q,SAAQ,SAAC1Q,EAAY6B,GACjE,IAAIixD,EAAYv5C,OAAO,8BAAgCvZ,EAAKhG,WAAa,UACzEuf,OAAO,UAAUtC,OAAO67C,GACxBA,EAAUvzB,GAAG,SAAS,WAClBznB,EAAKi7C,YAAY/yD,WArEjC,kCA4EgBA,GACR,IAAIgzD,EAAQz5C,OAAO,SACnBy5C,EAAMxrC,QAEN,IAAIxuB,EAA8BgH,EAC9BizD,EAAW15C,OAAO,+BACtBy5C,EAAM/7C,OAAOg8C,GACbrrD,OAAOk1B,OAAOo2B,SAAS32B,GAAuBvjC,EAAG,IAAI,GAAO,SAAU,IAAIm6D,MACtE,SAACvyB,GAAUqyB,EAASh8C,OAAOsC,OAAOqnB,OAGnC5nC,aAAa,GAAO4G,KAAKwzD,iBAAiBp6D,GAC7C4G,KAAKyzD,YAAYr6D,GACdA,aAAa,GAAO4G,KAAK0zD,eAAet6D,KAzFnD,uCA6FqBA,GACb,IAAIg6D,EAAQz5C,OAAO,SACnBy5C,EAAM/7C,OAAOsC,OAAO,6DAGpB,IAFA,IAAI3T,EAAU5M,EAAE4M,QAAQ+D,QAAO,SAACzR,GAAD,OAAOA,EAAE8I,iBAEhB,GAAlB4E,EAAQjE,QAA8B,MAAf3I,EAAE+J,WAC3B/J,EAAIA,EAAE+J,UACN6C,EAAUA,EAAQwB,OAAOpO,EAAEmP,WAAW/E,EAAWyG,WAAWF,QAAO,SAACzR,GAAD,OAAOA,EAAE8I,kBAKhF,GAFA4E,EAAQurD,MAAK,SAACrqD,EAAG+qC,GAAJ,OAAU/qC,EAAE9M,WAAW2W,cAAckhC,EAAE73C,eAE/B,GAAlB4L,EAAQjE,OACPqxD,EAAM/7C,OAAOsC,OAAO,2CACjB,4BACH,IADG,IACH,EADG,iBACKjY,EADL,QAEK2xD,EAAW15C,OAAOA,OAAO,kCAC7By5C,EAAM/7C,OAAOg8C,GACbrrD,OAAOk1B,OAAOo2B,SAAS32B,GAAuBj7B,EAAQ,IAAI,GAAO,SAAU,IAAI6xD,MAC3E,SAACvyB,GAAUqyB,EAASh8C,OAAOsC,OAAOqnB,OAGX,MAAxBt/B,EAAO3B,eAAiD,IAAxB2B,EAAO3B,eACtCqzD,EAAM/7C,OAAOsC,OAAO,iCAAmCjY,EAAO3B,cAAgB,YARtF,EAAkBiG,EAAlB,+CAA0B,IADvB,sFA3Gf,kCA0HgB5M,GACR,IAAIg6D,EAAQz5C,OAAO,SACnBy5C,EAAM/7C,OAAOsC,OAAO,mDACpB,IAAI3T,EAAU5M,EAAEmP,WAAW/E,EAAWyG,WAAWF,QAAO,SAACzR,GAAD,OAAQA,EAAE8I,iBAOlE,GANGhI,aAAa,GAA0B,MAAjBA,EAAEgN,cACvBJ,EAAUA,EAAQwB,OAAOpO,EAAEgN,YAAYmC,WAAW/E,EAAWyG,WAAWF,QAAO,SAACzR,GAAD,OAAQA,EAAE8I,mBAG7F4E,EAAQurD,MAAK,SAACrqD,EAAG+qC,GAAJ,OAAU/qC,EAAE9M,WAAW2W,cAAckhC,EAAE73C,eAE/B,GAAlB4L,EAAQjE,OACPqxD,EAAM/7C,OAAOsC,OAAO,2CACjB,4BACH,IADG,IACH,EADG,iBACKjY,EADL,QAEK2xD,EAAW15C,OAAOA,OAAO,kCAC7By5C,EAAM/7C,OAAOg8C,GACbrrD,OAAOk1B,OAAOo2B,SAAS32B,GAAuBj7B,EAAQ,IAAI,GAAO,SAAU,IAAI6xD,MAC3E,SAACvyB,GAAUqyB,EAASh8C,OAAOsC,OAAOqnB,OAGX,MAAxBt/B,EAAO3B,eAAiD,IAAxB2B,EAAO3B,eACtCqzD,EAAM/7C,OAAOsC,OAAO,iCAAmCjY,EAAO3B,cAAgB,YARtF,EAAkBiG,EAAlB,+CAA0B,IADvB,sFAtIf,qCAqJmB5M,GACX,IAAIg6D,EAAQz5C,OAAO,SACnBy5C,EAAM/7C,OAAOsC,OAAO,uDACpB,IAAItW,EAAajK,EAAEyO,cAAcrE,EAAWyG,WAO5C,GANG7Q,aAAa,GAA0B,MAAjBA,EAAEgN,cACvB/C,EAAaA,EAAWmE,OAAOpO,EAAEgN,YAAYyB,cAAcrE,EAAWyG,aAG1E5G,EAAWkuD,MAAK,SAACrqD,EAAG+qC,GAAJ,OAAU/qC,EAAE9M,WAAW2W,cAAckhC,EAAE73C,eAE/B,GAArBiJ,EAAWtB,OACVqxD,EAAM/7C,OAAOsC,OAAO,2CACjB,4BACH,IADG,IACH,EADG,iBACK7R,EADL,QAEKurD,EAAW15C,OAAOA,OAAO,kCAC7By5C,EAAM/7C,OAAOg8C,GACbrrD,OAAOk1B,OAAOo2B,SAAS32B,GAAuB70B,EAAW,IAAI,GAAO,SAAU,IAAIyrD,MAC9E,SAACvyB,GAAUqyB,EAASh8C,OAAOsC,OAAOqnB,OAGR,MAA3Bl5B,EAAU/H,eAAoD,IAA3B+H,EAAU/H,eAC5CqzD,EAAM/7C,OAAOsC,OAAO,iCAAmC7R,EAAU/H,cAAgB,YARzF,EAAqBsD,EAArB,+CAAgC,IAD7B,sFAjKf,kCAiLQuO,GAAkB+hD,OAClBxlD,GAAiBwlD,OACjB3kD,GAAmB2kD,OACnB1kD,GAAoB0kD,OACpBrkD,GAAqBqkD,OACrBvoD,GAAoBuoD,OACpB1jD,GAAkB0jD,Y,6BAvL1B,KA4LAh6C,QAAO,WAGCojC,OAAO6W,QAAQC,OAAO,CAAEC,MAAO,CAAE,GAAM,8BAEvC/W,OAAO6W,QAAQC,OAAO,CAClB,SAAU,CACNE,mBAAoB,CAChB,IAAK,OAGbC,uBAAwB,CAAC,2BAI7BjX,OAAO6W,QAAQ,CAAC,0BAA0B,YAEtC,IAAI,IAASt4B","file":"javaOnline-apiDoc.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export enum TokenType {\r\n    identifier,\r\n    // constants\r\n    integerConstant,\r\n    floatingPointConstant,\r\n    booleanConstant,\r\n    stringConstant,\r\n    charConstant,\r\n    true,\r\n    false,\r\n    // keywords\r\n    keywordPrint,\r\n    keywordPrintln,\r\n    keywordClass,\r\n    keywordThis,\r\n    keywordSuper,\r\n    keywordNew,\r\n    keywordInterface,\r\n    keywordEnum,\r\n    keywordVoid,\r\n    keywordAbstract,\r\n    keywordPublic,\r\n    keywordProtected,\r\n    keywordPrivate,\r\n    keywordTransient,\r\n    keywordStatic,\r\n    keywordExtends,\r\n    keywordImplements,\r\n    keywordWhile,\r\n    keywordDo,\r\n    keywordFor,\r\n    keywordSwitch,\r\n    keywordCase,\r\n    keywordDefault,\r\n    keywordIf,\r\n    keywordThen,\r\n    keywordElse,\r\n    keywordReturn,\r\n    keywordBreak,\r\n    keywordContinue,\r\n    keywordNull,\r\n    keywordFinal,\r\n    keywordInstanceof,\r\n    // keywordInt,\r\n    // keywordBoolean,\r\n    // keywordString,\r\n    // keywordFloat,\r\n    // keywordChar,\r\n\r\n    // brackets\r\n    leftBracket, // ()\r\n    rightBracket,\r\n    leftSquareBracket, // []\r\n    rightSquareBracket,\r\n    leftCurlyBracket, // {}\r\n    rightCurlyBracket,\r\n    leftRightSquareBracket, // []\r\n    \r\n    // operators\r\n    doubleMinus, doublePlus,\r\n\r\n    // binary operators\r\n    dot, //.\r\n    modulo,\r\n    minus, plus, multiplication, division,\r\n    singleQuote, doubleQuote, // ', \"\r\n    lower, greater, lowerOrEqual, greaterOrEqual, \r\n    equal, // ==\r\n    notEqual, // !=\r\n    assignment, // =\r\n    plusAssignment, // +=\r\n    minusAssignment, // -=\r\n    multiplicationAssignment, // *=\r\n    divisionAssignment, // /=\r\n    moduloAssignment, // /%=\r\n    and, or,   // &&, ||, !\r\n    ampersand, // &\r\n    ternaryOperator,\r\n    colon, //:\r\n    ellipsis, // ...\r\n\r\n    not,\r\n    \r\n    // semicolon\r\n    semicolon, // ;\r\n\r\n    // comma\r\n    comma, // ,\r\n\r\n    // backslash\r\n    backslash,\r\n\r\n    // @\r\n    at,\r\n\r\n    // whitespace\r\n    space,\r\n\r\n    tab,\r\n\r\n    // newline\r\n    newline,\r\n\r\n    // line feed\r\n    linefeed,\r\n\r\n    // only lexer-internal\r\n    identifierChar,  // none of the special chars above a..zA..Z_Äö...\r\n\r\n    // Comment\r\n    comment,\r\n\r\n    // used by parser\r\n    negation, \r\n    referenceElement, // for arrays\r\n\r\n    endofSourcecode, // will be generated after sourcecode end\r\n    \r\n    // Program statement types:\r\n    binaryOp, // +, -, *, <=, ...\r\n    unaryOp, // ! and - \r\n    localVariableDeclaration,\r\n    heapVariableDeclaration,\r\n    pushLocalVariableToStack, // push value of a local variable to stack\r\n    popAndStoreIntoVariable,\r\n    pushFromHeapToStack, // push value from heap to stack\r\n    pushAttribute, // value of a attribute to stack\r\n    pushArrayLength, \r\n    pushConstant, // literal\r\n    pushStaticClassObject, // push class-Object to stack (which holds static attributes)\r\n    pushStaticAttribute, // push static attribute to stack\r\n    pushStaticAttributeIntrinsic, // push static attribute to stack\r\n    checkCast, // check if object may get casted to class or interface\r\n    castValue, // cast value on top of stack to other type\r\n    selectArrayElement, // select Element from Array (e.g. a[20])\r\n    callMethod,\r\n    callMainMethod,\r\n    processPostConstructorCallbacks, \r\n    callInputMethod, // Methods of Input class\r\n    makeEllipsisArray,\r\n    decreaseStackpointer, // decrease stack-pointer, nothing else\r\n    initStackframe,\r\n    closeStackframe,\r\n    increaseSpaceForLocalVariables,\r\n    return,\r\n    newObject,\r\n    jumpIfFalse,\r\n    jumpIfTrue,\r\n    jumpIfFalseAndLeaveOnStack,\r\n    jumpIfTrueAndLeaveOnStack,\r\n    jumpAlways,\r\n    noOp, // acts as jump destination\r\n    incrementDecrementBefore, // ++i, --i\r\n    incrementDecrementAfter, // i++, i--\r\n    programEnd,\r\n    beginArray, // push empty array to stack\r\n    addToArray, // pop element form stack and add it to array (on second stack position)\r\n    pushEmptyArray, // push multidimensional empty array to stack\r\n    forLoopOverCollection,\r\n\r\n    // additional AST node types\r\n    type, // e.g. int[][]\r\n    typeParameter, // e.g. <E extends String implements Comparable<E>>\r\n    attributeDeclaration,\r\n    methodDeclaration,\r\n    parameterDeclaration,\r\n    superConstructorCall,\r\n    newArray,\r\n    arrayInitialization,\r\n    print,\r\n    println, \r\n    pushEnumValue,\r\n    initializeEnumValue, \r\n    scopeNode,\r\n    returnIfDestroyed,\r\n    extendedForLoopInit,\r\n    extendedForLoopCheckCounterAndGetElement,\r\n}\r\n\r\nexport var TokenTypeReadable: {[tt: number]: string} = {\r\n    [TokenType.identifier]: \"ein Bezeichner\",\r\n    // constants\r\n    [TokenType.integerConstant]: \"eine Integer-Konstante\",\r\n    [TokenType.floatingPointConstant]: \"eine Fließkomma-Konstante\",\r\n    [TokenType.booleanConstant]: \"eine boolesche Konstante\",\r\n    [TokenType.stringConstant]: \"eine Zeichenketten-Konstante\",\r\n    [TokenType.charConstant]: \"eine char-Konstante\",\r\n    [TokenType.true]: \"true\",\r\n    [TokenType.false]: \"false\",\r\n    // keywords\r\n    [TokenType.keywordClass]: \"class\",\r\n    [TokenType.keywordThis]: \"this\",\r\n    [TokenType.keywordSuper]: \"super\",\r\n    [TokenType.keywordNew]: \"new\",\r\n    [TokenType.keywordInterface]: \"interface\",\r\n    [TokenType.keywordEnum]: \"enum\",\r\n    [TokenType.keywordVoid]: \"void\",\r\n    [TokenType.keywordAbstract]: \"abstract\",\r\n    [TokenType.keywordPublic]: \"public\",\r\n    [TokenType.keywordProtected]: \"protected\",\r\n    [TokenType.keywordPrivate]: \"private\",\r\n    [TokenType.keywordTransient]: \"transient\",\r\n    [TokenType.keywordStatic]: \"static\",\r\n    [TokenType.keywordExtends]: \"extends\",\r\n    [TokenType.keywordImplements]: \"implements\",\r\n    [TokenType.keywordWhile]: \"while\",\r\n    [TokenType.keywordDo]: \"do\",\r\n    [TokenType.keywordFor]: \"for\",\r\n    [TokenType.keywordSwitch]: \"switch\",\r\n    [TokenType.keywordCase]: \"case\",\r\n    [TokenType.keywordDefault]: \"default\",\r\n    [TokenType.keywordIf]: \"if\",\r\n    [TokenType.keywordThen]: \"then\",\r\n    [TokenType.keywordElse]: \"else\",\r\n    [TokenType.keywordReturn]: \"return\",\r\n    [TokenType.keywordBreak]: \"break\",\r\n    [TokenType.keywordContinue]: \"continue\",\r\n    [TokenType.keywordNull]: \"null\",\r\n    [TokenType.keywordFinal]: \"final\",\r\n    [TokenType.keywordInstanceof]: \"instanceof\",\r\n    [TokenType.keywordPrint]: \"print\",\r\n    [TokenType.keywordPrintln]: \"println\",\r\n    // keywordInt,\r\n    // keywordBoolean,\r\n    // keywordString,\r\n    // keywordFloat,\r\n    // keywordChar,\r\n\r\n    // brackets\r\n    [TokenType.leftBracket]: \"(\", // ()\r\n    [TokenType.rightBracket]: \")\",\r\n    [TokenType.leftSquareBracket]: \"[\", // []\r\n    [TokenType.rightSquareBracket]: \"]\",\r\n    [TokenType.leftCurlyBracket]: \"{\", // {}\r\n    [TokenType.rightCurlyBracket]: \"}\",\r\n    [TokenType.leftRightSquareBracket]: \"[]\", \r\n    \r\n    // operators\r\n    [TokenType.dot]: \".\", //.\r\n    [TokenType.minus]: \"-\", \r\n    [TokenType.modulo]: \"%\", \r\n    [TokenType.plus]: \"+\", \r\n    [TokenType.multiplication]: \"*\", \r\n    [TokenType.division]: \"/\",\r\n    [TokenType.singleQuote]: \"'\", \r\n    [TokenType.doubleQuote]: \"\\\"\", // ']: \"\", \"\r\n    [TokenType.doubleMinus]: \"--\", \r\n    [TokenType.doublePlus]: \"++\",\r\n    [TokenType.lower]: \"<\", \r\n    [TokenType.greater]: \">\", \r\n    [TokenType.lowerOrEqual]: \"<=\", \r\n    [TokenType.greaterOrEqual]: \">=\", \r\n    [TokenType.equal]: \"==\", // ==\r\n    [TokenType.notEqual]: \"!=\", // !=\r\n    [TokenType.assignment]: \"=\", // =\r\n    [TokenType.plusAssignment]: \"+=\", // +=\r\n    [TokenType.minusAssignment]: \"-=\", // -=\r\n    [TokenType.multiplicationAssignment]: \"*=\", // *=\r\n    [TokenType.divisionAssignment]: \"/=\", // /=\r\n    [TokenType.moduloAssignment]: \"%=\",\r\n    [TokenType.ampersand]: \"&\", \r\n    [TokenType.and]: \"&&\", \r\n    [TokenType.or]: \"||\", \r\n    [TokenType.not]: \"!\", \r\n    [TokenType.ternaryOperator]: \"?\", \r\n    \r\n    // semicolon\r\n    [TokenType.semicolon]: \";\", // ;\r\n\r\n    [TokenType.colon]: \":\", // ;\r\n    [TokenType.ellipsis]: \"...\", // ;\r\n\r\n    // comma\r\n    [TokenType.comma]: \",\", \r\n\r\n    // backslash\r\n    [TokenType.backslash]: \"\\\\\",\r\n\r\n    // at\r\n    [TokenType.at]: \"@\",\r\n\r\n    // whitespace\r\n    [TokenType.space]: \"ein Leerzeichen\",\r\n    [TokenType.tab]: \"ein Tabulatorzeichen\",\r\n\r\n    // newline\r\n    [TokenType.newline]: \"ein Zeilenumbruch\",\r\n\r\n    // only lexer-internal\r\n    [TokenType.identifierChar]: \"eines der Zeichen a..z, A..Z, _\",  // none of the special chars above a..zA..Z_Äö...\r\n\r\n    // Comment\r\n    [TokenType.comment]: \"ein Kommentar\",\r\n\r\n    [TokenType.endofSourcecode]: \"das Ende des Programmes\"\r\n\r\n}\r\n\r\nexport var specialCharList: {[keyword: string]:TokenType} = {\r\n    '(': TokenType.leftBracket, // ()\r\n    ')': TokenType.rightBracket,\r\n    '[': TokenType.leftSquareBracket, // []\r\n    ']': TokenType.rightSquareBracket,\r\n    '{': TokenType.leftCurlyBracket, // {}\r\n    '}': TokenType.rightCurlyBracket,\r\n    \r\n    // operators\r\n    '.': TokenType.dot, //.\r\n    ',': TokenType.comma, //.\r\n    '-': TokenType.minus,\r\n    '%': TokenType.modulo,\r\n    '+': TokenType.plus, \r\n    '*': TokenType.multiplication, \r\n    '/': TokenType.division,\r\n    '\\\\': TokenType.backslash,\r\n    '@': TokenType.at,\r\n    '\\'': TokenType.singleQuote, \r\n    '\"': TokenType.doubleQuote, // ', \"\r\n    \"<\": TokenType.lower,\r\n    \">\": TokenType.greater,\r\n    \"=\": TokenType.assignment,\r\n    \"&\": TokenType.and,\r\n    \"|\": TokenType.or,\r\n    \"!\": TokenType.not,\r\n    \"?\": TokenType.ternaryOperator,\r\n    \r\n    ';': TokenType.semicolon, // ;\r\n    ':': TokenType.colon, // ;\r\n\r\n    '...': TokenType.ellipsis,\r\n\r\n    // whitespace\r\n    ' ': TokenType.space,\r\n    '\\t': TokenType.tab,\r\n\r\n    // newline\r\n    '\\n': TokenType.newline,\r\n    '\\r': TokenType.linefeed\r\n}\r\n\r\nexport var keywordList: {[keyword: string]:TokenType} = {\r\n    \"class\": TokenType.keywordClass,\r\n    \"this\": TokenType.keywordThis,\r\n    \"super\": TokenType.keywordSuper,\r\n    \"new\": TokenType.keywordNew,\r\n    \"interface\": TokenType.keywordInterface,\r\n    \"enum\": TokenType.keywordEnum,\r\n    \"void\": TokenType.keywordVoid,\r\n    \"abstract\": TokenType.keywordAbstract,\r\n    \"public\": TokenType.keywordPublic,\r\n    \"protected\": TokenType.keywordProtected,\r\n    \"private\": TokenType.keywordPrivate,\r\n    \"transient\": TokenType.keywordTransient,\r\n    \"static\": TokenType.keywordStatic,\r\n    \"extends\": TokenType.keywordExtends,\r\n    \"implements\": TokenType.keywordImplements,\r\n    \"while\": TokenType.keywordWhile,\r\n    \"do\": TokenType.keywordDo,\r\n    \"for\": TokenType.keywordFor,\r\n    \"switch\": TokenType.keywordSwitch,\r\n    \"case\": TokenType.keywordCase,\r\n    \"default\": TokenType.keywordDefault,\r\n    \"if\": TokenType.keywordIf,\r\n    \"then\": TokenType.keywordThen,\r\n    \"else\": TokenType.keywordElse,\r\n    \"return\": TokenType.keywordReturn,\r\n    \"break\": TokenType.keywordBreak,\r\n    \"continue\": TokenType.keywordContinue,\r\n    \"null\": TokenType.keywordNull,\r\n    \"final\": TokenType.keywordFinal,\r\n    \"instanceof\": TokenType.keywordInstanceof,\r\n    \"true\": TokenType.true,\r\n    \"false\": TokenType.false,\r\n    \"print\": TokenType.keywordPrint,\r\n    \"println\": TokenType.keywordPrintln,\r\n    // \"int\": TokenType.keywordInt,\r\n    // \"boolean\": TokenType.keywordBoolean,\r\n    // \"String\": TokenType.keywordString,\r\n    // \"float\": TokenType.keywordFloat,\r\n    // \"char\": TokenType.keywordChar\r\n};\r\n\r\nexport var EscapeSequenceList: {[keyword: string]:string} = {\r\n    \"n\": \"\\n\",\r\n    \"r\": \"\\r\",\r\n    \"t\": \"\\t\",\r\n    \"\\\"\": \"\\\"\",\r\n    \"'\": \"'\",\r\n    \"\\\\\": \"\\\\\"\r\n}\r\n\r\nexport type TextPosition = {\r\n    line: number,\r\n    column: number, \r\n    length: number\r\n}\r\n\r\nexport type TextPositionWithoutLength = {\r\n    line: number,\r\n    column: number\r\n}\r\n\r\nexport type Token = {\r\n    tt: TokenType,\r\n    value: string|number|boolean,\r\n    position: TextPosition,\r\n    commentBefore?: Token\r\n}\r\n\r\nexport type TokenList = Token[];\r\n\r\nfunction tokenToString(t: Token){\r\n    return \"<div><span style='font-weight: bold'>\" + TokenType[t.tt] + \"</span>\" +\r\n            \"<span style='color: blue'> &nbsp;'\" + t.value + \"'</span> (l&nbsp;\" + t.position.line + \", c&nbsp;\" + t.position.column + \")</div>\";\r\n}\r\n \r\nexport function tokenListToString(tl: TokenList):string{\r\n    let s = \"\";\r\n    for(let t of tl){\r\n        s += tokenToString(t) + \"\\n\";\r\n    }\r\n    return s;\r\n}","import { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { TextPosition, TokenType } from \"../lexer/Token.js\";\r\nimport { Module } from \"../parser/Module.js\";\r\nimport { Program } from \"../parser/Program.js\";\r\nimport { ArrayType } from \"./Array.js\";\r\nimport { Visibility, TypeVariable } from \"./Class.js\";\r\n\r\nexport type UsagePositions = Map<Module, TextPosition[]>;\r\n\r\nexport type TextPositionWithModule = {\r\n    module: Module,\r\n    position: TextPosition,\r\n    monacoModel?: monaco.editor.ITextModel\r\n}\r\n\r\nexport type CastInformation = {\r\n    automatic: boolean,\r\n    needsStatement: boolean\r\n}\r\n\r\nexport abstract class Type {\r\n\r\n    public onlyFirstPass = false;\r\n\r\n    public usagePositions: UsagePositions = new Map();\r\n    public declaration: TextPositionWithModule;\r\n\r\n    public identifier: string;\r\n    public documentation: string = \"\";\r\n\r\n    constructor() {\r\n    }\r\n\r\n    public abstract getResultType(operation: TokenType, secondOperandType?: Type): Type;\r\n\r\n    public abstract compute(operation: TokenType, firstOperand: Value, secondOperand?: Value): any;\r\n\r\n    public abstract canCastTo(type: Type): boolean;\r\n\r\n    public abstract castTo(value: Value, type: Type): Value;\r\n\r\n    public abstract equals(type: Type): boolean;\r\n\r\n    public toTokenType(): TokenType {\r\n        return null;\r\n    };\r\n\r\n    public abstract debugOutput(value: Value, maxLength?: number): string;\r\n\r\n    clearUsagePositions() {\r\n        this.usagePositions = new Map();\r\n    }\r\n\r\n}\r\n\r\nexport abstract class PrimitiveType extends Type {\r\n\r\n    public initialValue: any = null;\r\n\r\n    public description: string = \"\";\r\n\r\n    protected operationTable: { [operation: number]: { [typename: string]: Type } }\r\n\r\n    protected canCastToMap: { [type: string]: CastInformation };\r\n\r\n    public equals(type: Type): boolean {\r\n        return type == this;\r\n    }\r\n\r\n    public getResultType(operation: TokenType, secondOperandType?: Type): Type {\r\n\r\n        let opTypeMap = this.operationTable[operation];\r\n\r\n        if (opTypeMap == null) {\r\n            return null; // Operation not possible\r\n        }\r\n\r\n        if (secondOperandType != null) {\r\n            return opTypeMap[secondOperandType.identifier];\r\n        }\r\n\r\n        return opTypeMap[\"none\"];\r\n\r\n    }\r\n\r\n    public canCastTo(type: Type): boolean {\r\n        return this.canCastToMap[type.identifier] != null;\r\n    }\r\n\r\n    public getCastInformation(type: Type): CastInformation {\r\n        return this.canCastToMap[type.identifier];\r\n    }\r\n\r\n}\r\n\r\nexport class Attribute {\r\n\r\n    onlyFirstPass: boolean = false;\r\n\r\n    identifier: string;\r\n    type: Type;\r\n    isStatic: boolean;\r\n    isFinal: boolean;\r\n    isTransient: boolean;\r\n    visibility: Visibility;\r\n    updateValue: (value: Value) => void;\r\n    usagePositions: UsagePositions;\r\n    declaration: TextPositionWithModule;\r\n    documentation: string;\r\n    annotation?: string;\r\n\r\n    constructor(name: string, type: Type, updateValue: (value: Value) => void,\r\n        isStatic: boolean, visibility: Visibility, isFinal: boolean, documentation?: string) {\r\n        this.identifier = name;\r\n        this.type = type;\r\n        this.updateValue = updateValue;\r\n        this.isStatic = isStatic;\r\n        this.visibility = visibility;\r\n        this.isFinal = isFinal;\r\n        this.usagePositions = new Map();\r\n        this.documentation = documentation;\r\n    }\r\n}\r\n\r\nexport class Method extends Type {\r\n\r\n    onlyFirstPass: boolean = false;\r\n\r\n    visibility: Visibility;\r\n\r\n    isAbstract: boolean;\r\n    isStatic: boolean;\r\n    isConstructor: boolean = false;\r\n    isVirtual: boolean = false; // true, if child class has method with same signature\r\n\r\n    parameterlist: Parameterlist;\r\n    returnType: Type;\r\n    annotation?: string;\r\n\r\n    invoke?: (parameters: Value[]) => any;  // only for system functions\r\n    program?: Program;\r\n\r\n    reserveStackForLocalVariables: number = 0;\r\n\r\n    hasGenericTypes: boolean;\r\n\r\n    genericTypeMap: { [identifier: string]: Type } = null;\r\n\r\n    public signature: string;\r\n\r\n    hasEllipsis(): boolean {\r\n        if(this.parameterlist.parameters.length == 0) return false;\r\n        return this.parameterlist.parameters[this.parameterlist.parameters.length - 1].isEllipsis;\r\n    }\r\n\r\n\r\n    getParameterType(index: number): Type {\r\n        return this.parameterlist.parameters[index].type;\r\n    }\r\n\r\n    getParameter(index: number): Variable {\r\n        return this.parameterlist.parameters[index];\r\n    }\r\n\r\n    getReturnType(): Type {\r\n        return this.returnType;\r\n    }\r\n\r\n    getParameterCount() {\r\n        return this.parameterlist.parameters.length;\r\n    }\r\n\r\n    getParameterList(): Parameterlist {\r\n        return this.parameterlist;\r\n    }\r\n\r\n\r\n\r\n    constructor(name: string, parameterlist: Parameterlist, returnType: Type,\r\n        invokeOrAST: ((parameters: Value[]) => any) | Program,\r\n        isAbstract: boolean, isStatic: boolean, documentation?: string, isConstructor: boolean = false) {\r\n        super();\r\n        this.identifier = name;\r\n        this.parameterlist = parameterlist;\r\n        this.returnType = returnType;\r\n        this.isAbstract = isAbstract;\r\n        this.isStatic = isStatic;\r\n        this.visibility = 0;\r\n        this.documentation = documentation;\r\n        this.isConstructor = isConstructor;\r\n\r\n        if (invokeOrAST != null) {\r\n            if (typeof invokeOrAST == \"function\") {\r\n                this.invoke = invokeOrAST;\r\n            } else {\r\n                this.program = invokeOrAST;\r\n                invokeOrAST.method = this;\r\n            }\r\n        }\r\n\r\n        this.signature = name + parameterlist.id;\r\n\r\n        for (let p of parameterlist.parameters) {\r\n            if (p[\"isTypeVariable\"] == true) {\r\n                this.hasGenericTypes = true; break;\r\n            }\r\n        }\r\n\r\n        this.hasGenericTypes = this.hasGenericTypes || (this.returnType != null && this.returnType[\"isTypeVariable\"] == true);\r\n    }\r\n\r\n    getSignatureWithReturnParameter(){\r\n        if(this.returnType != null){\r\n            return this.returnType.identifier + \" \" + this.signature;\r\n        } else {\r\n            return \"void \" + this.signature;\r\n        }\r\n    }\r\n\r\n    getCompletionLabel() {\r\n\r\n        let label = \"\";\r\n\r\n        if (this.returnType != null && this.returnType.identifier != \"void\") {\r\n            label += getTypeIdentifier(this.returnType) + \" \";\r\n        }\r\n\r\n        label += this.identifier + \"(\";\r\n\r\n        let parameters = this.parameterlist.parameters;\r\n        for (let i = 0; i < parameters.length; i++) {\r\n\r\n            let p = parameters[i];\r\n            if(p.isEllipsis){\r\n                let arrayType: ArrayType = <any>p.type;\r\n                label += getTypeIdentifier(arrayType.arrayOfType) + \"... \" + p.identifier;\r\n            } else {\r\n                label += getTypeIdentifier(p.type) + \" \" + p.identifier;\r\n            }\r\n\r\n            if (i < parameters.length - 1) {\r\n                label += \", \";\r\n            }\r\n\r\n        }\r\n\r\n        label += \")\";\r\n\r\n        return label;\r\n    }\r\n\r\n\r\n    getCompletionSnippet(leftBracketAlreadyThere: boolean) {\r\n\r\n        if (leftBracketAlreadyThere) return this.identifier + \"($0\";\r\n\r\n        let snippet = \"\";\r\n\r\n        snippet += this.identifier + \"(\";\r\n\r\n        let parameters = this.parameterlist.parameters;\r\n        for (let i = 0; i < parameters.length; i++) {\r\n\r\n            let p = parameters[i];\r\n            snippet += \"${\" + ((i + 1) % parameters.length) + \":\" + p.identifier + \"}\";\r\n\r\n            if (i < parameters.length - 1) {\r\n                snippet += \", \";\r\n            }\r\n\r\n        }\r\n\r\n        snippet += \")\";\r\n\r\n        return snippet;\r\n    }\r\n\r\n    public debugOutput(value: Value): string {\r\n        return \"\";\r\n    }\r\n\r\n    public equals(type: Type): boolean {\r\n        return type == this;\r\n    }\r\n\r\n    public getResultType(operation: TokenType, secondOperandType?: Type): Type {\r\n        return null;\r\n    }\r\n\r\n    public compute(operation: TokenType, firstOperand: Value, secondOperand?: Value): any {\r\n        return null;\r\n    }\r\n\r\n    public canCastTo(type: Type): boolean {\r\n        return false;\r\n    }\r\n\r\n    public castTo(value: Value, type: Type): Value { return value }\r\n\r\n\r\n}\r\n\r\nexport class Parameterlist {\r\n\r\n    id: string;\r\n\r\n    parameters: Variable[];\r\n\r\n    constructor(parameters: Variable[]) {\r\n        this.parameters = parameters;\r\n        this.computeId();\r\n    }\r\n\r\n    computeId() {\r\n        this.id = \"(\";\r\n        let i = 0;\r\n        while (i < this.parameters.length) {\r\n            this.id += this.parameters[i].type.identifier;\r\n            if (i < this.parameters.length - 1) {\r\n                this.id += \", \";\r\n            }\r\n            i++;\r\n        }\r\n        this.id += \")\";\r\n    }\r\n}\r\n\r\nexport type Variable = {\r\n    identifier: string,\r\n    type: Type,\r\n    stackPos?: number;\r\n    usagePositions: UsagePositions,\r\n    declaration: TextPositionWithModule,\r\n    isFinal: boolean,\r\n    isEllipsis?: boolean,\r\n    value?: Value // only for variables on heap,\r\n    declarationError?: any,     // if v.declarationError != null then variable has been used before initialization.\r\n    usedBeforeInitialization?: boolean,\r\n    initialized?: boolean\r\n}\r\n\r\nexport type Heap = { [identifier: string]: Variable };\r\n\r\nexport type Value = {\r\n    type: Type;\r\n    value: any;\r\n    updateValue?: (value: Value) => void;\r\n    object?: RuntimeObject;\r\n}\r\n\r\n\r\nexport function getTypeIdentifier(type: Type): string {\r\n    if(type[\"typeVariables\"]){\r\n        if(type[\"typeVariables\"].length > 0){\r\n            let s: string = (type[\"isTypeVariable\"] ? (type.identifier + \" extends \" + type[\"isGenericVariantFrom\"]?.identifier) : type.identifier) \r\n            + \"<\";\r\n               s += type[\"typeVariables\"].map(tv => getTypeIdentifier(tv.type)).join(\", \");\r\n            return s + \">\";\r\n        }\r\n    }\r\n\r\n    return type[\"isTypeVariable\"] ? (type.identifier + \" extends \" + type[\"isGenericVariantFrom\"]?.identifier) : type.identifier;\r\n}\r\n","import { Klass, StaticClass, Visibility } from \"../compiler/types/Class.js\";\r\nimport { PrimitiveType, Value } from \"../compiler/types/Types.js\";\r\n\r\n\r\n\r\nexport class RuntimeObject {\r\n\r\n    class: Klass | StaticClass;\r\n\r\n    intrinsicData: {[classIdentifier: string]: any} = {};  // for intrinsic (= builtin) classes to store data\r\n\r\n    // Attributes of class and base-classes\r\n    // Map class-identifier to Map <attribute-identifier, attribute-value>\r\n    attributeValues: Map<string, Map<string, Value>> = new Map();\r\n\r\n    constructor(klass: Klass | StaticClass ) {\r\n\r\n        this.class = klass;\r\n\r\n        // while (klass != null) {\r\n        //     let map: Map<string, Value> = new Map();\r\n        //     this.attributeValues.set(klass.identifier, map);\r\n        //     for (let attribute of klass.attributes) {\r\n        //         let value: Value = {\r\n        //             type: attribute.type,\r\n        //             value: null\r\n        //         };\r\n\r\n        //         if (attribute.type instanceof PrimitiveType) {\r\n        //             value.value = attribute.type.initialValue;\r\n        //         }\r\n        //         map.set(attribute.identifier, value);\r\n        //     }\r\n        //     klass = klass.baseClass;\r\n        // }\r\n\r\n    }\r\n\r\n    getValue(identifier: string):Value{\r\n\r\n        let klass = this.class;\r\n        \r\n        while(klass != null){\r\n            let av = this.attributeValues.get(klass.identifier).get(identifier);\r\n            if(av != null) \r\n            {\r\n                if(av.updateValue != null){\r\n                    av.updateValue(av);\r\n                }\r\n                return av;\r\n            }\r\n\r\n            // let attribute = klass.attributeMap.get(identifier);\r\n            // if(attribute != null && attribute.updateValue != null){\r\n            //     return attribute.updateValue({type: this.class, value: this});\r\n            // }\r\n\r\n            klass = klass.baseClass;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    initializeAttributeValues(){\r\n\r\n        this.attributeValues = new Map();\r\n\r\n        let klass = this.class;\r\n        while(klass != null){\r\n            \r\n            let map:Map<string, Value> = new Map();\r\n            this.attributeValues.set(klass.identifier, map);\r\n\r\n            for(let att of klass.attributes){\r\n                \r\n                \r\n                let value:any = null;\r\n                if(att.type instanceof PrimitiveType){\r\n                    value = att.type.initialValue;\r\n                }\r\n\r\n                let v: Value = {\r\n                    type: att.type,\r\n                    value: value\r\n                };\r\n\r\n                if(att.updateValue != null){\r\n                    v.updateValue = att.updateValue;\r\n                    v.object = this;\r\n                } \r\n                \r\n                map.set(att.identifier, v);\r\n\r\n            }\r\n\r\n            klass = klass.baseClass;\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\nexport function deepCopy(obj: any): any {\r\n\r\n    var copy: any;\r\n\r\n    // Handle the 3 simple types, and null or undefined\r\n    if (null == obj || \"object\" != typeof obj) return obj;\r\n\r\n    // Handle Date\r\n    if (obj instanceof Date) {\r\n        copy = new Date();\r\n        copy.setTime(obj.getTime());\r\n        return copy;\r\n    }\r\n\r\n    // Handle Array\r\n    if (obj instanceof Array) {\r\n        copy = [];\r\n        for (var i = 0, len = obj.length; i < len; i++) {\r\n            copy[i] = deepCopy(obj[i]);\r\n        }\r\n        return copy;\r\n    }\r\n\r\n    // Handle Object\r\n    if (obj instanceof Object) {\r\n        copy = {};\r\n        for (var attr in obj) {\r\n            if (obj.hasOwnProperty(attr)) copy[attr] = deepCopy(obj[attr]);\r\n        }\r\n        return copy;\r\n    }\r\n\r\n    throw new Error(\"Unable to copy obj! Its type isn't supported.\");\r\n\r\n}\r\n\r\n","import { Statement, JumpNode, Program, JumpOnSwitchStatement } from \"./Program.js\";\r\nimport { TokenType, TextPosition } from \"../lexer/Token.js\";\r\nimport { CodeGenerator } from \"./CodeGenerator.js\";\r\n\r\ntype nodeToResolve = {\r\n    node: JumpNode,\r\n    labelIndex: number\r\n}\r\n\r\ntype LabeledNode = {\r\n    node?: Statement,\r\n    labelIndex: number,\r\n    position?: number\r\n}\r\n\r\n\r\nexport class LabelManager {\r\n\r\n    maxLabelIndex: number = 0;\r\n\r\n    labeledNodes: LabeledNode[] = [];\r\n    \r\n    labelMap: Map<number, LabeledNode> = new Map();\r\n    jumpNodesToResolve: nodeToResolve[] = [];\r\n\r\n    switchStatements: JumpOnSwitchStatement[] = [];\r\n\r\n    program: Program;\r\n\r\n    constructor(program: Program){\r\n        this.program = program;\r\n    }\r\n\r\n    registerSwitchStatement(switchStatement: JumpOnSwitchStatement) {\r\n        this.switchStatements.push(switchStatement);\r\n    }\r\n\r\n    insertJumpNode(type: TokenType.jumpIfTrue|TokenType.jumpIfFalse|TokenType.jumpAlways|\r\n        TokenType.jumpIfFalseAndLeaveOnStack|TokenType.jumpIfTrueAndLeaveOnStack,\r\n         position: TextPosition, codeGenerator: CodeGenerator, labelIndex?: number): number {\r\n        \r\n        let statementList = this.program.statements;\r\n\r\n        if(position == null){\r\n            if(statementList.length > 0){\r\n                position = statementList[statementList.length - 1].position;\r\n            }\r\n        }\r\n\r\n        let node: JumpNode = {\r\n            type: type,\r\n            position: position,\r\n            stepFinished: true\r\n        };\r\n\r\n        codeGenerator.pushStatements(node);\r\n\r\n        return this.registerJumpNode(node, labelIndex);\r\n\r\n    }\r\n\r\n    markJumpDestination(offset: number, labelIndex?:number): number {\r\n        \r\n        let position = this.program.statements.length - 1 + offset;\r\n        \r\n        if(labelIndex == null){\r\n            labelIndex = this.maxLabelIndex++;\r\n        }\r\n\r\n        let labeledNode = {\r\n            position: position,\r\n            labelIndex: labelIndex\r\n        };\r\n\r\n        this.labeledNodes.push(labeledNode);\r\n\r\n        this.labelMap.set(labelIndex, labeledNode);\r\n\r\n        return labelIndex;\r\n\r\n    }\r\n\r\n    removeNode(node: Statement){\r\n        for(let i = 0; i < this.labeledNodes.length; i++){\r\n            let n = this.labeledNodes[i];\r\n            if(n.node == node){\r\n\r\n                let index = this.program.statements.indexOf(node);\r\n               \r\n                if(index < this.program.statements.length - 1){\r\n                    let newNode = this.program.statements[index + 1];\r\n                    n.node = newNode;\r\n                }\r\n\r\n            } else {\r\n                i++;\r\n            }\r\n        }\r\n    }\r\n\r\n    private registerJumpDestination(node: Statement, labelIndex?: number): number {\r\n\r\n        if(labelIndex == null){\r\n            labelIndex = this.maxLabelIndex++;\r\n        }\r\n\r\n        let label: LabeledNode = {\r\n            node: node,\r\n            labelIndex: labelIndex\r\n        }\r\n\r\n        this.labeledNodes.push(label);\r\n        this.labelMap.set(labelIndex, label);\r\n\r\n        return labelIndex;\r\n    }\r\n\r\n    public registerJumpNode(node: JumpNode, labelIndex?: number): number {\r\n\r\n        if(labelIndex == null){\r\n            labelIndex = this.maxLabelIndex++;\r\n        }\r\n\r\n        let ntr: nodeToResolve = {\r\n            labelIndex: labelIndex,\r\n            node: node\r\n        }\r\n\r\n        this.jumpNodesToResolve.push(ntr);\r\n\r\n        return labelIndex;\r\n\r\n    }\r\n\r\n    resolveNodes(){\r\n        for(let ln of this.labeledNodes){\r\n\r\n            if(ln.position == null){\r\n                ln.position = this.program.statements.indexOf(ln.node);\r\n            } else {\r\n                while(ln.position > this.program.statements.length - 1){\r\n                    this.program.statements.push({\r\n                        type: TokenType.noOp,\r\n                        position: null\r\n                    });\r\n                }\r\n                ln.node = this.program.statements[this.program.statements.length - 1];\r\n            }\r\n\r\n        }\r\n\r\n        for(let jn of this.jumpNodesToResolve){\r\n            let dest = this.labelMap.get(jn.labelIndex);\r\n            if(dest != null){\r\n                jn.node.destination = dest.position;\r\n            }\r\n        }\r\n\r\n        for(let sw of this.switchStatements){\r\n            for(let dl of sw.destinationLabels){\r\n                sw.destinationMap[dl.constant] = this.labelMap.get(dl.label).position;\r\n            }\r\n            sw.destinationLabels = null;\r\n            if(sw.defaultDestination != null){\r\n                sw.defaultDestination = this.labelMap.get(sw.defaultDestination).position;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { ProgramStackElement } from \"../../interpreter/Interpreter.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { TextPosition, TokenType } from \"../lexer/Token.js\";\r\nimport { LabelManager } from \"../parser/LabelManager.js\";\r\nimport { Module } from \"../parser/Module.js\";\r\nimport { Program } from \"../parser/Program.js\";\r\nimport { SymbolTable } from \"../parser/SymbolTable.js\";\r\nimport { ArrayType } from \"./Array.js\";\r\nimport { nullType, stringPrimitiveType } from \"./PrimitiveTypes.js\";\r\nimport { Attribute, Method, Parameterlist, PrimitiveType, Type, Value } from \"./Types.js\";\r\n\r\n\r\nexport enum Visibility { public, protected, private };\r\n\r\nvar booleanPrimitiveTypeCopy: any;\r\nexport function setBooleanPrimitiveTypeCopy(bpt: Type) {\r\n    booleanPrimitiveTypeCopy = bpt;\r\n}\r\n\r\n// Used for class diagrams:\r\nexport type CompostionData = { klass: Klass | Interface, multiples: boolean, identifier: string };\r\n\r\n/**\r\n * For Generic types\r\n */\r\nexport type TypeVariable = {\r\n    identifier: string;\r\n    type: Klass;\r\n    scopeFrom: TextPosition;\r\n    scopeTo: TextPosition;\r\n}\r\n\r\n\r\nexport class Klass extends Type {\r\n\r\n    // for Generics:\r\n    typeVariables: TypeVariable[] = [];\r\n    isGenericVariantFrom: Klass;\r\n    isTypeVariable: boolean = false;\r\n    typeVariablesReady: boolean = true;\r\n\r\n    private static dontInheritFrom: string[] = [\"Integer\", \"Float\", \"Double\", \"Boolean\", \"Character\", \"String\"];\r\n\r\n    baseClass: Klass;\r\n    firstPassBaseClass: string;\r\n\r\n    staticClass: StaticClass;\r\n\r\n    module: Module;\r\n\r\n    visibility: Visibility;\r\n\r\n    implements: Interface[] = [];\r\n    firstPassImplements: string[] = [];\r\n\r\n    isAbstract: boolean = false;\r\n\r\n    attributeInitializationProgram: Program;\r\n\r\n    postConstructorCallbacks: ((r: RuntimeObject) => void)[] = null;\r\n\r\n    public methods: Method[] = [];\r\n    private methodMap: Map<string, Method> = new Map();\r\n\r\n    public attributes: Attribute[] = [];\r\n    public attributeMap: Map<string, Attribute> = new Map();\r\n\r\n    public symbolTable: SymbolTable;\r\n\r\n    constructor(identifier: string, module: Module, documentation?: string) {\r\n        super();\r\n\r\n        this.documentation = documentation;\r\n\r\n        this.identifier = identifier;\r\n        this.module = module;\r\n        this.visibility = Visibility.public;\r\n\r\n        this.staticClass = new StaticClass(this);\r\n\r\n        this.attributeInitializationProgram = {\r\n            method: null,\r\n            module: this.module,\r\n            statements: [],\r\n            labelManager: null\r\n        };\r\n\r\n        this.attributeInitializationProgram.labelManager = new LabelManager(this.attributeInitializationProgram);\r\n\r\n    }\r\n\r\n    getNonGenericClass(): Klass {\r\n        let k: Klass = this;\r\n        while (k.isGenericVariantFrom != null) k = k.isGenericVariantFrom;\r\n        return k;\r\n    }\r\n\r\n    getNonGenericIdentifier(): string {\r\n        let k: Klass = this;\r\n        while (k.isGenericVariantFrom != null) k = k.isGenericVariantFrom;\r\n        return k.identifier;\r\n    }\r\n\r\n    implementsInterface(i: Interface): boolean {\r\n        let klass: Klass = this;\r\n        while (klass != null) {\r\n            for (let i1 of klass.implements) {\r\n                if(i1.getThisOrExtendedInterface(i.getNonGenericIdentifier()) != null) return true;\r\n            }\r\n            klass = klass.baseClass;\r\n        }\r\n\r\n        return false;\r\n\r\n    }\r\n\r\n    getImplementedInterface(identifier: string): Interface {\r\n        let klass: Klass = this;\r\n        while (klass != null) {\r\n            for (let i1 of klass.implements) {\r\n                let i2: Interface = i1.getThisOrExtendedInterface(identifier);\r\n                if(i2 != null) return i2;\r\n            }\r\n            klass = klass.baseClass;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n\r\n\r\n    registerUsedSystemClasses(usedSystemClasses: (Klass | Interface)[]) {\r\n        if (this.baseClass != null && this.baseClass.module != null && this.baseClass.module.isSystemModule &&\r\n            usedSystemClasses.indexOf(this.baseClass) < 0) {\r\n            usedSystemClasses.push(this.baseClass);\r\n        }\r\n        for (let cd of this.getCompositeData()) {\r\n            if (cd.klass != null && cd.klass.module != null && cd.klass.module.isSystemModule &&\r\n                usedSystemClasses.indexOf(cd.klass) < 0) {\r\n                usedSystemClasses.push(cd.klass);\r\n            }\r\n        }\r\n        for (let interf of this.implements) {\r\n            if (interf != null && interf.module.isSystemModule &&\r\n                usedSystemClasses.indexOf(interf) < 0) {\r\n                usedSystemClasses.push(interf);\r\n            }\r\n        }\r\n    }\r\n\r\n    getCompositeData(): CompostionData[] {\r\n\r\n        let cd: CompostionData[] = [];\r\n        let cdMap: Map<Klass | Interface, CompostionData> = new Map();\r\n\r\n        for (let a of this.attributes) {\r\n            if (a.type instanceof Klass || a.type instanceof Interface) {\r\n                let cda = cdMap.get(a.type);\r\n                if (cda == null) {\r\n                    cda = {\r\n                        klass: a.type,\r\n                        multiples: false,\r\n                        identifier: a.identifier\r\n                    };\r\n                    cdMap.set(a.type, cda);\r\n                    cd.push(cda);\r\n                } else {\r\n                    cda.identifier += \", \" + a.identifier;\r\n                }\r\n            } else {\r\n                let type: Type = a.type;\r\n                while (type instanceof ArrayType) {\r\n                    type = type.arrayOfType;\r\n                }\r\n                if (type instanceof Klass || type instanceof Interface) {\r\n                    let cda = cdMap.get(type);\r\n                    if (cda == null) {\r\n                        cda = {\r\n                            klass: type,\r\n                            multiples: true,\r\n                            identifier: a.identifier\r\n                        };\r\n                        cdMap.set(type, cda);\r\n                        cd.push(cda);\r\n                    } else {\r\n                        cda.identifier += \", \" + a.identifier;\r\n                        cda.multiples = true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return cd;\r\n    }\r\n\r\n\r\n    clearUsagePositions() {\r\n        super.clearUsagePositions();\r\n\r\n        for (let m of this.methods) {\r\n            m.clearUsagePositions();\r\n        }\r\n\r\n        for (let a of this.attributes) {\r\n            a.usagePositions = new Map();\r\n        }\r\n\r\n        if (this.staticClass != null) {\r\n            this.staticClass.clearUsagePositions();\r\n        }\r\n\r\n    }\r\n\r\n\r\n    getPostConstructorCallbacks(): ((r: RuntimeObject) => void)[] {\r\n        let c: Klass = this;\r\n        let callbacks: ((r: RuntimeObject) => void)[] = null;\r\n\r\n        while (c != null) {\r\n            if (c.postConstructorCallbacks != null) {\r\n                if (callbacks == null) { callbacks = c.postConstructorCallbacks; }\r\n                else {\r\n                    callbacks = callbacks.concat(c.postConstructorCallbacks);\r\n                }\r\n            }\r\n            c = c.baseClass;\r\n        }\r\n        return callbacks;\r\n    }\r\n\r\n    getCompletionItems(visibilityUpTo: Visibility,\r\n        leftBracketAlreadyThere: boolean, identifierAndBracketAfterCursor: string,\r\n        rangeToReplace: monaco.IRange): monaco.languages.CompletionItem[] {\r\n\r\n        let itemList: monaco.languages.CompletionItem[] = [];\r\n\r\n        for (let attribute of this.getAttributes(visibilityUpTo)) {\r\n            itemList.push({\r\n                label: attribute.identifier + \"\",\r\n                kind: monaco.languages.CompletionItemKind.Field,\r\n                insertText: attribute.identifier,\r\n                range: rangeToReplace,\r\n                documentation: attribute.documentation == null ? undefined : {\r\n                    value: attribute.documentation\r\n                }\r\n            });\r\n        }\r\n\r\n        for (let method of this.getMethods(visibilityUpTo)) {\r\n            if (method.isConstructor) continue;\r\n            itemList.push({\r\n                label: method.getCompletionLabel(),\r\n                filterText: method.identifier,\r\n                command: {\r\n                    id: \"editor.action.triggerParameterHints\",\r\n                    title: '123',\r\n                    arguments: []\r\n                },\r\n                kind: monaco.languages.CompletionItemKind.Method,\r\n                insertText: method.getCompletionSnippet(leftBracketAlreadyThere),\r\n                range: rangeToReplace,\r\n                insertTextRules: monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet,\r\n                documentation: method.documentation == null ? undefined : {\r\n                    value: method.documentation\r\n                }\r\n            });\r\n        }\r\n\r\n        itemList = itemList.concat(this.staticClass.getCompletionItems(visibilityUpTo,\r\n            leftBracketAlreadyThere, identifierAndBracketAfterCursor,\r\n            rangeToReplace));\r\n\r\n        return itemList;\r\n    }\r\n\r\n    pushStaticInitializationPrograms(programStack: ProgramStackElement[]) {\r\n\r\n        if (this.staticClass.attributeInitializationProgram.statements.length > 0) {\r\n            programStack.push({\r\n                program: this.staticClass.attributeInitializationProgram,\r\n                programPosition: 0,\r\n                textPosition: { line: 1, column: 1, length: 0 },\r\n                method: \"Initialisierung statischer Variablen der Klasse \" + this.staticClass.identifier,\r\n                callbackAfterReturn: null,\r\n                isCalledFromOutside: \"Initialisierung statischer Attribute\"\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    getMethodBySignature(signature: string): Method {\r\n\r\n        let c: Klass = this;\r\n        while (c != null) {\r\n            let method = c.methodMap.get(signature);\r\n            if (method != null) return method;\r\n            c = c.baseClass;\r\n        }\r\n\r\n        return null;\r\n\r\n    }\r\n\r\n    public equals(type: Type): boolean {\r\n        return type == this;\r\n    }\r\n\r\n    setBaseClass(baseClass: Klass) {\r\n        this.baseClass = baseClass;\r\n        this.staticClass.baseClass = baseClass.staticClass;\r\n    }\r\n\r\n    public addMethod(method: Method) {\r\n        if (method.isStatic) {\r\n            this.staticClass.addMethod(method);\r\n        } else {\r\n            this.methods.push(method);\r\n            this.methodMap.set(method.signature, method);\r\n        }\r\n    }\r\n\r\n    public addAttribute(attribute: Attribute) {\r\n        if (attribute.isStatic) {\r\n            this.staticClass.addAttribute(attribute);\r\n        } else {\r\n            this.attributes.push(attribute);\r\n            this.attributeMap.set(attribute.identifier, attribute);\r\n        }\r\n    }\r\n\r\n    public getResultType(operation: TokenType, secondOperandType?: Type): Type {\r\n\r\n        if (operation == TokenType.equal || operation == TokenType.notEqual) {\r\n            if (secondOperandType instanceof Klass || secondOperandType == nullType) {\r\n                return booleanPrimitiveTypeCopy;\r\n            }\r\n        }\r\n\r\n        if (operation == TokenType.keywordInstanceof) {\r\n            if (secondOperandType instanceof StaticClass || secondOperandType instanceof Interface) {\r\n                return booleanPrimitiveTypeCopy;\r\n            }\r\n        }\r\n\r\n        return null;\r\n\r\n    }\r\n\r\n    public compute(operation: TokenType, firstOperand: Value, secondOperand?: Value) {\r\n        if (operation == TokenType.equal) {\r\n            return firstOperand.value == secondOperand.value;\r\n        }\r\n\r\n        if (operation == TokenType.notEqual) {\r\n            return firstOperand.value != secondOperand.value;\r\n        }\r\n\r\n        if (operation == TokenType.keywordInstanceof) {\r\n            let typeLeft: Klass = <Klass>(<RuntimeObject>firstOperand.value).class;\r\n            let typeRight = secondOperand.type;\r\n            if (typeRight instanceof StaticClass) {\r\n\r\n                while (typeLeft != null) {\r\n                    if (typeLeft === typeRight.Klass) return true;\r\n                    typeLeft = typeLeft.baseClass;\r\n                }\r\n                return false;\r\n            }\r\n            if (typeRight instanceof Interface) {\r\n                while (typeLeft != null) {\r\n                    for (let i of typeLeft.implements) {\r\n                        if (i === typeRight) return true;\r\n                    }\r\n                    typeLeft = typeLeft.baseClass;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * returns all visible methods of this class and all of its base classes\r\n     */\r\n    public getMethods(upToVisibility: Visibility, identifier?: string): Method[] {\r\n\r\n        let methods: Method[] = this.methods.filter((method) => {\r\n            return method.visibility <= upToVisibility && (identifier == null || method.identifier == identifier);\r\n        });\r\n\r\n        if (this.baseClass != null && (identifier == null || identifier != this.identifier || methods.length == 0)) {\r\n            let baseClassUptoVisibility = upToVisibility == Visibility.public ? upToVisibility : Visibility.protected;\r\n\r\n            for (let m of this.baseClass.getMethods(baseClassUptoVisibility, identifier == this.identifier ? this.baseClass.identifier : identifier)) {\r\n\r\n                let found = false;\r\n                for (let m1 of methods) {\r\n                    if (m1.signature == m.signature) {\r\n                        found = true;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (!found) {\r\n                    methods.push(m);\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        return methods;\r\n    }\r\n\r\n    /**\r\n     * returns all visible attributes of this class and all of its base classes\r\n     */\r\n    public getAttributes(upToVisibility: Visibility): Attribute[] {\r\n\r\n        let attributes: Attribute[] = [];\r\n        for (let a of this.attributes) {\r\n            if (a.visibility <= upToVisibility) {\r\n                attributes.push(a);\r\n            }\r\n        }\r\n\r\n        if (this.baseClass != null) {\r\n\r\n            let upToVisibilityInBaseClass = upToVisibility == Visibility.public ? upToVisibility : Visibility.protected;\r\n\r\n            for (let a of this.baseClass.getAttributes(upToVisibilityInBaseClass)) {\r\n\r\n                let found = false;\r\n\r\n                if (a.visibility > upToVisibilityInBaseClass) continue;\r\n\r\n                for (let a1 of attributes) {\r\n                    if (a1.identifier == a.identifier) {\r\n                        found = true;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (!found) {\r\n                    attributes.push(a);\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        return attributes;\r\n    }\r\n\r\n    public hasConstructor() {\r\n        for (let m of this.methods) {\r\n            if (m.isConstructor) return true;\r\n        }\r\n\r\n        if (this.baseClass != null) return this.baseClass.hasConstructor();\r\n\r\n        return false;\r\n    }\r\n\r\n    public getConstructor(parameterTypes: Type[], upToVisibility: Visibility, classIdentifier: string = this.identifier): { error: string, methodList: Method[] } {\r\n\r\n        let constructors: Method[] = this.methods.filter((m) => {\r\n            return m.isConstructor;\r\n        });\r\n\r\n        if (constructors.length == 0 && this.baseClass != null) {\r\n            return this.baseClass.getConstructor(parameterTypes, upToVisibility, classIdentifier);\r\n        } else {\r\n            return findSuitableMethods(constructors, this.identifier, parameterTypes, classIdentifier, true);\r\n        }\r\n\r\n    }\r\n\r\n    public getMethodsThatFitWithCasting(identifier: string, parameterTypes: Type[],\r\n        searchConstructor: boolean, upToVisibility: Visibility): { error: string, methodList: Method[] } {\r\n\r\n        let allMethods = this.getMethods(upToVisibility);\r\n\r\n        let methods = findSuitableMethods(allMethods, identifier, parameterTypes, this.identifier, searchConstructor);\r\n\r\n        if (methods.methodList.length == 0 && !searchConstructor) {\r\n            let staticMethods = this.staticClass.getMethodsThatFitWithCasting(identifier, parameterTypes, false, upToVisibility);\r\n            if (staticMethods.error == null) {\r\n                return staticMethods;\r\n            }\r\n\r\n            return methods;\r\n        }\r\n\r\n        return methods;\r\n\r\n    }\r\n\r\n    public getMethod(identifier: string, parameterlist: Parameterlist): Method {\r\n\r\n        let method = this.methodMap.get(identifier + parameterlist.id);\r\n\r\n        if (method == null && this.baseClass != null) {\r\n            return this.baseClass.getMethod(identifier, parameterlist);\r\n        }\r\n\r\n        return method;\r\n    }\r\n\r\n    public getAttribute(identifier: string, upToVisibility: Visibility): { attribute: Attribute, error: string, foundButInvisible: boolean } {\r\n\r\n        let error = null;\r\n        let foundButInvisible: boolean = false;\r\n\r\n        let attribute = this.attributeMap.get(identifier);\r\n        let attributeNotFound = attribute == null;\r\n\r\n        if (attribute == null) {\r\n            error = \"Das Attribut \" + identifier + \" kann nicht gefunden werden.\";\r\n        } else\r\n            if (attribute.visibility > upToVisibility) {\r\n                error = \"Das Attribut \" + identifier + \" hat die Sichtbarkeit \" + Visibility[attribute.visibility] + \" und ist daher hier nicht sichtbar.\";\r\n                attribute = null;\r\n                foundButInvisible = true;\r\n            }\r\n\r\n        if (attribute == null && this.baseClass != null) {\r\n            let upToVisibilityInBaseClass = upToVisibility == Visibility.public ? upToVisibility : Visibility.protected;\r\n\r\n            let baseClassAttribute = this.baseClass.getAttribute(identifier, upToVisibilityInBaseClass);\r\n            if (baseClassAttribute.attribute != null || attributeNotFound) {\r\n                return baseClassAttribute;\r\n            }\r\n\r\n        }\r\n\r\n        return { attribute: attribute, error: error, foundButInvisible: foundButInvisible };\r\n    }\r\n\r\n    public canCastTo(type: Type): boolean {\r\n\r\n        if (type == stringPrimitiveType) {\r\n            return true;\r\n        }\r\n\r\n        if (type instanceof Klass) {\r\n            let baseClass: Klass = this;\r\n\r\n            while (baseClass != null) {\r\n                if (type.getNonGenericIdentifier() == baseClass.getNonGenericIdentifier()) {\r\n                    if (type.typeVariables.length > 0) {\r\n                        let n: number = Math.min(type.typeVariables.length, baseClass.typeVariables.length);\r\n                        for (let i = 0; i < n; i++) {\r\n                            if (!baseClass.typeVariables[i].type.canCastTo(type.typeVariables[i].type)) return false;\r\n                        }\r\n                        return true;\r\n                    }\r\n                    return true;\r\n                }\r\n                baseClass = baseClass.baseClass;\r\n            }\r\n        }\r\n\r\n        if (type instanceof Interface) {\r\n\r\n            let klass: Klass = this;\r\n            while(klass != null){\r\n                for (let i of klass.implements) {\r\n                    if (type.getNonGenericIdentifier() == i.getNonGenericIdentifier()) {\r\n                        return true;\r\n                    }\r\n                }\r\n                klass = klass.baseClass;\r\n            }\r\n        }\r\n\r\n        return false;\r\n\r\n    }\r\n\r\n    public castTo(value: Value, type: Type): Value {\r\n\r\n        return value;\r\n\r\n    }\r\n\r\n    checkInheritance(): { message: string, missingMethods: Method[] } {\r\n\r\n        if (this.baseClass != null && Klass.dontInheritFrom.indexOf(this.baseClass.identifier) >= 0) {\r\n            return { message: \"Aus Performancegründen ist es leider nicht möglich, Unterklassen der Klassen String, Boolean, Character, Integer, Float und Double zu bilden.\", missingMethods: [] };\r\n        }\r\n\r\n        let message = \"\";\r\n        let missingAbstractMethods: Method[] = [];\r\n        let implementedSignatures: string[] = [];\r\n        let missingInterfaceMethods: Method[] = [];\r\n\r\n        let klass: Klass = this;\r\n        let hierarchy: string[] = [klass.identifier];\r\n        while (klass.baseClass != null) {\r\n            klass = klass.baseClass;\r\n            if (hierarchy.indexOf(klass.identifier) >= 0) {\r\n                klass.baseClass = null;  // This is necessary to avoid infinite loops in further compilation\r\n                hierarchy = [klass.identifier].concat(hierarchy);\r\n                message = \"Die Klasse \" + klass.identifier + \" erbt von sich selbst: \";\r\n                message += \"(\" + hierarchy.join(\" extends \") + \")\";\r\n                break;\r\n            }\r\n            hierarchy = [klass.identifier].concat(hierarchy);\r\n        }\r\n\r\n        if (message == \"\") {\r\n\r\n            if (this.baseClass != null && !this.isAbstract) {\r\n\r\n                let abstractMethods: Method[] = [];\r\n\r\n                let klass: Klass = this;\r\n\r\n                // collect abstract Methods\r\n                while (klass != null) {\r\n                    for (let m of klass.methods) {\r\n                        if (m.isAbstract) {\r\n                            abstractMethods.push(m);\r\n                        } else {\r\n                            implementedSignatures.push(m.getSignatureWithReturnParameter());\r\n                        }\r\n                    }\r\n                    klass = klass.baseClass;\r\n                }\r\n\r\n                for (let m of abstractMethods) {\r\n\r\n                    if (implementedSignatures.indexOf(m.getSignatureWithReturnParameter()) < 0) {\r\n                        missingAbstractMethods.push(m);\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if (missingAbstractMethods.length > 0) {\r\n                message = \"Die Klasse \" + this.identifier + \" muss noch folgende Methoden ihrer abstrakten Basisklassen implementieren: \";\r\n\r\n                message += missingAbstractMethods.map((m) => m.getSignatureWithReturnParameter()).join(\", \");\r\n\r\n            }\r\n\r\n            for (let i of this.implements) {\r\n                for (let m of i.getMethods()) {\r\n                    if (implementedSignatures.indexOf(m.getSignatureWithReturnParameter()) < 0) {\r\n                        missingInterfaceMethods.push(m);\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (missingInterfaceMethods.length > 0) {\r\n\r\n                if (message != \"\") message += \"\\n\";\r\n\r\n                message += \"Die Klasse \" + this.identifier + \" muss noch folgende Methoden der von ihr implementierten Interfaces implementieren: \";\r\n\r\n                message += missingInterfaceMethods.map((m) => m.signature).join(\", \");\r\n\r\n            }\r\n\r\n        }\r\n\r\n        return { message: message, missingMethods: missingAbstractMethods.concat(missingInterfaceMethods) };\r\n\r\n    }\r\n\r\n    hasAncestorOrIs(a: Klass | StaticClass) {\r\n        let c: Klass | StaticClass = this;\r\n        let id = a.identifier;\r\n        if (a instanceof Klass) id = a.getNonGenericIdentifier();\r\n\r\n        while (c != null) {\r\n            if (c.getNonGenericIdentifier() == id) return true;\r\n            c = c.baseClass;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public debugOutput(value: Value, maxLength: number = 40): string {\r\n\r\n        let s: string = \"{\";\r\n        let attributes = this.getAttributes(Visibility.private);\r\n        let object = <RuntimeObject>value.value;\r\n\r\n        if (object == null) {\r\n            return \"null\";\r\n        }\r\n\r\n        for (let i = 0; i < attributes.length; i++) {\r\n\r\n            let attribute = attributes[i];\r\n            let v = object.getValue(attribute.identifier);\r\n            if (attribute.type instanceof PrimitiveType) {\r\n                s += attribute.identifier + \":&nbsp;\" + attribute.type.debugOutput(v, maxLength / 2);\r\n            } else {\r\n                s += attribute.identifier + \":&nbsp; {...}\";\r\n            }\r\n            if (i < attributes.length - 1) {\r\n                s += \",&nbsp;\";\r\n            }\r\n\r\n        }\r\n\r\n        return s + \"}\";\r\n    }\r\n\r\n    // static count: number = 0;\r\n    clone(): Klass {\r\n        // Klass.count++;\r\n\r\n        let newKlass: Klass = Object.create(this);\r\n\r\n        newKlass.implements = this.implements.slice(0);\r\n        newKlass.usagePositions = new Map();\r\n        newKlass.isGenericVariantFrom = this;\r\n\r\n        return newKlass;\r\n    }\r\n\r\n}\r\n\r\nexport class StaticClass extends Type {\r\n\r\n    baseClass: StaticClass;\r\n    Klass: Klass;\r\n    // TODO: Initialize\r\n    classObject: RuntimeObject;\r\n\r\n    attributeInitializationProgram: Program;\r\n\r\n    public methods: Method[] = [];\r\n    private methodMap: Map<string, Method> = new Map();\r\n\r\n    public attributes: Attribute[] = [];\r\n    public attributeMap: Map<string, Attribute> = new Map();\r\n\r\n    constructor(klass: Klass) {\r\n        super();\r\n\r\n        this.Klass = klass;\r\n        this.identifier = klass.identifier;\r\n\r\n        if (klass.baseClass != null) {\r\n            this.baseClass = klass.baseClass.staticClass;\r\n        }\r\n\r\n        this.attributeInitializationProgram = {\r\n            method: null,\r\n            module: this.Klass.module,\r\n            statements: [],\r\n            labelManager: null\r\n        }\r\n\r\n        this.attributeInitializationProgram.labelManager = new LabelManager(this.attributeInitializationProgram);\r\n\r\n    }\r\n\r\n    clearUsagePositions() {\r\n        super.clearUsagePositions();\r\n\r\n        for (let m of this.methods) {\r\n            m.clearUsagePositions();\r\n        }\r\n\r\n        for (let a of this.attributes) {\r\n            a.usagePositions = new Map();\r\n        }\r\n\r\n    }\r\n\r\n    public debugOutput(value: Value, maxLength: number = 40): string {\r\n\r\n        let s: string = \"{\";\r\n        let attributes = this.getAttributes(Visibility.private);\r\n        let object = this.classObject;\r\n\r\n        for (let i = 0; i < attributes.length; i++) {\r\n\r\n            let attribute = attributes[i];\r\n            s += attribute.identifier + \": \" + object == null ? '---' : attribute.type.debugOutput(object.getValue(attribute.identifier), maxLength / 2);\r\n            if (i < attributes.length - 1) {\r\n                s += \", \";\r\n            }\r\n\r\n        }\r\n\r\n        return s + \"}\";\r\n    }\r\n\r\n\r\n    getCompletionItems(visibilityUpTo: Visibility,\r\n        leftBracketAlreadyThere: boolean, identifierAndBracketAfterCursor: string,\r\n        rangeToReplace: monaco.IRange): monaco.languages.CompletionItem[] {\r\n\r\n        let itemList: monaco.languages.CompletionItem[] = [];\r\n\r\n        for (let attribute of this.getAttributes(visibilityUpTo)) {\r\n            itemList.push({\r\n                label: attribute.identifier,\r\n                kind: monaco.languages.CompletionItemKind.Field,\r\n                insertText: attribute.identifier,\r\n                range: rangeToReplace,\r\n                documentation: attribute.documentation == null ? undefined : {\r\n                    value: attribute.documentation\r\n                }\r\n            });\r\n        }\r\n\r\n        for (let method of this.getMethods(visibilityUpTo)) {\r\n            itemList.push({\r\n                label: method.getCompletionLabel(),\r\n                filterText: method.identifier,\r\n                kind: monaco.languages.CompletionItemKind.Method,\r\n                insertText: method.getCompletionSnippet(leftBracketAlreadyThere),\r\n                range: rangeToReplace,\r\n                command: {\r\n                    id: \"editor.action.triggerParameterHints\",\r\n                    title: '123',\r\n                    arguments: []\r\n                },\r\n                insertTextRules: monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet,\r\n                documentation: method.documentation == null ? undefined : {\r\n                    value: method.documentation\r\n                }\r\n            });\r\n        }\r\n\r\n        return itemList;\r\n    }\r\n\r\n    public equals(type: Type): boolean {\r\n        return type == this;\r\n    }\r\n\r\n    public addMethod(method: Method) {\r\n        this.methods.push(method);\r\n        this.methodMap.set(method.signature, method);\r\n    }\r\n\r\n    public addAttribute(attribute: Attribute) {\r\n        this.attributes.push(attribute);\r\n        this.attributeMap.set(attribute.identifier, attribute);\r\n    }\r\n\r\n    public getResultType(operation: TokenType, secondOperandType?: Type): Type {\r\n\r\n        return null;\r\n\r\n    }\r\n\r\n    public compute(operation: TokenType, firstOperand: Value, secondOperand?: Value) {\r\n        return null;\r\n    }\r\n\r\n    public getMethodsThatFitWithCasting(identifier: string, parameterTypes: Type[],\r\n        searchConstructor: boolean, upToVisibility: Visibility): { error: string, methodList: Method[] } {\r\n\r\n        return findSuitableMethods(this.getMethods(upToVisibility), identifier, parameterTypes,\r\n            this.Klass.identifier, searchConstructor);\r\n\r\n    }\r\n\r\n    /**\r\n     * returns all methods of this class and all of its base classes\r\n     * @param isStatic returns only static methods if true\r\n     */\r\n    public getMethods(upToVisibility: Visibility, identifier?: string): Method[] {\r\n\r\n        let methods: Method[] = this.methods.slice().filter((method) => {\r\n            return method.visibility <= upToVisibility && (identifier == null || identifier == method.identifier);\r\n        });\r\n\r\n        if (this.baseClass != null) {\r\n            let baseClassUptoVisibility = upToVisibility == Visibility.public ? Visibility.public : Visibility.protected;\r\n            for (let m of this.baseClass.getMethods(baseClassUptoVisibility, identifier)) {\r\n\r\n                let found = false;\r\n                for (let m1 of methods) {\r\n                    if (m1.signature == m.signature) {\r\n                        found = true;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (!found) {\r\n                    methods.push(m);\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        return methods;\r\n    }\r\n\r\n    /**\r\n     * returns all attributes of this class and all of its base classes\r\n     * @param isStatic return only static attributes if true\r\n     */\r\n    public getAttributes(visibilityUpTo: Visibility): Attribute[] {\r\n\r\n        let attributes: Attribute[] = this.attributes.filter((attribute) => {\r\n            return attribute.visibility <= visibilityUpTo;\r\n        });\r\n\r\n        if (this.baseClass != null) {\r\n\r\n            let visibilityUpToBaseClass = visibilityUpTo == Visibility.public ? visibilityUpTo : Visibility.protected;\r\n\r\n            for (let a of this.baseClass.getAttributes(visibilityUpToBaseClass)) {\r\n\r\n                let found = false;\r\n\r\n                for (let a1 of attributes) {\r\n                    if (a1.identifier == a.identifier) {\r\n                        found = true;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (!found) {\r\n                    attributes.push(a);\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        return attributes;\r\n    }\r\n\r\n    public getMethod(identifier: string, parameterlist: Parameterlist): Method {\r\n\r\n        let method = this.methodMap.get(identifier + parameterlist.id);\r\n\r\n        if (method == null && this.baseClass != null) {\r\n            return this.baseClass.getMethod(identifier, parameterlist);\r\n        }\r\n\r\n        return method;\r\n    }\r\n\r\n    public getAttribute(identifier: string, upToVisibility: Visibility): { attribute: Attribute, error: string, foundButInvisible: boolean } {\r\n\r\n        let error = \"\";\r\n        let notFound = false;\r\n        let attribute = this.attributeMap.get(identifier);\r\n\r\n        if (attribute == null) {\r\n            notFound = true;\r\n            error = \"Das Attribut \" + identifier + \" konnte nicht gefunden werden.\";\r\n        } else if (attribute.visibility > upToVisibility) {\r\n            error = \"Das Attribut \" + identifier + \" hat die Sichtbarkeit \" + Visibility[attribute.visibility] + \" und ist hier daher nicht sichtbar.\";\r\n            attribute = null;\r\n        }\r\n\r\n        if (attribute == null && this.baseClass != null) {\r\n            let upToVisibilityInBaseClass = upToVisibility == Visibility.public ? upToVisibility : Visibility.protected;\r\n\r\n            let baseClassAttributeWithError = this.baseClass.getAttribute(identifier, upToVisibilityInBaseClass);\r\n            if (notFound) {\r\n                return baseClassAttributeWithError;\r\n            }\r\n        }\r\n\r\n        return { attribute: attribute, error: error, foundButInvisible: !notFound };\r\n    }\r\n\r\n    public canCastTo(type: Type): boolean {\r\n\r\n        return false;\r\n\r\n    }\r\n\r\n    public castTo(value: Value, type: Type): Value {\r\n        return value;\r\n    }\r\n\r\n    hasAncestorOrIs(a: Klass | StaticClass) {\r\n        let c: Klass | StaticClass = this;\r\n        while (c != null) {\r\n            if (c == a) return true;\r\n            c = c.baseClass;\r\n        }\r\n        return false;\r\n    }\r\n\r\n}\r\n\r\nexport class Interface extends Type {\r\n\r\n    // for Generics:\r\n    typeVariables: TypeVariable[] = [];\r\n    isGenericVariantFrom: Interface;\r\n    typeVariablesReady: boolean = true;\r\n\r\n    public module: Module;\r\n\r\n    public extends: Interface[] = [];\r\n\r\n    public methods: Method[] = [];\r\n    private methodMap: Map<string, Method> = new Map();\r\n\r\n    constructor(identifier: string, module: Module, documentation?: string) {\r\n        super();\r\n        this.documentation = documentation;\r\n        this.identifier = identifier;\r\n        this.module = module;\r\n    }\r\n\r\n    getNonGenericIdentifier(): string {\r\n        let k: Interface = this;\r\n        while (k.isGenericVariantFrom != null) k = k.isGenericVariantFrom;\r\n        return k.identifier;\r\n    }\r\n\r\n    getThisOrExtendedInterface(identifier: String){\r\n        if(this.getNonGenericIdentifier() == identifier) return this;\r\n        for(let if1 of this.extends){\r\n            let if2 = if1.getThisOrExtendedInterface(identifier);\r\n            if(if2 != null) return if2;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    // static count: number = 0;\r\n    clone(): Interface {\r\n        // Interface.count++;\r\n        let newInterface: Interface = Object.create(this);\r\n\r\n        newInterface.usagePositions = new Map();\r\n        newInterface.isGenericVariantFrom = this;\r\n\r\n        return newInterface;\r\n    }\r\n\r\n    clearUsagePositions() {\r\n        super.clearUsagePositions();\r\n\r\n        for (let m of this.methods) {\r\n            m.clearUsagePositions();\r\n        }\r\n\r\n    }\r\n\r\n\r\n    getCompletionItems(leftBracketAlreadyThere: boolean, identifierAndBracketAfterCursor: string,\r\n        rangeToReplace: monaco.IRange): monaco.languages.CompletionItem[] {\r\n\r\n        let itemList: monaco.languages.CompletionItem[] = [];\r\n\r\n        for (let method of this.getMethods()) {\r\n            itemList.push({\r\n                label: method.getCompletionLabel(),\r\n                filterText: method.identifier,\r\n                kind: monaco.languages.CompletionItemKind.Method,\r\n                insertText: method.getCompletionSnippet(leftBracketAlreadyThere),\r\n                range: rangeToReplace,\r\n                command: {\r\n                    id: \"editor.action.triggerParameterHints\",\r\n                    title: '123',\r\n                    arguments: []\r\n                },\r\n                insertTextRules: monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet,\r\n                documentation: method.documentation == null ? undefined : {\r\n                    value: method.documentation\r\n                }\r\n            });\r\n        }\r\n\r\n        return itemList;\r\n    }\r\n\r\n    public debugOutput(value: Value, maxLength: number = 40): string {\r\n        if (value.value == null) {\r\n            return \"null\";\r\n        } else {\r\n            if (value.value instanceof RuntimeObject) {\r\n                return value.value.class.debugOutput(value);\r\n            } else {\r\n                return \"{...}\";\r\n            }\r\n        }\r\n    }\r\n\r\n    public equals(type: Type): boolean {\r\n        return type == this;\r\n    }\r\n\r\n    public addMethod(method: Method) {\r\n        this.methods.push(method);\r\n        this.methodMap.set(method.signature, method);\r\n    }\r\n\r\n    public getResultType(operation: TokenType, secondOperandType?: Type): Type {\r\n\r\n        if (operation == TokenType.equal || operation == TokenType.notEqual) {\r\n            return booleanPrimitiveTypeCopy;\r\n        }\r\n\r\n        if (operation == TokenType.keywordInstanceof) {\r\n            if (secondOperandType instanceof StaticClass || secondOperandType instanceof Interface) {\r\n                return booleanPrimitiveTypeCopy;\r\n            }\r\n        }\r\n\r\n        return null;\r\n\r\n    }\r\n\r\n    public compute(operation: TokenType, firstOperand: Value, secondOperand?: Value) {\r\n\r\n        if (operation == TokenType.equal) {\r\n            return firstOperand.value == secondOperand.value;\r\n        }\r\n\r\n        if (operation == TokenType.notEqual) {\r\n            return firstOperand.value != secondOperand.value;\r\n        }\r\n\r\n        return null;\r\n\r\n    }\r\n\r\n    /**\r\n     * returns all methods of this interface\r\n     * @param isStatic is not used in interfaces\r\n     */\r\n    public getMethods(): Method[] {\r\n\r\n        return this.methods;\r\n\r\n    }\r\n\r\n    public getMethod(identifier: string, parameterlist: Parameterlist): Method {\r\n\r\n        return this.methodMap.get(identifier + parameterlist.id);\r\n\r\n    }\r\n\r\n    public canCastTo(type: Type): boolean {\r\n\r\n        if (type instanceof Interface) {\r\n            let nonGenericCastable = false;\r\n            if (type.getNonGenericIdentifier() == this.getNonGenericIdentifier()) {\r\n                nonGenericCastable = true;\r\n                if (this.typeVariables.length == 0) return true;\r\n                let type2 = <Interface>type;\r\n                if (this.typeVariables.length != type2.typeVariables.length) return false;\r\n                for (let i = 0; i < this.typeVariables.length; i++) {\r\n                    let tv = this.typeVariables[i];\r\n                    let tvOther = type2.typeVariables[i];\r\n                    if (!tvOther.type.canCastTo(tv.type)) return false;\r\n                }\r\n                return false;\r\n            } else {\r\n                for (let type1 of this.extends) {\r\n                    if (type1.canCastTo(type)) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n            return false;\r\n        } else {\r\n            if (type instanceof Klass && type.getNonGenericIdentifier() == \"Object\") {\r\n\r\n            }\r\n            return false;\r\n        }\r\n\r\n        // return (type instanceof Klass) || (type instanceof Interface);\r\n    }\r\n\r\n    public castTo(value: Value, type: Type): Value {\r\n        return value;\r\n    }\r\n\r\n    public getMethodsThatFitWithCasting(identifier: string, parameterTypes: Type[], searchConstructor: boolean): { error: string, methodList: Method[] } {\r\n\r\n        return findSuitableMethods(this.getMethods(), identifier, parameterTypes, this.identifier, searchConstructor);\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\nfunction findSuitableMethods(methodList: Method[], identifier: string, parameterTypes: Type[],\r\n    classIdentifier: string,\r\n    searchConstructor: boolean): { error: string, methodList: Method[] } {\r\n\r\n    let suitableMethods: Method[] = [];\r\n    let howManyCastingsMax: number = 10000;\r\n    let error = null;\r\n\r\n    let oneWithCorrectIdentifierFound = false;\r\n\r\n    for (let m of methodList) {\r\n\r\n        let howManyCastings = 0;\r\n        if (m.identifier == identifier || m.isConstructor && searchConstructor) {\r\n\r\n            oneWithCorrectIdentifierFound = true;\r\n\r\n            let isEllipsis = m.hasEllipsis();\r\n            if (m.getParameterCount() == parameterTypes.length || (isEllipsis && m.getParameterCount() <= parameterTypes.length)) {\r\n\r\n                let suits = true;\r\n\r\n                let i = 0;\r\n\r\n                for (i = 0; i < m.getParameterCount() - (isEllipsis ? 1 : 0); i++) {\r\n                    let mParameterType = m.getParameterType(i);\r\n                    let givenType = parameterTypes[i];\r\n\r\n                    if (givenType == null) {\r\n                        suits = false; break;\r\n                    }\r\n\r\n                    if (mParameterType == givenType) {\r\n                        continue;\r\n                    }\r\n\r\n                    if (givenType.canCastTo(mParameterType)) {\r\n                        howManyCastings++;\r\n                        continue;\r\n                    }\r\n\r\n                    suits = false;\r\n                    break;\r\n                }\r\n\r\n                // Ellipsis!\r\n                if(suits && isEllipsis){\r\n                    let mParameterEllipsis = m.getParameter(i);\r\n                    let mParameterTypeEllispsis = (<ArrayType>mParameterEllipsis.type).arrayOfType;\r\n\r\n                        \r\n                        for (let j = i; j < parameterTypes.length; j++) {\r\n                            let givenType = parameterTypes[i];\r\n        \r\n                            if (givenType == null) {\r\n                                suits = false; break;\r\n                            }\r\n        \r\n                            if (mParameterTypeEllispsis == givenType) {\r\n                                continue;\r\n                            }\r\n        \r\n                            if (givenType.canCastTo(mParameterTypeEllispsis)) {\r\n                                howManyCastings++;\r\n                                continue;\r\n                            }\r\n        \r\n                            suits = false;\r\n                            break;\r\n                        }\r\n        \r\n                }\r\n\r\n                if (suits && howManyCastings <= howManyCastingsMax) {\r\n                    if (howManyCastings < howManyCastingsMax) {\r\n                        suitableMethods = [];\r\n                    }\r\n                    suitableMethods.push(m);\r\n                    howManyCastingsMax = howManyCastings;\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    if (suitableMethods.length == 0) {\r\n\r\n        if (oneWithCorrectIdentifierFound) {\r\n            if(parameterTypes.length == 0){\r\n                error = searchConstructor ? \"Es gibt keinen parameterlosen Konstruktor der Klasse \" + classIdentifier : \"Die vorhandenen Methoden mit dem Bezeichner \" + identifier + \" haben alle mindestens einen Parameter. Hier wird aber kein Parameterwert übergeben.\";\r\n            } else {\r\n                let typeString = parameterTypes.map(type => type.identifier).join(\", \");\r\n                error = searchConstructor ? `Die Parametertypen (${typeString}) passen zu keinem Konstruktor der Klasse ${classIdentifier}` : `Die Parametertypen (${typeString}) passen zu keiner der vorhandenen Methoden mit dem Bezeichner ${identifier}.`;\r\n            }\r\n        } else {\r\n            error = \"Der Typ \" + classIdentifier + \" besitzt keine Methode mit dem Bezeichner \" + identifier + \".\";\r\n        }\r\n\r\n    }\r\n\r\n    if (suitableMethods.length > 1) {\r\n        suitableMethods = suitableMethods.slice(0, 1);\r\n        // error = \"Zu den gegebenen Parametern hat der Typ \" + classIdentifier + \" mehrere passende Methoden.\";\r\n    }\r\n\r\n    return {\r\n        error: error,\r\n        methodList: suitableMethods\r\n    };\r\n\r\n}\r\n\r\nexport function getVisibilityUpTo(objectType: Klass | StaticClass, currentClassContext: Klass | StaticClass): Visibility {\r\n\r\n    if (currentClassContext == null) {\r\n        return Visibility.public;\r\n    }\r\n\r\n    if (objectType instanceof StaticClass) objectType = objectType.Klass;\r\n    if (currentClassContext instanceof StaticClass) currentClassContext = currentClassContext.Klass;\r\n\r\n    if (objectType == currentClassContext) {\r\n        return Visibility.private;\r\n    }\r\n\r\n    if (currentClassContext.hasAncestorOrIs(objectType)) {\r\n        return Visibility.protected;\r\n    }\r\n\r\n    return Visibility.public;\r\n\r\n}\r\n\r\n","import { Method, Attribute, Value, Type, Parameterlist, PrimitiveType } from \"./Types.js\";\r\nimport { TokenType } from \"../lexer/Token.js\";\r\nimport { intPrimitiveType } from \"./PrimitiveTypes.js\";\r\nimport { Visibility } from \"./Class.js\";\r\n\r\nexport class ArrayType extends Type {\r\n\r\n    public arrayOfType: Type;\r\n    private lengthAttribute: Attribute;\r\n\r\n    constructor(arrayOfType: Type){\r\n        super();\r\n        this.arrayOfType = arrayOfType;\r\n        this.identifier = \"Array\";\r\n\r\n        if(arrayOfType != null){\r\n            this.identifier = arrayOfType.identifier + \"[]\";\r\n        }\r\n\r\n        this.lengthAttribute = new Attribute(\"length\", intPrimitiveType, (object: Value) => {\r\n            return (<any[]>object.value).length;\r\n        }, false, Visibility.public, true);\r\n    }   \r\n\r\n    public equals(type:Type): boolean{\r\n        return (type instanceof ArrayType) && type.arrayOfType.equals(this.arrayOfType);\r\n    }\r\n\r\n    public get id():string{\r\n        return this.arrayOfType.identifier + \"[]\";\r\n    }\r\n\r\n    public getResultType(operation: TokenType, secondOperandType?: Type): Type {\r\n        if(operation == TokenType.referenceElement){\r\n            return this.arrayOfType;\r\n        }\r\n\r\n        return null;\r\n\r\n    }\r\n\r\n    public compute(operation: TokenType, firstOperand: Value, secondOperand?: Value): any {\r\n\r\n        if(operation == TokenType.referenceElement){\r\n            return <any[]>firstOperand.value[<number>secondOperand.value];\r\n        }\r\n\r\n    }\r\n\r\n    public getMethod(identifier: string, signature: Parameterlist): Method{\r\n        return null;\r\n    }\r\n\r\n    public getAttribute(identifier: string): Attribute{\r\n        if(identifier == \"length\"){\r\n            return this.lengthAttribute;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public canCastTo(type: Type): boolean{\r\n\r\n        if(!(type instanceof ArrayType)){\r\n            return false;\r\n        }\r\n\r\n        return this.arrayOfType.canCastTo(type.arrayOfType);\r\n    }\r\n\r\n    public castTo(value: Value, type: Type): Value {\r\n\r\n        let array = (<Value[]>value.value).slice();\r\n        let destType = (<ArrayType><unknown>type).arrayOfType;\r\n\r\n        for(let a of array){\r\n            this.arrayOfType.castTo(a, destType);\r\n        }\r\n\r\n        return {\r\n            type: type,\r\n            value: array\r\n        }\r\n\r\n    }\r\n\r\n    public debugOutput(value: Value, maxLength: number = 40):string {\r\n\r\n        let length: number = 0;\r\n\r\n        if(value.value != null){\r\n\r\n            let s: string = \"[\";\r\n\r\n                let a: Value[] = <Value[]>value.value;\r\n\r\n                for(let i = 0; i < a.length; i++){\r\n\r\n                    let v = a[i];\r\n\r\n                    let s1 = v.type.debugOutput(v, maxLength/2);\r\n\r\n                    s += s1;\r\n                    if(i < a.length - 1) s += \",&nbsp;\";\r\n                    length += s1.length;\r\n\r\n                    if(length > maxLength) break;\r\n\r\n                }\r\n\r\n            return s + \"]\"\r\n\r\n        } else return \"null\";\r\n\r\n\r\n    }\r\n\r\n\r\n}\r\n","import { Method, Parameterlist, Value } from \"./Types.js\";\r\nimport { stringPrimitiveType } from \"./PrimitiveTypes.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { Module } from \"../parser/Module.js\";\r\nimport { Interface, Klass } from \"./Class.js\";\r\n// neu:\r\nimport { Enum, EnumRuntimeObject } from \"./Enum.js\";\r\nimport { type } from \"jquery\";\r\nimport { json } from \"express\";\r\nimport { ArrayType } from \"./Array.js\";\r\n\r\n\r\n/**\r\n * Base class for all classes\r\n */\r\n\r\nexport class ObjectClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n        super(\"Object\", module, \"Basisklasse aller Klassen\");\r\n\r\n        // stringPrimitiveType is used here before it is initialized. This problem is solved\r\n        // in the constructor of StringprimitiveType.\r\n        this.addMethod(new Method(\"toString\", new Parameterlist([]), stringPrimitiveType,\r\n            (parameters) => {\r\n\r\n                return \"(\" + (<RuntimeObject><unknown>parameters[0].value).class.identifier + \")\";\r\n\r\n            }, false, false));\r\n\r\n\r\n        // // Add default parameterless constructor\r\n        // let m = new Method(\"Object\", new Parameterlist([]), null,\r\n        // (parameters) => {\r\n\r\n        // }, false, false);\r\n        \r\n        // m.isConstructor = true;\r\n\r\n        // this.addMethod(m);\r\n\r\n    }\r\n\r\n\r\n\r\n}\r\n","import { Klass, Visibility } from \"../Class.js\";\r\nimport { Method, Parameterlist, Attribute, Value, Type, PrimitiveType } from \"../Types.js\";\r\nimport { intPrimitiveType, stringPrimitiveType, doublePrimitiveType, floatPrimitiveType, booleanPrimitiveType } from \"../PrimitiveTypes.js\";\r\nimport { RuntimeObject } from \"../../../interpreter/RuntimeObject.js\";\r\n\r\n\r\nexport class IntegerClass extends Klass {\r\n\r\n    unboxableAs = [];\r\n\r\n    constructor(baseClass: Klass) {\r\n        super(\"Integer\", null, \"Wrapper-Klasse, um int-Werte in Collections verenden zu können.\");\r\n        this.baseClass = baseClass;\r\n\r\n        this.addAttribute(new Attribute(\"MAX_VALUE\", intPrimitiveType, (value) => { value.value = Number.MAX_SAFE_INTEGER }, true, Visibility.public, true, \"Der größte Wert, den eine Variable vom Typ int annehmen kann\"));\r\n        this.addAttribute(new Attribute(\"MIN_VALUE\", intPrimitiveType, (value) => { value.value = Number.MIN_SAFE_INTEGER }, true, Visibility.public, true, \"Der kleinste Wert, den eine Variable vom Typ int annehmen kann\"));\r\n\r\n        this.staticClass.classObject = new RuntimeObject(this.staticClass);\r\n        this.staticClass.classObject.initializeAttributeValues();\r\n\r\n    }\r\n\r\n    canCastTo(type: Type): boolean{\r\n        return this.unboxableAs.indexOf(type) >= 0 || super.canCastTo(type);\r\n    }\r\n\r\n    init() {\r\n\r\n        this.unboxableAs = [intPrimitiveType, floatPrimitiveType, doublePrimitiveType];\r\n\r\n        this.addMethod(new Method(\"Integer\", new Parameterlist([\r\n            { identifier: \"int-wert\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                parameters[0].value = parameters[1].value;\r\n\r\n            }, false, false, \"Instanziert ein neues Integer-Objekt\", true));\r\n\r\n        this.addMethod(new Method(\"Integer\", new Parameterlist([\r\n            { identifier: \"text\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                parameters[0].value = Number.parseInt(parameters[1].value);\r\n\r\n            }, false, false, \"Instanziert ein neues Integer-Objekt, indem die übergebene Zeichenkette in einen int-Wert umgewandelt wird.\", true));\r\n\r\n\r\n        this.addMethod(new Method(\"doubleValue\", new Parameterlist([]), doublePrimitiveType,\r\n            (parameters) => { return parameters[0].value; }, false, false, \"Wandelt das Integer-Objekt in einen double-Wert um\"));\r\n        this.addMethod(new Method(\"floatValue\", new Parameterlist([]), floatPrimitiveType,\r\n            (parameters) => { return parameters[0].value; }, false, false, \"Wandelt das Integer-Objekt in einen float-Wert um\"));\r\n        this.addMethod(new Method(\"intValue\", new Parameterlist([]), intPrimitiveType,\r\n            (parameters) => { return parameters[0].value; }, false, false, \"Wandelt das Integer-Objekt in einen int-Wert um\"));\r\n\r\n        this.addMethod(new Method(\"compareTo\", new Parameterlist([\r\n            { identifier: \"anotherInteger\", type: this, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let v0 = parameters[0].value;\r\n                let v1 = parameters[1].value;\r\n                if (v0 > v1) return 1;\r\n                if (v0 < v1) return -1;\r\n                return 0;\r\n            }, false, false, \"Ist der Wert größer als der übergebene Wert, so wird +1 zurückgegeben. Ist er kleiner, so wird -1 zurückgegeben. Sind die Werte gleich, so wird 0 zurückgegeben.\"));\r\n\r\n        this.addMethod(new Method(\"equals\", new Parameterlist([\r\n            { identifier: \"anotherInteger\", type: this, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return parameters[0].value == parameters[1].value;\r\n            }, false, false, \"Gibt genau dann true zurück, wenn der Wert gleich dem übergebenen Wert ist.\"));\r\n\r\n        this.addMethod(new Method(\"toString\", new Parameterlist([\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                return \"\" + parameters[0].value;\r\n            }, false, false, \"Gibt den Wert des Objekts als String-Wert zur Basis 10 zurück.\"));\r\n\r\n        this.addMethod(new Method(\"hashCode\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return parameters[0].value;\r\n            }, false, false, \"Gibt den hashCode des Objekts zurück.\"));\r\n\r\n        this.addMethod(new Method(\"parseInt\", new Parameterlist([\r\n            { identifier: \"s\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return Number.parseInt(parameters[1].value);\r\n            }, false, true, \"Wandelt die Zeichenkette in einen int-Wert um\"));\r\n\r\n        this.addMethod(new Method(\"parseInt\", new Parameterlist([\r\n            { identifier: \"s\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"radix\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return Number.parseInt(parameters[1].value, parameters[2].value);\r\n            }, false, true, \"Wandelt die Zeichenkette s in einen int-Wert um. Dabei wird s als Zahl im Zahlensystem mit der Basis radix interpretiert.\"));\r\n\r\n        this.addMethod(new Method(\"signum\", new Parameterlist([\r\n            { identifier: \"i\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return Math.sign(parameters[1].value);\r\n            }, false, true, \"Gibt das Signum der übergebenen Zahl zurück, also -1 falls negativ, 0 falls 0 und +1 falls positiv.\"));\r\n\r\n        this.addMethod(new Method(\"toBinary\", new Parameterlist([\r\n            { identifier: \"i\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                return (parameters[1].value >>> 0).toString(2);\r\n            }, false, true, \"Gibt die übergebene Zahl als Binärrepräsentation zurück.\"));\r\n\r\n        this.addMethod(new Method(\"toHex\", new Parameterlist([\r\n            { identifier: \"i\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                return (parameters[1].value >>> 0).toString(16);\r\n            }, false, true, \"Gibt die übergebene Zahl als Hexadezimalrepräsentation zurück.\"));\r\n\r\n        this.addMethod(new Method(\"toOctal\", new Parameterlist([\r\n            { identifier: \"i\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                return (parameters[1].value >>> 0).toString(8);\r\n            }, false, true, \"Gibt die übergebene Zahl als Oktalrepräsentation zurück.\"));\r\n\r\n        this.addMethod(new Method(\"toString\", new Parameterlist([\r\n            { identifier: \"i\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                return (parameters[1].value).toString();\r\n            }, false, true, \"Gibt die übergebene Zahl als String-Wert zur Basis 10 zurück.\"));\r\n\r\n        this.addMethod(new Method(\"toString\", new Parameterlist([\r\n            { identifier: \"i\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"radix\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                return (parameters[1].value >>> 0).toString(parameters[1].value);\r\n            }, false, true, \"Gibt die übergebene Zahl als String-Wert zur Basis radix zurück.\"));\r\n\r\n        this.addMethod(new Method(\"valueOf\", new Parameterlist([\r\n            { identifier: \"i\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), this,\r\n            (parameters) => {\r\n                return parameters[1].value;\r\n            }, false, true, \"Gibt die übergebene Zahl als Integer-Objekt zurück.\"));\r\n\r\n        this.addMethod(new Method(\"valueOf\", new Parameterlist([\r\n            { identifier: \"s\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), this,\r\n            (parameters) => {\r\n                return Number.parseInt(parameters[1].value);\r\n            }, false, true, \"Interpretiert die übergebene Zeichenkette als Dezimalzahl und gib sie als Integer-Objekt zurück.\"));\r\n\r\n        this.addMethod(new Method(\"valueOf\", new Parameterlist([\r\n            { identifier: \"s\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"radix\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), this,\r\n            (parameters) => {\r\n                return Number.parseInt(parameters[1].value, parameters[2].value);\r\n            }, false, true, \"Interpretiert die übergebene Zeichenkette als Zahl zur Basis radix und gib sie als Integer-Objekt zurück.\"));\r\n\r\n        // this.addMethod(new Method(\"charAt\", new Parameterlist([{ identifier: \"Position\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: false }]), charPrimitiveType,\r\n        //     (parameters) => { return (<string>parameters[0].value).charAt(<number>(parameters[1].value)); }, false, false, \"Zeichen an der gegebenen Position.\\n**Bem.: ** Position == 0 bedeutet das erste Zeichen in der Zeichenkette, Position == 1 das zweite usw. .\"));\r\n\r\n    }\r\n\r\n    public debugOutput(value: Value): string {\r\n        return \"\" + <number>value.value;\r\n    }\r\n\r\n\r\n}\r\n","import { Klass, Visibility } from \"../Class.js\";\r\nimport { Method, Parameterlist, Attribute, Value, Type, PrimitiveType } from \"../Types.js\";\r\nimport { intPrimitiveType, stringPrimitiveType, doublePrimitiveType, floatPrimitiveType, booleanPrimitiveType } from \"../PrimitiveTypes.js\";\r\nimport { RuntimeObject } from \"../../../interpreter/RuntimeObject.js\";\r\n\r\n\r\nexport class FloatClass extends Klass {\r\n\r\n    unboxableAs = [];\r\n\r\n    constructor(baseClass: Klass) {\r\n        super(\"Float\", null, \"Wrapper-Klasse, um float-Werte in Collections verenden zu können.\");\r\n        this.baseClass = baseClass;\r\n\r\n        this.addAttribute(new Attribute(\"MAX_VALUE\", floatPrimitiveType, (value) => { value.value = Number.MAX_VALUE }, true, Visibility.public, true, \"Der größte Wert, den eine Variable vom Typ float annehmen kann\"));\r\n        this.addAttribute(new Attribute(\"MIN_VALUE\", floatPrimitiveType, (value) => { value.value = Number.MIN_VALUE }, true, Visibility.public, true, \"Der kleinste Wert, den eine Variable vom Typ float annehmen kann\"));\r\n        this.addAttribute(new Attribute(\"NaN_VALUE\", floatPrimitiveType, (value) => { value.value = Number.NaN }, true, Visibility.public, true, \"Der \\\"Not a Number\\\"-Wert vom Typ float\"));\r\n        this.addAttribute(new Attribute(\"NEGATIVE_INFINITY\", floatPrimitiveType, (value) => { value.value = Number.NEGATIVE_INFINITY }, true, Visibility.public, true, \"Der \\\"negative infinity\\\"-Wert vom Typ float\"));\r\n        this.addAttribute(new Attribute(\"POSITIVE_INFINITY\", floatPrimitiveType, (value) => { value.value = Number.POSITIVE_INFINITY }, true, Visibility.public, true, \"Der \\\"positive infinity\\\"-Wert vom Typ float\"));\r\n\r\n        this.staticClass.classObject = new RuntimeObject(this.staticClass);\r\n        this.staticClass.classObject.initializeAttributeValues();\r\n\r\n    }\r\n\r\n    canCastTo(type: Type): boolean {\r\n        return this.unboxableAs.indexOf(type) >= 0 || super.canCastTo(type);\r\n    }\r\n\r\n    init() {\r\n\r\n        this.unboxableAs = [floatPrimitiveType, doublePrimitiveType];\r\n\r\n        this.addMethod(new Method(\"Float\", new Parameterlist([\r\n            { identifier: \"double-value\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                parameters[0].value = parameters[1].value;\r\n\r\n            }, false, false, \"Instanziert ein neues Float-Objekt\", true));\r\n\r\n        this.addMethod(new Method(\"Float\", new Parameterlist([\r\n            { identifier: \"int-value\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                parameters[0].value = parameters[1].value;\r\n\r\n            }, false, false, \"Instanziert ein neues Float-Objekt\", true));\r\n\r\n        this.addMethod(new Method(\"Float\", new Parameterlist([\r\n            { identifier: \"text\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                parameters[0].value = Number.parseFloat(parameters[1].value);\r\n\r\n            }, false, false, \"Instanziert ein neues Float-Objekt, indem die übergebene Zeichenkette in einen float-Wert umgewandelt wird.\", true));\r\n\r\n\r\n        this.addMethod(new Method(\"doubleValue\", new Parameterlist([]), doublePrimitiveType,\r\n            (parameters) => { return parameters[0].value; }, false, false, \"Wandelt das Float-Objekt in einen double-Wert um.\"));\r\n        this.addMethod(new Method(\"floatValue\", new Parameterlist([]), floatPrimitiveType,\r\n            (parameters) => { return parameters[0].value; }, false, false, \"Wandelt das Float-Objekt in einen float-Wert um.\"));\r\n        this.addMethod(new Method(\"intValue\", new Parameterlist([]), intPrimitiveType,\r\n            (parameters) => { return Math.trunc(parameters[0].value); }, false, false, \"Wandelt das Float-Objekt durch Abrunden in einen int-Wert um.\"));\r\n\r\n        this.addMethod(new Method(\"compareTo\", new Parameterlist([\r\n            { identifier: \"anotherFloat\", type: this, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let v0 = parameters[0].value;\r\n                let v1 = parameters[1].value;\r\n                if (v0 > v1) return 1;\r\n                if (v0 < v1) return -1;\r\n                return 0;\r\n            }, false, false, \"Ist der Wert größer als der übergebene Wert, so wird +1 zurückgegeben. Ist er kleiner, so wird -1 zurückgegeben. Sind die Werte gleich, so wird 0 zurückgegeben.\"));\r\n\r\n        this.addMethod(new Method(\"equals\", new Parameterlist([\r\n            { identifier: \"anotherFloat\", type: this, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return parameters[0].value == parameters[1].value;\r\n            }, false, false, \"Gibt genau dann true zurück, wenn der Wert gleich dem übergebenen Wert ist.\"));\r\n\r\n        this.addMethod(new Method(\"toString\", new Parameterlist([\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                return \"\" + parameters[0].value;\r\n            }, false, false, \"Gibt den Wert des Objekts als String-Wert zurück.\"));\r\n\r\n        this.addMethod(new Method(\"hashCode\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return Math.trunc(parameters[0].value);\r\n            }, false, false, \"Gibt den hashCode des Objekts zurück.\"));\r\n\r\n        this.addMethod(new Method(\"parseFloat\", new Parameterlist([\r\n            { identifier: \"s\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), floatPrimitiveType,\r\n            (parameters) => {\r\n                return Number.parseFloat(parameters[1].value);\r\n            }, false, true, \"Wandelt die Zeichenkette in einen float-Wert um\"));\r\n\r\n        this.addMethod(new Method(\"toString\", new Parameterlist([\r\n            { identifier: \"f\", type: floatPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                return \"\" + parameters[1].value;\r\n            }, false, true, \"Gibt die übergebene Zahl als String-Wert zurück.\"));\r\n\r\n        this.addMethod(new Method(\"valueOf\", new Parameterlist([\r\n            { identifier: \"f\", type: floatPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), this,\r\n            (parameters) => {\r\n                return parameters[1].value;\r\n            }, false, true, \"Gibt die übergebene Zahl als Float-Objekt zurück.\"));\r\n\r\n        this.addMethod(new Method(\"valueOf\", new Parameterlist([\r\n            { identifier: \"s\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), this,\r\n            (parameters) => {\r\n                return Number.parseFloat(parameters[1].value);\r\n            }, false, true, \"Interpretiert die übergebene Zeichenkette als Dezimalzahl und gib sie als Float-Objekt zurück.\"));\r\n\r\n        this.addMethod(new Method(\"isNaN\", new Parameterlist([\r\n            { identifier: \"f\", type: floatPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return parameters[1].value == NaN;\r\n            }, false, true, \"Gibt genau dann true zurück, falls die übergebene float-Zahl NaN (not a Number) ist.\"));\r\n\r\n        this.addMethod(new Method(\"isNaN\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return parameters[0].value == NaN;\r\n            }, false, false, \"Gibt genau dann true zurück, falls das Objekt NaN (not a Number) ist.\"));\r\n\r\n        this.addMethod(new Method(\"isInfinite\", new Parameterlist([\r\n            { identifier: \"f\", type: floatPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return parameters[1].value == Infinity;\r\n            }, false, true, \"Gibt genau dann true zurück, falls die übergebene float-Zahl INFINTITY ist.\"));\r\n\r\n        this.addMethod(new Method(\"isInfinite\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return parameters[0].value == Infinity;\r\n            }, false, false, \"Gibt genau dann true zurück, falls das Objekt INFINITY ist.\"));\r\n\r\n    }\r\n\r\n    public debugOutput(value: Value): string {\r\n        return \"\" + <number>value.value;\r\n    }\r\n\r\n\r\n}\r\n","import { RuntimeObject } from \"../../../interpreter/RuntimeObject.js\";\r\nimport { Klass } from \"../Class.js\";\r\nimport { booleanPrimitiveType, charPrimitiveType, intPrimitiveType, stringPrimitiveType } from \"../PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, Type, Value } from \"../Types.js\";\r\n\r\n\r\nexport class CharacterClass extends Klass {\r\n\r\n    unboxableAs = [];\r\n\r\n    constructor(baseClass: Klass) {\r\n        super(\"Character\", null, \"Wrapper-Klasse, um char-Werte in Collections verenden zu können.\");\r\n        this.baseClass = baseClass;\r\n\r\n        this.staticClass.classObject = new RuntimeObject(this.staticClass);\r\n        this.staticClass.classObject.initializeAttributeValues();\r\n\r\n    }\r\n\r\n    canCastTo(type: Type): boolean {\r\n        return this.unboxableAs.indexOf(type) >= 0 || super.canCastTo(type);\r\n    }\r\n\r\n    init() {\r\n\r\n        this.unboxableAs = [charPrimitiveType, stringPrimitiveType];\r\n\r\n        this.addMethod(new Method(\"Character\", new Parameterlist([\r\n            { identifier: \"char-value\", type: charPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                parameters[0].value = parameters[1].value;\r\n\r\n            }, false, false, \"Instanziert ein neues Character-Objekt\", true));\r\n\r\n\r\n        this.addMethod(new Method(\"charValue\", new Parameterlist([]), charPrimitiveType,\r\n            (parameters) => { return parameters[0].value; }, false, false, \"Wandelt das Character-Objekt in einen char-Wert um\"));\r\n\r\n        this.addMethod(new Method(\"compareTo\", new Parameterlist([\r\n            { identifier: \"anotherCharacter\", type: this, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let v0 = parameters[0].value;\r\n                let v1 = parameters[1].value;\r\n                if (v0 > v1) return 1;\r\n                if (v0 < v1) return -1;\r\n                return 0;\r\n            }, false, false, \"Ist der Wert größer als der übergebene Wert, so wird +1 zurückgegeben. Ist er kleiner, so wird -1 zurückgegeben. Sind die Werte gleich, so wird 0 zurückgegeben.\"));\r\n\r\n        this.addMethod(new Method(\"equals\", new Parameterlist([\r\n            { identifier: \"anotherCharacter\", type: this, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return parameters[0].value == parameters[1].value;\r\n            }, false, false, \"Gibt genau dann true zurück, wenn der Wert gleich dem übergebenen Wert ist.\"));\r\n\r\n        this.addMethod(new Method(\"toString\", new Parameterlist([\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                return parameters[0].value;\r\n            }, false, false, \"Gibt den Wert des Objekts als String-Wert zurück.\"));\r\n\r\n        this.addMethod(new Method(\"hashCode\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return (<string>parameters[0].value).charCodeAt(0);\r\n            }, false, false, \"Gibt den hashCode des Objekts zurück.\"));\r\n\r\n        this.addMethod(new Method(\"charValue\", new Parameterlist([\r\n        ]), charPrimitiveType,\r\n            (parameters) => {\r\n                return parameters[0].value;\r\n            }, false, false, \"Gibt den char-Wert des Objekts zurück.\"));\r\n\r\n        this.addMethod(new Method(\"digit\", new Parameterlist([\r\n            { identifier: \"char-value\", type: charPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"radix\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return Number.parseInt(parameters[1].value, parameters[2].value);\r\n            }, false, true, \"Gibt den numerischen Wert des Zeichens zur Basis radix zurück.\"));\r\n\r\n        this.addMethod(new Method(\"forDigit\", new Parameterlist([\r\n            { identifier: \"int-value\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"radix\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), charPrimitiveType,\r\n            (parameters) => {\r\n                return (<number>parameters[1].value).toString(parameters[2].value).charAt(0);\r\n            }, false, true, \"Gibt den übergebenen Wert als Ziffer im Zahlensystem zur Basis radix zurück.\"));\r\n\r\n        this.addMethod(new Method(\"getNumericValue\", new Parameterlist([\r\n            { identifier: \"char-value\", type: charPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return (<string>parameters[1].value).charCodeAt(0);\r\n            }, false, true, \"Wandelt das Zeichen in einen numerischen Wert (Unicode-Wert) um.\"));\r\n\r\n        this.addMethod(new Method(\"isLetter\", new Parameterlist([\r\n            { identifier: \"char-value\", type: charPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return (<string>parameters[1].value).match(/[a-zäöüß]/i) != null;\r\n            }, false, true, \"Gibt genau dann true zurück, wenn das Zeichen ein deutsches Alphabet-Zeichen ist.\"));\r\n\r\n        this.addMethod(new Method(\"isLetterOrDigit\", new Parameterlist([\r\n            { identifier: \"char-value\", type: charPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return (<string>parameters[1].value).match(/[a-zäöüß0-9]/i) != null;\r\n            }, false, true, \"Gibt genau dann true zurück, wenn das Zeichen ein deutsches Alphabet-Zeichen oder eine Ziffer ist.\"));\r\n\r\n        this.addMethod(new Method(\"isDigit\", new Parameterlist([\r\n            { identifier: \"char-value\", type: charPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return (<string>parameters[1].value).match(/[0-9]/i) != null;\r\n            }, false, true, \"Gibt genau dann true zurück, wenn das Zeichen eine Ziffer ist.\"));\r\n\r\n            this.addMethod(new Method(\"isWhitespace\", new Parameterlist([\r\n            { identifier: \"char-value\", type: charPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return (<string>parameters[1].value).match(/[ \\r\\n\\t]/i) != null;\r\n            }, false, true, \"Gibt genau dann true zurück, wenn das Zeichen ein Leerzeichen, Tabulatorzeichen oder Zeilenumbruch ist.\"));\r\n\r\n        this.addMethod(new Method(\"toUpperCase\", new Parameterlist([\r\n            { identifier: \"char-value\", type: charPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), charPrimitiveType,\r\n            (parameters) => {\r\n                return (<string>parameters[1].value).toLocaleUpperCase();\r\n            }, false, true, \"Wandelt das Zeichen in Großschreibung um.\"));\r\n\r\n        this.addMethod(new Method(\"toLowerCase\", new Parameterlist([\r\n            { identifier: \"char-value\", type: charPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), charPrimitiveType,\r\n            (parameters) => {\r\n                return (<string>parameters[1].value).toLocaleLowerCase();\r\n            }, false, true, \"Wandelt das Zeichen in Kleinschreibung um.\"));\r\n\r\n        this.addMethod(new Method(\"valueOf\", new Parameterlist([\r\n            { identifier: \"char-value\", type: charPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), this,\r\n            (parameters) => {\r\n                return parameters[1].value;\r\n            }, false, true, \"Wandelt den char-Wert in ein Character-Objekt um.\"));\r\n\r\n\r\n    }\r\n\r\n    public debugOutput(value: Value): string {\r\n        return \"\" + <number>value.value;\r\n    }\r\n\r\n\r\n}\r\n","import { RuntimeObject } from \"../../../interpreter/RuntimeObject.js\";\r\nimport { Klass, Visibility } from \"../Class.js\";\r\nimport { booleanPrimitiveType, charPrimitiveType, intPrimitiveType, stringPrimitiveType } from \"../PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, Type, Value, Attribute } from \"../Types.js\";\r\n\r\n\r\nexport class BooleanClass extends Klass {\r\n\r\n    unboxableAs = [];\r\n\r\n    constructor(baseClass: Klass) {\r\n        super(\"Boolean\", null, \"Wrapper-Klasse, um boolean-Werte in Collections verenden zu können.\");\r\n        this.baseClass = baseClass;\r\n\r\n        this.addAttribute(new Attribute(\"TRUE\", this, (value) => { value.value = true }, true, Visibility.public, true, \"das Boolean-Objekt, das TRUE repräsentiert\"));\r\n        this.addAttribute(new Attribute(\"FALSE\", this, (value) => { value.value = false }, true, Visibility.public, true, \"das Boolean-Objekt, das FALSE repräsentiert\"));\r\n\r\n        this.staticClass.classObject = new RuntimeObject(this.staticClass);\r\n        this.staticClass.classObject.initializeAttributeValues();\r\n\r\n    }\r\n\r\n    canCastTo(type: Type): boolean {\r\n        return this.unboxableAs.indexOf(type) >= 0 || super.canCastTo(type);\r\n    }\r\n\r\n    init() {\r\n\r\n        this.unboxableAs = [booleanPrimitiveType];\r\n\r\n        this.addMethod(new Method(\"Boolean\", new Parameterlist([\r\n            { identifier: \"boolean-value\", type: booleanPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                parameters[0].value = parameters[1].value;\r\n\r\n            }, false, false, \"Instanziert ein neues Boolean-Objekt\", true));\r\n\r\n        this.addMethod(new Method(\"Boolean\", new Parameterlist([\r\n            { identifier: \"string-value\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                parameters[0].value = parameters[1] != null && parameters[1].value.toLowerCase() == \"true\";\r\n\r\n            }, false, false, \"Instanziert ein neues Boolean-Objekt: Es nimmt genau dann den Wert true an, wenn die übergebene Zeichenkette ohne Berücksichtigung von Klein-/Großschreibung den Wert \\\"true\\\" hat.\", true));\r\n\r\n        this.addMethod(new Method(\"booleanValue\", new Parameterlist([]), booleanPrimitiveType,\r\n            (parameters) => { return parameters[0].value; }, false, false, \"Wandelt das Boolean-Objekt in einen boolean-Wert um\"));\r\n\r\n        this.addMethod(new Method(\"compareTo\", new Parameterlist([\r\n            { identifier: \"anotherBoolean\", type: this, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let v0 = parameters[0].value;\r\n                let v1 = parameters[1].value;\r\n                return v0 == v1 ? 0 : 1;\r\n            }, false, false, \"Gibt genau dann 0 zurück, wenn der Wert des Objekts gleich dem übergebenen Wert ist, ansonsten 1.\"));\r\n\r\n        this.addMethod(new Method(\"equals\", new Parameterlist([\r\n            { identifier: \"anotherBoolean\", type: this, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return parameters[0].value == parameters[1].value;\r\n            }, false, false, \"Gibt genau dann true zurück, wenn der Wert gleich dem übergebenen Wert ist.\"));\r\n\r\n        this.addMethod(new Method(\"toString\", new Parameterlist([\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                return \"\" + parameters[0].value;\r\n            }, false, false, \"Gibt den Wert des Objekts als String-Wert zurück.\"));\r\n\r\n        this.addMethod(new Method(\"hashCode\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return (<boolean>parameters[0].value) ? 0 : 1;\r\n            }, false, false, \"Gibt den hashCode des Objekts zurück.\"));\r\n\r\n        this.addMethod(new Method(\"booleanValue\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return parameters[0].value;\r\n            }, false, false, \"Gibt den boolean-Wert des Objekts zurück.\"));\r\n\r\n        this.addMethod(new Method(\"valueOf\", new Parameterlist([\r\n            { identifier: \"boolean-value\", type: booleanPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), this,\r\n            (parameters) => {\r\n                return parameters[1].value;\r\n            }, false, true, \"Wandelt den boolean-Wert in ein Boolean-Objekt um.\"));\r\n\r\n        this.addMethod(new Method(\"valueOf\", new Parameterlist([\r\n            { identifier: \"string-value\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return parameters[1].value != null && (<string>parameters[1].value).toLowerCase() == \"true\";\r\n            }, false, true, \"Wandelt die Zeichenkette in einen boolean-Wert um. Er ergibt true genau dann, wenn die Zeichenkette != null ist und - ohne Berücksichtigung von Klein-/Großschreibung - den Wert \\\"true\\\" hat.\"));\r\n\r\n        this.addMethod(new Method(\"parseBoolean\", new Parameterlist([\r\n            { identifier: \"string-value\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return parameters[1].value != null && (<string>parameters[1].value).toLowerCase() == \"true\";\r\n            }, false, true, \"Wandelt die Zeichenkette in einen boolean-Wert um. Er ergibt true genau dann, wenn die Zeichenkette != null ist und - ohne Berücksichtigung von Klein-/Großschreibung - den Wert \\\"true\\\" hat.\"));\r\n\r\n\r\n    }\r\n\r\n    public debugOutput(value: Value): string {\r\n        return \"\" + <number>value.value;\r\n    }\r\n\r\n\r\n}\r\n","import { Klass, Visibility } from \"../Class.js\";\r\nimport { Method, Parameterlist, Attribute, Value, Type, PrimitiveType } from \"../Types.js\";\r\nimport { intPrimitiveType, stringPrimitiveType, floatPrimitiveType, doublePrimitiveType, booleanPrimitiveType } from \"../PrimitiveTypes.js\";\r\nimport { RuntimeObject } from \"../../../interpreter/RuntimeObject.js\";\r\n\r\n\r\nexport class DoubleClass extends Klass {\r\n\r\n    unboxableAs = [];\r\n\r\n    constructor(baseClass: Klass) {\r\n        super(\"Double\", null, \"Wrapper-Klasse, um double-Werte in Collections verenden zu können.\");\r\n        this.baseClass = baseClass;\r\n\r\n        this.addAttribute(new Attribute(\"MAX_VALUE\", doublePrimitiveType, (value) => { value.value = Number.MAX_VALUE }, true, Visibility.public, true, \"Der größte Wert, den eine Variable vom Typ double annehmen kann\"));\r\n        this.addAttribute(new Attribute(\"MIN_VALUE\", doublePrimitiveType, (value) => { value.value = Number.MIN_VALUE }, true, Visibility.public, true, \"Der kleinste Wert, den eine Variable vom Typ double annehmen kann\"));\r\n        this.addAttribute(new Attribute(\"NaN_VALUE\", doublePrimitiveType, (value) => { value.value = Number.NaN }, true, Visibility.public, true, \"Der \\\"Not a Number\\\"-Wert vom Typ double\"));\r\n        this.addAttribute(new Attribute(\"NEGATIVE_INFINITY\", doublePrimitiveType, (value) => { value.value = Number.NEGATIVE_INFINITY }, true, Visibility.public, true, \"Der \\\"negative infinity\\\"-Wert vom Typ double\"));\r\n        this.addAttribute(new Attribute(\"POSITIVE_INFINITY\", doublePrimitiveType, (value) => { value.value = Number.POSITIVE_INFINITY }, true, Visibility.public, true, \"Der \\\"positive infinity\\\"-Wert vom Typ double\"));\r\n\r\n        this.staticClass.classObject = new RuntimeObject(this.staticClass);\r\n        this.staticClass.classObject.initializeAttributeValues();\r\n\r\n    }\r\n\r\n    canCastTo(type: Type): boolean {\r\n        return this.unboxableAs.indexOf(type) >= 0 || super.canCastTo(type);\r\n    }\r\n\r\n    init() {\r\n\r\n        this.unboxableAs = [doublePrimitiveType];\r\n\r\n        this.addMethod(new Method(\"Double\", new Parameterlist([\r\n            { identifier: \"double-value\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                parameters[0].value = parameters[1].value;\r\n\r\n            }, false, false, \"Instanziert ein neues Double-Objekt\", true));\r\n\r\n        this.addMethod(new Method(\"Double\", new Parameterlist([\r\n            { identifier: \"int-value\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                parameters[0].value = parameters[1].value;\r\n\r\n            }, false, false, \"Instanziert ein neues Double-Objekt\", true));\r\n\r\n        this.addMethod(new Method(\"Double\", new Parameterlist([\r\n            { identifier: \"text\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                parameters[0].value = Number.parseFloat(parameters[1].value);\r\n\r\n            }, false, false, \"Instanziert ein neues Double-Objekt, indem die übergebene Zeichenkette in einen double-Wert umgewandelt wird.\", true));\r\n\r\n\r\n        this.addMethod(new Method(\"doubleValue\", new Parameterlist([]), doublePrimitiveType,\r\n            (parameters) => { return parameters[0].value; }, false, false, \"Wandelt das Double-Objekt in einen double-Wert um.\"));\r\n        this.addMethod(new Method(\"floatValue\", new Parameterlist([]), floatPrimitiveType,\r\n            (parameters) => { return parameters[0].value; }, false, false, \"Wandelt das Double-Objekt in einen float-Wert um.\"));\r\n        this.addMethod(new Method(\"intValue\", new Parameterlist([]), intPrimitiveType,\r\n            (parameters) => { return Math.trunc(parameters[0].value); }, false, false, \"Wandelt das Double-Objekt durch Abrunden in einen int-Wert um.\"));\r\n\r\n        this.addMethod(new Method(\"compareTo\", new Parameterlist([\r\n            { identifier: \"anotherDouble\", type: this, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let v0 = parameters[0].value;\r\n                let v1 = parameters[1].value;\r\n                if (v0 > v1) return 1;\r\n                if (v0 < v1) return -1;\r\n                return 0;\r\n            }, false, false, \"Ist der Wert größer als der übergebene Wert, so wird +1 zurückgegeben. Ist er kleiner, so wird -1 zurückgegeben. Sind die Werte gleich, so wird 0 zurückgegeben.\"));\r\n\r\n        this.addMethod(new Method(\"equals\", new Parameterlist([\r\n            { identifier: \"anotherDouble\", type: this, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return parameters[0].value == parameters[1].value;\r\n            }, false, false, \"Gibt genau dann true zurück, wenn der Wert gleich dem übergebenen Wert ist.\"));\r\n\r\n        this.addMethod(new Method(\"toString\", new Parameterlist([\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                return \"\" + parameters[0].value;\r\n            }, false, false, \"Gibt den Wert des Objekts als String-Wert zurück.\"));\r\n\r\n        this.addMethod(new Method(\"hashCode\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return Math.trunc(parameters[0].value);\r\n            }, false, false, \"Gibt den hashCode des Objekts zurück.\"));\r\n\r\n        this.addMethod(new Method(\"parseDouble\", new Parameterlist([\r\n            { identifier: \"s\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return Number.parseFloat(parameters[1].value);\r\n            }, false, true, \"Wandelt die Zeichenkette in einen double-Wert um\"));\r\n\r\n        this.addMethod(new Method(\"toString\", new Parameterlist([\r\n            { identifier: \"f\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                return \"\" + parameters[1].value;\r\n            }, false, true, \"Gibt die übergebene Zahl als String-Wert zurück.\"));\r\n\r\n        this.addMethod(new Method(\"valueOf\", new Parameterlist([\r\n            { identifier: \"f\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), this,\r\n            (parameters) => {\r\n                return parameters[1].value;\r\n            }, false, true, \"Gibt die übergebene Zahl als Double-Objekt zurück.\"));\r\n\r\n        this.addMethod(new Method(\"valueOf\", new Parameterlist([\r\n            { identifier: \"s\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), this,\r\n            (parameters) => {\r\n                return Number.parseFloat(parameters[1].value);\r\n            }, false, true, \"Interpretiert die übergebene Zeichenkette als Dezimalzahl und gib sie als Double-Objekt zurück.\"));\r\n\r\n        this.addMethod(new Method(\"isNaN\", new Parameterlist([\r\n            { identifier: \"f\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return parameters[1].value == NaN;\r\n            }, false, true, \"Gibt genau dann true zurück, falls die übergebene double-Zahl NaN (not a Number) ist.\"));\r\n\r\n        this.addMethod(new Method(\"isNaN\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return parameters[0].value == NaN;\r\n            }, false, false, \"Gibt genau dann true zurück, falls das Objekt NaN (not a Number) ist.\"));\r\n\r\n        this.addMethod(new Method(\"isInfinite\", new Parameterlist([\r\n            { identifier: \"f\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return parameters[1].value == Infinity;\r\n            }, false, true, \"Gibt genau dann true zurück, falls die übergebene double-Zahl INFINTITY ist.\"));\r\n\r\n        this.addMethod(new Method(\"isInfinite\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return parameters[0].value == Infinity;\r\n            }, false, false, \"Gibt genau dann true zurück, falls das Objekt INFINITY ist.\"));\r\n\r\n    }\r\n\r\n    public debugOutput(value: Value): string {\r\n        return \"\" + <number>value.value;\r\n    }\r\n\r\n\r\n}\r\n","import { TokenType } from \"../lexer/Token.js\";\r\nimport { ArrayType } from \"./Array.js\";\r\nimport { Interface, Klass, setBooleanPrimitiveTypeCopy } from \"./Class.js\";\r\nimport { ObjectClass } from \"./ObjectClass.js\";\r\nimport { Method, Parameterlist, PrimitiveType, Type, Value } from \"./Types.js\";\r\nimport { IntegerClass } from \"./boxedTypes/IntegerClass.js\";\r\nimport { FloatClass } from \"./boxedTypes/FloatClass.js\";\r\nimport { CharacterClass } from \"./boxedTypes/CharacterClass.js\";\r\nimport { BooleanClass } from \"./boxedTypes/BooleanClass.js\";\r\nimport { DoubleClass } from \"./boxedTypes/DoubleClass.js\";\r\n\r\nexport class NullType extends Type {\r\n\r\n    constructor() {\r\n        super();\r\n        this.identifier = \"null\";\r\n    }\r\n\r\n    getResultType(operation: TokenType, secondOperandType: Type) {\r\n        return null;\r\n    }\r\n    compute(operation: TokenType, firstOperand: Value, secondOperand: Value) {\r\n        return null;\r\n    }\r\n    canCastTo(type: Type) {\r\n        return (type instanceof Klass || type instanceof Interface);\r\n    }\r\n    castTo(value: Value, type: Type) {\r\n        return value;\r\n    }\r\n    equals(type: Type) {\r\n        return (type instanceof Klass || type instanceof Interface);\r\n    }\r\n\r\n    public debugOutput(value: Value): string {\r\n        return \"null\";\r\n    }\r\n}\r\n\r\nexport class VarType extends Type {\r\n\r\n    constructor() {\r\n        super();\r\n        this.identifier = \"var\";\r\n    }\r\n\r\n    getResultType(operation: TokenType, secondOperandType: Type) {\r\n        return null;\r\n    }\r\n    compute(operation: TokenType, firstOperand: Value, secondOperand: Value) {\r\n        return null;\r\n    }\r\n    canCastTo(type: Type) {\r\n        return (type instanceof Klass || type instanceof Interface);\r\n    }\r\n    castTo(value: Value, type: Type) {\r\n        return value;\r\n    }\r\n    equals(type: Type) {\r\n        return (type instanceof Klass || type instanceof Interface);\r\n    }\r\n\r\n    public debugOutput(value: Value): string {\r\n        return \"var\";\r\n    }\r\n}\r\n\r\nexport class IntPrimitiveType extends PrimitiveType {\r\n\r\n    init() {\r\n        this.initialValue = 0;\r\n\r\n        this.identifier = \"int\";\r\n\r\n        this.description = \"ganze Zahl\"\r\n\r\n        this.operationTable = {\r\n            [TokenType.plus]: { \"int\": intPrimitiveType, \"Integer\": intPrimitiveType, \"float\": floatPrimitiveType, \"Float\": floatPrimitiveType, \"double\": doublePrimitiveType, \"Double\": doublePrimitiveType, \"String\": stringPrimitiveType },\r\n            [TokenType.minus]: { \"none\": intPrimitiveType, \"int\": intPrimitiveType, \"Integer\": intPrimitiveType, \"float\": floatPrimitiveType, \"Float\": floatPrimitiveType, \"double\": doublePrimitiveType, \"Double\": doublePrimitiveType},\r\n            [TokenType.multiplication]: { \"int\": intPrimitiveType, \"Integer\": intPrimitiveType, \"float\": floatPrimitiveType, \"Float\": floatPrimitiveType, \"double\": doublePrimitiveType, \"Double\": doublePrimitiveType},\r\n            [TokenType.modulo]: { \"int\": intPrimitiveType, \"Integer\": intPrimitiveType },\r\n            [TokenType.division]: { \"int\": intPrimitiveType, \"Integer\": intPrimitiveType, \"float\": floatPrimitiveType, \"Float\": floatPrimitiveType, \"double\": doublePrimitiveType, \"Double\": doublePrimitiveType},\r\n            [TokenType.doublePlus]: { \"none\": intPrimitiveType },\r\n            [TokenType.doubleMinus]: { \"none\": intPrimitiveType },\r\n            [TokenType.negation]: { \"none\": intPrimitiveType },\r\n            [TokenType.lower]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType ,\"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n            [TokenType.greater]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType ,\"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n            [TokenType.lowerOrEqual]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType ,\"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n            [TokenType.greaterOrEqual]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType ,\"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n            [TokenType.equal]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType ,\"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n            [TokenType.notEqual]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType ,\"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n        };\r\n\r\n        // this.canCastTolist = [floatPrimitiveType, doublePrimitiveType, stringPrimitiveType, charPrimitiveType];\r\n\r\n        this.canCastToMap = {\r\n            \"float\": { automatic: true, needsStatement: false },\r\n            \"double\": { automatic: true, needsStatement: false },\r\n            \"String\": { automatic: true, needsStatement: true },\r\n            \"char\": { automatic: true, needsStatement: true },\r\n            \"int\": { automatic: true, needsStatement: false },\r\n            \"Integer\": { automatic: true, needsStatement: false },\r\n        }\r\n\r\n\r\n    }\r\n\r\n    toTokenType(): TokenType {\r\n        return TokenType.integerConstant;\r\n    }\r\n\r\n    public castTo(value: Value, type: Type): Value {\r\n\r\n        if (type == floatPrimitiveType || type == doublePrimitiveType) {\r\n            return {\r\n                type: type,\r\n                value: value.value\r\n            };\r\n        }\r\n\r\n        if (type == stringPrimitiveType) {\r\n            return {\r\n                type: type,\r\n                value: \"\" + <number>value.value\r\n            }\r\n        }\r\n\r\n        if (type == charPrimitiveType) {\r\n            return {\r\n                type: type,\r\n                value: String.fromCharCode(<number>value.value)\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n    public compute(operation: TokenType, firstOperand: Value, secondOperand?: Value): any {\r\n\r\n        let value = <number>(firstOperand.value);\r\n\r\n        switch (operation) {\r\n            case TokenType.plus:\r\n                if (secondOperand.type == stringPrimitiveType) {\r\n                    return value + <string>(secondOperand.value);\r\n                } else {\r\n                    return value + <number>(secondOperand.value);\r\n                }\r\n\r\n            case TokenType.minus:\r\n                if (secondOperand == null) return -value;\r\n                return value - <number>(secondOperand.value);\r\n\r\n            case TokenType.multiplication:\r\n                return value * <number>(secondOperand.value);\r\n\r\n            case TokenType.division:\r\n                if (secondOperand.type == intPrimitiveType) {\r\n                    return Math.trunc(value / <number>(secondOperand.value));\r\n                }\r\n                return value / <number>(secondOperand.value);\r\n\r\n            case TokenType.modulo:\r\n                if (secondOperand.type == intPrimitiveType) {\r\n                    return Math.trunc(value % <number>(secondOperand.value));\r\n                }\r\n                return 1;\r\n\r\n            case TokenType.doublePlus:\r\n                return value++;\r\n\r\n            case TokenType.doubleMinus:\r\n                return value--;\r\n\r\n            case TokenType.negation:\r\n                return -value;\r\n\r\n            case TokenType.lower:\r\n                return value < (<number>(secondOperand.value));\r\n\r\n            case TokenType.greater:\r\n                return value > <number>(secondOperand.value);\r\n\r\n            case TokenType.lowerOrEqual:\r\n                return value <= <number>(secondOperand.value);\r\n\r\n            case TokenType.greaterOrEqual:\r\n                return value >= <number>(secondOperand.value);\r\n\r\n            case TokenType.equal:\r\n                return value == <number>(secondOperand.value);\r\n\r\n            case TokenType.notEqual:\r\n                return value != <number>(secondOperand.value);\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n    public debugOutput(value: Value): string {\r\n        return \"\" + <number>value.value;\r\n    }\r\n\r\n\r\n}\r\n\r\nexport class FloatPrimitiveType extends PrimitiveType {\r\n\r\n    init() {\r\n\r\n        this.initialValue = 0;\r\n\r\n        this.identifier = \"float\";\r\n\r\n        this.description = \"Fließkommazahl mit einfacher Genauigkeit\"\r\n\r\n        this.operationTable = {\r\n            [TokenType.plus]: { \"Integer\": floatPrimitiveType, \"int\": floatPrimitiveType, \"float\": floatPrimitiveType, \"Float\": floatPrimitiveType, \"double\": doublePrimitiveType, \"Double\": doublePrimitiveType, \"String\": stringPrimitiveType },\r\n            [TokenType.minus]: { \"none\": floatPrimitiveType, \"Integer\": floatPrimitiveType, \"int\": floatPrimitiveType, \"float\": floatPrimitiveType, \"Float\": floatPrimitiveType, \"double\": doublePrimitiveType, \"Double\": doublePrimitiveType },\r\n            [TokenType.multiplication]: { \"Integer\": floatPrimitiveType, \"int\": floatPrimitiveType, \"float\": floatPrimitiveType, \"Float\": floatPrimitiveType, \"double\": doublePrimitiveType, \"Double\": doublePrimitiveType },\r\n            [TokenType.division]: { \"Integer\": floatPrimitiveType, \"int\": floatPrimitiveType, \"float\": floatPrimitiveType, \"Float\": floatPrimitiveType, \"double\": doublePrimitiveType, \"Double\": doublePrimitiveType },\r\n            [TokenType.doublePlus]: { \"none\": floatPrimitiveType },\r\n            [TokenType.doubleMinus]: { \"none\": floatPrimitiveType },\r\n            [TokenType.negation]: { \"none\": floatPrimitiveType },\r\n            [TokenType.lower]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType ,\"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n            [TokenType.greater]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType ,\"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n            [TokenType.lowerOrEqual]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType ,\"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n            [TokenType.greaterOrEqual]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType ,\"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n            [TokenType.equal]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType ,\"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n            [TokenType.notEqual]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType ,\"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n        };\r\n\r\n        // this.canCastTolist = [intPrimitiveType, stringPrimitiveType, doublePrimitiveType];\r\n\r\n        this.canCastToMap = {\r\n            \"int\": { automatic: false, needsStatement: true },\r\n            \"double\": { automatic: true, needsStatement: false },\r\n            \"float\": { automatic: true, needsStatement: false },\r\n            \"String\": { automatic: true, needsStatement: true },\r\n            \"Float\": { automatic: true, needsStatement: false },\r\n            \"Double\": { automatic: true, needsStatement: false },\r\n        }\r\n\r\n    }\r\n\r\n    toTokenType(): TokenType {\r\n        return TokenType.floatingPointConstant;\r\n    }\r\n\r\n    public castTo(value: Value, type: Type): Value {\r\n\r\n        if (type == stringPrimitiveType) {\r\n            return {\r\n                type: type,\r\n                value: \"\" + <number>value.value\r\n            }\r\n        }\r\n\r\n        if (type == intPrimitiveType) {\r\n            return {\r\n                type: type,\r\n                value: Math.trunc(<number>value.value)\r\n            }\r\n        }\r\n\r\n        if (type == doublePrimitiveType) {\r\n            return {\r\n                type: type,\r\n                value: value.value\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n    public compute(operation: TokenType, firstOperand: Value, secondOperand?: Value): any {\r\n\r\n        let value = <number>(firstOperand.value);\r\n\r\n        switch (operation) {\r\n            case TokenType.plus:\r\n                if (secondOperand.type == stringPrimitiveType) {\r\n                    return value + <string>(secondOperand.value);\r\n                } else {\r\n                    return value + <number>(secondOperand.value);\r\n                }\r\n\r\n            case TokenType.minus:\r\n                if (secondOperand == null) return -value;\r\n                return value - <number>(secondOperand.value);\r\n\r\n            case TokenType.multiplication:\r\n                return value * <number>(secondOperand.value);\r\n\r\n            case TokenType.division:\r\n                return value / <number>(secondOperand.value);\r\n\r\n            case TokenType.doublePlus:\r\n                return value++;\r\n\r\n            case TokenType.doubleMinus:\r\n                return value--;\r\n\r\n            case TokenType.negation:\r\n                return -value;\r\n\r\n            case TokenType.lower:\r\n                return value < (<number>(secondOperand.value));\r\n\r\n            case TokenType.greater:\r\n                return value > <number>(secondOperand.value);\r\n\r\n            case TokenType.lowerOrEqual:\r\n                return value <= <number>(secondOperand.value);\r\n\r\n            case TokenType.greaterOrEqual:\r\n                return value >= <number>(secondOperand.value);\r\n\r\n            case TokenType.equal:\r\n                return value == <number>(secondOperand.value);\r\n\r\n            case TokenType.notEqual:\r\n                return value != <number>(secondOperand.value);\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n    public debugOutput(value: Value): string {\r\n        return \"\" + <number>value.value;\r\n    }\r\n\r\n\r\n}\r\n\r\nexport class DoublePrimitiveType extends PrimitiveType {\r\n\r\n    init() {\r\n\r\n        this.initialValue = 0;\r\n\r\n        this.identifier = \"double\";\r\n\r\n        this.description = \"Fließkommazahl mit doppelter Genauigkeit\"\r\n\r\n        this.operationTable = {\r\n            [TokenType.plus]: { \"int\": doublePrimitiveType, \"Integer\": doublePrimitiveType, \"float\": doublePrimitiveType, \"Float\": doublePrimitiveType, \"double\": doublePrimitiveType, \"Double\": doublePrimitiveType, \"String\": stringPrimitiveType },\r\n            [TokenType.minus]: { \"none\": doublePrimitiveType, \"int\": doublePrimitiveType, \"Integer\": doublePrimitiveType, \"float\": doublePrimitiveType, \"Float\": doublePrimitiveType, \"double\": doublePrimitiveType, \"Double\": doublePrimitiveType },\r\n            [TokenType.multiplication]: { \"int\": doublePrimitiveType, \"Integer\": doublePrimitiveType, \"float\": doublePrimitiveType, \"Float\": doublePrimitiveType, \"double\": doublePrimitiveType, \"Double\": doublePrimitiveType },\r\n            [TokenType.division]: { \"int\": doublePrimitiveType, \"Integer\": doublePrimitiveType, \"float\": doublePrimitiveType, \"Float\": doublePrimitiveType, \"double\": doublePrimitiveType, \"Double\": doublePrimitiveType },\r\n            [TokenType.doublePlus]: { \"none\": doublePrimitiveType },\r\n            [TokenType.doubleMinus]: { \"none\": doublePrimitiveType },\r\n            [TokenType.negation]: { \"none\": doublePrimitiveType },\r\n            [TokenType.lower]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType ,\"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n            [TokenType.greater]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType ,\"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n            [TokenType.lowerOrEqual]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType ,\"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n            [TokenType.greaterOrEqual]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType ,\"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n            [TokenType.equal]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType ,\"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n            [TokenType.notEqual]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType ,\"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n        };\r\n\r\n        // this.canCastTolist = [intPrimitiveType, stringPrimitiveType, floatPrimitiveType];\r\n        this.canCastToMap = {\r\n            \"int\": { automatic: false, needsStatement: true },\r\n            \"float\": { automatic: true, needsStatement: false },\r\n            \"double\": { automatic: true, needsStatement: false },\r\n            \"String\": { automatic: true, needsStatement: true },\r\n            \"Float\": { automatic: true, needsStatement: false },\r\n            \"Double\": { automatic: true, needsStatement: false },\r\n        }\r\n\r\n\r\n    }\r\n\r\n    toTokenType(): TokenType {\r\n        return TokenType.floatingPointConstant;\r\n    }\r\n\r\n    public castTo(value: Value, type: Type): Value {\r\n\r\n        if (type == stringPrimitiveType) {\r\n            return {\r\n                type: type,\r\n                value: \"\" + <number>value.value\r\n            }\r\n        }\r\n\r\n        if (type == intPrimitiveType) {\r\n            return {\r\n                type: type,\r\n                value: Math.trunc(<number>value.value)\r\n            }\r\n        }\r\n\r\n        if (type == floatPrimitiveType) {\r\n            return {\r\n                type: type,\r\n                value: value.value\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n    public compute(operation: TokenType, firstOperand: Value, secondOperand?: Value): any {\r\n\r\n        let value = <number>(firstOperand.value);\r\n\r\n        switch (operation) {\r\n            case TokenType.plus:\r\n                if (secondOperand.type == stringPrimitiveType) {\r\n                    return value + <string>(secondOperand.value);\r\n                } else {\r\n                    return value + <number>(secondOperand.value);\r\n                }\r\n\r\n            case TokenType.minus:\r\n                if (secondOperand == null) return -value;\r\n                return value - <number>(secondOperand.value);\r\n\r\n            case TokenType.multiplication:\r\n                return value * <number>(secondOperand.value);\r\n\r\n            case TokenType.division:\r\n                return value / <number>(secondOperand.value);\r\n\r\n            case TokenType.doublePlus:\r\n                return value++;\r\n\r\n            case TokenType.doubleMinus:\r\n                return value--;\r\n\r\n            case TokenType.negation:\r\n                return -value;\r\n\r\n            case TokenType.lower:\r\n                return value < (<number>(secondOperand.value));\r\n\r\n            case TokenType.greater:\r\n                return value > <number>(secondOperand.value);\r\n\r\n            case TokenType.lowerOrEqual:\r\n                return value <= <number>(secondOperand.value);\r\n\r\n            case TokenType.greaterOrEqual:\r\n                return value >= <number>(secondOperand.value);\r\n\r\n            case TokenType.equal:\r\n                return value == <number>(secondOperand.value);\r\n\r\n            case TokenType.notEqual:\r\n                return value != <number>(secondOperand.value);\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n    public debugOutput(value: Value): string {\r\n        return \"\" + <number>value.value;\r\n    }\r\n\r\n\r\n}\r\n\r\nexport class BooleanPrimitiveType extends PrimitiveType {\r\n\r\n    init() {\r\n\r\n        this.initialValue = false;\r\n\r\n        this.identifier = \"boolean\";\r\n\r\n        this.description = \"boolescher Wert (true oder false)\"\r\n\r\n        this.operationTable = {\r\n            [TokenType.plus]: { \"String\": stringPrimitiveType },\r\n            [TokenType.and]: { \"boolean\": booleanPrimitiveType },\r\n            [TokenType.or]: { \"boolean\": booleanPrimitiveType },\r\n            [TokenType.not]: { \"none\": booleanPrimitiveType },\r\n            [TokenType.equal]: { \"boolean\": booleanPrimitiveType },\r\n            [TokenType.notEqual]: { \"boolean\": booleanPrimitiveType },\r\n        };\r\n\r\n        this.canCastToMap = {\r\n            \"String\": { automatic: true, needsStatement: true },\r\n            \"boolean\": { automatic: true, needsStatement: false },\r\n            \"Boolean\": { automatic: true, needsStatement: false },\r\n        }\r\n\r\n\r\n    }\r\n\r\n    toTokenType(): TokenType {\r\n        return TokenType.booleanConstant;\r\n    }\r\n\r\n    public castTo(value: Value, type: Type): Value {\r\n\r\n        if (type == stringPrimitiveType) {\r\n            return {\r\n                type: type,\r\n                value: \"\" + <number>value.value\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n    public compute(operation: TokenType, firstOperand: Value, secondOperand?: Value): any {\r\n\r\n        let value = <boolean>(firstOperand.value);\r\n\r\n        switch (operation) {\r\n            case TokenType.plus:\r\n                return value + <string>(secondOperand.value);\r\n\r\n            case TokenType.equal:\r\n                return value == <boolean>(secondOperand.value);\r\n\r\n            case TokenType.notEqual:\r\n                return value != <boolean>(secondOperand.value);\r\n\r\n            case TokenType.and:\r\n                return value && <boolean>(secondOperand.value);\r\n\r\n            case TokenType.or:\r\n                return value || <boolean>(secondOperand.value);\r\n\r\n            case TokenType.not:\r\n                return !value;\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n    public debugOutput(value: Value): string {\r\n        return \"\" + <boolean>value.value;\r\n    }\r\n\r\n\r\n}\r\n\r\nexport class VoidPrimitiveType extends PrimitiveType {\r\n\r\n    init() {\r\n\r\n        this.initialValue = false;\r\n\r\n        this.identifier = \"void\";\r\n\r\n        this.description = \"leerer Rückgabewert\"\r\n\r\n        this.operationTable = {\r\n        };\r\n\r\n        this.canCastToMap = {};\r\n\r\n    }\r\n\r\n    public toTokenType(): TokenType {\r\n        return TokenType.keywordVoid;\r\n    }\r\n\r\n    public castTo(value: Value, type: Type): Value {\r\n\r\n        return value;\r\n\r\n    }\r\n\r\n\r\n    public compute(operation: TokenType, firstOperand: Value, secondOperand?: Value): any {\r\n\r\n        return null;\r\n\r\n    }\r\n\r\n    public debugOutput(value: Value): string {\r\n        return \"void\";\r\n    }\r\n\r\n\r\n}\r\n\r\nexport class StringPrimitiveType extends Klass {\r\n\r\n    private operationTable: { [operation: number]: { [typename: string]: Type } }\r\n\r\n    public toTokenType(): TokenType {\r\n        return TokenType.stringConstant;\r\n    }\r\n\r\n    public getResultType(operation: TokenType, secondOperandType?: Type): Type {\r\n\r\n        if(operation == TokenType.keywordInstanceof){\r\n            return super.getResultType(operation, secondOperandType);\r\n        }\r\n\r\n        let opTypeMap = this.operationTable[operation];\r\n\r\n        if (opTypeMap == null) {\r\n            return null; // Operation not possible\r\n        }\r\n\r\n        if (secondOperandType != null) {\r\n            return opTypeMap[secondOperandType.identifier];\r\n        }\r\n\r\n        return opTypeMap[\"none\"];\r\n\r\n    }\r\n\r\n\r\n    constructor(baseClass: Klass) {\r\n        super(\"String\", null, \"Ein Objekt der Klasse String speichert eine Zeichenkette.\");\r\n        this.baseClass = baseClass;\r\n        let stringClass = this;\r\n        baseClass.methods.filter(m => m.identifier == \"toString\").forEach(m => m.returnType = stringClass);\r\n    }\r\n\r\n    init() {\r\n        this.operationTable = {\r\n            [TokenType.plus]: { \"String\": stringPrimitiveType, \"int\": stringPrimitiveType, \r\n            \"float\": stringPrimitiveType, \"double\": doublePrimitiveType, \r\n            \"boolean\": stringPrimitiveType, \"char\": stringPrimitiveType },\r\n            [TokenType.equal]: { \"String\": booleanPrimitiveType, \"null\": booleanPrimitiveType},\r\n            [TokenType.notEqual]: { \"String\": booleanPrimitiveType, \"null\": booleanPrimitiveType},\r\n            [TokenType.lower]: { \"String\": booleanPrimitiveType },\r\n            [TokenType.greater]: { \"String\": booleanPrimitiveType },\r\n            [TokenType.lowerOrEqual]: { \"String\": booleanPrimitiveType },\r\n            [TokenType.greaterOrEqual]: { \"String\": booleanPrimitiveType }\r\n\r\n        };\r\n\r\n\r\n        this.addMethod(new Method(\"length\", new Parameterlist([]), intPrimitiveType,\r\n            (parameters) => { return (<string>parameters[0].value).length; }, false, false, \"Länge der Zeichenkette, d.h. Anzahl der Zeichen in der Zeichenkette.\"));\r\n        this.addMethod(new Method(\"charAt\", new Parameterlist([{ identifier: \"Position\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: false }]), charPrimitiveType,\r\n            (parameters) => { return (<string>parameters[0].value).charAt(<number>(parameters[1].value)); }, false, false, \"Zeichen an der gegebenen Position.\\n**Bem.: ** Position == 0 bedeutet das erste Zeichen in der Zeichenkette, Position == 1 das zweite usw. .\"));\r\n        this.addMethod(new Method(\"equals\", new Parameterlist([{ identifier: \"otherString\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: false }]), booleanPrimitiveType,\r\n            (parameters) => { return <string>parameters[0].value == <string>(parameters[1].value); }, false, false, \"Gibt genau dann **wahr** zurück, wenn die zwei Zeichenketten übereinstimmen (unter Berücksichtigung von Klein-/Großschreibung).\"));\r\n        this.addMethod(new Method(\"compareTo\", new Parameterlist([{ identifier: \"otherString\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: false }]), intPrimitiveType,\r\n            (parameters) => { return (<string>(parameters[0].value)).localeCompare(<string>(parameters[1].value)); }, false, false, \"Vergleicht den String mit dem übergebenen String. Gibt -1 zurück, falls ersterer im Alphabet vor letzterem steht, +1, falls umgekehrt und 0, falls beide Strings identisch sind.\"));\r\n        this.addMethod(new Method(\"equalsIgnoreCase\", new Parameterlist([{ identifier: \"otherString\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: false }]), booleanPrimitiveType,\r\n            (parameters) => { return (<string>(parameters[0].value)).toLowerCase() == (<string>(parameters[1].value).toLowerCase()); }, false, false, \"Gibt genau dann **wahr** zurück, wenn die zwei Zeichenketten übereinstimmen (**ohne** Berücksichtigung von Klein-/Großschreibung).\"));\r\n        this.addMethod(new Method(\"endsWith\", new Parameterlist([{ identifier: \"suffix\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: false }]), booleanPrimitiveType,\r\n            (parameters) => { return (<string>(parameters[0].value)).endsWith(<string>(parameters[1].value)); }, false, false, \"Gibt genau dann **wahr** zurück, wenn die Zeichenkette mit der übergebenen Zeichenkette ( = suffix) endet. Klein-/Großschreibung wird dabei berücksichtigt!\"));\r\n        this.addMethod(new Method(\"startsWith\", new Parameterlist([{ identifier: \"präfix\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: false }]), booleanPrimitiveType,\r\n            (parameters) => { return (<string>(parameters[0].value)).startsWith(<string>(parameters[1].value)); }, false, false, \"Gibt genau dann **wahr** zurück, wenn die Zeichenkette mit der übergebenen Zeichenkette ( = präfix) beginnt. Klein-/Großschreibung wird dabei berücksichtigt!\"));\r\n        this.addMethod(new Method(\"toLowerCase\", new Parameterlist([]), stringPrimitiveType,\r\n            (parameters) => { return (<string>(parameters[0].value)).toLocaleLowerCase(); }, false, false, \"Gibt die Zeichenkette zurück, die sich ergibt, wenn man in der gegebenen Zeichnkette jeden Großbuchstaben durch den entsprechenden Kleinbuchstaben ersetzt.\\n**Bemerkung: ** Die Methode verändert die Zeichenkette selbst nicht.\"));\r\n        this.addMethod(new Method(\"toUpperCase\", new Parameterlist([]), stringPrimitiveType,\r\n            (parameters) => { return (<string>(parameters[0].value)).toLocaleUpperCase(); }, false, false, \"Gibt die Zeichenkette zurück, die sich ergibt, wenn man in der gegebenen Zeichnkette jeden Kleinbuchstaben durch den entsprechenden Großbuchstaben ersetzt.\\n**Bemerkung: ** Die Methode verändert die Zeichenkette selbst nicht.\"));\r\n        this.addMethod(new Method(\"substring\", new Parameterlist([{ identifier: \"beginIndex\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: false }]), stringPrimitiveType,\r\n            (parameters) => { return (<string>(parameters[0].value)).substring(<number>(parameters[1].value)); }, false, false, \"Gibt das hintere Ende der Zeichenkette ab **beginIndex** zurück. **beginIndex** == 1 bedeutet, dass die Zeichenkette ab dem 2.(!) Zeichen zurückgegeben wird. \"));\r\n        this.addMethod(new Method(\"substring\", new Parameterlist([{ identifier: \"beginIndex\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: false },\r\n        { identifier: \"endIndex\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: false }]), stringPrimitiveType,\r\n            (parameters) => { return (<string>(parameters[0].value)).substring(<number>(parameters[1].value), <number>(parameters[2].value)); }, false, false, \"Gibt die Teil-Zeichenkette von **beginIndex** bis **endIndex** zurück.\\n**Vorsicht: ** beginIndex und endIndex sind nullbasiert, d.h. beginIndex == 0 bedeutet die Position vor dem ersten Zeichen.\"));\r\n        this.addMethod(new Method(\"trim\", new Parameterlist([]), stringPrimitiveType,\r\n            (parameters) => { return (<string>(parameters[0].value)).trim(); }, false, false, \"Gibt die Zeichenkette zurück, die entsteht, wenn man am Anfang und Ende der Zeichenkette alle Leerzeichen, Tabs und Zeilenumbrüche entfernt.\"));\r\n        this.addMethod(new Method(\"isEmpty\", new Parameterlist([]), booleanPrimitiveType,\r\n            (parameters) => { return (<string>(parameters[0].value)) == \"\"; }, false, false, \"Gibt genau dann wahr zurück, wenn die Zeichenkette leer ist.\\n**Warnung: ** Die Methode darf nicht mit dem '''null'''-Objekt aufgerufen werden!\"));\r\n        this.addMethod(new Method(\"indexOf\", new Parameterlist([{ identifier: \"otherString\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: false }]), intPrimitiveType,\r\n            (parameters) => { return (<string>(parameters[0].value)).indexOf(<string>(parameters[1].value)); }, false, false, \"Gibt die erste Position zurück, an der **otherString** in der Zeichenkette gefunden wird.\"));\r\n        this.addMethod(new Method(\"indexOf\", new Parameterlist([\r\n            { identifier: \"otherString\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: false },\r\n            { identifier: \"fromIndex\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: false },\r\n        ]), intPrimitiveType,\r\n            (parameters) => { return (<string>(parameters[0].value)).indexOf(<string>(parameters[1].value), <number>(parameters[2].value)); }, false, false, \"Gibt die erste Position zurück, an der **otherString** in der Zeichenkette gefunden wird. Dabei wird erst bei fromIndex mit der Suche begonnen.\"));\r\n        this.addMethod(new Method(\"lastIndexOf\", new Parameterlist([{ identifier: \"otherString\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: false }]), intPrimitiveType,\r\n            (parameters) => { return (<string>(parameters[0].value)).lastIndexOf(<string>(parameters[1].value)); }, false, false, \"Gibt die letzte Position zurück, bei der otherString in der Zeichenkette gefunden wird.\"));\r\n        this.addMethod(new Method(\"lastIndexOf\", new Parameterlist([\r\n            { identifier: \"otherString\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: false },\r\n            { identifier: \"fromIndex\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: false },\r\n        ]), intPrimitiveType,\r\n            (parameters) => { return (<string>(parameters[0].value)).lastIndexOf(<string>(parameters[1].value), <number>(parameters[2].value)); }, false, false, \"Gibt die letzte Position zurück, bei der otherString in der Zeichenkette gefunden wird. Dabei wird erst bei fromIndex - von rechts her beginnend - gesucht.\"));\r\n        this.addMethod(new Method(\"replace\", new Parameterlist([\r\n            { identifier: \"target\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: false },\r\n            { identifier: \"replacement\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: false },\r\n        ]), stringPrimitiveType,\r\n            (parameters) => { return (<string>(parameters[0].value)).replace(<string>(parameters[1].value), <string>(parameters[2].value)); }, false, false, \"Ersetzt alle Vorkommen von **target** durch **replacement** und gibt die entstandene Zeichenkette zurück. Die Zeichenkette selbst wird nicht verändert.\"));\r\n        this.addMethod(new Method(\"replaceAll\", new Parameterlist([\r\n            { identifier: \"regex\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: false },\r\n            { identifier: \"replacement\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: false },\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                let pattern = <string>(parameters[1].value);\r\n                let regExp = new RegExp(pattern, 'g');\r\n\r\n                return (<string>(parameters[0].value)).replace(regExp, <string>(parameters[2].value));\r\n            }, false, false, \"Durchsucht den String mit dem regulären Ausdruck (regex) und ersetzt **alle** Fundstellen durch **replacement**.\"));\r\n        this.addMethod(new Method(\"replaceFirst\", new Parameterlist([\r\n            { identifier: \"regex\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: false },\r\n            { identifier: \"replacement\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: false },\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                let pattern = <string>(parameters[1].value);\r\n                let regExp = new RegExp(pattern, '');\r\n\r\n                return (<string>(parameters[0].value)).replace(regExp, <string>(parameters[2].value));\r\n            }, false, false, \"Durchsucht den String mit dem regulären Ausdruck (regex) und ersetzt **die erste** Fundstelle durch **replacement**.\"));\r\n        this.addMethod(new Method(\"split\", new Parameterlist([\r\n            { identifier: \"regex\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: false },\r\n        ]), new ArrayType(stringPrimitiveType),\r\n            (parameters) => {\r\n                let pattern = <string>(parameters[1].value);\r\n                let regExp = new RegExp(pattern, '');\r\n\r\n                let strings = (<string>(parameters[0].value)).split(regExp);\r\n                let values: Value[] = [];\r\n                for(let s of strings){\r\n                    values.push({type: stringPrimitiveType, value: s});\r\n                }\r\n                \r\n                return values;\r\n\r\n            }, false, false, \"Teilt die Zeichenkette an den Stellen, die durch den regulären Ausdruck (regex) definiert sind, in Teile auf. Die Fundstellen des regex werden dabei weggelassen. Gibt die Teile als String-Array zurück.\"));\r\n\r\n    }\r\n\r\n    public compute(operation: TokenType, firstOperand: Value, secondOperand?: Value): any {\r\n\r\n        let value = <string>(firstOperand.value);\r\n\r\n        switch (operation) {\r\n            case TokenType.plus:\r\n                if (secondOperand.type == stringPrimitiveType || secondOperand.type == charPrimitiveType) {\r\n                    return value + <string>(secondOperand.value);\r\n                } else if (secondOperand.type == booleanPrimitiveType) {\r\n                    return value + <boolean>(secondOperand.value);\r\n                } else {\r\n                    return value + <number>(secondOperand.value);\r\n                }\r\n\r\n            case TokenType.lower:\r\n                return value < (<string>(secondOperand.value));\r\n\r\n            case TokenType.greater:\r\n                return value > <string>(secondOperand.value);\r\n\r\n            case TokenType.lowerOrEqual:\r\n                return value <= <string>(secondOperand.value);\r\n\r\n            case TokenType.greaterOrEqual:\r\n                return value >= <string>(secondOperand.value);\r\n\r\n            case TokenType.equal:\r\n                return value == <string>(secondOperand.value);\r\n\r\n            case TokenType.notEqual:\r\n                return value != <string>(secondOperand.value);\r\n\r\n            case TokenType.keywordInstanceof:\r\n                return super.compute(operation, firstOperand, secondOperand);\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n    public debugOutput(value: Value): string {\r\n        return '\"' + <string>value.value + '\"';\r\n    }\r\n\r\n\r\n}\r\n\r\nexport class CharPrimitiveType extends PrimitiveType {\r\n\r\n    init() {\r\n\r\n        this.initialValue = \"\\u0000\";\r\n\r\n        this.identifier = \"char\";\r\n\r\n        this.description = \"ein Zeichen\"\r\n\r\n        this.operationTable = {\r\n            [TokenType.plus]: { \"String\": stringPrimitiveType, \"char\": stringPrimitiveType },\r\n            [TokenType.equal]: { \"char\": booleanPrimitiveType },\r\n            [TokenType.notEqual]: { \"char\": booleanPrimitiveType },\r\n            [TokenType.lower]: { \"char\": booleanPrimitiveType },\r\n            [TokenType.greater]: { \"char\": booleanPrimitiveType },\r\n            [TokenType.lowerOrEqual]: { \"char\": booleanPrimitiveType },\r\n            [TokenType.greaterOrEqual]: { \"char\": booleanPrimitiveType }\r\n\r\n        };\r\n\r\n        // this.canCastTolist = [intPrimitiveType, floatPrimitiveType, doublePrimitiveType, stringPrimitiveType];\r\n        this.canCastToMap = {\r\n            \"int\": { automatic: true, needsStatement: true },\r\n            \"float\": { automatic: true, needsStatement: true },\r\n            \"double\": { automatic: true, needsStatement: true },\r\n            \"String\": { automatic: true, needsStatement: false },\r\n            \"char\": { automatic: true, needsStatement: false },\r\n            \"Character\": { automatic: true, needsStatement: false },\r\n        }\r\n\r\n    }\r\n\r\n    public toTokenType(): TokenType {\r\n        return TokenType.charConstant;\r\n    }\r\n\r\n    public castTo(value: Value, type: Type): Value {\r\n\r\n        if (type == stringPrimitiveType) {\r\n            return value;\r\n        }\r\n\r\n        if (type == intPrimitiveType || type == floatPrimitiveType || type == doublePrimitiveType) {\r\n            return {\r\n                type: type,\r\n                value: (<string>value.value).charCodeAt(0)\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    public compute(operation: TokenType, firstOperand: Value, secondOperand?: Value): any {\r\n\r\n        let value = <string>(firstOperand.value);\r\n\r\n        switch (operation) {\r\n            case TokenType.plus:\r\n                return value + <string>(secondOperand.value);\r\n\r\n            case TokenType.lower:\r\n                return value < (<string>(secondOperand.value));\r\n\r\n            case TokenType.greater:\r\n                return value > <string>(secondOperand.value);\r\n\r\n            case TokenType.lowerOrEqual:\r\n                return value <= <string>(secondOperand.value);\r\n\r\n            case TokenType.greaterOrEqual:\r\n                return value >= <string>(secondOperand.value);\r\n\r\n            case TokenType.equal:\r\n                return value == <string>(secondOperand.value);\r\n\r\n            case TokenType.notEqual:\r\n                return value != <string>(secondOperand.value);\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n    public debugOutput(value: Value): string {\r\n        return \"'\" + <string>value.value + \"'\";\r\n    }\r\n\r\n\r\n}\r\n\r\nexport var voidPrimitiveType = new VoidPrimitiveType();\r\nexport var intPrimitiveType = new IntPrimitiveType();\r\nexport var floatPrimitiveType = new FloatPrimitiveType();\r\nexport var doublePrimitiveType = new DoublePrimitiveType();\r\nexport var booleanPrimitiveType = new BooleanPrimitiveType();\r\nsetBooleanPrimitiveTypeCopy(booleanPrimitiveType);\r\nexport var objectType = new ObjectClass(null);\r\nexport var stringPrimitiveType = new StringPrimitiveType(objectType);\r\nexport var charPrimitiveType = new CharPrimitiveType();\r\nexport var nullType = new NullType();\r\nexport var varType = new VarType();\r\n\r\nexport var IntegerType = new IntegerClass(objectType);\r\nexport var FloatType = new FloatClass(objectType);\r\nexport var DoubleType = new DoubleClass(objectType);\r\nexport var CharacterType = new CharacterClass(objectType);\r\nexport var BooleanType = new BooleanClass(objectType);\r\n\r\nexport var TokenTypeToDataTypeMap: { [tt: number]: Type } = {\r\n    [TokenType.integerConstant]: intPrimitiveType,\r\n    [TokenType.floatingPointConstant]: floatPrimitiveType,\r\n    [TokenType.booleanConstant]: booleanPrimitiveType,\r\n    [TokenType.stringConstant]: stringPrimitiveType,\r\n    [TokenType.charConstant]: charPrimitiveType,\r\n    [TokenType.keywordNull]: nullType\r\n}","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Interface, Klass, TypeVariable } from \"../../compiler/types/Class.js\";\r\nimport { booleanPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, Value } from \"../../compiler/types/Types.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { ListHelper } from \"./ArrayList.js\";\r\n\r\nexport type IteratorKind = \"descending\" | \"ascending\";\r\n\r\nexport class ListIteratorImplClass extends Klass {\r\n\r\n    public static getIterator(listHelper: ListHelper, interpreter: Interpreter, module: Module, kind: IteratorKind): Value {\r\n\r\n        let klass = <Klass>module.typeStore.getType(\"ListIteratorImpl\");\r\n        let rt: RuntimeObject = new RuntimeObject(klass);\r\n        rt.intrinsicData[\"IteratorHelper\"] = new IteratorHelper(listHelper, interpreter, kind);\r\n\r\n        return {\r\n            value: rt,\r\n            type: klass\r\n        }\r\n    }\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"ListIteratorImpl\", module);\r\n\r\n        let objectType = module.typeStore.getType(\"Object\");\r\n\r\n        this.setBaseClass(<Klass>objectType);\r\n\r\n        let typeE: Klass = (<Klass>objectType).clone();\r\n        typeE.identifier = \"E\";\r\n        typeE.isTypeVariable = true;\r\n\r\n        let tvE: TypeVariable = {\r\n            identifier: \"E\",\r\n            scopeFrom: { line: 1, column: 1, length: 1 },\r\n            scopeTo: { line: 1, column: 1, length: 1 },\r\n            type: typeE\r\n        };\r\n\r\n        this.typeVariables.push(tvE);\r\n\r\n        let iteratorInterface = (<Interface>module.typeStore.getType(\"Iterator\")).clone();\r\n        iteratorInterface.typeVariables = [tvE];\r\n\r\n        this.implements.push(iteratorInterface);\r\n\r\n        this.addMethod(new Method(\"hasNext\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: IteratorHelper = o.intrinsicData[\"IteratorHelper\"];\r\n\r\n                return ah.hasNext();\r\n\r\n            },\r\n            false, false, \"Gibt genau dann true zurück, wenn sich noch mindestens ein weiteres Element in der Collection befindet.\"));\r\n\r\n        this.addMethod(new Method(\"next\", new Parameterlist([\r\n        ]), typeE,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: IteratorHelper = o.intrinsicData[\"IteratorHelper\"];\r\n\r\n                return ah.next();\r\n\r\n            },\r\n            false, false, \"Gibt das nächste Element der Collection zurück.\"));\r\n\r\n        this.addMethod(new Method(\"remove\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: IteratorHelper = o.intrinsicData[\"IteratorHelper\"];\r\n\r\n                return ah.remove();\r\n\r\n            },\r\n            false, false, \"Löscht das letzte durch next zurückgegebene Objekt. Diese Methode beeinflusst nicht, welches Element als nächstes durch next zurückgegeben wird.\"));\r\n\r\n\r\n\r\n    }\r\n}\r\n\r\nclass IteratorHelper {\r\n\r\n    nextPos: number;\r\n\r\n    constructor(private listHelper: ListHelper, private interpreter: Interpreter, private kind: IteratorKind) {\r\n        switch (kind) {\r\n            case \"ascending\": this.nextPos = 0; break;\r\n            case \"descending\": this.nextPos = listHelper.objectArray.length - 1; break;\r\n        }\r\n    }\r\n\r\n    remove() {\r\n        switch (this.kind) {\r\n            case \"ascending\":\r\n                if (this.nextPos == 0) {\r\n                    this.interpreter.throwException(\"Die Methode remove() des Iterators wurde aufgerufen, obwohl noch nie next() aufgerufen wurde.\")\r\n                } else if (this.nextPos > this.listHelper.objectArray.length - 1) {\r\n                    this.interpreter.throwException(\"Die Methode remove() des Iterators wurde aufgerufen, obwohl das letzte Element schon beim vorherigen Aufruf zurückgegeben worden war.\")\r\n                } else {\r\n                    this.listHelper.valueArray.splice(this.nextPos - 1, 1);\r\n                    this.listHelper.objectArray.splice(this.nextPos - 1, 1);\r\n                    this.nextPos -= 1;\r\n                }\r\n                break;\r\n            case \"descending\":\r\n                if (this.nextPos == this.listHelper.objectArray.length - 1) {\r\n                    this.interpreter.throwException(\"Die Methode remove() des Iterators wurde aufgerufen, obwohl noch nie next() aufgerufen wurde.\")\r\n                } else if (this.nextPos < 0) {\r\n                    this.interpreter.throwException(\"Die Methode remove() des Iterators wurde aufgerufen, obwohl das letzte Element schon beim vorherigen Aufruf zurückgegeben worden war.\")\r\n                } else {\r\n                    this.listHelper.valueArray.splice(this.nextPos + 1, 1);\r\n                    this.listHelper.objectArray.splice(this.nextPos + 1, 1);\r\n                    this.nextPos += 1;\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n    next(): any {\r\n        switch (this.kind) {\r\n            case \"ascending\":\r\n                if (this.nextPos > this.listHelper.objectArray.length - 1) {\r\n                    this.interpreter.throwException(\"Die Methode next() des Iterators wurde aufgerufen, obwohl das letzte Element schon beim vorherigen Aufruf zurückgegeben worden war.\")\r\n                    return null;\r\n                }\r\n                return this.listHelper.objectArray[this.nextPos++];\r\n            case \"descending\":\r\n                if (this.nextPos < 0) {\r\n                    this.interpreter.throwException(\"Die Methode next() des Iterators wurde aufgerufen, obwohl das letzte Element schon beim vorherigen Aufruf zurückgegeben worden war.\")\r\n                    return null;\r\n                }\r\n                return this.listHelper.objectArray[this.nextPos--];\r\n        }\r\n    }\r\n\r\n    hasNext(): boolean {\r\n        switch (this.kind) {\r\n            case \"ascending\":\r\n                return this.nextPos < this.listHelper.objectArray.length;\r\n            case \"descending\":\r\n                return this.nextPos >= 0;\r\n        }\r\n    }\r\n\r\n\r\n\r\n}\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Interface, Klass, TypeVariable } from \"../../compiler/types/Class.js\";\r\nimport { booleanPrimitiveType, intPrimitiveType, stringPrimitiveType, objectType, StringPrimitiveType, DoubleType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, Value, PrimitiveType } from \"../../compiler/types/Types.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { Program, Statement } from \"../../compiler/parser/Program.js\";\r\nimport { TokenType, TextPosition } from \"../../compiler/lexer/Token.js\";\r\nimport { ArrayType } from \"../../compiler/types/Array.js\";\r\nimport { ListIteratorImplClass } from \"./ListIteratorImpl.js\";\r\nimport { Enum } from \"../../compiler/types/Enum.js\";\r\n\r\nexport class ArrayListClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"ArrayList\", module, \"Liste mit Zugriff auf das n-te Objekt in konstanter Zeit, Einfügen in konstanter Zeit und Suchen in linearer Zeit\");\r\n\r\n        let objectType = module.typeStore.getType(\"Object\");\r\n\r\n        this.setBaseClass(<Klass>objectType);\r\n\r\n        let typeA: Klass = (<Klass>objectType).clone();\r\n        typeA.identifier = \"A\";\r\n        typeA.isTypeVariable = true;\r\n\r\n        let tvA: TypeVariable = {\r\n            identifier: \"A\",\r\n            scopeFrom: { line: 1, column: 1, length: 1 },\r\n            scopeTo: { line: 1, column: 1, length: 1 },\r\n            type: typeA\r\n        };\r\n\r\n        this.typeVariables.push(tvA);\r\n\r\n        let listInterface = (<Interface>module.typeStore.getType(\"List\")).clone();\r\n        listInterface.typeVariables = [tvA];\r\n\r\n        this.implements.push(listInterface);\r\n\r\n        let iteratorType = (<Klass>module.typeStore.getType(\"Iterator\")).clone();\r\n        iteratorType.typeVariables = [tvA];\r\n\r\n        this.addMethod(new Method(\"ArrayList\", new Parameterlist([\r\n            // { identifier: \"mx\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let ah = new ListHelper(o, module.main.getInterpreter(), module);\r\n                o.intrinsicData[\"ListHelper\"] = ah;\r\n\r\n            }, false, false, 'Instanziert eine neue ArrayList', true));\r\n\r\n        this.addMethod(new Method(\"iterator\", new Parameterlist([\r\n        ]), iteratorType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ListIteratorImplClass.getIterator(ah, ah.interpreter, module, \"ascending\").value;\r\n\r\n            }, true, false, \"Gibt einen Iterator über die Elemente dieser Collection zurück.\"));\r\n\r\n        this.addMethod(new Method(\"add\", new Parameterlist([\r\n            { identifier: \"element\", type: typeA, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let r: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.add(r);\r\n\r\n            }, false, false, \"Fügt der Liste ein Element hinzu. Gibt genau dann true zurück, wenn sich der Zustand der Liste dadurch geändert hat.\"));\r\n\r\n        this.addMethod(new Method(\"add\", new Parameterlist([\r\n            { identifier: \"index\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"element\", type: typeA, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let index: number = parameters[1].value;\r\n                let r: Value = parameters[2];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.add(r, index);\r\n\r\n            }, false, false, \"Ändert das Element an der Position index der Liste. Tipp: Das erste Element der Liste hat index == 0.\"));\r\n\r\n        this.addMethod(new Method(\"get\", new Parameterlist([\r\n            { identifier: \"index\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), typeA,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let index: number = parameters[1].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n                \r\n                return ah.get(index)?.value;\r\n\r\n            }, false, false, \"Gibt das i-te Element der Liste zurück.\"));\r\n\r\n        this.addMethod(new Method(\"remove\", new Parameterlist([\r\n            { identifier: \"index\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let index: number = parameters[1].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                ah.remove(index);\r\n\r\n                return null;\r\n\r\n            }, true, false, \"Entfernt das Element an der Stelle index. WICHTIG: Das erste Element hat den Index 0. Es ist 0 <= index < size()\"));\r\n\r\n        this.addMethod(new Method(\"indexOf\", new Parameterlist([\r\n            { identifier: \"o\", type: typeA, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.indexOf(object);\r\n\r\n            }, true, false, \"Gibt den Index des Elements o zurück. Gibt -1 zurück, wenn die Liste das Element o nicht enthält. WICHTIG: Das erste Element hat den Index 0, das letzte den Index size() - 1. \"));\r\n\r\n        this.addMethod(new Method(\"addAll\", new Parameterlist([\r\n            { identifier: \"c\", type: this, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: RuntimeObject = parameters[1].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.adAll(object);\r\n\r\n            },\r\n            true, false, \"Fügt alle Elemente von c dieser Collection hinzu.\"));\r\n\r\n        this.addMethod(new Method(\"clear\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.clear();\r\n\r\n            },\r\n            true, false, \"Entfernt alle Element aus dieser Collection.\"));\r\n\r\n        this.addMethod(new Method(\"contains\", new Parameterlist([\r\n            { identifier: \"o\", type: typeA, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.contains(object);\r\n\r\n            },\r\n            true, false, \"Testet, ob die Collection das Element enthält.\"));\r\n\r\n        this.addMethod(new Method(\"remove\", new Parameterlist([\r\n            { identifier: \"o\", type: typeA, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.removeObject(object);\r\n\r\n            },\r\n            true, false, \"Entfernt das Element o aus der Collection. Gibt true zurück, wenn die Collection das Element enthalten hatte.\"));\r\n\r\n        this.addMethod(new Method(\"isEmpty\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.isEmpty();\r\n\r\n            },\r\n            true, false, \"Testet, ob die Collection das leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"size\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.size();\r\n\r\n            },\r\n            true, false, \"Gibt die Anzahl der Elemente der Collection zurück.\"));\r\n\r\n        this.addMethod(new Method(\"toString\", new Parameterlist([]), stringPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.to_String();\r\n\r\n            }, false, false));\r\n\r\n    }\r\n\r\n}\r\n\r\nexport class ListHelper {\r\n\r\n    valueArray: Value[] = [];\r\n    objectArray: any[] = []; // wird mitgeführt, um schnelle indexOf-Operationen zu ermöglichen\r\n\r\n    constructor(private runtimeObject: RuntimeObject, public interpreter: Interpreter, private module: Module) {\r\n    }\r\n\r\n    allElementsPrimitive(): boolean {\r\n        for (let v of this.valueArray) {\r\n            if (!(v.type instanceof PrimitiveType || [\"String\", \"_Double\", \"Integer\", \"Boolean\" ,\"Character\"].indexOf(v.type.identifier) >= 0)) {\r\n                return false;\r\n                break;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    to_String(): any {\r\n\r\n        if (this.allElementsPrimitive()) {\r\n            return \"[\" + this.objectArray.map(o => \"\" + o).join(\", \") + \"]\";\r\n        }\r\n\r\n        let position: TextPosition = {\r\n            line: 1,\r\n            column: 1,\r\n            length: 1\r\n        }\r\n\r\n        let statements: Statement[] = [\r\n            {\r\n                type: TokenType.noOp,\r\n                position: position,\r\n                stepFinished: false\r\n            },\r\n            {\r\n                type: TokenType.pushConstant,\r\n                dataType: stringPrimitiveType,\r\n                value: \"[\",\r\n                position: position,\r\n                stepFinished: false\r\n            },\r\n        ];\r\n\r\n        let toStringParameters = new Parameterlist([]);\r\n\r\n        for (let i = 0; i < this.valueArray.length; i++) {\r\n            let value = this.valueArray[i];\r\n            if (value.value == null || value.type instanceof PrimitiveType || value.type instanceof StringPrimitiveType) {\r\n                statements.push({\r\n                    type: TokenType.pushConstant,\r\n                    dataType: stringPrimitiveType,\r\n                    value: value.value == null ? \"null\" : value.type.castTo(value, stringPrimitiveType).value,\r\n                    position: position,\r\n                    stepFinished: false\r\n                });\r\n            } else {\r\n                statements.push({\r\n                    type: TokenType.pushConstant,\r\n                    dataType: value.type,\r\n                    value: value.value,\r\n                    stepFinished: false,\r\n                    position: position\r\n                });\r\n                statements.push({\r\n                    type: TokenType.callMethod,\r\n                    method: (<Klass | Interface | Enum>value.type).getMethod(\"toString\", toStringParameters),\r\n                    isSuperCall: false,\r\n                    stackframeBegin: -1,\r\n                    stepFinished: false,\r\n                    position: position\r\n                });\r\n\r\n            }\r\n\r\n            statements.push({\r\n                type: TokenType.binaryOp,\r\n                operator: TokenType.plus,\r\n                leftType: stringPrimitiveType,\r\n                stepFinished: false,\r\n                position: position\r\n            });\r\n\r\n            if (i < this.valueArray.length - 1) {\r\n                statements.push({\r\n                    type: TokenType.pushConstant,\r\n                    dataType: stringPrimitiveType,\r\n                    value: \", \",\r\n                    position: position,\r\n                    stepFinished: false\r\n                });\r\n                statements.push({\r\n                    type: TokenType.binaryOp,\r\n                    operator: TokenType.plus,\r\n                    leftType: stringPrimitiveType,\r\n                    stepFinished: false,\r\n                    position: position\r\n                });\r\n\r\n            }\r\n\r\n        }\r\n\r\n        statements.push({\r\n            type: TokenType.pushConstant,\r\n            dataType: stringPrimitiveType,\r\n            value: \"]\",\r\n            position: position,\r\n            stepFinished: false\r\n        });\r\n\r\n        statements.push({\r\n            type: TokenType.binaryOp,\r\n            operator: TokenType.plus,\r\n            leftType: stringPrimitiveType,\r\n            stepFinished: false,\r\n            position: position\r\n        });\r\n\r\n        // statements.push({\r\n        //     type: TokenType.binaryOp,\r\n        //     operator: TokenType.plus,\r\n        //     leftType: stringPrimitiveType,\r\n        //     stepFinished: false,\r\n        //     position: position\r\n        // });\r\n\r\n        statements.push({\r\n            type: TokenType.return,\r\n            copyReturnValueToStackframePos0: true,\r\n            leaveThisObjectOnStack: false,\r\n            stepFinished: false,\r\n            position: position,\r\n            methodWasInjected: true\r\n        });\r\n\r\n        let program: Program = {\r\n            module: this.module,\r\n            statements: statements,\r\n            labelManager: null\r\n        }\r\n\r\n        let method: Method = new Method(\"toString\", new Parameterlist([]), stringPrimitiveType, program, false, false);\r\n        this.interpreter.runTimer(method, [], () => {}, true);\r\n\r\n        return \"\";\r\n    }\r\n\r\n    adAll(object: RuntimeObject): boolean {\r\n\r\n        let ah: ListHelper = object.intrinsicData[\"ListHelper\"];\r\n        if (ah != null) {\r\n            this.valueArray = this.valueArray.concat(ah.valueArray);\r\n            this.objectArray = this.objectArray.concat(ah.objectArray);\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n\r\n    get(index: number): Value {\r\n        if (index >= 0 && index < this.valueArray.length) {\r\n            return this.valueArray[index];\r\n        }\r\n        this.interpreter.throwException(\"Der ArrayList-Index ist außerhalb des Intervalls von 0 bis \" + (this.valueArray.length - 1) + \". \")\r\n        return null;\r\n    }\r\n\r\n    remove(index: number): Value {\r\n\r\n        if (index >= 0 && index < this.valueArray.length) {\r\n            this.valueArray.splice(index, 1);\r\n            this.objectArray.splice(index, 1);\r\n            return null;\r\n        }\r\n\r\n        this.interpreter.throwException(\"Der ArrayList-Index ist außerhalb des Intervalls von 0 bis \" + (this.valueArray.length - 1) + \". \")\r\n\r\n        return null;\r\n    }\r\n\r\n    add(r: Value, index?): boolean {\r\n        if(index == null){\r\n            this.valueArray.push(r);\r\n            this.objectArray.push(r.value);\r\n        } else {\r\n            if(index < this.objectArray.length && index >= 0){\r\n                this.valueArray[index] = r;\r\n                this.objectArray[index] = r.value;\r\n            } else {\r\n                this.interpreter.throwException(\"Der ArrayList-Index ist außerhalb des Intervalls von 0 bis \" + (this.valueArray.length - 1) + \". \")\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    pop(): any {\r\n        if (this.objectArray.length == 0) {\r\n            this.interpreter.throwException(\"Der ArrayList-Index ist außerhalb des Intervalls von 0 bis \" + (this.valueArray.length - 1) + \". \")\r\n            return null;\r\n        } else {\r\n            this.valueArray.pop();\r\n            return this.objectArray.pop();\r\n        }\r\n    }\r\n\r\n    peek(): any {\r\n        if (this.objectArray.length == 0) {\r\n            this.interpreter.throwException(\"Der ArrayList-Index ist außerhalb des Intervalls von 0 bis \" + (this.valueArray.length - 1) + \". \")\r\n            return null;\r\n        } else {\r\n            return this.objectArray[this.objectArray.length - 1];\r\n        }\r\n    }\r\n\r\n    indexOf(o: Value): number {\r\n        return this.objectArray.indexOf(o.value);\r\n    }\r\n\r\n    size(): number {\r\n        return this.objectArray.length;\r\n    }\r\n\r\n    isEmpty(): boolean {\r\n        return this.valueArray.length == 0;\r\n    }\r\n\r\n    removeObject(object: Value) {\r\n        let index = this.objectArray.indexOf(object.value);\r\n        if (index >= 0) {\r\n            this.objectArray.splice(index, 1);\r\n            this.valueArray.splice(index, 1);\r\n        }\r\n    }\r\n\r\n    contains(object: Value): any {\r\n        return this.objectArray.indexOf(object.value) >= 0;\r\n    }\r\n\r\n    clear() {\r\n        this.valueArray = [];\r\n        this.objectArray = [];\r\n    }\r\n\r\n    peek_last_or_null(): any {\r\n        if (this.objectArray.length == 0) {\r\n            return null;\r\n        } else {\r\n            return this.objectArray[this.objectArray.length - 1];\r\n        }\r\n    }\r\n    peek_first_or_null(): any {\r\n        if (this.objectArray.length == 0) {\r\n            return null;\r\n        } else {\r\n            return this.objectArray[0];\r\n        }\r\n    }\r\n    \r\n    removeLast_or_error(){\r\n        if (this.objectArray.length == 0) {\r\n            return null;\r\n        } else {\r\n            this.valueArray.pop();\r\n            return this.objectArray.pop();\r\n        }\r\n    };\r\n\r\n    addLast(object: Value) {\r\n        this.valueArray.push(object);\r\n        this.objectArray.push(object.value);\r\n        return true;\r\n    }\r\n    addFirst(object: Value): any {\r\n        this.valueArray.splice(0, 0, object);\r\n        this.objectArray.splice(0, 0, object.value);\r\n        return true;\r\n    }\r\n    removeFirstOccurrence(object: Value): boolean {\r\n        let index = this.objectArray.indexOf(object.value);\r\n        if(index >= 0){\r\n            this.valueArray.splice(index, 1);\r\n            this.objectArray.splice(index, 1);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    peek_or_null(): any {\r\n        if (this.objectArray.length == 0) {\r\n            return null;\r\n        } else {\r\n            return this.objectArray[this.objectArray.length - 1];\r\n        }\r\n    }\r\n\r\n    poll_or_null(): any {\r\n        if (this.objectArray.length == 0) {\r\n            return null;\r\n        } else {\r\n            this.valueArray.pop();\r\n            return this.objectArray.pop();\r\n        }\r\n    }\r\n\r\n    removeFirst_or_error(): any {\r\n        if(this.objectArray.length == 0){\r\n            this.interpreter.throwException(\"Der ArrayList-Index ist außerhalb des Intervalls von 0 bis \" + (this.valueArray.length - 1) + \". \")\r\n        } else {\r\n            let object = this.objectArray[0];\r\n            this.objectArray.splice(0, 1);\r\n            this.valueArray.splice(0, 1);\r\n            return object;\r\n        }\r\n    }\r\n\r\n\r\n}\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { Interface, TypeVariable, Klass } from \"../../compiler/types/Class.js\";\r\nimport { voidPrimitiveType, booleanPrimitiveType, intPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\n\r\nexport class CollectionClass extends Interface {\r\n\r\n    constructor(module: Module) {\r\n        \r\n        super(\"Collection\", module, \"Interface für Listen, Maps, Sets usw. mit Methoden zum Einfügen von Objekten, Zugriff auf Objekte und zur Ermittlung der Anzahl der Objekte\");\r\n\r\n        let objectType = module.typeStore.getType(\"Object\");\r\n\r\n        let typeE: Klass = (<Klass>objectType).clone();\r\n        typeE.identifier = \"E\";\r\n        typeE.isTypeVariable = true;\r\n\r\n        let tvE: TypeVariable = {\r\n            identifier: \"E\",\r\n            scopeFrom: {line: 1, column: 1, length: 1},\r\n            scopeTo: {line: 1, column: 1, length: 1},\r\n            type: typeE\r\n        };\r\n        this.typeVariables.push(tvE);\r\n\r\n        let iterableInterface = (<Interface>module.typeStore.getType(\"Iterable\")).clone();\r\n        iterableInterface.typeVariables = [tvE];\r\n\r\n        this.extends.push(iterableInterface);\r\n\r\n\r\n        this.addMethod(new Method(\"add\", new Parameterlist([\r\n            { identifier: \"element\", type: typeE, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            null,  // no implementation!\r\n            true, false, \"Fügt der Collection ein Element hinzu. Gibt genau dann true zurück, wenn sich der Zustand der Collection dadurch geändert hat.\"));\r\n\r\n        this.addMethod(new Method(\"addAll\", new Parameterlist([\r\n            { identifier: \"c\", type: this, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            null,  // no implementation!\r\n            true, false, \"Fügt alle Elemente von c dieser Collection hinzu.\"));\r\n\r\n        // TODO: Implement\r\n        // this.addMethod(new Method(\"removeAll\", new Parameterlist([\r\n        //     { identifier: \"c\", type: this, declaration: null, usagePositions: null, isFinal: true }\r\n        // ]), booleanPrimitiveType,\r\n        //     null,  // no implementation!\r\n        //     true, false, \"Löscht alle Elemente aus dieser Collection, die in c enthalten sind.\"));\r\n\r\n        this.addMethod(new Method(\"clear\", new Parameterlist([\r\n        ]), null,\r\n            null,  // no implementation!\r\n            true, false, \"Entfernt alle Element aus dieser Collection.\"));\r\n\r\n        this.addMethod(new Method(\"contains\", new Parameterlist([\r\n            { identifier: \"o\", type: objectType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            null,  // no implementation!\r\n            true, false, \"Testet, ob die Collection das Element enthält.\"));\r\n\r\n        this.addMethod(new Method(\"remove\", new Parameterlist([\r\n            { identifier: \"o\", type: objectType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            null,  // no implementation!\r\n            true, false, \"Entfernt das Element o aus der Collection. Gibt true zurück, wenn die Collection das Element enthalten hatte.\"));\r\n\r\n        this.addMethod(new Method(\"isEmpty\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            null,  // no implementation!\r\n            true, false, \"Testet, ob die Collection das leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"size\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            null,  // no implementation!\r\n            true, false, \"Gibt die Anzahl der Elemente der Collection zurück.\"));\r\n\r\n\r\n    \r\n    }\r\n\r\n}\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { Interface, TypeVariable, Klass } from \"../../compiler/types/Class.js\";\r\nimport { voidPrimitiveType, booleanPrimitiveType, intPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\n\r\nexport class IterableClass extends Interface {\r\n\r\n    constructor(module: Module) {\r\n        \r\n        super(\"Iterable\", module, \"Interface mit Funktionalität zum iterieren (d.h. Durchlaufen aller Elemente)\");\r\n\r\n        let typeE: Klass = (<Klass>module.typeStore.getType(\"Object\")).clone();\r\n        typeE.identifier = \"E\";\r\n        typeE.isTypeVariable = true;\r\n\r\n        let tvE: TypeVariable = {\r\n            identifier: \"E\",\r\n            scopeFrom: {line: 1, column: 1, length: 1},\r\n            scopeTo: {line: 1, column: 1, length: 1},\r\n            type: typeE\r\n        };\r\n        this.typeVariables.push(tvE);\r\n\r\n        let iteratorType = (<Klass>module.typeStore.getType(\"Iterator\")).clone();\r\n        iteratorType.typeVariables = [tvE];\r\n\r\n\r\n        this.addMethod(new Method(\"iterator\", new Parameterlist([\r\n        ]), iteratorType,\r\n            null,  // no implementation!\r\n            true, false, \"Gibt einen Iterator über die Elemente dieser Collection zurück.\"));\r\n\r\n    }\r\n\r\n}\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { Interface, TypeVariable, Klass } from \"../../compiler/types/Class.js\";\r\nimport { voidPrimitiveType, booleanPrimitiveType, intPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\n\r\nexport class IteratorClass extends Interface {\r\n\r\n    constructor(module: Module) {\r\n        \r\n        super(\"Iterator\", module);\r\n\r\n        let typeA: Klass = (<Klass>module.typeStore.getType(\"Object\")).clone();\r\n        typeA.identifier = \"E\";\r\n        typeA.isTypeVariable = true;\r\n\r\n        let tvE: TypeVariable = {\r\n            identifier: \"E\",\r\n            scopeFrom: {line: 1, column: 1, length: 1},\r\n            scopeTo: {line: 1, column: 1, length: 1},\r\n            type: typeA\r\n        };\r\n\r\n        this.typeVariables.push(tvE);\r\n\r\n\r\n        this.addMethod(new Method(\"hasNext\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            null,  // no implementation!\r\n            true, false, \"Gibt genau dann true zurück, wenn sich noch mindestens ein weiteres Element in der Collection befindet.\"));\r\n\r\n        this.addMethod(new Method(\"next\", new Parameterlist([\r\n            // { identifier: \"index\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), typeA,\r\n            null,  // no implementation!\r\n            true, false, \"Gibt das nächste Element der Collection zurück.\"));\r\n\r\n        this.addMethod(new Method(\"remove\", new Parameterlist([\r\n            // { identifier: \"index\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            null,  // no implementation!\r\n            true, false, \"Löscht das letzte durch next zurückgegebene Objekt. Diese Methode beeinflusst nicht, welches Element als nächstes durch next zurückgegeben wird.\"));\r\n\r\n    }\r\n\r\n}\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { Interface, TypeVariable, Klass } from \"../../compiler/types/Class.js\";\r\nimport { voidPrimitiveType, booleanPrimitiveType, intPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\n\r\nexport class ListClass extends Interface {\r\n\r\n    constructor(module: Module) {\r\n        \r\n        super(\"List\", module, \"Interface mit Methoden einer Liste (d.h. Anfügen von Elementen nur am Ende)\");\r\n\r\n        let objectType = module.typeStore.getType(\"Object\");\r\n\r\n        let typeE: Klass = (<Klass>module.typeStore.getType(\"Object\")).clone();\r\n        typeE.identifier = \"E\";\r\n        typeE.isTypeVariable = true;\r\n\r\n        let tvE: TypeVariable = {\r\n            identifier: \"E\",\r\n            scopeFrom: {line: 1, column: 1, length: 1},\r\n            scopeTo: {line: 1, column: 1, length: 1},\r\n            type: typeE\r\n        };\r\n\r\n        this.typeVariables.push(tvE);\r\n\r\n        let collectionInterface = (<Interface>module.typeStore.getType(\"Collection\")).clone();\r\n        collectionInterface.typeVariables = [tvE];\r\n\r\n        this.extends.push(collectionInterface);\r\n\r\n        this.addMethod(new Method(\"get\", new Parameterlist([\r\n            { identifier: \"index\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), typeE,\r\n            null,  // no implementation!\r\n            true, false, \"Gibt das Element der Liste an der Stelle index zurück. WICHTIG: Das erste Element hat den Index 0. Es ist 0 <= index < size()\"));\r\n\r\n        this.addMethod(new Method(\"remove\", new Parameterlist([\r\n            { identifier: \"index\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            null,  // no implementation!\r\n            true, false, \"Entfernt das Element an der Stelle index. WICHTIG: Das erste Element hat den Index 0. Es ist 0 <= index < size()\"));\r\n\r\n            this.addMethod(new Method(\"indexOf\", new Parameterlist([\r\n            { identifier: \"o\", type: objectType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            null,  // no implementation!\r\n            true, false, \"Gibt den Index des Elements o zurück. Gibt -1 zurück, wenn die Liste das Element o nicht enthält. WICHTIG: Das erste Element hat den Index 0, das letzte den Index size() - 1. \"));\r\n    }\r\n\r\n}\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass } from \"../../compiler/types/Class.js\";\r\nimport { booleanPrimitiveType, intPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, Value } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { ListHelper } from \"./ArrayList.js\";\r\n\r\nexport class StackClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Stack\", module, \"Stack (Stapelspeicher)\");\r\n\r\n        let objectType = module.typeStore.getType(\"Object\");\r\n        let vectorType = <Klass>module.typeStore.getType(\"Vector\");\r\n\r\n        this.setBaseClass(vectorType);\r\n        this.typeVariables = vectorType.typeVariables;\r\n        let typeE = this.typeVariables[0].type;\r\n\r\n        this.addMethod(new Method(\"push\", new Parameterlist([\r\n            { identifier: \"element\", type: typeE, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), typeE,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let r: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                ah.add(r);\r\n\r\n                return r.value;\r\n\r\n            }, false, false, \"Pushed ein Element oben auf den Stack. Gibt das gerade gepushte Element zurück.\"));\r\n\r\n        this.addMethod(new Method(\"pop\", new Parameterlist([\r\n        ]), typeE,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.pop();\r\n\r\n            }, false, false, \"Nimmt das oberste Element vom Stack und gibt es zurück.\"));\r\n\r\n            this.addMethod(new Method(\"peek\", new Parameterlist([\r\n        ]), typeE,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.peek();\r\n\r\n            }, false, false, \"Gibt das oberste Element des Stacks zurück, nimmt es aber nicht vom Stack herunter.\"));\r\n\r\n        this.addMethod(new Method(\"empty\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.isEmpty();\r\n\r\n            },\r\n            true, false, \"Testet, ob die Collection das leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"search\", new Parameterlist([\r\n            { identifier: \"element\", type: typeE, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let r: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                let index = ah.indexOf(r);\r\n                return index == -1 ? index : ah.objectArray.length - index;\r\n\r\n            },\r\n            true, false, \"Gibt die Position des Objekts auf dem Stack zurück. Dabei hat das oberste Element den Index 1, das nächstunterste den Index 2 usw. . Falls sich das Objekt nicht auf dem Stack befindet, wird -1 zurückgegeben.\"));\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass, TypeVariable, Interface } from \"../../compiler/types/Class.js\";\r\nimport { doublePrimitiveType, booleanPrimitiveType, intPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, Value } from \"../../compiler/types/Types.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { TilingSprite } from \"pixi.js\";\r\nimport { ListHelper } from \"./ArrayList.js\";\r\nimport { ListIteratorImplClass } from \"./ListIteratorImpl.js\";\r\n\r\nexport class VectorClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Vector\", module, \"Liste mit Zugriff auf das n-te Element in konstanter Zeit\");\r\n\r\n        let objectType = module.typeStore.getType(\"Object\");\r\n\r\n        this.setBaseClass(<Klass>objectType);\r\n\r\n        let typeA: Klass = (<Klass>objectType).clone();\r\n        typeA.identifier = \"A\";\r\n        typeA.isTypeVariable = true;\r\n\r\n        let tvA: TypeVariable = {\r\n            identifier: \"A\",\r\n            scopeFrom: { line: 1, column: 1, length: 1 },\r\n            scopeTo: { line: 1, column: 1, length: 1 },\r\n            type: typeA\r\n        };\r\n\r\n        this.typeVariables.push(tvA);\r\n\r\n        let listInterface = (<Interface>module.typeStore.getType(\"List\")).clone();\r\n        listInterface.typeVariables = [tvA];\r\n\r\n        this.implements.push(listInterface);\r\n\r\n        let iteratorType = (<Klass>module.typeStore.getType(\"Iterator\")).clone();\r\n        iteratorType.typeVariables = [tvA];\r\n\r\n        this.addMethod(new Method(\"Vector\", new Parameterlist([\r\n            // { identifier: \"mx\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let ah = new ListHelper(o, module.main.getInterpreter(), module);\r\n                o.intrinsicData[\"ListHelper\"] = ah;\r\n\r\n            }, false, false, 'Instanziert ein neues Vector-Objekt', true));\r\n\r\n            this.addMethod(new Method(\"iterator\", new Parameterlist([\r\n            ]), iteratorType,\r\n                (parameters) => {\r\n    \r\n                    let o: RuntimeObject = parameters[0].value;\r\n                    let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n    \r\n                    return ListIteratorImplClass.getIterator(ah, ah.interpreter, module, \"ascending\").value;\r\n    \r\n                }, false, false, \"Gibt einen Iterator über die Elemente dieser Collection zurück.\"));\r\n    \r\n\r\n        this.addMethod(new Method(\"add\", new Parameterlist([\r\n            { identifier: \"element\", type: typeA, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let r: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.add(r);\r\n\r\n            }, false, false, \"Fügt der Liste ein Element hinzu. Gibt genau dann true zurück, wenn sich der Zustand der Liste dadurch geändert hat.\"));\r\n\r\n        this.addMethod(new Method(\"get\", new Parameterlist([\r\n            { identifier: \"index\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), typeA,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let index: number = parameters[1].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.get(index).value;\r\n\r\n            }, false, false, \"Gibt das i-te Element der Liste zurück.\"));\r\n\r\n        this.addMethod(new Method(\"remove\", new Parameterlist([\r\n            { identifier: \"index\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let index: number = parameters[1].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                ah.remove(index).value;\r\n\r\n                return null;\r\n\r\n            }, false, false, \"Entfernt das Element an der Stelle index. WICHTIG: Das erste Element hat den Index 0. Es ist 0 <= index < size()\"));\r\n\r\n        this.addMethod(new Method(\"indexOf\", new Parameterlist([\r\n            { identifier: \"o\", type: typeA, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.indexOf(object);\r\n\r\n            }, false, false, \"Gibt den Index des Elements o zurück. Gibt -1 zurück, wenn die Liste das Element o nicht enthält. WICHTIG: Das erste Element hat den Index 0, das letzte den Index size() - 1. \"));\r\n\r\n        this.addMethod(new Method(\"addAll\", new Parameterlist([\r\n            { identifier: \"c\", type: this, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: RuntimeObject = parameters[1].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.adAll(object);\r\n\r\n            },\r\n            false, false, \"Fügt alle Elemente von c dieser Collection hinzu.\"));\r\n\r\n        this.addMethod(new Method(\"clear\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.clear();\r\n\r\n            },\r\n            false, false, \"Entfernt alle Element aus dieser Collection.\"));\r\n\r\n        this.addMethod(new Method(\"contains\", new Parameterlist([\r\n            { identifier: \"o\", type: typeA, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.contains(object);\r\n\r\n            },\r\n            false, false, \"Testet, ob die Collection das Element enthält.\"));\r\n\r\n        this.addMethod(new Method(\"remove\", new Parameterlist([\r\n            { identifier: \"o\", type: typeA, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.removeObject(object);\r\n\r\n            },\r\n            false, false, \"Entfernt das Element o aus der Collection. Gibt true zurück, wenn die Collection das Element enthalten hatte.\"));\r\n\r\n        this.addMethod(new Method(\"isEmpty\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.isEmpty();\r\n\r\n            },\r\n            false, false, \"Testet, ob die Collection das leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"size\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.size();\r\n\r\n            },\r\n            false, false, \"Gibt die Anzahl der Elemente der Collection zurück.\"));\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { Interface, TypeVariable, Klass } from \"../../compiler/types/Class.js\";\r\nimport { voidPrimitiveType, booleanPrimitiveType, intPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\n\r\nexport class SetClass extends Interface {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Set\", module, \"Interface mit Methoden eines Set, d.h. einer Menge, die jedes Element maximal einmal enthält\");\r\n\r\n        let objectType = module.typeStore.getType(\"Object\");\r\n\r\n        let typeE: Klass = (<Klass>module.typeStore.getType(\"Object\")).clone();\r\n        typeE.identifier = \"E\";\r\n        typeE.isTypeVariable = true;\r\n\r\n        let tvE: TypeVariable = {\r\n            identifier: \"E\",\r\n            scopeFrom: { line: 1, column: 1, length: 1 },\r\n            scopeTo: { line: 1, column: 1, length: 1 },\r\n            type: typeE\r\n        };\r\n\r\n        this.typeVariables.push(tvE);\r\n\r\n        let collectionInterface = (<Interface>module.typeStore.getType(\"Collection\")).clone();\r\n        collectionInterface.typeVariables = [tvE];\r\n\r\n        this.extends.push(collectionInterface);\r\n\r\n        this.addMethod(new Method(\"contains\", new Parameterlist([\r\n            { identifier: \"o\", type: objectType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            null,  // no implementation!\r\n            true, false, \"Gibt genau dann true zurück, wenn das Set das Objekt o enthält.\"));\r\n\r\n        this.addMethod(new Method(\"containsAll\", new Parameterlist([\r\n            { identifier: \"c\", type: collectionInterface, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            null,  // no implementation!\r\n            true, false, \"Gibt genau dann true zurück, wenn das Set alle Elemente der übergebenen Collection enthält.\"));\r\n\r\n    }\r\n\r\n}\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Interface, Klass, TypeVariable } from \"../../compiler/types/Class.js\";\r\nimport { booleanPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, Value } from \"../../compiler/types/Types.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { SetHelper } from \"./SetHelper.js\";\r\n\r\nexport type IteratorKind = \"descending\" | \"ascending\";\r\n\r\nexport class SetIteratorImplClass extends Klass {\r\n\r\n    public static getIterator(MapHelper: SetHelper, interpreter: Interpreter, module: Module, kind: IteratorKind): Value {\r\n\r\n        let klass = <Klass>module.typeStore.getType(\"SetIteratorImpl\");\r\n        let rt: RuntimeObject = new RuntimeObject(klass);\r\n        rt.intrinsicData[\"SetIteratorHelper\"] = new SetIteratorHelper(MapHelper, interpreter, kind);\r\n\r\n        return {\r\n            value: rt,\r\n            type: klass\r\n        }\r\n    }\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"SetIteratorImpl\", module);\r\n\r\n        let objectType = module.typeStore.getType(\"Object\");\r\n\r\n        this.setBaseClass(<Klass>objectType);\r\n\r\n        let typeE: Klass = (<Klass>objectType).clone();\r\n        typeE.identifier = \"E\";\r\n        typeE.isTypeVariable = true;\r\n\r\n        let tvE: TypeVariable = {\r\n            identifier: \"E\",\r\n            scopeFrom: { line: 1, column: 1, length: 1 },\r\n            scopeTo: { line: 1, column: 1, length: 1 },\r\n            type: typeE\r\n        };\r\n\r\n        this.typeVariables.push(tvE);\r\n\r\n        let iteratorInterface = (<Interface>module.typeStore.getType(\"Iterator\")).clone();\r\n        iteratorInterface.typeVariables = [tvE];\r\n\r\n        this.implements.push(iteratorInterface);\r\n\r\n        this.addMethod(new Method(\"hasNext\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: SetIteratorHelper = o.intrinsicData[\"SetIteratorHelper\"];\r\n\r\n                return ah.hasNext();\r\n\r\n            },\r\n            false, false, \"Gibt genau dann true zurück, wenn sich noch mindestens ein weiteres Element in der Collection befindet.\"));\r\n\r\n        this.addMethod(new Method(\"next\", new Parameterlist([\r\n        ]), typeE,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: SetIteratorHelper = o.intrinsicData[\"SetIteratorHelper\"];\r\n\r\n                return ah.next();\r\n\r\n            },\r\n            false, false, \"Gibt das nächste Element der Collection zurück.\"));\r\n\r\n        this.addMethod(new Method(\"remove\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: SetIteratorHelper = o.intrinsicData[\"SetIteratorHelper\"];\r\n\r\n                return ah.remove();\r\n\r\n            },\r\n            false, false, \"Löscht das letzte durch next zurückgegebene Objekt. Diese Methode beeinflusst nicht, welches Element als nächstes durch next zurückgegeben wird.\"));\r\n\r\n\r\n\r\n    }\r\n}\r\n\r\nclass SetIteratorHelper {\r\n\r\n    nextPos: number;\r\n\r\n    constructor(private MapHelper: SetHelper, private interpreter: Interpreter, private kind: IteratorKind) {\r\n        switch (kind) {\r\n            case \"ascending\": this.nextPos = 0; break;\r\n            case \"descending\": this.nextPos = MapHelper.valueArray.length - 1; break;\r\n        }\r\n    }\r\n\r\n    remove() {\r\n        switch (this.kind) {\r\n            case \"ascending\":\r\n                if (this.nextPos == 0) {\r\n                    this.interpreter.throwException(\"Die Methode remove() des Iterators wurde aufgerufen, obwohl noch nie next() aufgerufen wurde.\")\r\n                } else if (this.nextPos > this.MapHelper.valueArray.length - 1) {\r\n                    this.interpreter.throwException(\"Die Methode remove() des Iterators wurde aufgerufen, obwohl das letzte Element schon beim vorherigen Aufruf zurückgegeben worden war.\")\r\n                } else {\r\n                    this.MapHelper.removeObject(this.MapHelper.valueArray[this.nextPos - 1].value);\r\n                    this.nextPos -= 1;\r\n                }\r\n                break;\r\n            case \"descending\":\r\n                if (this.nextPos == this.MapHelper.valueArray.length - 1) {\r\n                    this.interpreter.throwException(\"Die Methode remove() des Iterators wurde aufgerufen, obwohl noch nie next() aufgerufen wurde.\")\r\n                } else if (this.nextPos < 0) {\r\n                    this.interpreter.throwException(\"Die Methode remove() des Iterators wurde aufgerufen, obwohl das letzte Element schon beim vorherigen Aufruf zurückgegeben worden war.\")\r\n                } else {\r\n                    this.MapHelper.removeObject(this.MapHelper.valueArray[this.nextPos + 1].value);\r\n                    this.nextPos += 1;\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n    next(): any {\r\n        switch (this.kind) {\r\n            case \"ascending\":\r\n                if (this.nextPos > this.MapHelper.valueArray.length - 1) {\r\n                    this.interpreter.throwException(\"Die Methode next() des Iterators wurde aufgerufen, obwohl das letzte Element schon beim vorherigen Aufruf zurückgegeben worden war.\")\r\n                    return null;\r\n                }\r\n                return this.MapHelper.valueArray[this.nextPos++];\r\n            case \"descending\":\r\n                if (this.nextPos < 0) {\r\n                    this.interpreter.throwException(\"Die Methode next() des Iterators wurde aufgerufen, obwohl das letzte Element schon beim vorherigen Aufruf zurückgegeben worden war.\")\r\n                    return null;\r\n                }\r\n                return this.MapHelper.valueArray[this.nextPos--];\r\n        }\r\n    }\r\n\r\n    hasNext(): boolean {\r\n        switch (this.kind) {\r\n            case \"ascending\":\r\n                return this.nextPos < this.MapHelper.valueArray.length;\r\n            case \"descending\":\r\n                return this.nextPos >= 0;\r\n        }\r\n    }\r\n\r\n\r\n\r\n}","import { TextPosition, TokenType } from \"../../compiler/lexer/Token.js\";\r\nimport { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Program, Statement } from \"../../compiler/parser/Program.js\";\r\nimport { Interface, Klass } from \"../../compiler/types/Class.js\";\r\nimport { Enum } from \"../../compiler/types/Enum.js\";\r\nimport { booleanPrimitiveType, stringPrimitiveType, StringPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, PrimitiveType, Value } from \"../../compiler/types/Types.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { ListHelper } from \"./ArrayList.js\";\r\n\r\n\r\nexport class SetHelper {\r\n\r\n    valueArray: Value[] = [];\r\n\r\n    map: Map<any, boolean> = new Map(); // Maps key objects to index in keyArray/valueArray\r\n\r\n    constructor(private runtimeObject: RuntimeObject, public interpreter: Interpreter, private module: Module) {\r\n    }\r\n\r\n    allElementsPrimitive(): boolean {\r\n        for (let v of this.valueArray) {\r\n            if (!(v.type instanceof PrimitiveType || [\"String\", \"_Double\", \"Integer\", \"Boolean\" ,\"Character\"].indexOf(v.type.identifier) >= 0)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    to_String(): any {\r\n\r\n        if (this.allElementsPrimitive()) {\r\n            return \"[\" + this.valueArray.map(o => \"\" + o.value).join(\", \") + \"]\";\r\n        }\r\n\r\n        let position: TextPosition = {\r\n            line: 1,\r\n            column: 1,\r\n            length: 1\r\n        }\r\n\r\n        let statements: Statement[] = [\r\n            {\r\n                type: TokenType.noOp,\r\n                position: position,\r\n                stepFinished: false\r\n            },\r\n            {\r\n                type: TokenType.pushConstant,\r\n                dataType: stringPrimitiveType,\r\n                value: \"[\",\r\n                position: position,\r\n                stepFinished: false\r\n            },\r\n        ];\r\n\r\n        let toStringParameters = new Parameterlist([]);\r\n\r\n        for (let i = 0; i < this.valueArray.length; i++) {\r\n\r\n            let key = this.valueArray[i];\r\n            if (key.type instanceof PrimitiveType || key.type instanceof StringPrimitiveType) {\r\n                statements.push({\r\n                    type: TokenType.pushConstant,\r\n                    dataType: stringPrimitiveType,\r\n                    value: key.type.castTo(key, stringPrimitiveType).value,\r\n                    position: position,\r\n                    stepFinished: false\r\n                });\r\n            } else {\r\n                statements.push({\r\n                    type: TokenType.pushConstant,\r\n                    dataType: key.type,\r\n                    value: key.value,\r\n                    stepFinished: false,\r\n                    position: position\r\n                });\r\n                statements.push({\r\n                    type: TokenType.callMethod,\r\n                    method: (<Klass | Interface | Enum>key.type).getMethod(\"toString\", toStringParameters),\r\n                    isSuperCall: false,\r\n                    stackframeBegin: -1,\r\n                    stepFinished: false,\r\n                    position: position\r\n                });\r\n\r\n            }\r\n\r\n            statements.push({\r\n                type: TokenType.binaryOp,\r\n                operator: TokenType.plus,\r\n                leftType: stringPrimitiveType,\r\n                stepFinished: false,\r\n                position: position\r\n            });\r\n\r\n            statements.push({\r\n                type: TokenType.binaryOp,\r\n                operator: TokenType.plus,\r\n                leftType: stringPrimitiveType,\r\n                stepFinished: false,\r\n                position: position\r\n            });\r\n\r\n            if (i < this.valueArray.length - 1) {\r\n                statements.push({\r\n                    type: TokenType.pushConstant,\r\n                    dataType: stringPrimitiveType,\r\n                    value: \", \",\r\n                    position: position,\r\n                    stepFinished: false\r\n                });\r\n                statements.push({\r\n                    type: TokenType.binaryOp,\r\n                    operator: TokenType.plus,\r\n                    leftType: stringPrimitiveType,\r\n                    stepFinished: false,\r\n                    position: position\r\n                });\r\n\r\n            }\r\n\r\n        }\r\n\r\n        statements.push({\r\n            type: TokenType.pushConstant,\r\n            dataType: stringPrimitiveType,\r\n            value: \"]\",\r\n            position: position,\r\n            stepFinished: false\r\n        });\r\n\r\n        statements.push({\r\n            type: TokenType.binaryOp,\r\n            operator: TokenType.plus,\r\n            leftType: stringPrimitiveType,\r\n            stepFinished: false,\r\n            position: position\r\n        });\r\n\r\n        // statements.push({\r\n        //     type: TokenType.binaryOp,\r\n        //     operator: TokenType.plus,\r\n        //     leftType: stringPrimitiveType,\r\n        //     stepFinished: false,\r\n        //     position: position\r\n        // });\r\n\r\n        statements.push({\r\n            type: TokenType.return,\r\n            copyReturnValueToStackframePos0: true,\r\n            leaveThisObjectOnStack: false,\r\n            stepFinished: false,\r\n            position: position,\r\n            methodWasInjected: true\r\n        });\r\n\r\n        let program: Program = {\r\n            module: this.module,\r\n            statements: statements,\r\n            labelManager: null\r\n        }\r\n\r\n        let method: Method = new Method(\"toString\", new Parameterlist([]), stringPrimitiveType, program, false, false);\r\n        this.interpreter.runTimer(method, [], () => console.log(\"List.toString fertig!\"), true)\r\n\r\n        return \"\";\r\n    }\r\n\r\n    // Only for Set\r\n    adAll(object: RuntimeObject): boolean {\r\n\r\n        let ret: boolean = false;\r\n        let ah: SetHelper | ListHelper = object.intrinsicData[\"ListHelper\"];\r\n        if (ah != null) {\r\n            for (let value of ah.valueArray) {\r\n                ret = ret || this.addToSet(value);\r\n            }\r\n        }\r\n\r\n        return ret;\r\n    }\r\n\r\n    addToSet(r: Value): boolean {\r\n        if (this.contains(r)) return false;\r\n\r\n        this.valueArray.push(r);\r\n        this.map.set(r.value, true);\r\n        return true;\r\n    }\r\n\r\n    size(): number {\r\n        return this.valueArray.length;\r\n    }\r\n\r\n    isEmpty(): boolean {\r\n        return this.valueArray.length == 0;\r\n    }\r\n\r\n    removeObject(object: Value) {\r\n\r\n        if(this.map.get(object.value) == null) return false;\r\n\r\n        for(let i = 0; i < this.valueArray.length; i++){\r\n            if(this.valueArray[i].value == object.value){\r\n                this.valueArray.splice(i, 1);\r\n            }\r\n        }\r\n\r\n        this.map.delete(object.value);\r\n    }\r\n\r\n    contains(object: Value): any {\r\n        return this.map.get(object.value) != null;\r\n    }\r\n\r\n    clear() {\r\n        this.valueArray = [];\r\n        this.map.clear();\r\n    }\r\n\r\n}\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Interface, Klass, TypeVariable } from \"../../compiler/types/Class.js\";\r\nimport { booleanPrimitiveType, intPrimitiveType, stringPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, Value } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { SetIteratorImplClass } from \"./SetIteratorImpl.js\";\r\nimport { SetHelper } from \"./SetHelper.js\";\r\n\r\nexport class HashSetClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"HashSet\", module, \"Set mit Zugriffszeit proportional zu log(Anzahl der Elemente)\");\r\n\r\n        let objectType = module.typeStore.getType(\"Object\");\r\n\r\n        this.setBaseClass(<Klass>objectType);\r\n\r\n        let typeE: Klass = (<Klass>objectType).clone();\r\n        typeE.identifier = \"E\";\r\n        typeE.isTypeVariable = true;\r\n\r\n        let tvE: TypeVariable = {\r\n            identifier: \"E\",\r\n            scopeFrom: { line: 1, column: 1, length: 1 },\r\n            scopeTo: { line: 1, column: 1, length: 1 },\r\n            type: typeE\r\n        };\r\n\r\n        this.typeVariables.push(tvE);\r\n\r\n        let setInterface = (<Interface>module.typeStore.getType(\"Set\")).clone();\r\n        setInterface.typeVariables = [tvE];\r\n\r\n        this.implements.push(setInterface);\r\n\r\n        let iteratorType = (<Klass>module.typeStore.getType(\"Iterator\")).clone();\r\n        iteratorType.typeVariables = [tvE];\r\n\r\n        this.addMethod(new Method(\"HashSet\", new Parameterlist([\r\n            // { identifier: \"mx\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let mh = new SetHelper(o, module.main.getInterpreter(), module);\r\n                o.intrinsicData[\"ListHelper\"] = mh;\r\n\r\n            }, false, false, 'Instanziert ein neues HashSet', true));\r\n\r\n        this.addMethod(new Method(\"iterator\", new Parameterlist([\r\n        ]), iteratorType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return SetIteratorImplClass.getIterator(ah, ah.interpreter, module, \"ascending\").value;\r\n\r\n            }, false, false, \"Gibt einen Iterator über die Elemente dieser Collection zurück.\"));\r\n\r\n        this.addMethod(new Method(\"add\", new Parameterlist([\r\n            { identifier: \"element\", type: typeE, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let r: Value = parameters[1];\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.addToSet(r);\r\n\r\n            }, false, false, \"Fügt der Liste ein Element hinzu. Gibt genau dann true zurück, wenn sich der Zustand der Liste dadurch geändert hat.\"));\r\n\r\n        this.addMethod(new Method(\"addAll\", new Parameterlist([\r\n            { identifier: \"c\", type: this, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: RuntimeObject = parameters[1].value;\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.adAll(object);\r\n\r\n            },\r\n            false, false, \"Fügt alle Elemente von c dieser Collection hinzu.\"));\r\n\r\n        this.addMethod(new Method(\"clear\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.clear();\r\n\r\n            },\r\n            false, false, \"Entfernt alle Element aus dieser Collection.\"));\r\n\r\n        this.addMethod(new Method(\"contains\", new Parameterlist([\r\n            { identifier: \"o\", type: typeE, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.contains(object);\r\n\r\n            },\r\n            false, false, \"Testet, ob die Collection das Element enthält.\"));\r\n\r\n        this.addMethod(new Method(\"remove\", new Parameterlist([\r\n            { identifier: \"o\", type: typeE, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.removeObject(object);\r\n\r\n            },\r\n            false, false, \"Entfernt das Element o aus der Collection. Gibt true zurück, wenn die Collection das Element enthalten hatte.\"));\r\n\r\n        this.addMethod(new Method(\"isEmpty\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.isEmpty();\r\n\r\n            },\r\n            false, false, \"Testet, ob die Collection das leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"size\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.size();\r\n\r\n            },\r\n            false, false, \"Gibt die Anzahl der Elemente der Collection zurück.\"));\r\n\r\n        this.addMethod(new Method(\"toString\", new Parameterlist([]), stringPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.to_String();\r\n\r\n            }, false, false));\r\n\r\n    }\r\n\r\n}","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Interface, Klass, TypeVariable } from \"../../compiler/types/Class.js\";\r\nimport { booleanPrimitiveType, intPrimitiveType, stringPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, Value } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { SetIteratorImplClass } from \"./SetIteratorImpl.js\";\r\nimport { SetHelper } from \"./SetHelper.js\";\r\n\r\nexport class LinkedHashSetClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"LinkedHashSet\", module, \"Ein LinkedHashSet speichert jedes Element nur genau ein Mal.\");\r\n\r\n        let objectType = module.typeStore.getType(\"Object\");\r\n\r\n        this.setBaseClass(<Klass>objectType);\r\n\r\n        let typeE: Klass = (<Klass>objectType).clone();\r\n        typeE.identifier = \"E\";\r\n        typeE.isTypeVariable = true;\r\n\r\n        let tvE: TypeVariable = {\r\n            identifier: \"E\",\r\n            scopeFrom: { line: 1, column: 1, length: 1 },\r\n            scopeTo: { line: 1, column: 1, length: 1 },\r\n            type: typeE\r\n        };\r\n\r\n        this.typeVariables.push(tvE);\r\n\r\n        let setInterface = (<Interface>module.typeStore.getType(\"Set\")).clone();\r\n        setInterface.typeVariables = [tvE];\r\n\r\n        this.implements.push(setInterface);\r\n\r\n        let iteratorType = (<Klass>module.typeStore.getType(\"Iterator\")).clone();\r\n        iteratorType.typeVariables = [tvE];\r\n\r\n        this.addMethod(new Method(\"LinkedHashSet\", new Parameterlist([\r\n            // { identifier: \"mx\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let mh = new SetHelper(o, module.main.getInterpreter(), module);\r\n                o.intrinsicData[\"MapHelper\"] = mh;\r\n\r\n            }, false, false, 'Instanziert ein neues LinkedHashSet', true));\r\n\r\n        this.addMethod(new Method(\"iterator\", new Parameterlist([\r\n        ]), iteratorType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return SetIteratorImplClass.getIterator(ah, ah.interpreter, module, \"ascending\").value;\r\n\r\n            }, false, false, \"Gibt einen Iterator über die Elemente dieser Collection zurück.\"));\r\n\r\n        this.addMethod(new Method(\"add\", new Parameterlist([\r\n            { identifier: \"element\", type: typeE, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let r: Value = parameters[1];\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.addToSet(r);\r\n\r\n            }, false, false, \"Fügt der Liste ein Element hinzu. Gibt genau dann true zurück, wenn sich der Zustand der Liste dadurch geändert hat.\"));\r\n\r\n        this.addMethod(new Method(\"addAll\", new Parameterlist([\r\n            { identifier: \"c\", type: this, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: RuntimeObject = parameters[1].value;\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.adAll(object);\r\n\r\n            },\r\n            false, false, \"Fügt alle Elemente von c dieser Collection hinzu.\"));\r\n\r\n        this.addMethod(new Method(\"clear\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.clear();\r\n\r\n            },\r\n            false, false, \"Entfernt alle Element aus dieser Collection.\"));\r\n\r\n        this.addMethod(new Method(\"contains\", new Parameterlist([\r\n            { identifier: \"o\", type: typeE, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.contains(object);\r\n\r\n            },\r\n            false, false, \"Testet, ob die Collection das Element enthält.\"));\r\n\r\n        this.addMethod(new Method(\"remove\", new Parameterlist([\r\n            { identifier: \"o\", type: typeE, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.removeObject(object);\r\n\r\n            },\r\n            false, false, \"Entfernt das Element o aus der Collection. Gibt true zurück, wenn die Collection das Element enthalten hatte.\"));\r\n\r\n        this.addMethod(new Method(\"isEmpty\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.isEmpty();\r\n\r\n            },\r\n            false, false, \"Testet, ob die Collection das leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"size\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.size();\r\n\r\n            },\r\n            false, false, \"Gibt die Anzahl der Elemente der Collection zurück.\"));\r\n\r\n        this.addMethod(new Method(\"toString\", new Parameterlist([]), stringPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.to_String();\r\n\r\n            }, false, false));\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { Interface, TypeVariable, Klass } from \"../../compiler/types/Class.js\";\r\nimport { voidPrimitiveType, booleanPrimitiveType, intPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\n\r\nexport class QueueClass extends Interface {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Queue\", module);\r\n\r\n        let objectType = <Klass>module.typeStore.getType(\"Object\");\r\n\r\n        let typeE: Klass = objectType.clone();\r\n        typeE.identifier = \"E\";\r\n        typeE.isTypeVariable = true;\r\n\r\n        let tvE: TypeVariable = {\r\n            identifier: \"E\",\r\n            scopeFrom: { line: 1, column: 1, length: 1 },\r\n            scopeTo: { line: 1, column: 1, length: 1 },\r\n            type: typeE\r\n        };\r\n\r\n        this.typeVariables.push(tvE);\r\n\r\n        let collectionInterface = (<Interface>module.typeStore.getType(\"Collection\")).clone();\r\n        collectionInterface.typeVariables = [tvE];\r\n\r\n        this.extends.push(collectionInterface);\r\n\r\n\r\n        this.addMethod(new Method(\"remove\", new Parameterlist([\r\n        ]), typeE,\r\n            null,  // no implementation!\r\n            true, false, \"Entfernt das Element am Kopf der Liste und gibt es zurück. Führt zum Fehler, wenn die Liste leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"poll\", new Parameterlist([\r\n            { identifier: \"element\", type: typeE, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), typeE,\r\n            null,  // no implementation!\r\n            true, false, \"Entfernt das Element am Kopf der Liste und gibt es zurück. Gibt null zurück, wenn die Liste leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"peek\", new Parameterlist([\r\n        ]), typeE,\r\n            null,  // no implementation!\r\n            true, false, \"Gibt das Element am Kopf der Liste zurück, entfernt es aber nicht. Gib null zurück, wenn die Liste leer ist.\"));\r\n\r\n    }\r\n\r\n\r\n}\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { Interface, TypeVariable, Klass } from \"../../compiler/types/Class.js\";\r\nimport { voidPrimitiveType, booleanPrimitiveType, intPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\n\r\nexport class DequeClass extends Interface {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Deque\", module, \"Interface für Liste mit zweiseitigem Zugriff (insbesondere Anfügen an beiden Enden)\");\r\n\r\n        let objectType = <Klass>module.typeStore.getType(\"Object\");\r\n\r\n        let typeE: Klass = objectType.clone();\r\n        typeE.identifier = \"E\";\r\n        typeE.isTypeVariable = true;\r\n\r\n        let tvE: TypeVariable = {\r\n            identifier: \"E\",\r\n            scopeFrom: { line: 1, column: 1, length: 1 },\r\n            scopeTo: { line: 1, column: 1, length: 1 },\r\n            type: typeE\r\n        };\r\n\r\n        this.typeVariables.push(tvE);\r\n\r\n        let QueueInterface = (<Interface>module.typeStore.getType(\"Queue\")).clone();\r\n        QueueInterface.typeVariables = [tvE];\r\n\r\n        this.extends.push(QueueInterface);\r\n\r\n\r\n        this.addMethod(new Method(\"removeFirstOccurrence\", new Parameterlist([\r\n            { identifier: \"element\", type: typeE, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            null,  // no implementation!\r\n            true, false, \"Löscht das Erste Vorkommen des Objekts. Gibt true zurück, wenn die Liste dadurch verändert wurde.\"));\r\n\r\n        this.addMethod(new Method(\"removeLastOccurrence\", new Parameterlist([\r\n            { identifier: \"element\", type: typeE, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            null,  // no implementation!\r\n            true, false, \"Löscht das Letzte Vorkommen des Objekts. Gibt true zurück, wenn die Liste dadurch verändert wurde.\"));\r\n\r\n        this.addMethod(new Method(\"addFirst\", new Parameterlist([\r\n            { identifier: \"element\", type: typeE, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            null,  // no implementation!\r\n            true, false, \"Fügt das Element am Anfang der Liste hinzu.\"));\r\n\r\n        this.addMethod(new Method(\"addLast\", new Parameterlist([\r\n            { identifier: \"element\", type: typeE, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            null,  // no implementation!\r\n            true, false, \"Fügt das Element am Ende der Liste hinzu.\"));\r\n\r\n        this.addMethod(new Method(\"removeFirst\", new Parameterlist([\r\n        ]), typeE,\r\n            null,  // no implementation!\r\n            true, false, \"Entfernt das Element am Anfang der Liste und gibt es zurück. Führt zum Fehler, wenn die Liste leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"removeLast\", new Parameterlist([\r\n        ]), typeE,\r\n            null,  // no implementation!\r\n            true, false, \"Entfernt das Element am Ende der Liste und gibt es zurück. Führt zum Fehler, wenn die Liste leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"peekFirst\", new Parameterlist([\r\n        ]), typeE,\r\n            null,  // no implementation!\r\n            true, false, \"Gibt das Element am Anfang der Liste zurück, entfernt es aber nicht. Gib null zurück, wenn die Liste leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"peekLast\", new Parameterlist([\r\n        ]), typeE,\r\n            null,  // no implementation!\r\n            true, false, \"Gibt das Element am Ende der Liste zurück, entfernt es aber nicht. Gib null zurück, wenn die Liste leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"push\", new Parameterlist([\r\n            { identifier: \"element\", type: typeE, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            null,  // no implementation!\r\n            true, false, \"Fügt das Element am Ende der Liste hinzu.\"));\r\n\r\n        this.addMethod(new Method(\"pop\", new Parameterlist([\r\n        ]), typeE,\r\n            null,  // no implementation!\r\n            true, false, \"Gibt das Element am Ende der Liste zurück und entfernt es von der Liste. Erzeugt einen Fehler, wenn die Liste leer ist.\"));\r\n\r\n        let iteratorType = (<Klass>module.typeStore.getType(\"Iterator\")).clone();\r\n        iteratorType.typeVariables = [tvE];\r\n\r\n        this.addMethod(new Method(\"descendingIterator\", new Parameterlist([\r\n        ]), iteratorType,\r\n            null,  // no implementation!\r\n            true, false, \"Gibt einen Iterator über die Elemente dieser Collection zurück, der die Liste in umgekehrter Reihenfolge (Ende -> Anfang) durchläuft.\"));\r\n\r\n    }\r\n\r\n\r\n}\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Interface, Klass, TypeVariable } from \"../../compiler/types/Class.js\";\r\nimport { booleanPrimitiveType, intPrimitiveType, stringPrimitiveType, objectType, StringPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, Value, PrimitiveType } from \"../../compiler/types/Types.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { Program, Statement } from \"../../compiler/parser/Program.js\";\r\nimport { TokenType, TextPosition } from \"../../compiler/lexer/Token.js\";\r\nimport { ArrayType } from \"../../compiler/types/Array.js\";\r\nimport { ListIteratorImplClass } from \"./ListIteratorImpl.js\";\r\nimport { Enum } from \"../../compiler/types/Enum.js\";\r\nimport { ListHelper } from \"./ArrayList.js\";\r\n\r\nexport class LinkedListClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"LinkedList\", module, \"Verkettete Liste\");\r\n\r\n        let objectType = module.typeStore.getType(\"Object\");\r\n\r\n        this.setBaseClass(<Klass>objectType);\r\n\r\n        let typeA: Klass = (<Klass>objectType).clone();\r\n        typeA.identifier = \"A\";\r\n        typeA.isTypeVariable = true;\r\n\r\n        let tvA: TypeVariable = {\r\n            identifier: \"A\",\r\n            scopeFrom: { line: 1, column: 1, length: 1 },\r\n            scopeTo: { line: 1, column: 1, length: 1 },\r\n            type: typeA\r\n        };\r\n\r\n        this.typeVariables.push(tvA);\r\n\r\n        let dequeInterface = (<Interface>module.typeStore.getType(\"Deque\")).clone();\r\n        dequeInterface.typeVariables = [tvA];\r\n\r\n        this.implements.push(dequeInterface);\r\n\r\n        let iteratorType = (<Klass>module.typeStore.getType(\"Iterator\")).clone();\r\n        iteratorType.typeVariables = [tvA];\r\n\r\n        this.addMethod(new Method(\"LinkedList\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let ah = new ListHelper(o, module.main.getInterpreter(), module);\r\n                o.intrinsicData[\"ListHelper\"] = ah;\r\n\r\n            }, false, false, 'Instanziert eine neue LinkedList', true));\r\n\r\n        this.addMethod(new Method(\"iterator\", new Parameterlist([\r\n        ]), iteratorType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ListIteratorImplClass.getIterator(ah, ah.interpreter, module, \"ascending\").value;\r\n\r\n            }, false, false, \"Gibt einen Iterator über die Elemente dieser Collection zurück.\"));\r\n\r\n        this.addMethod(new Method(\"descendingIterator\", new Parameterlist([\r\n        ]), iteratorType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ListIteratorImplClass.getIterator(ah, ah.interpreter, module, \"descending\").value;\r\n\r\n            }, false, false, \"Gibt einen Iterator über die Elemente dieser Collection zurück, der die Liste in umgekehrter Reihenfolge durchläuft (Ende -> Anfang).\"));\r\n\r\n        this.addMethod(new Method(\"add\", new Parameterlist([\r\n            { identifier: \"element\", type: typeA, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let r: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.add(r);\r\n\r\n            }, false, false, \"Fügt der Liste am Ende ein Element hinzu. Gibt genau dann true zurück, wenn sich der Zustand der Liste dadurch geändert hat.\"));\r\n\r\n        this.addMethod(new Method(\"addAll\", new Parameterlist([\r\n            { identifier: \"c\", type: this, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: RuntimeObject = parameters[1].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.adAll(object);\r\n\r\n            },\r\n            false, false, \"Fügt alle Elemente von c dieser Collection hinzu.\"));\r\n\r\n        this.addMethod(new Method(\"clear\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.clear();\r\n\r\n            },\r\n            false, false, \"Entfernt alle Element aus dieser Collection.\"));\r\n\r\n        this.addMethod(new Method(\"contains\", new Parameterlist([\r\n            { identifier: \"o\", type: typeA, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.contains(object);\r\n\r\n            },\r\n            false, false, \"Testet, ob die Collection das Element enthält.\"));\r\n\r\n        this.addMethod(new Method(\"remove\", new Parameterlist([\r\n            { identifier: \"o\", type: typeA, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.removeObject(object);\r\n\r\n            },\r\n            false, false, \"Entfernt das Element o aus der Collection. Gibt true zurück, wenn die Collection das Element enthalten hatte.\"));\r\n\r\n        this.addMethod(new Method(\"isEmpty\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.isEmpty();\r\n\r\n            },\r\n            false, false, \"Testet, ob die Collection das leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"size\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.size();\r\n\r\n            },\r\n            false, false, \"Gibt die Anzahl der Elemente der Collection zurück.\"));\r\n\r\n        this.addMethod(new Method(\"toString\", new Parameterlist([]), stringPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.to_String();\r\n\r\n            }, false, false));\r\n\r\n\r\n        this.addMethod(new Method(\"remove\", new Parameterlist([\r\n        ]), typeA,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.removeFirst_or_error();\r\n\r\n            },\r\n            false, false, \"Entfernt das Element am Kopf der Liste und gibt es zurück. Führt zum Fehler, wenn die Liste leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"poll\", new Parameterlist([\r\n        ]), typeA,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.poll_or_null();\r\n\r\n            },\r\n            false, false, \"Entfernt das Element am Kopf der Liste und gibt es zurück. Gibt null zurück, wenn die Liste leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"peek\", new Parameterlist([\r\n        ]), typeA,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.peek_or_null();\r\n\r\n            },\r\n            false, false, \"Gibt das Element am Kopf der Liste zurück, entfernt es aber nicht. Gib null zurück, wenn die Liste leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"removeFirstOccurrence\", new Parameterlist([\r\n            { identifier: \"element\", type: typeA, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.removeFirstOccurrence(object);\r\n\r\n            },\r\n            false, false, \"Löscht das Erste Vorkommen des Objekts. Gibt true zurück, wenn die Liste dadurch verändert wurde.\"));\r\n\r\n        this.addMethod(new Method(\"removeLastOccurrence\", new Parameterlist([\r\n            { identifier: \"element\", type: typeA, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.removeFirstOccurrence(object);\r\n\r\n            },\r\n            false, false, \"Löscht das Letzte Vorkommen des Objekts. Gibt true zurück, wenn die Liste dadurch verändert wurde.\"));\r\n\r\n        this.addMethod(new Method(\"addFirst\", new Parameterlist([\r\n            { identifier: \"element\", type: typeA, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.addFirst(object);\r\n\r\n            },\r\n            false, false, \"Fügt das Element am Anfang der Liste hinzu.\"));\r\n\r\n        this.addMethod(new Method(\"addLast\", new Parameterlist([\r\n            { identifier: \"element\", type: typeA, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.addLast(object);\r\n\r\n            },\r\n            false, false, \"Fügt das Element am Ende der Liste hinzu.\"));\r\n\r\n        this.addMethod(new Method(\"removeFirst\", new Parameterlist([\r\n        ]), typeA,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.removeFirst_or_error();\r\n\r\n            },\r\n            false, false, \"Entfernt das Element am Anfang der Liste und gibt es zurück. Führt zum Fehler, wenn die Liste leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"removeLast\", new Parameterlist([\r\n        ]), typeA,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.removeLast_or_error();\r\n\r\n            },\r\n            false, false, \"Entfernt das Element am Ende der Liste und gibt es zurück. Führt zum Fehler, wenn die Liste leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"peekFirst\", new Parameterlist([\r\n        ]), typeA,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.peek_first_or_null();\r\n\r\n            },\r\n            false, false, \"Gibt das Element am Anfang der Liste zurück, entfernt es aber nicht. Gib null zurück, wenn die Liste leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"peekLast\", new Parameterlist([\r\n        ]), typeA,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.peek_last_or_null();\r\n\r\n            },\r\n            false, false, \"Gibt das Element am Ende der Liste zurück, entfernt es aber nicht. Gib null zurück, wenn die Liste leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"push\", new Parameterlist([\r\n            { identifier: \"element\", type: typeA, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.add(object);\r\n\r\n            },\r\n            false, false, \"Fügt das Element am Ende der Liste hinzu.\"));\r\n\r\n        this.addMethod(new Method(\"pop\", new Parameterlist([\r\n        ]), typeA,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.pop();\r\n\r\n            },\r\n            false, false, \"Gibt das Element am Ende der Liste zurück und entfernt es von der Liste. Erzeugt einen Fehler, wenn die Liste leer ist.\"));\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Type, Method, Parameterlist, Value, Attribute } from \"../compiler/types/Types.js\";\r\nimport { Klass } from \"../compiler/types/Class.js\";\r\nimport { stringPrimitiveType } from \"../compiler/types/PrimitiveTypes.js\";\r\nimport { Module } from \"../compiler/parser/Module.js\";\r\nimport { PrintManager } from \"../main/gui/PrintManager.js\";\r\n\r\nexport class ConsoleClass extends Klass {\r\n\r\n    constructor(module: Module){\r\n        super(\"Console\", module, \"Klasse zur Textausgabe in der Konsole.\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n\r\n        this.addMethod( new Method(\"log\", new Parameterlist([{identifier: \"text\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: false}]), null, \r\n                (parameters) => { \r\n                    // console.log(<string>(parameters[0].value)); \r\n                    module.main.getBottomDiv()?.console.$consoleTab.find('.jo_console-top').append(\"<div>\" + <string>(parameters[1].value) + \"</div>\"); \r\n                }, false, true));\r\n\r\n    }\r\n\r\n}","import { Program } from \"../parser/Program.js\";\r\nimport { Klass, Visibility } from \"./Class.js\";\r\nimport { Value, Attribute, Method, Parameterlist, Type } from \"./Types.js\";\r\nimport { Module } from \"../parser/Module.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { ArrayType } from \"./Array.js\";\r\nimport { TextPosition } from \"../lexer/Token.js\";\r\nimport { EnumValueNode } from \"../parser/AST.js\";\r\nimport { stringPrimitiveType, intPrimitiveType, objectType } from \"./PrimitiveTypes.js\";\r\n\r\nexport class EnumRuntimeObject extends RuntimeObject {\r\n\r\n    enumValue: EnumInfo;\r\n\r\n    constructor(en: Enum, enumValue: EnumInfo) {\r\n        super(en);\r\n        this.enumValue = enumValue;\r\n    }\r\n\r\n}\r\n\r\nexport type EnumInfo = {\r\n    identifier: string,\r\n    ordinal: number,\r\n    position?: TextPosition,\r\n    object?: EnumRuntimeObject,\r\n    constructorCallProgram?: Program\r\n}\r\n\r\n\r\nexport class Enum extends Klass {\r\n\r\n    enumInfoList: EnumInfo[] = [];\r\n    identifierToInfoMap: { [identifier: string]: EnumInfo } = {};\r\n    indexToInfoMap: { [index: number]: EnumInfo } = {};\r\n\r\n    valueList: Value = null;\r\n\r\n    getOrdinal(valueIdentifier: string): number {\r\n\r\n        let enumInfo: EnumInfo = this.identifierToInfoMap[valueIdentifier];\r\n        if (enumInfo == null) return -1;\r\n        return enumInfo.ordinal;\r\n\r\n    }\r\n\r\n    public debugOutput(value: Value, maxLength: number = 40): string {\r\n        let enumObject = <EnumRuntimeObject>value.value;\r\n        return this.identifier + \".\" + enumObject.enumValue.identifier;\r\n    }\r\n\r\n    constructor(identifier: string, module: Module, enumValueNodes: EnumValueNode[]) {\r\n\r\n        super(identifier, module);\r\n        this.baseClass = objectType;\r\n\r\n        let i: number = 0;\r\n\r\n        for (let evn of enumValueNodes) {\r\n\r\n            let attribute: Attribute = new Attribute(evn.identifier, this, null, true, Visibility.public, true);\r\n\r\n            if (evn.position != null) {\r\n                attribute.declaration = {\r\n                    module: module,\r\n                    position: evn.position\r\n                }\r\n\r\n                attribute.usagePositions.set(module, [evn.position]);\r\n            }\r\n\r\n            this.staticClass.addAttribute(\r\n                attribute\r\n            );\r\n\r\n\r\n            let ev: EnumInfo = {\r\n                identifier: evn.identifier,\r\n                ordinal: i++\r\n            }\r\n\r\n            this.enumInfoList.push(ev);\r\n            this.identifierToInfoMap[evn.identifier] = ev;\r\n            this.indexToInfoMap[ev.ordinal] = ev;\r\n\r\n        }\r\n\r\n        if(module.isSystemModule){\r\n            this.valueList = {\r\n                type: new ArrayType(this),\r\n                value: []\r\n            };\r\n            for(let ei of this.enumInfoList){\r\n\r\n                ei.object = new EnumRuntimeObject(this, ei);\r\n\r\n                this.valueList.value.push({\r\n                    type: this,\r\n                    value: ei.object\r\n                })\r\n            }\r\n        }\r\n\r\n        let that = this;\r\n\r\n        this.staticClass.addMethod(new Method(\"getValues\",\r\n            new Parameterlist([]), new ArrayType(this), (parameters: Value[]) => {\r\n\r\n                if (this.valueList == null) {\r\n\r\n                    let values = [];\r\n                    for (let vi of this.enumInfoList) {\r\n\r\n                        values.push({\r\n                            type: that,\r\n                            value: vi.object\r\n                        });\r\n\r\n                    }\r\n\r\n                    this.valueList = {\r\n                        type: new ArrayType(that),\r\n                        value: values\r\n                    }\r\n\r\n                }\r\n\r\n                return this.valueList;\r\n\r\n            }, false, true)\r\n        );\r\n\r\n        this.addMethod(new Method(\"toString\",\r\n            new Parameterlist([]), stringPrimitiveType, (parameters: Value[]) => {\r\n\r\n                let erto: EnumRuntimeObject = <EnumRuntimeObject>(parameters[0].value);\r\n\r\n                return erto.enumValue.identifier;\r\n\r\n            }, false, false)\r\n        );\r\n\r\n        this.addMethod(new Method(\"toOrdinal\",\r\n            new Parameterlist([]), intPrimitiveType, (parameters: Value[]) => {\r\n\r\n                let erto: EnumRuntimeObject = <EnumRuntimeObject>(parameters[0].value);\r\n\r\n                return erto.enumValue.ordinal;\r\n\r\n            }, false, false)\r\n        );\r\n\r\n    }\r\n\r\n    public canCastTo(type: Type): boolean {\r\n\r\n        if (type == intPrimitiveType) {\r\n            return true;\r\n        }\r\n\r\n        return super.canCastTo(type);\r\n\r\n    }\r\n\r\n    public castTo(value: Value, type: Type): Value {\r\n\r\n        if (type == intPrimitiveType) {\r\n            let en = <EnumRuntimeObject>value.value;\r\n            return {\r\n                type: intPrimitiveType,\r\n                value: en.enumValue.ordinal\r\n            };\r\n        }\r\n\r\n        return super.castTo(value, type);\r\n    }\r\n\r\n\r\n}","import { LoginRequest } from \"./Data.js\";\r\n\r\n// export var credentials: { username: string, password: string } = { username: null, password: null };\r\n\r\n\r\nexport function ajax(url: string, request: any, successCallback: (response: any) => void,\r\n    errorCallback?: (message: string) => void) {\r\n    showNetworkBusy(true);\r\n    $.ajax({\r\n        type: 'POST',\r\n        async: true,\r\n        data: JSON.stringify(request),\r\n        contentType: 'application/json',\r\n        url: url,\r\n        success: function (response: any) {\r\n            showNetworkBusy(false);\r\n            if (response.success != null && response.success == false || typeof (response) == \"string\" && response == '') {\r\n                let error = \"Fehler bei der Bearbeitung der Anfrage\"\r\n                if (response.message != null) error = response.message;\r\n\r\n                if (error == \"Not logged in\") {\r\n                    // setTimeout(() => newLogin(url, request, successCallback, errorCallback), 10000);\r\n                    location.reload();\r\n                }\r\n\r\n                if (errorCallback) errorCallback(error);\r\n            } else {\r\n                successCallback(response);\r\n            }\r\n            return;\r\n\r\n        },\r\n        error: function (jqXHR, message) {\r\n            showNetworkBusy(false);\r\n            if (errorCallback) {\r\n                let statusText = \"Server nicht erreichbar.\"\r\n                if (jqXHR.status != 0) {\r\n                    statusText = \"\" + jqXHR.status\r\n                }\r\n                errorCallback(message + \": \" + statusText);\r\n                return;\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nexport function showNetworkBusy(busy: boolean) {\r\n    if (busy) {\r\n        jQuery('.jo_network-busy').show();\r\n    } else {\r\n        jQuery('.jo_network-busy').hide();\r\n    }\r\n}\r\n\r\n\r\n\r\n// export function newLogin(url: string, request: any, successCallback: (response: any) => void,\r\n//     errorCallback?: (message: string) => void) {\r\n\r\n//     if (credentials.username == null) return;\r\n//     let loginRequest: LoginRequest = {username: credentials.username, password: credentials.password};\r\n\r\n//     $.ajax({\r\n//         type: 'POST',\r\n//         data: JSON.stringify(loginRequest),\r\n//         contentType: 'application/json',\r\n//         url: \"login\",\r\n//         success: function (response: any) {\r\n//             if (response.success != null && response.success == false || typeof (response) == \"string\" && response == '') {\r\n//             } else {\r\n//                 ajax(url, request, successCallback, errorCallback);\r\n//             }\r\n//             return;\r\n//         },\r\n//         error: function (jqXHR, message) {\r\n// //            ajax(url, request, successCallback, errorCallback);\r\n//         }\r\n//     });\r\n// }\r\n","import { Main } from \"../main/Main.js\";\r\nimport { ajax } from \"./AjaxHelper.js\";\r\nimport { WorkspaceData, FileData, SendUpdatesRequest, SendUpdatesResponse, CreateOrDeleteFileOrWorkspaceRequest, CRUDResponse, UpdateUserSettingsRequest, UpdateUserSettingsResponse, DuplicateWorkspaceRequest, DuplicateWorkspaceResponse, ClassData, DistributeWorkspaceRequest, DistributeWorkspaceResponse } from \"./Data.js\";\r\nimport { Workspace } from \"../workspace/Workspace.js\";\r\nimport { Module } from \"../compiler/parser/Module.js\";\r\n\r\nexport class NetworkManager {\r\n    \r\n    timerhandle: any;\r\n\r\n    ownUpdateFrequencyInSeconds: number = 20;\r\n    teacherUpdateFrequencyInSeconds: number = 5;\r\n\r\n    updateFrequencyInSeconds: number = 20;\r\n    forcedUpdateEvery: number = 2;\r\n    secondsTillNextUpdate: number = this.updateFrequencyInSeconds;\r\n    errorHappened: boolean = false;\r\n\r\n    interval: any;\r\n\r\n    constructor(private main: Main, private $updateTimerDiv: JQuery<HTMLElement>){        \r\n        \r\n    }\r\n\r\n    initializeTimer() {\r\n\r\n        let that = this;\r\n        this.$updateTimerDiv.find('svg').attr('width', that.updateFrequencyInSeconds);\r\n\r\n        if(this.interval != null) clearInterval(this.interval);\r\n\r\n        let counterTillForcedUpdate: number = this.forcedUpdateEvery;\r\n\r\n        this.interval = setInterval(()=>{\r\n            \r\n            if(that.main.user == null) return; // don't call server if no user is logged in\r\n\r\n            that.secondsTillNextUpdate--;\r\n\r\n            if(that.secondsTillNextUpdate < 0 ){\r\n                that.secondsTillNextUpdate = that.updateFrequencyInSeconds;\r\n                counterTillForcedUpdate--;\r\n                let forceUpdate = counterTillForcedUpdate == 0;\r\n                if(forceUpdate) counterTillForcedUpdate = this.forcedUpdateEvery;\r\n                that.sendUpdates(() => {}, forceUpdate);\r\n            }\r\n\r\n            let $rect = this.$updateTimerDiv.find('.jo_updateTimerRect');\r\n\r\n            $rect.attr('width', that.secondsTillNextUpdate + \"px\");\r\n            \r\n            if(that.errorHappened){\r\n                $rect.css('fill', '#c00000');                \r\n                this.$updateTimerDiv.attr('title',\"Fehler beim letzten Speichervorgang -> Werd's wieder versuchen\");\r\n            } else {\r\n                $rect.css('fill', '#008000');                \r\n                this.$updateTimerDiv.attr('title',that.secondsTillNextUpdate + \" Sekunden bis zum nächsten Speichern\");\r\n            }\r\n\r\n        }, 1000);\r\n        \r\n    }\r\n    \r\n    sendUpdates(callback?: ()=>void, sendIfNothingIsDirty: boolean = false){\r\n        \r\n        if(this.main.user == null) return;\r\n\r\n        this.main.projectExplorer.writeEditorTextToFile();\r\n\r\n        let classDiagram = this.main.rightDiv?.classDiagram;\r\n        let userSettings = this.main.user.settings;\r\n\r\n        if(classDiagram?.dirty || this.main.userDataDirty){\r\n            this.main.userDataDirty = false;\r\n            userSettings.classDiagram = classDiagram?.serialize();\r\n            this.sendUpdateUserSettings(() => {});\r\n        }\r\n\r\n        classDiagram.dirty = false;\r\n\r\n        let wdList: WorkspaceData[] = [];\r\n        let fdList: FileData[] = [];\r\n\r\n        for(let ws of this.main.workspaceList){\r\n\r\n            if(!ws.saved){\r\n                wdList.push(ws.getWorkspaceData(false));\r\n                ws.saved = true;\r\n            }\r\n            \r\n            for(let m of ws.moduleStore.getModules(false)){\r\n                if(!m.file.saved){\r\n                    m.file.text = m.getProgramTextFromMonacoModel();\r\n                    fdList.push(m.getFileData(ws));\r\n                    // console.log(\"Save file \" + m.file.name);\r\n                    m.file.saved = true;\r\n                }\r\n            }\r\n        }\r\n        \r\n        let request: SendUpdatesRequest = {\r\n            workspacesWithoutFiles: wdList,\r\n            files: fdList, \r\n            owner_id: this.main.workspacesOwnerId,\r\n            userId: this.main.user.id\r\n        }\r\n\r\n        let that = this;\r\n        if(wdList.length > 0 || fdList.length > 0 || sendIfNothingIsDirty){\r\n            ajax('sendUpdates', request, (response: SendUpdatesResponse) => {\r\n                that.errorHappened = !response.success;\r\n                if(!that.errorHappened){\r\n\r\n                    that.updateWorkspaces(request, response);\r\n\r\n                    if(callback != null){\r\n                        callback();\r\n                        return;\r\n                    }\r\n                }\r\n            }, () => {\r\n                that.errorHappened = true;\r\n            } );\r\n        } else {\r\n            if(callback != null){\r\n                callback();\r\n                return;\r\n            }\r\n        }\r\n        \r\n    }\r\n    \r\n    sendCreateWorkspace(w: Workspace, owner_id: number, callback: (error: string) => void) {\r\n\r\n        let wd: WorkspaceData = w.getWorkspaceData(false);\r\n        let request: CreateOrDeleteFileOrWorkspaceRequest = {\r\n            type: \"create\",\r\n            entity: \"workspace\",\r\n            data: wd,\r\n            owner_id: owner_id,            \r\n            userId: this.main.user.id\r\n        }\r\n\r\n        ajax(\"createOrDeleteFileOrWorkspace\", request, (response: CRUDResponse) => {\r\n            w.id = response.id;\r\n            callback(null);\r\n        }, callback);\r\n\r\n    }\r\n\r\n    sendCreateFile(m: Module, ws: Workspace, owner_id: number, callback: (error: string) => void) {\r\n\r\n        let fd: FileData = m.getFileData(ws);\r\n        let request: CreateOrDeleteFileOrWorkspaceRequest = {\r\n            type: \"create\",\r\n            entity: \"file\",\r\n            data: fd,\r\n            owner_id: owner_id,\r\n            userId: this.main.user.id\r\n        }\r\n\r\n        ajax(\"createOrDeleteFileOrWorkspace\", request, (response: CRUDResponse) => {\r\n            m.file.id = response.id;\r\n            callback(null);\r\n        }, callback);\r\n\r\n    }\r\n\r\n    sendDuplicateWorkspace(ws: Workspace, callback: (error: string, workspaceData?: WorkspaceData) => void) {\r\n\r\n        let request: DuplicateWorkspaceRequest = {\r\n            workspace_id: ws.id\r\n        }\r\n\r\n        ajax(\"duplicateWorkspace\", request, (response: DuplicateWorkspaceResponse) => {\r\n            callback(response.message, response.workspace)\r\n        }, callback);\r\n\r\n    }\r\n\r\n    sendDistributeWorkspace(ws: Workspace, klasse: ClassData, student_ids: number[], callback: (error: string) => void) {\r\n\r\n        this.sendUpdates(() => {\r\n\r\n            let request: DistributeWorkspaceRequest = {\r\n                workspace_id: ws.id,\r\n                class_id: klasse?.id,\r\n                student_ids: student_ids\r\n            }\r\n    \r\n            ajax(\"distributeWorkspace\", request, (response: DistributeWorkspaceResponse) => {\r\n                callback(response.message)\r\n            }, callback);\r\n    \r\n        }, false);\r\n\r\n    }\r\n\r\n\r\n    sendCreateRepository(ws: Workspace, publish_to: number, repoName: string, repoDescription: string, callback: (error: string, repository_id?: number) => void) {\r\n\r\n        this.sendUpdates(() => {\r\n\r\n            let request = {\r\n                workspace_id: ws.id,\r\n                publish_to: publish_to,\r\n                name: repoName,\r\n                description: repoDescription\r\n            }\r\n    \r\n            ajax(\"createRepository\", request, (response: {success: boolean, message?: string, repository_id?: number}) => {\r\n                ws.moduleStore.getModules(false).forEach(m => {\r\n                    m.file.is_copy_of_id = m.file.id;\r\n                    m.file.repository_file_version = 1;\r\n                })\r\n                ws.repository_id = response.repository_id;\r\n                ws.has_write_permission_to_repository = true;\r\n                callback(response.message, response.repository_id)\r\n            }, callback);\r\n    \r\n        }, true);\r\n\r\n\r\n    }\r\n\r\n    sendDeleteWorkspaceOrFile(type: \"workspace\" | \"file\", id: number, callback: (error: string) => void) {\r\n\r\n        let request: CreateOrDeleteFileOrWorkspaceRequest = {\r\n            type: \"delete\",\r\n            entity: type,\r\n            id: id,\r\n            userId: this.main.user.id\r\n        }\r\n\r\n        ajax(\"createOrDeleteFileOrWorkspace\", request, (response: CRUDResponse) => {\r\n            if(response.success){\r\n                callback(null);\r\n            } else {\r\n                callback(\"Netzwerkfehler!\");\r\n            }\r\n        }, callback);\r\n\r\n    }\r\n\r\n    sendUpdateUserSettings(callback: (error: string) => void){\r\n\r\n        let request: UpdateUserSettingsRequest = {\r\n            settings: this.main.user.settings,\r\n            userId: this.main.user.id\r\n        }\r\n\r\n        ajax(\"updateUserSettings\", request, (response: UpdateUserSettingsResponse) => {\r\n            if(response.success){\r\n                callback(null);\r\n            } else {\r\n                callback(\"Netzwerkfehler!\");\r\n            }\r\n        }, callback);\r\n\r\n    }\r\n\r\n\r\n    updateWorkspaces(sendUpdatesRequest: SendUpdatesRequest, sendUpdatesResponse: SendUpdatesResponse){\r\n\r\n        let idToRemoteWorkspaceDataMap: Map<number, WorkspaceData> = new Map();\r\n\r\n        let fileIdsSended = [];\r\n        sendUpdatesRequest.files.forEach(file => fileIdsSended.push(file.id));\r\n\r\n        sendUpdatesResponse.workspaces.workspaces.forEach(wd => idToRemoteWorkspaceDataMap.set(wd.id, wd));\r\n\r\n        let newWorkspaceNames: string[] = [];\r\n\r\n        for (let remoteWorkspace of sendUpdatesResponse.workspaces.workspaces) {\r\n\r\n            let localWorkspaces = this.main.workspaceList.filter(ws => ws.id == remoteWorkspace.id);\r\n\r\n            // Did student get a workspace from his/her teacher?\r\n            if (localWorkspaces.length == 0) {\r\n                newWorkspaceNames.push(remoteWorkspace.name);\r\n                this.createNewWorkspaceFromWorkspaceData(remoteWorkspace);\r\n            }\r\n\r\n        }\r\n\r\n\r\n\r\n        for(let workspace of this.main.workspaceList){\r\n            let remoteWorkspace: WorkspaceData = idToRemoteWorkspaceDataMap.get(workspace.id);\r\n            if(remoteWorkspace != null){\r\n                let idToRemoteFileDataMap: Map<number, FileData> = new Map();\r\n                remoteWorkspace.files.forEach(fd => idToRemoteFileDataMap.set(fd.id, fd));\r\n                \r\n                let idToModuleMap: Map<number, Module> = new Map();\r\n                // update/delete files if necessary\r\n                for(let module of workspace.moduleStore.getModules(false)){\r\n                    let fileId = module.file.id;\r\n                    idToModuleMap.set(fileId, module);\r\n                    let remoteFileData = idToRemoteFileDataMap.get(fileId);\r\n                    if(remoteFileData == null){\r\n                        this.main.projectExplorer.fileListPanel.removeElement(module);\r\n                        this.main.currentWorkspace.moduleStore.removeModule(module);\r\n                    } else if(remoteFileData.version > module.file.version){\r\n                        if(fileIdsSended.indexOf(fileId) < 0 || remoteFileData.forceUpdate){\r\n                            module.file.text = remoteFileData.text;\r\n                            module.model.setValue(remoteFileData.text);\r\n\r\n                            module.file.saved = true;\r\n                            module.lastSavedVersionId = module.model.getAlternativeVersionId()\r\n                        }\r\n                        module.file.version = remoteFileData.version;\r\n                    }\r\n                }\r\n\r\n                // add files if necessary\r\n                for(let remoteFile of remoteWorkspace.files){\r\n                    if(idToModuleMap.get(remoteFile.id) == null){\r\n                        this.createFile(workspace, remoteFile);\r\n                    }\r\n                }\r\n            }\r\n        }        \r\n\r\n        if(newWorkspaceNames.length > 0){\r\n            let message: string = newWorkspaceNames.length > 1 ? \"Folgende Workspaces hat Deine Lehrkraft Dir gesendet: \" : \"Folgenden Workspace hat Deine Lehrkraft Dir gesendet: \";\r\n            message += newWorkspaceNames.join(\", \");\r\n            alert(message);\r\n        }\r\n\r\n    }\r\n\r\n    public createNewWorkspaceFromWorkspaceData(remoteWorkspace: WorkspaceData) {\r\n        let w = this.main.createNewWorkspace(remoteWorkspace.name, remoteWorkspace.owner_id);\r\n        w.id = remoteWorkspace.id;\r\n        w.repository_id = remoteWorkspace.repository_id;\r\n        w.has_write_permission_to_repository = remoteWorkspace.has_write_permission_to_repository;\r\n\r\n        this.main.workspaceList.push(w);\r\n        this.main.projectExplorer.workspaceListPanel.addElement({\r\n            name: remoteWorkspace.name,\r\n            externalElement: w,\r\n            iconClass: remoteWorkspace.repository_id == null ? \"workspace\" : \"repository\"\r\n        });\r\n\r\n        for (let fileData of remoteWorkspace.files) {\r\n            this.createFile(w, fileData);\r\n        }\r\n    }\r\n\r\n    createFile(workspace: Workspace, remoteFile: FileData) {\r\n        let ae: any = null; //AccordionElement\r\n        if (workspace == this.main.currentWorkspace) {\r\n            ae = {\r\n                name: remoteFile.name,\r\n                externalElement: null\r\n            }\r\n\r\n            this.main.projectExplorer.fileListPanel.addElement(ae);\r\n        }\r\n\r\n        let f: any = { // File\r\n            id: remoteFile.id,\r\n            name: remoteFile.name,\r\n            dirty: false,\r\n            saved: true,\r\n            text: remoteFile.text,\r\n            version: remoteFile.version,\r\n            is_copy_of_id: remoteFile.is_copy_of_id,\r\n            repository_file_version: remoteFile.repository_file_version,\r\n            identical_to_repository_version: true,\r\n            workspace_id: workspace.id,\r\n            panelElement: ae\r\n        };\r\n        let m = this.main.projectExplorer.getNewModule(f); //new Module(f, this.main);\r\n        if (ae != null) ae.externalElement = m;\r\n        let modulStore = workspace.moduleStore;\r\n        modulStore.putModule(m);\r\n\r\n    }\r\n\r\n\r\n\r\n}","import { TokenList, specialCharList, TokenType, Token, EscapeSequenceList, keywordList, TextPosition, TokenTypeReadable } from \"./Token.js\";\r\nimport { text } from \"express\";\r\n\r\nenum LexerState {\r\n    number, identifier, stringConstant, characterConstant, multilineComment, EndoflineComment\r\n}\r\n\r\nvar endChar = \"►\"; // \\u10000\r\n\r\nexport type QuickFix = {\r\n    title: string,\r\n    editsProvider: (uri: monaco.Uri) => monaco.languages.WorkspaceTextEdit[]\r\n}\r\n\r\nexport type ErrorLevel = \"info\" | \"error\" | \"warning\";\r\n\r\nexport type Error = {\r\n    position: TextPosition,\r\n    text: string,\r\n    quickFix?: QuickFix,\r\n    level: ErrorLevel\r\n}\r\n\r\nexport class Lexer {\r\n\r\n    tokenList: TokenList;\r\n    nonSpaceLastTokenType: TokenType;\r\n\r\n    errorList: Error[];\r\n    pos: number;\r\n    line: number;\r\n    column: number;\r\n\r\n    currentChar: string;\r\n    nextChar: string;\r\n\r\n    input: string;\r\n\r\n    spaceTokens: TokenType[] = [\r\n        TokenType.space, TokenType.tab, TokenType.newline\r\n    ];\r\n\r\n    bracketStack: TokenType[];\r\n    bracketError: string;\r\n    correspondingBracket: { [key: number]: TokenType } = {};\r\n\r\n    constructor() {\r\n        this.correspondingBracket[TokenType.leftBracket] = TokenType.rightBracket;\r\n        this.correspondingBracket[TokenType.leftCurlyBracket] = TokenType.rightCurlyBracket;\r\n        this.correspondingBracket[TokenType.leftSquareBracket] = TokenType.rightSquareBracket;\r\n        this.correspondingBracket[TokenType.rightBracket] = TokenType.leftBracket;\r\n        this.correspondingBracket[TokenType.rightCurlyBracket] = TokenType.leftCurlyBracket;\r\n        this.correspondingBracket[TokenType.rightSquareBracket] = TokenType.leftSquareBracket;\r\n    }\r\n\r\n    lex(input: string): { tokens: TokenList, errors: Error[], bracketError: string } {\r\n\r\n        this.input = input.replace(\"\\u00a0\", \" \");\r\n        this.tokenList = [];\r\n        this.errorList = [];\r\n        this.bracketError = null;\r\n        this.bracketStack = [];\r\n        this.pos = 0;\r\n        this.line = 1;\r\n        this.column = 1;\r\n        this.nonSpaceLastTokenType = null;\r\n\r\n\r\n        if (input.length == 0) {\r\n            return { tokens: this.tokenList, errors: this.errorList, bracketError: null };\r\n        }\r\n\r\n        this.currentChar = input.charAt(0);\r\n\r\n        this.nextChar = input.length > 1 ? input.charAt(1) : endChar;\r\n\r\n\r\n        while (this.currentChar != endChar) {\r\n            this.mainState();\r\n        }\r\n\r\n        if (this.bracketStack.length > 0) {\r\n            let bracketOpen = this.bracketStack.pop();\r\n            let bracketClosed = this.correspondingBracket[bracketOpen];\r\n\r\n            this.setBracketError(TokenTypeReadable[bracketOpen] + \" \" + TokenTypeReadable[bracketClosed]);\r\n        }\r\n\r\n        return {\r\n            tokens: this.tokenList,\r\n            errors: this.errorList,\r\n            bracketError: this.bracketError\r\n        };\r\n\r\n    }\r\n\r\n    checkClosingBracket(tt: TokenType) {\r\n        if (this.bracketStack.length == 0) {\r\n            let bracketOpen = this.correspondingBracket[tt];\r\n            this.setBracketError(TokenTypeReadable[bracketOpen] + \" \" + TokenTypeReadable[tt]);\r\n            return;\r\n        }\r\n        let openBracket = this.bracketStack.pop();\r\n        let correspondingBracket = this.correspondingBracket[openBracket];\r\n        if (tt != correspondingBracket) {\r\n            this.setBracketError(TokenTypeReadable[openBracket] + \" \" + TokenTypeReadable[correspondingBracket]);\r\n        }\r\n    }\r\n\r\n    setBracketError(error: string) {\r\n        if (this.bracketError == null) this.bracketError = error;\r\n    }\r\n\r\n    next() {\r\n        this.pos++;\r\n        this.currentChar = this.nextChar;\r\n        if (this.pos + 1 < this.input.length) {\r\n            this.nextChar = this.input.charAt(this.pos + 1);\r\n        } else {\r\n            this.nextChar = endChar;\r\n        }\r\n        this.column++; // column of current char\r\n    }\r\n\r\n\r\n\r\n    mainState() {\r\n\r\n        let char = this.currentChar;\r\n\r\n        let specialCharToken = specialCharList[char];\r\n\r\n        if (specialCharToken != null) {\r\n            switch (specialCharToken) {\r\n                case TokenType.leftSquareBracket:\r\n                    if (this.nextChar == \"]\") {\r\n                        this.pushToken(TokenType.leftRightSquareBracket, \"[]\");\r\n                        this.next();\r\n                        this.next();\r\n                        return;\r\n                    } else {\r\n                        this.pushToken(TokenType.leftSquareBracket, \"[\");\r\n                        this.bracketStack.push(specialCharToken);\r\n                        this.next();\r\n                        return;\r\n                    }\r\n                case TokenType.rightSquareBracket:\r\n                    this.checkClosingBracket(specialCharToken);\r\n                    break;\r\n                case TokenType.leftBracket:\r\n                    this.bracketStack.push(specialCharToken);\r\n                    break;\r\n                case TokenType.rightBracket:\r\n                    this.checkClosingBracket(specialCharToken);\r\n                    break;\r\n                case TokenType.leftCurlyBracket:\r\n                    this.bracketStack.push(specialCharToken);\r\n                    break;\r\n                case TokenType.rightCurlyBracket:\r\n                    this.checkClosingBracket(specialCharToken);\r\n                    break;\r\n                case TokenType.and:\r\n                    if (this.nextChar == \"&\") {\r\n                        this.pushToken(TokenType.and, \"&&\");\r\n                        this.next();\r\n                        this.next();\r\n                        return;\r\n                    } else {\r\n                        this.pushToken(TokenType.ampersand, \"&\");\r\n                        this.next();\r\n                        return;\r\n                    }\r\n                case TokenType.or:\r\n                    if (this.nextChar == \"|\") {\r\n                        this.pushToken(TokenType.or, \"||\");\r\n                        this.next();\r\n                        this.next();\r\n                        return;\r\n                    } else {\r\n                        this.pushError(\"| gefunden. Gemeint ist wohl || (Oder-Operator)?\", 1);\r\n                        this.pushToken(TokenType.or, \"||\");\r\n                        this.next();\r\n                        return;\r\n                    }\r\n                case TokenType.multiplication:\r\n                    if (this.nextChar == \"=\") {\r\n                        this.pushToken(TokenType.multiplicationAssignment, \"*=\");\r\n                        this.next();\r\n                        this.next();\r\n                        return;\r\n                    } else {\r\n                        this.pushToken(TokenType.multiplication, \"*\");\r\n                        this.next();\r\n                        return;\r\n                    }\r\n                case TokenType.not:\r\n                    if (this.nextChar == \"=\") {\r\n                        this.pushToken(TokenType.notEqual, \"!=\");\r\n                        this.next();\r\n                        this.next();\r\n                        return;\r\n                    } else {\r\n                        this.pushToken(TokenType.not, \"!\");\r\n                        this.next();\r\n                        return;\r\n                    }\r\n                case TokenType.division:\r\n                    if (this.nextChar == \"=\") {\r\n                        this.pushToken(TokenType.divisionAssignment, \"/=\");\r\n                        this.next();\r\n                        this.next();\r\n                        return;\r\n                    } else if (this.nextChar == '*') {\r\n                        this.lexMultilineComment();\r\n                        return;\r\n                    } else if (this.nextChar == '/') {\r\n                        this.lexEndofLineComment();\r\n                        return;\r\n                    }\r\n                    this.pushToken(TokenType.division, '/');\r\n                    this.next();\r\n                    return;\r\n                case TokenType.modulo:\r\n                    if (this.nextChar == \"=\") {\r\n                        this.pushToken(TokenType.moduloAssignment, \"%=\");\r\n                        this.next();\r\n                        this.next();\r\n                        return;\r\n                    } else {\r\n                        this.pushToken(TokenType.modulo, \"/\");\r\n                        this.next();\r\n                        return;\r\n                    }\r\n                case TokenType.plus:\r\n                    if (this.nextChar == '+') {\r\n                        this.pushToken(TokenType.doublePlus, '++');\r\n                        this.next();\r\n                        this.next();\r\n                        return;\r\n                    } else if (this.nextChar == '=') {\r\n                        this.pushToken(TokenType.plusAssignment, '+=');\r\n                        this.next();\r\n                        this.next();\r\n                        return;\r\n                    } else {\r\n                        this.pushToken(TokenType.plus, '+');\r\n                        this.next();\r\n                        return;\r\n                    }\r\n                case TokenType.lower:\r\n                    if (this.nextChar == '=') {\r\n                        this.pushToken(TokenType.lowerOrEqual, '<=');\r\n                        this.next();\r\n                        this.next();\r\n                        return;\r\n                    } else {\r\n                        this.pushToken(TokenType.lower, '<');\r\n                        this.next();\r\n                        return;\r\n                    }\r\n                case TokenType.greater:\r\n                    if (this.nextChar == '=') {\r\n                        this.pushToken(TokenType.greaterOrEqual, '>=');\r\n                        this.next();\r\n                        this.next();\r\n                        return;\r\n                    } else {\r\n                        this.pushToken(TokenType.greater, '>');\r\n                        this.next();\r\n                        return;\r\n                    }\r\n                case TokenType.dot:\r\n                    if (this.nextChar == '.' && this.pos + 2 < this.input.length && this.input[this.pos + 2] == \".\") {\r\n                        this.pushToken(TokenType.ellipsis, '...');\r\n                        this.next();\r\n                        this.next();\r\n                        this.next();\r\n                        return;\r\n                    } else {\r\n                        this.pushToken(TokenType.dot, '.');\r\n                        this.next();\r\n                        return;\r\n                    }\r\n\r\n                case TokenType.assignment:\r\n                    if (this.nextChar == '=') {\r\n                        this.pushToken(TokenType.equal, '==');\r\n                        this.next();\r\n                        this.next();\r\n                        return;\r\n                    } else {\r\n                        this.pushToken(TokenType.assignment, '=');\r\n                        this.next();\r\n                        return;\r\n                    }\r\n                case TokenType.minus:\r\n                    if (this.nextChar == '-') {\r\n                        this.pushToken(TokenType.doubleMinus, '--');\r\n                        this.next();\r\n                        this.next();\r\n                        return;\r\n                    }\r\n                    else if (this.isDigit(this.nextChar, 10) && !\r\n                        ([TokenType.identifier, TokenType.integerConstant, TokenType.floatingPointConstant, TokenType.rightBracket].indexOf(this.nonSpaceLastTokenType) >= 0)\r\n                    ) {\r\n                        this.lexNumber();\r\n                        return;\r\n                    }\r\n                    else if (this.nextChar == '=') {\r\n                        this.pushToken(TokenType.minusAssignment, '-=');\r\n                        this.next();\r\n                        this.next();\r\n                        return;\r\n                    } else {\r\n                        this.pushToken(TokenType.minus, '-');\r\n                        this.next();\r\n                        return;\r\n                    }\r\n                case TokenType.singleQuote:\r\n                    this.lexCharacterConstant();\r\n                    return;\r\n                case TokenType.doubleQuote:\r\n                    this.lexStringConstant();\r\n                    return;\r\n                case TokenType.newline:\r\n                    this.pushToken(TokenType.newline, '\\n');\r\n                    this.line++;\r\n                    this.column = 0;\r\n                    this.next();\r\n                    return;\r\n                case TokenType.space:\r\n                case TokenType.tab:\r\n                    this.lexSpace();\r\n                    return;\r\n                case TokenType.linefeed:\r\n                    this.next();\r\n                    return;\r\n                case TokenType.at:\r\n                    this.lexAnnotation();\r\n                    return;\r\n            }\r\n\r\n            this.pushToken(specialCharToken, char);\r\n            this.next();\r\n            return;\r\n\r\n        }\r\n\r\n        // no special char. Number?\r\n\r\n        if (this.isDigit(char, 10)) {\r\n            this.lexNumber();\r\n            return;\r\n        }\r\n\r\n        this.lexIdentifierOrKeyword();\r\n\r\n    }\r\n\r\n    pushToken(tt: TokenType, text: string | number | boolean, line: number = this.line, column: number = this.column, length: number = (\"\" + text).length) {\r\n        let t: Token = {\r\n            tt: tt,\r\n            value: text,\r\n            position: {\r\n                column: column,\r\n                line: line,\r\n                length: length\r\n            }\r\n        }\r\n\r\n        if (!(this.spaceTokens.indexOf(tt) >= 0)) {\r\n            this.nonSpaceLastTokenType = tt;\r\n        }\r\n\r\n        this.tokenList.push(t);\r\n    }\r\n\r\n    pushError(text: string, length: number, errorLevel: ErrorLevel = \"error\", line: number = this.line, column: number = this.column) {\r\n        this.errorList.push({\r\n            text: text,\r\n            position: {\r\n                line: line,\r\n                column: column,\r\n                length: length\r\n            },\r\n            level: errorLevel\r\n        });\r\n    }\r\n\r\n\r\n\r\n    isDigit(a: string, base: number) {\r\n        var charCode = a.charCodeAt(0);\r\n\r\n        if(base == 10) return (charCode >= 48 && charCode <= 57); // 0 - 9\r\n        if(base == 2) return (charCode >= 48 && charCode <= 49); // 0, 1\r\n        if(base == 8) return (charCode >= 48 && charCode <= 55); // 0 - 7\r\n        if(base == 16) return (charCode >= 48 && charCode <= 57 ) || (charCode >= 97 && charCode <= 102) ||\r\n         (charCode >= 65 && charCode <= 70); // 0 - 9 || a - f || A - F\r\n    }\r\n\r\n    lexSpace() {\r\n        let column = this.column;\r\n        let line = this.line;\r\n\r\n        let posStart = this.pos;\r\n        while (this.currentChar == \" \" || this.currentChar == \"\\t\") {\r\n            this.next();\r\n        }\r\n\r\n        let posEnd = this.pos;\r\n        this.pushToken(TokenType.space, this.input.substring(posStart, posEnd), line, column);\r\n        return;\r\n\r\n    }\r\n\r\n    lexCharacterConstant() {\r\n        let column = this.column;\r\n        let line = this.line;\r\n        this.next();\r\n        let char = this.currentChar;\r\n        if (char == \"\\\\\") {\r\n            let escapeChar = EscapeSequenceList[this.nextChar];\r\n            if (escapeChar == null) {\r\n                this.pushError('Die Escape-Sequenz \\\\' + this.nextChar + ' gibt es nicht.', 2);\r\n                if (this.nextChar != \"'\") {\r\n                    char = this.nextChar;\r\n                    this.next();\r\n                }\r\n            } else {\r\n                char = escapeChar;\r\n                this.next();\r\n            }\r\n        }\r\n        this.next();\r\n        if (this.currentChar != \"'\") {\r\n            this.pushError(\"Das Ende der char-Konstante wird erwartet (').\", 1);\r\n        } else {\r\n            this.next();\r\n        }\r\n\r\n        this.pushToken(TokenType.charConstant, char, line, column);\r\n\r\n    }\r\n\r\n    lexStringConstant() {\r\n        let line = this.line;\r\n        let column = this.column;\r\n        let text = \"\";\r\n\r\n        this.next();\r\n\r\n        while (true) {\r\n            let char = this.currentChar;\r\n            if (char == \"\\\\\") {\r\n                if (this.nextChar == \"u\") {\r\n                    this.next();\r\n\r\n                } else {\r\n                    let escapeChar = EscapeSequenceList[this.nextChar];\r\n                    if (escapeChar == null) {\r\n                        this.pushError('Die Escape-Sequenz \\\\' + this.nextChar + ' gibt es nicht.', 2);\r\n                    } else {\r\n                        char = escapeChar;\r\n                        this.next();\r\n                    }\r\n                }\r\n            } else if (char == '\"') {\r\n                this.next();\r\n                break;\r\n            } else if (char == \"\\n\" || char == endChar) {\r\n                this.pushError('Innerhalb einer String-Konstante wurde das Zeilenende erreicht.', text.length + 1, \"error\", line, column);\r\n                break;\r\n            }\r\n            text += char;\r\n            this.next();\r\n        }\r\n\r\n        this.pushToken(TokenType.stringConstant, text, line, column, text.length + 2);\r\n\r\n    }\r\n\r\n    lexMultilineComment() {\r\n        let line = this.line;\r\n        let column = this.column;\r\n        let lastCharWasNewline: boolean = false;\r\n\r\n        let text = \"/*\";\r\n        this.next();\r\n        this.next();\r\n\r\n        while (true) {\r\n            let char = this.currentChar;\r\n            if (char == \"*\" && this.nextChar == \"/\") {\r\n                this.next();\r\n                this.next();\r\n                text += \"*/\";\r\n                break;\r\n            }\r\n            if (char == endChar) {\r\n                this.pushError(\"Innerhalb eines Mehrzeilenkommentars (/*... */) wurde das Dateiende erreicht.\", 1);\r\n                break;\r\n            }\r\n            if (char == \"\\n\") {\r\n                this.line++;\r\n                this.column = 0;\r\n                lastCharWasNewline = true;\r\n                text += char;\r\n            } else if(!(lastCharWasNewline && char == \" \")){\r\n                text += char;\r\n                lastCharWasNewline = false;\r\n            } \r\n\r\n            this.next();\r\n        }\r\n\r\n        this.pushToken(TokenType.comment, text, line, column);\r\n\r\n    }\r\n\r\n    lexEndofLineComment() {\r\n        let line = this.line;\r\n        let column = this.column;\r\n\r\n        let text = \"//\";\r\n        this.next();\r\n        this.next();\r\n\r\n        while (true) {\r\n            let char = this.currentChar;\r\n            if (char == \"\\n\") {\r\n                break;\r\n            }\r\n            if (char == endChar) {\r\n                // this.pushError(\"Innerhalb eines Einzeilenkommentars (//... ) wurde das Dateiende erreicht.\", 1);\r\n                break;\r\n            }\r\n            text += char;\r\n            this.next();\r\n        }\r\n\r\n        this.pushToken(TokenType.comment, text, line, column);\r\n\r\n    }\r\n\r\n\r\n    lexNumber() {\r\n        let line = this.line;\r\n        let column = this.column;\r\n\r\n        let sign: number = 1;\r\n        if(this.currentChar == '-'){\r\n            sign = -1;\r\n            this.next();\r\n        }\r\n\r\n        let posStart = this.pos;\r\n\r\n        let firstChar = this.currentChar;\r\n\r\n        this.next();\r\n\r\n        let radix: number = 10;\r\n\r\n        if (firstChar == '0' && (['b', 'x', '0', '1', '2', '3', '4', '5', '6', '7'].indexOf(this.currentChar) >= 0)) {\r\n            if (this.currentChar == 'x') {\r\n                radix = 16;\r\n                this.next();\r\n            } else if (this.currentChar == 'b') {\r\n                radix = 2;\r\n                this.next();\r\n            } else radix = 8;\r\n            posStart = this.pos;\r\n        }\r\n\r\n        while (this.isDigit(this.currentChar, radix)) {\r\n            this.next();\r\n        }\r\n\r\n        let tt = TokenType.integerConstant;\r\n\r\n        if (this.currentChar == \".\") {\r\n            tt = TokenType.floatingPointConstant;\r\n\r\n            this.next();\r\n            while (this.isDigit(this.currentChar, 10)) {\r\n                this.next();\r\n            }\r\n\r\n            if (radix != 10) {\r\n                this.pushError(\"Eine float/double-Konstante darf nicht mit 0, 0b oder 0x beginnen.\", this.pos - posStart, \"error\", this.line, this.column - (this.pos - posStart));\r\n            }\r\n\r\n        }\r\n\r\n        let base = this.input.substring(posStart, this.pos);\r\n\r\n        posStart = this.pos;\r\n        let exponent: number = 0;\r\n\r\n        let hasExponential: boolean = false;\r\n        //@ts-ignore\r\n        if (this.currentChar == \"e\") {\r\n            hasExponential = true;\r\n            this.next();\r\n            let posExponentStart: number = this.pos;\r\n\r\n            //@ts-ignore\r\n            if(this.currentChar == '-'){\r\n                this.next();\r\n            }\r\n\r\n            while (this.isDigit(this.currentChar, 10)) {\r\n                this.next();\r\n            }\r\n            if (radix != 10) {\r\n                this.pushError(\"Eine float/double-Konstante darf nicht mit 0, 0b oder 0x beginnen.\", this.pos - posStart, \"error\", this.line, this.column - (this.pos - posStart));\r\n            }\r\n            let exponentString = this.input.substring(posExponentStart, this.pos);\r\n            exponent = Number.parseInt(exponentString);\r\n        }\r\n\r\n        if(this.currentChar == 'd' || this.currentChar == 'f'){\r\n            tt == TokenType.floatingPointConstant;\r\n            this.next();\r\n            if(radix != 10){\r\n                this.pushError(\"Eine float/double-Konstante darf nicht mit 0, 0b oder 0x beginnen.\", this.pos - posStart, \"error\", this.line, this.column - (this.pos - posStart));\r\n            }\r\n        }\r\n\r\n        let value: number = (tt == TokenType.integerConstant) ? Number.parseInt(base, radix) : Number.parseFloat(base);\r\n        value *= sign;\r\n        if(exponent != 0) value *= Math.pow(10, exponent);       \r\n        \r\n        this.pushToken(tt, value, line, column);\r\n\r\n    }\r\n\r\n    lexAnnotation(){\r\n        let line = this.line;\r\n        let column = this.column - 1;\r\n        let posStart = this.pos;\r\n        let char = this.currentChar;\r\n\r\n        while (specialCharList[char] == null && !this.isSpace(char) && !(char == endChar)) {\r\n            this.next();\r\n            char = this.currentChar;\r\n        }\r\n\r\n        let posEnd = this.pos;\r\n\r\n        let text = this.input.substring(posStart, posEnd);\r\n        this.pushToken(TokenType.at,text, line, column, text.length + 1);        \r\n    }\r\n\r\n    lexIdentifierOrKeyword() {\r\n        let line = this.line;\r\n        let column = this.column;\r\n\r\n        let posStart = this.pos;\r\n        let char = this.currentChar;\r\n\r\n        while (specialCharList[char] == null && !this.isSpace(char) && !(char == endChar)) {\r\n            this.next();\r\n            char = this.currentChar;\r\n        }\r\n\r\n        let posEnd = this.pos;\r\n\r\n        let text = this.input.substring(posStart, posEnd);\r\n\r\n        let tt = keywordList[text];\r\n        if (tt != null && typeof tt == \"number\") {\r\n\r\n            switch (tt) {\r\n                case TokenType.true:\r\n                    this.pushToken(TokenType.booleanConstant, true, line, column);\r\n                    break;\r\n                case TokenType.false:\r\n                    this.pushToken(TokenType.booleanConstant, false, line, column);\r\n                    break;\r\n                case TokenType.keywordPrint:\r\n                case TokenType.keywordPrintln:\r\n                    if (this.nonSpaceLastTokenType == TokenType.dot) {\r\n                        this.pushToken(TokenType.identifier, text, line, column);\r\n                    } else {\r\n                        this.pushToken(tt, text, line, column);\r\n                    }\r\n                    break;\r\n                default:\r\n                    this.pushToken(tt, text, line, column);\r\n                    break;\r\n            }\r\n\r\n            return;\r\n        }\r\n\r\n        this.pushToken(TokenType.identifier, text, line, column);\r\n\r\n    }\r\n\r\n    isSpace(char: string): boolean {\r\n        return char == \" \" || char == \"\\n\";\r\n    }\r\n\r\n\r\n}\r\n\r\nexport function errorListToString(errorList: Error[]): string {\r\n    let s = \"\";\r\n\r\n    for (let error of errorList) {\r\n\r\n        s += \"Z \" + error.position.line + \", S \" + error.position.column + \": \";\r\n        s += error.text + \"<br>\";\r\n\r\n    }\r\n\r\n    return s;\r\n}","import { TextPosition } from \"../lexer/Token.js\";\r\nimport { Type, Variable, Method } from \"../types/Types.js\";\r\nimport { Klass, StaticClass } from \"../types/Class.js\";\r\nimport { ArrayType } from \"../types/Array.js\";\r\n\r\n\r\nexport class SymbolTable {\r\n\r\n    static maxId: number = 0;\r\n\r\n    public id = SymbolTable.maxId++;\r\n\r\n    parent: SymbolTable; // SymbolTable of parent scope\r\n    positionFrom: TextPosition;\r\n    positionTo: TextPosition;\r\n\r\n    beginsNewStackframe: boolean = false;\r\n    stackframeSize: number;\r\n\r\n    childSymbolTables: SymbolTable[] = [];\r\n\r\n    variableMap: Map<string, Variable> = new Map();\r\n\r\n    classContext: Klass | StaticClass = null;\r\n    method: Method = null;\r\n\r\n    constructor(parentSymbolTable: SymbolTable, positionFrom: TextPosition, positionTo: TextPosition) {\r\n\r\n        this.parent = parentSymbolTable;\r\n\r\n        this.positionFrom = positionFrom;\r\n        this.positionTo = positionTo;\r\n\r\n        this.classContext = parentSymbolTable == null ? null : parentSymbolTable.classContext;\r\n\r\n        if (this.parent != null) {\r\n            this.parent.childSymbolTables.push(this);\r\n            this.method = this.parent.method;\r\n        }\r\n    }\r\n\r\n    getImitation(): SymbolTable {\r\n        let imitation = new SymbolTable(null, { line: 1, column: 1, length: 0 }, { line: 1, column: 10000, length: 0 });\r\n\r\n        imitation.beginsNewStackframe = true;\r\n        let st: SymbolTable = this;\r\n\r\n        let maxStackPos = -1;\r\n\r\n        while (st != null) {\r\n            if (st.classContext != null) {\r\n                imitation.classContext = st.classContext;\r\n            }\r\n\r\n            st.variableMap.forEach((variable, identifier) => {\r\n\r\n                if (imitation.variableMap.get(identifier) == null) {\r\n                    imitation.variableMap.set(identifier, variable);\r\n                }\r\n\r\n                if (variable.stackPos > maxStackPos) {\r\n                    maxStackPos = variable.stackPos;\r\n                }\r\n\r\n            });\r\n\r\n            st = st.parent;\r\n\r\n        }\r\n\r\n        imitation.stackframeSize = maxStackPos + 1;\r\n\r\n        return imitation;\r\n    }\r\n\r\n\r\n\r\n    getLocalVariableCompletionItems(rangeToReplace: monaco.IRange): monaco.languages.CompletionItem[] {\r\n\r\n        let completionItems: monaco.languages.CompletionItem[] = [];\r\n\r\n        this.variableMap.forEach((variable, identifier) => {\r\n\r\n            //@ts-ignore\r\n            if(identifier == 0) return;\r\n\r\n            // TODO: Zu einem Objekt mit identifier == 0 kommt es, wenn man ArrayList<In tippt und dann <Strg + Leertaste>.\r\n\r\n            if (variable != null && variable.type != null && variable.type instanceof ArrayType) {\r\n                completionItems.push({\r\n                    label: identifier + \"[]\",\r\n                    insertText: identifier + \"[$0]\",\r\n                    documentation: \"Element des Arrays\",\r\n                    insertTextRules: monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet,\r\n                    kind: monaco.languages.CompletionItemKind.Snippet,\r\n                    range: rangeToReplace\r\n                });\r\n\r\n            }\r\n            \r\n            completionItems.push({\r\n                label: identifier,\r\n                insertText: identifier,\r\n                kind: monaco.languages.CompletionItemKind.Variable,\r\n                range: rangeToReplace\r\n            });\r\n\r\n\r\n        });\r\n\r\n        if (this.parent != null && this.parent.classContext == this.classContext) {\r\n            completionItems = completionItems.concat(this.parent.getLocalVariableCompletionItems(rangeToReplace));\r\n        }\r\n\r\n        return completionItems;\r\n    }\r\n\r\n    findTableAtPosition(line: number, column: number): SymbolTable {\r\n\r\n        if (!this.containsPosition(line, column)) {\r\n            return null;\r\n        }\r\n\r\n        let shortestSymbolTableContainingPosition = null;\r\n        let shortestPosition = 10000000;\r\n\r\n        for (let st of this.childSymbolTables) {\r\n            if (st.containsPosition(line, column)) {\r\n                let st1 = st.findTableAtPosition(line, column);\r\n                if (st1.positionTo.line - st1.positionFrom.line < shortestPosition) {\r\n                    shortestSymbolTableContainingPosition = st1;\r\n                    shortestPosition = st1.positionTo.line - st1.positionFrom.line;\r\n                }\r\n            }\r\n            // if(st.containsPosition(line, column) && st.positionTo.line - st.positionFrom.line < shortestPosition){\r\n            //     shortestSymbolTableContainingPosition = st;\r\n            //     shortestPosition = st.positionTo.line - st.positionFrom.line;\r\n            // }\r\n        }\r\n\r\n        if (shortestSymbolTableContainingPosition != null) {\r\n            return shortestSymbolTableContainingPosition;\r\n        } else {\r\n            return this;\r\n        }\r\n\r\n    }\r\n\r\n    containsPosition(line: number, column: number) {\r\n        if (line < this.positionFrom.line || line > this.positionTo.line) {\r\n            return false;\r\n        }\r\n\r\n        if (line == this.positionFrom.line) return column >= this.positionFrom.column;\r\n        if (line == this.positionTo.line) return column <= this.positionTo.column;\r\n\r\n        return true;\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Type, Method, Parameterlist, Value, Attribute } from \"../compiler/types/Types.js\";\r\nimport { Klass, Visibility } from \"../compiler/types/Class.js\";\r\nimport { stringPrimitiveType, doublePrimitiveType, floatPrimitiveType, intPrimitiveType, charPrimitiveType, booleanPrimitiveType } from \"../compiler/types/PrimitiveTypes.js\";\r\nimport { Module } from \"../compiler/parser/Module.js\";\r\nimport { PrintManager } from \"../main/gui/PrintManager.js\";\r\n\r\nexport class InputClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n        super(\"Input\", module, \"Klasse mit statischen Methoden zur Eingabe von Text per Tastatur\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n\r\n        this.addMethod(new Method(\"readChar\", new Parameterlist([\r\n            { identifier: \"Meldungstext\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"Defaultwert\", type: charPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n            ]), charPrimitiveType,\r\n            (parameters) => {\r\n                return null; // done by compiler magic in class Interpreter!\r\n            }, \r\n        false, true, \"Erwartet vom Benutzer die Eingabe eines Wertes vom Datentyp char\"));\r\n\r\n        this.addMethod(new Method(\"readInt\", new Parameterlist([\r\n            { identifier: \"Meldungstext\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"Defaultwert\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n            ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return null; // done by compiler magic in class Interpreter!\r\n            }, \r\n        false, true, \"Erwartet vom Benutzer die Eingabe eines Wertes vom Datentyp int\"));\r\n\r\n        this.addMethod(new Method(\"readString\", new Parameterlist([\r\n            { identifier: \"Meldungstext\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"Defaultwert\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n            ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                return null; // done by compiler magic in class Interpreter!\r\n            }, \r\n        false, true, \"Erwartet vom Benutzer die Eingabe eines Wertes vom Datentyp String\"));\r\n\r\n        this.addMethod(new Method(\"readFloat\", new Parameterlist([\r\n            { identifier: \"Meldungstext\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"Defaultwert\", type: floatPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n            ]), floatPrimitiveType,\r\n            (parameters) => {\r\n                return null; // done by compiler magic in class Interpreter!\r\n            }, \r\n        false, true, \"Erwartet vom Benutzer die Eingabe eines Wertes vom Datentyp float\"));\r\n\r\n        this.addMethod(new Method(\"readDouble\", new Parameterlist([\r\n            { identifier: \"Meldungstext\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"Defaultwert\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n            ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return null; // done by compiler magic in class Interpreter!\r\n            }, \r\n        false, true, \"Erwartet vom Benutzer die Eingabe eines Wertes vom Datentyp double\"));\r\n\r\n        this.addMethod(new Method(\"readBoolean\", new Parameterlist([\r\n            { identifier: \"Meldungstext\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"Defaultwert\", type: booleanPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n            ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return null; // done by compiler magic in class Interpreter!\r\n            }, \r\n        false, true, \"Erwartet vom Benutzer die Eingabe eines Wertes vom Datentyp boolean\"));\r\n\r\n        /**\r\n         * Same methods without default value:\r\n         */\r\n\r\n        this.addMethod(new Method(\"readChar\", new Parameterlist([\r\n            { identifier: \"Meldungstext\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            ]), charPrimitiveType,\r\n            (parameters) => {\r\n                return null; // done by compiler magic in class Interpreter!\r\n            }, \r\n        false, true, \"Erwartet vom Benutzer die Eingabe eines Wertes vom Datentyp char\"));\r\n\r\n        this.addMethod(new Method(\"readInt\", new Parameterlist([\r\n            { identifier: \"Meldungstext\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return null; // done by compiler magic in class Interpreter!\r\n            }, \r\n        false, true, \"Erwartet vom Benutzer die Eingabe eines Wertes vom Datentyp int\"));\r\n\r\n        this.addMethod(new Method(\"readString\", new Parameterlist([\r\n            { identifier: \"Meldungstext\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                return null; // done by compiler magic in class Interpreter!\r\n            }, \r\n        false, true, \"Erwartet vom Benutzer die Eingabe eines Wertes vom Datentyp String\"));\r\n\r\n        this.addMethod(new Method(\"readFloat\", new Parameterlist([\r\n            { identifier: \"Meldungstext\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            ]), floatPrimitiveType,\r\n            (parameters) => {\r\n                return null; // done by compiler magic in class Interpreter!\r\n            }, \r\n        false, true, \"Erwartet vom Benutzer die Eingabe eines Wertes vom Datentyp float\"));\r\n\r\n        this.addMethod(new Method(\"readDouble\", new Parameterlist([\r\n            { identifier: \"Meldungstext\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return null; // done by compiler magic in class Interpreter!\r\n            }, \r\n        false, true, \"Erwartet vom Benutzer die Eingabe eines Wertes vom Datentyp double\"));\r\n\r\n        this.addMethod(new Method(\"readBoolean\", new Parameterlist([\r\n            { identifier: \"Meldungstext\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return null; // done by compiler magic in class Interpreter!\r\n            }, \r\n        false, true, \"Erwartet vom Benutzer die Eingabe eines Wertes vom Datentyp boolean\"));\r\n\r\n    }\r\n\r\n\r\n}","import { Error, QuickFix, ErrorLevel } from \"../lexer/Lexer.js\";\r\nimport { TextPosition, TokenType, TokenTypeReadable } from \"../lexer/Token.js\";\r\nimport { ArrayType } from \"../types/Array.js\";\r\nimport { Klass, Interface, StaticClass, Visibility, getVisibilityUpTo } from \"../types/Class.js\";\r\nimport { booleanPrimitiveType, charPrimitiveType, floatPrimitiveType, intPrimitiveType, stringPrimitiveType, objectType, nullType, voidPrimitiveType, varType, doublePrimitiveType } from \"../types/PrimitiveTypes.js\";\r\nimport { Attribute, Type, Variable, Value, PrimitiveType, UsagePositions, Method, Heap, getTypeIdentifier, Parameterlist } from \"../types/Types.js\";\r\nimport { ASTNode, AttributeDeclarationNode, BinaryOpNode, ClassDeclarationNode, ConstantNode, DoWhileNode, ForNode, IdentifierNode, IfNode, IncrementDecrementNode, MethodcallNode, MethodDeclarationNode, NewObjectNode, ReturnNode, SelectArrayElementNode, SelectArributeNode, SuperconstructorCallNode, SuperNode, ThisNode, UnaryOpNode, WhileNode, LocalVariableDeclarationNode, ArrayInitializationNode, NewArrayNode, PrintNode, CastManuallyNode, EnumDeclarationNode, TermNode, SwitchNode, ScopeNode, ParameterNode, ForNodeOverCollecion } from \"./AST.js\";\r\nimport { LabelManager } from \"./LabelManager.js\";\r\nimport { Module, ModuleStore, MethodCallPosition } from \"./Module.js\";\r\nimport { AssignmentStatement, InitStackframeStatement, JumpAlwaysStatement, Program, Statement, BeginArrayStatement, NewObjectStatement, JumpOnSwitchStatement, Breakpoint, ExtendedForLoopCheckCounterAndGetElement } from \"./Program.js\";\r\nimport { SymbolTable } from \"./SymbolTable.js\";\r\nimport { Enum, EnumInfo } from \"../types/Enum.js\";\r\nimport { InputClass } from \"../../runtimelibrary/Input.js\";\r\n\r\ntype StackType = {\r\n    type: Type,\r\n    isAssignable: boolean,\r\n    isSuper?: boolean, // used for method calls with super.\r\n    withReturnStatement?: boolean\r\n};\r\n\r\nexport class CodeGenerator {\r\n\r\n    static assignmentOperators = [TokenType.assignment, TokenType.plusAssignment, TokenType.minusAssignment, TokenType.multiplicationAssignment, TokenType.divisionAssignment];\r\n\r\n    moduleStore: ModuleStore;\r\n    module: Module;\r\n\r\n    symbolTableStack: SymbolTable[];\r\n    currentSymbolTable: SymbolTable;\r\n\r\n    heap: Heap;\r\n\r\n    currentProgram: Program;\r\n\r\n    errorList: Error[];\r\n\r\n    nextFreeRelativeStackPos: number;\r\n\r\n    breakNodeStack: JumpAlwaysStatement[][];\r\n    continueNodeStack: JumpAlwaysStatement[][];\r\n\r\n    startAdhocCompilation(module: Module, moduleStore: ModuleStore, symbolTable: SymbolTable, heap: Heap): Error[] {\r\n\r\n        this.moduleStore = moduleStore;\r\n        this.module = module;\r\n\r\n        this.symbolTableStack = [];\r\n        this.symbolTableStack.push(symbolTable);\r\n        this.currentSymbolTable = symbolTable;\r\n\r\n        this.heap = heap;\r\n\r\n        let oldStackframeSize = symbolTable.stackframeSize;\r\n        this.nextFreeRelativeStackPos = oldStackframeSize;\r\n\r\n        this.currentProgram = null;\r\n        this.errorList = [];\r\n\r\n        this.breakNodeStack = [];\r\n        this.continueNodeStack = [];\r\n\r\n        this.generateMain(true);\r\n\r\n        return this.errorList;\r\n\r\n    }\r\n\r\n    start(module: Module, moduleStore: ModuleStore) {\r\n\r\n        this.moduleStore = moduleStore;\r\n        this.module = module;\r\n\r\n        this.symbolTableStack = [];\r\n        this.currentSymbolTable = null;\r\n\r\n        this.currentProgram = null;\r\n        this.errorList = [];\r\n\r\n        this.nextFreeRelativeStackPos = 0;\r\n\r\n        if (this.module.tokenList.length > 0) {\r\n            let lastToken = this.module.tokenList[this.module.tokenList.length - 1];\r\n            this.module.mainSymbolTable.positionTo = { line: lastToken.position.line, column: lastToken.position.column + 1, length: 1 };\r\n        }\r\n\r\n        this.symbolTableStack.push(this.module.mainSymbolTable);\r\n        this.currentSymbolTable = this.module.mainSymbolTable;\r\n\r\n        this.breakNodeStack = [];\r\n        this.continueNodeStack = [];\r\n\r\n        this.generateMain();\r\n\r\n        this.generateClasses();\r\n\r\n        this.lookForStaticVoidMain();\r\n\r\n        this.module.errors[3] = this.errorList;\r\n\r\n    }\r\n\r\n    lookForStaticVoidMain() {\r\n\r\n        let mainProgram = this.module.mainProgram;\r\n\r\n        if (mainProgram != null && mainProgram.statements.length > 2) return;\r\n\r\n        let mainMethod: Method = null;\r\n        let staticClass: StaticClass = null;\r\n        let classNode1: ASTNode;\r\n\r\n        for (let classNode of this.module.classDefinitionsAST) {\r\n            if (classNode.type == TokenType.keywordClass) {\r\n\r\n                let ct = classNode.resolvedType;\r\n\r\n                for (let m of ct.staticClass.methods) {\r\n                    if (m.identifier == \"main\" && m.parameterlist.parameters.length == 1) {\r\n                        let pt = m.parameterlist.parameters[0];\r\n                        if (pt.type instanceof ArrayType && pt.type.arrayOfType == stringPrimitiveType) {\r\n                            if (mainMethod != null) {\r\n                                this.pushError(\"Es existieren mehrere Klassen mit statischen main-Methoden.\", classNode.position);\r\n                            } else {\r\n                                mainMethod = m;\r\n                                staticClass = ct.staticClass;\r\n                                classNode1 = classNode;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        if (mainMethod != null) {\r\n\r\n            let position: TextPosition = mainMethod.usagePositions[0];\r\n            if (mainMethod.program != null && mainMethod.program.statements.length > 0) {\r\n                position = mainMethod.program.statements[0].position;\r\n            }\r\n\r\n            this.initCurrentProgram();\r\n\r\n            this.module.mainProgram = this.currentProgram;\r\n\r\n            this.pushStatements([{\r\n                type: TokenType.callMainMethod,\r\n                position: position,\r\n                stepFinished: false,\r\n                method: mainMethod,\r\n                staticClass: staticClass\r\n            }, {\r\n                type: TokenType.closeStackframe,\r\n                position: mainMethod.usagePositions.get(this.module)[0]\r\n            }\r\n            ], false);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    generateClasses() {\r\n        if (this.module.classDefinitionsAST == null) return;\r\n\r\n        for (let classNode of this.module.classDefinitionsAST) {\r\n            if (classNode.type == TokenType.keywordClass) {\r\n                this.generateClass(classNode);\r\n            }\r\n            if (classNode.type == TokenType.keywordEnum) {\r\n                this.generateEnum(classNode);\r\n            }\r\n            if (classNode.type == TokenType.keywordInterface) {\r\n                let interf = classNode.resolvedType;\r\n                if (interf != null) {\r\n                    this.checkDoubleMethodDeclaration(interf);\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n    generateEnum(enumNode: EnumDeclarationNode) {\r\n\r\n        if (enumNode.resolvedType == null) return;\r\n\r\n        this.pushNewSymbolTable(false, enumNode.scopeFrom, enumNode.scopeTo);\r\n\r\n        let enumClass = <Enum>enumNode.resolvedType;\r\n\r\n        // this.pushUsagePosition(enumNode.position, enumClass);\r\n\r\n        this.currentSymbolTable.classContext = enumClass;\r\n        this.currentProgram = enumClass.attributeInitializationProgram;\r\n\r\n        for (let attribute of enumNode.attributes) {\r\n            if (attribute != null && !attribute.isStatic && attribute.initialization != null) {\r\n                this.initializeAttribute(attribute);\r\n            }\r\n        }\r\n\r\n        if (enumClass.attributeInitializationProgram.statements.length > 0) {\r\n            this.pushStatements({\r\n                type: TokenType.return,\r\n                position: this.lastStatement.position,\r\n                copyReturnValueToStackframePos0: false,\r\n                stepFinished: false,\r\n                leaveThisObjectOnStack: true\r\n            });\r\n        }\r\n\r\n\r\n        this.currentProgram.labelManager.resolveNodes();\r\n\r\n        for (let methodNode of enumNode.methods) {\r\n            if (methodNode != null && !methodNode.isAbstract && !methodNode.isStatic) {\r\n                this.compileMethod(methodNode);\r\n            }\r\n        }\r\n\r\n        this.popSymbolTable(null);\r\n\r\n        // constructor calls\r\n        this.pushNewSymbolTable(false, enumNode.scopeFrom, enumNode.scopeTo);\r\n\r\n        for (let enumValueNode of enumNode.values) {\r\n\r\n            if (enumValueNode.constructorParameters != null) {\r\n\r\n                let p: Program = {\r\n                    module: this.module,\r\n                    labelManager: null,\r\n                    statements: []\r\n                }\r\n\r\n                this.currentProgram = p;\r\n\r\n                this.pushStatements({\r\n                    type: TokenType.pushEnumValue,\r\n                    position: enumValueNode.position,\r\n                    enumClass: enumClass,\r\n                    valueIdentifier: enumValueNode.identifier\r\n                });\r\n\r\n                this.processEnumConstructorCall(enumClass, enumValueNode.constructorParameters,\r\n                    enumValueNode.position, enumValueNode.commaPositions, enumValueNode.rightBracketPosition);\r\n\r\n                this.pushStatements({\r\n                    type: TokenType.programEnd,\r\n                    position: enumValueNode.position,\r\n                    stepFinished: true\r\n                });\r\n\r\n                let enumInfo: EnumInfo = enumClass.identifierToInfoMap[enumValueNode.identifier];\r\n                enumInfo.constructorCallProgram = p;\r\n                enumInfo.position = enumValueNode.position;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        this.popSymbolTable(null);\r\n\r\n\r\n        // static attributes/methods\r\n        this.pushNewSymbolTable(false, enumNode.scopeFrom, enumNode.scopeTo);\r\n\r\n        this.currentSymbolTable.classContext = enumClass.staticClass;\r\n        this.currentProgram = enumClass.staticClass.attributeInitializationProgram;\r\n\r\n        for (let attribute of enumNode.attributes) {\r\n            if (attribute != null && attribute.isStatic && attribute.initialization != null) {\r\n                this.initializeAttribute(attribute);\r\n            }\r\n        }\r\n\r\n        this.currentProgram.labelManager.resolveNodes();\r\n\r\n        for (let methodNode of enumNode.methods) {\r\n            if (methodNode != null && methodNode.isStatic) {\r\n                this.compileMethod(methodNode);\r\n            }\r\n        }\r\n        this.checkDoubleMethodDeclaration(enumClass);\r\n\r\n        this.popSymbolTable(null);\r\n\r\n    }\r\n\r\n    processEnumConstructorCall(enumClass: Enum, parameterNodes: TermNode[],\r\n        position: TextPosition, commaPositions: TextPosition[], rightBracketPosition: TextPosition) {\r\n        let parameterTypes: Type[] = [];\r\n\r\n        for (let p of parameterNodes) {\r\n            let typeNode = this.processNode(p);\r\n            if (typeNode == null) continue;\r\n            parameterTypes.push(typeNode.type);\r\n        }\r\n\r\n        let methods = enumClass.getMethodsThatFitWithCasting(enumClass.identifier,\r\n            parameterTypes, true, Visibility.private);\r\n\r\n        this.module.pushMethodCallPosition(position, commaPositions, enumClass.getMethods(Visibility.private, enumClass.identifier), rightBracketPosition);\r\n\r\n\r\n        if (methods.error != null) {\r\n            this.pushError(methods.error, position);\r\n            return { type: stringPrimitiveType, isAssignable: false }; // try to continue...\r\n        }\r\n\r\n        let method = methods.methodList[0];\r\n\r\n        for (let i = 0; i < parameterTypes.length; i++) {\r\n            let destType = method.getParameterType[i];\r\n            let srcType = parameterTypes[i];\r\n            if (!srcType.equals(destType)) {\r\n\r\n                if (srcType instanceof PrimitiveType && destType instanceof PrimitiveType) {\r\n                    if (srcType.getCastInformation(destType).needsStatement) {\r\n                        this.pushStatements({\r\n                            type: TokenType.castValue,\r\n                            position: null,\r\n                            newType: destType,\r\n                            stackPosRelative: -parameterTypes.length + 1 + i\r\n                        });\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        this.pushStatements({\r\n            type: TokenType.callMethod,\r\n            method: method,\r\n            position: position,\r\n            stepFinished: true,\r\n            isSuperCall: false,\r\n            stackframeBegin: -(parameterTypes.length + 1) // this-object followed by parameters\r\n        });\r\n    }\r\n\r\n    generateClass(classNode: ClassDeclarationNode) {\r\n\r\n        if (classNode.resolvedType == null) return;\r\n\r\n        this.pushNewSymbolTable(false, classNode.scopeFrom, classNode.scopeTo);\r\n\r\n        let klass = <Klass>classNode.resolvedType;\r\n\r\n        //this.pushUsagePosition(classNode.position, klass);\r\n\r\n        let inheritanceError = klass.checkInheritance();\r\n\r\n        if (inheritanceError.message != \"\") {\r\n            this.pushError(inheritanceError.message, classNode.position, \"error\", this.getInheritanceQuickFix(classNode.scopeTo, inheritanceError));\r\n        }\r\n\r\n        let baseClass = klass.baseClass;\r\n        if (baseClass != null && baseClass.module != klass.module && baseClass.visibility == Visibility.private) {\r\n            this.pushError(\"Die Basisklasse \" + baseClass.identifier + \" der Klasse \" + klass.identifier + \" ist hier nicht sichtbar.\", classNode.position);\r\n        }\r\n\r\n        this.currentSymbolTable.classContext = klass;\r\n        this.currentProgram = klass.attributeInitializationProgram;\r\n\r\n        for (let attribute of classNode.attributes) {\r\n            if (attribute != null && !attribute.isStatic && attribute.initialization != null) {\r\n                this.initializeAttribute(attribute);\r\n            }\r\n        }\r\n\r\n        if (klass.attributeInitializationProgram.statements.length > 0) {\r\n            this.pushStatements({\r\n                type: TokenType.return,\r\n                position: this.lastStatement.position,\r\n                copyReturnValueToStackframePos0: false,\r\n                stepFinished: false,\r\n                leaveThisObjectOnStack: true\r\n            });\r\n        }\r\n\r\n\r\n        this.currentProgram.labelManager.resolveNodes();\r\n\r\n        for (let methodNode of classNode.methods) {\r\n            if (methodNode != null && !methodNode.isAbstract && !methodNode.isStatic) {\r\n                this.compileMethod(methodNode);\r\n            }\r\n        }\r\n\r\n        this.checkDoubleMethodDeclaration(klass);\r\n\r\n        this.popSymbolTable(null);\r\n\r\n        // static attributes/methods\r\n        this.pushNewSymbolTable(false, classNode.scopeFrom, classNode.scopeTo);\r\n\r\n        this.currentSymbolTable.classContext = klass.staticClass;\r\n        this.currentProgram = klass.staticClass.attributeInitializationProgram;\r\n\r\n        for (let attribute of classNode.attributes) {\r\n            if (attribute != null && attribute.isStatic && attribute.initialization != null) {\r\n                this.initializeAttribute(attribute);\r\n            }\r\n        }\r\n\r\n        if (klass.staticClass.attributeInitializationProgram.statements.length > 0) {\r\n            this.pushStatements({\r\n                type: TokenType.return,\r\n                position: this.lastStatement.position,\r\n                copyReturnValueToStackframePos0: false,\r\n                stepFinished: false,\r\n                leaveThisObjectOnStack: true\r\n            });\r\n        }\r\n\r\n\r\n        this.currentProgram.labelManager.resolveNodes();\r\n\r\n        for (let methodNode of classNode.methods) {\r\n            if (methodNode != null && methodNode.isStatic) {\r\n                this.compileMethod(methodNode);\r\n            }\r\n        }\r\n\r\n        this.popSymbolTable(null);\r\n\r\n\r\n    }\r\n\r\n    checkDoubleMethodDeclaration(cie: Klass | Interface) {  // N.B.: Enum extends Klass\r\n\r\n        let signatureMap: { [key: string]: Method } = {};\r\n\r\n        for (let m of cie.methods) {\r\n\r\n            let signature = m.getSignatureWithReturnParameter();\r\n            if (signatureMap[signature] != null) {\r\n\r\n                let cieType: String = \"In der Klasse \";\r\n                if (cie instanceof Interface) cieType = \"Im Interface \";\r\n                if (cie instanceof Enum) cieType = \"Im Enum \";\r\n\r\n                this.pushError(cieType + cie.identifier + \" gibt es zwei Methoden mit derselben Signatur: \" + signature, m.usagePositions.get(this.module)[0], \"error\");\r\n                this.pushError(cieType + cie.identifier + \" gibt es zwei Methoden mit derselben Signatur: \" + signature, signatureMap[signature].usagePositions.get(this.module)[0], \"error\");\r\n\r\n            } else {\r\n                signatureMap[signature] = m;\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    getInheritanceQuickFix(position: TextPosition, inheritanceError: { message: string; missingMethods: Method[]; }): QuickFix {\r\n\r\n        let s: string = \"\";\r\n        for (let m of inheritanceError.missingMethods) {\r\n            s += \"\\tpublic \" + (m.returnType == null ? \" void\" : getTypeIdentifier(m.returnType)) + \" \" + m.identifier + \"(\";\r\n            s += m.parameterlist.parameters.map(p => getTypeIdentifier(p.type) + \" \" + p.identifier).join(\", \");\r\n            s += \") {\\n\\t\\t//TODO: Methode füllen\\n\\t}\\n\\n\";\r\n        }\r\n\r\n        return {\r\n            title: \"Fehlende Methoden einfügen\",\r\n            editsProvider: (uri) => {\r\n                return [\r\n                    {\r\n                        resource: uri,\r\n                        edit: {\r\n                            range: { startLineNumber: position.line, startColumn: position.column - 1, endLineNumber: position.line, endColumn: position.column - 1 },\r\n                            text: s\r\n                        }\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n    compileMethod(methodNode: MethodDeclarationNode) {\r\n        // Assumption: methodNode != null\r\n        let method = methodNode.resolvedType;\r\n\r\n        this.checkIfMethodIsVirtual(method);\r\n\r\n        if (method == null) return;\r\n\r\n        // this.pushUsagePosition(methodNode.position, method);\r\n\r\n        this.initCurrentProgram();\r\n        method.program = this.currentProgram;\r\n\r\n        this.pushNewSymbolTable(false, methodNode.scopeFrom, methodNode.scopeTo);\r\n        this.currentSymbolTable.method = method;\r\n\r\n        let stackPos: number = 1;\r\n\r\n        for (let v of method.getParameterList().parameters) {\r\n            v.stackPos = stackPos++;\r\n\r\n            this.currentSymbolTable.variableMap.set(v.identifier, v);\r\n        }\r\n\r\n        // \" + 1\" is for \"this\"-object\r\n        this.nextFreeRelativeStackPos = methodNode.parameters.length + 1;\r\n\r\n        if (method.isConstructor && this.currentSymbolTable.classContext instanceof Klass) {\r\n            let c: Klass = this.currentSymbolTable.classContext;\r\n            if (c != null && c.baseClass?.hasConstructor()) {\r\n                let error: boolean = false;\r\n                if (methodNode.statements == null || methodNode.statements.length == 0) error = true;\r\n                if (!error) {\r\n                    error = true;\r\n                    if (methodNode.statements[0].type == TokenType.scopeNode) {\r\n                        let stm = methodNode.statements[0].statements;\r\n                        if (stm.length > 0 && stm[0].type == TokenType.superConstructorCall) {\r\n                            error = false;\r\n                        }\r\n                    } else if (methodNode.statements[0].type == TokenType.superConstructorCall) {\r\n                        error = false;\r\n                    }\r\n                }\r\n                if (error) {\r\n                    let quickFix: QuickFix = null;\r\n                    let constructors = c.baseClass.methods.filter(m => m.isConstructor);\r\n                    if (constructors.length == 1) {\r\n                        let methodCall = \"super(\" + constructors[0].parameterlist.parameters.map(p => p.identifier).join(\", \") + \");\";\r\n                        let position = methodNode.position;\r\n                        quickFix = {\r\n                            title: 'Aufruf des Konstruktors der Basisklasse einfügen',\r\n                            //06.06.2020\r\n                            editsProvider: (uri) => {\r\n                                return [{\r\n                                    resource: uri,\r\n                                    edit: {\r\n                                        range: {\r\n                                            startLineNumber: position.line + 1, startColumn: 0, endLineNumber: position.line + 1, endColumn: 0,\r\n                                            message: \"\",\r\n                                            severity: monaco.MarkerSeverity.Error\r\n                                        },\r\n                                        text: \"\\t\\t\" + methodCall + \"\\n\"\r\n                                    }\r\n                                }\r\n                                ];\r\n                            }\r\n                        }\r\n                    }\r\n                    this.pushError(\"Die Basisklasse der Klasse \" + c.identifier + \" besitzt Konstruktoren, daher muss diese Konstruktordefinition mit einem Aufruf eines Konstruktors der Basisklasse (super(...)) beginnen.\",\r\n                        methodNode.position, \"error\", quickFix);\r\n                }\r\n            }\r\n        }\r\n\r\n        let actorClass = <Klass>this.moduleStore.getType(\"Actor\").type;\r\n        let methodIdentifiers = [\"act\", \"onKeyTyped\", \"onKeyDown\", \"onKeyUp\",\r\n            \"onMouseDown\", \"onMouseUp\", \"onMouseMove\", \"onMouseEnter\", \"onMouseLeave\"];\r\n        if (methodIdentifiers.indexOf(method.identifier) >= 0 && this.currentSymbolTable.classContext.hasAncestorOrIs(actorClass)) {\r\n            this.pushStatements([\r\n                {\r\n                    type: TokenType.returnIfDestroyed,\r\n                    position: methodNode.position\r\n                },\r\n            ]);\r\n        }\r\n\r\n        let withReturnStatement = this.generateStatements(methodNode.statements).withReturnStatement;\r\n\r\n        if (!withReturnStatement) {\r\n            this.pushStatements({\r\n                type: TokenType.return,\r\n                position: methodNode.scopeTo,\r\n                copyReturnValueToStackframePos0: false,\r\n                stepFinished: true,\r\n                leaveThisObjectOnStack: false\r\n            });\r\n\r\n            let rt = method.getReturnType();\r\n            if (!method.isConstructor && rt != null && rt != voidPrimitiveType) {\r\n                this.pushError(\"Die Deklaration der Methode verlangt die Rückgabe eines Wertes vom Typ \" + rt.identifier + \". Es fehlt (mindestens) eine entsprechende return-Anweisung.\", methodNode.position);\r\n            }\r\n        }\r\n\r\n        method.reserveStackForLocalVariables = this.nextFreeRelativeStackPos\r\n            - methodNode.parameters.length - 1;\r\n\r\n        this.popSymbolTable();\r\n        this.currentProgram.labelManager.resolveNodes();\r\n    }\r\n\r\n\r\n    /**\r\n     * checks if child classes have method with same signature\r\n     */\r\n    checkIfMethodIsVirtual(method: Method) {\r\n\r\n        let klass = this.currentSymbolTable.classContext;\r\n        if (klass != null) {\r\n\r\n            for (let mo of this.moduleStore.getModules(false)) {\r\n                for (let c of mo.typeStore.typeList) {\r\n                    if (c instanceof Klass && c != klass && c.hasAncestorOrIs(klass)) {\r\n                        for (let m of c.methods) {\r\n                            if (m != null && method != null && m.signature == method.signature) {\r\n                                method.isVirtual = true;\r\n                                return;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n    initializeAttribute(attribute: AttributeDeclarationNode) {\r\n\r\n        if (attribute == null) return;\r\n\r\n        // assumption: attribute != null\r\n        if (attribute.identifier == null || attribute.initialization == null) return;\r\n\r\n        if (attribute.isStatic) {\r\n            this.pushStatements({\r\n                type: TokenType.pushStaticAttribute,\r\n                attributeIdentifier: attribute.identifier,\r\n                position: attribute.initialization.position,\r\n                klass: <StaticClass>(this.currentSymbolTable.classContext)\r\n            });\r\n        } else {\r\n            this.pushStatements({\r\n                type: TokenType.pushAttribute,\r\n                attributeIdentifier: attribute.identifier,\r\n                position: attribute.initialization.position,\r\n                useThisObject: true\r\n            });\r\n        }\r\n\r\n\r\n        let initializationType = this.processNode(attribute.initialization);\r\n\r\n        if (initializationType != null && initializationType.type != null) {\r\n            if (!this.ensureAutomaticCasting(initializationType.type, attribute.attributeType.resolvedType)) {\r\n\r\n                if (attribute.attributeType.resolvedType == null) {\r\n                    this.pushError(\"Der Datentyp von \" + attribute.identifier + \" konnte nicht ermittelt werden. \", attribute.position);\r\n                } else {\r\n                    this.pushError(\"Der Wert des Term vom Datentyp \" + initializationType.type + \" kann dem Attribut \" + attribute.identifier + \" vom Typ \" + attribute.attributeType.resolvedType.identifier + \" nicht zugewiesen werden.\", attribute.initialization.position);\r\n                }\r\n\r\n\r\n            }\r\n\r\n            this.pushStatements({\r\n                type: TokenType.assignment,\r\n                position: attribute.initialization.position,\r\n                stepFinished: true,\r\n                leaveValueOnStack: false\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n    initCurrentProgram() {\r\n\r\n        this.currentProgram = {\r\n            module: this.module,\r\n            statements: [],\r\n            labelManager: null\r\n        };\r\n\r\n        this.currentProgram.labelManager = new LabelManager(this.currentProgram);\r\n\r\n        this.lastStatement = null;\r\n\r\n    }\r\n\r\n    generateMain(isAdhocCompilation: boolean = false) {\r\n\r\n        this.initCurrentProgram();\r\n\r\n        let position: TextPosition = { line: 1, column: 1, length: 0 };\r\n\r\n        let mainProgramAst = this.module.mainProgramAst;\r\n        if (mainProgramAst != null && mainProgramAst.length > 0 && mainProgramAst[0] != null) {\r\n            position = this.module.mainProgramAst[0].position;\r\n        }\r\n\r\n        if (!isAdhocCompilation) {\r\n            this.pushNewSymbolTable(true, position, { line: 100000, column: 1, length: 0 }, this.currentProgram);\r\n            this.heap = {};\r\n        }\r\n\r\n        this.module.mainProgram = this.currentProgram;\r\n\r\n        let hasMainProgram: boolean = false;\r\n\r\n        if (this.module.mainProgramAst != null && this.module.mainProgramAst.length > 0) {\r\n\r\n            hasMainProgram = true;\r\n            this.generateStatements(this.module.mainProgramAst);\r\n\r\n            if (isAdhocCompilation && this.lastStatement != null && this.lastStatement.type == TokenType.decreaseStackpointer) {\r\n                this.removeLastStatement();\r\n            }\r\n\r\n            this.lastPosition = this.module.mainProgramEnd;\r\n            if (this.lastPosition == null) this.lastPosition = { line: 100000, column: 0, length: 0 };\r\n            // if(this.lastPosition == null) this.lastPosition = {line: 100000, column: 0, length: 0};\r\n\r\n            this.currentSymbolTable.positionTo = this.lastPosition;\r\n            if (!isAdhocCompilation) this.popSymbolTable(this.currentProgram, true);\r\n            this.heap = null;\r\n\r\n            this.pushStatements({\r\n                type: TokenType.programEnd,\r\n                position: this.lastPosition,\r\n                stepFinished: true,\r\n                pauseAfterProgramEnd: true\r\n            }, true);\r\n\r\n        }\r\n\r\n        this.currentProgram.labelManager.resolveNodes();\r\n\r\n        if (!isAdhocCompilation && !hasMainProgram) {\r\n            this.popSymbolTable(this.currentProgram);\r\n            this.heap = null;\r\n        }\r\n\r\n    }\r\n\r\n    ensureAutomaticCasting(typeFrom: Type, typeTo: Type, position?: TextPosition, nodeFrom?: ASTNode): boolean {\r\n\r\n        if (typeFrom == null) return false;\r\n\r\n        if (typeFrom.equals(typeTo)) {\r\n            return true;\r\n        }\r\n\r\n        if (typeFrom == null || typeTo == null) return false;\r\n\r\n        if (!typeFrom.canCastTo(typeTo)) {\r\n\r\n            if (typeTo == booleanPrimitiveType && nodeFrom != null) {\r\n\r\n                this.checkIfAssignmentInstedOfEqual(nodeFrom);\r\n\r\n            }\r\n\r\n\r\n            return false;\r\n        }\r\n\r\n        if (typeFrom[\"unboxableAs\"] != null && typeFrom[\"unboxableAs\"].indexOf(typeTo) >= 0) {\r\n            return true;\r\n        }\r\n\r\n        if (typeFrom instanceof Klass && typeTo == stringPrimitiveType) {\r\n\r\n            let toStringStatement = this.getToStringStatement(typeFrom, position);\r\n\r\n            if (toStringStatement != null) {\r\n                this.pushStatements(toStringStatement);\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n\r\n        if (typeFrom instanceof PrimitiveType && (typeTo instanceof PrimitiveType || typeTo == stringPrimitiveType)) {\r\n            let castInfo = typeFrom.getCastInformation(typeTo);\r\n            if (!castInfo.automatic) {\r\n                return false;\r\n            }\r\n            if (castInfo.needsStatement) {\r\n                this.pushStatements({\r\n                    type: TokenType.castValue,\r\n                    newType: typeTo,\r\n                    position: position\r\n                });\r\n            }\r\n        }\r\n\r\n        return true;\r\n\r\n    }\r\n\r\n    getToStringStatement(type: Klass, position: TextPosition): Statement {\r\n        let toStringMethod = type.getMethodBySignature(\"toString()\");\r\n        if (toStringMethod != null && toStringMethod.getReturnType() == stringPrimitiveType) {\r\n\r\n            return {\r\n                type: TokenType.callMethod,\r\n                position: position,\r\n                method: toStringMethod,\r\n                isSuperCall: false,\r\n                stackframeBegin: -1,\r\n                stepFinished: false\r\n            };\r\n\r\n\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    checkIfAssignmentInstedOfEqual(nodeFrom: ASTNode) {\r\n        if (nodeFrom.type == TokenType.binaryOp && nodeFrom.operator == TokenType.assignment) {\r\n            let pos = nodeFrom.position;\r\n            this.pushError(\"= ist der Zuweisungsoperator. Du willst sicher zwei Werte vergleichen. Dazu benötigst Du den Vergleichsoperator ==.\",\r\n                pos, \"error\", {\r\n                title: '= durch == ersetzen',\r\n                editsProvider: (uri) => {\r\n                    return [{\r\n                        resource: uri,\r\n                        edit: {\r\n                            range: {\r\n                                startLineNumber: pos.line, startColumn: pos.column, endLineNumber: pos.line, endColumn: pos.column + 1,\r\n                                message: \"\",\r\n                                severity: monaco.MarkerSeverity.Error\r\n                            },\r\n                            text: \"==\"\r\n                        }\r\n                    }\r\n                    ];\r\n                }\r\n\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n    generateStatements(nodes: ASTNode[]): { withReturnStatement: boolean, endPosition?: TextPosition } {\r\n\r\n\r\n        if (nodes == null || nodes.length == 0 || nodes[0] == null) return { withReturnStatement: false };\r\n\r\n        let withReturnStatement: boolean = this.processStatementsInsideBlock(nodes);\r\n\r\n        let lastNode = nodes[nodes.length - 1];\r\n        let endPosition: TextPosition;\r\n        if (lastNode != null) {\r\n            if (lastNode.type == TokenType.scopeNode) {\r\n                endPosition = lastNode.positionTo;\r\n            } else {\r\n                endPosition = Object.assign({}, lastNode.position);\r\n                if (endPosition != null) {\r\n                    endPosition.column += endPosition.length;\r\n                    endPosition.length = 1;\r\n                }\r\n            }\r\n            this.lastPosition = endPosition;\r\n        } else {\r\n            endPosition = this.lastPosition;\r\n        }\r\n\r\n        return { withReturnStatement: withReturnStatement, endPosition: endPosition };\r\n\r\n    }\r\n\r\n    processStatementsInsideBlock(nodes: ASTNode[]) {\r\n        let withReturnStatement = false;\r\n\r\n        for (let node of nodes) {\r\n\r\n            if (node == null) continue;\r\n\r\n            let type = this.processNode(node);\r\n\r\n            if (type != null && type.withReturnStatement != null && type.withReturnStatement) {\r\n                withReturnStatement = true;\r\n            }\r\n\r\n            // If last Statement has value which is not used further then pop this value from stack.\r\n            // e.g. statement 12 + 17 -7;\r\n            // Parser issues a warning in this case, see Parser.checkIfStatementHasNoEffekt\r\n            if (type != null && type.type != null && type.type != voidPrimitiveType) {\r\n\r\n                if (this.lastStatement != null &&\r\n                    this.lastStatement.type == TokenType.assignment && this.lastStatement.leaveValueOnStack) {\r\n                    this.lastStatement.leaveValueOnStack = false;\r\n                } else {\r\n                    this.pushStatements({\r\n                        type: TokenType.decreaseStackpointer,\r\n                        position: null,\r\n                        popCount: 1,\r\n                        stepFinished: true\r\n                    }, true)\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        return withReturnStatement;\r\n    }\r\n\r\n\r\n    lastPosition: TextPosition;\r\n    lastStatement: Statement;\r\n\r\n    insertStatements(pos: number, statements: Statement | Statement[]) {\r\n        if (statements == null) return;\r\n        if (!Array.isArray(statements)) statements = [statements];\r\n        for (let st of statements) {\r\n            this.currentProgram.statements.splice(pos++, 0, st);\r\n        }\r\n    }\r\n\r\n    pushStatements(statement: Statement | Statement[], deleteStepFinishedFlagOnStepBefore: boolean = false) {\r\n\r\n        if (statement == null) return;\r\n\r\n        if (deleteStepFinishedFlagOnStepBefore && this.currentProgram.statements.length > 0) {\r\n            let stepBefore: Statement = this.currentProgram.statements[this.currentProgram.statements.length - 1];\r\n            stepBefore.stepFinished = false;\r\n        }\r\n\r\n        if (Array.isArray(statement)) {\r\n            for (let st of statement) {\r\n                this.currentProgram.statements.push(st);\r\n                if (st.type == TokenType.return || st.type == TokenType.jumpAlways) {\r\n                    if (this.lastStatement != null) this.lastStatement.stepFinished = false;\r\n                }\r\n                if (st.position != null) {\r\n                    this.lastPosition = st.position;\r\n                } else {\r\n                    st.position = this.lastPosition;\r\n                }\r\n                this.lastStatement = st;\r\n            }\r\n        } else {\r\n            this.currentProgram.statements.push(statement);\r\n            if (statement.type == TokenType.return || statement.type == TokenType.jumpAlways) {\r\n                if (this.lastStatement != null) this.lastStatement.stepFinished = false;\r\n            }\r\n            if (statement.position != null) {\r\n                this.lastPosition = statement.position;\r\n            } else {\r\n                statement.position = this.lastPosition;\r\n            }\r\n\r\n            this.lastStatement = statement;\r\n        }\r\n    }\r\n\r\n    removeLastStatement() {\r\n        let lst = this.currentProgram.statements.pop();\r\n        this.currentProgram.labelManager.removeNode(lst);\r\n    }\r\n\r\n    initStackFrameNodes: InitStackframeStatement[] = [];\r\n\r\n\r\n    pushNewSymbolTable(beginNewStackframe: boolean, positionFrom: TextPosition, positionTo: TextPosition,\r\n        program?: Program): SymbolTable {\r\n\r\n        let st = new SymbolTable(this.currentSymbolTable, positionFrom, positionTo);\r\n\r\n        this.symbolTableStack.push(this.currentSymbolTable);\r\n\r\n        if (beginNewStackframe) {\r\n            st.beginsNewStackframe = true;\r\n            this.currentSymbolTable.stackframeSize = this.nextFreeRelativeStackPos;\r\n            this.nextFreeRelativeStackPos = 0;\r\n\r\n            if (program != null) {\r\n                let initStackFrameNode: InitStackframeStatement = {\r\n                    type: TokenType.initStackframe,\r\n                    position: positionFrom,\r\n                    reserveForLocalVariables: 0\r\n                }\r\n\r\n                program.statements.push(initStackFrameNode);\r\n                this.initStackFrameNodes.push(initStackFrameNode);\r\n            }\r\n\r\n        }\r\n\r\n        this.currentSymbolTable = st;\r\n\r\n        return st;\r\n\r\n    }\r\n\r\n    popSymbolTable(program?: Program, deleteStepFinishedFlagOnStepBefore: boolean = false): void {\r\n\r\n        let st = this.currentSymbolTable;\r\n        this.currentSymbolTable = this.symbolTableStack.pop();\r\n\r\n        // if v.declarationError != null then variable has been used before initialization.\r\n        st.variableMap.forEach(v => {\r\n            if (v.declarationError != null && v.usedBeforeInitialization) {\r\n                this.errorList.push(v.declarationError);\r\n                v.declarationError = null;\r\n            }\r\n        });\r\n\r\n        // if (!st.beginsNewStackframe && st.variableMap.size == 0 && removeI) {\r\n        //     // empty symbol table => remove it!\r\n        //     if (st.parent != null) {\r\n        //         st.parent.childSymbolTables.pop();\r\n        //     }\r\n        // } else \r\n        {\r\n            // TODO: add length of token\r\n\r\n            if (st.beginsNewStackframe) {\r\n\r\n                st.stackframeSize = this.nextFreeRelativeStackPos;\r\n                this.nextFreeRelativeStackPos = this.currentSymbolTable.stackframeSize;\r\n\r\n                if (program != null) {\r\n                    let initStackframeNode = this.initStackFrameNodes.pop();\r\n                    if (initStackframeNode != null) initStackframeNode.reserveForLocalVariables = st.stackframeSize;\r\n\r\n                    if (program.statements.length > 0 && deleteStepFinishedFlagOnStepBefore) {\r\n                        let statement = program.statements[program.statements.length - 1];\r\n\r\n                        // don't set stepFinished = false in jump-statements\r\n                        // as this could lead to infinity-loop is user sets \"while(true);\" just before program end\r\n                        if ([TokenType.jumpAlways, TokenType.jumpIfTrue, TokenType.jumpIfFalse, TokenType.jumpIfFalseAndLeaveOnStack, TokenType.jumpIfTrueAndLeaveOnStack].indexOf(statement.type) == -1) {\r\n                            program.statements[program.statements.length - 1].stepFinished = false;\r\n                        }\r\n                    }\r\n\r\n                    program.statements.push({\r\n                        type: TokenType.closeStackframe,\r\n                        position: st.positionTo\r\n                    });\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    pushError(text: string, position: TextPosition, errorLevel: ErrorLevel = \"error\", quickFix?: QuickFix) {\r\n        this.errorList.push({\r\n            text: text,\r\n            position: position,\r\n            quickFix: quickFix,\r\n            level: errorLevel\r\n        });\r\n    }\r\n\r\n    openBreakScope() {\r\n        this.breakNodeStack.push([]);\r\n    }\r\n\r\n    openContinueScope() {\r\n        this.continueNodeStack.push([]);\r\n    }\r\n\r\n    pushBreakNode(breakNode: JumpAlwaysStatement) {\r\n        if (this.breakNodeStack.length == 0) {\r\n            this.pushError(\"Eine break-Anweisung ist nur innerhalb einer umgebenden Schleife oder switch-Anweisung sinnvoll.\", breakNode.position);\r\n        } else {\r\n            this.breakNodeStack[this.breakNodeStack.length - 1].push(breakNode);\r\n            this.pushStatements(breakNode);\r\n        }\r\n    }\r\n\r\n    pushContinueNode(continueNode: JumpAlwaysStatement) {\r\n        if (this.continueNodeStack.length == 0) {\r\n            this.pushError(\"Eine continue-Anweisung ist nur innerhalb einer umgebenden Schleife oder switch-Anweisung sinnvoll.\", continueNode.position);\r\n        } else {\r\n            this.continueNodeStack[this.continueNodeStack.length - 1].push(continueNode);\r\n            this.pushStatements(continueNode);\r\n        }\r\n    }\r\n\r\n    closeBreakScope(breakTargetLabel: number, lm: LabelManager) {\r\n        let breakNodes = this.breakNodeStack.pop();\r\n        for (let bn of breakNodes) {\r\n            lm.registerJumpNode(bn, breakTargetLabel);\r\n        }\r\n    }\r\n\r\n    closeContinueScope(continueTargetLabel: number, lm: LabelManager) {\r\n        let continueNodes = this.continueNodeStack.pop();\r\n        for (let bn of continueNodes) {\r\n            lm.registerJumpNode(bn, continueTargetLabel);\r\n        }\r\n    }\r\n\r\n    breakOccured(): boolean {\r\n        return this.breakNodeStack.length > 0 && this.breakNodeStack[this.breakNodeStack.length - 1].length > 0;\r\n    }\r\n\r\n    processNode(node: ASTNode, isLeftSideOfAssignment: boolean = false): StackType {\r\n\r\n        if (node == null) return;\r\n\r\n        switch (node.type) {\r\n            case TokenType.binaryOp:\r\n                return this.processBinaryOp(node);\r\n            case TokenType.unaryOp:\r\n                return this.processUnaryOp(node);\r\n            case TokenType.pushConstant:\r\n                return this.pushConstant(node);\r\n            case TokenType.callMethod:\r\n                return this.callMethod(node);\r\n            case TokenType.identifier:\r\n                {\r\n                    let stackType = this.resolveIdentifier(node);\r\n                    let v = node.variable;\r\n                    if (v != null) {\r\n                        if (isLeftSideOfAssignment) {\r\n                            v.initialized = true;\r\n                            if (!v.usedBeforeInitialization) {\r\n                                v.declarationError = null;\r\n                            }\r\n                        } else {\r\n                            if (v.initialized != null && !v.initialized) {\r\n                                v.usedBeforeInitialization = true;\r\n                                this.pushError(\"Die Variable \" + v.identifier + \" wird hier benutzt bevor sie initialisiert wurde.\", node.position, \"info\");\r\n                            }\r\n                        }\r\n                    }\r\n                    return stackType;\r\n                }\r\n            case TokenType.selectArrayElement:\r\n                return this.selectArrayElement(node);\r\n            case TokenType.incrementDecrementBefore:\r\n            case TokenType.incrementDecrementAfter:\r\n                return this.incrementDecrementBeforeOrAfter(node);\r\n            case TokenType.superConstructorCall:\r\n                return this.superconstructorCall(node);\r\n            case TokenType.keywordThis:\r\n                return this.pushThisOrSuper(node, false);\r\n            case TokenType.keywordSuper:\r\n                return this.pushThisOrSuper(node, true);\r\n            case TokenType.pushAttribute:\r\n                return this.pushAttribute(node);\r\n            case TokenType.newObject:\r\n                return this.newObject(node);\r\n            case TokenType.keywordWhile:\r\n                return this.processWhile(node);\r\n            case TokenType.keywordDo:\r\n                return this.processDo(node);\r\n            case TokenType.keywordFor:\r\n                return this.processFor(node);\r\n            case TokenType.forLoopOverCollection:\r\n                return this.processForLoopOverCollection(node);\r\n            case TokenType.keywordIf:\r\n                return this.processIf(node);\r\n            case TokenType.keywordSwitch:\r\n                return this.processSwitch(node);\r\n            case TokenType.keywordReturn:\r\n                return this.processReturn(node);\r\n            case TokenType.localVariableDeclaration:\r\n                return this.localVariableDeclaration(node);\r\n            case TokenType.arrayInitialization:\r\n                return this.processArrayLiteral(node);\r\n            case TokenType.newArray:\r\n                return this.processNewArray(node);\r\n            case TokenType.keywordPrint:\r\n            case TokenType.keywordPrintln:\r\n                return this.processPrint(node);\r\n            case TokenType.castValue:\r\n                return this.processManualCast(node);\r\n            case TokenType.keywordBreak:\r\n                this.pushBreakNode({\r\n                    type: TokenType.jumpAlways,\r\n                    position: node.position\r\n                });\r\n                return null;\r\n            case TokenType.keywordContinue:\r\n                this.pushContinueNode({\r\n                    type: TokenType.jumpAlways,\r\n                    position: node.position\r\n                });\r\n                return null;\r\n            case TokenType.rightBracket:\r\n                let type = this.processNode(node.termInsideBrackets);\r\n                if (type != null && type.type instanceof Klass) this.pushTypePosition(node.position, type.type);\r\n                return type;\r\n            case TokenType.scopeNode:\r\n                this.pushNewSymbolTable(false, node.position, node.positionTo);\r\n\r\n                let withReturnStatement = this.processStatementsInsideBlock(node.statements);\r\n\r\n                this.popSymbolTable();\r\n\r\n                return { type: null, isAssignable: false, withReturnStatement: withReturnStatement };\r\n\r\n        }\r\n\r\n    }\r\n\r\n    processManualCast(node: CastManuallyNode): StackType {\r\n\r\n        let typeFrom1 = this.processNode(node.whatToCast);\r\n\r\n        if (typeFrom1 == null || typeFrom1.type == null) return;\r\n        let typeFrom: Type = typeFrom1.type;\r\n\r\n        if (typeFrom != null && node.castToType != null && node.castToType.resolvedType != null) {\r\n\r\n            let typeTo = node.castToType.resolvedType;\r\n\r\n            if (typeFrom.canCastTo(typeTo)) {\r\n\r\n                if (typeFrom instanceof PrimitiveType && typeTo instanceof PrimitiveType) {\r\n                    let castInfo = typeFrom.getCastInformation(typeTo);\r\n                    if (castInfo.needsStatement) {\r\n                        this.pushStatements({\r\n                            type: TokenType.castValue,\r\n                            position: node.position,\r\n                            newType: typeTo\r\n                        });\r\n                    }\r\n                } else if (typeFrom instanceof Klass && typeTo == stringPrimitiveType) {\r\n                    let toStringMethod = typeFrom.getMethodBySignature(\"toString()\");\r\n                    if (toStringMethod != null && toStringMethod.getReturnType() == stringPrimitiveType) {\r\n\r\n                        this.pushStatements({\r\n                            type: TokenType.callMethod,\r\n                            position: node.position,\r\n                            method: toStringMethod,\r\n                            isSuperCall: false,\r\n                            stackframeBegin: -1,\r\n                            stepFinished: false\r\n                        });\r\n\r\n                    } else {\r\n                        this.pushError(\"Der Datentyp \" + typeFrom.identifier + \" kann (zumindest durch casting) nicht in den Datentyp \" + typeTo.identifier + \" umgewandelt werden.\", node.position);\r\n                        this.pushStatements({\r\n                            type: TokenType.castValue,\r\n                            position: node.position,\r\n                            newType: typeTo\r\n                        });\r\n                    }\r\n\r\n                }\r\n\r\n                return {\r\n                    isAssignable: typeFrom1.isAssignable,\r\n                    type: typeTo\r\n                };\r\n\r\n            }\r\n\r\n            if ((typeFrom instanceof Klass || typeFrom instanceof Interface) && (typeTo instanceof Klass || typeTo instanceof Interface))\r\n\r\n            // if (typeFrom instanceof Klass &&\r\n            //     (typeTo instanceof Klass && !typeFrom.hasAncestorOrIs(typeTo) && typeTo.hasAncestorOrIs(typeFrom)) ||\r\n            //     (typeTo instanceof Interface && !(<Klass>typeFrom).implementsInterface(typeTo))) \r\n            {\r\n\r\n                this.pushStatements({\r\n                    type: TokenType.checkCast,\r\n                    position: node.position,\r\n                    newType: typeTo,\r\n                    stepFinished: false\r\n                });\r\n\r\n                return {\r\n                    isAssignable: typeFrom1.isAssignable,\r\n                    type: typeTo\r\n                };\r\n            }\r\n            else {\r\n                this.pushError(\"Der Datentyp \" + typeFrom.identifier + \" kann (zumindest durch casting) nicht in den Datentyp \" + typeTo.identifier + \" umgewandelt werden.\", node.position);\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    processPrint(node: PrintNode): StackType {\r\n\r\n        let type = node.type == TokenType.keywordPrint ? TokenType.print : TokenType.println;\r\n\r\n        this.module.pushMethodCallPosition(node.position, node.commaPositions, TokenTypeReadable[node.type], node.rightBracketPosition);\r\n\r\n        if (node.text != null) {\r\n\r\n            let type = this.processNode(node.text);\r\n\r\n            if (type != null) {\r\n                if (!this.ensureAutomaticCasting(type.type, stringPrimitiveType)) {\r\n                    this.pushError(\"Die Methoden print und println erwarten einen Parameter vom Typ String. Gefunden wurde ein Wert vom Typ \" + type.type?.identifier + \".\", node.position);\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        let withColor: boolean = false;\r\n\r\n        if (node.color != null) {\r\n\r\n            let type = this.processNode(node.color);\r\n\r\n            if (type != null) {\r\n                if (type.type != stringPrimitiveType && type.type != intPrimitiveType) {\r\n                    if (!this.ensureAutomaticCasting(type.type, stringPrimitiveType)) {\r\n                        this.pushError(\"Die Methoden print und println erwarten als Farbe einen Parameter vom Typ String oder int. Gefunden wurde ein Wert vom Typ \" + type.type.identifier + \".\", node.position);\r\n                    }\r\n                }\r\n            }\r\n\r\n            withColor = true;\r\n        }\r\n\r\n\r\n        this.pushStatements({\r\n            type: type,\r\n            position: node.position,\r\n            empty: (node.text == null),\r\n            stepFinished: true,\r\n            withColor: withColor\r\n        });\r\n\r\n\r\n        return null;\r\n    }\r\n\r\n    processNewArray(node: NewArrayNode): StackType {\r\n\r\n        if (node.initialization != null) {\r\n            return this.processArrayLiteral(node.initialization);\r\n        }\r\n\r\n        // int[7][2][] are 7 arrays each with arrays of length 2 which are empty\r\n\r\n        let dimension = 0;\r\n        for (let ec of node.elementCount) {\r\n            if (ec != null) {\r\n                this.processNode(ec); // push number of elements for this dimension on stack\r\n                dimension++;\r\n            } else {\r\n                break;\r\n            }\r\n        }\r\n\r\n        // for the array above: arrayType is array of array of int; dimension is 2; stack: 7 2\r\n        this.pushStatements({\r\n            type: TokenType.pushEmptyArray,\r\n            position: node.position,\r\n            arrayType: node.arrayType.resolvedType,\r\n            dimension: dimension\r\n        });\r\n\r\n        return {\r\n            isAssignable: false,\r\n            type: node.arrayType.resolvedType\r\n        }\r\n\r\n    }\r\n\r\n\r\n    processArrayLiteral(node: ArrayInitializationNode): StackType {\r\n\r\n        let bes: BeginArrayStatement = {\r\n            type: TokenType.beginArray,\r\n            position: node.position,\r\n            arrayType: node.arrayType.resolvedType\r\n        };\r\n\r\n        this.pushStatements(bes);\r\n\r\n        for (let ain of node.nodes) {\r\n\r\n            // Did an error occur when parsing a constant?\r\n            if (ain == null) {\r\n                continue;\r\n            }\r\n\r\n            if (ain.type == TokenType.arrayInitialization) {\r\n                this.processArrayLiteral(ain);\r\n            } else {\r\n                let sType = this.processNode(ain);\r\n                if (sType == null) {\r\n                    return;\r\n                }\r\n                let targetType = (<ArrayType>node.arrayType.resolvedType).arrayOfType;\r\n                if (!this.ensureAutomaticCasting(sType.type, targetType, ain.position)) {\r\n                    this.pushError(\"Der Datentyp des Terms (\" + sType.type.identifier + \") kann nicht in den Datentyp \" + targetType.identifier + \" konvertiert werden.\", ain.position);\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        this.pushStatements({\r\n            type: TokenType.addToArray,\r\n            position: node.position,\r\n            numberOfElementsToAdd: node.nodes.length\r\n        });\r\n\r\n        return {\r\n            isAssignable: false,\r\n            type: node.arrayType.resolvedType\r\n        }\r\n\r\n    }\r\n\r\n    localVariableDeclaration(node: LocalVariableDeclarationNode, dontWarnWhenNoInitialization: boolean = false): StackType {\r\n\r\n        if (node.variableType.resolvedType == null) {\r\n            node.variableType.resolvedType = nullType; // Make the best out of it...\r\n        }\r\n\r\n        let declareVariableOnHeap = (this.heap != null && this.symbolTableStack.length <= 2);\r\n\r\n        let variable: Variable = {\r\n            identifier: node.identifier,\r\n            stackPos: declareVariableOnHeap ? null : this.nextFreeRelativeStackPos++,\r\n            type: node.variableType.resolvedType,\r\n            usagePositions: new Map(),\r\n            declaration: { module: this.module, position: node.position },\r\n            isFinal: node.isFinal\r\n        };\r\n\r\n        this.pushUsagePosition(node.position, variable);\r\n\r\n        if (declareVariableOnHeap) {\r\n\r\n            this.pushStatements({\r\n                type: TokenType.heapVariableDeclaration,\r\n                position: node.position,\r\n                pushOnTopOfStackForInitialization: node.initialization != null,\r\n                variable: variable,\r\n                stepFinished: node.initialization == null\r\n            });\r\n\r\n            if (this.heap[variable.identifier]) {\r\n                this.pushError(\"Die Variable \" + node.identifier + \" darf im selben Sichtbarkeitsbereich (Scope) nicht mehrmals definiert werden.\", node.position);\r\n            }\r\n\r\n            this.heap[variable.identifier] = variable;\r\n            // only for code completion:\r\n            this.currentSymbolTable.variableMap.set(node.identifier, variable);\r\n\r\n        } else {\r\n\r\n            if (this.currentSymbolTable.variableMap.get(node.identifier)) {\r\n                this.pushError(\"Die Variable \" + node.identifier + \" darf im selben Sichtbarkeitsbereich (Scope) nicht mehrmals definiert werden.\", node.position);\r\n            }\r\n\r\n            this.currentSymbolTable.variableMap.set(node.identifier, variable);\r\n\r\n            this.pushStatements({\r\n                type: TokenType.localVariableDeclaration,\r\n                position: node.position,\r\n                pushOnTopOfStackForInitialization: node.initialization != null,\r\n                variable: variable,\r\n                stepFinished: node.initialization == null\r\n            })\r\n\r\n        }\r\n\r\n        if (node.initialization != null) {\r\n            let initType = this.processNode(node.initialization);\r\n\r\n            if (initType != null) {\r\n\r\n                if (variable.type == varType) {\r\n                    variable.type = initType.type;\r\n                } else if (initType.type == null) {\r\n                    this.pushError(\"Der Typ des Terms auf der rechten Seite des Zuweisungsoperators (=) konnte nicht bestimmt werden.\", node.initialization.position);\r\n                } else\r\n                    if (!this.ensureAutomaticCasting(initType.type, variable.type)) {\r\n                        this.pushError(\"Der Term vom Typ \" + initType.type.identifier + \" kann der Variable vom Typ \" + variable.type.identifier + \" nicht zugeordnet werden.\", node.initialization.position);\r\n                    };\r\n                this.pushStatements({\r\n                    type: TokenType.assignment,\r\n                    position: node.initialization.position,\r\n                    stepFinished: true,\r\n                    leaveValueOnStack: false\r\n                });\r\n            }\r\n\r\n        } else {\r\n            if (variable.type == varType) {\r\n                this.pushError(\"Die Verwendung von var ist nur dann zulässig, wenn eine lokale Variable in einer Anweisung deklariert und initialisiert wird, also z.B. var i = 12;\", node.variableType.position);\r\n            } else {\r\n                let initializer: string = \" = null\";\r\n                if (variable.type == intPrimitiveType) initializer = \" = 0\";\r\n                if (variable.type == doublePrimitiveType) initializer = \" = 0.0\";\r\n                if (variable.type == booleanPrimitiveType) initializer = \" = false\";\r\n                if (variable.type == charPrimitiveType) initializer = \" = ' '\";\r\n                if (variable.type == stringPrimitiveType) initializer = ' = \"\"';\r\n\r\n                variable.declarationError = {\r\n                    text: \"Jede lokale Variable sollte vor ihrer ersten Verwendung initialisiert werden.\",\r\n                    position: node.position,\r\n                    quickFix:\r\n                    {\r\n                        title: initializer + \" ergänzen\",\r\n                        editsProvider: (uri) => {\r\n                            let pos = node.position;\r\n                            return [\r\n                                {\r\n                                    resource: uri,\r\n                                    edit: {\r\n                                        range: { startLineNumber: pos.line, startColumn: pos.column + pos.length, endLineNumber: pos.line, endColumn: pos.column + pos.length },\r\n                                        text: initializer\r\n                                    }\r\n                                }\r\n                            ]\r\n                        }\r\n                    },\r\n                    level: \"info\"\r\n                }\r\n\r\n                variable.usedBeforeInitialization = false;\r\n                variable.initialized = dontWarnWhenNoInitialization;\r\n\r\n            }\r\n        }\r\n\r\n        return null;\r\n\r\n    }\r\n\r\n    processReturn(node: ReturnNode): StackType {\r\n\r\n        let method = this.currentSymbolTable.method;\r\n\r\n        if (method == null) {\r\n            this.pushError(\"Eine return-Anweisung ist nur im Kontext einer Methode erlaubt.\", node.position);\r\n            return null;\r\n        }\r\n\r\n        if (node.term != null) {\r\n\r\n            if (method.getReturnType() == null) {\r\n                this.pushError(\"Die Methode \" + method.identifier + \" erwartet keinen Rückgabewert.\", node.position);\r\n                return null;\r\n            }\r\n\r\n            let type = this.processNode(node.term);\r\n\r\n            if (type != null) {\r\n                if (!this.ensureAutomaticCasting(type.type, method.getReturnType(), null, node)) {\r\n                    this.pushError(\"Die Methode \" + method.identifier + \" erwaret einen Rückgabewert vom Typ \" + method.getReturnType().identifier + \". Gefunden wurde ein Wert vom Typ \" + type.type.identifier + \".\", node.position);\r\n                }\r\n\r\n            }\r\n\r\n        } else {\r\n            if (method.getReturnType() != null && method.getReturnType() != voidPrimitiveType) {\r\n                this.pushError(\"Die Methode \" + method.identifier + \" erwartet einen Rückgabewert vom Typ \" + method.getReturnType().identifier + \", daher ist die leere Return-Anweisung (return;) nicht ausreichend.\", node.position);\r\n            }\r\n        }\r\n\r\n        this.pushStatements({\r\n            type: TokenType.return,\r\n            position: node.position,\r\n            copyReturnValueToStackframePos0: node.term != null,\r\n            stepFinished: true,\r\n            leaveThisObjectOnStack: false\r\n        });\r\n\r\n        return { type: null, isAssignable: false, withReturnStatement: true };\r\n\r\n    }\r\n\r\n    processSwitch(node: SwitchNode): StackType {\r\n\r\n        let lm = this.currentProgram.labelManager;\r\n\r\n        this.pushNewSymbolTable(false, node.scopeFrom, node.scopeTo);\r\n\r\n        let ct = this.processNode(node.condition);\r\n        if (ct == null || ct.type == null) return;\r\n\r\n        let conditionType = ct.type;\r\n\r\n        let isString = conditionType == stringPrimitiveType || conditionType == charPrimitiveType;\r\n        let isInteger = conditionType == intPrimitiveType;\r\n        let isEnum = conditionType instanceof Enum;\r\n\r\n        if (!(isString || isInteger || isEnum)) {\r\n            this.pushError(\"Der Unterscheidungsterms einer switch-Anweisung muss den Datentyp String, char, int oder enum besitzen. Dieser hier ist vom Typ \" + conditionType.identifier, node.condition.position);\r\n        }\r\n\r\n        if (isEnum) {\r\n            this.pushStatements({\r\n                type: TokenType.castValue,\r\n                position: node.condition.position,\r\n                newType: intPrimitiveType\r\n            });\r\n        }\r\n\r\n        let switchStatement: JumpOnSwitchStatement = {\r\n            type: TokenType.keywordSwitch,\r\n            position: node.position,\r\n            defaultDestination: null,\r\n            switchType: isString ? \"string\" : \"number\",\r\n            destinationLabels: [],\r\n            destinationMap: {}\r\n        }\r\n\r\n        this.pushStatements(switchStatement);\r\n\r\n        // if value not included in case-statement and no default-statement present:\r\n        let endLabel = lm.insertJumpNode(TokenType.jumpAlways, node.position, this);\r\n\r\n        switchStatement.stepFinished = true;\r\n\r\n        lm.registerSwitchStatement(switchStatement);\r\n\r\n        this.openBreakScope();\r\n\r\n        let withReturnStatement = node.caseNodes.length > 0;\r\n\r\n        for (let caseNode of node.caseNodes) {\r\n\r\n            let isDefault = caseNode.caseTerm == null;\r\n\r\n            if (!isDefault) {\r\n\r\n                let constant: string | number = null;\r\n\r\n                if (isEnum && caseNode.caseTerm.type == TokenType.identifier) {\r\n                    let en: Enum = <Enum>conditionType;\r\n                    let info = en.identifierToInfoMap[caseNode.caseTerm.identifier];\r\n                    if (info == null) {\r\n                        this.pushError(\"Die Enum-Klasse \" + conditionType.identifier + \" hat kein Element mit dem Bezeichner \" + caseNode.caseTerm.identifier, caseNode.position, \"error\");\r\n                    } else {\r\n                        constant = info.ordinal;\r\n                    }\r\n                } else {\r\n                    let caseTerm = this.processNode(caseNode.caseTerm);\r\n\r\n                    let ls = this.lastStatement;\r\n\r\n                    if (ls.type == TokenType.pushConstant) {\r\n                        constant = ls.value;\r\n                    }\r\n\r\n                    if (ls.type == TokenType.pushEnumValue) {\r\n                        constant = ls.enumClass.getOrdinal(ls.valueIdentifier);\r\n                    }\r\n\r\n                    this.removeLastStatement();\r\n                }\r\n\r\n                if (constant == null) {\r\n                    this.pushError(\"Der Term bei case muss konstant sein.\", caseNode.caseTerm.position);\r\n                }\r\n\r\n                let label = lm.markJumpDestination(1);\r\n                let statements = this.generateStatements(caseNode.statements);\r\n\r\n                if (statements?.withReturnStatement == null || !statements.withReturnStatement) {\r\n                    withReturnStatement = false;\r\n                }\r\n\r\n                switchStatement.destinationLabels.push({\r\n                    constant: constant,\r\n                    label: label\r\n                });\r\n            } else {\r\n                let label = lm.markJumpDestination(1);\r\n                this.generateStatements(caseNode.statements);\r\n                switchStatement.defaultDestination = label;\r\n            }\r\n\r\n\r\n        }\r\n\r\n        lm.markJumpDestination(1, endLabel);\r\n\r\n        this.closeBreakScope(endLabel, lm);\r\n\r\n        this.popSymbolTable(null);\r\n\r\n        return { type: null, isAssignable: false, withReturnStatement: withReturnStatement };\r\n    }\r\n\r\n    processIf(node: IfNode): StackType {\r\n\r\n        let lm = this.currentProgram.labelManager;\r\n\r\n        let conditionType = this.processNode(node.condition);\r\n\r\n        if (conditionType != null && conditionType.type != booleanPrimitiveType) {\r\n            this.checkIfAssignmentInstedOfEqual(node.condition);\r\n            this.pushError(\"Der Wert des Terms in Klammern hinter 'if' muss den Datentyp boolean besitzen.\", node.condition.position);\r\n        }\r\n\r\n        let beginElse = lm.insertJumpNode(TokenType.jumpIfFalse, null, this);\r\n\r\n        let withReturnStatementIf = this.generateStatements(node.statementsIfTrue).withReturnStatement;\r\n\r\n        let endOfIf: number;\r\n        if (node.statementsIfFalse != null) {\r\n            endOfIf = lm.insertJumpNode(TokenType.jumpAlways, null, this);\r\n        }\r\n\r\n        lm.markJumpDestination(1, beginElse);\r\n\r\n        let withReturnStatementElse: boolean;\r\n        if (node.statementsIfFalse == null || node.statementsIfFalse.length == 0) {\r\n            withReturnStatementElse = false;\r\n        } else {\r\n            withReturnStatementElse = this.generateStatements(node.statementsIfFalse).withReturnStatement;\r\n        }\r\n\r\n        if (endOfIf != null) {\r\n            lm.markJumpDestination(1, endOfIf);\r\n        }\r\n\r\n        return { type: null, isAssignable: false, withReturnStatement: withReturnStatementIf && withReturnStatementElse };\r\n\r\n    }\r\n\r\n\r\n    processFor(node: ForNode): StackType {\r\n\r\n        let lm = this.currentProgram.labelManager;\r\n\r\n        this.pushNewSymbolTable(false, node.scopeFrom, node.scopeTo);\r\n\r\n        this.generateStatements(node.statementsBefore);\r\n\r\n        let labelBeforeCondition = lm.markJumpDestination(1);\r\n\r\n        let conditionType = this.processNode(node.condition);\r\n\r\n        if (conditionType != null && conditionType.type != booleanPrimitiveType) {\r\n            this.checkIfAssignmentInstedOfEqual(node.condition);\r\n            this.pushError(\"Der Wert der Bedingung muss den Datentyp boolean besitzen.\", node.condition.position);\r\n        }\r\n\r\n        let labelAfterForLoop = lm.insertJumpNode(TokenType.jumpIfFalse, null, this);\r\n\r\n        this.openBreakScope();\r\n        this.openContinueScope();\r\n\r\n        let statements = this.generateStatements(node.statements);\r\n        let withReturnStatement = statements.withReturnStatement;\r\n\r\n        let continueLabelIndex = lm.markJumpDestination(1);\r\n        this.closeContinueScope(continueLabelIndex, lm);\r\n        this.generateStatements(node.statementsAfter);\r\n\r\n        lm.insertJumpNode(TokenType.jumpAlways, statements.endPosition, this, labelBeforeCondition);\r\n\r\n        lm.markJumpDestination(1, labelAfterForLoop);\r\n\r\n        this.closeBreakScope(labelAfterForLoop, lm);\r\n\r\n        this.popSymbolTable();\r\n\r\n        return { type: null, isAssignable: false, withReturnStatement: withReturnStatement };\r\n\r\n    }\r\n\r\n    processForLoopOverCollection(node: ForNodeOverCollecion): StackType {\r\n\r\n        let lm = this.currentProgram.labelManager;\r\n\r\n        this.pushNewSymbolTable(false, node.scopeFrom, node.scopeTo);\r\n\r\n        // reserve position on stack for collection\r\n        let stackPosForCollection = this.nextFreeRelativeStackPos++;\r\n\r\n        // assign value of collection term to collection\r\n        let ct = this.processNode(node.collection);\r\n        if (ct == null) return;\r\n        let collectionType = ct.type;\r\n\r\n        this.pushStatements({\r\n            type: TokenType.popAndStoreIntoVariable,\r\n            position: node.collection.position,\r\n            stackposOfVariable: stackPosForCollection,\r\n            stepFinished: false\r\n        })\r\n\r\n        let collectionElementType: Type;\r\n\r\n        let kind: \"array\" | \"internalList\" | \"group\" | \"userDefinedIterable\" = null;\r\n\r\n        if (collectionType instanceof ArrayType) {\r\n            collectionElementType = collectionType.arrayOfType;\r\n            kind = \"array\";\r\n        } else if (collectionType instanceof Klass && collectionType.getImplementedInterface(\"Iterable\") != null) {\r\n            if (collectionType.module.isSystemModule) {\r\n                kind = \"internalList\";\r\n            } else {\r\n                kind = \"userDefinedIterable\";\r\n            }\r\n            let iterableInterface = collectionType.getImplementedInterface(\"Iterable\");\r\n            collectionElementType = collectionType.typeVariables[0].type;\r\n        } else if (collectionType instanceof Klass && collectionType.identifier == \"Group\") {\r\n            kind = \"group\";\r\n            collectionElementType = this.moduleStore.getType(\"Shape\").type;\r\n        }\r\n        else {\r\n            this.pushError(\"Mit der vereinfachten for-Schleife (for identifier : collectionOrArray) kann man nur über Arrays oder Klassen, die das Interface Iterable implementieren, iterieren.\", node.collection.position);\r\n            return null;\r\n        }\r\n\r\n        let variableType = node.variableType.resolvedType;\r\n        if (variableType == null) return null;\r\n\r\n        let noCastingNeeded = variableType == varType;\r\n        if (noCastingNeeded) {\r\n            variableType = collectionElementType;\r\n            node.variableType.resolvedType = collectionElementType\r\n        } else {\r\n            if (!collectionElementType.canCastTo(variableType)) {\r\n                this.pushError(\"Der ElementTyp \" + collectionElementType.identifier + \" der Collection kann nicht in den Typ \" + variableType.identifier + \" der Iterationsvariable \" + node.variableIdentifier + \" konvertiert werden.\", node.position);\r\n                return null;\r\n            }\r\n        }\r\n\r\n        this.localVariableDeclaration({\r\n            type: TokenType.localVariableDeclaration,\r\n            identifier: node.variableIdentifier,\r\n            initialization: null,\r\n            isFinal: false,\r\n            position: node.variablePosition,\r\n            variableType: node.variableType\r\n        }, true)\r\n\r\n        let variableStackPos = this.nextFreeRelativeStackPos - 1;\r\n        let stackPosOfCounterVariableOrIterator = this.nextFreeRelativeStackPos++;\r\n\r\n        if (kind == \"array\" || kind == \"internalList\" || kind == \"group\") {\r\n            this.pushStatements([{\r\n                type: TokenType.extendedForLoopInit,\r\n                position: node.position,\r\n                stepFinished: false,\r\n                stackPosOfCollection: stackPosForCollection,\r\n                stackPosOfElement: variableStackPos,\r\n                typeOfElement: variableType,\r\n                stackPosOfCounter: stackPosOfCounterVariableOrIterator\r\n            }], true);\r\n        } else {\r\n            // get Iterator from collection\r\n            this.pushStatements([\r\n                {\r\n                    type: TokenType.pushLocalVariableToStack,\r\n                    position: node.position,\r\n                    stackposOfVariable: stackPosOfCounterVariableOrIterator,\r\n                    stepFinished: false\r\n                },\r\n                {\r\n                    type: TokenType.pushLocalVariableToStack,\r\n                    position: node.position,\r\n                    stackposOfVariable: stackPosForCollection,\r\n                    stepFinished: false\r\n                },\r\n                {\r\n                    type: TokenType.callMethod,\r\n                    position: node.position,\r\n                    stepFinished: false,\r\n                    isSuperCall: false,\r\n                    method: collectionType.getMethod(\"iterator\", new Parameterlist([])),\r\n                    stackframeBegin: -1\r\n                },\r\n                {\r\n                    type: TokenType.assignment,\r\n                    position: node.position,\r\n                    stepFinished: true,\r\n                    leaveValueOnStack: false\r\n                }], true);\r\n        }\r\n\r\n        let labelBeforeCondition = lm.markJumpDestination(1);\r\n        let labelAfterForLoop: number;\r\n        let lastStatementBeforeCasting: Statement;\r\n\r\n        if (kind == \"array\" || kind == \"internalList\" || kind == \"group\") {\r\n            let jumpNode: ExtendedForLoopCheckCounterAndGetElement = {\r\n                type: TokenType.extendedForLoopCheckCounterAndGetElement,\r\n                kind: kind,\r\n                position: node.variablePosition,\r\n                stepFinished: true,\r\n                stackPosOfCollection: stackPosForCollection,\r\n                stackPosOfElement: variableStackPos,\r\n                stackPosOfCounter: stackPosOfCounterVariableOrIterator,\r\n                destination: 0 // gets filled in later,\r\n            };\r\n            lastStatementBeforeCasting = jumpNode;\r\n            labelAfterForLoop = lm.registerJumpNode(jumpNode);\r\n\r\n            this.pushStatements(\r\n                jumpNode\r\n            );\r\n\r\n        } else {\r\n            // call collection.hasNext()\r\n            this.pushStatements([\r\n                {\r\n                    type: TokenType.pushLocalVariableToStack,\r\n                    position: node.variablePosition,\r\n                    stackposOfVariable: stackPosForCollection,\r\n                    stepFinished: false\r\n                },\r\n                {\r\n                    type: TokenType.callMethod,\r\n                    position: node.position,\r\n                    stepFinished: false,\r\n                    isSuperCall: false,\r\n                    method: collectionType.getMethod(\"hasNext\", new Parameterlist([])),\r\n                    stackframeBegin: -1\r\n                },\r\n            ]);\r\n            labelAfterForLoop = lm.insertJumpNode(TokenType.jumpIfFalse, null, this);\r\n            // call collection.next() and assign to loop variable\r\n            this.pushStatements([\r\n                {\r\n                    type: TokenType.pushLocalVariableToStack,\r\n                    position: node.position,\r\n                    stackposOfVariable: variableStackPos,\r\n                    stepFinished: false\r\n                },\r\n                {\r\n                    type: TokenType.pushLocalVariableToStack,\r\n                    position: node.position,\r\n                    stackposOfVariable: stackPosForCollection,\r\n                    stepFinished: false\r\n                },\r\n                {\r\n                    type: TokenType.callMethod,\r\n                    position: node.position,\r\n                    stepFinished: false,\r\n                    isSuperCall: false,\r\n                    method: collectionType.getMethod(\"next\", new Parameterlist([])),\r\n                    stackframeBegin: -1\r\n                },\r\n                {\r\n                    type: TokenType.assignment,\r\n                    position: node.position,\r\n                    stepFinished: true,\r\n                    leaveValueOnStack: false\r\n                }]);\r\n        }\r\n\r\n        if (!noCastingNeeded) {\r\n            let oldStatementCount = this.currentProgram.statements.length;\r\n            this.pushStatements({\r\n                type: TokenType.pushLocalVariableToStack,\r\n                position: node.position,\r\n                stackposOfVariable: variableStackPos,\r\n                stepFinished: false\r\n            });\r\n            this.ensureAutomaticCasting(collectionElementType, variableType);\r\n            if (this.currentProgram.statements.length < oldStatementCount + 2) {\r\n                // casting needed no statement, so delete pushLocalVariabletoStack-Statement\r\n                this.currentProgram.statements.pop();\r\n            } else {\r\n                this.pushStatements({\r\n                    type: TokenType.popAndStoreIntoVariable,\r\n                    stackposOfVariable: variableStackPos,\r\n                    position: node.position,\r\n                    stepFinished: true\r\n                });\r\n                lastStatementBeforeCasting.stepFinished = false;\r\n            }\r\n        }\r\n\r\n        this.openBreakScope();\r\n        this.openContinueScope();\r\n\r\n        let statements = this.generateStatements(node.statements);\r\n        let withReturnStatement = statements.withReturnStatement;\r\n\r\n        let continueLabelIndex = lm.markJumpDestination(1);\r\n        this.closeContinueScope(continueLabelIndex, lm);\r\n\r\n        lm.insertJumpNode(TokenType.jumpAlways, statements.endPosition, this, labelBeforeCondition);\r\n\r\n        lm.markJumpDestination(1, labelAfterForLoop);\r\n\r\n        this.closeBreakScope(labelAfterForLoop, lm);\r\n\r\n        this.popSymbolTable();\r\n\r\n        return { type: null, isAssignable: false, withReturnStatement: withReturnStatement };\r\n\r\n    }\r\n\r\n    processWhile(node: WhileNode): StackType {\r\n\r\n        let lm = this.currentProgram.labelManager;\r\n\r\n        this.pushNewSymbolTable(false, node.scopeFrom, node.scopeTo);\r\n\r\n        let conditionBeginLabel = lm.markJumpDestination(1);\r\n\r\n        let conditionType = this.processNode(node.condition);\r\n\r\n        if (conditionType != null && conditionType.type != booleanPrimitiveType) {\r\n            this.checkIfAssignmentInstedOfEqual(node.condition);\r\n            this.pushError(\"Der Wert des Terms in Klammern hinter 'while' muss den Datentyp boolean besitzen.\", node.condition.position);\r\n        }\r\n\r\n        let position = node.position;\r\n\r\n        if (node.condition != null) {\r\n            position = node.condition.position;\r\n        }\r\n\r\n        let afterWhileStatementLabel = lm.insertJumpNode(TokenType.jumpIfFalse, position, this);\r\n\r\n        this.openBreakScope();\r\n        this.openContinueScope();\r\n\r\n        let statements = this.generateStatements(node.statements);\r\n        let withReturnStatement = statements.withReturnStatement;\r\n\r\n        this.closeContinueScope(conditionBeginLabel, lm);\r\n        lm.insertJumpNode(TokenType.jumpAlways, statements.endPosition, this, conditionBeginLabel);\r\n\r\n        lm.markJumpDestination(1, afterWhileStatementLabel);\r\n\r\n        this.closeBreakScope(afterWhileStatementLabel, lm);\r\n\r\n        this.popSymbolTable();\r\n\r\n        return { type: null, isAssignable: false, withReturnStatement: withReturnStatement };\r\n\r\n    }\r\n\r\n    processDo(node: DoWhileNode): StackType {\r\n\r\n        let lm = this.currentProgram.labelManager;\r\n\r\n        this.pushNewSymbolTable(false, node.scopeFrom, node.scopeTo);\r\n\r\n        let statementsBeginLabel = lm.markJumpDestination(1);\r\n\r\n        this.openBreakScope();\r\n        this.openContinueScope();\r\n\r\n        let statements = this.generateStatements(node.statements);\r\n        let withReturnStatement = statements.withReturnStatement;\r\n\r\n        let continueLabelIndex = lm.markJumpDestination(1);\r\n        this.closeContinueScope(continueLabelIndex, lm);\r\n\r\n        let conditionType = this.processNode(node.condition);\r\n\r\n        if (conditionType != null && conditionType.type != booleanPrimitiveType) {\r\n            this.checkIfAssignmentInstedOfEqual(node.condition);\r\n            this.pushError(\"Der Wert des Terms in Klammern hinter 'while' muss den Datentyp boolean besitzen.\", node.condition.position);\r\n        }\r\n\r\n        lm.insertJumpNode(TokenType.jumpIfTrue, statements.endPosition, this, statementsBeginLabel);\r\n\r\n        let endLabel = lm.markJumpDestination(1);\r\n\r\n        this.closeBreakScope(endLabel, lm);\r\n\r\n        this.popSymbolTable();\r\n\r\n        return { type: null, isAssignable: false, withReturnStatement: withReturnStatement };\r\n\r\n    }\r\n\r\n    newObject(node: NewObjectNode): StackType {\r\n\r\n        if (node.classType == null || node.classType.resolvedType == null) return null;\r\n\r\n        let resolvedType: Klass = <Klass>node.classType.resolvedType;\r\n        if (!(resolvedType instanceof Klass)) {\r\n            this.pushError(node.classType.identifier + \" ist keine Klasse, daher kann davon mit 'new' kein Objekt erzeugt werden.\", node.position);\r\n            return null;\r\n        }\r\n\r\n        if (resolvedType.isAbstract) {\r\n            this.pushError(`${node.classType.identifier} ist eine abstrakte Klasse, daher kann von ihr mit 'new' kein Objekt instanziert werden. Falls ${node.classType.identifier} nicht-abstrakte Kindklassen besitzt, könntest Du von DENEN mit new Objekte instanzieren...`, node.position);\r\n            return null;\r\n        }\r\n\r\n        //this.pushTypePosition(node.rightBracketPosition, classType);\r\n\r\n        if (resolvedType.module != this.module && resolvedType.visibility != Visibility.public) {\r\n            this.pushError(\"Die Klasse \" + resolvedType.identifier + \" ist hier nicht sichtbar.\", node.position);\r\n        }\r\n\r\n        let newStatement: NewObjectStatement = {\r\n            type: TokenType.newObject,\r\n            position: node.position,\r\n            class: resolvedType,\r\n            subsequentConstructorCall: false,\r\n            stepFinished: true\r\n        };\r\n\r\n        this.pushStatements(newStatement);\r\n        this.pushTypePosition(node.rightBracketPosition, resolvedType); // to enable code completion when typing a point after the closing bracket\r\n\r\n        let parameterTypes: Type[] = [];\r\n        let parameterStatements: Statement[][] = [];\r\n        let allStatements = this.currentProgram.statements;\r\n\r\n        if (node.constructorOperands?.length > 0) {\r\n            for (let p of node.constructorOperands) {\r\n                let programPointer = allStatements.length;\r\n                let typeNode = this.processNode(p);\r\n                parameterStatements.push(allStatements.splice(programPointer, allStatements.length - programPointer));\r\n                if (typeNode == null) {\r\n                    parameterTypes.push(voidPrimitiveType);\r\n                } else {\r\n                    parameterTypes.push(typeNode.type);\r\n                }\r\n            }\r\n        }\r\n\r\n        let upToVisibility = getVisibilityUpTo(resolvedType, this.currentSymbolTable.classContext);\r\n\r\n        // let methods = resolvedType.getMethodsThatFitWithCasting(resolvedType.identifier,\r\n        //     parameterTypes, true, upToVisibility);\r\n\r\n        let methods = resolvedType.getConstructor(parameterTypes, upToVisibility);\r\n\r\n        this.module.pushMethodCallPosition(node.position, node.commaPositions, resolvedType.getMethods(Visibility.public, resolvedType.identifier), node.rightBracketPosition);\r\n\r\n        // if there's no parameterless constructor then return without error:\r\n        if (parameterTypes.length > 0 || resolvedType.hasConstructor()) {\r\n\r\n            if (methods.error != null) {\r\n                this.pushError(methods.error, node.position);\r\n                return { type: resolvedType, isAssignable: false }; // try to continue...\r\n            }\r\n\r\n            let method = methods.methodList[0];\r\n            this.pushUsagePosition(node.position, method);\r\n\r\n            let staticClassContext = null;\r\n            let classContext = this.currentSymbolTable.classContext;\r\n            if (classContext != null && classContext instanceof Klass) {\r\n                staticClassContext = classContext.staticClass;\r\n            }\r\n\r\n            if (method.visibility == Visibility.private && resolvedType != classContext && resolvedType != staticClassContext) {\r\n                this.pushError(\"Die Konstruktormethode ist private und daher hier nicht sichtbar.\", node.position);\r\n            }\r\n\r\n\r\n            let destType: Type = null;\r\n            for (let i = 0; i < parameterTypes.length; i++) {\r\n                if (i < method.getParameterCount()) {  // possible ellipsis!\r\n                    destType = method.getParameterType(i);\r\n                    if (i == method.getParameterCount() - 1 && method.hasEllipsis()) {\r\n                        destType = (<ArrayType>destType).arrayOfType;\r\n                    }\r\n                }\r\n                let srcType = parameterTypes[i];\r\n                for (let st of parameterStatements[i]) {\r\n                    this.currentProgram.statements.push(st);\r\n                }\r\n                if (!this.ensureAutomaticCasting(srcType, destType, node.constructorOperands[i].position, node.constructorOperands[i])) {\r\n                    this.pushError(\"Der Wert vom Datentyp \" + srcType.identifier + \" kann nicht als Parameter (Datentyp \" + destType.identifier + \") verwendet werden.\", node.constructorOperands[i].position);\r\n                }\r\n\r\n            }\r\n\r\n            let stackframeDelta = 0;\r\n            if (method.hasEllipsis()) {\r\n                let ellipsisParameterCount = parameterTypes.length - method.getParameterCount() + 1; // last parameter and subsequent ones\r\n                stackframeDelta = - (ellipsisParameterCount - 1);\r\n                this.pushStatements({\r\n                    type: TokenType.makeEllipsisArray,\r\n                    position: node.constructorOperands[method.getParameterCount() - 1].position,\r\n                    parameterCount: ellipsisParameterCount,\r\n                    stepFinished: false,\r\n                    arrayType: method.getParameter(method.getParameterCount() - 1).type\r\n                })\r\n            }\r\n\r\n\r\n            this.pushStatements({\r\n                type: TokenType.callMethod,\r\n                method: method,\r\n                position: node.position,\r\n                isSuperCall: false,\r\n                stepFinished: resolvedType.getPostConstructorCallbacks() == null,\r\n                stackframeBegin: -(parameterTypes.length + 1 + stackframeDelta) // this-object followed by parameters\r\n            }, true);\r\n\r\n            newStatement.subsequentConstructorCall = true;\r\n            newStatement.stepFinished = false;\r\n\r\n        }\r\n\r\n        if (resolvedType.getPostConstructorCallbacks() != null) {\r\n            this.pushStatements({\r\n                type: TokenType.processPostConstructorCallbacks,\r\n                position: node.position,\r\n                stepFinished: true\r\n            }, true);\r\n        }\r\n\r\n        return { type: resolvedType, isAssignable: false };\r\n\r\n    }\r\n\r\n    pushAttribute(node: SelectArributeNode): StackType {\r\n\r\n        if (node.object == null || node.identifier == null) return null;\r\n\r\n        let ot = this.processNode(node.object);\r\n        if (ot == null) {\r\n            this.pushError('Links vom Punkt steht kein Objekt.', node.position);\r\n            return null;\r\n        }\r\n\r\n        if (!(ot.type instanceof Klass || ot.type instanceof StaticClass || ot.type instanceof ArrayType)) {\r\n            if (ot.type == null) {\r\n                this.pushError('Der Ausdruck links vom Punkt hat kein Attribut ' + node.identifier + \".\", node.position);\r\n            } else {\r\n                this.pushError('Links vom Punkt steht ein Ausdruck vom Datentyp ' + ot.type.identifier + \". Dieser hat kein Attribut \" + node.identifier + \".\", node.position);\r\n            }\r\n            return null;\r\n        }\r\n\r\n        let objectType: Klass | StaticClass | ArrayType = ot.type;\r\n\r\n        if (objectType instanceof Klass) {\r\n\r\n            let visibilityUpTo = getVisibilityUpTo(objectType, this.currentSymbolTable.classContext);\r\n\r\n            let attributeWithError = objectType.getAttribute(node.identifier, visibilityUpTo);\r\n\r\n            let staticAttributeWithError = null;\r\n            if (attributeWithError.attribute == null) {\r\n                staticAttributeWithError = objectType.staticClass.getAttribute(node.identifier, visibilityUpTo);\r\n            }\r\n\r\n            if (attributeWithError.attribute == null && staticAttributeWithError.attribute == null) {\r\n                if (attributeWithError.foundButInvisible || !staticAttributeWithError.foundButInvisible) {\r\n                    this.pushError(attributeWithError.error, node.position);\r\n                } else {\r\n                    this.pushError(staticAttributeWithError.error, node.position);\r\n                }\r\n                return {\r\n                    type: objectType,\r\n                    isAssignable: false\r\n                }\r\n            } else {\r\n                let attribute: Attribute;\r\n                if (attributeWithError.attribute != null) {\r\n                    this.pushStatements({\r\n                        type: TokenType.pushAttribute,\r\n                        position: node.position,\r\n                        attributeIdentifier: node.identifier,\r\n                        useThisObject: false\r\n                    });\r\n                    attribute = attributeWithError.attribute;\r\n                } else {\r\n                    this.pushStatements([{\r\n                        type: TokenType.decreaseStackpointer,\r\n                        position: node.position,\r\n                        popCount: 1\r\n                    }, {\r\n                        type: TokenType.pushStaticAttribute,\r\n                        position: node.position,\r\n                        klass: (<Klass>objectType).staticClass,\r\n                        attributeIdentifier: node.identifier\r\n                    }]);\r\n                    attribute = staticAttributeWithError.attribute;\r\n                }\r\n\r\n                this.pushUsagePosition(node.position, attribute);\r\n\r\n                return {\r\n                    type: attribute.type,\r\n                    isAssignable: !attribute.isFinal\r\n                }\r\n            }\r\n\r\n        } else if (objectType instanceof StaticClass) {\r\n            // Static class\r\n            if (objectType.Klass instanceof Enum) {\r\n                this.removeLastStatement(); // remove push static enum class to stack\r\n\r\n                let enumInfo = objectType.Klass.enumInfoList.find(ei => ei.identifier == node.identifier);\r\n\r\n                if (enumInfo == null) {\r\n                    this.pushError(\"Die enum-Klasse \" + objectType.identifier + \" hat keinen enum-Wert mit dem Bezeichner \" + node.identifier, node.position);\r\n                }\r\n\r\n                this.pushStatements({\r\n                    type: TokenType.pushEnumValue,\r\n                    position: node.position,\r\n                    enumClass: objectType.Klass,\r\n                    valueIdentifier: node.identifier\r\n                });\r\n\r\n                return {\r\n                    type: objectType.Klass,\r\n                    isAssignable: false\r\n                }\r\n\r\n            } else {\r\n                let upToVisibility = getVisibilityUpTo(objectType, this.currentSymbolTable.classContext);\r\n                let staticAttributeWithError = objectType.getAttribute(node.identifier, upToVisibility);\r\n                if (staticAttributeWithError.attribute != null) {\r\n                    // if (staticAttributeWithError.attribute.updateValue != undefined) {\r\n                    //     this.removeLastStatement();\r\n                    //     this.pushStatements({\r\n                    //         type: TokenType.pushStaticAttributeIntrinsic,\r\n                    //         position: node.position,\r\n                    //         attribute: staticAttributeWithError.attribute\r\n                    //     });\r\n                    // } else \r\n                    {\r\n                        this.removeLastStatement();\r\n                        this.pushStatements({\r\n                            type: TokenType.pushStaticAttribute,\r\n                            position: node.position,\r\n                            attributeIdentifier: node.identifier,\r\n                            klass: objectType\r\n                        });\r\n                        this.pushUsagePosition(node.position, staticAttributeWithError.attribute);\r\n\r\n                    }\r\n                    return {\r\n                        type: staticAttributeWithError.attribute.type,\r\n                        isAssignable: !staticAttributeWithError.attribute.isFinal\r\n                    }\r\n                } else {\r\n                    this.pushError(staticAttributeWithError.error, node.position);\r\n                    return {\r\n                        type: objectType,\r\n                        isAssignable: false\r\n                    }\r\n                }\r\n            }\r\n\r\n        } else {\r\n\r\n            if (node.identifier != \"length\") {\r\n                this.pushError('Der Wert vom Datentyp ' + ot.type.identifier + \" hat kein Attribut \" + node.identifier, node.position);\r\n                return null;\r\n            }\r\n\r\n            this.pushStatements({\r\n                type: TokenType.pushArrayLength,\r\n                position: node.position\r\n            });\r\n\r\n            let element: Attribute = new Attribute(\"length\", intPrimitiveType, null, true, Visibility.public, true, \"Länge des Arrays\");\r\n\r\n            this.module.addIdentifierPosition(node.position, element);\r\n\r\n            return {\r\n                type: intPrimitiveType,\r\n                isAssignable: false\r\n            }\r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\n    pushThisOrSuper(node: ThisNode | SuperNode, isSuper: boolean): StackType {\r\n\r\n        let classContext = this.currentSymbolTable.classContext;\r\n\r\n        if (isSuper && classContext != null) {\r\n            classContext = classContext.baseClass;\r\n        }\r\n\r\n        let methodContext = this.currentSymbolTable.method;\r\n\r\n        if (classContext == null || methodContext == null) {\r\n            this.pushError(\"Das Objekt \" + (isSuper ? \"super\" : \"this\") + \" existiert nur innerhalb einer Methodendeklaration.\", node.position);\r\n            return null;\r\n        } else {\r\n            this.pushStatements({\r\n                type: TokenType.pushLocalVariableToStack,\r\n                position: node.position,\r\n                stackposOfVariable: 0\r\n            })\r\n\r\n            this.pushTypePosition(node.position, classContext);\r\n            return { type: classContext, isAssignable: false, isSuper: isSuper };\r\n        }\r\n\r\n    }\r\n\r\n    superconstructorCall(node: SuperconstructorCallNode): StackType {\r\n\r\n        let classContext = this.currentSymbolTable.classContext;\r\n\r\n        if (classContext?.baseClass == null || classContext.baseClass.identifier == \"Object\") {\r\n            this.pushError(\"Die Klasse ist nur Kindklasse der Klasse Object, daher ist der Aufruf des Superkonstruktors nicht möglich.\", node.position);\r\n        }\r\n\r\n        let methodContext = this.currentSymbolTable.method;\r\n\r\n        if (classContext == null || methodContext == null || !methodContext.isConstructor) {\r\n            this.pushError(\"Ein Aufruf des Superkonstructors ist nur innerhalb des Konstruktors einer Klasse möglich.\", node.position);\r\n            return null;\r\n        }\r\n\r\n        let superclassType: Klass = <Klass>classContext.baseClass;\r\n        if (superclassType instanceof StaticClass) {\r\n            this.pushError(\"Statische Methoden haben keine super-Methoden.\", node.position);\r\n            return { type: null, isAssignable: false };\r\n        }\r\n        if (superclassType == null) superclassType = <Klass>this.moduleStore.getType(\"Object\").type;\r\n\r\n        // Push this-object to stack:\r\n        this.pushStatements({\r\n            type: TokenType.pushLocalVariableToStack,\r\n            position: node.position,\r\n            stackposOfVariable: 0\r\n        });\r\n\r\n        let parameterTypes: Type[] = [];\r\n\r\n        if (node.operands != null) {\r\n            let errorInOperands: boolean = false;\r\n            for (let p of node.operands) {\r\n                let pt = this.processNode(p);\r\n                if (pt != null) {\r\n                    parameterTypes.push(pt.type);\r\n                } else {\r\n                    errorInOperands = true;\r\n                }\r\n            }\r\n            if (errorInOperands) {\r\n                return { type: stringPrimitiveType, isAssignable: false }; // try to continue...\r\n            }\r\n        }\r\n\r\n        let methods = superclassType.getConstructor(parameterTypes, Visibility.protected);\r\n\r\n        this.module.pushMethodCallPosition(node.position, node.commaPositions, superclassType.getMethods(Visibility.protected, superclassType.identifier),\r\n            node.rightBracketPosition);\r\n\r\n        if (methods.error != null) {\r\n            this.pushError(methods.error, node.position);\r\n            return { type: stringPrimitiveType, isAssignable: false }; // try to continue...\r\n        }\r\n\r\n        let method = methods.methodList[0];\r\n\r\n        this.pushUsagePosition(node.position, method);\r\n\r\n        this.pushStatements({\r\n            type: TokenType.callMethod,\r\n            method: method,\r\n            isSuperCall: true,\r\n            position: node.position,\r\n            stackframeBegin: -(parameterTypes.length + 1) // this-object followed by parameters\r\n        });\r\n        // Pabst, 21.10.2020:\r\n        // super method is constructor => returns nothing even iv method.getReturnType() is class object\r\n        // return { type: method.getReturnType(), isAssignable: false };\r\n        return { type: null, isAssignable: false };\r\n\r\n    }\r\n\r\n    incrementDecrementBeforeOrAfter(node: IncrementDecrementNode): StackType {\r\n        let type = this.processNode(node.operand);\r\n\r\n        if (type == null) return;\r\n\r\n        if (!type.isAssignable) {\r\n            this.pushError(\"Die Operatoren ++ und -- können nur auf Variablen angewendet werden, nicht auf konstante Werte oder Rückgabewerte von Methoden.\", node.position);\r\n            return type;\r\n        }\r\n\r\n        if (!type.type.canCastTo(floatPrimitiveType)) {\r\n            this.pushError(\"Die Operatoren ++ und -- können nur auf Zahlen angewendet werden, nicht auf Werte des Datentyps \" + type.type.identifier, node.position);\r\n            return type;\r\n        }\r\n\r\n        this.pushStatements({\r\n            type: node.type,\r\n            position: node.position,\r\n            incrementDecrementBy: node.operator == TokenType.doubleMinus ? - 1 : 1\r\n\r\n        });\r\n\r\n        return type;\r\n\r\n    }\r\n\r\n    selectArrayElement(node: SelectArrayElementNode): StackType {\r\n\r\n        let arrayType = this.processNode(node.object); // push array-object \r\n        let indexType = this.processNode(node.index); // push index\r\n\r\n        if (arrayType == null || indexType == null) return;\r\n\r\n        if (!(arrayType.type instanceof ArrayType)) {\r\n            this.pushError(\"Der Typ der Variablen ist kein Array, daher ist [] nicht zulässig. \", node.object.position);\r\n            return null;\r\n        }\r\n\r\n        this.module.addIdentifierPosition({\r\n            line: node.position.line,\r\n            column: node.position.column + node.position.length,\r\n            length: 0  // Module.getTypeAtPosition needs length == 0 here to know that this type-position is not in static context for code completion\r\n        }, arrayType.type.arrayOfType);\r\n\r\n        if (!this.ensureAutomaticCasting(indexType.type, intPrimitiveType)) {\r\n            this.pushError(\"Als Index eines Arrays wird ein ganzzahliger Wert erwartet. Gefunden wurde ein Wert vom Typ \" + indexType.type.identifier + \".\", node.index.position);\r\n            return { type: (<ArrayType>arrayType.type).arrayOfType, isAssignable: arrayType.isAssignable };\r\n        }\r\n\r\n\r\n        this.pushStatements({\r\n            type: TokenType.selectArrayElement,\r\n            position: node.position\r\n        })\r\n\r\n        return { type: (<ArrayType>arrayType.type).arrayOfType, isAssignable: arrayType.isAssignable };\r\n\r\n    }\r\n\r\n    pushTypePosition(position: TextPosition, type: Type) {\r\n        if (position == null) return;\r\n        if (position.length > 0) {\r\n            position = {\r\n                line: position.line,\r\n                column: position.column + position.length,\r\n                length: 0\r\n            }\r\n        }\r\n        this.module.addIdentifierPosition(position, type);\r\n    }\r\n\r\n\r\n\r\n    pushUsagePosition(position: TextPosition, element: Klass | Interface | Method | Attribute | Variable) {\r\n\r\n        this.module.addIdentifierPosition(position, element);\r\n\r\n        if (element instanceof PrimitiveType) {\r\n            return;\r\n        }\r\n\r\n        let positionList: TextPosition[] = element.usagePositions.get(this.module);\r\n        if (positionList == null) {\r\n            positionList = [];\r\n            element.usagePositions.set(this.module, positionList);\r\n        }\r\n\r\n        positionList.push(position);\r\n\r\n    }\r\n\r\n    resolveIdentifier(node: IdentifierNode): StackType {\r\n\r\n        if (node.identifier == null) return null;\r\n\r\n        let variable = this.findLocalVariable(node.identifier);\r\n        if (variable != null) {\r\n            this.pushStatements({\r\n                type: TokenType.pushLocalVariableToStack,\r\n                position: node.position,\r\n                stackposOfVariable: variable.stackPos\r\n            })\r\n\r\n            this.pushUsagePosition(node.position, variable);\r\n            node.variable = variable;\r\n\r\n            return { type: variable.type, isAssignable: !variable.isFinal };\r\n        }\r\n\r\n        if (this.heap != null) {\r\n            let variable = this.heap[node.identifier];\r\n            if (variable != null) {\r\n                this.pushStatements({\r\n                    type: TokenType.pushFromHeapToStack,\r\n                    position: node.position,\r\n                    identifier: node.identifier\r\n                })\r\n\r\n                this.pushUsagePosition(node.position, variable);\r\n                node.variable = variable;\r\n\r\n\r\n                return { type: variable.type, isAssignable: !variable.isFinal };\r\n            }\r\n\r\n        }\r\n\r\n        let attribute = this.findAttribute(node.identifier, node.position);\r\n        if (attribute != null) {\r\n\r\n            if (attribute.isStatic) {\r\n                let cc = this.currentSymbolTable.classContext;\r\n                let scc = (cc instanceof StaticClass) ? cc : cc.staticClass;\r\n                this.pushStatements({\r\n                    type: TokenType.pushStaticAttribute,\r\n                    position: node.position,\r\n                    klass: scc,\r\n                    attributeIdentifier: attribute.identifier\r\n                });\r\n            } else {\r\n                this.pushStatements({\r\n                    type: TokenType.pushAttribute,\r\n                    position: node.position,\r\n                    attributeIdentifier: attribute.identifier,\r\n                    useThisObject: true\r\n                });\r\n            }\r\n\r\n\r\n            this.pushUsagePosition(node.position, attribute);\r\n\r\n            return { type: attribute.type, isAssignable: !attribute.isFinal };\r\n        }\r\n\r\n        let klassModule = this.moduleStore.getType(node.identifier);\r\n        if (klassModule != null) {\r\n            let klass = klassModule.type;\r\n            if (!(klass instanceof Klass || klass instanceof Interface)) {\r\n                this.pushError(\"Der Typ \" + klass.identifier + \" hat keine statischen Attribute/Methoden.\", node.position);\r\n            } else {\r\n                this.pushStatements({\r\n                    type: TokenType.pushStaticClassObject,\r\n                    position: node.position,\r\n                    klass: klass\r\n                });\r\n\r\n                this.pushUsagePosition(node.position, klass);\r\n\r\n                return {\r\n                    type: klass instanceof Klass ? klass.staticClass : klass,\r\n                    isAssignable: false\r\n                }\r\n            }\r\n\r\n            return {\r\n                type: klass,\r\n                isAssignable: false\r\n            }\r\n        }\r\n\r\n        this.pushError(\"Der Bezeichner \" + node.identifier + \" ist hier nicht bekannt.\", node.position);\r\n\r\n    }\r\n\r\n    findLocalVariable(identifier: string): Variable {\r\n        let st = this.currentSymbolTable;\r\n\r\n        while (st != null) {\r\n\r\n            let variable = st.variableMap.get(identifier);\r\n\r\n            if (variable != null && variable.stackPos != null) {\r\n                return variable;\r\n            }\r\n\r\n            st = st.parent;\r\n        }\r\n\r\n        return null;\r\n\r\n    }\r\n\r\n    findAttribute(identifier: string, position: TextPosition): Attribute {\r\n        let classContext = this.currentSymbolTable.classContext;\r\n        if (classContext == null) {\r\n            return null;\r\n        }\r\n\r\n        let attribute = classContext.getAttribute(identifier, Visibility.private);\r\n        if (attribute.attribute != null) return attribute.attribute;\r\n\r\n        if (classContext instanceof Klass) {\r\n            let staticAttribute = classContext.staticClass.getAttribute(identifier, Visibility.private);\r\n            if (staticAttribute.attribute != null) return staticAttribute.attribute;\r\n        }\r\n\r\n        // this.pushError(attribute.error, position);\r\n\r\n        return null;\r\n    }\r\n\r\n    callMethod(node: MethodcallNode): StackType {\r\n\r\n        let objectNode: StackType = null;\r\n\r\n        if (node.object == null) {\r\n\r\n            // call method of this-class?\r\n\r\n            let thisClass = this.currentSymbolTable.classContext;\r\n            if (thisClass != null) {\r\n\r\n                this.pushStatements({\r\n                    type: TokenType.pushLocalVariableToStack,\r\n                    position: node.position,\r\n                    stackposOfVariable: 0\r\n                });\r\n\r\n                objectNode = {\r\n                    type: thisClass,\r\n                    isAssignable: false\r\n                }\r\n\r\n            } else {\r\n                this.pushError(\"Ein Methodenaufruf (hier: \" + node.identifier +\r\n                    \") ohne Punktschreibweise ist nur innerhalb anderer Methoden möglich.\", node.position);\r\n                return null;\r\n            }\r\n\r\n        } else {\r\n            objectNode = this.processNode(node.object);\r\n        }\r\n\r\n        if (objectNode == null) return null;\r\n\r\n        if (!(\r\n            (objectNode.type instanceof Klass) || (objectNode.type instanceof StaticClass) ||\r\n            (objectNode.type instanceof Interface) || (objectNode.type instanceof Enum))) {\r\n\r\n            if (objectNode.type == null) {\r\n                this.pushError(\"Werte dieses Datentyps besitzen keine Methoden.\", node.position);\r\n            } else {\r\n                this.pushError('Werte des Datentyps ' + objectNode.type.identifier + \" besitzen keine Methoden.\", node.position);\r\n            }\r\n\r\n            return null;\r\n        }\r\n\r\n        let objectType: Klass | StaticClass | Interface = <any>objectNode.type;\r\n\r\n        let posBeforeParameterEvaluation = this.currentProgram.statements.length;\r\n\r\n        let parameterTypes: Type[] = [];\r\n        let parameterStatements: Statement[][] = [];\r\n\r\n        let allStatements = this.currentProgram.statements;\r\n        if (node.operands != null) {\r\n            for (let p of node.operands) {\r\n                let programPointer = allStatements.length;\r\n                let typeNode = this.processNode(p);\r\n                parameterStatements.push(allStatements.splice(programPointer, allStatements.length - programPointer));\r\n                if (typeNode == null) {\r\n                    parameterTypes.push(voidPrimitiveType);\r\n                } else {\r\n                    parameterTypes.push(typeNode.type);\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        let methods: { error: string, methodList: Method[] };\r\n        if (objectType instanceof Interface) {\r\n            methods = objectType.getMethodsThatFitWithCasting(node.identifier,\r\n                parameterTypes, false);\r\n        } else {\r\n            let upToVisibility = getVisibilityUpTo(objectType, this.currentSymbolTable.classContext);\r\n\r\n            methods = objectType.getMethodsThatFitWithCasting(node.identifier,\r\n                parameterTypes, false, upToVisibility);\r\n\r\n        }\r\n\r\n        this.module.pushMethodCallPosition(node.position, node.commaPositions, objectType.getMethods(Visibility.private, node.identifier), node.rightBracketPosition);\r\n\r\n        if (methods.error != null) {\r\n            this.pushError(methods.error, node.position);\r\n            return { type: stringPrimitiveType, isAssignable: false }; // try to continue...\r\n        }\r\n\r\n        let method = methods.methodList[0];\r\n\r\n        this.pushUsagePosition(node.position, method);\r\n\r\n        // You CAN call a static method on a object..., so:\r\n        if (method.isStatic && objectType instanceof Klass && objectType.identifier != \"PrintStream\") {\r\n            this.pushError(\"Es ist kein guter Programmierstil, statische Methoden einer Klasse mithilfe eines Objekts aufzurufen. Besser wäre hier \" + objectType.identifier + \".\" + method.identifier + \"(...).\", node.position, \"info\");\r\n            this.insertStatements(posBeforeParameterEvaluation, [{\r\n                type: TokenType.decreaseStackpointer,\r\n                position: node.position,\r\n                popCount: 1\r\n            },\r\n            {\r\n                type: TokenType.pushStaticClassObject,\r\n                position: node.position,\r\n                klass: objectType\r\n            }\r\n            ]);\r\n        }\r\n\r\n        let destType: Type = null;\r\n        for (let i = 0; i < parameterTypes.length; i++) {\r\n            if (i < method.getParameterCount()) {  // possible ellipsis!\r\n                destType = method.getParameterType(i);\r\n                if (i == method.getParameterCount() - 1 && method.hasEllipsis()) {\r\n                    destType = (<ArrayType>destType).arrayOfType;\r\n                }\r\n            }\r\n            let srcType = parameterTypes[i];\r\n            for (let st of parameterStatements[i]) {\r\n                this.currentProgram.statements.push(st);\r\n            }\r\n            if (!this.ensureAutomaticCasting(srcType, destType, node.operands[i].position, node.operands[i])) {\r\n                this.pushError(\"Der Wert vom Datentyp \" + srcType.identifier + \" kann nicht als Parameter (Datentyp \" + destType.identifier + \") verwendet werden.\", node.operands[i].position);\r\n            }\r\n\r\n            // if (srcType instanceof PrimitiveType && destType instanceof PrimitiveType) {\r\n            //     if (srcType.getCastInformation(destType).needsStatement) {\r\n            //         this.pushStatements({\r\n            //             type: TokenType.castValue,\r\n            //             position: null,\r\n            //             newType: destType,\r\n            //             stackPosRelative: -parameterTypes.length + 1 + i\r\n            //         });\r\n            //     }\r\n            // }\r\n\r\n        }\r\n\r\n        let stackframeDelta = 0;\r\n        if (method.hasEllipsis()) {\r\n            let ellipsisParameterCount = parameterTypes.length - method.getParameterCount() + 1; // last parameter and subsequent ones\r\n            stackframeDelta = - (ellipsisParameterCount - 1);\r\n            this.pushStatements({\r\n                type: TokenType.makeEllipsisArray,\r\n                position: node.operands[method.getParameterCount() - 1].position,\r\n                parameterCount: ellipsisParameterCount,\r\n                stepFinished: false,\r\n                arrayType: method.getParameter(method.getParameterCount() - 1).type\r\n            })\r\n        }\r\n\r\n        if (method.visibility != Visibility.public) {\r\n\r\n            let visible = true;\r\n            let classContext = this.currentSymbolTable.classContext;\r\n            if (classContext == null) {\r\n                visible = false;\r\n            } else {\r\n                if (classContext != objectType &&\r\n                    !(classContext instanceof Klass && classContext.implements.indexOf(<Interface>objectType) > 0)) {\r\n                    if (method.visibility == Visibility.private) {\r\n                        visible = false;\r\n                    } else {\r\n                        visible = classContext.hasAncestorOrIs(<Klass | StaticClass>objectType);\r\n                    }\r\n                }\r\n            }\r\n            if (!visible) {\r\n                this.pushError(\"Die Methode \" + method.identifier + \" ist an dieser Stelle des Programms nicht sichtbar.\", node.position);\r\n            }\r\n        }\r\n\r\n        if (method.isStatic && objectNode.type != null &&\r\n            (objectNode.type instanceof StaticClass) &&\r\n            (objectNode.type.Klass instanceof InputClass)) {\r\n\r\n            this.pushStatements({\r\n                type: TokenType.callInputMethod,\r\n                method: method,\r\n                position: node.position,\r\n                stepFinished: true,\r\n                stackframeBegin: -(parameterTypes.length + 1) // this-object followed by parameters\r\n            });\r\n\r\n        } else {\r\n            this.pushStatements({\r\n                type: TokenType.callMethod,\r\n                method: method,\r\n                position: node.position,\r\n                isSuperCall: objectNode.isSuper == null ? false : objectNode.isSuper,\r\n                stepFinished: true,\r\n                stackframeBegin: -(parameterTypes.length + 1 + stackframeDelta) // this-object followed by parameters\r\n            });\r\n        }\r\n\r\n\r\n\r\n        this.pushTypePosition(node.rightBracketPosition, method.getReturnType());\r\n\r\n        return { type: method.getReturnType(), isAssignable: false };\r\n\r\n    }\r\n\r\n    pushConstant(node: ConstantNode): StackType {\r\n\r\n        let type: Type;\r\n\r\n        switch (node.constantType) {\r\n            case TokenType.integerConstant:\r\n                type = intPrimitiveType;\r\n                break;\r\n            case TokenType.booleanConstant:\r\n                type = booleanPrimitiveType;\r\n                break;\r\n            case TokenType.floatingPointConstant:\r\n                type = floatPrimitiveType;\r\n                break;\r\n            case TokenType.stringConstant:\r\n                type = stringPrimitiveType;\r\n                this.pushTypePosition(node.position, type);\r\n                break;\r\n            case TokenType.charConstant:\r\n                type = charPrimitiveType;\r\n                break;\r\n            case TokenType.keywordNull:\r\n                type = nullType\r\n                break;\r\n        }\r\n\r\n        this.pushStatements({\r\n            type: TokenType.pushConstant,\r\n            dataType: type,\r\n            position: node.position,\r\n            value: node.constant\r\n        })\r\n\r\n        return { type: type, isAssignable: false };\r\n\r\n    }\r\n\r\n    processBinaryOp(node: BinaryOpNode): StackType {\r\n\r\n        let isAssignment = CodeGenerator.assignmentOperators.indexOf(node.operator) >= 0;\r\n\r\n        if (node.operator == TokenType.ternaryOperator) {\r\n            return this.processTernaryOperator(node);\r\n        }\r\n\r\n        let leftType = this.processNode(node.firstOperand, isAssignment);\r\n\r\n        let programPosAfterLeftOpoerand = this.currentProgram.statements.length;\r\n\r\n        let lazyEvaluationDest = null;\r\n        if (node.operator == TokenType.and) {\r\n            lazyEvaluationDest = this.currentProgram.labelManager.insertJumpNode(TokenType.jumpIfFalseAndLeaveOnStack, node.firstOperand.position, this);\r\n        } else if (node.operator == TokenType.or) {\r\n            lazyEvaluationDest = this.currentProgram.labelManager.insertJumpNode(TokenType.jumpIfTrueAndLeaveOnStack, node.firstOperand.position, this);\r\n        }\r\n\r\n        let rightType = this.processNode(node.secondOperand);\r\n\r\n        if (leftType == null || leftType.type == null || rightType == null || rightType.type == null) return null;\r\n\r\n        if (isAssignment) {\r\n            if (!this.ensureAutomaticCasting(rightType.type, leftType.type, node.position, node.firstOperand)) {\r\n                this.pushError(\"Der Wert vom Datentyp \" + rightType.type.identifier + \" auf der rechten Seite kann der Variablen auf der linken Seite (Datentyp \" + leftType.type.identifier + \") nicht zugewiesen werden.\", node.position);\r\n                return leftType;\r\n            }\r\n\r\n            if (!leftType.isAssignable) {\r\n                this.pushError(\"Dem Term/der Variablen auf der linken Seite des Zuweisungsoperators (=) kann kein Wert zugewiesen werden.\", node.position);\r\n            }\r\n\r\n            let statement: AssignmentStatement = {\r\n                //@ts-ignore\r\n                type: node.operator,\r\n                position: node.position,\r\n                stepFinished: true,\r\n                leaveValueOnStack: true\r\n            };\r\n\r\n            this.pushStatements(statement);\r\n\r\n\r\n            return leftType;\r\n\r\n        } else {\r\n\r\n            if (node.firstOperand.type == TokenType.identifier && node.firstOperand.variable != null) {\r\n                let v = node.firstOperand.variable;\r\n                if (v.initialized != null && !v.initialized) {\r\n                    v.usedBeforeInitialization = true;\r\n                    this.pushError(\"Die Variable \" + v.identifier + \" wird hier benutzt bevor sie initialisiert wurde.\", node.position, \"info\");\r\n                }\r\n            }\r\n\r\n            let resultType = leftType.type.getResultType(node.operator, rightType.type);\r\n\r\n            let unboxableLeft = leftType.type[\"unboxableAs\"];\r\n            let unboxableRight = rightType.type[\"unboxableAs\"];\r\n\r\n            if (resultType == null && (unboxableLeft != null || unboxableRight != null)) {\r\n                let leftTypes: Type[] = unboxableLeft == null ? [leftType.type] : unboxableLeft;\r\n                let rightTypes: Type[] = unboxableRight == null ? [rightType.type] : unboxableRight;\r\n\r\n                for (let lt of leftTypes) {\r\n                    for (let rt of rightTypes) {\r\n                        resultType = lt.getResultType(node.operator, rt);\r\n                        if (resultType != null) {\r\n                            leftType.type = lt;\r\n                            rightType.type = rt;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (resultType != null) break;\r\n                }\r\n            }\r\n\r\n            // Situation Object + String: insert toString()-Method\r\n            if (resultType == null && node.operator == TokenType.plus) {\r\n                if (leftType.type instanceof Klass && rightType.type == stringPrimitiveType) {\r\n                    this.insertStatements(programPosAfterLeftOpoerand, this.getToStringStatement(leftType.type, node.firstOperand.position));\r\n                    resultType = stringPrimitiveType;\r\n                } else if (rightType.type instanceof Klass && leftType.type == stringPrimitiveType) {\r\n                    this.pushStatements(this.getToStringStatement(rightType.type, node.firstOperand.position));\r\n                    resultType = stringPrimitiveType;\r\n                }\r\n            }\r\n\r\n\r\n            if (node.operator in [TokenType.and, TokenType.or]) {\r\n                this.checkIfAssignmentInstedOfEqual(node.firstOperand);\r\n                this.checkIfAssignmentInstedOfEqual(node.secondOperand);\r\n            }\r\n\r\n            if (resultType == null) {\r\n                this.pushError(\"Die Operation \" + TokenTypeReadable[node.operator] + \" ist für die Operanden der Typen \" + leftType.type.identifier + \" und \" + rightType.type.identifier + \" nicht definiert.\", node.position);\r\n                return leftType;\r\n            }\r\n\r\n\r\n            this.pushStatements({\r\n                type: TokenType.binaryOp,\r\n                leftType: leftType.type,\r\n                operator: node.operator,\r\n                position: node.position\r\n            });\r\n\r\n            if (lazyEvaluationDest != null) {\r\n                this.currentProgram.labelManager.markJumpDestination(1, lazyEvaluationDest);\r\n            }\r\n\r\n            return { type: resultType, isAssignable: false };\r\n        }\r\n\r\n\r\n    }\r\n\r\n    processTernaryOperator(node: BinaryOpNode): StackType {\r\n\r\n        let leftType = this.processNode(node.firstOperand);\r\n\r\n        if (leftType == null) return;\r\n\r\n        if (this.ensureAutomaticCasting(leftType.type, booleanPrimitiveType, null, node.firstOperand)) {\r\n\r\n            let secondOperand = node.secondOperand;\r\n            if (secondOperand != null) {\r\n                if (secondOperand.type != TokenType.binaryOp || secondOperand.operator != TokenType.colon) {\r\n                    this.pushError(\"Auf den Fragezeichenoperator müssen - mit Doppelpunkt getrennt - zwei Alternativterme folgen.\", node.position);\r\n                } else {\r\n                    let lm = this.currentProgram.labelManager;\r\n                    let variantFalseLabel = lm.insertJumpNode(TokenType.jumpIfFalse, node.position, this);\r\n                    let firstType = this.processNode(secondOperand.firstOperand);\r\n                    let endLabel = lm.insertJumpNode(TokenType.jumpAlways, secondOperand.firstOperand.position, this);\r\n                    lm.markJumpDestination(1, variantFalseLabel);\r\n                    let secondType = this.processNode(secondOperand.secondOperand);\r\n                    lm.markJumpDestination(1, endLabel);\r\n\r\n                    let type = firstType.type;\r\n                    if (type != secondType.type && type.canCastTo(secondType.type)) {\r\n                        type = secondType.type;\r\n                    }\r\n\r\n                    return {\r\n                        type: type,\r\n                        isAssignable: false\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    processUnaryOp(node: UnaryOpNode): StackType {\r\n        let leftType = this.processNode(node.operand);\r\n\r\n        if (leftType == null || leftType.type == null) return;\r\n\r\n        if (node.operator == TokenType.minus) {\r\n            if (!leftType.type.canCastTo(floatPrimitiveType)) {\r\n                this.pushError(\"Der Operator - ist für den Typ \" + leftType.type.identifier + \" nicht definiert.\", node.position);\r\n                return leftType;\r\n            }\r\n\r\n        }\r\n\r\n        if (node.operator == TokenType.not) {\r\n            if (!(leftType.type == booleanPrimitiveType)) {\r\n                this.checkIfAssignmentInstedOfEqual(node.operand);\r\n                this.pushError(\"Der Operator ! ist für den Typ \" + leftType.type.identifier + \" nicht definiert.\", node.position);\r\n                return leftType;\r\n            }\r\n\r\n        }\r\n\r\n        this.pushStatements({\r\n            type: TokenType.unaryOp,\r\n            operator: node.operator,\r\n            position: node.position\r\n        });\r\n\r\n        return leftType;\r\n    }\r\n\r\n}","import { Error, QuickFix, ErrorLevel } from \"../lexer/Lexer.js\";\r\nimport { TextPosition, Token, TokenList, TokenType, TokenTypeReadable } from \"../lexer/Token.js\";\r\nimport { Visibility, Klass } from \"../types/Class.js\";\r\nimport { ArrayInitializationNode, ASTNode, AttributeDeclarationNode, MethodDeclarationNode, NewArrayNode, ParameterNode, TermNode, TypeNode, EnumValueNode, SwitchNode, SwitchCaseNode, ConstantNode, BracketsNode, ScopeNode, TypeParameterNode, LocalVariableDeclarationNode } from \"./AST.js\";\r\nimport { Module } from \"./Module.js\";\r\nimport { stringPrimitiveType, intPrimitiveType, charPrimitiveType, TokenTypeToDataTypeMap } from \"../types/PrimitiveTypes.js\";\r\nimport { Enum } from \"../types/Enum.js\";\r\nimport { PrimitiveType } from \"../types/Types.js\";\r\n\r\ntype ASTNodes = ASTNode[];\r\n\r\nexport class Parser {\r\n\r\n    static assignmentOperators = [TokenType.assignment, TokenType.plusAssignment, TokenType.minusAssignment, TokenType.multiplicationAssignment, TokenType.divisionAssignment, TokenType.moduloAssignment];\r\n\r\n    static operatorPrecedence: TokenType[][] = [Parser.assignmentOperators,\r\n    [TokenType.ternaryOperator], [TokenType.colon],\r\n    [TokenType.or], [TokenType.and],\r\n    [TokenType.keywordInstanceof, TokenType.lower, TokenType.lowerOrEqual, TokenType.greater, TokenType.greaterOrEqual, TokenType.equal, TokenType.notEqual],\r\n    [TokenType.plus, TokenType.minus], [TokenType.multiplication, TokenType.division, TokenType.modulo]\r\n    ];\r\n\r\n    static TokenTypeToVisibilityMap = {\r\n        [TokenType.keywordPublic]: Visibility.public,\r\n        [TokenType.keywordPrivate]: Visibility.private,\r\n        [TokenType.keywordProtected]: Visibility.protected\r\n    };\r\n\r\n    static forwardToInsideClass = [TokenType.keywordPublic, TokenType.keywordPrivate, TokenType.keywordProtected, TokenType.keywordVoid,\r\n    TokenType.identifier, TokenType.rightCurlyBracket, TokenType.keywordStatic, TokenType.keywordAbstract,\r\n    TokenType.keywordClass, TokenType.keywordEnum, TokenType.keywordInterface];\r\n\r\n    module: Module;\r\n\r\n    pos: number;\r\n    tokenList: TokenList;\r\n\r\n    errorList: Error[];\r\n    typeNodes: TypeNode[];\r\n\r\n    lookahead = 4;\r\n    ct: Token[];\r\n    lastToken: Token;\r\n    cct: Token;\r\n    tt: TokenType;\r\n    position: TextPosition;\r\n    lastComment: Token;\r\n\r\n    endToken: Token = {\r\n        position: { line: 0, column: 0, length: 1 },\r\n        tt: TokenType.endofSourcecode,\r\n        value: \"das Ende des Programms\"\r\n    };\r\n\r\n\r\n    constructor(private isInConsoleMode: boolean){\r\n\r\n    }\r\n\r\n    parse(m: Module) {\r\n\r\n        this.module = m;\r\n\r\n        this.tokenList = m.tokenList;\r\n        this.errorList = [];\r\n\r\n        if (this.tokenList.length == 0) {\r\n            this.module.mainProgramAst = [];\r\n            this.module.classDefinitionsAST = [];\r\n            this.module.typeNodes = [];\r\n            this.module.errors[1] = this.errorList;\r\n            return;\r\n        }\r\n\r\n        this.pos = 0;\r\n        this.initializeLookahead();\r\n\r\n        this.typeNodes = [];\r\n\r\n        let lastToken = this.tokenList[this.tokenList.length - 1];\r\n        this.endToken.position = { line: lastToken.position.line, column: lastToken.position.column + lastToken.position.length, length: 1 };\r\n\r\n        let astNodes = this.parseMain();\r\n        this.module.mainProgramAst = astNodes.mainProgramAST;\r\n        this.module.classDefinitionsAST = astNodes.classDefinitionAST;\r\n        this.module.mainProgramEnd = astNodes.mainProgramEnd;\r\n        this.module.typeNodes = this.typeNodes;\r\n\r\n        this.module.errors[1] = this.errorList;\r\n\r\n    }\r\n\r\n    initializeLookahead() {\r\n\r\n        this.ct = [];\r\n\r\n        for (let i = 0; i < this.lookahead; i++) {\r\n\r\n            let token: Token = this.endToken;\r\n\r\n            while (true) {\r\n\r\n                if (this.pos >= this.tokenList.length) break;\r\n\r\n                let token1 = this.tokenList[this.pos]\r\n                if(token1.tt == TokenType.comment){\r\n                    this.lastComment = token1;\r\n                } \r\n\r\n                if (token1.tt != TokenType.newline && token1.tt != TokenType.space && token1.tt != TokenType.comment) {\r\n                    token = token1;\r\n                    if(this.lastComment != null){\r\n                        token.commentBefore = this.lastComment;\r\n                        this.lastComment = null;\r\n                    }\r\n                    break;\r\n                }\r\n\r\n                this.pos++;\r\n\r\n            }\r\n\r\n            this.ct.push(token);\r\n\r\n            if (i < this.lookahead - 1) {\r\n                this.pos++;\r\n            }\r\n\r\n        }\r\n\r\n        this.cct = this.ct[0];\r\n        this.tt = this.cct.tt;\r\n        this.position = this.cct.position;\r\n\r\n    }\r\n\r\n    nextToken() {\r\n\r\n        let token: Token;\r\n        this.lastToken = this.cct;\r\n\r\n        while (true) {\r\n\r\n            this.pos++;\r\n\r\n            if (this.pos >= this.tokenList.length) {\r\n                token = this.endToken;\r\n                break;\r\n            }\r\n\r\n            token = this.tokenList[this.pos]\r\n            if(token.tt == TokenType.comment){\r\n                this.lastComment = token;\r\n            } \r\n\r\n            if (token.tt != TokenType.newline && token.tt != TokenType.space && token.tt != TokenType.comment) {\r\n                token.commentBefore = this.lastComment;\r\n                this.lastComment = null;\r\n                break;\r\n            }\r\n\r\n        }\r\n\r\n        for (let i = 0; i < this.lookahead - 1; i++) {\r\n            this.ct[i] = this.ct[i + 1];\r\n        }\r\n\r\n        this.ct[this.lookahead - 1] = token;\r\n\r\n        this.cct = this.ct[0];\r\n        this.tt = this.cct.tt;\r\n        this.position = this.cct.position;\r\n\r\n    }\r\n\r\n    pushError(text: string, errorLevel: ErrorLevel = \"error\", position?: TextPosition, quickFix?: QuickFix) {\r\n        if (position == null) position = Object.assign({}, this.position);\r\n        this.errorList.push({\r\n            text: text,\r\n            position: position,\r\n            quickFix: quickFix,\r\n            level: errorLevel\r\n        });\r\n    }\r\n\r\n    expect(tt: TokenType, skip: boolean = true, invokeSemicolonAngel: boolean = false): boolean {\r\n        if (this.tt != tt) {\r\n            if (tt == TokenType.semicolon && this.tt == TokenType.endofSourcecode) {\r\n                return true;\r\n            }\r\n\r\n            let position: TextPosition = this.cct.position;\r\n            if (tt == TokenType.semicolon && this.lastToken != null) {\r\n\r\n                if (this.lastToken.position.line < position.line) {\r\n                    position = {\r\n                        line: this.lastToken.position.line,\r\n                        column: this.lastToken.position.column + this.lastToken.position.length,\r\n                        length: 1\r\n                    }\r\n                }\r\n            }\r\n\r\n            let quickFix: QuickFix = null;\r\n            if (tt == TokenType.semicolon && this.lastToken.position.line < this.cct.position.line &&\r\n                !this.isOperatorOrDot(this.lastToken.tt) \r\n            ) {\r\n                quickFix = {\r\n                    title: 'Strichpunkt hier einfügen',\r\n                    editsProvider: (uri) => {\r\n                        return [{\r\n                            resource: uri,\r\n                            edit: {\r\n                                range: {\r\n                                    startLineNumber: position.line, startColumn: position.column, endLineNumber: position.line, endColumn: position.column,\r\n                                    message: \"\",\r\n                                    severity: monaco.MarkerSeverity.Error\r\n                                },\r\n                                text: \";\"\r\n                            }\r\n                        }\r\n                        ];\r\n                    }\r\n                }\r\n\r\n                if (invokeSemicolonAngel) {\r\n                    this.module.main.getSemicolonAngel().register(position, this.module);\r\n                }\r\n            }\r\n\r\n\r\n            this.pushError(\"Erwartet wird: \" + TokenTypeReadable[tt] + \" - Gefunden wurde: \" + TokenTypeReadable[this.tt], \"error\", position, quickFix);\r\n            return false;\r\n        }\r\n\r\n        if (skip) {\r\n            this.nextToken();\r\n        }\r\n\r\n        return true;\r\n    }\r\n    isOperatorOrDot(tt: TokenType): boolean {\r\n        if (tt == TokenType.dot) return true;\r\n        for (let op of Parser.operatorPrecedence) {\r\n            for (let operator of op) {\r\n                if (tt == operator) return true;\r\n            }\r\n        }\r\n    }\r\n\r\n    isEnd(): boolean {\r\n        return this.cct == this.endToken;\r\n    }\r\n\r\n    comesToken(token: TokenType | TokenType[]): boolean {\r\n\r\n        if (!Array.isArray(token)) {\r\n            return this.tt == token;\r\n        }\r\n\r\n        return token.indexOf(this.tt) >= 0;\r\n\r\n    }\r\n\r\n    getCurrentPosition(): TextPosition {\r\n        return Object.assign({}, this.position);\r\n    }\r\n\r\n    getEndOfCurrentToken(): TextPosition {\r\n\r\n        let position = this.getCurrentPosition();\r\n        position.column = position.column + this.position.length;\r\n        position.length = 0;\r\n\r\n        return position;\r\n    }\r\n\r\n    static ClassTokens: TokenType[] = [TokenType.keywordClass, TokenType.keywordEnum, TokenType.keywordInterface];\r\n    static VisibilityTokens: TokenType[] = [TokenType.keywordPrivate, TokenType.keywordProtected, TokenType.keywordPublic];\r\n    static BeforeClassDefinitionTokens: TokenType[] = Parser.ClassTokens.concat(Parser.VisibilityTokens).concat(TokenType.keywordAbstract).concat(Parser.ClassTokens);\r\n\r\n    parseMain(): { mainProgramAST: ASTNodes, mainProgramEnd: TextPosition, classDefinitionAST: ASTNodes } {\r\n\r\n        let mainProgram: ASTNodes = [];\r\n        let classDefinitions: ASTNodes = [];\r\n\r\n        let mainProgramEnd: TextPosition = {\r\n            column: 0,\r\n            line: 10000,\r\n            length: 1\r\n        }\r\n\r\n        while (!this.isEnd()) {\r\n\r\n            let oldPos = this.pos;\r\n\r\n            if (this.comesToken(Parser.BeforeClassDefinitionTokens)) {\r\n                let cd = this.parseClassDefinition();\r\n                if (cd != null) classDefinitions = classDefinitions.concat(cd);\r\n            } else {\r\n                let st = this.parseStatement();\r\n\r\n                if (st != null) {\r\n                    mainProgram = mainProgram.concat(st);\r\n                }\r\n                mainProgramEnd = this.getCurrentPosition();\r\n            }\r\n\r\n            // emergency-forward:\r\n            if (this.pos == oldPos) {\r\n                this.pos++;\r\n                this.initializeLookahead();\r\n            }\r\n\r\n        }\r\n\r\n        return {\r\n            mainProgramAST: mainProgram,\r\n            classDefinitionAST: classDefinitions,\r\n            mainProgramEnd: mainProgramEnd\r\n        }\r\n\r\n    }\r\n\r\n\r\n    checkIfStatementHasNoEffekt(st: ASTNode) {\r\n        \r\n        if(this.isInConsoleMode) return;\r\n\r\n        if ((st.type == TokenType.binaryOp && Parser.assignmentOperators.indexOf(st.operator) < 0)) {\r\n            let s = \"dieses Terms\";\r\n            switch (st.operator) {\r\n                case TokenType.plus: s = \"dieser Summe\"; break;\r\n                case TokenType.minus: s = \"dieser Differenz\"; break;\r\n                case TokenType.multiplication: s = \"dieses Produkts\"; break;\r\n                case TokenType.division: s = \"dieses Quotienten\"; break;\r\n            }\r\n            s += \" (Operator \" + TokenTypeReadable[st.operator] + \")\"\r\n            this.pushError(`Der Wert ${s} wird zwar berechnet, aber danach verworfen. Möchtest Du ihn vielleicht einer Variablen zuweisen?`,\r\n                \"info\", st.position);\r\n        } else if (\r\n            [TokenType.unaryOp, TokenType.pushConstant,\r\n            TokenType.identifier, TokenType.selectArrayElement].indexOf(st.type) >= 0) {\r\n            this.pushError(\"Der Wert dieses Terms wird zwar berechnet, aber danach verworfen. Möchtest Du ihn vielleicht einer Variablen zuweisen?\",\r\n                \"info\", st.position);\r\n        }\r\n    }\r\n\r\n    parseStatement(expectSemicolon: boolean = true): ASTNode[] {\r\n\r\n        let retStatements: ASTNode[] = null;\r\n\r\n        switch (this.tt) {\r\n            case TokenType.leftBracket:\r\n            case TokenType.identifier:\r\n            case TokenType.keywordThis:\r\n            case TokenType.keywordSuper:\r\n            case TokenType.keywordFinal:\r\n            case TokenType.charConstant:\r\n            case TokenType.integerConstant:\r\n            case TokenType.stringConstant:\r\n            case TokenType.booleanConstant:\r\n            case TokenType.floatingPointConstant:\r\n            case TokenType.keywordNew:\r\n                let ret = this.parseVariableDeclarationOrTerm();\r\n                if (expectSemicolon) this.expect(TokenType.semicolon, true, true);\r\n                retStatements = ret;\r\n                break;\r\n            case TokenType.leftCurlyBracket:\r\n                let statements: ASTNode[] = [];\r\n                let positionFrom = this.getCurrentPosition();\r\n                this.nextToken();\r\n                //@ts-ignore\r\n                while (this.tt != TokenType.rightCurlyBracket && this.tt != TokenType.endofSourcecode\r\n                    && Parser.BeforeClassDefinitionTokens.indexOf(this.tt) < 0) {\r\n                    statements = statements.concat(this.parseStatement());\r\n                }\r\n                let positionTo = this.getCurrentPosition();\r\n                positionTo.column = positionTo.column + positionTo.length;\r\n                positionTo.length = 0;\r\n                this.expect(TokenType.rightCurlyBracket);\r\n\r\n                retStatements = [{\r\n                    type: TokenType.scopeNode,\r\n                    position: positionFrom,\r\n                    positionTo: positionTo,\r\n                    statements: statements\r\n                }];\r\n                break;\r\n\r\n            case TokenType.keywordWhile:\r\n                retStatements = this.parseWhile();\r\n                break;\r\n            case TokenType.keywordFor:\r\n                retStatements = this.parseFor();\r\n                break;\r\n            case TokenType.keywordDo:\r\n                retStatements = this.parseDo();\r\n                break;\r\n            case TokenType.keywordIf:\r\n                retStatements = this.parseIf();\r\n                break;\r\n            case TokenType.keywordReturn:\r\n                retStatements = this.parseReturn();\r\n                break;\r\n            case TokenType.keywordPrint:\r\n            case TokenType.keywordPrintln:\r\n                retStatements = this.parsePrint();\r\n                break;\r\n            case TokenType.keywordSwitch:\r\n                retStatements = this.parseSwitch();\r\n                break;\r\n            case TokenType.keywordBreak:\r\n                let position = this.getCurrentPosition();\r\n                this.nextToken();\r\n                retStatements = [{\r\n                    type: TokenType.keywordBreak,\r\n                    position: position\r\n                }];\r\n                break;\r\n            case TokenType.keywordContinue:\r\n                let position1 = this.getCurrentPosition();\r\n                this.nextToken();\r\n                retStatements = [{\r\n                    type: TokenType.keywordContinue,\r\n                    position: position1\r\n                }];\r\n                break;\r\n            case TokenType.semicolon:\r\n                break;\r\n            default:\r\n                let s = TokenTypeReadable[this.tt];\r\n                if (s != this.cct.value) s += \"(\" + this.cct.value + \")\";\r\n                s += \" wird hier nicht erwartet.\";\r\n                this.pushError(s);\r\n\r\n                let dontSkip = Parser.BeforeClassDefinitionTokens.indexOf(this.tt) >= 0;\r\n                if (!dontSkip) {\r\n                    this.nextToken();\r\n                }\r\n                break;\r\n        }\r\n\r\n        if(retStatements == null){\r\n            // skip additional semicolons if present...\r\n            while (this.tt == TokenType.semicolon && expectSemicolon) {\r\n                this.nextToken();\r\n            }\r\n        }\r\n\r\n        if(retStatements != null && retStatements.length > 0){\r\n            let retStmt = retStatements[retStatements.length - 1];\r\n            if(retStmt != null){\r\n                this.checkIfStatementHasNoEffekt(retStatements[retStatements.length - 1]);\r\n            } else {\r\n                retStatements = null;\r\n            }\r\n        }\r\n\r\n        return retStatements;\r\n\r\n    }\r\n\r\n    parseReturn(): ASTNode[] {\r\n\r\n        let position = this.getCurrentPosition();\r\n\r\n        this.nextToken();\r\n\r\n        let term: TermNode;\r\n\r\n        if (!(this.tt == TokenType.semicolon)) {\r\n            term = this.parseTerm();\r\n            this.expect(TokenType.semicolon, true, true);\r\n        }\r\n\r\n        return [{\r\n            type: TokenType.keywordReturn,\r\n            position: position,\r\n            term: term\r\n        }];\r\n\r\n    }\r\n\r\n    parseWhile(): ASTNode[] {\r\n\r\n        let position = this.getCurrentPosition();\r\n\r\n        this.nextToken(); // consume while\r\n        let scopeFrom = this.getCurrentPosition();\r\n\r\n        if (this.expect(TokenType.leftBracket, true)) {\r\n            let condition = this.parseTerm();\r\n            let rightBracketPosition  = this.getCurrentPosition();\r\n\r\n            this.module.pushMethodCallPosition(position, [], \"while\", rightBracketPosition);\r\n\r\n            this.expect(TokenType.rightBracket, true);\r\n            if (this.tt == TokenType.semicolon) {\r\n                this.pushError(\"Diese while-loop wiederholt nur den Strichpunkt (leere Anweisung).\", \"warning\");\r\n            }\r\n            let statements = this.parseStatement();\r\n            let scopeTo = this.getCurrentPosition();\r\n            scopeTo.length = 0;\r\n\r\n            if (statements != null && statements.length > 0 && statements[0].type == TokenType.scopeNode) {\r\n                scopeTo = (<ScopeNode>statements[0]).positionTo;\r\n            }\r\n\r\n            return [\r\n                {\r\n                    type: TokenType.keywordWhile,\r\n                    position: position,\r\n                    scopeFrom: scopeFrom,\r\n                    scopeTo: scopeTo,\r\n                    condition: condition,\r\n                    statements: statements\r\n                }\r\n            ];\r\n\r\n        }\r\n\r\n        return [];\r\n\r\n    }\r\n\r\n    parseFor(): ASTNode[] {\r\n\r\n        let position = this.getCurrentPosition();\r\n\r\n        let semicolonPositions: TextPosition[] = [];\r\n\r\n        this.nextToken(); // consume for\r\n\r\n        let scopeFrom = this.getCurrentPosition();\r\n\r\n        if (this.expect(TokenType.leftBracket, true)) {\r\n\r\n            if (this.ct[2].tt == TokenType.colon) {\r\n                return this.parseForLoopOverCollection(position, scopeFrom);\r\n            }\r\n\r\n            let statementsBefore = this.parseStatement(false);\r\n            semicolonPositions.push(this.getCurrentPosition());\r\n            this.expect(TokenType.semicolon);\r\n            let condition = this.parseTerm();\r\n            semicolonPositions.push(this.getCurrentPosition());\r\n            this.expect(TokenType.semicolon, true);\r\n            let statementsAfter = this.parseStatement(false);\r\n\r\n            let rightBracketPosition = this.getCurrentPosition();\r\n            this.expect(TokenType.rightBracket, true);\r\n\r\n            this.module.pushMethodCallPosition(position, semicolonPositions, \"for\", rightBracketPosition);\r\n\r\n            if (this.tt == TokenType.semicolon) {\r\n                this.pushError(\"Diese for-loop wiederholt nur den Strichpunkt (leere Anweisung).\", \"warning\");\r\n            }\r\n\r\n\r\n            let statements = this.parseStatement();\r\n            let scopeTo = this.getCurrentPosition();\r\n            scopeTo.length = 0;\r\n\r\n            if (statements != null && statements.length > 0 && statements[0].type == TokenType.scopeNode) {\r\n                scopeTo = (<ScopeNode>statements[0]).positionTo;\r\n            }\r\n\r\n            if (condition == null) {\r\n                condition = {\r\n                    type: TokenType.pushConstant,\r\n                    position: this.getCurrentPosition(),\r\n                    constantType: TokenType.booleanConstant,\r\n                    constant: true\r\n                }\r\n            }\r\n\r\n            return [\r\n                {\r\n                    type: TokenType.keywordFor,\r\n                    position: position,\r\n                    scopeFrom: scopeFrom,\r\n                    scopeTo: scopeTo,\r\n                    condition: condition,\r\n                    statementsBefore: statementsBefore,\r\n                    statementsAfter: statementsAfter,\r\n                    statements: statements\r\n                }\r\n            ];\r\n\r\n        }\r\n\r\n        return [];\r\n\r\n    }\r\n\r\n    parseForLoopOverCollection(position: TextPosition, scopeFrom: TextPosition): ASTNode[] {\r\n\r\n        let variableType = this.parseType();\r\n\r\n        let variableIdentifier = <string>this.cct.value;\r\n        let variableIdentifierPosition = this.getCurrentPosition();\r\n        this.nextToken();\r\n\r\n        this.expect(TokenType.colon, true);\r\n\r\n        let collection = this.parseTerm();\r\n\r\n        this.expect(TokenType.rightBracket, true);\r\n\r\n        if (this.tt == TokenType.semicolon) {\r\n            this.pushError(\"Diese for-loop wiederholt nur den Strichpunkt (leere Anweisung).\", \"warning\");\r\n        }\r\n\r\n        let statements = this.parseStatement();\r\n        let scopeTo = this.getCurrentPosition();\r\n        scopeTo.length = 0;\r\n\r\n        if (statements != null && statements.length > 0 && statements[0].type == TokenType.scopeNode) {\r\n            scopeTo = (<ScopeNode>statements[0]).positionTo;\r\n        }\r\n\r\n        if (collection == null || variableType == null || statements == null) return [];\r\n\r\n        return [\r\n            {\r\n                type: TokenType.forLoopOverCollection,\r\n                position: position,\r\n                scopeFrom: scopeFrom,\r\n                scopeTo: scopeTo,\r\n                variableIdentifier: variableIdentifier,\r\n                variableType: variableType,\r\n                variablePosition: variableIdentifierPosition,\r\n                collection: collection,\r\n                statements: statements\r\n            }\r\n        ];\r\n\r\n    }\r\n\r\n    parsePrint(): ASTNode[] {\r\n\r\n        let tt = this.tt;\r\n        let position = this.getCurrentPosition();\r\n\r\n        this.nextToken();\r\n\r\n        if (this.expect(TokenType.leftBracket, false)) {\r\n            let mcp = this.parseMethodCallParameters();\r\n            let paramenters = mcp.nodes;\r\n            if (paramenters.length > 2) {\r\n                this.pushError(\"Die Methoden print und println haben maximal zwei Parameter.\", \"error\", position);\r\n            }\r\n\r\n            this.expect(TokenType.semicolon, true, true);\r\n\r\n            return [{\r\n                //@ts-ignore\r\n                type: tt,\r\n                position: position,\r\n                text: paramenters.length == 0 ? null : paramenters[0],\r\n                color: paramenters.length <= 1 ? null : paramenters[1],\r\n                commaPositions: mcp.commaPositions,\r\n                rightBracketPosition: mcp.rightBracketPosition\r\n            }];\r\n        }\r\n\r\n        return null;\r\n\r\n    }\r\n\r\n    parseSwitch(): ASTNode[] {\r\n\r\n        let position = this.getCurrentPosition();\r\n        this.nextToken();\r\n        if (this.expect(TokenType.leftBracket, true)) {\r\n\r\n            let switchTerm = this.parseTerm();\r\n\r\n            this.module.pushMethodCallPosition(position, [], \"switch\", this.getCurrentPosition());\r\n\r\n            this.expect(TokenType.rightBracket);\r\n            let scopeFrom = this.getCurrentPosition();\r\n\r\n            this.expect(TokenType.leftCurlyBracket, true);\r\n\r\n            let switchNode: SwitchNode = {\r\n                type: TokenType.keywordSwitch,\r\n                position: position,\r\n                scopeFrom: scopeFrom,\r\n                scopeTo: null,\r\n                condition: switchTerm,\r\n                caseNodes: []\r\n            }\r\n\r\n            let defaultAlreadyThere = false;\r\n\r\n            while (this.tt == TokenType.keywordCase || this.tt == TokenType.keywordDefault) {\r\n                let casePosition = this.getCurrentPosition();\r\n\r\n                let isDefault = this.tt == TokenType.keywordDefault;\r\n                if (isDefault) {\r\n                    if (defaultAlreadyThere) {\r\n                        this.pushError(\"Eine switch-Anweisung darf nur maximal einen default-Zweig haben.\", \"error\", casePosition);\r\n                    } else {\r\n                        defaultAlreadyThere = true;\r\n                    }\r\n                }\r\n\r\n                this.nextToken();\r\n\r\n                let caseTerm = null;\r\n                if (!isDefault) {\r\n                    caseTerm = this.parseTerm();\r\n                }\r\n\r\n                this.expect(TokenType.colon, true);\r\n\r\n                let statements: ASTNode[] = [];\r\n                //@ts-ignore\r\n                while (this.tt != TokenType.rightCurlyBracket && this.tt != TokenType.endofSourcecode\r\n                    && this.tt != TokenType.keywordCase && this.tt != TokenType.keywordDefault\r\n                ) {\r\n                    let statement = this.parseStatement();\r\n                    if (statement != null) {\r\n                        statements = statements.concat(statement);\r\n                    }\r\n                }\r\n\r\n                let switchCaseNode: SwitchCaseNode = {\r\n                    type: TokenType.keywordCase,\r\n                    position: casePosition,\r\n                    caseTerm: caseTerm,\r\n                    statements: statements\r\n                }\r\n\r\n                switchNode.caseNodes.push(switchCaseNode);\r\n\r\n            }\r\n\r\n            switchNode.scopeTo = this.getEndOfCurrentToken();\r\n            this.expect(TokenType.rightCurlyBracket, true);\r\n\r\n            return [switchNode];\r\n\r\n        }\r\n\r\n        return null;\r\n\r\n    }\r\n\r\n    parseIf(): ASTNode[] {\r\n\r\n        let position = this.getCurrentPosition();\r\n\r\n        this.nextToken(); // consume if\r\n        if (this.expect(TokenType.leftBracket, true)) {\r\n            let condition = this.parseTerm();\r\n            let rightBracketPosition = this.getCurrentPosition();\r\n            this.module.pushMethodCallPosition(position, [], \"if\", rightBracketPosition);\r\n            this.expect(TokenType.rightBracket, true);\r\n\r\n            if (this.tt == TokenType.semicolon) {\r\n                this.pushError(\"Falls die Bedingung zutrifft, wird nur der Strichpunkt ausgeführt (leere Anweisung).\", \"warning\");\r\n            }\r\n\r\n            let statements = this.parseStatement();\r\n\r\n            if (this.tt == TokenType.semicolon) {\r\n                this.nextToken();\r\n            }\r\n\r\n            let elseStatements: ASTNode[] = null;\r\n\r\n            if (this.comesToken(TokenType.keywordElse)) {\r\n                this.nextToken();\r\n                elseStatements = this.parseStatement();\r\n            }\r\n\r\n            if (condition == null && this.errorList.length == 0) {\r\n                condition = {\r\n                    type: TokenType.pushConstant,\r\n                    position: this.getCurrentPosition(),\r\n                    constantType: TokenType.booleanConstant,\r\n                    constant: true\r\n                }\r\n            }\r\n\r\n            return [\r\n                {\r\n                    type: TokenType.keywordIf,\r\n                    position: position,\r\n                    condition: condition,\r\n                    statementsIfTrue: statements,\r\n                    statementsIfFalse: elseStatements\r\n                }\r\n            ];\r\n\r\n        }\r\n\r\n        return [];\r\n\r\n    }\r\n\r\n    parseDo(): ASTNode[] {\r\n\r\n        // let i = 10;\r\n        // do {\r\n        //     i = i +7;\r\n        // } while (i < 100);\r\n\r\n        let position = this.getCurrentPosition();\r\n\r\n        let scopeFrom = this.getCurrentPosition();\r\n        this.nextToken(); // consume do\r\n        let statements = this.parseStatement();\r\n\r\n        if (this.expect(TokenType.keywordWhile, true)) {\r\n            if (this.expect(TokenType.leftBracket, true)) {\r\n                let condition = this.parseTerm();\r\n                let scopeTo = this.getEndOfCurrentToken();\r\n\r\n                this.expect(TokenType.rightBracket, true);\r\n\r\n                return [\r\n                    {\r\n                        type: TokenType.keywordDo,\r\n                        position: position,\r\n                        scopeFrom: scopeFrom,\r\n                        scopeTo: scopeTo,\r\n                        condition: condition,\r\n                        statements: statements\r\n                    }\r\n                ];\r\n\r\n            }\r\n        }\r\n        return [];\r\n\r\n    }\r\n\r\n    comesGenericType(): boolean {\r\n        if (this.ct[1].tt != TokenType.lower) return false;\r\n        if (this.ct[2].tt != TokenType.identifier) return false;\r\n        return this.ct[3].tt == TokenType.greater || this.ct[3].tt == TokenType.comma;\r\n\r\n    }\r\n\r\n    parseVariableDeclarationOrTerm(): ASTNode[] {\r\n\r\n        // Two identifiers in a row or identifier[]\r\n        if (\r\n            (this.tt == TokenType.identifier || this.tt == TokenType.keywordFinal) &&\r\n            (this.ct[1].tt == TokenType.identifier\r\n                || this.ct[1].tt == TokenType.leftRightSquareBracket ||\r\n                this.comesGenericType() \r\n            )\r\n        ) {\r\n            let ret: ASTNode[] = [];\r\n            let type: TypeNode = null;\r\n            do {\r\n                if (type != null) this.expect(TokenType.comma, true);\r\n                let vd = this.parseVariableDeclaration(type);\r\n                ret.push(vd);\r\n                type = vd?.variableType;\r\n                //@ts-ignore\r\n            } while (this.tt == TokenType.comma);\r\n\r\n            return ret;\r\n        } else {\r\n            return [this.parseTerm()];\r\n        }\r\n\r\n    }\r\n\r\n    parseTerm(): TermNode {\r\n        return this.parseTermBinary(0);\r\n    }\r\n\r\n    parseTermBinary(precedence: number): TermNode {\r\n\r\n        let left: TermNode;\r\n        if (precedence < Parser.operatorPrecedence.length - 1) {\r\n            left = this.parseTermBinary(precedence + 1);\r\n        } else {\r\n            left = this.parsePlusPlusMinusMinus();\r\n        }\r\n\r\n        let operators = Parser.operatorPrecedence[precedence];\r\n\r\n        if (left == null || operators.indexOf(this.tt) < 0) {\r\n            return left;\r\n        }\r\n\r\n        let first = true;\r\n\r\n        if (this.tt == TokenType.colon) {\r\n            return left;\r\n        }\r\n\r\n        while (first || operators.indexOf(this.tt) >= 0) {\r\n\r\n            let operator: TokenType = this.tt;\r\n\r\n            first = false;\r\n            let position = this.getCurrentPosition();\r\n\r\n            this.nextToken();\r\n\r\n            for (let opData of [{ op: TokenType.lower, wrong: \"=<\", right: \"<=\", correctOp: TokenType.lowerOrEqual }, \r\n                                { op: TokenType.greater, wrong: \"=>\", right: \">=\", correctOp: TokenType.greaterOrEqual }]) {\r\n                if (operator == TokenType.assignment && this.tt == opData.op) {\r\n                    let position2 = this.getCurrentPosition();\r\n                    this.pushError(`Den Operator ${opData.wrong} gibt es nicht. Du meintest sicher: ${opData.right}`, \"error\",\r\n                        Object.assign({}, position, { length: 2 }), {\r\n                        title: `${opData.wrong} durch ${opData.right} ersetzen`,\r\n                        editsProvider: (uri) => {\r\n                            return [\r\n                                {\r\n                                    resource: uri,\r\n                                    edit: {\r\n                                        range: { startLineNumber: position.line, startColumn: position.column, endLineNumber: position.line, endColumn: position2.column + position2.length },\r\n                                        text: opData.right\r\n                                    }\r\n                                }\r\n                            ]\r\n                        }\r\n                    });\r\n                    this.nextToken();\r\n                    operator = opData.correctOp;\r\n                }\r\n            }\r\n\r\n            let right: TermNode;\r\n            if (precedence < Parser.operatorPrecedence.length - 1) {\r\n                right = this.parseTermBinary(precedence + 1);\r\n            } else {\r\n                right = this.parsePlusPlusMinusMinus();\r\n            }\r\n\r\n            if (right != null) {\r\n\r\n                let constantFolding = false;\r\n                if (this.isConstant(left) && this.isConstant(right)) {\r\n                    let pcLeft = <ConstantNode>left;\r\n                    let pcRight = <ConstantNode>right;\r\n                    let typeLeft = TokenTypeToDataTypeMap[pcLeft.constantType];\r\n                    let typeRight = TokenTypeToDataTypeMap[pcRight.constantType];\r\n                    let resultType = typeLeft.getResultType(operator, typeRight);\r\n                    if (resultType != null) {\r\n                        constantFolding = true;\r\n                        let result = typeLeft.compute(operator, { type: typeLeft, value: pcLeft.constant },\r\n                            { type: typeRight, value: pcRight.constant });\r\n                        pcLeft.constantType = (<PrimitiveType>resultType).toTokenType();\r\n                        pcLeft.constant = result;\r\n                        pcLeft.position.length = pcRight.position.column + pcRight.position.length - pcLeft.position.column;\r\n                    }\r\n                }\r\n\r\n                if (!constantFolding)\r\n                    left = {\r\n                        type: TokenType.binaryOp,\r\n                        position: position,\r\n                        operator: operator,\r\n                        firstOperand: left,\r\n                        secondOperand: right\r\n                    };\r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n        return left;\r\n\r\n    }\r\n\r\n    isConstant(node: TermNode) {\r\n\r\n        return (node != null && node.type == TokenType.pushConstant);\r\n\r\n    }\r\n\r\n    parsePlusPlusMinusMinus(): TermNode {\r\n\r\n        let incrementDecrementBefore: TokenType = null;\r\n        let position = null;\r\n\r\n        if (this.comesToken([TokenType.doublePlus, TokenType.doubleMinus])) {\r\n            incrementDecrementBefore = this.tt;\r\n            position = this.getCurrentPosition();\r\n            this.nextToken();\r\n        }\r\n\r\n        let t: TermNode = this.parseUnary();\r\n\r\n        if (incrementDecrementBefore != null) {\r\n            t = {\r\n                type: TokenType.incrementDecrementBefore,\r\n                position: position,\r\n                operator: incrementDecrementBefore,\r\n                operand: t\r\n            }\r\n        }\r\n\r\n        if (this.comesToken([TokenType.doublePlus, TokenType.doubleMinus])) {\r\n            t = {\r\n                type: TokenType.incrementDecrementAfter,\r\n                position: this.getCurrentPosition(),\r\n                operator: this.tt,\r\n                operand: t\r\n            }\r\n            this.nextToken();\r\n        }\r\n\r\n        return t;\r\n\r\n    }\r\n\r\n    // -, not, this, super, a.b.c[][].d, a.b(), b() (== this.b()), super.b(), super()\r\n    parseUnary(): TermNode {\r\n\r\n        let term: TermNode;\r\n        let position: TextPosition = this.getCurrentPosition();\r\n\r\n        switch (this.tt) {\r\n            case TokenType.leftBracket:\r\n                return this.parseDotOrArrayChains(this.bracketOrCasting());\r\n            case TokenType.minus:\r\n            case TokenType.not:\r\n                position = position;\r\n                let tt1 = this.tt;\r\n                this.nextToken();\r\n                term = this.parseUnary();\r\n\r\n                if (this.isConstant(term)) {\r\n                    let pcTerm = <ConstantNode>term;\r\n                    let typeTerm = TokenTypeToDataTypeMap[pcTerm.constantType];\r\n                    let resultType = typeTerm.getResultType(tt1);\r\n                    if (resultType != null) {\r\n                        let result = typeTerm.compute(tt1, { type: typeTerm, value: pcTerm.constant });\r\n                        pcTerm.constantType = (<PrimitiveType>resultType).toTokenType();\r\n                        pcTerm.constant = result;\r\n                        position.length = pcTerm.position.column - position.column + 1;\r\n                        return pcTerm;\r\n                    }\r\n                }\r\n\r\n                return {\r\n                    type: TokenType.unaryOp,\r\n                    position: position,\r\n                    operand: term,\r\n                    operator: tt1\r\n                };\r\n            case TokenType.keywordSuper:\r\n                if (this.ct[1].tt == TokenType.leftBracket) {\r\n                    this.nextToken(); // skip \"super\"\r\n                    let parameters = this.parseMethodCallParameters();\r\n                    term = {\r\n                        type: TokenType.superConstructorCall,\r\n                        position: position,\r\n                        operands: parameters.nodes,\r\n                        commaPositions: parameters.commaPositions,\r\n                        rightBracketPosition: parameters.rightBracketPosition\r\n                    };\r\n                    return term;\r\n                } else {\r\n                    term = {\r\n                        type: TokenType.keywordSuper,\r\n                        position: position\r\n                    };\r\n                }\r\n                this.nextToken();\r\n                return this.parseDotOrArrayChains(term);\r\n            case TokenType.keywordThis:\r\n                term = {\r\n                    type: TokenType.keywordThis,\r\n                    position: position\r\n                };\r\n                this.nextToken();\r\n                return this.parseDotOrArrayChains(term);\r\n            case TokenType.keywordNew:\r\n                return this.parseDotOrArrayChains(this.parseNew());\r\n            case TokenType.integerConstant:\r\n            case TokenType.charConstant:\r\n            case TokenType.floatingPointConstant:\r\n            case TokenType.stringConstant:\r\n            case TokenType.booleanConstant:\r\n                term = {\r\n                    type: TokenType.pushConstant,\r\n                    position: this.getCurrentPosition(),\r\n                    constantType: this.tt,\r\n                    constant: this.cct.value\r\n                };\r\n                let isStringConstant = this.tt == TokenType.stringConstant;\r\n                this.nextToken();\r\n\r\n                if (isStringConstant) return this.parseDotOrArrayChains(term);\r\n\r\n                return term;\r\n            case TokenType.keywordNull:\r\n                term = {\r\n                    type: TokenType.pushConstant,\r\n                    position: this.getCurrentPosition(),\r\n                    constantType: TokenType.keywordNull,\r\n                    constant: null\r\n                };\r\n                this.nextToken();\r\n                return term;\r\n            case TokenType.identifier: // attribute of current class or local variable\r\n\r\n                let identifier1 = <string>this.cct.value;\r\n                let position1 = this.getCurrentPosition();\r\n\r\n                this.nextToken();\r\n                //@ts-ignore\r\n                if (this.tt == TokenType.leftBracket) {\r\n                    let parameters = this.parseMethodCallParameters();\r\n                    let rightBracketPosition = parameters.rightBracketPosition;\r\n\r\n                    term = {\r\n                        type: TokenType.callMethod,\r\n                        position: position1,\r\n                        rightBracketPosition: rightBracketPosition,\r\n                        operands: parameters.nodes,\r\n                        object: term,\r\n                        identifier: identifier1,\r\n                        commaPositions: parameters.commaPositions\r\n                    }\r\n                } else {\r\n                    term = {\r\n                        type: TokenType.identifier,\r\n                        identifier: identifier1,\r\n                        position: position\r\n                    }\r\n                }\r\n\r\n                return this.parseDotOrArrayChains(term);\r\n            default:\r\n                this.pushError(\"Erwartet wird eine Variable, ein Methodenaufruf oder this oder super. Gefunden wurde: \" + this.cct.value);\r\n                return null;\r\n        }\r\n\r\n    }\r\n\r\n    tokensNotAfterCasting: TokenType[] = [TokenType.multiplication, TokenType.division, TokenType.plus,\r\n    TokenType.minus, TokenType.dot, TokenType.modulo, TokenType.semicolon, TokenType.rightBracket];\r\n\r\n    bracketOrCasting(): TermNode {\r\n\r\n        let position = this.getCurrentPosition();\r\n\r\n        this.nextToken(); // consume (\r\n\r\n        if (this.tt == TokenType.identifier && this.ct[1].tt == TokenType.rightBracket &&\r\n            this.tokensNotAfterCasting.indexOf(this.ct[2].tt) < 0) {\r\n\r\n            let castToType = this.parseType();\r\n            let position1 = this.getCurrentPosition(); // Position of )\r\n            position.length = position1.column - position.column + 1;\r\n\r\n            this.expect(TokenType.rightBracket, true);\r\n\r\n            let whatToCast = this.parsePlusPlusMinusMinus();\r\n\r\n            return {\r\n                type: TokenType.castValue,\r\n                position: position,\r\n                castToType: castToType,\r\n                whatToCast: whatToCast\r\n            }\r\n\r\n\r\n        } else {\r\n\r\n            let term = this.parseTerm();\r\n            let rightBracketPosition = this.getCurrentPosition();\r\n            this.expect(TokenType.rightBracket, true);\r\n\r\n            if (this.isConstant(term)) {\r\n                return term;\r\n            }\r\n\r\n            let bracketsNode: BracketsNode = {\r\n                position: rightBracketPosition,\r\n                type: TokenType.rightBracket,\r\n                termInsideBrackets: term\r\n            }\r\n\r\n\r\n            return bracketsNode;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    parseNew(): TermNode {\r\n\r\n        this.nextToken();\r\n        let position = this.getCurrentPosition();\r\n\r\n        if (this.expect(TokenType.identifier, false)) {\r\n            let identifier = <string>this.cct.value;\r\n            let identifierPosition = this.getCurrentPosition();\r\n            this.nextToken();\r\n\r\n\r\n            let genericParameterTypes: TypeNode[] = null;\r\n\r\n            if (this.tt == TokenType.lower) {\r\n\r\n                genericParameterTypes = [];\r\n                let first: boolean = true;\r\n                this.nextToken();\r\n\r\n                //@ts-ignore\r\n                while ((first && this.tt == TokenType.identifier) || (!first && this.tt == TokenType.comma)) {\r\n\r\n                    if (!first) this.nextToken(); // consume comma\r\n\r\n                    first = false;\r\n\r\n                    genericParameterTypes.push(this.parseType());\r\n\r\n                }\r\n\r\n                this.expect(TokenType.greater);\r\n                if (genericParameterTypes.length == 0) genericParameterTypes = null;\r\n            }\r\n\r\n            if (this.tt == TokenType.leftSquareBracket || this.tt == TokenType.leftRightSquareBracket) {\r\n\r\n                let typenode: TypeNode = {\r\n                    type: TokenType.type,\r\n                    position: position,\r\n                    arrayDimension: 0,\r\n                    identifier: identifier,\r\n                    genericParameterTypes: genericParameterTypes\r\n                }\r\n                this.typeNodes.push(typenode);\r\n\r\n                let elementCount: TermNode[] = [];\r\n\r\n                while (this.tt == TokenType.leftSquareBracket || this.tt == TokenType.leftRightSquareBracket) {\r\n                    typenode.arrayDimension++;\r\n\r\n                    //@ts-ignore\r\n                    if (this.tt == TokenType.leftRightSquareBracket) {\r\n                        elementCount.push(null);\r\n                        this.nextToken();\r\n                    } else {\r\n                        this.nextToken();\r\n                        elementCount.push(this.parseTerm());\r\n                        this.expect(TokenType.rightSquareBracket, true);\r\n                    }\r\n\r\n                }\r\n\r\n                let initialization = null;\r\n\r\n                if (this.tt == TokenType.leftCurlyBracket) {\r\n                    initialization = this.parseArrayLiteral(typenode);\r\n                }\r\n\r\n                let newArrayNode: NewArrayNode = {\r\n                    type: TokenType.newArray,\r\n                    position: position,\r\n                    arrayType: typenode,\r\n                    elementCount: elementCount,\r\n                    initialization: initialization\r\n                }\r\n\r\n                return newArrayNode;\r\n\r\n\r\n            } else if (this.tt == TokenType.leftBracket) {\r\n                let parameters = this.parseMethodCallParameters();\r\n\r\n                let classType: TypeNode = {\r\n                    type: TokenType.type,\r\n                    position: identifierPosition,\r\n                    arrayDimension: 0,\r\n                    identifier: identifier,\r\n                    genericParameterTypes: genericParameterTypes\r\n                }\r\n\r\n                this.typeNodes.push(classType);\r\n\r\n                return {\r\n                    type: TokenType.newObject,\r\n                    position: position,\r\n                    classType: classType,\r\n                    constructorOperands: parameters.nodes,\r\n                    rightBracketPosition: parameters.rightBracketPosition,\r\n                    commaPositions: parameters.commaPositions\r\n                }\r\n            } else {\r\n                this.pushError(\"Konstruktoraufruf (also runde Klammer auf) oder Array-Intanzierung (eckige Klammer auf) erwartet.\", \"error\", this.getCurrentPosition());\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    parseArrayLiteral(arrayType: TypeNode): ArrayInitializationNode {\r\n        // expects { as next token\r\n\r\n        let nodes: (ArrayInitializationNode | TermNode)[] = [];\r\n        let position = this.getCurrentPosition();\r\n        let dimension = null;\r\n\r\n        this.expect(TokenType.leftCurlyBracket, true);\r\n        if (this.tt != TokenType.rightCurlyBracket) {\r\n\r\n            let first = true;\r\n            while (first || this.tt == TokenType.comma) {\r\n                let position1 = this.getCurrentPosition();\r\n\r\n                if (!first) {\r\n                    this.nextToken(); // consume comma\r\n                }\r\n                first = false;\r\n\r\n                let newDimension: number;\r\n                if (this.tt == TokenType.leftCurlyBracket) {\r\n                    let newType: TypeNode = {\r\n                        type: TokenType.type,\r\n                        position: this.getCurrentPosition(),\r\n                        arrayDimension: arrayType.arrayDimension - 1,\r\n                        identifier: arrayType.identifier\r\n                    }\r\n                    this.typeNodes.push(newType);\r\n                    let al = this.parseArrayLiteral(newType);\r\n                    newDimension = al.dimension + 1;\r\n                    nodes.push(al);\r\n                } else {\r\n                    nodes.push(this.parseTerm());\r\n                    newDimension = 1;\r\n                }\r\n\r\n                if (dimension != null) {\r\n                    if (dimension != newDimension) {\r\n                        this.pushError(\"Die Dimension dieses Array-Literals (\" + (newDimension - 1) + \" ist ungleich derjenigen der vorangegangenen Array-Literale (\" + (dimension - 1) + \").\", \"error\", position1);\r\n                    }\r\n                }\r\n                dimension = newDimension;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        this.expect(TokenType.rightCurlyBracket, true);\r\n\r\n        let ain: ArrayInitializationNode = {\r\n            type: TokenType.arrayInitialization,\r\n            position: position,\r\n            arrayType: arrayType,\r\n            dimension: dimension,\r\n            nodes: nodes\r\n        }\r\n\r\n        return ain;\r\n\r\n    }\r\n\r\n    parseMethodCallParameters(): { rightBracketPosition: TextPosition, nodes: TermNode[], commaPositions: TextPosition[] } {\r\n        // Assumption: current token is (        \r\n        this.nextToken();\r\n        if (this.tt == TokenType.rightBracket) {\r\n            let rightBracketPosition = this.getCurrentPosition();\r\n            this.nextToken();\r\n            return { rightBracketPosition: rightBracketPosition, nodes: [], commaPositions: [] };\r\n        }\r\n\r\n        let parameters: TermNode[] = [];\r\n        let commaPositions: TextPosition[] = [];\r\n\r\n        while (true) {\r\n            let pos = this.pos;\r\n\r\n            let parameter = this.parseTerm();\r\n            if (parameter != null) {\r\n                parameters.push(parameter);\r\n            }\r\n\r\n            if (this.tt != TokenType.comma) {\r\n                break;\r\n            } else {\r\n                commaPositions.push(this.getCurrentPosition());\r\n                this.nextToken(); // consume comma\r\n            }\r\n\r\n            // emergency-step:\r\n            if (this.pos == pos) {\r\n                this.nextToken();\r\n            }\r\n\r\n        }\r\n\r\n        let position = this.getCurrentPosition();\r\n        let rightBracketFound = this.expect(TokenType.rightBracket, true);\r\n\r\n        return { rightBracketPosition: rightBracketFound ? position : null, nodes: parameters, commaPositions: commaPositions };\r\n\r\n    }\r\n\r\n    parseDotOrArrayChains(term: TermNode): TermNode {\r\n\r\n        if (term == null) return null;\r\n\r\n        while (this.comesToken([TokenType.dot, TokenType.leftSquareBracket])) {\r\n            if (this.tt == TokenType.dot) {\r\n\r\n                this.nextToken();\r\n                //@ts-ignore\r\n                if (this.tt != TokenType.identifier) {\r\n                    this.pushError(\"Erwartet wird der Bezeichner eines Attributs oder einer Methode, gefunden wurde: \" + this.cct.value);\r\n                    return term;\r\n                }\r\n\r\n                let identifier = <string>this.cct.value;\r\n                let position = this.getCurrentPosition();\r\n                this.nextToken();\r\n                //@ts-ignore\r\n                if (this.tt == TokenType.leftBracket) {\r\n                    let parameters = this.parseMethodCallParameters();\r\n                    term = {\r\n                        type: TokenType.callMethod,\r\n                        position: position,\r\n                        rightBracketPosition: parameters.rightBracketPosition,\r\n                        operands: parameters.nodes,\r\n                        object: term,\r\n                        identifier: identifier,\r\n                        commaPositions: parameters.commaPositions\r\n                    }\r\n                } else {\r\n                    term = {\r\n                        type: TokenType.pushAttribute,\r\n                        position: position,\r\n                        identifier: identifier,\r\n                        object: term\r\n                    }\r\n                }\r\n\r\n            } else {\r\n                // let position = this.getCurrentPosition();\r\n                let position = term.position;\r\n                this.nextToken();\r\n                let index = this.parseTerm();\r\n                let positionEnd = this.getCurrentPosition();\r\n                let position1: TextPosition = Object.assign({}, position);\r\n                this.expect(TokenType.rightSquareBracket, true);\r\n                if (positionEnd.line == position.line) {\r\n                    position1.length = positionEnd.column + positionEnd.length - position1.column;\r\n                } else {\r\n                    position1 = positionEnd;\r\n                }\r\n                term = {\r\n                    type: TokenType.selectArrayElement,\r\n                    position: position1,\r\n                    index: index,\r\n                    object: term\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        return term;\r\n    }\r\n\r\n    parseVariableDeclaration(type: TypeNode): LocalVariableDeclarationNode {\r\n\r\n        let isFinal = false;\r\n        if (this.tt == TokenType.keywordFinal) {\r\n            isFinal = true;\r\n            this.nextToken();\r\n        }\r\n\r\n        if (type == null) {\r\n            type = this.parseType();\r\n        }\r\n\r\n        if(this.tt != TokenType.identifier){\r\n            this.pushError(\"Hier wird ein Bezeichner (Name) einer Variable erwartet.\", \"error\", this.getCurrentPosition());\r\n            return null;\r\n        }\r\n\r\n        let identifier = <string>this.cct.value;\r\n        let position = this.getCurrentPosition();\r\n        this.nextToken();\r\n\r\n        let initialization: TermNode = null;\r\n\r\n        //@ts-ignore\r\n        if (this.tt == TokenType.assignment) {\r\n            this.nextToken();\r\n            //@ts-ignore\r\n            if (type.arrayDimension > 0 && this.tt == TokenType.leftCurlyBracket) {\r\n                initialization = this.parseArrayLiteral(type);\r\n            } else {\r\n                initialization = this.parseTerm();\r\n            }\r\n        }\r\n\r\n        //@ts-ignore\r\n        if (this.tt == TokenType.endofSourcecode && type == null && identifier == null) return null;\r\n\r\n        return {\r\n            type: TokenType.localVariableDeclaration,\r\n            position: position,\r\n            identifier: identifier,\r\n            variableType: type,\r\n            initialization: initialization,\r\n            isFinal: isFinal\r\n        }\r\n\r\n    }\r\n\r\n    parseType(): TypeNode {\r\n\r\n        /**\r\n         * e.g. int, int[][], Integer, ArrayList<Integer> ,HashMap<Integer, ArrayList<String>>[][]\r\n         */\r\n\r\n        let identifier = <string>this.cct.value;\r\n        let position = this.getCurrentPosition();\r\n        this.nextToken();\r\n\r\n        let genericParameterTypes: TypeNode[] = null;\r\n\r\n        if (this.tt == TokenType.lower) {\r\n\r\n            genericParameterTypes = [];\r\n            let first: boolean = true;\r\n            this.nextToken();\r\n\r\n            //@ts-ignore\r\n            while ((first && this.tt == TokenType.identifier) || (!first && this.tt == TokenType.comma)) {\r\n\r\n                if (!first) this.nextToken(); // consume comma\r\n\r\n                first = false;\r\n\r\n                genericParameterTypes.push(this.parseType());\r\n\r\n            }\r\n\r\n            this.expect(TokenType.greater);\r\n\r\n        }\r\n\r\n        let arrayDimension = 0;\r\n        while (this.tt == TokenType.leftRightSquareBracket) {\r\n            arrayDimension++;\r\n            position.length += 2;\r\n            this.nextToken();\r\n        }\r\n\r\n        let typenode: TypeNode = {\r\n            type: TokenType.type,\r\n            position: position,\r\n            arrayDimension: arrayDimension,\r\n            identifier: identifier,\r\n            genericParameterTypes: genericParameterTypes\r\n        }\r\n\r\n        this.typeNodes.push(typenode);\r\n\r\n        return typenode;\r\n\r\n    }\r\n\r\n\r\n    parseClassDefinition(): ASTNode {\r\n\r\n        let commentBefore = this.cct.commentBefore;\r\n        let modifiers = this.collectModifiers();\r\n\r\n        if (!this.comesToken(Parser.ClassTokens)) {\r\n            this.pushError(\"Erwartet wird class, interface oder enum. Gefunden wurde: \" + this.cct.value);\r\n            return null;\r\n        }\r\n\r\n        let classType = this.tt;\r\n        this.nextToken();\r\n\r\n        if (this.expect(TokenType.identifier, false)) {\r\n\r\n            let identifier = <string>this.cct.value;\r\n            let position = this.getCurrentPosition();\r\n            this.nextToken();\r\n\r\n            let typeParameters: TypeParameterNode[] = [];\r\n            // For Generics: parse expression like <E, F extends Test implements Comparable<Test>>\r\n            if (this.tt == TokenType.lower) {\r\n                typeParameters = this.parseTypeParameterDefinition();\r\n            }\r\n\r\n            let extendsImplements = this.parseExtendsImplements(classType == TokenType.keywordInterface);\r\n\r\n            if (classType == TokenType.keywordEnum) {\r\n                return this.parseEnum(identifier, extendsImplements, position, modifiers.visibility, commentBefore);\r\n            }\r\n\r\n            let scopeFrom = this.getCurrentPosition();\r\n            if (this.expect(TokenType.leftCurlyBracket, true)) {\r\n\r\n                let methodsAndAttributes = this.parseClassBody(classType, identifier);\r\n                let scopeTo = this.getEndOfCurrentToken();\r\n                this.expect(TokenType.rightCurlyBracket, true);\r\n                switch (classType) {\r\n\r\n                    case TokenType.keywordClass: return {\r\n                        type: TokenType.keywordClass,\r\n                        position: position,\r\n                        scopeFrom: scopeFrom,\r\n                        scopeTo: scopeTo,\r\n                        identifier: identifier,\r\n                        attributes: methodsAndAttributes.attributes,\r\n                        methods: methodsAndAttributes.methods,\r\n                        isAbstract: modifiers.isAbstract,\r\n                        visibility: modifiers.visibility,\r\n                        extends: extendsImplements.extends,\r\n                        implements: extendsImplements.implements,\r\n                        typeParameters: typeParameters,\r\n                        commentBefore: commentBefore\r\n                    }\r\n\r\n                    case TokenType.keywordInterface: return {\r\n                        type: TokenType.keywordInterface,\r\n                        position: position,\r\n                        identifier: identifier,\r\n                        scopeFrom: scopeFrom,\r\n                        scopeTo: scopeTo,\r\n                        methods: methodsAndAttributes.methods,\r\n                        typeParameters: typeParameters,\r\n                        extends: extendsImplements.implements,\r\n                        commentBefore: commentBefore\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    parseTypeParameterDefinition(): TypeParameterNode[] {\r\n\r\n        let typeParameters: TypeParameterNode[] = [];\r\n\r\n        let identifierMap = {};\r\n\r\n        this.expect(TokenType.lower, true);\r\n        let first: boolean = true;\r\n\r\n        while ((first && this.tt == TokenType.identifier) || (!first && this.tt == TokenType.comma)) {\r\n\r\n            if (!first) this.expect(TokenType.comma, true);\r\n\r\n            let tp: TypeParameterNode = {\r\n                type: TokenType.typeParameter,\r\n                position: this.getCurrentPosition(),\r\n                identifier: <string>this.cct.value,\r\n                extends: null,\r\n                implements: null\r\n            };\r\n\r\n            if (identifierMap[tp.identifier] != null) {\r\n                this.pushError(\"Zwei Typparameter dürfe nicht denselben Bezeichner tragen.\");\r\n            }\r\n\r\n            identifierMap[tp.identifier] = true;\r\n\r\n            this.nextToken();\r\n\r\n            let extendsImplements = this.parseTypeParameterBounds();\r\n\r\n            tp.extends = extendsImplements.extends;\r\n\r\n            if (tp.extends != null && tp.extends.arrayDimension > 0) {\r\n                this.pushError(\"Der Datentyp des Typparameters \" + tp.identifier + \" darf kein Array sein.\");\r\n            }\r\n\r\n            tp.implements = extendsImplements.implements;\r\n\r\n            tp.implements.forEach((im) => {\r\n                if (im.arrayDimension > 0) {\r\n                    this.pushError(\"Der Datentyp des Typparameters \" + tp.identifier + \" darf kein Array sein.\");\r\n                }\r\n            });\r\n\r\n            first = false;\r\n\r\n            typeParameters.push(tp);\r\n\r\n        }\r\n\r\n        this.expect(TokenType.greater, true);\r\n\r\n        return typeParameters;\r\n    }\r\n\r\n    parseEnum(identifier: string, extendsImplements: {\r\n        extends: TypeNode;\r\n        implements: TypeNode[];\r\n    }, position: TextPosition, visibility: Visibility, commentBefore: Token): ASTNode {\r\n\r\n        if (extendsImplements.extends != null) {\r\n            this.pushError(\"Ein enum kann nicht mit extends erweitert werden.\");\r\n        }\r\n        if (extendsImplements.implements.length > 0) {\r\n            this.pushError(\"Ein enum kann kein Interface implementieren.\");\r\n        }\r\n\r\n        let scopeFrom = this.getCurrentPosition();\r\n        if (this.expect(TokenType.leftCurlyBracket, true)) {\r\n\r\n            let values: EnumValueNode[] = this.parseEnumValues();\r\n\r\n            let methodsAndAttributes = this.parseClassBody(TokenType.keywordEnum, identifier);\r\n\r\n            let scopeTo = this.getEndOfCurrentToken();\r\n\r\n            this.expect(TokenType.rightCurlyBracket, true);\r\n\r\n\r\n            return {\r\n                type: TokenType.keywordEnum,\r\n                position: position,\r\n                scopeFrom: scopeFrom,\r\n                scopeTo: scopeTo,\r\n                attributes: methodsAndAttributes.attributes,\r\n                methods: methodsAndAttributes.methods,\r\n                identifier: identifier,\r\n                values: values,\r\n                visibility: visibility,\r\n                commentBefore: commentBefore\r\n            }\r\n\r\n        }\r\n\r\n        return null;\r\n\r\n    }\r\n\r\n    parseEnumValues(): EnumValueNode[] {\r\n\r\n        let values: EnumValueNode[] = [];\r\n\r\n        let pos: number = 0;\r\n        let first: boolean = true;\r\n\r\n        while ((first && this.tt == TokenType.identifier) || this.tt == TokenType.comma) {\r\n            pos = this.pos;\r\n            if (!first) this.nextToken(); // skip comma\r\n            first = false;\r\n\r\n            if (this.expect(TokenType.identifier, false)) {\r\n\r\n                let identifier = <string>this.cct.value;\r\n                let position = this.getCurrentPosition();\r\n                this.nextToken();\r\n                let constructorParameters: TermNode[] = null;\r\n\r\n                let commaPositions: TextPosition[] = [];\r\n                let rightBracketPosition: TextPosition = null;\r\n                //@ts-ignore\r\n                if (this.tt == TokenType.leftBracket) {\r\n                    let mcp = this.parseMethodCallParameters();\r\n                    constructorParameters = mcp.nodes;\r\n                    commaPositions = mcp.commaPositions;\r\n                    rightBracketPosition = mcp.rightBracketPosition;\r\n                }\r\n\r\n                values.push({\r\n                    type: TokenType.pushEnumValue,\r\n                    constructorParameters: constructorParameters,\r\n                    identifier: identifier,\r\n                    position: position,\r\n                    commaPositions: commaPositions,\r\n                    rightBracketPosition: rightBracketPosition\r\n                });\r\n\r\n            };\r\n\r\n            if (this.pos == pos) {\r\n                this.nextToken(); // in case of parsing-emergency\r\n            }\r\n        }\r\n\r\n        if (this.tt == TokenType.semicolon) {\r\n            this.nextToken();\r\n        }\r\n\r\n        return values;\r\n\r\n    }\r\n\r\n    parseClassBody(classType: TokenType, className: string): { methods: MethodDeclarationNode[], attributes: AttributeDeclarationNode[] } {\r\n\r\n        // Assumption: { is already consumed\r\n\r\n        let methods: MethodDeclarationNode[] = [];\r\n        let attributes: AttributeDeclarationNode[] = [];\r\n\r\n        while (true) {\r\n\r\n            if (this.tt == TokenType.rightCurlyBracket || this.tt == TokenType.endofSourcecode) {\r\n                break;\r\n            }\r\n\r\n            let commentBefore: Token = this.cct.commentBefore;\r\n\r\n            let annotation = null;\r\n            if(this.tt == TokenType.at){\r\n                annotation = this.cct.value;\r\n            }\r\n            let modifiers = this.collectModifiers();\r\n\r\n            let isConstructor = false;\r\n            let position = this.getCurrentPosition();\r\n\r\n            if (this.tt == TokenType.identifier && <string>this.cct.value == className && this.ct[1].tt == TokenType.leftBracket) {\r\n                isConstructor = true;\r\n            }\r\n\r\n            let type = this.parseType();\r\n\r\n            if (isConstructor || this.expect(TokenType.identifier, false)) {\r\n\r\n                let identifier = className;\r\n\r\n                if (!isConstructor) {\r\n                    position = this.getCurrentPosition();\r\n\r\n                    identifier = <string>this.cct.value;\r\n                    this.nextToken();\r\n                }\r\n\r\n                if (this.tt == TokenType.leftBracket) {\r\n\r\n                    if (isConstructor && classType == TokenType.keywordEnum && modifiers.visibility != Visibility.private) {\r\n                        this.pushError(\"Konstruktoren in enums müssen private sein.\", \"error\", position);\r\n                    }\r\n\r\n                    let parameters: ParameterNode[] = this.parseMethodDeclarationParameters();\r\n\r\n                    let statements: ASTNode[];\r\n                    let scopeFrom: TextPosition = this.getCurrentPosition();\r\n                    let scopeTo: TextPosition = scopeFrom;\r\n\r\n                    if (modifiers.isAbstract) {\r\n                        this.expect(TokenType.semicolon, true);\r\n                        if (isConstructor) {\r\n                            this.pushError(\"Ein Konstruktor kann nicht abstrakt sein.\", \"error\", position);\r\n                        }\r\n                        statements = [];\r\n                    } else {\r\n                        scopeFrom = this.getCurrentPosition();\r\n                        statements = this.parseStatement();\r\n                        scopeTo = this.getEndOfCurrentToken();\r\n                        if (statements != null && statements.length > 0 && statements[0].type == TokenType.scopeNode) {\r\n                            let scopeNode = <ScopeNode>statements[0];\r\n                            scopeFrom = scopeNode.position;\r\n                            scopeTo = scopeNode.positionTo;\r\n                        }\r\n\r\n                    }\r\n\r\n                    methods.push({\r\n                        type: TokenType.methodDeclaration,\r\n                        identifier: identifier,\r\n                        position: position,\r\n                        scopeFrom: scopeFrom,\r\n                        scopeTo: scopeTo,\r\n                        parameters: parameters,\r\n                        statements: statements,\r\n                        visibility: modifiers.visibility,\r\n                        isAbstract: modifiers.isAbstract || classType == TokenType.keywordInterface,\r\n                        isStatic: modifiers.isStatic,\r\n                        isConstructor: isConstructor,\r\n                        returnType: type,\r\n                        annotation: annotation,\r\n                        isTransient: modifiers.isTransient,\r\n                        commentBefore: commentBefore\r\n                    });\r\n\r\n                } else {\r\n\r\n                    if (identifier == className) {\r\n                        this.pushError(\"Das Attribut \" + className + \" darf nicht denselben Bezeichner haben wie die Klasse.\", \"error\", position);\r\n                    }\r\n\r\n                    let initialization: TermNode = null;\r\n\r\n                    if (this.tt == TokenType.assignment) {\r\n                        this.nextToken();\r\n                        //@ts-ignore\r\n                        if (type.arrayDimension > 0 && this.tt == TokenType.leftCurlyBracket) {\r\n                            initialization = this.parseArrayLiteral(type);\r\n                        } else {\r\n                            initialization = this.parseTerm();\r\n                        }\r\n                    }\r\n\r\n                    this.expect(TokenType.semicolon);\r\n\r\n                    attributes.push({\r\n                        type: TokenType.attributeDeclaration,\r\n                        identifier: identifier,\r\n                        position: position,\r\n                        attributeType: type,\r\n                        isStatic: modifiers.isStatic,\r\n                        isFinal: modifiers.isFinal,\r\n                        visibility: modifiers.visibility,\r\n                        initialization: initialization,\r\n                        annotation: annotation,\r\n                        isTransient: modifiers.isTransient,\r\n                        commentBefore: commentBefore\r\n                    });\r\n\r\n                    if (classType == TokenType.keywordInterface) {\r\n                        this.pushError(\"Interfaces dürfen keine Attribute enthalten.\", \"error\", position);\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n\r\n\r\n        }\r\n\r\n        return { methods: methods, attributes: attributes }\r\n\r\n    }\r\n\r\n    parseMethodDeclarationParameters(): ParameterNode[] {\r\n\r\n        // Assumption: next token is (\r\n        let parameters: ParameterNode[] = [];\r\n        this.nextToken();\r\n\r\n        if (this.tt == TokenType.rightBracket) {\r\n            this.nextToken();\r\n            return [];\r\n        }\r\n\r\n        let ellipsis = false;\r\n\r\n        while (true) {\r\n            if (ellipsis) {\r\n                this.pushError(\"Nur der letzte Parameter darf als Ellipsis (...) definiert werden.\");\r\n            }\r\n            let isFinal = this.tt == TokenType.keywordFinal;\r\n\r\n            if (isFinal) this.nextToken();\r\n\r\n            let type: TypeNode = this.parseType();\r\n\r\n            ellipsis = this.tt == TokenType.ellipsis;\r\n            if (ellipsis) {\r\n                this.nextToken();\r\n                type.arrayDimension++;\r\n            }\r\n\r\n            if (this.expect(TokenType.identifier, false)) {\r\n                let identifier = <string>this.cct.value;\r\n                parameters.push({\r\n                    type: TokenType.parameterDeclaration,\r\n                    position: this.getCurrentPosition(),\r\n                    identifier: identifier,\r\n                    parameterType: type,\r\n                    isFinal: isFinal,\r\n                    isEllipsis: ellipsis\r\n                });\r\n                this.nextToken();\r\n            }\r\n            if (this.tt != TokenType.comma) {\r\n                break;\r\n            }\r\n            this.nextToken(); // consume comma\r\n        }\r\n\r\n        this.expect(TokenType.rightBracket, true);\r\n\r\n        return parameters;\r\n\r\n    }\r\n\r\n    parseExtendsImplements(isInterface: boolean): { extends: TypeNode, implements: TypeNode[] } {\r\n\r\n        let sextends: TypeNode = null;\r\n        let simplements: TypeNode[] = [];\r\n\r\n        while(this.comesToken([TokenType.keywordExtends, TokenType.keywordImplements])){\r\n            if (this.comesToken(TokenType.keywordExtends) && !isInterface) {\r\n                if(sextends != null){\r\n                    this.pushError(\"Eine Klasse kann nicht Unterklasse von zwei anderen Klassen sein, es darf also hier nur ein Mal 'extends...' stehen.\", \"error\", sextends.position);\r\n                }\r\n                this.nextToken(); // skip extends\r\n                sextends = this.parseType();\r\n                if (sextends != null && sextends.arrayDimension > 0) {\r\n                    this.pushError(\"Der Datentyp der Basisklasse darf kein Array sein.\", \"error\", sextends.position);\r\n                }\r\n            }\r\n    \r\n            if ((!isInterface && this.comesToken(TokenType.keywordImplements)) || (isInterface && this.comesToken(TokenType.keywordExtends))) {\r\n                if(simplements.length > 0){\r\n                    this.pushError(\"Es darf hier nur ein Mal 'implements' stehen, hinter 'implements' ist aber eine kommaseparierte Liste von Interfaces erlaubt.\", \"warning\");\r\n                }\r\n                this.nextToken(); // Skip implements/extends\r\n                let first = true;\r\n                while ((first && this.tt == TokenType.identifier) || (!first && this.tt == TokenType.comma)) {\r\n                    if (!first) this.nextToken(); // skip comma\r\n                    first = false;\r\n                    simplements.push(this.parseType());\r\n                }\r\n            }\r\n        }\r\n\r\n        simplements.forEach((im) => {\r\n            if (im.arrayDimension > 0) {\r\n                this.pushError(im.identifier + \"[] ist kein Interface, sondern ein Array. Array-Datentypen sind hier nicht erlaubt.\");\r\n            }\r\n        });\r\n\r\n        return {\r\n            extends: sextends, implements: simplements\r\n        }\r\n    }\r\n\r\n    parseTypeParameterBounds(): { extends: TypeNode, implements: TypeNode[] } {\r\n\r\n        let sextends: TypeNode = null;\r\n        let simplements: TypeNode[] = [];\r\n\r\n        if (this.comesToken(TokenType.keywordExtends)) {\r\n            this.nextToken(); // skip extends\r\n            sextends = this.parseType();\r\n        }\r\n\r\n        while (this.comesToken(TokenType.ampersand)) {\r\n            this.nextToken(); // Skip ampersand\r\n            simplements.push(this.parseType());\r\n        }\r\n\r\n        return {\r\n            extends: sextends, implements: simplements\r\n        }\r\n\r\n    }\r\n\r\n    collectModifiers(): { isAbstract: boolean, isStatic: boolean, visibility: Visibility, isFinal: boolean, isTransient: boolean } {\r\n\r\n        let visibility = Visibility.public;\r\n        let isAbstract = false;\r\n        let isStatic = false;\r\n        let isFinal = false;\r\n        let isTransient = false;\r\n\r\n        let done = false;\r\n\r\n        while (!done) {\r\n\r\n            switch (this.tt) {\r\n                case TokenType.keywordPublic:\r\n                    visibility = Visibility.public;\r\n                    this.nextToken();\r\n                    break;\r\n                case TokenType.keywordPrivate:\r\n                    visibility = Visibility.private;\r\n                    this.nextToken();\r\n                    break;\r\n                case TokenType.keywordProtected:\r\n                    visibility = Visibility.protected;\r\n                    this.nextToken();\r\n                    break;\r\n                case TokenType.keywordStatic:\r\n                    isStatic = true;\r\n                    this.nextToken();\r\n                    break;\r\n                case TokenType.keywordAbstract:\r\n                    isAbstract = true;\r\n                    this.nextToken();\r\n                    break;\r\n                case TokenType.keywordFinal:\r\n                    isFinal = true;\r\n                    this.nextToken();\r\n                    break;\r\n                case TokenType.keywordTransient:\r\n                    isTransient = true;\r\n                    this.nextToken();\r\n                    break;\r\n                default: done = true;\r\n            }\r\n\r\n        }\r\n\r\n        return { isAbstract: isAbstract, isStatic: isStatic, visibility: visibility, isFinal: isFinal, isTransient: isTransient };\r\n\r\n    }\r\n\r\n\r\n}","export function hash(s: string){\r\n    let hash: number = 0;\r\n    let chr: number;\r\n    for (let i = 0; i < s.length; i++) {\r\n      chr   = s.charCodeAt(i);\r\n      hash  = ((hash << 5) - hash) + chr;\r\n      hash |= 0; // Convert to 32bit integer\r\n    }\r\n    return hash;\r\n}\r\n\r\nexport function escapeHtml(unsafe: string): string {\r\n  return unsafe\r\n      .replace(/['\"]+/g, '')\r\n       .replace(/&/g, \"&amp;\")\r\n       .replace(/</g, \"&lt;\")\r\n       .replace(/>/g, \"&gt;\")\r\n       .replace(/\"/g, \"&quot;\")\r\n       .replace(/'/g, \"&#039;\");\r\n}\r\n\r\nexport function dateToString(date: Date): string{\r\n  return `${twoDez(date.getDate())}.${twoDez(date.getMonth() + 1)}.${date.getFullYear()}, ${twoDez(date.getHours())}:${twoDez(date.getMinutes())}`;\r\n}\r\n\r\nexport function dateToStringWithoutTime(date: Date): string{\r\n  return `${twoDez(date.getDate())}.${twoDez(date.getMonth())}.${date.getFullYear()}`;\r\n}\r\n\r\nfunction twoDez(z: number):string {\r\n  if(z < 10) return \"0\" + z;\r\n  return \"\" + z;\r\n}\r\n\r\nexport function stringToDate(text: string): Date {\r\n\r\n  let match = text.match(/^(\\d{2})\\.(\\d{2})\\.(\\d{4}), (\\d{2}):(\\d{2})$/);\r\n\r\n  let date: Date = new Date(Number.parseInt(match[3]), Number.parseInt(match[2]), Number.parseInt(match[1]), Number.parseInt(match[4]), Number.parseInt(match[5]) );\r\n\r\n  return date;\r\n}\r\n\r\nexport function stringWrap(s: string, length: number ): string{\r\n  return s.replace(\r\n    new RegExp(`(?![^\\\\n]{1,${length}}$)([^\\\\n]{1,${length}})\\\\s`, 'g'), '$1\\n'\r\n  );\r\n} \r\n\r\nexport function formatAsJavadocComment(s: string, indent: number|string = \"\"): string {\r\n  let indentString = \"\";\r\n\r\n  if(typeof indent == \"string\"){\r\n    indentString = indent;\r\n  } else {\r\n    for(let i = 0; i < indent; i++){\r\n      indentString += \" \";\r\n    }\r\n  }\r\n\r\n  s = stringWrap(s, 60);\r\n  if(s.length > 0) s = \"\\n\" + s;\r\n  s = indentString + \"/**\" + s.replace(/\\n/g, \"\\n\" + indentString + \" * \") + \"\\n\" + indentString + \" */\";\r\n  return s;\r\n}","import { escapeHtml } from \"./StringTools.js\";\r\n\r\nexport function makeEditable(elementWithText: JQuery<HTMLElement>,\r\n    elementToReplace: JQuery<HTMLElement>,\r\n    renameDoneCallback: (newContent: string) => void, selectionRange: { start: number, end: number } = null) {\r\n\r\n    if (elementToReplace == null) {\r\n        elementToReplace = elementWithText;\r\n    }\r\n\r\n    let $input = jQuery('<input type=\"text\" class=\"jo_inplaceeditor\" spellcheck=\"false\">');\r\n    $input.css({\r\n        width: elementToReplace.css('width'),\r\n        height: elementToReplace.css('height'),\r\n        color: elementToReplace.css('color'),\r\n        position: elementToReplace.css('position'),\r\n        \"background-color\": elementToReplace.css('background-color'),\r\n        \"font-size\": elementToReplace.css('font-size'),\r\n        \"font-weight\": elementToReplace.css('font-weight'),\r\n        \"box-sizing\": \"border-box\"\r\n    });\r\n    $input.val(elementWithText.text());\r\n    $input.on(\"mousedown\", (e) => { e.stopPropagation(); })\r\n\r\n    if (selectionRange != null) {\r\n        (<HTMLInputElement>$input[0]).setSelectionRange(selectionRange.start, selectionRange.end);\r\n    }\r\n\r\n    elementToReplace.after($input);\r\n    elementToReplace.hide();\r\n    setTimeout(() => {\r\n        $input.focus();\r\n    }, 300);\r\n\r\n    $input.on(\"keydown.me\", (ev) => {\r\n        if (ev.key == \"Enter\") {\r\n            $input.off(\"keydown.me\");\r\n            $input.off(\"focuslost.me\");\r\n            $input.remove();\r\n            elementToReplace.show();\r\n            let newValue = escapeHtml(<string>$input.val());\r\n            renameDoneCallback(newValue);\r\n            return;\r\n        }\r\n        if (ev.key == \"Escape\") {\r\n            $input.off(\"keydown.me\");\r\n            $input.off(\"focuslost.me\");\r\n            $input.remove();\r\n            elementToReplace.show();\r\n        }\r\n    });\r\n\r\n    $input.on(\"focusout.me\", (ev) => {\r\n        $input.off(\"keydown.me\");\r\n        let newValue = <string>$input.val();\r\n        renameDoneCallback(newValue);\r\n        elementToReplace.show()\r\n        $input.remove();\r\n        return;\r\n    });\r\n\r\n}\r\n\r\nexport type ContextMenuItem = {\r\n    caption: string;\r\n    color?: string;\r\n    callback: () => void;\r\n    link?: string;\r\n    subMenu?: ContextMenuItem[]\r\n};\r\n\r\nexport function openContextMenu(items: ContextMenuItem[], x: number, y: number):JQuery<HTMLElement> {\r\n\r\n    let $contextMenu = jQuery('<div class=\"jo_contextmenu\"></div>');\r\n\r\n    let $openSubMenu: JQuery<HTMLElement> = null;\r\n    let parentMenuItem: ContextMenuItem = null;\r\n\r\n    for (let mi of items) {\r\n        let caption: string = mi.caption;\r\n        if(mi.link != null){\r\n            caption = `<a href=\"${mi.link}\" target=\"_blank\" class=\"jo_menulink\">${mi.caption}</a>`;\r\n        }\r\n        let $item = jQuery('<div>' + caption + (mi.subMenu != null ? '<span style=\"float: right\"> &nbsp; &nbsp; &gt;</span>' : \"\") +  '</div>');\r\n        if (mi.color != null) {\r\n            $item.css('color', mi.color);\r\n        }\r\n        if(mi.link == null){\r\n            $item.on('mousedown.contextmenu', () => {\r\n                jQuery('.jo_contextmenu').remove();\r\n                jQuery(document).off(\"mousedown.contextmenu\");\r\n                jQuery(document).off(\"keydown.contextmenu\");\r\n                mi.callback();\r\n            });\r\n        } else {\r\n            let $link = $item.find('a');\r\n            $link.on(\"mousedown\", (event) => {\r\n                event.stopPropagation();\r\n                setTimeout(() => {\r\n                    $item.hide();\r\n                }, 500);\r\n            })\r\n\r\n        }\r\n        \r\n        $item.on('mousemove.contextmenu', () => {\r\n            if(mi != parentMenuItem && $openSubMenu != null){\r\n                $openSubMenu.remove();\r\n                parentMenuItem = null;\r\n                $openSubMenu = null;\r\n            }\r\n            if(mi.subMenu != null){\r\n                $openSubMenu = openContextMenu(mi.subMenu, $item.offset().left + $item.width(), $item.offset().top);\r\n            }\r\n        });\r\n\r\n        $contextMenu.append($item);\r\n    }\r\n\r\n    jQuery(document).on(\"mousedown.contextmenu\", () => {\r\n        jQuery(document).off(\"mousedown.contextmenu\");\r\n        jQuery(document).off(\"keydown.contextmenu\");\r\n        jQuery('.jo_contextmenu').remove();\r\n    })\r\n    \r\n    jQuery(document).on(\"keydown.contextmenu\", (ev) => {\r\n        if (ev.key == \"Escape\") {\r\n            jQuery(document).off(\"mousedown.contextmenu\");\r\n            jQuery(document).off(\"keydown.contextmenu\");\r\n            jQuery('.jo_contextmenu').remove();\r\n        }\r\n    });\r\n\r\n    let leftRight = x > window.innerWidth * 0.8 ? \"right\" : \"left\";\r\n    let xp = x > window.innerWidth * 0.8 ? window.innerWidth - x : x;\r\n    let topBottom = y > window.innerHeight * 0.8 ? \"bottom\" : \"top\";\r\n    let yp = y > window.innerHeight * 0.8 ? window.innerHeight - y : y;\r\n\r\n    let css = {};\r\n    css[leftRight] = xp + \"px\";\r\n    css[topBottom] = yp + \"px\";\r\n\r\n    $contextMenu.css(css);\r\n\r\n\r\n    jQuery(\"body\").append($contextMenu);\r\n    $contextMenu.show();\r\n\r\n    return $contextMenu;\r\n}\r\n\r\nexport function makeTabs(tabDiv: JQuery<HTMLElement>) {\r\n    let headings = tabDiv.find('.jo_tabheadings>div').not('.jo_noHeading');\r\n    let tabs = tabDiv.find('.jo_tabs>div');\r\n\r\n    headings.on(\"mousedown\", (ev) => {\r\n        let target = jQuery(ev.target);\r\n        headings.removeClass('jo_active');\r\n        target.addClass('jo_active');\r\n        let tab = tabDiv.find('.' + target.data('target'));\r\n        tabs.removeClass('jo_active');\r\n        tabs.trigger('myhide');\r\n        tab.addClass('jo_active');\r\n        tab.trigger('myshow');\r\n    });\r\n\r\n}\r\n\r\nexport function convertPxToNumber(pxString: string): number {\r\n    pxString = pxString.replace('px', '').trim();\r\n    return Number.parseInt(pxString);\r\n}\r\n\r\nexport function makeDiv(id: string, klass: string = \"\", text: string = \"\", css?: {[id: string]: any}): JQuery<HTMLDivElement>{\r\n\r\n    let s = \"\";\r\n    if(id != null && id != \"\") s += ` id=\"${id}\"`;\r\n\r\n    if(klass != null && klass != \"\") s += ` class=\"${klass}\"`; \r\n\r\n    let div = jQuery(`<div${s}></div>`);\r\n\r\n    if(css !=  null){\r\n        div.css(css);\r\n    }\r\n\r\n    if(text != null && text != \"\"){\r\n        div.text(text);\r\n    }\r\n    \r\n    return <any>div;\r\n\r\n}\r\n\r\nexport type SelectItem = {\r\n    value: string | number,\r\n    object: any,\r\n    caption: string\r\n}\r\n\r\nexport function setSelectItems($selectElement: JQuery<HTMLSelectElement>, items: SelectItem[], activeItemValue?: string | number) {\r\n    $selectElement.empty();\r\n    items.forEach(item => {\r\n        let selected: string = (item.value == activeItemValue) ? ' selected=\"selected\"' : \"\";\r\n        let element = jQuery(`<option value=${item.value}${selected}>${item.caption}</option>`);\r\n        $selectElement.append(element);\r\n        element.data('object', item.object);\r\n    }\r\n    );\r\n\r\n    $selectElement.data('items', items);\r\n\r\n\r\n}\r\n\r\nexport function getSelectedObject($selectDiv: JQuery<HTMLSelectElement>){\r\n\r\n    let items: SelectItem[] = $selectDiv.data('items');\r\n\r\n    let selectedValue = $selectDiv.val();\r\n\r\n    return items.find(item => item.value == selectedValue)?.object;\r\n\r\n}\r\n","export type SoundType = {\r\n    url: string,\r\n    name: string,\r\n    player?: Howl,\r\n    description: string\r\n}\r\n\r\nexport class SoundTools {\r\n\r\n    static sounds: SoundType[] = [\r\n        {\r\n            url: \"assets/mp3/nearby_explosion_with_debris.mp3\",\r\n            name: \"nearby_explosion_with_debris\",\r\n            description: \"nahe Explosion mit herabfallenden Trümmern\"\r\n        },\r\n        {\r\n            url: \"assets/mp3/nearby_explosion.mp3\",\r\n            name: \"nearby_explosion\",\r\n            description: \"nahe Explosion\"\r\n        },\r\n        {\r\n            url: \"assets/mp3/far_bomb.mp3\",\r\n            name: \"far_bomb\",\r\n            description: \"fernes Geräusch einer Bombe\"\r\n        },\r\n        {\r\n            url: \"assets/mp3/cannon_boom.mp3\",\r\n            name: \"cannon_boom\",\r\n            description: \"einzelner Kanonendonner\"\r\n        },\r\n        {\r\n            url: \"assets/mp3/far_explosion.mp3\",\r\n            name: \"far_explosion\",\r\n            description: \"ferne Explosion\"\r\n        },\r\n        {\r\n            url: \"assets/mp3/laser_shoot.mp3\",\r\n            name: \"laser_shoot\",\r\n            description: \"Laserschuss (oder was man dafür hält...)\"\r\n        },\r\n        {\r\n            url: \"assets/mp3/short_bell.mp3\",\r\n            name: \"short_bell\",\r\n            description: \"kurzes Klingeln (wie bei alter Landenkasse)\"\r\n        },\r\n        {\r\n            url: \"assets/mp3/flamethrower.mp3\",\r\n            name: \"flamethrower\",\r\n            description: \"Flammenwerfer\"\r\n        },\r\n        {\r\n            url: \"assets/mp3/digging.mp3\",\r\n            name: \"digging\",\r\n            description: \"Geräusch beim Sandschaufeln\"\r\n        },\r\n        {\r\n            url: \"assets/mp3/short_digging.mp3\",\r\n            name: \"short_digging\",\r\n            description: \"kurzes Geräusch beim Sandschaufeln\"\r\n        },\r\n        {\r\n            url: \"assets/mp3/shoot.mp3\",\r\n            name: \"shoot\",\r\n            description: \"Schussgeräusch\"\r\n        },\r\n        {\r\n            url: \"assets/mp3/short_shoot.mp3\",\r\n            name: \"short_shoot\",\r\n            description: \"ein kurzer Schuss\"\r\n        },\r\n        {\r\n            url: \"assets/mp3/step.mp3\",\r\n            name: \"step\",\r\n            description: \"ein Schritt\"\r\n        },\r\n        {\r\n            url: \"assets/mp3/boulder.mp3\",\r\n            name: \"boulder\",\r\n            description: \"Geräusch eines Steins, der auf einen zweiten fällt\"\r\n        },\r\n        {\r\n            url: \"assets/mp3/pong_d5.wav\",\r\n            name: \"pong_d\",\r\n            description: \"Tiefer Pong-Ton\"\r\n        },\r\n        {\r\n            url: \"assets/mp3/pong_f5.wav\",\r\n            name: \"pong_f\",\r\n            description: \"Hoher Pong-Ton\"\r\n        },\r\n    ]\r\n\r\n    static soundMap: Map<string, SoundType> = new Map();\r\n\r\n    public static init(){\r\n\r\n        for(let sound of SoundTools.sounds){\r\n            sound.player = new Howl({src: [sound.url], preload: true})\r\n            SoundTools.soundMap.set(sound.name, sound);\r\n        }\r\n\r\n    }\r\n\r\n    public static play(name: string){\r\n        let st: SoundType = SoundTools.soundMap.get(name);\r\n        if(st != null){\r\n            st.player.play();\r\n        }\r\n    }\r\n\r\n}","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nexport function defineMyJava() {\r\n    monaco.languages.register({ id: 'myJava', \r\n    extensions: ['.learnJava'],\r\n    //  mimetypes: [\"text/x-java-source\", \"text/x-java\"]  \r\n    });\r\n\r\n    let conf: monaco.languages.LanguageConfiguration = {\r\n        indentationRules: {\r\n            // ^(.*\\*/)?\\s*\\}.*$\r\n            decreaseIndentPattern: /^(.*\\*\\/)?\\s*\\}.*$/,\r\n            // ^.*\\{[^}\"']*$\r\n            increaseIndentPattern: /^.*\\{[^}\"']*$/\r\n        },\r\n        onEnterRules: [\r\n            {\r\n                // e.g. /** | */\r\n                beforeText: /^\\s*\\/\\*\\*(?!\\/)([^\\*]|\\*(?!\\/))*$/,\r\n                afterText: /^\\s*\\*\\/$/,\r\n                action: { indentAction: monaco.languages.IndentAction.IndentOutdent, appendText: ' * ' }\r\n            },\r\n            {\r\n                // e.g. /** ...|\r\n                beforeText: /^\\s*\\/\\*\\*(?!\\/)([^\\*]|\\*(?!\\/))*$/,\r\n                action: { indentAction: monaco.languages.IndentAction.None, appendText: ' * ' }\r\n            },\r\n            {\r\n                // e.g.  * ...|\r\n                beforeText: /^(\\t|(\\ \\ ))*\\ \\*(\\ ([^\\*]|\\*(?!\\/))*)?$/,\r\n                action: { indentAction: monaco.languages.IndentAction.None, appendText: '* ' }\r\n            },\r\n            {\r\n                // e.g.  */|\r\n                beforeText: /^(\\t|(\\ \\ ))*\\ \\*\\/\\s*$/,\r\n                action: { indentAction: monaco.languages.IndentAction.None, removeText: 1 }\r\n            },\r\n            {\r\n                // e.g.  *-----*/|\r\n                beforeText: /^(\\t|(\\ \\ ))*\\ \\*[^/]*\\*\\/\\s*$/,\r\n                action: { indentAction: monaco.languages.IndentAction.None, removeText: 1 }\r\n            }\r\n        ],\r\n        // the default separators except `@$`\r\n        wordPattern: /(-?\\d*\\.\\d\\w*)|([^\\`\\~\\!\\#\\%\\^\\&\\*\\(\\)\\-\\=\\+\\[\\{\\]\\}\\\\\\|\\;\\:\\'\\\"\\,\\.\\<\\>\\/\\?\\s]+)/g,\r\n        comments: {\r\n            lineComment: '//',\r\n            blockComment: ['/*', '*/'],\r\n        },\r\n        brackets: [\r\n            ['{', '}'],\r\n            ['[', ']'],\r\n            ['(', ')'],\r\n        ],\r\n        autoClosingPairs: [\r\n            { open: '{', close: '}' },\r\n            { open: '[', close: ']' },\r\n            { open: '(', close: ')' },\r\n            { open: '\"', close: '\"' },\r\n            { open: '\\'', close: '\\'' },\r\n        ],\r\n        surroundingPairs: [\r\n            { open: '{', close: '}' },\r\n            { open: '[', close: ']' },\r\n            { open: '(', close: ')' },\r\n            { open: '\"', close: '\"' },\r\n            { open: '\\'', close: '\\'' },\r\n            { open: '<', close: '>' },\r\n        ],\r\n        folding: {\r\n            markers: {\r\n                start: new RegExp(\"^\\\\s*//\\\\s*(?:(?:#?region\\\\b)|(?:<editor-fold\\\\b))\"),\r\n                end: new RegExp(\"^\\\\s*//\\\\s*(?:(?:#?endregion\\\\b)|(?:</editor-fold>))\")\r\n            }\r\n        },\r\n\r\n    };\r\n    let language = {\r\n        defaultToken: '',\r\n        tokenPostfix: '.java',\r\n        keywords: [\r\n            'abstract', 'continue', 'new', 'switch', 'assert', 'default',\r\n            'goto', 'package', 'synchronized', 'private',\r\n            'this', 'implements', 'protected', 'throw',\r\n            'import', 'public', 'throws', 'case', 'instanceof', 'return',\r\n            'transient', 'catch', 'extends', 'try', 'final',\r\n            'static', 'finally', 'strictfp',\r\n            'volatile', 'const', 'native', 'super', 'true', 'false', 'null'\r\n        ],\r\n        print: ['print', 'println'],\r\n        statements: ['for', 'while', 'if', 'then', 'else', 'do', 'break', 'continue'],\r\n        types: ['int', 'boolean', 'char', 'float', 'double', 'long', 'void', 'byte', 'short',\r\n        'class', 'enum', 'interface'],\r\n        operators: [\r\n            '=', '>', '<', '!', '~', '?', ':',\r\n            '==', '<=', '>=', '!=', '&&', '||', '++', '--',\r\n            '+', '-', '*', '/', '&', '|', '^', '%', '<<',\r\n            '>>', '>>>', '+=', '-=', '*=', '/=', '&=', '|=',\r\n            '^=', '%=', '<<=', '>>=', '>>>='\r\n        ],\r\n        // we include these common regular expressions\r\n        symbols: /[=><!~?:&|+\\-*\\/\\^%]+/,\r\n        escapes: /\\\\(?:[abfnrtv\\\\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,\r\n        digits: /\\d+(_+\\d+)*/,\r\n        octaldigits: /[0-7]+(_+[0-7]+)*/,\r\n        binarydigits: /[0-1]+(_+[0-1]+)*/,\r\n        hexdigits: /[[0-9a-fA-F]+(_+[0-9a-fA-F]+)*/,\r\n        // The main tokenizer for our languages\r\n        tokenizer: {\r\n            root: [\r\n                // identifiers and keywords\r\n                // [/[a-zA-Z_$][\\w$]*/, {\r\n                [/[a-z_$äöü][\\w$äöüßÄÖÜ]*(?=\\()/, {\r\n                    cases: {\r\n                        '@keywords': { token: 'keyword.$0' },\r\n                        '@statements': { token: 'statement.$0' },\r\n                        '@types': { token: 'type.$0' },\r\n                        '@print': { token: 'print.$0' },\r\n                        '@default': 'method'\r\n                    }\r\n                }],\r\n                [/[a-z_$äöüß][\\w$äöüßÄÖÜ]*/, {\r\n                    cases: {\r\n                        '@keywords': { token: 'keyword.$0' },\r\n                        '@statements': { token: 'statement.$0' },\r\n                        '@types': { token: 'type.$0' },\r\n                        '@default': 'identifier'\r\n                    }\r\n                }],\r\n                [/[A-Z$ÄÖÜ][\\w$äöüßÄÖÜ]*/, 'class'],\r\n                // whitespace\r\n                { include: '@whitespace' },\r\n                // delimiters and operators\r\n                [/[{}()\\[\\]]/, '@brackets'],\r\n                [/[<>](?!@symbols)/, '@brackets'],\r\n                [/@symbols/, {\r\n                    cases: {\r\n                        '@operators': 'delimiter',\r\n                        '@default': ''\r\n                    }\r\n                }],\r\n                // @ annotations.\r\n                [/@\\s*[a-zA-Z_\\$][\\w\\$]*/, 'annotation'],\r\n                // numbers\r\n                [/(@digits)[eE]([\\-+]?(@digits))?[fFdD]?/, 'number.float'],\r\n                [/(@digits)\\.(@digits)([eE][\\-+]?(@digits))?[fFdD]?/, 'number.float'],\r\n                [/0[xX](@hexdigits)[Ll]?/, 'number.hex'],\r\n                [/0(@octaldigits)[Ll]?/, 'number.octal'],\r\n                [/0[bB](@binarydigits)[Ll]?/, 'number.binary'],\r\n                [/(@digits)[fFdD]/, 'number.float'],\r\n                [/(@digits)[lL]?/, 'number'],\r\n                // delimiter: after number because of .\\d floats\r\n                [/[;,.]/, 'delimiter'],\r\n                // strings\r\n                [/\"([^\"\\\\]|\\\\.)*$/, 'string.invalid'],\r\n                [/\"/, 'string', '@string'],\r\n                // characters\r\n                [/'[^\\\\']'/, 'string'],\r\n                [/(')(@escapes)(')/, ['string', 'string.escape', 'string']],\r\n                [/'/, 'string.invalid']\r\n            ],\r\n            whitespace: [\r\n                [/[ \\t\\r\\n]+/, ''],\r\n                [/\\/\\*\\*(?!\\/)/, 'comment.doc', '@javadoc'],\r\n                [/\\/\\*/, 'comment', '@comment'],\r\n                [/\\/\\/.*$/, 'comment'],\r\n            ],\r\n            comment: [\r\n                [/[^\\/*]+/, 'comment'],\r\n                // [/\\/\\*/, 'comment', '@push' ],    // nested comment not allowed :-(\r\n                // [/\\/\\*/,    'comment.invalid' ],    // this breaks block comments in the shape of /* //*/\r\n                [/\\*\\//, 'comment', '@pop'],\r\n                [/[\\/*]/, 'comment']\r\n            ],\r\n            //Identical copy of comment above, except for the addition of .doc\r\n            javadoc: [\r\n                [/[^\\/*]+/, 'comment.doc'],\r\n                // [/\\/\\*/, 'comment.doc', '@push' ],    // nested comment not allowed :-(\r\n                [/\\/\\*/, 'comment.doc.invalid'],\r\n                [/\\*\\//, 'comment.doc', '@pop'],\r\n                [/[\\/*]/, 'comment.doc']\r\n            ],\r\n            string: [\r\n                [/[^\\\\\"]+/, 'string'],\r\n                [/@escapes/, 'string.escape'],\r\n                [/\\\\./, 'string.escape.invalid'],\r\n                [/\"/, 'string', '@pop']\r\n            ],\r\n        },\r\n    };\r\n\r\n    //@ts-ignore\r\n    monaco.languages.setLanguageConfiguration('myJava', conf);\r\n    //@ts-ignore\r\n    monaco.languages.setMonarchTokensProvider('myJava', language);\r\n\r\n    // monaco.languages.registerCompletionItemProvider(\"myJava\", {    // Or any other language...\r\n    //     provideCompletionItems: (model, position) => {\r\n    //         // Retrieve the text until the current cursor's position, anything\r\n    //         // after that doesn't really matter.\r\n    //         var textToMatch = model.getValueInRange({\r\n    //             startLineNumber: 1,\r\n    //             startColumn: 1,\r\n    //             endLineNumber: position.lineNumber,\r\n    //             endColumn: position.column\r\n    //         });\r\n\r\n    //         // Return JSON array containing all completion suggestions.\r\n    //         return {\r\n    //             suggestions: [\r\n    //                 // Example: io.write ()\r\n    //                 {\r\n    //                     label: \"io.write (string)\",\r\n    //                     kind: monaco.languages.CompletionItemKind.Function,\r\n    //                     documentation: \"Writes a string to stdout.\",\r\n    //                     insertText: \"io.write (\\\"\\\")\",  // Escape JSON as needed.\r\n    //                     range: {\r\n    //                         startLineNumber: position.lineNumber,\r\n    //                         endLineNumber: position.lineNumber,\r\n    //                         startColumn: position.column,\r\n    //                         endColumn: position.column\r\n    //                     }\r\n    //                 },  // Other items.\r\n    //             ]\r\n    //         };\r\n    //     }\r\n    // });\r\n\r\n\r\n}","import { Klass, Interface, Visibility } from \"./Class.js\";\r\nimport { Method, Attribute, Type, PrimitiveType, Variable } from \"./Types.js\";\r\nimport { objectType } from \"./PrimitiveTypes.js\";\r\nimport { ArrayType } from \"./Array.js\";\r\nimport { formatAsJavadocComment } from \"../../tools/StringTools.js\";\r\n\r\nexport function getDeclarationAsString(element: Klass | Interface | Method | Attribute | Variable,\r\n    indent: string = \"\", short: boolean = false): string {\r\n\r\n    if (element instanceof Klass) {\r\n\r\n        if (element.isTypeVariable) {\r\n            return getTypeVariableDeclaration(element);\r\n        }\r\n\r\n        let s = \"\";\r\n\r\n        if (element.documentation != null && element.documentation != \"\") {\r\n            if(element.documentation.startsWith(\"/*\")){\r\n                s += (indent + element.documentation).replace(/\\n/g, \"\\n\" + indent) + \"\\n\";\r\n            } else {\r\n                // s += indent + \"/**  \\n\" + element.documentation + \"  \\n**/  \\n\" + indent;\r\n                s += formatAsJavadocComment(element.documentation, indent) + \"\\n\";\r\n            }\r\n        }\r\n\r\n        if (element.visibility != null) s += Visibility[element.visibility] + \" \";\r\n        if (element.isAbstract) s += \"abstract \";\r\n        s += \"class \" + element.identifier + \" \";\r\n\r\n        if (element.typeVariables.length > 0) {\r\n            s += getGenericParameterDefinition(element);\r\n        }\r\n\r\n\r\n        if (element.baseClass != null && element.baseClass.identifier != \"Object\") {\r\n            s += \"extends \" + element.baseClass.identifier + \" \";\r\n            if (element.baseClass.typeVariables.length > 0) {\r\n                s += getGenericParameterDefinition(element.baseClass);\r\n            }\r\n        }\r\n\r\n        if (element.implements != null && element.implements.length > 0) {\r\n            s += \"implements \";\r\n            for (let i = 0; i < element.implements.length; i++) {\r\n                s += element.implements[i].identifier;\r\n                if (element.implements[i].typeVariables.length > 0) {\r\n                    s += getGenericParameterDefinition(element.implements[i]);\r\n                }\r\n                if (i < element.implements.length - 1) {\r\n                    s += \", \";\r\n                }\r\n            }\r\n        }\r\n\r\n        if (short) return s;\r\n\r\n        s += indent + \"{\\n  \";\r\n\r\n        for (let a of element.getAttributes(Visibility.protected)) {\r\n            s += indent + \"\\n\" + getDeclarationAsString(a, \"  \") + \";\\n\";\r\n        }\r\n\r\n        if (element.staticClass != null) {\r\n            for (let a of element.staticClass.getAttributes(Visibility.protected)) {\r\n                s += indent + \"\\n\" + getDeclarationAsString(a, \"  \") + \";\\n\";\r\n            }\r\n        }\r\n\r\n        for (let m of element.getMethods(Visibility.protected)) {\r\n            s += indent + \"\\n\" + getDeclarationAsString(m, \"  \") + \";\\n\";\r\n        }\r\n\r\n        if (element.staticClass != null) {\r\n            for (let m of element.staticClass.getMethods(Visibility.protected)) {\r\n                s += indent + \"\\n\" + getDeclarationAsString(m, \"  \") + \";\\n\";\r\n            }\r\n        }\r\n\r\n\r\n        s += \"\\n}\";\r\n\r\n        return s;\r\n\r\n    }\r\n\r\n    if (element instanceof Interface) {\r\n\r\n        let decl = \"\";\r\n\r\n        if (element.documentation != null && element.documentation != \"\" && !short) {\r\n            if(element.documentation.startsWith(\"/*\")){\r\n                decl += (indent + element.documentation).replace(/\\n/g, \"\\n\" + indent) + \"\\n\";\r\n            } else {\r\n                decl += formatAsJavadocComment(element.documentation, indent) + \"\\n\";\r\n            }\r\n        }\r\n\r\n        decl += indent + \"interface \" + element.identifier;\r\n\r\n        if (element.typeVariables.length > 0) {\r\n            decl += getGenericParameterDefinition(element);\r\n        }\r\n\r\n        if (element.extends != null && element.extends.length > 0) {\r\n            decl += \"extends \";\r\n            for (let i = 0; i < element.extends.length; i++) {\r\n                decl += element.extends[i].identifier;\r\n                if (element.extends[i].typeVariables.length > 0) {\r\n                    decl += getGenericParameterDefinition(element.extends[i]);\r\n                }\r\n                if (i < element.extends.length - 1) {\r\n                    decl += \", \";\r\n                }\r\n            }\r\n        }\r\n\r\n        if (!short) {\r\n\r\n            decl += \"{\\n\";\r\n\r\n            for (let m of element.getMethods()) {\r\n                decl += indent + \"\\n\" + getDeclarationAsString(m, \"  \") + \";\\n\";\r\n            }\r\n\r\n            decl += \"\\n}\";\r\n        }\r\n\r\n        return decl;\r\n\r\n    }\r\n\r\n    if (element instanceof Attribute) {\r\n        let s = \"\";\r\n\r\n        if (element.documentation != null && element.documentation != \"\" && !short) {\r\n            if(element.documentation.startsWith(\"/*\")){\r\n                s += indent + element.documentation.replace(/\\n/g, \"\\n\" + indent) + \"\\n\";\r\n            } else {\r\n                s += formatAsJavadocComment(element.documentation, indent) + \"\\n\";\r\n            }\r\n        }\r\n\r\n        s += indent;\r\n\r\n        if (element.visibility != null) s += Visibility[element.visibility] + \" \";\r\n\r\n        if (element.isStatic) s += \"static \";\r\n\r\n        s += getTypeIdentifier(element.type) + \" \" + element.identifier;\r\n\r\n        return s;\r\n    }\r\n\r\n    if (element instanceof Method) {\r\n\r\n        let s = \"\";\r\n\r\n        if (element.documentation != null && element.documentation != \"\" && !short) {\r\n            if(element.documentation.startsWith(\"/*\")){\r\n                s += indent + element.documentation.replace(/\\n/g, \"\\n\" + indent) + \"\\n\";\r\n            } else {\r\n                s += formatAsJavadocComment(element.documentation, indent) + \"\\n\";\r\n            }\r\n        }\r\n\r\n        s += indent;\r\n\r\n        if (element.visibility != null) s += Visibility[element.visibility] + \" \";\r\n\r\n        if (element.isStatic) s += \"static \";\r\n\r\n        if (element.getReturnType() != null) {\r\n            s += getTypeIdentifier(element.getReturnType()) + \" \";\r\n        } else {\r\n            s += element.isConstructor ? \"\" : \"void \";\r\n        }\r\n\r\n        s += element.identifier + \"(\";\r\n\r\n        let parameters = element.getParameterList().parameters;\r\n        for (let i = 0; i < parameters.length; i++) {\r\n\r\n            let p = parameters[i];\r\n            let type: Type = element.getParameterType(i);\r\n\r\n            if (p.isEllipsis) {\r\n                type = (<ArrayType>type).arrayOfType;\r\n            }\r\n\r\n            s += getTypeIdentifier(type) + (p.isEllipsis ? \"...\" : \"\") + \" \" + p.identifier;\r\n\r\n            if (i < parameters.length - 1) {\r\n                s += \", \";\r\n            }\r\n\r\n        }\r\n\r\n        s += \")\";\r\n\r\n        return s;\r\n\r\n\r\n    }\r\n\r\n    return \"\";\r\n}\r\n\r\nfunction getTypeVariableDeclaration(element: Klass) {\r\n    let s: string = element.identifier;\r\n\r\n    if (element.isGenericVariantFrom != objectType) s += \" extends \" + getTypeIdentifier(element.isGenericVariantFrom);\r\n    if (element.implements.length > 0) {\r\n        let implList = element.implements.filter(impl => element.isGenericVariantFrom.implements.indexOf(impl) < 0)\r\n            .map(impl => getTypeIdentifier(impl)).join(\", \");\r\n        if (implList != \"\") {\r\n            s += \" implements \" + implList;\r\n        }\r\n    }\r\n\r\n    return s;\r\n}\r\n\r\nexport function getTypeIdentifier(type: Type): string {\r\n    if (type instanceof Klass || type instanceof Interface) {\r\n        if (type.typeVariables.length > 0) {\r\n            let s: string = (type[\"isTypeVariable\"] ? (type.identifier + \" extends \" + type.isGenericVariantFrom?.identifier) : type.identifier)\r\n                + \"<\";\r\n            s += type.typeVariables.map(tv => getTypeIdentifier(tv.type)).join(\", \");\r\n            return s + \">\";\r\n        }\r\n    }\r\n\r\n    return type[\"isTypeVariable\"] ? (type.identifier + \" extends \" + type[\"isGenericVariantFrom\"]?.identifier) : type.identifier;\r\n}\r\n\r\nexport function getGenericParameterDefinition(element: Klass | Interface): string {\r\n\r\n    let s: string = \"\";\r\n\r\n    if (element.typeVariables.length > 0) {\r\n        s = \"<\";\r\n\r\n        let typeList: string[] = [];\r\n        for (let tv of element.typeVariables) {\r\n            let t: string = tv.type.identifier;\r\n            let k: Klass = tv.type;\r\n            if (k.isGenericVariantFrom != null && k.isGenericVariantFrom.identifier != \"Object\") {\r\n                t += \" extends \" + k.isGenericVariantFrom.identifier;\r\n            }\r\n            if (k.implements != null) {\r\n\r\n                let implList = k.implements;\r\n                if (k.isGenericVariantFrom != null) {\r\n                    implList = implList.filter(impl => k.isGenericVariantFrom.implements.indexOf(impl) < 0);\r\n                }\r\n\r\n                for (let im of implList) {\r\n                    t += \" & \" + im.identifier;\r\n                }\r\n            }\r\n            typeList.push(t);\r\n        }\r\n\r\n        s += typeList.join(\", \");\r\n        s += \"> \";\r\n    }\r\n\r\n    return s;\r\n}","import { Editor } from \"./Editor.js\";\r\nimport { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass, Interface } from \"../../compiler/types/Class.js\";\r\nimport { Method, Attribute, PrimitiveType } from \"../../compiler/types/Types.js\";\r\nimport { getDeclarationAsString, getGenericParameterDefinition } from \"../../compiler/types/DeclarationHelper.js\";\r\nimport { InterpreterState } from \"../../interpreter/Interpreter.js\";\r\n\r\n\r\n\r\nexport class MyHoverProvider {\r\n\r\n    private static keywordDescriptions: { [keyword: string]: string } = {\r\n        \"print\": \"Die Anweisung ```print``` gibt eine Zeichenkette aus.\",\r\n        \"new\": \"Das Schlüsselwort ```new``` bewirkt die Instanzierung (\\\"Erschaffung\\\") eines neuen Objektes einer Klasse.\",\r\n        \"println\": \"Die Anweisung ```println``` gibt eine Zeichenkette gefolgt von einem Zeilenumbruch aus.\",\r\n        \"while\": \"```\\nwhile (Bedingung) {Anweisungen}\\n```  \\nbewirkt die Wiederholung der Anweisungen solange ```Bedingung == true``` ist.\",\r\n        \"for\": \"```\\nfor(Startanweisung;Solange-Bedingung;Nach_jeder_Wiederholung){Anweisungen}\\n```  \\n\"\r\n            + \"führt zunächst die Startanweisung aus und wiederholt dann die Anweisungen solange ```Bedingung == true``` ist. Am Ende jeder wiederholung wird Nach_jeder_Wiederholung ausgeführt.\",\r\n        \"if\": \"```\\nif(Bedingung){Anweisungen_1} else {Anweisungen_2}\\n```  \\nwertet die Bedingung aus und führt Anweisungen_1 nur dann aus, wenn die Bedingung ```true``` ergibt, Anweisungen_2 nur dann, wenn die Bedingung ```false``` ergibt.  \\nDer ```else```-Teil kann auch weggelassen werden.\",\r\n        \"else\": \"```\\nif(Bedingung){Anweisungen_1} else {Anweisungen_2}\\n```  \\nwertet die Bedingung aus und führt Anweisungen_1 nur dann aus, wenn die Bedingung ```true``` ergibt, Anweisungen_2 nur dann, wenn die Bedingung ```false``` ergibt.\",\r\n        \"switch\": \"```\\nswitch(Selektor){ case Wert_1: Anweisungen_1; break; case Wert_2: Anweisungen_2; break; default: Default-Anweisungen } \\n```  \\nwertet den Selektor-Term aus und führt abhängig vom Termwert Anweisungen_1, Anweisungen_2, ... aus. Entspricht der Termwert keinem der Werte Wert_1, Wert_2, ..., so werden die Default-Anweisungen ausgeführt.\",\r\n        \"%\": \"```\\na % b\\n```  \\n (sprich: 'a modulo b') berechnet den **Rest** der ganzzahligen Division a/b.\",\r\n        \"==\": \"```\\na == b\\n```  \\nergibt genau dann ```true```, wenn ```a``` und ```b``` gleich sind.  \\nSind a und b **Objekte**, so ergibt ```a == b``` nur dann ```true```, wenn ```a``` und ```b``` auf das **identische** Objekt zeigen.  \\n```==``` nennt man **Vergleichsoperator**.\",\r\n        \"<=\": \"```\\na <= b\\n```  \\nergibt genau dann ```true```, wenn der Wert von ```a``` kleiner oder gleich dem Wert von ```b``` ist.\",\r\n        \">=\": \"```\\na <= b\\n```  \\nergibt genau dann ```true```, wenn der Wert von ```a``` größer oder gleich dem Wert von ```b``` ist.\",\r\n        \"!=\": \"```\\na != b\\n```  \\nergibt genau dann ```true```, wenn ```a``` und ```b``` **un**gleich sind.  \\nSind ```a``` und ```b``` **Objekte**, so ergibt ```a != b``` dann ```true```, wenn ```a``` und ```b``` **nicht** auf das **identische** Objekt zeigen.  \\n```!=``` nennt man **Ungleich-Operator**.\",\r\n        \"+=\": \"```\\na += b\\n(Kurzschreibweise für a = a + b)\\n```  \\nbewirkt, dass der Wert von ```a``` um den Wert von ```b``` **erhöht** wird. Das Ergebnis wird in die Variable ```a``` geschrieben.\",\r\n        \"-=\": \"```\\na -= b\\n(Kurzschreibweise für a = a - b)\\n```  \\nbewirkt, dass der Wert von ```a``` um den Wert von ```b``` **erniedrigt** wird. Das Ergebnis wird in die Variable ```a``` geschrieben.\",\r\n        \"*=\": \"```\\na *= b\\n(Kurzschreibweise für a = a * b)\\n```  \\nbewirkt, dass der Wert von ```a``` mit dem Wert von ```b``` **multipliziert** wird. Das Ergebnis wird in die Variable ```a``` geschrieben.\",\r\n        \"/=\": \"```\\na /= b\\n(Kurzschreibweise für a = a / b)\\n```  \\nbewirkt, dass der Wert von ```a``` durch den Wert von ```b``` **dividiert** wird. Das Ergebnis wird in die Variable ```a``` geschrieben.\",\r\n        \"++\": \"```\\na++\\n(Kurzschreibweise für a = a + 1)\\n```  \\nbewirkt, dass der Wert von ```a``` um eins erhöht wird.\",\r\n        \"--\": \"```\\na--\\n(Kurzschreibweise für a = a - 1)\\n```  \\nbewirkt, dass der Wert von ```a``` um eins eniedrigt wird.\",\r\n        \"=\": \"```\\na = Term\\n```  \\nberechnet den Wert des Terms und weist ihn der Variablen ```a``` zu.  \\n**Vorsicht:**  \\nVerwechsle ```=```(**Zuweisungsoperator**) nicht mit ```==```(**Vergleichsoperator**)!\",\r\n        \"!\": \"```\\n!a\\n```  \\nergibt genau dann ```true```, wenn ```a``` ```false``` ergibt.  \\n```!``` spricht man '**nicht**'.\",\r\n        \"public\": \"```\\npublic\\n```  \\nAttribute und Methoden, die als ```public``` deklariert werden, sind überall (auch außerhalb der Klasse) sichtbar.\",\r\n        \"private\": \"```\\nprivate\\n```  \\nAttribute und Methoden, die als ```private``` deklariert werden, sind nur innerhalb von Methoden derselben Klasse sichtbar.\",\r\n        \"protected\": \"```\\nprotected\\n```  \\nAttribute und Methoden, die als ```protected``` deklariert werden, sind nur innerhalb von Methoden derselben Klasse oder innerhalb von Methoden von Kindklassen sichtbar.\",\r\n        \"return\": \"```\\nreturn Term\\n```  \\nbewirkt, dass die Methode verlassen wird und der Wert des Terms an die aufrufende Stelle zurückgegeben wird.\",\r\n        \"break\": \"```\\nbreak;\\n```  \\ninnerhalb einer Schleife bewirkt, dass die Schleife sofort verlassen und mit den Anweisungen nach der Schleife fortgefahren wird.  \\n\"+\r\n        \"```break``` innerhalb einer ```switch```-Anweisung bewirkt, dass der Block der ```switch```-Anweisung verlassen wird.\",\r\n\r\n    }\r\n\r\n    constructor(private editor: Editor) {\r\n\r\n    }\r\n\r\n    provideHover(model: monaco.editor.ITextModel, position: monaco.Position, token: monaco.CancellationToken):\r\n        monaco.languages.ProviderResult<monaco.languages.Hover> {\r\n\r\n        let selection: monaco.Selection = this.editor.editor.getSelection();\r\n        \r\n        // if cursor is inside current selection then don't show hover, because editor.onDidChangeCursorPosition evaluates selected Text \r\n        // (see class Editor).\r\n        if(selection != null){\r\n            if(selection.startLineNumber != selection.endLineNumber || selection.startColumn != selection.endColumn){\r\n                if(\r\n                    (selection.startLineNumber < position.lineNumber || selection.startLineNumber == position.lineNumber && selection.startColumn <= position.column) && \r\n                    (selection.endLineNumber > position.lineNumber || selection.endLineNumber == position.lineNumber && selection.endColumn >= position.column) \r\n                ){\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n\r\n        let module: Module = this.editor.main.getCurrentWorkspace()?.getModuleByMonacoModel(model);\r\n\r\n        if (module == null) {\r\n            return null;\r\n        }\r\n\r\n        for(let errorList of module.errors){\r\n            for(let error of errorList){\r\n                if(error.position.line == position.lineNumber && \r\n                    error.position.column <= position.column && \r\n                    error.position.column + error.position.length >= position.column){\r\n                        return null; // Show error-tooltip and don't show hover-tooltip\r\n                    }\r\n            }\r\n        }\r\n\r\n        let element = module.getElementAtPosition(position.lineNumber, position.column);\r\n\r\n        let declarationAsString = \"\";\r\n\r\n        if (element != null) {\r\n            if (element instanceof Klass || element instanceof Method || element instanceof Interface\r\n                || element instanceof Attribute) {\r\n                declarationAsString = getDeclarationAsString(element);\r\n            } else if (element instanceof PrimitiveType) {\r\n                declarationAsString = \"```\\n\" + element.identifier + \"\\n```  \\nprimitiver Datentyp: \" + element.description + \"\";\r\n                return {\r\n                    range: null,\r\n                    contents: [{ value: declarationAsString }],\r\n                }\r\n            } else {\r\n                // Variable\r\n                let typeIdentifier: string = element?.type?.identifier;\r\n                if(element?.type instanceof Klass || element?.type instanceof Interface){\r\n                    typeIdentifier += \" \" + getGenericParameterDefinition(element.type);\r\n                }\r\n\r\n                if (typeIdentifier == null) {\r\n                    typeIdentifier = \"\";\r\n                } else {\r\n                    typeIdentifier += \" \";\r\n                }\r\n\r\n                declarationAsString = typeIdentifier + element?.identifier;\r\n            }\r\n        } else {\r\n            let word = this.getWordUnderCursor(model, position);\r\n            let desc = MyHoverProvider.keywordDescriptions[word];\r\n            if (desc != null) {\r\n                return {\r\n                    range: null,\r\n                    contents: [{ value: desc }],\r\n                }\r\n            }\r\n        }\r\n\r\n        let state = this.editor.main.getInterpreter().state;\r\n\r\n        let value: string = null;\r\n\r\n        if (state == InterpreterState.paused) {\r\n            let evaluator = this.editor.main.getCurrentWorkspace().evaluator;\r\n\r\n            let identifier: string = this.widenDeclaration(model, position, element?.identifier);\r\n\r\n            if(identifier == null){\r\n                return null;\r\n            }\r\n\r\n            let result = evaluator.evaluate(identifier);\r\n            if (result.error == null && result.value != null) {\r\n                value = result.value.type.debugOutput(result.value);\r\n                declarationAsString = identifier;\r\n            }\r\n\r\n        }\r\n\r\n        let contents = [];\r\n\r\n        if (value == null && declarationAsString.length == 0) {\r\n            return null;\r\n        }\r\n\r\n        if (value != null) {\r\n            if (value.length + declarationAsString.length > 40) {\r\n                contents.push({ value: '```\\n' + declarationAsString + ' ==\\n```' });\r\n                contents.push({ value: '```\\n' + value.replace(/&nbsp;/g, \" \") + '\\n```' });\r\n            } else {\r\n                contents.push({ value: '```\\n' + declarationAsString + \" == \" + value.replace(/&nbsp;/g, \" \") + '\\n```' });\r\n            }\r\n        } else {\r\n            contents.push({ value: '```\\n' + declarationAsString + '\\n```' });\r\n        }\r\n\r\n        let range = null;\r\n\r\n        return {\r\n            range: range,\r\n            contents: contents,\r\n        }\r\n\r\n    }\r\n\r\n    getWordUnderCursor(model: monaco.editor.ITextModel, position: monaco.Position)\r\n         : string {\r\n        \r\n        let pos = model.getValueLengthInRange({\r\n            startColumn: 0,\r\n            startLineNumber: 0,\r\n            endLineNumber: position.lineNumber,\r\n            endColumn: position.column\r\n        });\r\n\r\n        let text = model.getValue();\r\n\r\n        let word = \"\";\r\n\r\n        let end = pos;\r\n        while (end < text.length && this.isInsideIdentifierOrArrayDescriptor(text.charAt(end))) {\r\n            end++;\r\n        }\r\n\r\n        let begin = pos;\r\n        while (begin > 0 && this.isInsideIdentifierOrArrayDescriptor(text.charAt(begin - 1))) {\r\n            begin--;\r\n        }\r\n\r\n        if (end - begin > 1) {\r\n            word = text.substring(begin, end);\r\n        } else {\r\n            end = pos;\r\n            while (end < text.length && this.isInsideOperator(text.charAt(end))) {\r\n                end++;\r\n            }\r\n    \r\n            begin = pos;\r\n            while (begin > 0 && this.isInsideOperator(text.charAt(begin - 1))) {\r\n                begin--;\r\n            }\r\n    \r\n            if (end - begin > 0) {\r\n                word = text.substring(begin, end);\r\n            }\r\n        }\r\n\r\n        return word;\r\n\r\n    }\r\n\r\n    widenDeclaration(model: monaco.editor.ITextModel, position: monaco.Position,\r\n        identifier: string): string {\r\n\r\n        let pos = model.getValueLengthInRange({\r\n            startColumn: 0,\r\n            startLineNumber: 0,\r\n            endLineNumber: position.lineNumber,\r\n            endColumn: position.column\r\n        });\r\n\r\n        let text = model.getValue();\r\n\r\n        let end = pos;\r\n        while (end < text.length && this.isInsideIdentifierOrArrayDescriptor(text.charAt(end))) {\r\n            end++;\r\n        }\r\n\r\n        let begin = pos;\r\n        while (begin > 0 && this.isInsideIdentifierChain(text.charAt(begin - 1))) {\r\n            begin--;\r\n        }\r\n\r\n        let lenght: number = identifier?.length == null ? 1 : identifier.length;\r\n\r\n        if (end - begin > length) {\r\n            return text.substring(begin, end);\r\n        }\r\n\r\n        return identifier;\r\n    }\r\n\r\n    isInsideIdentifierChain(t: string) {\r\n\r\n        return t.toLocaleLowerCase().match(/[a-z0-9äöüß_\\[\\]\\.]/i);\r\n\r\n    }\r\n\r\n    isInsideOperator(t: string) {\r\n\r\n        return t.toLocaleLowerCase().match(/[!%<>=\\+\\-\\*\\/]/i);\r\n\r\n    }\r\n\r\n    isInsideIdentifierOrArrayDescriptor(t: string) {\r\n\r\n        return t.toLocaleLowerCase().match(/[a-z0-9äöüß\\[\\]]/i);\r\n\r\n    }\r\n\r\n\r\n}","import { convertPxToNumber } from \"../../../tools/HtmlTools.js\";\r\n\r\nexport class ZoomControl {\r\n    \r\n    public static preventFading:boolean = false;\r\n\r\n    position: number = 0;\r\n    yMax: number;\r\n    $grip: JQuery<HTMLElement>;\r\n    $zoomcontrolDisplay: JQuery<HTMLElement>;\r\n\r\n    gripHeight: number = 10;\r\n    overallHeight: number = 150;\r\n\r\n    zoomMin: number = 0.2;\r\n    zoomMax: number = 2;\r\n\r\n\r\n    constructor($parentElement: JQuery<HTMLElement>, private callback?: (zoomfactor: number) => void){\r\n        let $zoomcontrolOuter = jQuery('<div class=\"jo_zoomcontrol-outer\" title=\"Zoom\" draggable=\"false\"></div>');\r\n        $parentElement.append($zoomcontrolOuter);\r\n        let $zoomcontrolBar = jQuery('<div class=\"jo_zoomcontrol-bar\" draggable=\"false\"></div>');\r\n        $zoomcontrolOuter.append($zoomcontrolBar);\r\n        this.$grip = jQuery('<div class=\"jo_zoomcontrol-grip\" draggable=\"false\"></div>');\r\n        $zoomcontrolOuter.append(this.$grip);\r\n        this.$zoomcontrolDisplay = jQuery('<div class=\"jo_zoomcontrol-display\"></div>');\r\n        this.$grip.append(this.$zoomcontrolDisplay);\r\n\r\n        let mousedownY: number;\r\n        let oldPosition: number;\r\n        let that = this;\r\n        that.overallHeight = convertPxToNumber($zoomcontrolOuter.css('height'));\r\n        that.gripHeight = convertPxToNumber(that.$grip.css('height'));\r\n        that.yMax = that.overallHeight - that.gripHeight;\r\n        \r\n        $zoomcontrolBar.on('mousedown', (e) => {\r\n\r\n            let y = e.pageY - $zoomcontrolOuter.offset().top - 4;\r\n            that.setZoom(y);\r\n            that.$grip.css('top', y + 'px');\r\n            //@ts-ignore\r\n            that.$grip.trigger('mousedown', [e.clientY]);\r\n\r\n        });\r\n        \r\n        \r\n        this.$grip.on('mousedown', (e, y) => {\r\n            if(y == null) y = e.clientY;\r\n            mousedownY = y;\r\n            oldPosition = that.position;\r\n            this.$zoomcontrolDisplay.show();\r\n\r\n            jQuery(document).on('mousemove.zoomcontrol', (e)=>{\r\n                let deltaY = e.clientY - mousedownY;\r\n                that.setZoom(oldPosition + deltaY);\r\n            });\r\n\r\n            jQuery(document).on('mouseup.zoomcontrol', () => {\r\n                jQuery(document).off('mouseup.zoomcontrol');\r\n                jQuery(document).off('mousemove.zoomcontrol');\r\n                this.$zoomcontrolDisplay.hide();\r\n            });\r\n\r\n            e.stopPropagation();\r\n\r\n        });\r\n\r\n        $parentElement.on(\"mouseenter\", (e) => {\r\n            if(!ZoomControl.preventFading)\r\n            $zoomcontrolOuter.fadeIn();\r\n        });\r\n        \r\n        $parentElement.on(\"mouseleave\", (e) => {\r\n            if(!ZoomControl.preventFading)\r\n            $zoomcontrolOuter.fadeOut();\r\n        });\r\n\r\n        let factor = (1.0 - this.zoomMin)/(this.zoomMax - this.zoomMin);\r\n        this.position = factor*(this.overallHeight - this.gripHeight);\r\n        this.$grip.css('top', this.position + \"px\");\r\n    }\r\n\r\n    setZoom(newPosition: number){\r\n\r\n        if(newPosition < 0){\r\n            newPosition = 0;\r\n        }\r\n\r\n        if(newPosition > this.yMax){\r\n            newPosition = this.yMax;\r\n        }\r\n\r\n        this.position = newPosition;\r\n\r\n        this.$grip.css('top', newPosition + \"px\");\r\n\r\n        let zoomfactor = newPosition/(this.overallHeight - this.gripHeight);\r\n        zoomfactor = this.zoomMin + zoomfactor*(this.zoomMax - this.zoomMin);\r\n\r\n        let zfs = Math.round(zoomfactor * 100) + \" %\";\r\n        this.$zoomcontrolDisplay.html(zfs);\r\n\r\n        if(this.callback != null){\r\n            this.callback(zoomfactor);\r\n        }\r\n\r\n    }\r\n\r\n}","import { ZoomControl } from \"./ZoomControl.js\";\r\nimport { ClassBox } from \"./classdiagram/ClassBox.js\";\r\nimport { Rectangle, Point } from \"./classdiagram/Router.js\";\r\nimport { DiagramElement } from \"./DiagramElement.js\";\r\nimport { Main } from \"../../Main.js\";\r\nimport { MainBase } from \"../../MainBase.js\";\r\n\r\nexport var DiagramUnitCm = 0.2; // in cm\r\n\r\nexport class Diagram {\r\n\r\n    zoomControl: ZoomControl;\r\n    zoomfactor: number = 1.0;\r\n\r\n    $canvas: JQuery<HTMLElement>;\r\n    svgElement: Element;\r\n\r\n    $menuButton: JQuery<HTMLElement>;\r\n\r\n    defs: Element;\r\n    style: Element;\r\n\r\n    inlineStyles: { [selector: string]: { [key: string]: string } } = {};\r\n    marginCm = 1.6;\r\n    minDistance = 2.0;\r\n    minWidthHeightCm = 10;\r\n    widthCm = this.minWidthHeightCm;\r\n    heightCm = this.minWidthHeightCm;\r\n\r\n    $centerRectangle: JQuery<SVGElement>;\r\n\r\n    constructor($htmlElement: JQuery<HTMLElement>, public main: MainBase){\r\n\r\n        this.$menuButton = jQuery('<div class=\"jo_classDiagram_Menubutton jo_button jo_active img_menu-three-bars\"></div>');\r\n        $htmlElement.append(this.$menuButton);\r\n\r\n        let $scrollpane = jQuery('<div></div>');\r\n        $htmlElement.append($scrollpane);\r\n        $scrollpane.addClass('jo_scrollable');\r\n        $scrollpane.css({overflow: \"auto\", position: \"relative\", width: \"100%\", height: \"100%\"});\r\n\r\n        this.$canvas = jQuery('<div class=\"jo_diagram-canvas\"></div>');\r\n        $scrollpane.append(this.$canvas);\r\n        this.zoomControl = new ZoomControl($htmlElement, (factor: number) => {\r\n            this.$canvas.css({\r\n                transform: \"scale(\" + factor + \")\"\r\n            });\r\n            this.zoomfactor = factor;\r\n        });\r\n\r\n        let ns = 'http://www.w3.org/2000/svg';\r\n        this.svgElement = document.createElementNS(ns, 'svg');\r\n        // jQuery(this.svgElement).css('pointer-events', 'none');\r\n        jQuery(this.svgElement).addClass(\"jo_diagram-svg svg_all_pointer_events\");\r\n\r\n        // this.insertStyleElement({\".svp_draggable\": {cursor: \"pointer\"}});\r\n\r\n        this.$canvas[0].appendChild(this.svgElement);\r\n\r\n        this.$centerRectangle = <any>jQuery(this.createElement(\"rect\", this.svgElement));\r\n\r\n        this.$centerRectangle.css({fill: \"#ffffff\", \"stroke\": \"none\"});\r\n\r\n        this.adjustCenterRectangle();\r\n\r\n        let $svgElement =  jQuery(this.svgElement);\r\n\r\n        let x: number;\r\n        let y: number;\r\n\r\n        $svgElement.on('mousedown', (ev1) => {\r\n            x = ev1.screenX;\r\n            y = ev1.screenY;\r\n            \r\n            jQuery(document).on('mousemove.diagram', (ev) => {\r\n                let dx = ev.screenX - x;\r\n                let dy = ev.screenY - y;\r\n                x = ev.screenX;\r\n                y = ev.screenY;\r\n                $scrollpane.scrollLeft($scrollpane.scrollLeft() - dx);\r\n                $scrollpane.scrollTop($scrollpane.scrollTop() - dy);\r\n            })\r\n\r\n            jQuery(document).on('mouseup.diagram', () => {\r\n                jQuery(document).off('mousemove.diagram');\r\n                jQuery(document).off('mouseup.diagram');\r\n            });\r\n\r\n\r\n        });\r\n\r\n\r\n    }    \r\n\r\n    adjustCenterRectangle(){\r\n        this.$centerRectangle.attr({\r\n            x: this.marginCm + \"cm\",\r\n            y: this.marginCm + \"cm\",\r\n            width: (this.widthCm - 2*this.marginCm) + \"cm\",    \r\n            height: (this.heightCm - 2*this.marginCm) + \"cm\"\r\n        });\r\n    }\r\n\r\n    setSize(widthCm: number, heightCm: number){\r\n        if(widthCm < this.minWidthHeightCm) widthCm = this.minWidthHeightCm;\r\n        if(heightCm < this.minWidthHeightCm) heightCm = this.minWidthHeightCm;\r\n\r\n        this.$canvas.css({\r\n            width: widthCm + \"cm\",\r\n            height: heightCm + \"cm\"\r\n        })\r\n\r\n        this.widthCm = widthCm;\r\n        this.heightCm = heightCm;\r\n\r\n        this.adjustCenterRectangle();\r\n    }\r\n\r\n    adjustSizeAndElements(diagramElements: DiagramElement[]): {isAdjusted: boolean}{\r\n\r\n        let xMin = 100000;\r\n        let yMin = 100000;\r\n        let xMax = -100000;\r\n        let yMax = -100000;\r\n\r\n        for(let rr of diagramElements){\r\n            if(xMin > rr.leftCm) xMin = rr.leftCm;\r\n            if(xMax < rr.leftCm + rr.widthCm) xMax = rr.leftCm + rr.widthCm;\r\n            if(yMin > rr.topCm) yMin = rr.topCm;\r\n            if(yMax < rr.topCm + rr.heightCm) yMax = rr.topCm + rr.heightCm;\r\n        }\r\n\r\n        xMin -= this.marginCm;\r\n        xMax += this.marginCm;\r\n        yMin -= this.marginCm;\r\n        yMax += this.marginCm;\r\n\r\n        let isAdjusted: boolean = false;\r\n        let newWidthCm = this.widthCm;\r\n        let newHeightCm = this.heightCm;\r\n\r\n        if(xMin < 0 || xMax > this.widthCm || (xMax - xMin <= this.widthCm && this.widthCm > this.minWidthHeightCm)){\r\n            let delta = 0;\r\n            newWidthCm = Math.max(this.minWidthHeightCm, xMax - xMin);\r\n\r\n            if(xMin < 0){\r\n                delta = -xMin;\r\n            }\r\n\r\n            if(xMin > 0 && xMax > newWidthCm){\r\n                delta = newWidthCm - xMax;\r\n            }\r\n            isAdjusted = delta != 0;\r\n\r\n            if(isAdjusted)\r\n            for(let rr of diagramElements){\r\n                rr.move(delta, 0, true, true);\r\n            }\r\n\r\n        }\r\n\r\n        if(yMin < 0 || yMax > this.heightCm || (yMax - yMin <= this.heightCm && this.heightCm > this.minWidthHeightCm)){\r\n            let delta = 0;\r\n            newHeightCm = Math.max(this.minWidthHeightCm, yMax - yMin);\r\n\r\n            if(yMin < 0){\r\n                delta = -yMin;\r\n            }\r\n\r\n            if(yMin > 0 && yMax > newHeightCm){\r\n                delta = newHeightCm - yMax;\r\n            }\r\n            isAdjusted = delta != 0;\r\n\r\n            if(isAdjusted)\r\n            for(let rr of diagramElements){\r\n                rr.move(0, delta, true, true);\r\n            }\r\n\r\n        }\r\n\r\n\r\n        this.setSize(newWidthCm, newHeightCm);\r\n        \r\n\r\n        return {isAdjusted: isAdjusted};\r\n\r\n    }\r\n\r\n    public insertStyleElement(styles: { [selector: string]: { [key: string]: string } } = null) {\r\n\r\n        let ns = 'http://www.w3.org/2000/svg';\r\n\r\n        if (this.style == null) {\r\n            this.defs = document.createElementNS(ns, 'defs');\r\n            this.style = document.createElementNS(ns, 'style');\r\n            this.defs.appendChild(this.style);\r\n            this.svgElement.appendChild(this.defs);\r\n        }\r\n\r\n        if (styles != null) {\r\n            this.inlineStyles = styles;\r\n            this.refreshInlineStyles();\r\n        }\r\n\r\n    }\r\n\r\n    public createElement(name: string, parent: Element = null, attributes?:\r\n        { [key: string]: string }): JQuery<Element> {\r\n\r\n        let ns = 'http://www.w3.org/2000/svg';\r\n        let $element = jQuery(document.createElementNS(ns, name));\r\n\r\n        if(attributes != null) $element.attr(attributes);\r\n\r\n        if(parent != null) parent.appendChild($element[0]);\r\n\r\n        return $element;\r\n\r\n    }\r\n\r\n    private refreshInlineStyles() {\r\n\r\n        let s: string = \"\";\r\n\r\n        for (let selector in this.inlineStyles) {\r\n            let stylesForSelector = this.inlineStyles[selector];\r\n            if (stylesForSelector != null) {\r\n                s += selector + \"{\\n\";\r\n                for (let key in stylesForSelector) {\r\n                    s += \"   \" + key + \":\" + stylesForSelector[key] + \";\\n\";\r\n                }\r\n                s += \"}\\n\";\r\n            } else {\r\n                s += selector + \"\\n\";\r\n            }\r\n        }\r\n\r\n        this.style.textContent = s;\r\n\r\n    }\r\n\r\n    findFreeSpace(elements: DiagramElement[], width: number, height: number, minDistance: number): Point {\r\n\r\n        let radius = 0;\r\n        let fertig: boolean = false;\r\n        let xCm = 0;\r\n        let yCm = 0;\r\n        while(!fertig){\r\n\r\n            let y = radius;\r\n            let x = 0;\r\n            for(x = 0; x <= radius; x++){\r\n                xCm = this.marginCm + x * DiagramUnitCm;\r\n                yCm = this.marginCm + y * DiagramUnitCm;\r\n                if(this.isFree(elements, width, height, xCm, yCm, minDistance)){\r\n                    fertig = true;\r\n                    break;\r\n                }\r\n            }\r\n            if(fertig) break;\r\n            x--;\r\n            for(y = 0; y <= radius - 1; y++){\r\n                xCm = this.marginCm + x * DiagramUnitCm;\r\n                yCm = this.marginCm + y * DiagramUnitCm;\r\n                if(this.isFree(elements, width, height, xCm, yCm, minDistance)){\r\n                    fertig = true;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            radius += 2;\r\n\r\n        }\r\n\r\n        return {x: xCm, y: yCm};\r\n\r\n    }\r\n\r\n    isFree(elements: DiagramElement[], widthCm: number, heightCm: number, leftCm: number, topCm: number, minDistance: number):boolean {\r\n\r\n        for(let element of elements){\r\n\r\n            let insideX = Math.abs(element.leftCm + element.widthCm/2 - leftCm - widthCm/2) \r\n                       <= (element.widthCm + widthCm)/2 + minDistance;\r\n\r\n            let insideY = Math.abs(element.topCm + element.heightCm/2 - topCm - heightCm/2) <= (element.heightCm + heightCm)/2 + minDistance;\r\n\r\n            if(insideX && insideY) return false;\r\n\r\n        }\r\n\r\n        return true;\r\n\r\n    }\r\n\r\n\r\n}","import { DiagramUnitCm, Diagram } from \"./Diagram.js\"; \r\nimport { Rectangle } from \"./classdiagram/Router.js\";\r\n\r\nexport enum Alignment {\r\n    left, center, right\r\n}\r\n\r\nexport type TextLine = {\r\n    type: \"text\",\r\n    text: string,\r\n    tooltip?: string,\r\n    alignment?: Alignment,\r\n    bold?: boolean,\r\n    italics?: boolean,\r\n    textHeightCm?: number,\r\n    textWidthCm?: number,\r\n    yCm?: number\r\n    $element?: JQuery<SVGTextElement>,\r\n    onClick?: () => void\r\n}\r\n\r\nexport type HorizontalLine = {\r\n    type: \"line\",\r\n    $element?: JQuery<SVGLineElement>,\r\n    thicknessCm: number,\r\n    yCm?: number\r\n}\r\n\r\nexport abstract class DiagramElement {\r\n\r\n    public static cmPerPx: number = 2.54/96;\r\n\r\n    public $element: JQuery<Element>;\r\n\r\n    public leftCm: number = 0; // x-Koordinate in cm\r\n    public topCm: number = 0; // y-Koordinate in cm\r\n \r\n    public widthCm: number;\r\n    public heightCm: number; \r\n\r\n    protected lines: (TextLine | HorizontalLine)[] = [];\r\n\r\n    public backgroundColor: string = \"#ffffff\";\r\n\r\n    constructor(protected parent: Element) {\r\n\r\n    }\r\n\r\n    getRoutingRectangle(): Rectangle{\r\n        return {\r\n            left: Math.round(this.leftCm/DiagramUnitCm),\r\n            top: Math.round(this.topCm/DiagramUnitCm),\r\n            width: Math.round(this.widthCm/DiagramUnitCm),\r\n            height: Math.round(this.heightCm/DiagramUnitCm) \r\n        };\r\n    }\r\n\r\n    public show(){\r\n        if(this.$element == null) return;\r\n        this.$element.show();\r\n    }\r\n\r\n    public hide(){\r\n        if(this.$element == null) return;\r\n        this.$element.hide();\r\n    }\r\n\r\n    detach() {\r\n        if(this.$element == null) return;\r\n        this.$element.detach();        \r\n    }\r\n\r\n    remove() {\r\n        if(this.$element == null) return;\r\n        this.$element.remove();\r\n        this.$element = null;        \r\n    }\r\n\r\n    appendTo($element: JQuery<Element>){\r\n        $element.append(this.$element);\r\n    }\r\n\r\n    public clear(){\r\n        if(this.$element == null) return;\r\n        this.$element.empty();\r\n        this.lines = [];\r\n    }\r\n\r\n    public move(xCm: number, yCm: number, withRaster: boolean, adjustToRaster: boolean = false) {\r\n        this.leftCm += xCm;\r\n        this.topCm += yCm;\r\n\r\n        let x = this.leftCm;\r\n        let y = this.topCm;\r\n\r\n        if(withRaster){\r\n            x = Math.round(x/DiagramUnitCm)*DiagramUnitCm;\r\n            y = Math.round(y/DiagramUnitCm)*DiagramUnitCm;\r\n        }\r\n\r\n        if(adjustToRaster){\r\n            this.leftCm = x;\r\n            this.topCm = y;\r\n        }\r\n\r\n        jQuery(this.$element).css(\"transform\", \"translate(\" + x + \"cm,\" + y + \"cm)\");\r\n    }\r\n\r\n    public moveTo(xCm: number, yCm: number, withRaster: boolean) {\r\n        this.move(xCm - this.leftCm, yCm - this.topCm, withRaster);\r\n    }\r\n\r\n    public createElement(name: string, parent: Element = null, attributes?:\r\n        { [key: string]: string }): JQuery<Element> {\r\n\r\n        let ns = 'http://www.w3.org/2000/svg';\r\n        let $element = jQuery(document.createElementNS(ns, name));\r\n\r\n        if(attributes != null) $element.attr(attributes);\r\n\r\n        if(parent != null) parent.appendChild($element[0]);\r\n\r\n        return $element;\r\n\r\n    }\r\n\r\n    public createTextElement(text: string, parent: Element = null, attributes?:\r\n        { [key: string]: string }): JQuery<Element> {\r\n\r\n            let $element: JQuery<Element> = this.createElement(\"text\", parent, {\r\n                font: \"16px Roboto\",\r\n                \"font-family\": \"sans-serif\",\r\n                fill: \"#000\",\r\n                \"alignment-baseline\":\"hanging\"\r\n            });\r\n\r\n            if(attributes != null) $element.attr(attributes);\r\n\r\n            $element.text(text);\r\n\r\n            return $element;\r\n    }\r\n\r\n    public getTextMetrics(textElement: JQuery<SVGTextElement>):{height: number, width: number}{\r\n        let bbox:DOMRect = textElement[0].getBBox();\r\n        \r\n        return {\r\n            height: bbox.height * DiagramElement.cmPerPx,\r\n            width: bbox.width * DiagramElement.cmPerPx\r\n        }\r\n\r\n    }\r\n\r\n    public addTextLine(line: TextLine | HorizontalLine){\r\n\r\n        this.lines.push(line);\r\n\r\n        if(line.type == \"text\"){\r\n            if(line.alignment == null) line.alignment = Alignment.left;\r\n            if(line.bold == null) line.bold = false;\r\n            if(line.italics == null) line.italics = false;\r\n        }\r\n\r\n    }\r\n\r\n    public render(){\r\n\r\n        let $group = this.$element;\r\n        if($group == null){\r\n            $group = this.createElement(\"g\", this.parent);\r\n            $group.addClass(\"svg_draggable\");\r\n            $group.addClass(\"svg_all_pointer_events\");\r\n            this.$element = $group;\r\n            jQuery(this.$element).css(\"transform\", \"translate(\" + this.leftCm + \"cm,\" + this.topCm + \"cm)\");\r\n        }\r\n\r\n        let $rect = this.createElement(\"rect\", $group[0]);\r\n\r\n        let textPosYCm: number = 0.1;\r\n        let maxWidthCm: number = 0;\r\n\r\n        let first: boolean = true;\r\n        for(let line of this.lines){\r\n            if(line.type == \"text\"){\r\n                if(first) textPosYCm += 0.1;\r\n                first = false;\r\n                line.yCm = textPosYCm;\r\n                line.$element = <JQuery<SVGTextElement>>this.createTextElement(line.text, $group[0], {\r\n                    \"font-weight\" : line.bold?\"bold\":\"normal\",\r\n                    \"font-size\": \"12pt\",\r\n                    \"font-style\": line.italics?\"italic\":\"normal\",\r\n                    \"text-anchor\": line.alignment == Alignment.left ? \"start\" : line.alignment == Alignment.center ? \"middle\" : \"end\",\r\n                    \"cursor\": line.onClick == null ? \"\" : \"pointer\"\r\n                } );\r\n                line.$element.css(\"transform\", \"translate(0cm,\" + textPosYCm + \"cm)\");\r\n                if(line.onClick != null){\r\n                    line.$element.addClass(\"clickable\");\r\n                    line.$element.on(\"mousedown\", (event) => {\r\n                        //@ts-ignore\r\n                        line.onClick();\r\n                        event.stopPropagation();\r\n                    })\r\n                }\r\n                let metrics = this.getTextMetrics(line.$element);\r\n                line.textHeightCm = metrics.height;\r\n                line.textWidthCm = metrics.width;\r\n                maxWidthCm = Math.max(maxWidthCm, line.textWidthCm);\r\n                textPosYCm += line.textHeightCm;\r\n                if(line.tooltip != null){\r\n                    let $tooltip = this.createElement(\"title\", line.$element[0]);\r\n                    $tooltip.text(line.tooltip);\r\n                }\r\n            } else {\r\n                line.yCm = textPosYCm + line.thicknessCm/2;\r\n                textPosYCm += line.thicknessCm + 0.1;\r\n                first = true;\r\n            }\r\n        }\r\n\r\n        let width = 2 * 0.05 + 2*0.2 + maxWidthCm;\r\n        this.widthCm = (Math.trunc(width/DiagramUnitCm) + 1)*DiagramUnitCm;\r\n        this.heightCm = (Math.trunc(textPosYCm/DiagramUnitCm) + 1)*DiagramUnitCm;\r\n\r\n        let textLeft = 0.05 + 0.2;\r\n        let textCenter = width/2;\r\n        let textRight = width - textLeft;\r\n\r\n        $rect.css({\r\n            width: this.widthCm + \"cm\",\r\n            height: this.heightCm + \"cm\",\r\n            fill: this.backgroundColor,\r\n            stroke: \"#000\",\r\n            \"stroke-width\": \"0.05cm\"\r\n        });\r\n\r\n\r\n        for(let line of this.lines){\r\n            if(line.type == \"text\"){\r\n\r\n                let x: number;\r\n                switch(line.alignment){\r\n                    case Alignment.center: x = textCenter; break;\r\n                    case Alignment.left: x = textLeft; break;\r\n                    case Alignment.right: x = textRight; break;\r\n                }\r\n                line.$element.css(\"transform\", \"translate(\" + x + \"cm,\"+line.yCm + \"cm)\");\r\n\r\n            } else {\r\n                line.$element = <JQuery<SVGLineElement>>this.createElement(\"line\", $group[0], {\r\n                    x1: \"0\",\r\n                    y1: line.yCm + \"cm\",\r\n                    x2: this.widthCm + \"cm\",\r\n                    y2: line.yCm + \"cm\"\r\n                });\r\n\r\n                line.$element.css({\r\n                    stroke: \"#000\",\r\n                    \"stroke-width\": line.thicknessCm + \"cm\"        \r\n                });\r\n\r\n            }\r\n        }\r\n\r\n\r\n        \r\n\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Point } from \"./Router.js\";\r\nimport { DiagramArrow } from \"./DiagramArrow.js\";\r\nimport { DiagramUnitCm } from \"../Diagram.js\";\r\n\r\ntype Step = {r: number, f: number};\r\ntype Arrow = {\r\n    steps: Step[],\r\n    stroke: string,\r\n    fill: string,\r\n    \"stroke-dasharray\": string\r\n}\r\n\r\nexport class ArrowHead {\r\n\r\n    static rauteAlpha = 60;\r\n    static arrows: {[type: string]: Arrow} = {\r\n        \"inheritance\": {\r\n            steps: [{r: 150, f: 0.4}, {r: 120, f: 0.4}, {r: 120, f: 0.4}],\r\n            stroke: \"#000000\",\r\n            fill: \"#ffffff\",\r\n            \"stroke-dasharray\": undefined //\"4\"\r\n        },\r\n        \"realization\": {\r\n            steps: [{r: 150, f: 0.4}, {r: 120, f: 0.4}, {r: 120, f: 0.4}],\r\n            stroke: \"#000000\",\r\n            fill: \"#8080ff\",\r\n            \"stroke-dasharray\": \"4\"\r\n        },\r\n        \"composition\": {\r\n            steps: [{r: 90 + ArrowHead.rauteAlpha, f: 0.3}, {r: 180 - 2*ArrowHead.rauteAlpha, f: 0.3},\r\n                 {r: 2*ArrowHead.rauteAlpha, f: 0.3}, {r: 180 - 2*ArrowHead.rauteAlpha, f: 0.3}],\r\n            stroke: \"#000000\",\r\n            fill: \"#ffffff\",\r\n            \"stroke-dasharray\": undefined\r\n        },\r\n    }\r\n\r\n    static makeHead(position1Cm: Point, position2Cm: Point, type: string): {\r\n        path: string,\r\n        stroke: string,\r\n        fill: string,\r\n    } {\r\n\r\n        let dx = position2Cm.x - position1Cm.x;\r\n        let dy = position2Cm.y - position1Cm.y;\r\n\r\n        let d = Math.sqrt(dx*dx+dy*dy);\r\n        \r\n        if(d < 0.00001) return {path: \"\", stroke: \"none\", fill: \"none\"};\r\n\r\n        let ex = dx/d;\r\n        let ey = dy/d;\r\n\r\n        let path: string = \"M \" + position2Cm.x * DiagramUnitCm / DiagramArrow.cmPerPx \r\n            + \" \" + position2Cm.y * DiagramUnitCm / DiagramArrow.cmPerPx;\r\n\r\n        let arrow = this.arrows[type];\r\n\r\n        for(let step of arrow.steps){\r\n            let angle = step.r / 180 * Math.PI;\r\n            let ex1 = ex * Math.cos(angle) - ey * Math.sin(angle);\r\n            let ey1 = ex * Math.sin(angle) + ey * Math.cos(angle);\r\n            path += \" l \" + ex1 * step.f / DiagramArrow.cmPerPx + \" \" + ey1 * step.f / DiagramArrow.cmPerPx;\r\n            ex = ex1;\r\n            ey = ey1;\r\n        }\r\n\r\n        return {\r\n            path: path,\r\n            fill: arrow.fill,\r\n            stroke: arrow.stroke\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n}","import { DiagramUnitCm, Diagram } from \"../Diagram.js\";\r\nimport { RoutingArrow, Point } from \"./Router.js\";\r\nimport { ArrowHead } from \"./ArrowHead.js\";\r\n\r\nexport class DiagramArrow {\r\n\r\n    public static cmPerPx: number = 2.54 / 96;\r\n\r\n    public $element: JQuery<Element>;\r\n\r\n    constructor(protected parent: Element, private routingArrow: RoutingArrow, private color: string) {\r\n\r\n    }\r\n\r\n    public show() {\r\n        if (this.$element == null) return;\r\n        this.$element.show();\r\n    }\r\n\r\n    public hide() {\r\n        if (this.$element == null) return;\r\n        this.$element.hide();\r\n    }\r\n\r\n    detach() {\r\n        if (this.$element == null) return;\r\n        this.$element.detach();\r\n    }\r\n\r\n    remove() {\r\n        if (this.$element == null) return;\r\n        this.$element.remove();\r\n    }\r\n\r\n    appendTo($element: JQuery<Element>) {\r\n        $element.append(this.$element);\r\n    }\r\n\r\n    public clear() {\r\n        if (this.$element == null) return;\r\n        this.$element.empty();\r\n    }\r\n\r\n    public createElement(name: string, parent: Element = null, attributes?:\r\n        { [key: string]: string }): JQuery<Element> {\r\n\r\n        let ns = 'http://www.w3.org/2000/svg';\r\n        let $element = jQuery(document.createElementNS(ns, name));\r\n\r\n        if (attributes != null) $element.attr(attributes);\r\n\r\n        if (parent != null) parent.appendChild($element[0]);\r\n\r\n        return $element;\r\n\r\n    }\r\n\r\n\r\n    public createTextElement(text: string, parent: Element = null, attributes?:\r\n        { [key: string]: string }): JQuery<Element> {\r\n\r\n        let $element: JQuery<Element> = this.createElement(\"text\", parent, {\r\n            font: \"16px Roboto\",\r\n            \"font-family\": \"sans-serif\",\r\n            fill: \"#000\",\r\n            \"alignment-baseline\": \"hanging\"\r\n        });\r\n\r\n        if (attributes != null) $element.attr(attributes);\r\n\r\n        $element.text(text);\r\n\r\n        return $element;\r\n    }\r\n\r\n    public getTextMetrics(textElement: JQuery<SVGTextElement>): { height: number, width: number } {\r\n        let bbox: DOMRect = textElement[0].getBBox();\r\n\r\n        return {\r\n            height: bbox.height * DiagramArrow.cmPerPx,\r\n            width: bbox.width * DiagramArrow.cmPerPx\r\n        }\r\n\r\n    }\r\n\r\n\r\n    public render() {\r\n\r\n        let $group = this.$element;\r\n        if ($group == null) {\r\n            $group = this.createElement(\"g\", this.parent);\r\n            this.$element = $group;\r\n            $group.css(\"stroke\", this.color);\r\n        } else {\r\n            $group.empty();\r\n        }\r\n\r\n        let points = this.routingArrow.minimalPoints;\r\n        if (points == null || points.length < 2) {\r\n            return;\r\n        }\r\n\r\n        let path = \"M \" + this.getPathCoordinates(points[0]);\r\n\r\n        for (let i = 1; i < points.length; i++) {\r\n            path += \" L \" + this.getPathCoordinates(points[i]);\r\n        }\r\n\r\n        let arrowData = ArrowHead.arrows[this.routingArrow.arrowType];\r\n        let $path = this.createElement(\"path\", $group[0], { d: path });\r\n        $path.css({\r\n            // stroke: \"#000000\",\r\n            \"stroke-width\": \"0.2 cm\",\r\n            \"fill\": \"none\",\r\n            \"stroke-dasharray\": arrowData[\"stroke-dasharray\"]\r\n        });\r\n\r\n        while (points.length > 1 && points[points.length - 1].x == points[points.length - 2].x &&\r\n            points[points.length - 1].y == points[points.length - 2].y) {\r\n            points.pop();\r\n        }\r\n\r\n        if (points.length > 1 && this.routingArrow.endsOnArrowWithIdentifier == null) {\r\n            let head = ArrowHead.makeHead(points[points.length - 2], points[points.length - 1],\r\n                this.routingArrow.arrowType);\r\n\r\n            let $head = this.createElement(\"path\", $group[0], { d: head.path });\r\n            $head.css({\r\n                stroke: this.color,\r\n                \"stroke-width\": \"0.2 cm\",\r\n                \"fill\": head.fill\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    getPathCoordinates(point: Point): string {\r\n        let x = point.x * DiagramUnitCm / DiagramArrow.cmPerPx;\r\n        let y = point.y * DiagramUnitCm / DiagramArrow.cmPerPx;\r\n        return \"\" + x + \" \" + y;\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Compiler, CompilerStatus } from \"../compiler/Compiler.js\";\r\nimport { Module, File } from \"../compiler/parser/Module.js\";\r\nimport { Debugger } from \"../interpreter/Debugger.js\";\r\nimport { Interpreter, InterpreterState } from \"../interpreter/Interpreter.js\";\r\nimport { ActionManager } from \"../main/gui/ActionManager.js\";\r\nimport { BottomDiv } from \"../main/gui/BottomDiv.js\";\r\nimport { Editor } from \"../main/gui/Editor.js\";\r\nimport { ProgramControlButtons } from \"../main/gui/ProgramControlButtons.js\";\r\nimport { RightDiv } from \"../main/gui/RightDiv.js\";\r\nimport { MainBase } from \"../main/MainBase.js\";\r\nimport { Workspace } from \"../workspace/Workspace.js\";\r\nimport { JOScript } from \"./EmbeddedStarter.js\";\r\nimport { makeTabs, openContextMenu } from \"../tools/HtmlTools.js\";\r\nimport { EmbeddedSlider } from \"./EmbeddedSlider.js\";\r\nimport { TilingSprite } from \"pixi.js\";\r\nimport { EmbeddedFileExplorer } from \"./EmbeddedFileExplorer.js\";\r\nimport { TextPosition } from \"../compiler/lexer/Token.js\";\r\nimport { EmbeddedIndexedDB } from \"./EmbeddedIndexedDB.js\";\r\nimport { SemicolonAngel } from \"../compiler/parser/SemicolonAngel.js\";\r\nimport { TextPositionWithModule } from \"../compiler/types/Types.js\";\r\n\r\ntype JavaOnlineConfig = {\r\n    withFileList?: boolean,\r\n    withPCode?: boolean,\r\n    withConsole?: boolean,\r\n    withErrorList?: boolean,\r\n    withBottomPanel?: boolean,\r\n    id?: string\r\n}\r\n\r\nexport class MainEmbedded implements MainBase {\r\n    isEmbedded(): boolean { return true; }\r\n\r\n    jumpToDeclaration(module: Module, declaration: TextPositionWithModule){};\r\n\r\n    getCompiler(): Compiler {\r\n        return this.compiler;\r\n    }\r\n    getInterpreter(): Interpreter {\r\n        return this.interpreter;\r\n    }\r\n    getCurrentWorkspace(): Workspace {\r\n        return this.currentWorkspace;\r\n    }\r\n    getDebugger(): Debugger {\r\n        return this.debugger;\r\n    }\r\n    getMonacoEditor(): monaco.editor.IStandaloneCodeEditor {\r\n        return this.editor.editor;\r\n    }\r\n\r\n    getRightDiv(): RightDiv {\r\n        return this.rightDiv;\r\n    }\r\n\r\n    getBottomDiv(): BottomDiv {\r\n        return this.bottomDiv;\r\n    }\r\n\r\n    getActionManager(): ActionManager {\r\n        return this.actionManager;\r\n    }\r\n\r\n    getCurrentlyEditedModule(): Module {\r\n        if (this.config.withFileList) {\r\n            return this.fileExplorer.currentFile?.module;\r\n        } else {\r\n            return this.currentWorkspace.moduleStore.getFirstModule();\r\n        }\r\n    }\r\n\r\n    config: JavaOnlineConfig;\r\n\r\n    editor: Editor;\r\n    programPointerDecoration: string[] = [];\r\n    programPointerModule: Module;\r\n\r\n    currentWorkspace: Workspace;\r\n    actionManager: ActionManager;\r\n\r\n    compiler: Compiler;\r\n\r\n    interpreter: Interpreter;\r\n    $runDiv: JQuery<HTMLElement>;\r\n\r\n    debugger: Debugger;\r\n    $debuggerDiv: JQuery<HTMLElement>;\r\n\r\n    bottomDiv: BottomDiv;\r\n    $filesListDiv: JQuery<HTMLElement>;\r\n\r\n    $hintDiv: JQuery<HTMLElement>;\r\n    $monacoDiv: JQuery<HTMLElement>;\r\n    $resetButton: JQuery<HTMLElement>;\r\n\r\n    programIsExecutable = false;\r\n    version: number = 0;\r\n\r\n    timerHandle: any;\r\n\r\n    rightDiv: RightDiv;\r\n    $rightDivInner: JQuery<HTMLElement>;\r\n\r\n    fileExplorer: EmbeddedFileExplorer;\r\n\r\n    debounceDiagramDrawing: any;\r\n\r\n    indexedDB: EmbeddedIndexedDB;\r\n\r\n    compileRunsAfterCodeReset: number = 0;\r\n\r\n    semicolonAngel: SemicolonAngel;\r\n\r\n    constructor($div: JQuery<HTMLElement>, private scriptList: JOScript[]) {\r\n\r\n        this.readConfig($div);\r\n\r\n        this.initGUI($div);\r\n\r\n        this.initScripts();\r\n\r\n        this.indexedDB = new EmbeddedIndexedDB();\r\n        this.indexedDB.open(() => {\r\n\r\n            if (this.config.id != null) {\r\n                this.readScripts();\r\n            }\r\n\r\n        });\r\n\r\n        this.semicolonAngel = new SemicolonAngel(this);\r\n\r\n    }\r\n\r\n    initScripts() {\r\n\r\n        this.fileExplorer?.removeAllFiles();\r\n\r\n        this.initWorkspace(this.scriptList);\r\n\r\n        if (this.config.withFileList) {\r\n            this.fileExplorer = new EmbeddedFileExplorer(this.currentWorkspace.moduleStore, this.$filesListDiv, this);\r\n            this.fileExplorer.setFirstFileActive();\r\n            this.scriptList.filter((script) => script.type == \"hint\").forEach((script) => this.fileExplorer.addHint(script));\r\n        } else {\r\n            this.setModuleActive(this.currentWorkspace.moduleStore.getFirstModule());\r\n        }\r\n\r\n    }\r\n\r\n\r\n    readConfig($div: JQuery<HTMLElement>) {\r\n        let configJson: string | object = $div.data(\"java-online\");\r\n        if (configJson != null && typeof configJson == \"string\") {\r\n            this.config = JSON.parse(configJson.split(\"'\").join('\"'));\r\n        } else {\r\n            this.config = {}\r\n        }\r\n\r\n        if (this.config.withFileList == null) this.config.withFileList = true;\r\n        if (this.config.withPCode == null) this.config.withPCode = true;\r\n        if (this.config.withConsole == null) this.config.withConsole = true;\r\n        if (this.config.withErrorList == null) this.config.withErrorList = true;\r\n        if (this.config.withBottomPanel == null) this.config.withBottomPanel = true;\r\n\r\n        if (!(this.config.withConsole || this.config.withPCode || this.config.withFileList || this.config.withErrorList)) {\r\n            this.config.withBottomPanel = false;\r\n        }\r\n\r\n        if (!this.config.withBottomPanel) {\r\n            this.config.withFileList = false;\r\n            this.config.withPCode = false;\r\n            this.config.withConsole = false;\r\n            this.config.withErrorList = false;\r\n        }\r\n\r\n\r\n    }\r\n\r\n    setModuleActive(module: Module) {\r\n\r\n        if (this.config.withFileList && this.fileExplorer.currentFile != null) {\r\n            this.fileExplorer.currentFile.module.editorState = this.getMonacoEditor().saveViewState();\r\n        }\r\n\r\n        if (this.config.withFileList) {\r\n            this.fileExplorer.markFile(module);\r\n        }\r\n\r\n        /**\r\n         * WICHTIG: Die Reihenfolge der beiden Operationen ist extrem wichtig.\r\n         * Falls das Model im readonly-Zustand gesetzt wird, funktioniert <Strg + .> \r\n         * nicht und die Lightbulbs werden nicht angezeigt, selbst dann, wenn\r\n         * später readonly = false gesetzt wird.\r\n         */\r\n        this.getMonacoEditor().updateOptions({\r\n            readOnly: false,\r\n            lineNumbersMinChars: 4\r\n        });\r\n        this.editor.editor.setModel(module.model);\r\n\r\n\r\n        if (module.editorState != null) {\r\n            this.getMonacoEditor().restoreViewState(module.editorState);\r\n        }\r\n\r\n        module.renderBreakpointDecorators();\r\n\r\n    }\r\n\r\n\r\n\r\n    readScripts() {\r\n\r\n        let modules = this.currentWorkspace.moduleStore.getModules(false);\r\n\r\n        let that = this;\r\n\r\n        this.indexedDB.getScript(this.config.id, (scriptListJSon) => {\r\n            if (scriptListJSon == null) {\r\n                setInterval(() => {\r\n                    that.saveScripts();\r\n                }, 1000);\r\n            } else {\r\n\r\n                let scriptList: string[] = JSON.parse(scriptListJSon);\r\n                let countDown = scriptList.length;\r\n\r\n                for (let module of modules) {\r\n                    that.fileExplorer?.removeModule(module);\r\n                    that.removeModule(module);\r\n                }\r\n\r\n                for (let name of scriptList) {\r\n\r\n                    let scriptId = this.config.id + name;\r\n                    this.indexedDB.getScript(scriptId, (script) => {\r\n                        if (script != null) {\r\n\r\n                            let module = that.addModule({\r\n                                title: name,\r\n                                text: script,\r\n                                type: \"java\"\r\n                            });\r\n\r\n                            that.fileExplorer?.addModule(module);\r\n                            that.$resetButton.fadeIn(1000);\r\n\r\n                            // console.log(\"Retrieving script \" + scriptId);\r\n                        }\r\n                        countDown--;\r\n                        if (countDown == 0) {\r\n                            setInterval(() => {\r\n                                that.saveScripts();\r\n                            }, 1000);\r\n                            that.fileExplorer?.setFirstFileActive();\r\n                            if (that.fileExplorer == null) {\r\n                                let modules = that.currentWorkspace.moduleStore.getModules(false);\r\n                                if (modules.length > 0) that.setModuleActive(modules[0]);\r\n                            }\r\n                        }\r\n                    })\r\n\r\n                }\r\n\r\n            }\r\n\r\n\r\n        });\r\n\r\n\r\n    }\r\n\r\n    saveScripts() {\r\n\r\n        let modules = this.currentWorkspace.moduleStore.getModules(false);\r\n\r\n        let scriptList: string[] = [];\r\n        let oneNotSaved: boolean = false;\r\n\r\n        modules.forEach(m => oneNotSaved = oneNotSaved || !m.file.saved);\r\n\r\n        if (oneNotSaved) {\r\n\r\n            for (let module of modules) {\r\n                scriptList.push(module.file.name);\r\n                let scriptId = this.config.id + module.file.name;\r\n                this.indexedDB.writeScript(scriptId, module.getProgramTextFromMonacoModel());\r\n                module.file.saved = true;\r\n                // console.log(\"Saving script \" + scriptId);\r\n            }\r\n\r\n            this.indexedDB.writeScript(this.config.id, JSON.stringify(scriptList));\r\n        }\r\n\r\n    }\r\n\r\n    deleteScriptsInDB() {\r\n        this.indexedDB.getScript(this.config.id, (scriptListJSon) => {\r\n            if (scriptListJSon == null) {\r\n                return;\r\n            } else {\r\n\r\n                let scriptList: string[] = JSON.parse(scriptListJSon);\r\n\r\n                for (let name of scriptList) {\r\n\r\n                    let scriptId = this.config.id + name;\r\n                    this.indexedDB.removeScript(scriptId);\r\n                }\r\n\r\n                this.indexedDB.removeScript(this.config.id);\r\n\r\n            }\r\n\r\n\r\n        });\r\n\r\n    }\r\n\r\n    initWorkspace(scriptList: JOScript[]) {\r\n        this.currentWorkspace = new Workspace(\"Embedded-Workspace\", this, 0);\r\n\r\n        let i = 0;\r\n        for (let script of scriptList) {\r\n            if (script.type == \"java\") {\r\n                this.addModule(script);\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    addModule(script: JOScript): Module {\r\n        let module: Module = Module.restoreFromData({\r\n            id: this.currentWorkspace.moduleStore.getModules(true).length,\r\n            name: script.title,\r\n            text: script.text,\r\n            text_before_revision: null,\r\n            submitted_date: null,\r\n            student_edited_after_revision: false,\r\n            version: 1,\r\n            workspace_id: 0,\r\n            forceUpdate: false,\r\n            identical_to_repository_version: false\r\n        }, this);\r\n\r\n        this.currentWorkspace.moduleStore.putModule(module);\r\n\r\n        let that = this;\r\n\r\n        module.model.onDidChangeContent(() => {\r\n            that.considerShowingCodeResetButton();\r\n        });\r\n\r\n        return module;\r\n    }\r\n\r\n    removeModule(module: Module) {\r\n        this.currentWorkspace.moduleStore.removeModule(module);\r\n    }\r\n\r\n\r\n    initGUI($div: JQuery<HTMLElement>) {\r\n\r\n        // let $leftDiv = jQuery('<div class=\"joe_leftDiv\"></div>');\r\n\r\n        $div.css({\r\n            \"background-image\": \"none\",\r\n            \"background-size\": \"100%\"\r\n        })\r\n\r\n        let $centerDiv = jQuery('<div class=\"joe_centerDiv\"></div>');\r\n        let $resetModalWindow = this.makeCodeResetModalWindow($div);\r\n\r\n        let $rightDiv = this.makeRightDiv();\r\n\r\n        let $editorDiv = jQuery('<div class=\"joe_editorDiv\"></div>');\r\n        this.$monacoDiv = jQuery('<div class=\"joe_monacoDiv\"></div>');\r\n        this.$hintDiv = jQuery('<div class=\"joe_hintDiv jo_scrollable\"></div>');\r\n        this.$resetButton = jQuery('<div class=\"joe_resetButton jo_button jo_active\" title=\"Code auf Ausgangszustand zurücksetzen\">Code Reset</div>');\r\n\r\n        $editorDiv.append(this.$monacoDiv, this.$hintDiv, this.$resetButton);\r\n\r\n        let $bracketErrorDiv = this.makeBracketErrorDiv();\r\n        $editorDiv.append($bracketErrorDiv);\r\n\r\n        this.$resetButton.hide();\r\n\r\n        this.$resetButton.on(\"click\", () => { $resetModalWindow.show(); })\r\n\r\n        this.$hintDiv.hide();\r\n\r\n        let $controlsDiv = jQuery('<div class=\"joe_controlsDiv\"></div>');\r\n        let $bottomDivInner = jQuery('<div class=\"joe_bottomDivInner\"></div>');\r\n\r\n\r\n        if (this.config.withBottomPanel) {\r\n            let $bottomDiv = jQuery('<div class=\"joe_bottomDiv\"></div>');\r\n            this.makeBottomDiv($bottomDivInner, $controlsDiv);\r\n            $bottomDiv.append($bottomDivInner);\r\n            if (this.config.withFileList) {\r\n                let $filesDiv = this.makeFilesDiv();\r\n                $bottomDiv.prepend($filesDiv);\r\n                new EmbeddedSlider($filesDiv, false, false, () => { });\r\n            }\r\n            makeTabs($bottomDivInner);\r\n\r\n\r\n            $centerDiv.append($editorDiv, $bottomDiv);\r\n            new EmbeddedSlider($bottomDiv, true, true, () => { this.editor.editor.layout(); });\r\n        } else {\r\n            $centerDiv.prepend($editorDiv);\r\n        }\r\n        \r\n        \r\n\r\n\r\n        if (!this.config.withBottomPanel) {\r\n            $centerDiv.prepend($controlsDiv);\r\n            $controlsDiv.addClass('joe_controlPanel_top');\r\n            $editorDiv.css({\r\n                'position': 'relative',\r\n                'height': '1px'\r\n            });\r\n        }\r\n\r\n        $div.addClass('joe_javaOnlineDiv');\r\n        $div.append($centerDiv, $rightDiv);\r\n        new EmbeddedSlider($rightDiv, true, false, () => {\r\n            jQuery('.jo_graphics').trigger('sizeChanged');\r\n            this.editor.editor.layout();\r\n        });\r\n\r\n        this.editor = new Editor(this, false, true);\r\n        this.editor.initGUI(this.$monacoDiv);\r\n        this.$monacoDiv.find('.monaco-editor').css('z-index', '10');\r\n\r\n        if ($div.attr('tabindex') == null) $div.attr('tabindex', \"0\");\r\n        this.actionManager = new ActionManager($div, this);\r\n        this.actionManager.init();\r\n\r\n        this.bottomDiv = new BottomDiv(this, $bottomDivInner, $div);\r\n        this.bottomDiv.initGUI();\r\n\r\n        this.rightDiv = new RightDiv(this, this.$rightDivInner);\r\n        this.rightDiv.initGUI();\r\n\r\n        this.debugger = new Debugger(this, this.$debuggerDiv, null);\r\n\r\n        this.interpreter = new Interpreter(this, this.debugger,\r\n            new ProgramControlButtons($controlsDiv, $editorDiv),\r\n            this.$runDiv);\r\n\r\n        let $infoButton = jQuery('<div class=\"jo_button jo_active img_ellipsis-dark\" style=\"margin-left: 16px\"></div>');\r\n        $controlsDiv.append($infoButton);\r\n\r\n        $infoButton.on('mousedown', (ev) => {\r\n            ev.preventDefault();\r\n            ev.stopPropagation();\r\n            openContextMenu([{\r\n                caption: \"Über Java-Online ...\",\r\n                link: \"https://java.mathe-pabst.de\",\r\n                callback: () => {\r\n                    // nothing to do.\r\n                }}], ev.pageX + 2, ev.pageY + 2);\r\n        });\r\n\r\n        setTimeout(() => {\r\n            this.interpreter.initGUI();\r\n            this.editor.editor.layout();\r\n            this.compiler = new Compiler(this);\r\n            this.startTimer();\r\n        }, 200);\r\n\r\n\r\n    }\r\n\r\n    makeBracketErrorDiv(): JQuery<HTMLElement> {\r\n        return jQuery(`\r\n        <div class=\"jo_parenthesis_warning\" title=\"Klammerwarnung!\" style=\"bottom: 55px\">\r\n        <div class=\"jo_warning_light\"></div>\r\n        <div class=\"jo_pw_heading\">{ }</div>\r\n        <div title=\"Letzten Schritt rückgängig\" \r\n            class=\"jo_pw_undo img_undo jo_button jo_active\"></div>\r\n        </div>\r\n        `);\r\n    }\r\n\r\n    makeCodeResetModalWindow($parent: JQuery<HTMLElement>): JQuery<HTMLElement> {\r\n        let $window = jQuery(\r\n            `\r\n            <div class=\"joe_codeResetModal\">\r\n            <div style=\"flex: 1\"></div>\r\n            <div style=\"display: flex\">\r\n                <div style=\"flex: 1\"></div>\r\n                <div style=\"padding-left: 30px;\">\r\n                <div style=\"color: red; margin-bottom: 10px; font-weight: bold\">Warnung:</div>\r\n                <div>Soll der Code wirklich auf den Ausgangszustand zurückgesetzt werden?</div>\r\n                <div>Alle von Dir gemachten Änderungen werden damit verworfen.</div>\r\n                </div>\r\n                <div style=\"flex: 1\"></div>\r\n            </div>\r\n            <div class=\"joe_codeResetModalButtons\">\r\n            <div class=\"joe_codeResetModalCancel jo_button jo_active\">Abbrechen</div>\r\n            <div class=\"joe_codeResetModalOK jo_button jo_active\">OK</div>\r\n            </div>\r\n            <div style=\"flex: 2\"></div>\r\n            </div>\r\n        `\r\n        );\r\n\r\n        $window.hide();\r\n\r\n        $parent.append($window);\r\n\r\n        jQuery(\".joe_codeResetModalCancel\").on(\"click\", () => {\r\n            $window.hide();\r\n        });\r\n\r\n        jQuery(\".joe_codeResetModalOK\").on(\"click\", () => {\r\n\r\n            this.initScripts();\r\n            this.deleteScriptsInDB();\r\n\r\n            $window.hide();\r\n            this.$resetButton.hide();\r\n            this.compileRunsAfterCodeReset = 1;\r\n\r\n        });\r\n\r\n        return $window;\r\n    }\r\n\r\n    showProgramPointerPosition(file: File, position: TextPosition) {\r\n\r\n        if (file == null) {\r\n            return;\r\n        }\r\n\r\n        if (this.config.withFileList) {\r\n            let fileData = this.fileExplorer.files.find((fileData) => fileData.module.file == file);\r\n            if (fileData == null) {\r\n                return;\r\n            }\r\n\r\n            if (fileData.module != this.getCurrentlyEditedModule()) {\r\n                this.setModuleActive(fileData.module);\r\n            }\r\n\r\n            this.programPointerModule = fileData.module;\r\n        } else {\r\n            this.programPointerModule = this.currentWorkspace.moduleStore.getFirstModule();\r\n        }\r\n\r\n        let range = {\r\n            startColumn: position.column, startLineNumber: position.line,\r\n            endColumn: position.column + position.length, endLineNumber: position.line\r\n        };\r\n\r\n        this.getMonacoEditor().revealRangeInCenterIfOutsideViewport(range);\r\n        this.programPointerDecoration = this.getMonacoEditor().deltaDecorations(this.programPointerDecoration, [\r\n            {\r\n                range: range,\r\n                options: { className: 'jo_revealProgramPointer', isWholeLine: true }\r\n            },\r\n            {\r\n                range: range,\r\n                options: { beforeContentClassName: 'jo_revealProgramPointerBefore' }\r\n            }\r\n        ]);\r\n\r\n\r\n\r\n    }\r\n\r\n    hideProgramPointerPosition() {\r\n        if (this.getCurrentlyEditedModule() == this.programPointerModule) {\r\n            this.getMonacoEditor().deltaDecorations(this.programPointerDecoration, []);\r\n        }\r\n        this.programPointerModule = null;\r\n        this.programPointerDecoration = [];\r\n    }\r\n\r\n    makeFilesDiv(): JQuery<HTMLElement> {\r\n\r\n\r\n        let $filesDiv = jQuery('<div class=\"joe_bottomDivFiles jo_scrollable\"></div>');\r\n\r\n        let $filesHeader = jQuery('<div class=\"joe_filesHeader jo_tabheading jo_active\"  style=\"line-height: 24px\">Programmdateien</div>');\r\n\r\n        this.$filesListDiv = jQuery('<div class=\"joe_filesList jo_scrollable\"></div>');\r\n        // for (let index = 0; index < 20; index++) {            \r\n        //     let $file = jQuery('<div class=\"jo_file jo_java\"><div class=\"jo_fileimage\"></div><div class=\"jo_filename\"></div></div></div>');\r\n        //     $filesList.append($file);\r\n        // }\r\n\r\n        $filesDiv.append($filesHeader, this.$filesListDiv);\r\n\r\n        return $filesDiv;\r\n    }\r\n\r\n    startTimer() {\r\n        if (this.timerHandle != null) {\r\n            clearInterval(this.timerHandle);\r\n        }\r\n\r\n        let that = this;\r\n        this.timerHandle = setInterval(() => {\r\n\r\n            that.compileIfDirty();\r\n\r\n        }, 500);\r\n\r\n\r\n    }\r\n\r\n    compileIfDirty() {\r\n\r\n        if (this.currentWorkspace == null) return;\r\n\r\n        if (this.currentWorkspace.moduleStore.isDirty() &&\r\n            this.compiler.compilerStatus != CompilerStatus.compiling\r\n            && this.interpreter.state != InterpreterState.running\r\n            && this.interpreter.state != InterpreterState.paused) {\r\n            try {\r\n\r\n                this.compiler.compile(this.currentWorkspace.moduleStore);\r\n\r\n                let errors = this.bottomDiv?.errorManager?.showErrors(this.currentWorkspace);\r\n\r\n                this.editor.onDidChangeCursorPosition(null); // mark occurrencies of symbol under cursor\r\n\r\n                this.printProgram();\r\n\r\n                this.version++;\r\n\r\n                let startable = this.interpreter.getStartableModule(this.currentWorkspace.moduleStore) != null;\r\n\r\n                if (startable &&\r\n                    this.interpreter.state == InterpreterState.not_initialized) {\r\n                    this.copyExecutableModuleStoreToInterpreter();\r\n                    this.interpreter.setState(InterpreterState.done);\r\n                    // this.interpreter.init();\r\n                }\r\n\r\n                if (!startable &&\r\n                    (this.interpreter.state == InterpreterState.done || this.interpreter.state == InterpreterState.error)) {\r\n                    this.interpreter.setState(InterpreterState.not_initialized);\r\n                }\r\n\r\n                // this.drawClassDiagrams(!this.rightDiv.isClassDiagramEnabled());\r\n\r\n            } catch (e) {\r\n                console.error(e);\r\n                this.compiler.compilerStatus = CompilerStatus.error;\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n    considerShowingCodeResetButton() {\r\n        this.compileRunsAfterCodeReset++;\r\n        if (this.compileRunsAfterCodeReset == 3) {\r\n            this.$resetButton.fadeIn(1000);\r\n        }\r\n    }\r\n    printProgram() {\r\n\r\n        this.bottomDiv.printModuleToBottomDiv(this.currentWorkspace, this.getCurrentlyEditedModule());\r\n\r\n    }\r\n\r\n    drawClassDiagrams(onlyUpdateIdentifiers: boolean) {\r\n        // clearTimeout(this.debounceDiagramDrawing);\r\n        // this.debounceDiagramDrawing = setTimeout(() => {\r\n        //     this.rightDiv?.classDiagram?.drawDiagram(this.currentWorkspace, onlyUpdateIdentifiers);\r\n        // }, 500);\r\n    }\r\n\r\n    copyExecutableModuleStoreToInterpreter() {\r\n        let ms = this.currentWorkspace.moduleStore.copy();\r\n        this.interpreter.moduleStore = ms;\r\n        this.interpreter.moduleStoreVersion = this.version;\r\n\r\n        if (this.interpreter.state == InterpreterState.not_initialized && this.programIsExecutable) {\r\n            this.interpreter.setState(InterpreterState.done);\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n    makeBottomDiv($bottomDiv: JQuery<HTMLElement>, $buttonDiv: JQuery<HTMLElement>) {\r\n\r\n        let $tabheadings = jQuery('<div class=\"jo_tabheadings\"></div>');\r\n        $tabheadings.css('position', 'relative');\r\n        let $thRightSide = jQuery('<div class=\"joe_tabheading-right jo_noHeading\"></div>');\r\n\r\n        if (this.config.withConsole) {\r\n            let $thConsoleClear = jQuery('<div class=\"img_clear-dark jo_button jo_active jo_console-clear\"' +\r\n                'style=\"display: none; margin-right: 8px;\" title=\"Console leeren\"></div>');\r\n            $thRightSide.append($thConsoleClear);\r\n        }\r\n\r\n        $thRightSide.append($buttonDiv);\r\n\r\n        if (this.config.withErrorList) {\r\n            let $thErrors = jQuery('<div class=\"jo_tabheading jo_active\" data-target=\"jo_errorsTab\" style=\"line-height: 24px\">Fehler</div>');\r\n            $tabheadings.append($thErrors);\r\n        }\r\n\r\n\r\n        if (this.config.withConsole) {\r\n            let $thConsole = jQuery('<div class=\"jo_tabheading jo_console-tab\" data-target=\"jo_consoleTab\" style=\"line-height: 24px\">Console</div>');\r\n            $tabheadings.append($thConsole);\r\n        }\r\n\r\n        if (this.config.withPCode) {\r\n            let $thPCode = jQuery('<div class=\"jo_tabheading\" data-target=\"jo_pcodeTab\" style=\"line-height: 24px\">PCode</div>');\r\n            $tabheadings.append($thPCode);\r\n        }\r\n\r\n        $tabheadings.append($thRightSide);\r\n\r\n        $bottomDiv.append($tabheadings);\r\n\r\n        let $tabs = jQuery('<div class=\"jo_tabs jo_scrollable\"></div>');\r\n\r\n        if (this.config.withErrorList) {\r\n            let $tabError = jQuery('<div class=\"jo_active jo_scrollable jo_errorsTab\"></div>');\r\n            $tabs.append($tabError);\r\n        }\r\n\r\n        if (this.config.withConsole) {\r\n            let $tabConsole = jQuery(\r\n                `\r\n        <div class=\"jo_editorFontSize jo_consoleTab\">\r\n        <div class=\"jo_console-inner\">\r\n            <div class=\"jo_scrollable jo_console-top\"></div>\r\n            <div class=\"jo_commandline\"></div>\r\n        </div>\r\n        </div>\r\n    `);\r\n\r\n            $tabs.append($tabConsole);\r\n        }\r\n\r\n        if (this.config.withPCode) {\r\n            let $tabPCode = jQuery('<div class=\"jo_scrollable jo_pcodeTab\">PCode</div>');\r\n            $tabs.append($tabPCode);\r\n        }\r\n\r\n        $bottomDiv.append($tabs);\r\n\r\n    }\r\n\r\n    makeRightDiv(): JQuery<HTMLElement> {\r\n\r\n        let $rightDiv = jQuery('<div class=\"joe_rightDiv\"></div>');\r\n        this.$rightDivInner = jQuery('<div class=\"joe_rightDivInner\"></div>');\r\n        $rightDiv.append(this.$rightDivInner);\r\n\r\n\r\n        let $tabheadings = jQuery('<div class=\"jo_tabheadings\"></div>');\r\n        $tabheadings.css('position', 'relative');\r\n        let $thRun = jQuery('<div class=\"jo_tabheading jo_active\" data-target=\"jo_run\" style=\"line-height: 24px\">Ausgabe</div>');\r\n        let $thVariables = jQuery('<div class=\"jo_tabheading jo_console-tab\" data-target=\"jo_variablesTab\" style=\"line-height: 24px\">Variablen</div>');\r\n        $tabheadings.append($thRun, $thVariables);\r\n        this.$rightDivInner.append($tabheadings);\r\n\r\n        let $tabs = jQuery('<div class=\"jo_tabs jo_scrollable\"></div>');\r\n        let $vd = jQuery('<div class=\"jo_scrollable jo_editorFontSize jo_variablesTab\"></div>');\r\n        this.$debuggerDiv = jQuery('<div class=\"joe_debuggerDiv\"></div>');\r\n\r\n        let $alternativeText = jQuery(`\r\n            <div class=\"jo_alternativeText jo_scrollable\">\r\n            <div style=\"font-weight: bold\">Tipp:</div>\r\n            Die Variablen sind nur dann sichtbar, wenn das Programm\r\n            <ul>\r\n            <li>im Einzelschrittmodus ausgeführt wird(Klick auf <span class=\"img_step-over-dark jo_inline-image\"></span>),</li>\r\n            <li>an einem Breakpoint hält (Setzen eines Breakpoints mit Mausklick links neben den Zeilennummern und anschließendes Starten des Programms mit \r\n            <span class=\"img_start-dark jo_inline-image\"></span>) oder </li>\r\n            <li>in sehr niedriger Geschwindigkeit ausgeführt wird (weniger als 10 Schritte/s).\r\n            </ul>\r\n            </div>\r\n        `);\r\n\r\n        $vd.append(this.$debuggerDiv, $alternativeText);\r\n\r\n        this.$runDiv = jQuery(\r\n            `\r\n<div class=\"jo_tab jo_active jo_run\">\r\n<div class=\"jo_run-programend\">Programm beendet</div>\r\n<div class=\"jo_run-input\">\r\n    <div>\r\n        <div>\r\n            <div class=\"jo_run-input-message\" class=\"jo_rix\">Bitte geben Sie eine Zahl ein!</div>\r\n            <input class=\"jo_run-input-input\" type=\"text\" class=\"jo_rix\">\r\n            <div class=\"jo_run-input-button-outer\" class=\"jo_rix\">\r\n                <div class=\"jo_run-input-button\" class=\"jo_rix\">OK</div>\r\n            </div>\r\n\r\n            <div class=\"jo_run-input-error\" class=\"jo_rix\"></div>\r\n        </div>\r\n    </div>\r\n</div> \r\n<div class=\"jo_run-inner\">\r\n    <div class=\"jo_graphics\"></div>\r\n    <div class=\"jo_output jo_scrollable\"></div>\r\n</div>\r\n\r\n</div>\r\n\r\n`);\r\n\r\n        $tabs.append(this.$runDiv, $vd);\r\n        this.$rightDivInner.append($tabs);\r\n\r\n        makeTabs($rightDiv);\r\n\r\n        return $rightDiv;\r\n    }\r\n\r\n    getSemicolonAngel(): SemicolonAngel{\r\n        return this.semicolonAngel;\r\n    }\r\n\r\n}\r\n\r\n\r\n","import { Error, Lexer } from \"./lexer/Lexer.js\";\r\nimport { CodeGenerator } from \"./parser/CodeGenerator.js\";\r\nimport { File, Module, ModuleStore } from \"./parser/Module.js\";\r\nimport { Parser } from \"./parser/Parser.js\";\r\nimport { TypeResolver } from \"./parser/TypeResolver.js\";\r\nimport { Main } from \"../main/Main.js\";\r\nimport { MainBase } from \"../main/MainBase.js\";\r\nimport { MainEmbedded } from \"../embedded/MainEmbedded.js\";\r\nimport { Klass, Interface } from \"./types/Class.js\";\r\nimport { SemicolonAngel } from \"./parser/SemicolonAngel.js\";\r\n\r\nexport enum CompilerStatus {\r\n    compiling, error, compiledButNothingToRun, readyToRun\r\n}\r\n\r\nexport class Compiler {\r\n\r\n    compilerStatus: CompilerStatus = CompilerStatus.compiledButNothingToRun;\r\n\r\n    atLeastOneModuleIsStartable: boolean;\r\n\r\n    constructor(private main: MainBase) {\r\n    }\r\n\r\n    compile(moduleStore: ModuleStore): Error[] {\r\n\r\n        this.compilerStatus = CompilerStatus.compiling;\r\n\r\n        let t0 = performance.now();\r\n\r\n        moduleStore.clearUsagePositions();\r\n\r\n        let lexer = new Lexer();\r\n\r\n        // 1st pass: lexing\r\n        for (let m of moduleStore.getModules(false)) {\r\n            m.file.dirty = false;\r\n            m.clear();\r\n\r\n            let lexed = lexer.lex(m.getProgramTextFromMonacoModel());\r\n            m.errors[0] = lexed.errors;\r\n            m.tokenList = lexed.tokens;\r\n            m.bracketError = lexed.bracketError;\r\n            if(m.file.name == this.main.getCurrentlyEditedModule().file.name){\r\n                if(this.main.getBottomDiv() != null) this.main.getBottomDiv().errorManager.showParenthesisWarning(lexed.bracketError);\r\n            }\r\n        }\r\n\r\n        // 2nd pass: parse tokenlist and generate AST\r\n\r\n        this.main.getSemicolonAngel().startRegistering();\r\n\r\n        let parser: Parser = new Parser(false);\r\n\r\n        for (let m of moduleStore.getModules(false)) {\r\n            parser.parse(m);\r\n        }\r\n\r\n        // 3rd pass: resolve types and populate typeStores; checks intermodular dependencies\r\n\r\n        let typeResolver: TypeResolver = new TypeResolver(this.main);\r\n\r\n        // Klass.count = 0;\r\n        // Interface.count = 0;\r\n        typeResolver.start(moduleStore);\r\n        // console.log(\"Klass-Klone: \" + Klass.count + \", Interface-Klone: \" + Interface.count);\r\n\r\n        // 4th pass: code generation\r\n\r\n        let codeGenerator = new CodeGenerator();\r\n\r\n        for (let m of moduleStore.getModules(false)) {\r\n            codeGenerator.start(m, moduleStore);\r\n        }\r\n\r\n        let errorfree = true;\r\n        for (let m of moduleStore.getModules(false)) {\r\n            m.dependsOnModulesWithErrors = m.hasErrors();\r\n            if(m.dependsOnModulesWithErrors) errorfree = false;\r\n        }\r\n\r\n        let done = false;\r\n        while(!done){\r\n            done = true;\r\n            for (let m of moduleStore.getModules(false)) {\r\n                if(!m.dependsOnModulesWithErrors)\r\n                for (let m1 of moduleStore.getModules(false)) {\r\n                    if(m.dependsOnModules.get(m1) && m1.dependsOnModulesWithErrors){\r\n                        m.dependsOnModulesWithErrors = true;\r\n                        done = false;\r\n                        break;\r\n                    }\r\n                }                            \r\n            }            \r\n        }\r\n        \r\n        this.atLeastOneModuleIsStartable = false;        \r\n        for (let m of moduleStore.getModules(false)) {\r\n            m.isStartable = m.hasMainProgram() && !m.dependsOnModulesWithErrors;\r\n            if(m.isStartable){\r\n                this.atLeastOneModuleIsStartable = true;\r\n            }\r\n            if(!(this.main instanceof MainEmbedded) || this.main.config.withFileList){\r\n                m.renderStartButton();\r\n            } \r\n        }\r\n\r\n        if (this.atLeastOneModuleIsStartable) {\r\n\r\n            this.compilerStatus = CompilerStatus.readyToRun;\r\n\r\n        } else {\r\n\r\n            this.compilerStatus = errorfree ? CompilerStatus.error : CompilerStatus.compiledButNothingToRun;\r\n\r\n        }\r\n\r\n        let dt = performance.now() - t0;\r\n        dt = Math.round(dt * 100) / 100;\r\n\r\n        let message = \"Compiled in \" + dt + \" ms.\";\r\n\r\n        this.main.getCurrentWorkspace().compilerMessage = message;\r\n\r\n        this.main.getSemicolonAngel().healSemicolons();\r\n\r\n        return null;\r\n    }\r\n\r\n}","import { InterpreterState } from \"../interpreter/Interpreter.js\";\r\nimport { MainBase } from \"../main/MainBase.js\";\r\n\r\nexport class KeyboardTool {\r\n    \r\n    element: JQuery<any>;\r\n\r\n    pressedKeys: {[key: string]: boolean} = {};\r\n\r\n    keyPressedCallbacks: ((key: string) => void)[] = [];\r\n    keyUpCallbacks: ((key: string) => void)[] = [];\r\n    keyDownCallbacks: ((key: string) => void)[] = [];\r\n\r\n    constructor(element: JQuery<any>, private main: MainBase){\r\n        this.registerListeners(element);\r\n    }\r\n\r\n    unregisterListeners(){\r\n        this.element.off(\"keydown\");\r\n        this.element.off(\"keyup\");\r\n        this.element.off(\"keypressed\");\r\n    }\r\n\r\n    private registerListeners(element: JQuery<any>){\r\n        this.element = element;\r\n        let that = this;\r\n        element.on(\"keydown\", (e) => {\r\n            let key = e.key;\r\n            if(key == null) return true;\r\n            if(e.shiftKey) key = \"shift+\" + key;\r\n            if(e.ctrlKey) key = \"ctrl\" + key;\r\n            if(e.altKey) key = \"alt\" + key;\r\n            that.pressedKeys[key.toLowerCase()] = true;\r\n\r\n            for(let kpc of that.keyDownCallbacks){\r\n                kpc(key);\r\n            }\r\n\r\n            // prevent <html>-Element from scrolling in embedded mode\r\n            if(this.main.isEmbedded() && this.main.getInterpreter().state == InterpreterState.running && !this.main.getMonacoEditor().hasTextFocus()){\r\n                if([\"ArrowUp\", \"ArrowDown\", \"ArrowLeft\", \"ArrowRight\"].indexOf(e.key) >= 0)\r\n                e.preventDefault();\r\n            }\r\n\r\n            return true;\r\n        });\r\n\r\n        element.on(\"keyup\", (e) => {\r\n            let key = e.key;\r\n            if(key == null) return true;\r\n            if(typeof key == \"undefined\") return;\r\n\r\n            if(e.shiftKey) key = \"shift+\" + key;\r\n            if(e.ctrlKey) key = \"ctrl\" + key;\r\n            if(e.altKey) key = \"alt\" + key;\r\n            that.pressedKeys[key.toLowerCase()] = false;\r\n\r\n            for(let kpc of that.keyUpCallbacks){\r\n                kpc(key);\r\n            }\r\n            return true;\r\n        });\r\n        element.on(\"keypress\", (e) => {\r\n            let k = e.key;\r\n            if(e.shiftKey && k.length > 1){\r\n                k = \"[shift]+\" + k;\r\n            }\r\n            if(e.ctrlKey && k.length > 1){\r\n                k = \"[ctrl]+\" + k;\r\n            }\r\n            if(e.altKey && k.length > 1){\r\n                k = \"[alt]+\" + k;\r\n            }\r\n            for(let kpc of that.keyPressedCallbacks){\r\n                kpc(k);\r\n            }\r\n            return true;\r\n        });\r\n\r\n    }\r\n\r\n    isPressed(key: string){\r\n        if(key == null) return null;\r\n        return this.pressedKeys[key.toLowerCase()] == true;\r\n    }\r\n\r\n    unsubscribeAllListeners() {\r\n        this.keyPressedCallbacks = [];\r\n    }\r\n\r\n\r\n}","import { TextPosition, TokenType } from \"../compiler/lexer/Token.js\";\r\nimport { Module, ModuleStore } from \"../compiler/parser/Module.js\";\r\nimport { Program, Statement, ReturnStatement } from \"../compiler/parser/Program.js\";\r\nimport { ArrayType } from \"../compiler/types/Array.js\";\r\nimport { Klass, Interface } from \"../compiler/types/Class.js\";\r\nimport { Enum, EnumRuntimeObject } from \"../compiler/types/Enum.js\";\r\nimport { PrimitiveType, Type, Value, Heap, Method } from \"../compiler/types/Types.js\";\r\nimport { PrintManager } from \"../main/gui/PrintManager.js\";\r\nimport { Main } from \"../main/Main.js\";\r\nimport { Debugger } from \"./Debugger.js\";\r\nimport { RuntimeObject } from \"./RuntimeObject.js\";\r\nimport { intPrimitiveType, stringPrimitiveType } from \"../compiler/types/PrimitiveTypes.js\";\r\nimport { InputManager } from \"./InputManager.js\";\r\nimport { WorldHelper } from \"../runtimelibrary/graphics/World.js\";\r\nimport { Helper } from \"../main/gui/Helper.js\";\r\nimport { TimerClass } from \"../runtimelibrary/Timer.js\";\r\nimport { KeyboardTool } from \"../tools/KeyboardTool.js\";\r\nimport { ProgramControlButtons } from \"../main/gui/ProgramControlButtons.js\";\r\nimport { MainBase } from \"../main/MainBase.js\";\r\nimport { ListHelper } from \"../runtimelibrary/collections/ArrayList.js\";\r\nimport { GroupHelper } from \"../runtimelibrary/graphics/Group.js\";\r\nimport { WebSocketRequestKeepAlive } from \"../communication/Data.js\";\r\nimport { MainEmbedded } from \"../embedded/MainEmbedded.js\";\r\nimport { ProcessingHelper } from \"../runtimelibrary/graphics/Processing.js\";\r\n\r\nexport enum InterpreterState {\r\n    not_initialized, running, paused, error, done, waitingForInput, waitingForTimersToEnd\r\n}\r\n\r\nexport type ProgramStackElement = {\r\n    program: Program,\r\n    programPosition: number,  // next position to execute after return\r\n    textPosition: TextPosition, // textposition of method call\r\n    method: Method | string,\r\n    callbackAfterReturn: (interpreter: Interpreter) => void,\r\n    isCalledFromOutside: string,\r\n    stackElementsToPushBeforeFirstExecuting?: Value[]\r\n};\r\n\r\nexport class Interpreter {\r\n\r\n    debugger: Debugger;\r\n\r\n    mainModule: Module;\r\n    moduleStore: ModuleStore;\r\n    moduleStoreVersion: number = -100;\r\n\r\n    printManager: PrintManager;\r\n    inputManager: InputManager;\r\n\r\n    stepsPerSecond = 2;\r\n    maxStepsPerSecond = 1000000;\r\n    timerDelayMs = 10;\r\n\r\n    timerId: any;\r\n    state: InterpreterState;\r\n\r\n    currentProgram: Program;\r\n    currentProgramPosition: number;\r\n    currentMethod: Method | string;\r\n    currentCallbackAfterReturn: (interpreter: Interpreter) => void;\r\n    currentIsCalledFromOutside: string\r\n\r\n    programStack: ProgramStackElement[] = [];\r\n\r\n    stack: Value[] = [];\r\n    stackframes: number[] = [];\r\n    currentStackframe: number;\r\n\r\n    heap: Heap = {};\r\n\r\n    timerStopped: boolean = true;\r\n    timerExtern: boolean = false;\r\n\r\n    steps: number = 0;\r\n    timeNetto: number = 0;\r\n    timeWhenProgramStarted: number = 0;\r\n\r\n    stepOverNestingLevel: number = 0;\r\n    leaveLine: number = -1;\r\n    additionalStepFinishedFlag: boolean = false;\r\n\r\n    isFirstStatement: boolean = true;\r\n\r\n    showProgrampointerUptoStepsPerSecond = 15;\r\n\r\n    worldHelper: WorldHelper;\r\n    processingHelper: ProcessingHelper;\r\n\r\n    keyboardTool: KeyboardTool;\r\n\r\n    webSocketsToCloseAfterProgramHalt: WebSocket[] = [];\r\n\r\n\r\n    actions: string[] = [\"start\", \"pause\", \"stop\", \"stepOver\",\r\n        \"stepInto\", \"stepOut\", \"restart\"];\r\n\r\n    // buttonActiveMatrix[button][i] tells if button is active at \r\n    // InterpreterState i\r\n    buttonActiveMatrix: { [buttonName: string]: boolean[] } = {\r\n        \"start\": [false, false, true, true, true, false],\r\n        \"pause\": [false, true, false, false, false, false],\r\n        \"stop\": [false, true, true, false, false, true],\r\n        \"stepOver\": [false, false, true, true, true, false],\r\n        \"stepInto\": [false, false, true, true, true, false],\r\n        \"stepOut\": [false, false, true, false, false, false],\r\n        \"restart\": [false, true, true, true, true, true]\r\n    }\r\n\r\n    callbackAfterExecution: () => void;\r\n\r\n    constructor(public main: MainBase, public debugger_: Debugger, public controlButtons: ProgramControlButtons,\r\n        $runDiv: JQuery<HTMLElement>) {\r\n        this.printManager = new PrintManager($runDiv, this.main);\r\n        this.inputManager = new InputManager($runDiv, this.main);\r\n        if (main.isEmbedded()) {\r\n            this.keyboardTool = new KeyboardTool(jQuery('html'), main);\r\n        } else {\r\n            this.keyboardTool = new KeyboardTool(jQuery(window), main);\r\n        }\r\n\r\n        this.debugger = debugger_;\r\n\r\n        controlButtons.setInterpreter(this);\r\n\r\n        this.timeWhenProgramStarted = performance.now();\r\n        this.steps = 0;\r\n        this.timeNetto = 0;\r\n        this.timerEvents = 0;\r\n\r\n        this.timerDelayMs = 7;\r\n\r\n        let that = this;\r\n\r\n        let periodicFunction = () => {\r\n\r\n            if (!that.timerExtern) {\r\n                that.timerFunction(that.timerDelayMs, false, 0.7);\r\n            }\r\n\r\n        }\r\n\r\n        this.timerId = setInterval(periodicFunction, this.timerDelayMs);\r\n        let keepAliveRequest: WebSocketRequestKeepAlive = { command: 5 };\r\n        let req = JSON.stringify(keepAliveRequest);\r\n        setInterval(() => {\r\n            that.webSocketsToCloseAfterProgramHalt.forEach(ws => ws.send(req));\r\n        }, 30000);\r\n\r\n    }\r\n\r\n    initGUI() {\r\n\r\n        let that = this;\r\n\r\n        let am = this.main.getActionManager();\r\n\r\n        let startFunction = () => {\r\n            that.stepOverNestingLevel = 1000000;\r\n            that.start();\r\n        };\r\n\r\n        let pauseFunction = () => {\r\n            that.pause();\r\n        };\r\n\r\n        am.registerAction(\"interpreter.start\", ['F4'],\r\n            () => {\r\n                if (am.isActive(\"interpreter.start\")) {\r\n                    startFunction();\r\n                } else {\r\n                    pauseFunction();\r\n                }\r\n\r\n            }, \"Programm starten\", this.controlButtons.$buttonStart);\r\n\r\n        am.registerAction(\"interpreter.pause\", ['F4'],\r\n            () => {\r\n                if (am.isActive(\"interpreter.start\")) {\r\n                    startFunction();\r\n                } else {\r\n                    pauseFunction();\r\n                }\r\n\r\n            }, \"Pause\", this.controlButtons.$buttonPause);\r\n\r\n        am.registerAction(\"interpreter.stop\", [],\r\n            () => {\r\n                that.stop(false);\r\n                that.steps = 0;\r\n            }, \"Programm anhalten\", this.controlButtons.$buttonStop);\r\n\r\n        // this.controlButtons.$buttonEdit.on('click', (e) => {\r\n        //     e.stopPropagation();\r\n        //     am.trigger('interpreter.stop');\r\n        // });\r\n\r\n        am.registerAction(\"interpreter.stepOver\", ['F6'],\r\n            () => {\r\n                this.oneStep(false);\r\n            }, \"Einzelschritt (Step over)\", this.controlButtons.$buttonStepOver);\r\n\r\n        am.registerAction(\"interpreter.stepInto\", ['F7'],\r\n            () => {\r\n                this.oneStep(true);\r\n            }, \"Einzelschritt (Step into)\", this.controlButtons.$buttonStepInto);\r\n\r\n        am.registerAction(\"interpreter.stepOut\", [],\r\n            () => {\r\n                this.stepOut();\r\n            }, \"Step out\", this.controlButtons.$buttonStepOut);\r\n\r\n        am.registerAction(\"interpreter.restart\", [],\r\n            () => {\r\n                that.stop(true);\r\n            }, \"Neu starten\", this.controlButtons.$buttonRestart);\r\n\r\n        this.setState(InterpreterState.not_initialized);\r\n\r\n    }\r\n\r\n    getStartableModule(moduleStore: ModuleStore): Module {\r\n\r\n        let cem: Module;\r\n        cem = this.main.getCurrentlyEditedModule();\r\n\r\n        let currentlyEditedModuleIsClassOnly = false;\r\n\r\n        // decide which module to start\r\n\r\n        // first attempt: is currently edited Module startable?\r\n        if (cem != null) {\r\n            let currentlyEditedModule = moduleStore.findModuleByFile(cem.file);\r\n            if (currentlyEditedModule != null) {\r\n                currentlyEditedModuleIsClassOnly = !cem.hasErrors()\r\n                    && !currentlyEditedModule.isStartable;\r\n                if (currentlyEditedModule.isStartable) {\r\n                    return currentlyEditedModule;\r\n                }\r\n            }\r\n        }\r\n\r\n        // second attempt: which module has been started last time?\r\n        if (this.mainModule != null && currentlyEditedModuleIsClassOnly) {\r\n            let lastMainModule = moduleStore.findModuleByFile(this.mainModule.file);\r\n            if (lastMainModule != null && lastMainModule.isStartable) {\r\n                return lastMainModule;\r\n            }\r\n        }\r\n\r\n        // third attempt: pick first startable module of current workspace\r\n        if (currentlyEditedModuleIsClassOnly) {\r\n            for (let m of moduleStore.getModules(false)) {\r\n                if (m.isStartable) {\r\n                    return m;\r\n                }\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /*\r\n        After user clicks start button (or stepover/stepInto-Button when no program is running) this\r\n        method ist called.\r\n    */\r\n    init() {\r\n\r\n        this.timerStopped = true;\r\n\r\n        let cem = this.main.getCurrentlyEditedModule();\r\n\r\n        cem.getBreakpointPositionsFromEditor();\r\n\r\n        this.main.getBottomDiv()?.console?.clearExceptions();\r\n\r\n        /*\r\n            As long as there is no startable new Version of current workspace we keep current compiled modules so\r\n            that variables and objects defined/instantiated via console can be kept, too. \r\n        */\r\n        if (this.moduleStoreVersion != this.main.version && this.main.getCompiler().atLeastOneModuleIsStartable) {\r\n            this.main.copyExecutableModuleStoreToInterpreter();\r\n            this.heap = {}; // clear variables/objects defined via console\r\n            this.main.getBottomDiv()?.console?.detachValues();  // detach values from console entries\r\n        }\r\n\r\n        let newMainModule = this.getStartableModule(this.moduleStore);\r\n\r\n        if (newMainModule == null) {\r\n            this.setState(InterpreterState.not_initialized);\r\n            return;\r\n        }\r\n\r\n        this.mainModule = newMainModule;\r\n\r\n        this.currentProgramPosition = 0;\r\n\r\n        this.programStack = [];\r\n        this.stack = [];\r\n        this.stackframes = [];\r\n        this.currentStackframe = 0;\r\n\r\n        this.setState(InterpreterState.done);\r\n\r\n        this.isFirstStatement = true;\r\n\r\n        this.stepOverNestingLevel = 1000000;\r\n\r\n\r\n        // Instantiate enum value-objects; initialize static attributes; call static constructors\r\n\r\n        this.programStack.push({\r\n            program: this.mainModule.mainProgram,\r\n            programPosition: 0,\r\n            textPosition: { line: 1, column: 1, length: 0 },\r\n            method: \"Hauptprogramm\",\r\n            callbackAfterReturn: null,\r\n            isCalledFromOutside: \"Hauptprogramm\"\r\n\r\n        })\r\n\r\n        for (let m of this.moduleStore.getModules(false)) {\r\n            this.initializeEnums(m);\r\n            this.initializeClasses(m);\r\n        }\r\n\r\n        this.popProgram();\r\n\r\n    }\r\n\r\n    popProgram() {\r\n        let p = this.programStack.pop();\r\n        this.currentProgram = p.program;\r\n        this.currentProgramPosition = p.programPosition;\r\n        this.currentMethod = p.method;\r\n        this.currentCallbackAfterReturn = p.callbackAfterReturn;\r\n        this.currentIsCalledFromOutside = p.isCalledFromOutside;\r\n        if (p.stackElementsToPushBeforeFirstExecuting != null) {\r\n\r\n            this.stackframes.push(this.currentStackframe == null ? 0 : this.currentStackframe);\r\n            this.currentStackframe = this.stack.length;\r\n\r\n            for (let se of p.stackElementsToPushBeforeFirstExecuting) this.stack.push(se);\r\n            p.stackElementsToPushBeforeFirstExecuting = null;\r\n        }\r\n    }\r\n\r\n    initializeClasses(m: Module) {\r\n\r\n        for (let klass of m.typeStore.typeList) {\r\n            if (klass instanceof Klass) {\r\n                klass.staticClass.classObject = new RuntimeObject(klass.staticClass);\r\n                klass.staticClass.classObject.initializeAttributeValues();\r\n                klass.pushStaticInitializationPrograms(this.programStack);\r\n            }\r\n\r\n            if (klass instanceof Enum) {\r\n                let staticValueMap = klass.staticClass.classObject.attributeValues.get(klass.identifier);\r\n                for (let enumInfo of klass.enumInfoList) {\r\n                    staticValueMap.get(enumInfo.identifier).value = enumInfo.object;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    initializeEnums(m: Module) {\r\n\r\n        for (let enumClass of m.typeStore.typeList) {\r\n            if (enumClass instanceof Enum) {\r\n\r\n                enumClass.pushStaticInitializationPrograms(this.programStack);\r\n\r\n                let valueList: Value[] = [];\r\n\r\n                let valueInitializationProgram: Program = {\r\n                    module: enumClass.module,\r\n                    labelManager: null,\r\n                    statements: []\r\n                };\r\n\r\n                let hasAttributeInitializationProgram = enumClass.attributeInitializationProgram.statements.length > 0;\r\n\r\n                if (hasAttributeInitializationProgram) {\r\n                    this.programStack.push({\r\n                        program: valueInitializationProgram,\r\n                        programPosition: 0,\r\n                        textPosition: { line: 1, column: 1, length: 0 },\r\n                        method: \"Attribut-Initialisierung der Klasse \" + enumClass.identifier,\r\n                        callbackAfterReturn: null,\r\n                        isCalledFromOutside: \"Initialisierung eines Enums\"\r\n                    });\r\n\r\n                }\r\n\r\n\r\n                for (let enumInfo of enumClass.enumInfoList) {\r\n                    enumInfo.object = new EnumRuntimeObject(enumClass, enumInfo);\r\n\r\n                    valueList.push({\r\n                        type: enumClass,\r\n                        value: enumInfo.object\r\n                    });\r\n\r\n                    if (enumInfo.constructorCallProgram != null) {\r\n                        this.programStack.push({\r\n                            program: enumInfo.constructorCallProgram,\r\n                            programPosition: 0,\r\n                            textPosition: { line: 1, column: 1, length: 0 },\r\n                            method: \"Konstruktor von \" + enumClass.identifier,\r\n                            callbackAfterReturn: null,\r\n                            isCalledFromOutside: \"Initialisierung eines Enums\"\r\n                        });\r\n\r\n                    }\r\n\r\n                    if (hasAttributeInitializationProgram) {\r\n                        valueInitializationProgram.statements.push({\r\n                            type: TokenType.initializeEnumValue,\r\n                            position: enumInfo.position,\r\n                            enumClass: enumClass,\r\n                            valueIdentifier: enumInfo.identifier\r\n                        })\r\n                    }\r\n\r\n                }\r\n\r\n                if (hasAttributeInitializationProgram) {\r\n                    valueInitializationProgram.statements.push({\r\n                        type: TokenType.programEnd,\r\n                        position: { line: 0, column: 0, length: 1 }\r\n                    })\r\n                }\r\n\r\n                enumClass.valueList = {\r\n                    type: new ArrayType(enumClass),\r\n                    value: valueList\r\n                };\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    timerEvents: number = 0;\r\n    start(callback?: () => void) {\r\n\r\n        this.main.getBottomDiv()?.console?.clearErrors();\r\n\r\n        this.callbackAfterExecution = callback;\r\n\r\n        this.isFirstStatement = true;\r\n\r\n        if (this.state == InterpreterState.error || this.state == InterpreterState.done) {\r\n            this.init();\r\n            this.resetRuntime();\r\n        }\r\n\r\n        this.setState(InterpreterState.running);\r\n\r\n        this.hideProgrampointerPosition();\r\n\r\n        this.timeWhenProgramStarted = performance.now();\r\n        this.timerStopped = false;\r\n\r\n    }\r\n\r\n\r\n    lastStepTime: number = 0;\r\n    lastTimeBetweenEvents: number = 0;\r\n\r\n    timerFunction(timerDelayMs: number, forceRun: boolean, maxWorkloadFactor: number) {\r\n\r\n        let t0 = performance.now();\r\n\r\n        if (!forceRun) {\r\n            let timeBetweenSteps = 1000 / this.stepsPerSecond;\r\n            if (this.timerStopped || t0 - this.lastStepTime < timeBetweenSteps) return;\r\n            this.lastStepTime = t0;\r\n        }\r\n\r\n        this.lastTimeBetweenEvents = t0 - this.lastStepTime;\r\n\r\n        let n_stepsPerTimerGoal = forceRun ? Number.MAX_SAFE_INTEGER : this.stepsPerSecond * this.timerDelayMs / 1000;\r\n\r\n        this.timerEvents++;\r\n\r\n        let exception: string;\r\n        let i = 0;\r\n\r\n        while (i < n_stepsPerTimerGoal && !this.timerStopped && exception == null &&\r\n            (performance.now() - t0) / timerDelayMs < maxWorkloadFactor\r\n        ) {\r\n            exception = this.nextStep();\r\n            if (exception != null) {\r\n                break;\r\n            }\r\n\r\n            if (this.stepsPerSecond <= this.showProgrampointerUptoStepsPerSecond && !forceRun) {\r\n                this.showProgramPointerAndVariables();\r\n            }\r\n\r\n            if (this.state == InterpreterState.error ||\r\n                this.state == InterpreterState.done) {\r\n                this.timerStopped = true;\r\n            }\r\n\r\n\r\n            if (this.stepOverNestingLevel < 0 && !this.timerStopped) {\r\n                let node = this.currentProgram.statements[this.currentProgramPosition];\r\n                let position = node.position;\r\n                if (position == null || position.line != this.leaveLine) {\r\n                    this.timerStopped = true;\r\n                    this.setState(InterpreterState.paused);\r\n\r\n                    if (this.comesStatement(TokenType.closeStackframe)) {\r\n                        exception = this.nextStep();\r\n                        if (exception == null && this.comesStatement(TokenType.programEnd)) {\r\n                            exception = this.nextStep();\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n            i++;\r\n        }\r\n\r\n        if (exception != null) {\r\n            this.throwException(exception);\r\n        }\r\n\r\n        if (this.timerStopped) {\r\n            if (this.state == InterpreterState.paused) {\r\n                this.showProgramPointerAndVariables();\r\n            }\r\n            if (this.callbackAfterExecution != null) {\r\n                this.callbackAfterExecution();\r\n                this.callbackAfterExecution = null;\r\n            }\r\n        }\r\n\r\n        let dt = performance.now() - t0;\r\n        this.timeNetto += dt;\r\n\r\n        // if (\r\n        //     this.timerEvents % 300 == 0) {\r\n        //     console.log(\"Last time between Events: \" + this.lastTimeBetweenEvents);\r\n        // }\r\n\r\n\r\n    }\r\n\r\n    throwException(exception: string) {\r\n        this.timerStopped = true;\r\n        this.setState(InterpreterState.error);\r\n\r\n        let $errorDiv = jQuery('<div class=\"jo_exception\"></div>');\r\n\r\n        let consolePresent: boolean = true;\r\n        if (this.main.isEmbedded()) {\r\n            let mainEmbedded: MainEmbedded = <MainEmbedded>this.main;\r\n            let config = mainEmbedded.config;\r\n            if (config.withBottomPanel != true && config.withConsole != true) {\r\n                consolePresent = false;\r\n                let positionString = \"\";\r\n                let currentStatement = this.currentProgram.statements[this.currentProgramPosition];\r\n                if (currentStatement != null) {\r\n                    let textPosition = currentStatement?.position;\r\n                    positionString = \" in Zeile \" + textPosition.line + \", Spalte \" + textPosition.column;\r\n\r\n                    this.main.getBottomDiv()?.console?.showError(this.currentProgram.module, textPosition);\r\n                }\r\n\r\n                alert(\"Fehler\" + positionString + \": \" + exception);\r\n\r\n            }\r\n        }\r\n\r\n        if (consolePresent) {\r\n            $errorDiv.append(jQuery(\"<span class='jo_error-caption'>Fehler:</span>&nbsp;\" + exception + \"<br>\"));\r\n            this.pushCurrentProgram();\r\n\r\n            let first = true;\r\n            for (let i = this.programStack.length - 1; i >= 0; i--) {\r\n\r\n                let p = this.programStack[i];\r\n                let m = (p.method instanceof Method) ? p.method.identifier : p.method;\r\n                let s: string = \"<span class='jo_error-caption'>\" + (first ? \"Ort\" : \"aufgerufen von\") + \": </span>\" + m;\r\n                if (p.textPosition != null) s += \" <span class='jo_runtimeErrorPosition'>(Z \" + p.textPosition.line + \", S \" + p.textPosition.column + \")</span>\";\r\n                s += \"<br>\";\r\n                let errorLine = jQuery(s);\r\n                if (p.textPosition != null) {\r\n                    let that = this;\r\n                    jQuery(errorLine[2]).on('mousedown', () => {\r\n                        that.main.getBottomDiv()?.console?.showError(p.program.module, p.textPosition);\r\n                    });\r\n                }\r\n                $errorDiv.append(errorLine);\r\n\r\n                first = false;\r\n                if (p.isCalledFromOutside != null) {\r\n                    break;\r\n                }\r\n            }\r\n\r\n            let console = this.main.getBottomDiv()?.console;\r\n\r\n            if (console != null) {\r\n                console.writeConsoleEntry($errorDiv, null, 'rgba(255, 0, 0, 0.4');\r\n                console.showTab();\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n    hideProgrampointerPosition() {\r\n\r\n        if (this.state == InterpreterState.running) {\r\n\r\n            if (this.stepsPerSecond > this.showProgrampointerUptoStepsPerSecond) {\r\n                this.main.hideProgramPointerPosition();\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    comesStatement(statement: TokenType) {\r\n        if (this.currentProgram == null) return false;\r\n        if (this.currentProgramPosition > this.currentProgram.statements.length - 1) return false;\r\n        return this.currentProgram.statements[this.currentProgramPosition].type == statement;\r\n    }\r\n\r\n    resetRuntime() {\r\n        this.printManager.clear();\r\n        this.worldHelper?.destroyWorld();\r\n        this.processingHelper?.destroyWorld();\r\n    }\r\n\r\n    stop(restart: boolean = false) {\r\n        this.inputManager.hide();\r\n        this.pause();\r\n\r\n        if (this.worldHelper != null) {\r\n            this.worldHelper.spriteAnimations = [];\r\n        }\r\n\r\n        setTimeout(() => {\r\n            this.setState(InterpreterState.done);\r\n            this.main.hideProgramPointerPosition();\r\n            if (restart) {\r\n                this.start();\r\n            }\r\n        }, 500);\r\n    }\r\n\r\n    pause() {\r\n        this.setState(InterpreterState.paused);\r\n        this.timerStopped = true;\r\n    }\r\n\r\n    lastPrintedModule: Module = null;\r\n    showProgramPointerAndVariables() {\r\n        if (this.currentProgram == null) return;\r\n        let node = this.currentProgram.statements[this.currentProgramPosition];\r\n        if (node == null) return;\r\n        let position = node.position;\r\n        if (position != null) {\r\n            this.main.showProgramPointerPosition(this.currentProgram.module.file, position);\r\n            this.debugger.showData(this.currentProgram, position, this.stack, this.currentStackframe, this.heap);\r\n            let bottomDiv = this.main.getBottomDiv();\r\n            if (bottomDiv.programPrinter != null) {\r\n                if (this.currentProgram.module != this.lastPrintedModule) {\r\n                    this.main.getBottomDiv().printModuleToBottomDiv(null, this.currentProgram.module);\r\n                    this.lastPrintedModule = this.currentProgram.module;\r\n                }\r\n                this.main.getBottomDiv().programPrinter.showNode(node);\r\n            }\r\n        }\r\n    }\r\n\r\n    stepOut() {\r\n        this.stepOverNestingLevel = 0;\r\n        this.start();\r\n    }\r\n\r\n    oneStep(stepInto: boolean) {\r\n        this.main.getBottomDiv()?.console?.clearErrors();\r\n        this.isFirstStatement = true;\r\n        if (this.state != InterpreterState.paused) {\r\n            this.init();\r\n            if (this.state == InterpreterState.not_initialized) {\r\n                return;\r\n            }\r\n            this.resetRuntime();\r\n            this.showProgramPointerAndVariables();\r\n            this.setState(InterpreterState.paused);\r\n        } else {\r\n            this.stepOverNestingLevel = 10000;\r\n            let oldStepOverNestingLevel = this.stepOverNestingLevel;\r\n            let node = this.currentProgram.statements[this.currentProgramPosition];\r\n            let position = node.position;\r\n            let exception = this.nextStep();\r\n            if (exception != null) {\r\n                this.throwException(exception);\r\n                return;\r\n            }\r\n\r\n            if (!stepInto && this.stepOverNestingLevel > oldStepOverNestingLevel) {\r\n                this.stepOverNestingLevel = 0;\r\n                if (position != null) {\r\n                    this.leaveLine = position.line;\r\n                } else {\r\n                    this.leaveLine = -1;\r\n                }\r\n                this.start();\r\n            } else\r\n                //@ts-ignore\r\n                if (this.state == InterpreterState.done) {\r\n                    this.main.hideProgramPointerPosition();\r\n                } else {\r\n                    this.showProgramPointerAndVariables();\r\n                    //@ts-ignore\r\n                    if (this.state != InterpreterState.waitingForInput) {\r\n                        this.setState(InterpreterState.paused);\r\n                    }\r\n                }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    nextStep(): string {\r\n\r\n        let stepFinished: boolean = false;\r\n\r\n        let node: Statement;\r\n\r\n        let exception: string;\r\n\r\n        while (!stepFinished && !this.additionalStepFinishedFlag && exception == null) {\r\n\r\n\r\n            if (this.currentProgramPosition > this.currentProgram.statements.length - 1) {\r\n                this.setState(InterpreterState.done);\r\n                break;\r\n            }\r\n\r\n            node = this.currentProgram.statements[this.currentProgramPosition];\r\n\r\n            if (node.stepFinished != null) {\r\n                stepFinished = node.stepFinished;\r\n            }\r\n\r\n            exception = this.executeNode(node);\r\n\r\n        }\r\n\r\n        this.additionalStepFinishedFlag = false;\r\n\r\n        this.steps++;\r\n\r\n        return exception;\r\n    }\r\n\r\n    executeNode(node: Statement): string {\r\n\r\n        if (node.breakpoint != null && !this.isFirstStatement) {\r\n            this.additionalStepFinishedFlag = true;\r\n            this.pause();\r\n            return;\r\n        }\r\n\r\n        this.isFirstStatement = false;\r\n        let stackTop = this.stack.length - 1;\r\n        let stackframeBegin = this.currentStackframe;\r\n        let stack = this.stack;\r\n        let value: Value;\r\n\r\n        switch (node.type) {\r\n            case TokenType.castValue:\r\n                let relPos = node.stackPosRelative == null ? 0 : node.stackPosRelative;\r\n                value = stack[stackTop + relPos];\r\n                stack[stackTop + relPos] = value.type.castTo(value, node.newType);\r\n                break;\r\n            case TokenType.checkCast:\r\n                value = stack[stackTop];\r\n                if (value.value == null) break;\r\n                let rto = <RuntimeObject>value.value;\r\n                if (node.newType instanceof Klass) {\r\n                    if (typeof rto == \"object\") {\r\n                        if (!rto.class.hasAncestorOrIs(node.newType)) {\r\n                            return (\"Das Objekt der Klasse \" + rto.class.identifier + \" kann nicht nach \" + node.newType.identifier + \" gecastet werden.\");\r\n                        }\r\n                    } else {\r\n                        if (typeof rto == \"number\" && [\"Integer\", \"Double\", \"Float\"].indexOf(node.newType.identifier) < 0) {\r\n                            return (\"Eine Zahl kann nicht nach \" + node.newType.identifier + \" gecastet werden.\");\r\n                        } else if (typeof rto == \"string\" && [\"String\", \"Character\"].indexOf(node.newType.identifier) < 0) {\r\n                            return (\"Eine Zeichenkette kann nicht nach \" + node.newType.identifier + \" gecastet werden.\");\r\n                        } else if (typeof rto == \"boolean\" && node.newType.identifier != \"Boolean\") {\r\n                            return (\"Ein boolescher Wert kann nicht nach \" + node.newType.identifier + \" gecastet werden.\");\r\n                        }\r\n                    }\r\n                } else if (node.newType instanceof Interface) {\r\n                    if (!(<Klass>rto.class).implementsInterface(node.newType)) {\r\n                        return (\"Das Objekt der Klasse \" + rto.class.identifier + \" implementiert nicht das Interface \" + node.newType.identifier + \".\");\r\n                    }\r\n                }\r\n                break;\r\n            case TokenType.localVariableDeclaration:\r\n                let variable = node.variable;\r\n                let type = variable.type;\r\n                value = {\r\n                    type: type,\r\n                    value: null\r\n                };\r\n                if (type instanceof PrimitiveType) {\r\n                    value.value = type.initialValue;\r\n                }\r\n                stack[variable.stackPos + stackframeBegin] = value;\r\n                if (node.pushOnTopOfStackForInitialization) {\r\n                    stack.push(value);\r\n                }\r\n                break;\r\n            case TokenType.pushLocalVariableToStack:\r\n                stack.push(stack[node.stackposOfVariable + stackframeBegin]);\r\n                break;\r\n            case TokenType.popAndStoreIntoVariable:\r\n                stack[node.stackposOfVariable + stackframeBegin] = stack.pop();\r\n                break;\r\n            case TokenType.pushAttribute:\r\n                let object1 = node.useThisObject ? stack[stackframeBegin].value : stack.pop().value;\r\n                if (object1 == null) return \"Zugriff auf ein Attribut (\" + node.attributeIdentifier + \") des null-Objekts\";\r\n                let value1 = (<RuntimeObject>object1).getValue(node.attributeIdentifier);\r\n                if (value1?.updateValue != null) {\r\n                    value1.updateValue(value1);\r\n                }\r\n                stack.push(value1);\r\n                break;\r\n            case TokenType.pushArrayLength:\r\n                let a = stack.pop().value;\r\n                if (a == null) return \"Zugriff auf das length-Attribut des null-Objekts\";\r\n                stack.push({ type: intPrimitiveType, value: (<any[]>a).length });\r\n                break;\r\n            case TokenType.assignment:\r\n                value = stack.pop();\r\n                stack[stackTop - 1].value = value.value;\r\n                if (!node.leaveValueOnStack) {\r\n                    stack.pop();\r\n                }\r\n                break;\r\n            case TokenType.plusAssignment:\r\n                value = stack.pop();\r\n                stack[stackTop - 1].value += value.value;\r\n                break;\r\n            case TokenType.minusAssignment:\r\n                value = stack.pop();\r\n                stack[stackTop - 1].value -= value.value;\r\n                break;\r\n            case TokenType.multiplicationAssignment:\r\n                value = stack.pop();\r\n                stack[stackTop - 1].value *= value.value;\r\n                break;\r\n            case TokenType.divisionAssignment:\r\n                value = stack.pop();\r\n                stack[stackTop - 1].value /= value.value;\r\n                break;\r\n            case TokenType.moduloAssignment:\r\n                value = stack.pop();\r\n                stack[stackTop - 1].value %= value.value;\r\n                break;\r\n            case TokenType.binaryOp:\r\n                let secondOperand = stack.pop();\r\n                let resultValue =\r\n                    node.leftType.compute(node.operator, stack[stackTop - 1], secondOperand);\r\n                let resultType = node.leftType.getResultType(node.operator, secondOperand.type);\r\n                stack[stackTop - 1] = {\r\n                    type: resultType,\r\n                    value: resultValue\r\n                };\r\n                break;\r\n            case TokenType.unaryOp:\r\n                let oldValue = stack.pop();\r\n                if (node.operator == TokenType.minus) {\r\n                    stack.push({\r\n                        type: oldValue.type,\r\n                        value: -oldValue.value\r\n                    })\r\n                } else {\r\n                    stack.push({\r\n                        type: oldValue.type,\r\n                        value: !oldValue.value\r\n                    })\r\n                }\r\n                break;\r\n            case TokenType.pushConstant:\r\n                stack.push({\r\n                    value: node.value,\r\n                    type: node.dataType\r\n                });\r\n                break;\r\n            case TokenType.pushStaticClassObject:\r\n                if (node.klass instanceof Klass) {\r\n                    stack.push({\r\n                        type: node.klass.staticClass,\r\n                        value: node.klass.staticClass.classObject\r\n                    });\r\n                } else {\r\n                    // This is to enable instanceof operator with interfaces\r\n                    stack.push({\r\n                        type: node.klass,\r\n                        value: node.klass\r\n                    });\r\n                }\r\n                break;\r\n            case TokenType.pushStaticAttribute:\r\n                value = node.klass.classObject.getValue(node.attributeIdentifier);\r\n                if (value.updateValue != null) {\r\n                    value.updateValue(value);\r\n                }\r\n                stack.push(value);\r\n                break;\r\n            // case TokenType.pushStaticAttributeIntrinsic:\r\n            //     value = node.\r\n            //     stack.push({ type: node.attribute.type, value: node.attribute.updateValue(null) });\r\n            //     break;\r\n            case TokenType.selectArrayElement:\r\n                let index = stack.pop();\r\n                let array = stack.pop();\r\n\r\n                if (array.value == null) return \"Zugriff auf ein Element eines null-Feldes\";\r\n\r\n                if (index.value >= array.value.length || index.value < 0) {\r\n                    return \"Zugriff auf das Element mit Index \" + index.value + \" eines Feldes der Länge \" + array.value.length;\r\n                }\r\n                stack.push(array.value[index.value]);\r\n                break;\r\n\r\n            case TokenType.callMainMethod:\r\n                this.stack.push({ value: node.staticClass.classObject, type: node.staticClass });\r\n\r\n                let parameter: Value = {\r\n                    value: [{ value: \"Test\", type: stringPrimitiveType }],\r\n                    type: new ArrayType(stringPrimitiveType)\r\n                };\r\n                let parameterBegin2 = stackTop + 2; // 1 parameter\r\n\r\n                this.stack.push(parameter);\r\n\r\n                this.stackframes.push(this.currentStackframe);\r\n                this.programStack.push({\r\n                    program: this.currentProgram,\r\n                    programPosition: this.currentProgramPosition + 1,\r\n                    textPosition: node.position,\r\n                    method: this.currentMethod,\r\n                    callbackAfterReturn: this.currentCallbackAfterReturn,\r\n                    isCalledFromOutside: null\r\n                });\r\n\r\n                this.currentCallbackAfterReturn = null;\r\n                this.currentStackframe = parameterBegin2;\r\n\r\n                this.currentProgram = node.method.program;\r\n                this.currentMethod = node.method;\r\n                this.currentProgramPosition = -1; // gets increased after switch statement...\r\n\r\n                for (let i = 0; i < node.method.reserveStackForLocalVariables; i++) {\r\n                    stack.push(null);\r\n                }\r\n\r\n                // this.stepOverNestingLevel++;\r\n\r\n                break;\r\n            case TokenType.makeEllipsisArray:\r\n                let ellipsisArray: Value[] = stack.splice(stack.length - node.parameterCount, node.parameterCount);\r\n\r\n                stack.push({\r\n                    value: ellipsisArray,\r\n                    type: node.arrayType\r\n                })\r\n\r\n                break;\r\n            case TokenType.callMethod:\r\n\r\n                // node.stackframebegin = -(parameters.parameterTypes.length + 1)\r\n                let method = node.method;\r\n\r\n                let parameterBegin = stackTop + 1 + node.stackframeBegin;\r\n                let parameters1 = method.parameterlist.parameters;\r\n                for (let i = parameterBegin + 1; i <= stackTop; i++) {\r\n                    if (this.stack[i] != null && this.stack[i].type instanceof PrimitiveType) {\r\n                        stack[i] = {\r\n                            type: parameters1[i - parameterBegin - 1].type,  // cast to parameter type...\r\n                            value: stack[i].value\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (stack[parameterBegin].value == null && !method.isStatic) {\r\n                    return \"Aufruf der Methode \" + method.identifier + \" des null-Objekts\";\r\n                }\r\n\r\n                if (method.isAbstract || method.isVirtual && !node.isSuperCall) {\r\n                    let object = stack[parameterBegin];\r\n                    method = (<Klass>(<RuntimeObject>object.value).class).getMethodBySignature(method.signature);\r\n                }\r\n\r\n                if (method == null) {\r\n                    // TODO: raise runtime error\r\n                    break;\r\n                }\r\n\r\n                if (method.invoke != null) {\r\n                    let rt = method.getReturnType();\r\n                    let parameters = stack.splice(parameterBegin);\r\n                    let returnValue = method.invoke(parameters);\r\n                    if (rt != null) {\r\n                        stack.push({\r\n                            value: returnValue,\r\n                            type: rt\r\n                        });\r\n                    }\r\n                } else {\r\n                    this.stackframes.push(this.currentStackframe);\r\n                    this.programStack.push({\r\n                        program: this.currentProgram,\r\n                        programPosition: this.currentProgramPosition + 1,\r\n                        textPosition: node.position,\r\n                        method: this.currentMethod,\r\n                        callbackAfterReturn: this.currentCallbackAfterReturn,\r\n                        isCalledFromOutside: null\r\n                    });\r\n\r\n                    this.currentCallbackAfterReturn = null;\r\n                    this.currentStackframe = parameterBegin;\r\n\r\n                    this.currentProgram = method.program;\r\n                    this.currentMethod = method;\r\n                    this.currentProgramPosition = -1; // gets increased after switch statement...\r\n\r\n                    for (let i = 0; i < method.reserveStackForLocalVariables; i++) {\r\n                        stack.push(null);\r\n                    }\r\n\r\n                    this.stepOverNestingLevel++;\r\n                    this.additionalStepFinishedFlag = true;\r\n                }\r\n                break;\r\n            case TokenType.callInputMethod:\r\n\r\n                // node.stackframebegin = -(parameters.parameterTypes.length + 1)\r\n                let method1 = node.method;\r\n\r\n                let parameterBegin1 = stackTop + 1 + node.stackframeBegin;\r\n\r\n                let parameters = stack.splice(parameterBegin1);\r\n\r\n                this.timerStopped = true;\r\n                let oldState = this.state;\r\n                this.setState(InterpreterState.waitingForInput);\r\n                // this.main.showProgramPointerPosition(this.currentProgram.module.file, node.position);\r\n                this.showProgramPointerAndVariables();\r\n\r\n                let that = this;\r\n                this.inputManager.readInput(method1, parameters, (value: Value) => {\r\n                    stack.push(value);\r\n                    this.main.hideProgramPointerPosition();\r\n                    that.setState(InterpreterState.paused);\r\n                    if (oldState == InterpreterState.running) {\r\n                        that.start();\r\n                    } else {\r\n                        that.showProgramPointerAndVariables();\r\n                        // that.oneStep(false);\r\n                    }\r\n                });\r\n                break;\r\n\r\n            case TokenType.return:\r\n                this.return(node, stack);\r\n                break;\r\n            case TokenType.decreaseStackpointer:\r\n                stack.splice(stackTop + 1 - node.popCount);\r\n                break;\r\n            case TokenType.initStackframe:\r\n                this.stackframes.push(this.currentStackframe);\r\n                this.currentStackframe = stackTop + 1;\r\n                for (let i = 0; i < node.reserveForLocalVariables; i++) {\r\n                    stack.push(null);\r\n                }\r\n                break;\r\n            case TokenType.closeStackframe:\r\n                stack.splice(stackframeBegin);\r\n                this.currentStackframe = this.stackframes.pop();\r\n                break;\r\n            case TokenType.newObject:\r\n                let object = new RuntimeObject(node.class);\r\n                object.initializeAttributeValues();\r\n\r\n                value = {\r\n                    value: object,\r\n                    type: node.class\r\n                };\r\n\r\n                stack.push(value);\r\n                if (node.subsequentConstructorCall) {\r\n                    stack.push(value);\r\n                    stackTop++;\r\n                }\r\n\r\n                let klass: Klass = node.class;\r\n\r\n                while (klass != null) {\r\n                    let aip = klass.attributeInitializationProgram;\r\n                    if (aip.statements.length > 0) {\r\n\r\n                        this.stackframes.push(this.currentStackframe);\r\n                        this.programStack.push({\r\n                            program: this.currentProgram,\r\n                            programPosition: this.currentProgramPosition + 1,\r\n                            textPosition: node.position,\r\n                            method: this.currentMethod,\r\n                            callbackAfterReturn: this.currentCallbackAfterReturn,\r\n                            isCalledFromOutside: null\r\n                        });\r\n\r\n                        this.currentCallbackAfterReturn = null;\r\n                        this.currentStackframe = stackTop + 1;\r\n\r\n                        this.currentProgram = aip;\r\n                        this.currentProgramPosition = -1;\r\n                        this.currentMethod = \"Konstruktor von \" + klass.identifier;\r\n                        this.stepOverNestingLevel++;\r\n\r\n                        this.additionalStepFinishedFlag = true;\r\n\r\n                    }\r\n                    klass = klass.baseClass;\r\n                }\r\n\r\n                // N.B.: constructor call is next statement\r\n\r\n                break;\r\n            case TokenType.processPostConstructorCallbacks:\r\n                value = stack[stackTop];\r\n                let classType = <Klass>value.type;\r\n                for (let pcc of classType.getPostConstructorCallbacks()) {\r\n                    pcc(value.value);\r\n                }\r\n                break;\r\n            case TokenType.extendedForLoopInit:\r\n                stack[node.stackPosOfCounter + stackframeBegin] = {\r\n                    type: intPrimitiveType,\r\n                    value: 0\r\n                }\r\n                break;\r\n            case TokenType.extendedForLoopCheckCounterAndGetElement:\r\n                let counter: number = stack[node.stackPosOfCounter + stackframeBegin].value++;\r\n                let collection = stack[node.stackPosOfCollection + stackframeBegin].value;\r\n\r\n                switch (node.kind) {\r\n                    case \"array\":\r\n                        if (counter < (<any[]>collection).length) {\r\n                            stack[node.stackPosOfElement + stackframeBegin].value = (<any[]>collection)[counter].value;\r\n                            stack[node.stackPosOfElement + stackframeBegin].type = (<any[]>collection)[counter].type;\r\n                        } else {\r\n                            this.currentProgramPosition = node.destination - 1;\r\n                        }\r\n                        break;\r\n                    case \"internalList\":\r\n                        let list: any[] = (<ListHelper>(<RuntimeObject>collection).intrinsicData[\"ListHelper\"]).valueArray;\r\n                        if (counter < list.length) {\r\n                            stack[node.stackPosOfElement + stackframeBegin].value = list[counter].value;\r\n                            stack[node.stackPosOfElement + stackframeBegin].type = list[counter].type;\r\n                        } else {\r\n                            this.currentProgramPosition = node.destination - 1;\r\n                        }\r\n                        break;\r\n                    case \"group\":\r\n                        let list1: any[] = (<GroupHelper>(<RuntimeObject>collection).intrinsicData[\"Actor\"]).shapes;\r\n                        if (counter < list1.length) {\r\n                            stack[node.stackPosOfElement + stackframeBegin].value = list1[counter];\r\n                            stack[node.stackPosOfElement + stackframeBegin].type = list1[counter].klass;\r\n                        } else {\r\n                            this.currentProgramPosition = node.destination - 1;\r\n                        }\r\n                        break;\r\n                }\r\n                break;\r\n            case TokenType.incrementDecrementBefore:\r\n                value = stack[stackTop];\r\n                value.value += node.incrementDecrementBy;\r\n                break;\r\n            case TokenType.incrementDecrementAfter:\r\n                value = stack[stackTop];\r\n                // replace value by copy:\r\n                stack[stackTop] = {\r\n                    value: value.value,\r\n                    type: value.type\r\n                };\r\n                // increment value which is not involved in subsequent \r\n                value.value += node.incrementDecrementBy;\r\n                break;\r\n            case TokenType.jumpAlways:\r\n                this.currentProgramPosition = node.destination - 1;\r\n                break;\r\n            case TokenType.jumpIfTrue:\r\n                value = stack.pop();\r\n                if (<boolean>value.value) {\r\n                    this.currentProgramPosition = node.destination - 1;\r\n                }\r\n                break;\r\n            case TokenType.jumpIfFalse:\r\n                value = stack.pop();\r\n                if (!(<boolean>value.value)) {\r\n                    this.currentProgramPosition = node.destination - 1;\r\n                }\r\n                break;\r\n            case TokenType.jumpIfTrueAndLeaveOnStack:\r\n                value = stack[stackTop];\r\n                if (<boolean>value.value) {\r\n                    this.currentProgramPosition = node.destination - 1;\r\n                }\r\n                break;\r\n            case TokenType.jumpIfFalseAndLeaveOnStack:\r\n                value = stack[stackTop];\r\n                if (!(<boolean>value.value)) {\r\n                    this.currentProgramPosition = node.destination - 1;\r\n                }\r\n                break;\r\n            case TokenType.noOp:\r\n                break;\r\n            case TokenType.programEnd:\r\n\r\n                if (this.programStack.length > 0) {\r\n                    this.popProgram();\r\n                    this.currentProgramPosition--; // gets increased later on after switch ends\r\n                    this.additionalStepFinishedFlag = true;\r\n                    this.leaveLine = -1;\r\n\r\n                    if (node.pauseAfterProgramEnd) {\r\n                        this.stepOverNestingLevel = -1;\r\n                    }\r\n\r\n                    break;\r\n                }\r\n\r\n                if ((this.worldHelper != null && this.worldHelper.actActors.length > 0) || this.processingHelper != null) {\r\n                    this.currentProgramPosition--;\r\n                    break\r\n                }\r\n\r\n                let baseModule = this.main.getCurrentWorkspace().moduleStore.getModule(\"Base Module\");\r\n                let timerClass: TimerClass = <TimerClass>baseModule.typeStore.getType(\"Timer\");\r\n                if (timerClass.timerEntries.length > 0) {\r\n                    this.currentProgramPosition--;\r\n                    break\r\n                }\r\n\r\n                this.setState(InterpreterState.done);\r\n                this.currentProgram = null;\r\n                this.currentProgramPosition = -1;\r\n                this.additionalStepFinishedFlag = true;\r\n\r\n                Helper.showHelper(\"speedControlHelper\", this.main);\r\n\r\n                this.printManager.showProgramEnd();\r\n\r\n                if (this.worldHelper != null) {\r\n                    this.worldHelper.spriteAnimations = [];\r\n                }\r\n\r\n                this.main.hideProgramPointerPosition();\r\n\r\n                if (this.steps > 0) {\r\n                    let dt = performance.now() - this.timeWhenProgramStarted;\r\n                    let message = 'Executed ' + this.steps + ' steps in ' + this.round(dt)\r\n                        + ' ms (' + this.round(this.steps / dt * 1000) + ' steps/s)';\r\n                    this.main.getBottomDiv()?.console?.writeConsoleEntry(message, null);\r\n                    // console.log(this.timerEvents + \" TimeEvents in \" + dt + \" ms ergibt ein Event alle \" + dt/this.timerEvents + \" ms.\");\r\n                    // console.log(\"Vorgegebene Timerfrequenz: Alle \" + this.timerDelayMs + \" ms\");\r\n                    this.steps = -1;\r\n                }\r\n                this.currentProgramPosition--;\r\n                break;\r\n            case TokenType.print:\r\n            case TokenType.println:\r\n                let text = null;\r\n                let color = null;\r\n                if (node.withColor) color = <string | number>stack.pop().value;\r\n                if (!node.empty) text = <string>stack.pop().value;\r\n                if (node.type == TokenType.println) {\r\n                    this.printManager.println(text, color);\r\n                } else {\r\n                    this.printManager.print(text, color);\r\n                }\r\n                break;\r\n            case TokenType.pushEmptyArray:\r\n                let counts: number[] = [];\r\n                for (let i = 0; i < node.dimension; i++) {\r\n                    counts.push(<number>stack.pop().value);\r\n                }\r\n                stack.push(this.makeEmptyArray(counts, node.arrayType));\r\n                break;\r\n            case TokenType.beginArray:\r\n                stack.push({\r\n                    type: node.arrayType,\r\n                    value: []\r\n                });\r\n                break;\r\n            case TokenType.addToArray:\r\n                stackTop -= node.numberOfElementsToAdd;\r\n                let values: Value[] = stack.splice(stackTop + 1, node.numberOfElementsToAdd);\r\n                stack[stackTop].value = (<any[]>stack[stackTop].value).concat(values);\r\n                break;\r\n            case TokenType.pushEnumValue:\r\n                let enumInfo = node.enumClass.identifierToInfoMap[node.valueIdentifier];\r\n                stack.push(node.enumClass.valueList.value[enumInfo.ordinal]);\r\n                break;\r\n            case TokenType.keywordSwitch:\r\n                let switchValue = stack.pop().value;\r\n                let destination = node.destinationMap[switchValue];\r\n                if (destination != null) {\r\n                    this.currentProgramPosition = destination - 1; // it will be increased after this switch-statement!\r\n                } else {\r\n                    if (node.defaultDestination != null) {\r\n                        this.currentProgramPosition = node.defaultDestination - 1;\r\n                    }\r\n                    // there's a jumpnode after this node which jumps right after last switch case,\r\n                    // so there's nothing more to do here.\r\n                }\r\n                break;\r\n            case TokenType.heapVariableDeclaration:\r\n\r\n                let v = node.variable;\r\n                this.heap[v.identifier] = v;\r\n                v.value = {\r\n                    type: v.type,\r\n                    value: (v.type instanceof PrimitiveType) ? v.type.initialValue : null\r\n                }\r\n                if (node.pushOnTopOfStackForInitialization) {\r\n                    this.stack.push(v.value);\r\n                }\r\n\r\n                break;\r\n            case TokenType.pushFromHeapToStack:\r\n                let v1 = this.heap[node.identifier];\r\n                if (v1 != null) {\r\n                    this.stack.push(v1.value);\r\n                } else {\r\n                    return \"Die Variable \" + node.identifier + \" ist nicht bekannt.\";\r\n                }\r\n                break;\r\n            case TokenType.returnIfDestroyed:\r\n                let shapeRuntimeObject: RuntimeObject = this.stack[stackframeBegin].value;\r\n                if (shapeRuntimeObject != null) {\r\n                    let shape = shapeRuntimeObject.intrinsicData[\"Actor\"];\r\n                    if (shape[\"isDestroyed\"] == true) {\r\n                        this.return(null, stack);\r\n                    }\r\n                }\r\n                break;\r\n\r\n        }\r\n\r\n\r\n        this.currentProgramPosition++;\r\n\r\n    }\r\n    return(node: ReturnStatement | null, stack: Value[]) {\r\n\r\n        let currentCallbackAfterReturn = this.currentCallbackAfterReturn;\r\n\r\n        if (node != null && node.copyReturnValueToStackframePos0) {\r\n            let returnValue: Value = stack.pop();\r\n            stack[this.currentStackframe] = returnValue;\r\n            stack.splice(this.currentStackframe + 1);\r\n        } else {\r\n            stack.splice(this.currentStackframe + ((node != null && node.leaveThisObjectOnStack) ? 1 : 0));\r\n        }\r\n\r\n        this.currentStackframe = this.stackframes.pop();\r\n\r\n        this.popProgram();\r\n        if (node != null && node.methodWasInjected == true) this.currentProgramPosition++;\r\n        this.currentProgramPosition--;  // position gets increased by one at the end of this switch-statement, so ... - 1\r\n        this.stepOverNestingLevel--;\r\n\r\n        if (currentCallbackAfterReturn != null) {\r\n            currentCallbackAfterReturn(this);\r\n        }\r\n\r\n    }\r\n\r\n\r\n    makeEmptyArray(counts: number[], type: Type): Value {\r\n        let type1 = (<ArrayType>type).arrayOfType;\r\n        if (counts.length == 1) {\r\n            let array: Value[] = [];\r\n            for (let i = 0; i < counts[0]; i++) {\r\n                let v = {\r\n                    type: type1,\r\n                    value: null\r\n                };\r\n\r\n                if (type1 instanceof PrimitiveType) {\r\n                    v.value = type1.initialValue;\r\n                }\r\n\r\n                array.push(v);\r\n\r\n            }\r\n            return {\r\n                type: type,\r\n                value: array\r\n            };\r\n        } else {\r\n            let array: Value[] = [];\r\n            let n = counts.pop();\r\n            for (let i = 0; i < n; i++) {\r\n                array.push(this.makeEmptyArray(counts, type1));\r\n            }\r\n            return {\r\n                type: type,\r\n                value: array\r\n            };\r\n        }\r\n    }\r\n\r\n\r\n    round(n: number): string {\r\n        return \"\" + Math.round(n * 10000) / 10000;\r\n    }\r\n\r\n    runningStates: InterpreterState[] = [InterpreterState.paused, InterpreterState.running, InterpreterState.waitingForInput];\r\n\r\n    setState(state: InterpreterState) {\r\n\r\n        // console.log(\"Set state \" + InterpreterState[state]);\r\n\r\n        let oldState = this.state;\r\n        this.state = state;\r\n\r\n        if (state == InterpreterState.error || state == InterpreterState.done) {\r\n            this.webSocketsToCloseAfterProgramHalt.forEach(socket => socket.close());\r\n            this.webSocketsToCloseAfterProgramHalt = [];\r\n        }\r\n\r\n        let am = this.main.getActionManager();\r\n\r\n        for (let actionId of this.actions) {\r\n            am.setActive(\"interpreter.\" + actionId, this.buttonActiveMatrix[actionId][state]);\r\n        }\r\n\r\n        let buttonStartActive = this.buttonActiveMatrix['start'][state];\r\n\r\n        if (buttonStartActive) {\r\n            this.controlButtons.$buttonStart.show();\r\n            this.controlButtons.$buttonPause.hide();\r\n        } else {\r\n            this.controlButtons.$buttonStart.hide();\r\n            this.controlButtons.$buttonPause.show();\r\n        }\r\n\r\n        let buttonStopActive = this.buttonActiveMatrix['stop'][state];\r\n        if (buttonStopActive) {\r\n            // this.controlButtons.$buttonEdit.show();\r\n        } else {\r\n            // this.controlButtons.$buttonEdit.hide();\r\n            if (this.worldHelper != null) {\r\n                this.worldHelper.clearActorLists();\r\n            }\r\n        }\r\n\r\n        if (this.runningStates.indexOf(oldState) >= 0 && this.runningStates.indexOf(state) < 0) {\r\n            this.debugger.disable();\r\n            // this.main.getMonacoEditor().updateOptions({ readOnly: false });\r\n            this.keyboardTool.unsubscribeAllListeners();\r\n        }\r\n\r\n        if (this.runningStates.indexOf(oldState) < 0 && this.runningStates.indexOf(state) >= 0) {\r\n            this.debugger.enable();\r\n            // this.main.getMonacoEditor().updateOptions({ readOnly: true });\r\n        }\r\n\r\n    }\r\n\r\n    pushCurrentProgram() {\r\n\r\n        if (this.currentProgram == null) return;\r\n\r\n        let textPosition: TextPosition;\r\n        let currentStatement = this.currentProgram.statements[this.currentProgramPosition];\r\n        if (currentStatement != null) {\r\n            textPosition = currentStatement.position;\r\n        }\r\n\r\n        this.programStack.push({\r\n            program: this.currentProgram,\r\n            programPosition: this.currentProgramPosition,\r\n            textPosition: textPosition,\r\n            method: this.currentMethod,\r\n            callbackAfterReturn: this.currentCallbackAfterReturn,\r\n            isCalledFromOutside: this.currentIsCalledFromOutside\r\n        })\r\n\r\n        this.currentCallbackAfterReturn = null;\r\n        this.currentIsCalledFromOutside = null;\r\n\r\n    }\r\n\r\n    // runTimer(method: Method, stackElements: Value[],\r\n    //     callbackAfterReturn: (interpreter: Interpreter) => void) {\r\n\r\n    //     if(this.state != InterpreterState.running){\r\n    //         return;\r\n    //     }\r\n\r\n    //     this.pushCurrentProgram();\r\n\r\n    //     this.currentProgram = method.program;\r\n    //     this.currentMethod = method;\r\n    //     this.currentProgramPosition = 0;\r\n    //     this.currentCallbackAfterReturn = callbackAfterReturn;\r\n    //     this.currentIsCalledFromOutside = \"Timer\";\r\n\r\n    //     this.stackframes.push(this.currentStackframe);\r\n    //     this.currentStackframe = this.stack.length;\r\n    //     for (let se of stackElements) this.stack.push(se);\r\n    //     let statements = method.program.statements;\r\n\r\n    //     // if program ends with return then this return-statement decreases stepOverNestingLevel. So we increase it\r\n    //     // beforehand to compensate this effect.\r\n    //     if(statements[statements.length - 1].type == TokenType.return) this.stepOverNestingLevel++;\r\n\r\n    // }\r\n\r\n    runTimer(method: Method, stackElements: Value[],\r\n        callbackAfterReturn: (interpreter: Interpreter) => void, isActor: boolean) {\r\n\r\n        if (this.state != InterpreterState.running) {\r\n            return;\r\n        }\r\n\r\n        let statements = method.program.statements;\r\n\r\n        if (isActor || this.programStack.length == 0) {\r\n            // Main Program is running => Timer has higher precedence\r\n            this.pushCurrentProgram();\r\n\r\n            this.currentProgram = method.program;\r\n            this.currentMethod = method;\r\n            this.currentProgramPosition = 0;\r\n            this.currentCallbackAfterReturn = callbackAfterReturn;\r\n            this.currentIsCalledFromOutside = \"Timer\";\r\n\r\n            this.stackframes.push(this.currentStackframe);\r\n            this.currentStackframe = this.stack.length;\r\n            this.stack = this.stack.concat(stackElements);\r\n            // for (let se of stackElements) this.stack.push(se);\r\n\r\n            // if program ends with return then this return-statement decreases stepOverNestingLevel. So we increase it\r\n            // beforehand to compensate this effect.\r\n            if (statements[statements.length - 1].type == TokenType.return) this.stepOverNestingLevel++;\r\n        } else {\r\n            // another Timer is running => queue up\r\n            // position 0 in program stack is main program\r\n            // => insert timer in position 1\r\n\r\n            this.programStack.splice(1, 0, {\r\n                program: method.program,\r\n                programPosition: 0,\r\n                textPosition: { line: 0, column: 0, length: 0 },\r\n                method: method,\r\n                callbackAfterReturn: callbackAfterReturn,\r\n                isCalledFromOutside: \"Timer\",\r\n                stackElementsToPushBeforeFirstExecuting: stackElements\r\n            });\r\n\r\n            if (statements[statements.length - 1].type == TokenType.return) this.stepOverNestingLevel++;\r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\n    evaluate(program: Program): { error: string, value: Value } {\r\n\r\n        this.pushCurrentProgram();\r\n\r\n        this.currentProgram = program;\r\n        this.currentProgramPosition = 0;\r\n\r\n        let stacksizeBefore = this.stack.length;\r\n\r\n        let oldInterpreterState = this.state;\r\n        let stepOverNestingLevel = this.stepOverNestingLevel;\r\n        let additionalStepFinishedFlag = this.additionalStepFinishedFlag;\r\n\r\n        let oldStackframe = this.currentStackframe;\r\n\r\n        let error: string;\r\n        let stepCount = 0;\r\n\r\n        try {\r\n            while (error == null &&\r\n                (this.currentProgram != program || this.currentProgramPosition <\r\n                    this.currentProgram.statements.length)\r\n                && stepCount < 100000\r\n                // && this.currentProgram == program\r\n            ) {\r\n                error = this.nextStep();\r\n                stepCount++;\r\n            }\r\n        } catch (e) {\r\n            error = \"Fehler bei der Auswertung\";\r\n        }\r\n\r\n        if (this.currentProgram == program && this.programStack.length > 0) {\r\n            this.popProgram();\r\n        }\r\n\r\n        let stackTop: Value;\r\n        if (this.stack.length > stacksizeBefore) {\r\n            stackTop = this.stack.pop();\r\n\r\n            while (this.stack.length > stacksizeBefore) {\r\n                this.stack.pop();\r\n            }\r\n\r\n        }\r\n\r\n        this.stepOverNestingLevel = stepOverNestingLevel;\r\n        this.additionalStepFinishedFlag = additionalStepFinishedFlag;\r\n        this.setState(oldInterpreterState);\r\n\r\n        return {\r\n            error: error,\r\n            value: stackTop\r\n        }\r\n\r\n    }\r\n\r\n    executeImmediatelyInNewStackframe(program: Program, valuesToPushBeforeExecuting: Value[]): { error: string, value: Value } {\r\n\r\n        this.pushCurrentProgram();\r\n\r\n        this.currentProgram = program;\r\n        let oldProgramPosition = this.currentProgramPosition;\r\n        this.currentProgramPosition = 0;\r\n\r\n        let numberOfStackframesBefore = this.stackframes.length;\r\n        this.stackframes.push(this.currentStackframe);\r\n        let stacksizeBefore = this.stack.length;\r\n        this.currentStackframe = stacksizeBefore;\r\n\r\n        for (let v of valuesToPushBeforeExecuting) this.stack.push(v);\r\n\r\n        let oldInterpreterState = this.state;\r\n        let stepOverNestingLevel = this.stepOverNestingLevel;\r\n        let additionalStepFinishedFlag = this.additionalStepFinishedFlag;\r\n\r\n\r\n        let stepCount = 0;\r\n        let error = null;\r\n\r\n        try {\r\n            while (this.stackframes.length > numberOfStackframesBefore\r\n                && stepCount < 100000 && error == null\r\n            ) {\r\n                let node = this.currentProgram.statements[this.currentProgramPosition];\r\n\r\n                error = this.executeNode(node);\r\n                stepCount++;\r\n            }\r\n        } catch (e) {\r\n            error = \"Fehler bei der Auswertung\";\r\n        }\r\n\r\n        if (stepCount == 100000) this.throwException(\"Die Ausführung des Konstruktors dauerte zu lange.\");\r\n\r\n        let stackTop: Value;\r\n        if (this.stack.length > stacksizeBefore) {\r\n            stackTop = this.stack.pop();\r\n\r\n            while (this.stack.length > stacksizeBefore) {\r\n                this.stack.pop();\r\n            }\r\n\r\n        }\r\n\r\n        this.stepOverNestingLevel = stepOverNestingLevel;\r\n        this.additionalStepFinishedFlag = additionalStepFinishedFlag;\r\n        // this.currentProgramPosition++;\r\n\r\n        this.currentProgramPosition = oldProgramPosition;\r\n        this.setState(oldInterpreterState);\r\n\r\n        return {\r\n            error: error,\r\n            value: stackTop\r\n        }\r\n\r\n    }\r\n\r\n    instantiateObjectImmediately(klass: Klass): RuntimeObject {\r\n        let object = new RuntimeObject(klass);\r\n        object.initializeAttributeValues();\r\n\r\n        let value = {\r\n            value: object,\r\n            type: klass\r\n        };\r\n\r\n        let klass1 = klass;\r\n\r\n        while (klass1 != null) {\r\n            let aip = klass1.attributeInitializationProgram;\r\n            if (aip.statements.length > 0) {\r\n\r\n                this.executeImmediatelyInNewStackframe(aip, [value]);\r\n\r\n            }\r\n            klass1 = klass1.baseClass;\r\n        }\r\n\r\n        let constructor = klass.getMethodBySignature(klass.identifier + \"()\");\r\n        if (constructor != null && constructor.program != null) {\r\n            // let programWithoutReturnStatement: Program = {\r\n            //     labelManager: null,\r\n            //     module: constructor.program.module,\r\n            //     statements: constructor.program.statements.slice(0, constructor.program.statements.length - 1)\r\n            // };\r\n            this.executeImmediatelyInNewStackframe(constructor.program, [value]);\r\n        }\r\n\r\n        return object;\r\n\r\n    }\r\n\r\n}","export class ColorHelper {\r\n\r\n    static predefinedColors = {\r\n        \"aliceblue\": 0xF0F8FF,\r\n        \"antiquewhite\": 0xFAEBD7,\r\n        \"aqua\": 0x00FFFF,\r\n        \"aquamarine\": 0x7FFFD4,\r\n        \"azure\": 0xF0FFFF,\r\n        \"beige\": 0xF5F5DC,\r\n        \"bisque\": 0xFFE4C4,\r\n        \"black\": 0x000000,\r\n        \"blanchedAlmond\": 0xFFEBCD,\r\n        \"blue\": 0x0000FF,\r\n        \"blueviolet\": 0x8A2BE2,\r\n        \"brown\": 0xA52A2A,\r\n        \"burlywood\": 0xDEB887,\r\n        \"cadetblue\": 0x5F9EA0,\r\n        \"chartreuse\": 0x7FFF00,\r\n        \"chocolate\": 0xD2691E,\r\n        \"coral\": 0xFF7F50,\r\n        \"cornflowerblue\": 0x6495ED,\r\n        \"cornsilk\": 0xFFF8DC,\r\n        \"crimson\": 0xDC143C,\r\n        \"cyan\": 0x00FFFF,\r\n        \"darkblue\": 0x00008B,\r\n        \"darkcyan\": 0x008B8B,\r\n        \"darkgoldenrod\": 0xB8860B,\r\n        \"darkgray\": 0xA9A9A9,\r\n        \"darkgrey\": 0xA9A9A9,\r\n        \"darkgreen\": 0x006400,\r\n        \"darkkhaki\": 0xBDB76B,\r\n        \"darkmagenta\": 0x8B008B,\r\n        \"darkolivegreen\": 0x556B2F,\r\n        \"darkorange\": 0xFF8C00,\r\n        \"darkorchid\": 0x9932CC,\r\n        \"darkred\": 0x8B0000,\r\n        \"darksalmon\": 0xE9967A,\r\n        \"darkseagreen\": 0x8FBC8F,\r\n        \"darkslateblue\": 0x483D8B,\r\n        \"darkslategray\": 0x2F4F4F,\r\n        \"darkslategrey\": 0x2F4F4F,\r\n        \"darkturquoise\": 0x00CED1,\r\n        \"darkviolet\": 0x9400D3,\r\n        \"deeppink\": 0xFF1493,\r\n        \"deepskyblue\": 0x00BFFF,\r\n        \"dimgray\": 0x696969,\r\n        \"dimgrey\": 0x696969,\r\n        \"dodgerblue\": 0x1E90FF,\r\n        \"firebrick\": 0xB22222,\r\n        \"floralwhite\": 0xFFFAF0,\r\n        \"forestgreen\": 0x228B22,\r\n        \"fuchsia\": 0xFF00FF,\r\n        \"gainsboro\": 0xDCDCDC,\r\n        \"ghostwhite\": 0xF8F8FF,\r\n        \"gold\": 0xFFD700,\r\n        \"goldenrod\": 0xDAA520,\r\n        \"gray\": 0x808080,\r\n        \"grau\": 0x808080,\r\n        \"green\": 0x008000,\r\n        \"greenyellow\": 0xADFF2F,\r\n        \"honeydew\": 0xF0FFF0,\r\n        \"hotpink\": 0xFF69B4,\r\n        \"indianred \": 0xCD5C5C,\r\n        \"indigo \": 0x4B0082,\r\n        \"ivory\": 0xFFFFF0,\r\n        \"khaki\": 0xF0E68C,\r\n        \"lavender\": 0xE6E6FA,\r\n        \"lavenderblush\": 0xFFF0F5,\r\n        \"lawngreen\": 0x7CFC00,\r\n        \"lemonchiffon\": 0xFFFACD,\r\n        \"lightblue\": 0xADD8E6,\r\n        \"lightcoral\": 0xF08080,\r\n        \"lightcyan\": 0xE0FFFF,\r\n        \"lightgoldenrodyellow\": 0xFAFAD2,\r\n        \"lightgray\": 0xD3D3D3,\r\n        \"lightgrey\": 0xD3D3D3,\r\n        \"lightgreen\": 0x90EE90,\r\n        \"lightpink\": 0xFFB6C1,\r\n        \"lightsalmon\": 0xFFA07A,\r\n        \"lightseagreen\": 0x20B2AA,\r\n        \"lightskyblue\": 0x87CEFA,\r\n        \"lightslategray\": 0x778899,\r\n        \"lightslategrey\": 0x778899,\r\n        \"lightsteelblue\": 0xB0C4DE,\r\n        \"lightyellow\": 0xFFFFE0,\r\n        \"lime\": 0x00FF00,\r\n        \"limegreen\": 0x32CD32,\r\n        \"linen\": 0xFAF0E6,\r\n        \"magenta\": 0xFF00FF,\r\n        \"maroon\": 0x800000,\r\n        \"mediumaquamarine\": 0x66CDAA,\r\n        \"mediumblue\": 0x0000CD,\r\n        \"mediumorchid\": 0xBA55D3,\r\n        \"mediumpurple\": 0x9370DB,\r\n        \"mediumseagreen\": 0x3CB371,\r\n        \"mediumslateblue\": 0x7B68EE,\r\n        \"mediumspringgreen\": 0x00FA9A,\r\n        \"mediumturquoise\": 0x48D1CC,\r\n        \"mediumvioletred\": 0xC71585,\r\n        \"midnightblue\": 0x191970,\r\n        \"mintcream\": 0xF5FFFA,\r\n        \"mistyrose\": 0xFFE4E1,\r\n        \"moccasin\": 0xFFE4B5,\r\n        \"navajowhite\": 0xFFDEAD,\r\n        \"navy\": 0x000080,\r\n        \"oldLace\": 0xFDF5E6,\r\n        \"olive\": 0x808000,\r\n        \"olivedrab\": 0x6B8E23,\r\n        \"orange\": 0xFFA500,\r\n        \"orangered\": 0xFF4500,\r\n        \"orchid\": 0xDA70D6,\r\n        \"palegoldenrod\": 0xEEE8AA,\r\n        \"palegreen\": 0x98FB98,\r\n        \"paleturquoise\": 0xAFEEEE,\r\n        \"palevioletred\": 0xDB7093,\r\n        \"papayawhip\": 0xFFEFD5,\r\n        \"peachpuff\": 0xFFDAB9,\r\n        \"peru\": 0xCD853F,\r\n        \"pink\": 0xFFC0CB,\r\n        \"plum\": 0xDDA0DD,\r\n        \"powderblue\": 0xB0E0E6,\r\n        \"purple\": 0x800080,\r\n        \"rebeccapurple\": 0x663399,\r\n        \"red\": 0xFF0000,\r\n        \"rosybrown\": 0xBC8F8F,\r\n        \"royalblue\": 0x4169E1,\r\n        \"saddlebrown\": 0x8B4513,\r\n        \"salmon\": 0xFA8072,\r\n        \"sandybrown\": 0xF4A460,\r\n        \"sand\": 0xF4A460,\r\n        \"seagreen\": 0x2E8B57,\r\n        \"seashell\": 0xFFF5EE,\r\n        \"sienna\": 0xA0522D,\r\n        \"silver\": 0xC0C0C0,\r\n        \"skyblue\": 0x87CEEB,\r\n        \"slateblue\": 0x6A5ACD,\r\n        \"slategray\": 0x708090,\r\n        \"slategrey\": 0x708090,\r\n        \"snow\": 0xFFFAFA,\r\n        \"springgreen\": 0x00FF7F,\r\n        \"steelblue\": 0x4682B4,\r\n        \"tan\": 0xD2B48C,\r\n        \"teal\": 0x008080,\r\n        \"thistle\": 0xD8BFD8,\r\n        \"tomato\": 0xFF6347,\r\n        \"turquoise\": 0x40E0D0,\r\n        \"violet\": 0xEE82EE,\r\n        \"wheat\": 0xF5DEB3,\r\n        \"white\": 0xFFFFFF,\r\n        \"whitesmoke\": 0xF5F5F5,\r\n        \"yellow\": 0xFFFF00,\r\n        \"yellowgreen\": 0x9ACD32,\r\n    };\r\n\r\n    static intColorToHexRGB(color: number) {\r\n        if(color == null){\r\n            return \"---\";\r\n        } else {\r\n            let s: string = color.toString(16);\r\n            while (s.length < 6) s = \"0\" + s;\r\n            return \"#\" + s;\r\n        }\r\n    }\r\n\r\n    static intColorToRGB(color: number) {\r\n        if(color == null) {return \"---\";} else\r\n        {return \"rgb(\" + ((color & 0xff0000) >> 16) + \", \" + ((color & 0xff00) >> 8) + \", \" + (color & 0xff) + \")\";}\r\n    }\r\n\r\n    static parseColorToOpenGL(color: string): { color: number, alpha: number } {\r\n\r\n        if(color == null){\r\n            return {\r\n                color: null,\r\n                alpha: 1\r\n            };\r\n        }\r\n\r\n        let c = this.predefinedColors[color];\r\n        if (c != null) return { color: c, alpha: 1 };\r\n\r\n        // see https://stackoverflow.com/questions/11068240/what-is-the-most-efficient-way-to-parse-a-css-color-in-javascript\r\n\r\n        let m2 = color.match(/^#([0-9a-f]{6})$/i);\r\n        if (m2 && m2.length > 1) {\r\n            let m = m2[1];\r\n            if (m) {\r\n                return {\r\n                    color: 0x10000 * parseInt(m.substr(0, 2), 16) + 0x100 * parseInt(m.substr(2, 2), 16) + parseInt(m.substr(4, 2), 16),\r\n                    alpha: 1\r\n                };\r\n            }\r\n        }\r\n\r\n        let m3 = color.match(/^#([0-9a-f]{8})$/i);\r\n        if (m3 && m3.length > 1){\r\n            let m = m3[1];\r\n            if (m) {\r\n                return {\r\n                    color: 0x10000 * parseInt(m.substr(0, 2), 16) + 0x100 * parseInt(m.substr(2, 2), 16) + parseInt(m.substr(4, 2), 16),\r\n                    alpha: parseInt(m.substr(6, 2), 16) / 0xff\r\n                };\r\n            }\r\n        }\r\n\r\n        let m1 = color.match(/^rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)$/i);\r\n        if (m1) {\r\n            return {\r\n                color: parseInt(m1[1]) * 0x10000 + parseInt(m1[2]) * 0x100 + parseInt(m1[3]),\r\n                alpha: 1\r\n            };\r\n        }\r\n\r\n        m1 = color.match(/^rgba\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+\\.?\\d+)\\s*\\)$/i);\r\n        if (m1) {\r\n            return {\r\n                color: parseInt(m1[1]) * 0x10000 + parseInt(m1[2]) * 0x100 + parseInt(m1[3]),\r\n                alpha: parseFloat(m1[4]) \r\n            };\r\n        }\r\n\r\n        return { color: 0xff0000, alpha: 1 };\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n}","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass, Visibility } from \"../../compiler/types/Class.js\";\r\nimport { Attribute, Method, Parameterlist, Value } from \"../../compiler/types/Types.js\";\r\nimport { doublePrimitiveType, floatPrimitiveType, intPrimitiveType, voidPrimitiveType, stringPrimitiveType, booleanPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { ActorHelper } from \"./Actor.js\";\r\nimport { InterpreterState, Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { ShapeHelper } from \"./Shape.js\";\r\nimport { KeyboardTool } from \"../../tools/KeyboardTool.js\";\r\nimport { SpriteHelper } from \"./Sprite.js\";\r\nimport { ColorHelper } from \"./ColorHelper.js\";\r\nimport { Point } from \"pixi.js\";\r\nimport { Punkt } from \"../../tools/MatheTools.js\";\r\nimport { GroupClass, GroupHelper } from \"./Group.js\";\r\nimport { MouseListenerInterface } from \"./MouseListener.js\";\r\n\r\nexport class WorldClass extends Klass {\r\n\r\n    constructor(public module: Module) {\r\n\r\n        super(\"World\", module, \"Grafische Zeichenfläche mit Koordinatensystem\")\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n\r\n        let groupType = <GroupClass>module.typeStore.getType(\"Group\");\r\n        let mouseListenerType = <MouseListenerInterface>module.typeStore.getType(\"MouseListener\");\r\n\r\n        // this.addAttribute(new Attribute(\"PI\", doublePrimitiveType, (object) => { return Math.PI }, true, Visibility.public, true, \"Die Kreiszahl Pi (3.1415...)\"));\r\n\r\n        this.addMethod(new Method(\"World\", new Parameterlist([\r\n            { identifier: \"breite\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"höhe\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let breite: number = parameters[1].value;\r\n                let höhe: number = parameters[2].value;\r\n                let gh: WorldHelper = this.getWorldHelper(o, breite, höhe);  //new WorldHelper(breite, höhe, this.module, o);\r\n                o.intrinsicData[\"World\"] = gh;\r\n\r\n            }, false, false, \"Legt einen neuen Grafikbereich (='Welt') an\", true));\r\n\r\n        this.addMethod(new Method(\"World\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let gh: WorldHelper = this.getWorldHelper(o); // new WorldHelper(800, 600, this.module, o);\r\n                o.intrinsicData[\"World\"] = gh;\r\n\r\n            }, false, false, \"Legt einen neuen Grafikbereich (='Welt') an. Das Koordinatensystem geht von 0 bis 800 in x-Richtung und von 0 - 600 in y-Richtung.\", true));\r\n\r\n        this.addMethod(new Method(\"setBackgroundColor\", new Parameterlist([\r\n            { identifier: \"colorAsRGBAString\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let color: string = parameters[1].value;\r\n                let wh: WorldHelper = o.intrinsicData[\"World\"];\r\n\r\n                wh.setBackgroundColor(color);\r\n\r\n            }, false, false, 'Setzt die Hintergrundfarbe. Die Farbe ist entweder eine vordefinierte Farbe (\"schwarz\", \"rot\", ...) oder eine css-Farbe der Art \"#ffa7b3\" (ohne alpha), \"#ffa7b380\" (mit alpha), \"rgb(172, 22, 18)\" oder \"rgba(123, 22,18, 0.3)\"', false));\r\n\r\n        this.addMethod(new Method(\"move\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n                let wh: WorldHelper = o.intrinsicData[\"World\"];\r\n\r\n                let matrix = new PIXI.Matrix().copyFrom(wh.stage.localTransform);\r\n                wh.stage.localTransform.identity();\r\n                wh.stage.localTransform.translate(x,y);\r\n                wh.stage.localTransform.prepend(matrix);\r\n                \r\n                \r\n                // wh.stage.localTransform.translate(x,y);\r\n                wh.stage.transform.onChange();\r\n\r\n            }, false, false, 'Verschiebt alle Objekte der Welt um x nach rechts und y nach unten.', false));\r\n\r\n        this.addMethod(new Method(\"rotate\", new Parameterlist([\r\n            { identifier: \"angleInDeg\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let angle: number = parameters[1].value;\r\n                let x: number = parameters[2].value;\r\n                let y: number = parameters[3].value;\r\n                let wh: WorldHelper = o.intrinsicData[\"World\"];\r\n\r\n                let matrix = new PIXI.Matrix().copyFrom(wh.stage.localTransform);\r\n                wh.stage.localTransform.identity();\r\n                wh.stage.localTransform.translate(-x, -y);\r\n                wh.stage.localTransform.rotate(-angle / 180 * Math.PI);\r\n                wh.stage.localTransform.translate(x, y);\r\n                wh.stage.localTransform.prepend(matrix);\r\n                \r\n                \r\n                // wh.stage.localTransform.translate(-x, -y);\r\n                // wh.stage.localTransform.rotate(-angle / 180 * Math.PI);\r\n                // wh.stage.localTransform.translate(x, y);\r\n                wh.stage.transform.onChange();\r\n\r\n            }, false, false, 'Rotiert die Welt um den angegebenen Winkel im Urzeigersinn. Drehpunkt ist der Punkt (x/y).', false));\r\n\r\n        this.addMethod(new Method(\"scale\", new Parameterlist([\r\n            { identifier: \"factor\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let factor: number = parameters[1].value;\r\n                let x: number = parameters[2].value;\r\n                let y: number = parameters[3].value;\r\n                let wh: WorldHelper = o.intrinsicData[\"World\"];\r\n\r\n\r\n                let matrix = new PIXI.Matrix().copyFrom(wh.stage.localTransform);\r\n                wh.stage.localTransform.identity();\r\n                wh.stage.localTransform.translate(-x, -y);\r\n                wh.stage.localTransform.scale(factor, factor);\r\n                wh.stage.localTransform.translate(x, y);\r\n                wh.stage.localTransform.prepend(matrix);\r\n                \r\n                \r\n                // wh.stage.localTransform.translate(-x, -y);\r\n                // wh.stage.localTransform.scale(factor, factor);\r\n                // wh.stage.localTransform.translate(x, y);\r\n                wh.stage.transform.onChange();\r\n\r\n            }, false, false, 'Streckt die Welt um den angegebenen Faktor. Zentrum der Streckung ist (x/y).', false));\r\n\r\n        this.addMethod(new Method(\"setCoordinateSystem\", new Parameterlist([\r\n            { identifier: \"left\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"top\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"width\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"height\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let left: number = parameters[1].value;\r\n                let top: number = parameters[2].value;\r\n                let width: number = parameters[3].value;\r\n                let height: number = parameters[4].value;\r\n                let wh: WorldHelper = o.intrinsicData[\"World\"];\r\n\r\n                wh.stage.localTransform.identity();     // coordinate system (0/0) to (initialWidth/initialHeight)\r\n                wh.stage.localTransform.translate(-left, -top);\r\n                wh.stage.localTransform.scale(wh.initialWidth/width, wh.initialHeight/height);\r\n\r\n                // wh.stage.localTransform.translate(x, y);\r\n                wh.stage.transform.onChange();\r\n\r\n            }, false, false, 'Streckt die Welt um den angegebenen Faktor. Zentrum der Streckung ist (x/y).', false));\r\n\r\n\r\n        this.addMethod(new Method(\"setDefaultGroup\", new Parameterlist([\r\n            { identifier: \"group\", type: groupType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let group: RuntimeObject = parameters[1].value;\r\n                let wh: WorldHelper = o.intrinsicData[\"World\"];\r\n\r\n                wh.defaultGroup = group == null ? null : group.intrinsicData[\"Actor\"];\r\n\r\n            }, false, false, 'Legt eine Gruppe fest, zu der ab jetzt alle neuen Objekte automatisch hinzugefügt werden. Falls null angegeben wird, werden neue Objekte zu keiner Gruppe automatisch hinzugefügt.', false));\r\n\r\n        this.addMethod(new Method(\"addMouseListener\", new Parameterlist([\r\n            { identifier: \"listener\", type: mouseListenerType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let listener: RuntimeObject = parameters[1].value;\r\n                let wh: WorldHelper = o.intrinsicData[\"World\"];\r\n\r\n                wh.addMouseListener(listener);\r\n\r\n            }, false, false, 'Fügt einen neuen MouseListener hinzu, dessen Methoden bei Mausereignissen aufgerufen werden.', false));\r\n\r\n\r\n        this.addMethod(new Method(\"getWidth\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let wh: WorldHelper = o.intrinsicData[\"World\"];\r\n\r\n                return Math.round(wh.width);\r\n\r\n            }, false, false, 'Gibt die \"Breite\" des Grafikbereichs zurück, genauer: die x-Koordinate am rechten Rand.', false));\r\n\r\n        this.addMethod(new Method(\"getHeight\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let wh: WorldHelper = o.intrinsicData[\"World\"];\r\n\r\n                return Math.round(wh.height);\r\n\r\n            }, false, false, 'Gibt die \"Höhe\" des Grafikbereichs zurück, genauer: die y-Koordinate am unteren Rand.', false));\r\n\r\n        this.addMethod(new Method(\"setCursor\", new Parameterlist([\r\n            { identifier: \"cursor\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let wh: WorldHelper = o.intrinsicData[\"World\"];\r\n                let cursor: string = parameters[1].value;\r\n\r\n                wh.setCursor(cursor);\r\n\r\n            }, false, false, 'Ändert die Form des Mauscursors im gesamten Grafikbereich. Mögiche Werte: siehe https://developer.mozilla.org/de/docs/Web/CSS/cursor.', false));\r\n\r\n\r\n    }\r\n\r\n    getWorldHelper(worldObject: RuntimeObject, breite: number = 800, höhe: number = 600): WorldHelper {\r\n\r\n        let wh = this.module?.main?.getInterpreter()?.worldHelper;\r\n\r\n\r\n        if (wh != null) {\r\n\r\n            if (wh.width != breite || wh.height != höhe) {\r\n\r\n                let ratio: number = Math.round(höhe / breite * 100);\r\n                wh.$containerOuter.css('padding-bottom', ratio + \"%\");\r\n\r\n                wh.stage.localTransform.scale(wh.width / breite, wh.height / höhe);\r\n                wh.width = breite;\r\n                wh.height = höhe;\r\n                // this.stage.localTransform.rotate(45/180*Math.PI);\r\n                // this.stage.localTransform.translate(400,300);\r\n                wh.stage.transform.onChange();\r\n\r\n                this.module.main.getRightDiv()?.adjustWidthToWorld();\r\n\r\n            }\r\n\r\n            return wh;\r\n\r\n        } else {\r\n            return new WorldHelper(breite, höhe, this.module, worldObject);\r\n        }\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\nexport type MouseListenerShapeData = {\r\n    shapeHelper: ShapeHelper,\r\n    types: { [type: string]: boolean },\r\n    methods: { [type: string]: Method }\r\n}\r\n\r\nexport type MouseListenerData = {\r\n    listener: RuntimeObject,\r\n    types: { [type: string]: boolean },\r\n    methods: { [type: string]: Method }\r\n}\r\n\r\nexport type ActorData = {\r\n    actorHelper: ActorHelper,\r\n    method: Method\r\n}\r\n\r\nexport class WorldHelper {\r\n\r\n    $containerOuter: JQuery<HTMLElement>;\r\n    $containerInner: JQuery<HTMLElement>;\r\n    app: PIXI.Application;\r\n    stage: PIXI.Container;\r\n\r\n    actActors: ActorData[] = [];\r\n    keyPressedActors: ActorData[] = [];\r\n    keyUpActors: ActorData[] = [];\r\n    keyDownActors: ActorData[] = [];\r\n    actorHelpersToDestroy: ActorHelper[] = [];\r\n\r\n    mouseListenerShapes: MouseListenerShapeData[] = [];\r\n    mouseListeners: MouseListenerData[] = [];\r\n\r\n    interpreter: Interpreter;\r\n    actorsFinished: boolean = true;\r\n    summedDelta: number = 0;\r\n\r\n    defaultGroup: GroupHelper;\r\n\r\n    initialWidth: number;\r\n    initialHeight: number;\r\n\r\n    public scaledTextures: { [name: string]: PIXI.Texture } = {};\r\n\r\n    tickerFunction: (t: number) => void;\r\n\r\n    clearActorLists() {\r\n        this.actActors = [];\r\n        this.keyPressedActors = [];\r\n        this.keyUpActors = [];\r\n        this.keyDownActors = [];\r\n    }\r\n\r\n    constructor(public width: number, public height: number, private module: Module, public world: RuntimeObject) {\r\n\r\n        PIXI.settings.SCALE_MODE = PIXI.SCALE_MODES.NEAREST;\r\n\r\n        this.initialHeight = height;\r\n        this.initialWidth = width;\r\n\r\n        this.interpreter = this.module?.main?.getInterpreter();\r\n\r\n        if (this.interpreter.processingHelper != null) {\r\n            this.interpreter.throwException(\"Die herkömmliche Grafikausgabe kann nicht zusammen mit Processing genutzt werden.\");\r\n        }\r\n\r\n        if (this.interpreter.worldHelper != null) {\r\n            this.interpreter.throwException(\"Es darf nur ein World-Objekt instanziert werden.\");\r\n        }\r\n\r\n        this.interpreter.worldHelper = this;\r\n\r\n        this.$containerOuter = jQuery('<div></div>');\r\n        let $graphicsDiv = this.module.main.getInterpreter().printManager.getGraphicsDiv();\r\n\r\n        let f = () => {\r\n            let $jo_tabs = $graphicsDiv.parents(\".jo_tabs\");\r\n            let maxWidth: number = $jo_tabs.width();\r\n            let maxHeight: number = $jo_tabs.height();\r\n            // let maxWidth: number = $graphicsDiv.parent().width();\r\n            // let maxHeight: number = $graphicsDiv.parent().height();\r\n\r\n            if (height / width > maxHeight / maxWidth) {\r\n                $graphicsDiv.css({\r\n                    'width': width / height * maxHeight + \"px\",\r\n                    'height': maxHeight + \"px\",\r\n                })\r\n            } else {\r\n                $graphicsDiv.css({\r\n                    'height': height / width * maxWidth + \"px\",\r\n                    'width': maxWidth + \"px\",\r\n                })\r\n            }\r\n        };\r\n\r\n        $graphicsDiv.off('sizeChanged');\r\n        $graphicsDiv.on('sizeChanged', f);\r\n\r\n        f();\r\n\r\n        this.$containerInner = jQuery('<div></div>');\r\n        this.$containerOuter.append(this.$containerInner);\r\n\r\n        $graphicsDiv.append(this.$containerOuter);\r\n        $graphicsDiv.show();\r\n\r\n        $graphicsDiv[0].oncontextmenu = function (e) {\r\n            e.preventDefault();\r\n        };\r\n\r\n        PIXI.settings.TARGET_FPMS = 30.0 / 1000.0;\r\n\r\n        this.app = new PIXI.Application({\r\n            antialias: true,\r\n            width: width, height: height,\r\n            //resizeTo: $containerInner[0]\r\n        });\r\n\r\n\r\n        let that = this;\r\n        // let i = 0;\r\n\r\n        this.tickerFunction = (delta) => {\r\n            // if (i++ % 2 == 0) \r\n            that.tick(PIXI.Ticker.shared.elapsedMS);\r\n        };\r\n\r\n        this.app.ticker.add(this.tickerFunction);\r\n        this.app.ticker.maxFPS = 30;\r\n\r\n        this.interpreter.timerExtern = true;\r\n\r\n        this.stage = new PIXI.Container();\r\n\r\n        this.app.stage.addChild(this.stage);\r\n\r\n        this.$containerInner.append(this.app.view);\r\n\r\n\r\n        // this.stage.localTransform.translate(-400, -300);\r\n        // this.stage.localTransform.rotate(-45/180*Math.PI);\r\n        // this.stage.localTransform.translate(400,300);\r\n        // this.stage.transform.onChange();\r\n\r\n        this.interpreter.keyboardTool.keyPressedCallbacks.push((key) => {\r\n            for (let kpa of that.keyPressedActors) {\r\n\r\n                that.runActorWhenKeyEvent(kpa, key);\r\n\r\n            }\r\n        });\r\n\r\n        this.interpreter.keyboardTool.keyUpCallbacks.push((key) => {\r\n            for (let kpa of that.keyUpActors) {\r\n\r\n                that.runActorWhenKeyEvent(kpa, key);\r\n\r\n            }\r\n        });\r\n\r\n        this.interpreter.keyboardTool.keyDownCallbacks.push((key) => {\r\n            for (let kpa of that.keyDownActors) {\r\n\r\n                that.runActorWhenKeyEvent(kpa, key);\r\n\r\n            }\r\n        });\r\n\r\n\r\n        for (let listenerType of [\"mouseup\", \"mousedown\", \"mousemove\", \"mouseenter\", \"mouseleave\"]) {\r\n            this.$containerInner.on(listenerType, (e) => {\r\n                let x = width * e.offsetX / this.$containerInner.width();\r\n                let y = height * e.offsetY / this.$containerInner.height();\r\n\r\n                let p = new PIXI.Point(x, y);\r\n                this.stage.localTransform.applyInverse(p, p);\r\n                x = p.x;\r\n                y = p.y;\r\n\r\n                that.onMouseEvent(listenerType, x, y, e.button);\r\n\r\n                for (let listener of this.mouseListeners) {\r\n                    if (listener.types[listenerType] != null) {\r\n                        this.invokeMouseListener(listener, listenerType, x, y, e.button);\r\n                    }\r\n                }\r\n\r\n            });\r\n        }\r\n\r\n        this.module.main.getRightDiv()?.adjustWidthToWorld();\r\n\r\n    }\r\n\r\n    setCursor(cursor: string) {\r\n        this.$containerInner.css('cursor', cursor);\r\n    }\r\n\r\n\r\n    actorsNotFinished: number = 0;\r\n    ticks: number = 0;\r\n    deltaSum: number = 0;\r\n\r\n    spriteAnimations: SpriteHelper[] = [];\r\n\r\n    tick(delta: any) {\r\n\r\n        this.summedDelta += delta;\r\n\r\n        for (let spriteHelper of this.spriteAnimations) {\r\n            spriteHelper.tick(delta);\r\n        }\r\n\r\n        if (this.interpreter != null) {\r\n            switch (this.interpreter.state) {\r\n                case InterpreterState.running:\r\n\r\n                    if (!this.actorsFinished) {\r\n                        this.actorsNotFinished++;\r\n                        break;\r\n                    }\r\n\r\n                    let first: boolean = true;\r\n\r\n                    for (let actorData of this.actActors) {\r\n\r\n                        let actorHelper = actorData.actorHelper;\r\n                        if (actorHelper.timerPaused || actorHelper.isDestroyed) continue;\r\n\r\n                        let program = actorData.method?.program;\r\n                        this.runActor(first, actorData, this.summedDelta);\r\n                        if (program != null && !actorData.actorHelper.isDestroyed) {\r\n                            first = false;\r\n                            this.actorsFinished = false;\r\n                        }\r\n                    }\r\n                    break;\r\n                case InterpreterState.done:\r\n                case InterpreterState.error:\r\n                case InterpreterState.not_initialized:\r\n                    this.clearActorLists();\r\n                    break;\r\n            }\r\n\r\n        }\r\n\r\n        this.summedDelta = 0;\r\n\r\n        if (this.interpreter.state == InterpreterState.running) {\r\n            if (this.actActors.length > 0) {\r\n                this.interpreter.timerFunction(33.33, true, 0.5);\r\n                this.interpreter.timerStopped = false;\r\n                this.interpreter.timerFunction(33.33, false, 0.08);\r\n            } else {\r\n                this.interpreter.timerFunction(33.33, false, 0.7);\r\n            }\r\n        }\r\n\r\n        while (this.actorHelpersToDestroy.length > 0) {\r\n\r\n            let actorHelper = this.actorHelpersToDestroy.pop();\r\n\r\n            // actActors: ActorData[] = [];\r\n            // keyPressedActors: ActorData[] = [];\r\n            // actorHelpersToDestroy: ActorHelper[] = [];\r\n\r\n            for (let actorList of [this.keyPressedActors, this.keyUpActors, this.keyDownActors]) {\r\n                for (let i = 0; i < actorList.length; i++) {\r\n                    if (actorList[i].actorHelper === actorHelper) {\r\n                        actorList.splice(i, 1);\r\n                        i--;\r\n                    }\r\n                }\r\n            }\r\n\r\n\r\n            for (let i = 0; i < this.mouseListenerShapes.length; i++) {\r\n                if (this.mouseListenerShapes[i].shapeHelper === actorHelper) {\r\n                    this.mouseListenerShapes.splice(i, 1);\r\n                    i--;\r\n                }\r\n            }\r\n\r\n            for (let i = 0; i < this.actActors.length; i++) {\r\n                if (this.actActors[i].actorHelper === actorHelper) {\r\n                    this.actActors.splice(i, 1);\r\n                    i--;\r\n                }\r\n            }\r\n\r\n            let displayObject = (<ShapeHelper>actorHelper).displayObject;\r\n            if (displayObject != null) {\r\n                displayObject.destroy();\r\n                (<ShapeHelper>actorHelper).displayObject = null;\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n    setBackgroundColor(color: string) {\r\n        let c = ColorHelper.parseColorToOpenGL(color);\r\n        this.app.renderer.backgroundColor = c.color;\r\n    }\r\n\r\n\r\n    runActorWhenKeyEvent(actorData: ActorData, key: string) {\r\n\r\n        let program = actorData.method?.program;\r\n        let invoke = actorData.method?.invoke;\r\n\r\n        let rto = actorData.actorHelper.runtimeObject;\r\n\r\n        let stackElements: Value[] = [\r\n            {\r\n                type: rto.class,\r\n                value: rto\r\n            },\r\n            {\r\n                type: stringPrimitiveType,\r\n                value: key\r\n            }\r\n        ];\r\n\r\n        if (program != null) {\r\n            this.interpreter.runTimer(actorData.method, stackElements, null, false);\r\n        } else if (invoke != null) {\r\n            invoke([]);\r\n        }\r\n    }\r\n\r\n\r\n    runActor(first: boolean, actorData: ActorData, delta: number) {\r\n\r\n        let program = actorData.method?.program;\r\n        let invoke = actorData.method?.invoke;\r\n\r\n        let rto = actorData.actorHelper.runtimeObject;\r\n\r\n        let stackElements: Value[] = [\r\n            {\r\n                type: rto.class,\r\n                value: rto\r\n            },\r\n        ];\r\n\r\n        if (actorData.method.getParameterCount() > 0) {\r\n            stackElements.push(\r\n                {\r\n                    type: doublePrimitiveType,\r\n                    value: delta\r\n                }\r\n\r\n            );\r\n        }\r\n\r\n        let that = this;\r\n\r\n        if (program != null) {\r\n            this.interpreter.runTimer(actorData.method, stackElements, first ? (interpreter) => {\r\n                that.actorsFinished = true;\r\n                interpreter.timerStopped = true;\r\n            } : null, true);\r\n        } else if (invoke != null) {\r\n            invoke([]);\r\n        }\r\n    }\r\n\r\n\r\n    destroyWorld() {\r\n        for (let listenerType of [\"mouseup\", \"mousedown\", \"mousemove\", \"mouseenter\", \"mouseleave\"]) {\r\n            this.$containerInner.off(listenerType);\r\n        }\r\n        this.spriteAnimations = [];\r\n        this.app.ticker.remove(this.tickerFunction);\r\n        this.app.destroy();\r\n        this.$containerOuter.remove();\r\n        this.module.main.getInterpreter().printManager.getGraphicsDiv().hide();\r\n        this.interpreter.timerExtern = false;\r\n        this.interpreter.worldHelper = null;\r\n    }\r\n\r\n    onMouseEvent(listenerType: string, x: number, y: number, button: number) {\r\n\r\n        switch (listenerType) {\r\n            case \"mousedown\":\r\n            case \"mouseup\":\r\n                for (let listener of this.mouseListenerShapes) {\r\n                    let shapeHelper: ShapeHelper = listener.shapeHelper;\r\n\r\n                    if (listener.types[listenerType] != null && (shapeHelper.containsPoint(x, y) || shapeHelper.trackMouseMove)) {\r\n                        this.invokeShapeMouseListener(listener, listenerType, x, y, button);\r\n                    }\r\n\r\n                }\r\n\r\n                break;\r\n            case \"mouseenter\":\r\n                for (let listener of this.mouseListenerShapes) {\r\n                    let shapeHelper: ShapeHelper = listener.shapeHelper;\r\n\r\n                    if (listener.types[listenerType] != null && shapeHelper.containsPoint(x, y) && !shapeHelper.mouseLastSeenInsideObject) {\r\n                        this.invokeShapeMouseListener(listener, listenerType, x, y, button, () => {\r\n                            shapeHelper.mouseLastSeenInsideObject = true;\r\n                        });\r\n                    }\r\n\r\n                }\r\n                break;\r\n            case \"mouseleave\":\r\n                for (let listener of this.mouseListenerShapes) {\r\n                    let shapeHelper: ShapeHelper = listener.shapeHelper;\r\n\r\n                    if (listener.types[listenerType] != null && shapeHelper.mouseLastSeenInsideObject) {\r\n                        this.invokeShapeMouseListener(listener, listenerType, x, y, button, () => {\r\n                            shapeHelper.mouseLastSeenInsideObject = false;\r\n                        });\r\n                    }\r\n\r\n                }\r\n                break;\r\n            case \"mousemove\":\r\n                for (let listener of this.mouseListenerShapes) {\r\n                    let shapeHelper: ShapeHelper = listener.shapeHelper;\r\n\r\n                    if (listener.types[\"mousemove\"] != null ||\r\n                        (listener.types[\"mouseenter\"] != null && !shapeHelper.mouseLastSeenInsideObject) ||\r\n                        (listener.types[\"mouseleave\"] != null && shapeHelper.mouseLastSeenInsideObject)\r\n                    ) {\r\n                        let containsPoint = shapeHelper.containsPoint(x, y);\r\n                        if ((shapeHelper.trackMouseMove || containsPoint) && listener.types[\"mousemove\"] != null) {\r\n                            this.invokeShapeMouseListener(listener, \"mousemove\", x, y, button);\r\n                        }\r\n                        if (containsPoint && listener.types[\"mouseenter\"] != null && !shapeHelper.mouseLastSeenInsideObject) {\r\n                            this.invokeShapeMouseListener(listener, \"mouseenter\", x, y, button, () => {\r\n                                shapeHelper.mouseLastSeenInsideObject = true;\r\n                            });\r\n                        }\r\n                        if (!containsPoint && listener.types[\"mouseleave\"] != null && shapeHelper.mouseLastSeenInsideObject) {\r\n                            this.invokeShapeMouseListener(listener, \"mouseleave\", x, y, button, () => {\r\n                                shapeHelper.mouseLastSeenInsideObject = false;\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n    invokeShapeMouseListener(listener: MouseListenerShapeData, listenerType: string,\r\n        x: number, y: number, button: number, callback?: () => void) {\r\n\r\n        if (!listener.shapeHelper.reactToMouseEventsWhenInvisible &&\r\n            !listener.shapeHelper.displayObject.visible) return;\r\n\r\n        let method = listener.methods[listenerType];\r\n        let program = method.program;\r\n        let invoke = method.invoke;\r\n\r\n        let rto = listener.shapeHelper.runtimeObject;\r\n\r\n        let stackElements: Value[] = [\r\n            {\r\n                type: rto.class,\r\n                value: rto\r\n            },\r\n            {\r\n                type: doublePrimitiveType,\r\n                value: x\r\n            },\r\n            {\r\n                type: doublePrimitiveType,\r\n                value: y\r\n            }\r\n        ];\r\n\r\n        if (listenerType != \"mousemove\" && listenerType != \"mouseenter\" && listenerType != \"mouseleave\") {\r\n            stackElements.push(\r\n                {\r\n                    type: intPrimitiveType,\r\n                    value: button\r\n                });\r\n        }\r\n\r\n        if (program != null) {\r\n            this.interpreter.runTimer(method, stackElements, callback, false);\r\n        } else if (invoke != null) {\r\n            invoke([]);\r\n        }\r\n\r\n    }\r\n\r\n    addMouseListener(listener: RuntimeObject) {\r\n\r\n        let listenerTypes = [\r\n            { identifier: \"MouseUp\", signature: \"(double, double, int)\" },\r\n            { identifier: \"MouseDown\", signature: \"(double, double, int)\" },\r\n            { identifier: \"MouseMove\", signature: \"(double, double)\" },\r\n            { identifier: \"MouseEnter\", signature: \"(double, double)\" },\r\n            { identifier: \"MouseLeave\", signature: \"(double, double)\" },\r\n        ];\r\n\r\n        let sd: MouseListenerData = null;\r\n\r\n        for (let lt of listenerTypes) {\r\n            let method: Method = (<Klass>listener.class).getMethodBySignature(\"on\" + lt.identifier + lt.signature);\r\n\r\n            if (method?.program != null && method.program.statements.length > 2 || method?.invoke != null) {\r\n\r\n                if (sd == null) {\r\n                    sd = {\r\n                        listener: listener,\r\n                        types: {},\r\n                        methods: {}\r\n                    };\r\n                    this.mouseListeners.push(sd);\r\n                }\r\n\r\n                sd.types[lt.identifier.toLowerCase()] = true;\r\n                sd.methods[lt.identifier.toLowerCase()] = method;\r\n\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n    invokeMouseListener(listener: MouseListenerData, listenerType: string,\r\n        x: number, y: number, button: number, callback?: () => void) {\r\n\r\n        let method = listener.methods[listenerType];\r\n        let program = method.program;\r\n        let invoke = method.invoke;\r\n\r\n        let rto = listener.listener;\r\n\r\n        let stackElements: Value[] = [\r\n            {\r\n                type: rto.class,\r\n                value: rto\r\n            },\r\n            {\r\n                type: doublePrimitiveType,\r\n                value: x\r\n            },\r\n            {\r\n                type: doublePrimitiveType,\r\n                value: y\r\n            }\r\n        ];\r\n\r\n        if (listenerType != \"mousemove\" && listenerType != \"mouseenter\" && listenerType != \"mouseleave\") {\r\n            stackElements.push(\r\n                {\r\n                    type: intPrimitiveType,\r\n                    value: button\r\n                });\r\n        }\r\n\r\n        if (program != null) {\r\n            this.interpreter.runTimer(method, stackElements, callback, false);\r\n        } else if (invoke != null) {\r\n            invoke([]);\r\n        }\r\n\r\n    }\r\n\r\n}","import { Interface, Klass } from \"../../compiler/types/Class.js\";\r\nimport { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { voidPrimitiveType, stringPrimitiveType, booleanPrimitiveType, doublePrimitiveType, intPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { WorldHelper, WorldClass } from \"./World.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\n\r\nexport class Actor extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Actor\", module, \"Abstrakte Klasse mit überschreibbaren Methoden act (zur Implemntierung eines Timers) und onKeyTyped, onKeyUp usw. zur entgegennahme von Tastaturereignissen\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n        this.isAbstract = true;\r\n\r\n        let methodSignatures: { signature: string, actorListIdentifier: string }[] = [\r\n            { signature: \"onKeyTyped(String)\", actorListIdentifier: \"keyPressedActors\" },\r\n            { signature: \"onKeyUp(String)\", actorListIdentifier: \"keyUpActors\" },\r\n            { signature: \"onKeyDown(String)\", actorListIdentifier: \"keyDownActors\" },\r\n            { signature: \"act()\", actorListIdentifier: \"actActors\" },\r\n            { signature: \"act(double)\", actorListIdentifier: \"actActors\" },\r\n        ];\r\n\r\n        this.postConstructorCallbacks = [\r\n            (r: RuntimeObject) => {\r\n\r\n                for (let ms of methodSignatures) {\r\n                    let method: Method = (<Klass>r.class).getMethodBySignature(ms.signature);\r\n\r\n                    if (method?.program != null || method?.invoke != null) {\r\n                        let ah: ActorHelper = <ActorHelper>r.intrinsicData['Actor'];\r\n                        ah.worldHelper[ms.actorListIdentifier].push({\r\n                            actorHelper: ah,\r\n                            method: method\r\n                        })\r\n                    }\r\n                }\r\n\r\n            }\r\n        ];\r\n\r\n        this.addMethod(new Method(\"Actor\", new Parameterlist([\r\n            // { identifier: \"deltaTimeInMs\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        // ]), this,\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let actorHelper = new ActorHelper(module.main.getInterpreter(), o);\r\n\r\n                o.intrinsicData[\"Actor\"] = actorHelper;\r\n\r\n                // return o;\r\n\r\n            },  // no implementation!\r\n            false, false, \"Der Konstruktor registriert den Actor beim Grafikfenster\", true));\r\n\r\n        this.addMethod(new Method(\"destroy\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ActorHelper = o.intrinsicData[\"Actor\"];\r\n                sh.destroy();\r\n\r\n            }, false, false, \"Vernichtet das Grafikobjekt. Falls es in einem Group-Objekt enthalten ist, wird es vor dem Vernichten automatisch aus diesem entfernt.\", false));\r\n\r\n        this.addMethod(new Method(\"isKeyUp\", new Parameterlist([\r\n            { identifier: \"key\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let key: string = parameters[1].value;\r\n                let sh: ActorHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                return !sh.isKeyDown(key);\r\n\r\n            }, false, false, \"Gibt genau dann true zurück, wenn der Benutzer die gegebenen Taste gerade NICHT drückt. Als Taste kann auch bsw. [shift]+m angegeben werden. Die Angabe von Sondertasten (Enter, ArrowUp, ArrowLeft, ...) ist auch möglich.\", false));\r\n\r\n        this.addMethod(new Method(\"isKeyDown\", new Parameterlist([\r\n            { identifier: \"key\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let key: string = parameters[1].value;\r\n                let sh: ActorHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                return sh.isKeyDown(key);\r\n\r\n            }, false, false, \"Gibt genau dann true zurück, wenn der Benutzer die gegebenen Taste gerade drückt. Als Taste kann auch bsw. [shift]+m angegeben werden. Die Angabe von Sondertasten (Enter, ArrowUp, ArrowLeft, ...) ist auch möglich.\", false));\r\n\r\n        this.addMethod(new Method(\"isDestroyed\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ActorHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                return sh.isDestroyed;\r\n\r\n            }, false, false, \"Gibt true zurück, falls das Objekt bereits durch die Methode destroy() zerstört wurde.\", false));\r\n\r\n\r\n        this.addMethod(new Method(\"getWorld\", new Parameterlist([\r\n        ]), module.typeStore.getType(\"World\"),\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ActorHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                return sh.worldHelper.world;\r\n\r\n            }, false, false, \"Gibt das Welt-Objekt zurück.\", false));\r\n\r\n        this.addMethod(new Method(\"stopActing\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ActorHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                // ah.timerPaused = true;\r\n                ah.setTimerPaused(true);\r\n\r\n                return;\r\n\r\n            }, false, false, \"Stoppt den 30-mal pro Sekunde erfolgenden Aufruf der Methode act für dieses Objekt.\", false));\r\n\r\n            this.addMethod(new Method(\"restartActing\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ActorHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                // sh.timerPaused = false;\r\n                sh.setTimerPaused(false);\r\n\r\n            }, false, false, \"Startet den 30-mal pro Sekunde erfolgenden Aufruf der Methode act für dieses Objekt erneut.\", false));\r\n\r\n            this.addMethod(new Method(\"isActing\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ActorHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                return !sh.timerPaused;\r\n\r\n            }, false, false, \"Gibt true zurück, wenn der periodische Aufruf der Methode act weiterhin erfolgt.\", false));\r\n\r\n        this.addMethod(new Method(\"act\", new Parameterlist([\r\n            { identifier: \"deltaTime\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            null, // no statements!\r\n            false, false, \"Wird ca. 30-mal pro Sekunde aufgerufen\", false));\r\n\r\n        this.addMethod(new Method(\"act\", new Parameterlist([\r\n        ]), null,\r\n            null, // no statements!\r\n            false, false, \"Wird ca. 30-mal pro Sekunde aufgerufen\", false));\r\n\r\n        this.addMethod(new Method(\"onKeyTyped\", new Parameterlist([\r\n            { identifier: \"key\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            null, // no statements!\r\n            false, false, \"Wird aufgerufen, nachdem der Benutzer eine Taste gedrückt und wieder losgelassen hat.\", false));\r\n\r\n        this.addMethod(new Method(\"onKeyDown\", new Parameterlist([\r\n            { identifier: \"key\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            null, // no statements!\r\n            false, false, \"Wird aufgerufen, nachdem der Benutzer eine Taste gedrückt hat.\", false));\r\n\r\n        this.addMethod(new Method(\"onKeyUp\", new Parameterlist([\r\n            { identifier: \"key\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            null, // no statements!\r\n            false, false, \"Wird aufgerufen, nachdem der Benutzer eine Taste losgelassen hat.\", false));\r\n\r\n\r\n    }\r\n\r\n    registerWorldType() {\r\n        this.methods.filter(m => m.identifier == \"getWorld\")[0].returnType = this.module.typeStore.getType(\"World\");\r\n    }\r\n\r\n\r\n}\r\n\r\nexport class ActorHelper {\r\n\r\n    worldHelper: WorldHelper;\r\n    isDestroyed: boolean = false;\r\n\r\n    timerPaused: boolean = false;\r\n\r\n    constructor(interpreter: Interpreter, public runtimeObject: RuntimeObject) {\r\n        let worldHelper = interpreter.worldHelper;\r\n        if (worldHelper == null) {\r\n            let w: RuntimeObject = new RuntimeObject(<Klass>interpreter.moduleStore.getType(\"World\").type);\r\n            worldHelper = new WorldHelper(800, 600, interpreter.moduleStore.getModule(\"Base Module\"), w);\r\n            // worldHelper = new WorldHelper(800, 600, interpreter.main.currentWorkspace.moduleStore.getModule(\"Base Module\"), w);\r\n            w.intrinsicData[\"World\"] = worldHelper;\r\n        }\r\n        this.worldHelper = worldHelper;\r\n    }\r\n\r\n    setTimerPaused(tp: boolean) {\r\n        this.timerPaused = tp;\r\n    }\r\n\r\n\r\n    isKeyDown(key: string): boolean {\r\n        return this.worldHelper.interpreter.keyboardTool.isPressed(key);\r\n    }\r\n\r\n    destroy() {\r\n        this.isDestroyed = true;\r\n        this.worldHelper.actorHelpersToDestroy.push(this);\r\n    }\r\n\r\n}\r\n\r\n","import { Enum } from \"../../compiler/types/Enum.js\";\r\nimport { Module } from \"../../compiler/parser/Module.js\";\r\nimport { TokenType } from \"../../compiler/lexer/Token.js\";\r\n\r\nexport class AlignmentClass extends Enum {\r\n\r\n    constructor(module: Module){\r\n        super(\"Alignment\", module, [\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"left\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"center\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"right\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"top\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"bottom\"\r\n            },\r\n        ]);\r\n\r\n        this.documentation = \"Mögliche Ausrichtungen\"\r\n    }\r\n\r\n}","\r\nexport type Punkt = {\r\n    x: number,\r\n    y: number\r\n}\r\n\r\nexport function gleich(a: number, b: number) {\r\n\r\n    return Math.abs(a - b) < 0.000000001;\r\n\r\n}\r\n\r\nexport function drehenUm(drehpunkt: Punkt, punkt: Punkt, winkelInGrad: number): Punkt {\r\n\r\n    let w = winkelInGrad / 180 * Math.PI;\r\n    let s = Math.sin(w);\r\n    let c = Math.cos(w);\r\n\r\n    let dx = punkt.x - drehpunkt.x;\r\n    let dy = punkt.y - drehpunkt.y;\r\n\r\n    let dxNeu = dx * c - dy * s;\r\n    let dyNeu = dx * s + dy * c;\r\n\r\n    return { x: drehpunkt.x + dxNeu, y: drehpunkt.y + dyNeu };\r\n\r\n}\r\n\r\n/**\r\n * Gibt true zurück, wenn die Strecke von (x0, y0) nach (x1, y1) die Strecke von\r\n * (x2, y2) nach (x3, y3) berührt.\r\n *\r\n * @param x0\r\n * @param y0\r\n * @param x1\r\n * @param y1\r\n * @param x2\r\n * @param y2\r\n * @param x3\r\n * @param y3\r\n * @return\r\n */\r\nexport function streckeSchneidetStrecke(p0: Punkt, p1: Punkt, p2: Punkt, p3: Punkt, schnittpunkt?:Punkt) {\r\n\r\n    let a1 = p1.x - p0.x;\r\n    let a2 = p1.y - p0.y;\r\n    let b1 = p2.x - p3.x;\r\n    let b2 = p2.y - p3.y;\r\n    let c1 = p2.x - p0.x;\r\n    let c2 = p2.y - p0.y;\r\n\r\n    let det = a1 * b2 - a2 * b1;\r\n\r\n    if (det * det < 0.000001) {\r\n        return false; // die Strecken sind so gut wie parallel\r\n    }\r\n\r\n    let det1 = c1 * b2 - c2 * b1;\r\n    let det2 = a1 * c2 - a2 * c1;\r\n\r\n    let s = det1 / det;\r\n    let t = det2 / det;\r\n\r\n    // liegt der Schnittpunkt innerhalb von beiden Strecken?\r\n    let schneidet = s >= 0 && s <= 1 && t >= 0 && t <= 1;\r\n\r\n    if(schneidet && schnittpunkt != null){\r\n        schnittpunkt.x = p0.x + s*(p1.x - p0.x);\r\n        schnittpunkt.y = p0.y + s*(p1.y - p0.y)\r\n        }\r\n\r\n    return schneidet;\r\n\r\n}\r\n\r\nexport function abstand(p1: Punkt, p2: Punkt) {\r\n\r\n    let dx = p2.x - p1.x;\r\n    let dy = p2.y - p1.y;\r\n\r\n    return Math.sqrt(dx * dx + dy * dy);\r\n\r\n}\r\n\r\nexport function winkelGradZwischenPunkten(p1: Punkt, p2: Punkt): number {\r\n    let d = {\r\n        x: p2.x - p1.x,\r\n        y: p2.y - p1.y\r\n    }\r\n\r\n    return Math.atan2(d.y, d.x)/Math.PI*180;\r\n}\r\n\r\nexport function polygonEnthältPunkt(punkte: Punkt[], punkt: Punkt) {\r\n\r\n    let inside = false;\r\n    let vertexCount = punkte.length;\r\n\r\n    for (let index = 0; index <= vertexCount - 1; index++) {\r\n\r\n        let i = index % vertexCount;\r\n        let j = (index - 1) % vertexCount;\r\n        if (j < 0) {\r\n            j += vertexCount;\r\n        }\r\n\r\n        if (((punkte[i].y > punkt.y) != (punkte[j].y > punkt.y)) &&\r\n            (punkt.x < (punkte[j].x - punkte[i].x) * (punkt.y - punkte[i].y) / (punkte[j].y - punkte[i].y) + punkte[i].x))\r\n            inside = !inside;\r\n    }\r\n\r\n    return inside;\r\n\r\n}\r\n\r\nexport function kreisSchneidetStrecke(m: Punkt, r: number, p1: Punkt, p2: Punkt): boolean {\r\n    /*\r\n * Gerade: (x, y) = (x1, x2) + t*(x2-x1, y2-y1)\r\n * Kreis: (x-mx)^2 + (y-my)^2 = r^2\r\n *\r\n * Schneiden der beiden liefert eine quadratische Gleichung in t, die wir lösen...\r\n \r\n */\r\n\r\n    let x1 = p1.x;\r\n    let y1 = p1.y;\r\n    let x2 = p2.x;\r\n    let y2 = p2.y;\r\n\r\n\r\n    let a = (x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1);\r\n    let b = 2 * (x1 - m.x) * (x2 - x1) + 2 * (y1 - m.y) * (y2 - y1);\r\n    let c = (x1 - m.x) * (x1 - m.x) + (y1 - m.y) * (y1 - m.y) - r * r;\r\n\r\n    let determiante = b * b - 4 * a * c;\r\n\r\n    if (determiante < 0) {\r\n        return false; // Kreis schneidet die Gerade nicht\r\n    }\r\n\r\n    // Kreis schneidet die Gerade -> innerhalb der Strecke?\r\n\r\n    let sqrt = Math.sqrt(determiante);\r\n    let t1 = (-b + sqrt) / (2 * a);\r\n    let t2 = (-b - sqrt) / (2 * a);\r\n\r\n    if (t1 >= 0 && t1 <= 1) {\r\n        return true;\r\n    }\r\n\r\n    if (t2 >= 0 && t2 <= 1) {\r\n        return true;\r\n    }\r\n\r\n    return false;\r\n\r\n}\r\n\r\nexport function schnittpunkteKreisStrecke(m: Punkt, r: number, p1: Punkt, p2: Punkt, schnittpunkte: Punkt[]): void {\r\n    /*\r\n * Gerade: (x, y) = (x1, x2) + t*(x2-x1, y2-y1)\r\n * Kreis: (x-mx)^2 + (y-my)^2 = r^2\r\n *\r\n * Schneiden der beiden liefert eine quadratische Gleichung in t, die wir lösen...\r\n \r\n */\r\n\r\n    let x1 = p1.x;\r\n    let y1 = p1.y;\r\n    let x2 = p2.x;\r\n    let y2 = p2.y;\r\n\r\n\r\n    let a = (x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1);\r\n    let b = 2 * (x1 - m.x) * (x2 - x1) + 2 * (y1 - m.y) * (y2 - y1);\r\n    let c = (x1 - m.x) * (x1 - m.x) + (y1 - m.y) * (y1 - m.y) - r * r;\r\n\r\n    let determiante = b * b - 4 * a * c;\r\n\r\n    if (determiante < 0) {\r\n        return; // Kreis schneidet die Gerade nicht\r\n    }\r\n\r\n    // Kreis schneidet die Gerade -> innerhalb der Strecke?\r\n\r\n    let sqrt = Math.sqrt(determiante);\r\n    let t1 = (-b + sqrt) / (2 * a);\r\n    let t2 = (-b - sqrt) / (2 * a);\r\n\r\n    if (t1 >= 0 && t1 <= 1) {\r\n        schnittpunkte.push({ x: x1 + t1 * (x2 - x1), y: y1 + t1 * (y2 - y1) });\r\n    }\r\n    if (t2 >= 0 && t2 <= 1) {\r\n        schnittpunkte.push({ x: x1 + t2 * (x2 - x1), y: y1 + t2 * (y2 - y1) });\r\n    }\r\n\r\n    return;\r\n\r\n}\r\n\r\nexport function KreisBerührtPolygon(m: Punkt, r: number, punkte: Punkt[]) {\r\n\r\n    for (let i = 0; i < punkte.length; i++) {\r\n\r\n        if (abstand(punkte[i], m) <= r) {\r\n            return true;\r\n        }\r\n\r\n    }\r\n\r\n    // Der Kreis enthält keinen Punkt des Vielecks. Enthält es den Mittelpunkt des Kreises?\r\n    if (polygonEnthältPunkt(punkte, m)) {\r\n        return true;\r\n    }\r\n\r\n    // schneidet die Kreislinie eine der Vielecksstrecken?\r\n    for (let i = 0; i < punkte.length; i++) {\r\n\r\n        let p2 = punkte[(i + 1) % punkte.length];\r\n        if (kreisSchneidetStrecke(m, r, punkte[i], p2)) {\r\n            return true;\r\n        }\r\n\r\n    }\r\n\r\n    return false;\r\n\r\n}\r\n\r\nexport function polygonBerührtPolygon(punkte1: Punkt[], punkte2: Punkt[]) {\r\n\r\n    // Nicht-exakte Lösung: prüfe, ob eines der Vielecke einen Eckpunkt des anderen enthält.\r\n    // Jede Kollision beginnt damit, dass ein Eckpunkt eines Polygons eine Seite des anderen schneidet.\r\n    // Falls oft genug geprüft wird, bleiben Kollisionen also nicht unerkannt.\r\n    for (let i = 0; i < punkte1.length; i++) {\r\n        if (polygonEnthältPunkt(punkte2, punkte1[i])) {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    for (let i = 0; i < punkte2.length; i++) {\r\n        if (polygonEnthältPunkt(punkte1, punkte2[i])) {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    return false;\r\n\r\n}\r\n\r\n\r\nexport function abstandPunktZuStrecke(a: Punkt, b: Punkt, p: Punkt){\r\n\r\n    let dx = b.x - a.x;\r\n    let dy = b.y - a.y;\r\n\r\n    let q = dx*dx+dy*dy;\r\n\r\n    let lambda = ((-a.x+p.x)*dx + (-a.y+p.y)*dy)/q;\r\n\r\n    if(lambda < 0){\r\n        return abstand(a, p);\r\n    }\r\n\r\n    if(lambda > 1){\r\n        return abstand(b, p);\r\n    }\r\n\r\n    let fx = a.x + lambda * (b.x - a.x);\r\n    let fy = a.y + lambda * (b.y - a.y);\r\n\r\n    let s1 = p.x - fx;\r\n    let s2 = p.y - fy;\r\n\r\n    return Math.sqrt(s1*s1 + s2*s2);\r\n    \r\n}\r\n\r\nexport function abstandPunktZuGerade(a: Punkt, b: Punkt, p: Punkt) {\r\n\r\n    let dx = b.x - a.x;\r\n    let dy = b.y - a.y;\r\n\r\n    let l = Math.sqrt(dy * dy + dx * dx);\r\n\r\n    if (l < 0.000000001) {\r\n        return abstand(a, p);\r\n    }\r\n\r\n    return Math.abs(dy * p.x - dx * p.y + b.x * a.y - b.y * a.x) / l;\r\n\r\n}\r\n\r\nexport function polygonBerührtPolygonExakt(punkte1: Punkt[], punkte2: Punkt[], istGeschlossen1: boolean = false,\r\n    istGeschlossen2: boolean = false, normaleDerBerührtenGerade1: Punkt = null) {\r\n\r\n    let endIndex1 = punkte1.length + (istGeschlossen1 ? 0 : -1);\r\n    let endIndex2 = punkte2.length + (istGeschlossen2 ? 0 : -1);\r\n\r\n    if (istGeschlossen1 && polygonEnthältPunkt(punkte1, punkte2[0])) {\r\n\r\n        if (normaleDerBerührtenGerade1 != null) {\r\n\r\n            let minAbstand = 100000;\r\n            let minIndex = 0;\r\n\r\n            for (let i = 0; i < punkte1.length - 1; i++) {\r\n                let j = (i + 1) % punkte1.length;\r\n\r\n                let d = abstandPunktZuStrecke(punkte1[i], punkte1[j], punkte2[0]);\r\n                if (d < minAbstand) {\r\n                    minAbstand = d;\r\n                    minIndex = 0;\r\n                }\r\n\r\n            }\r\n            let i2 = (minIndex + 1) % punkte1.length;\r\n            normaleDerBerührtenGerade1.y = punkte1[i2].x - punkte1[minIndex].x;\r\n            normaleDerBerührtenGerade1.x = -(punkte1[i2].y - punkte1[minIndex].y);\r\n\r\n        }\r\n\r\n\r\n        return true;\r\n    }\r\n\r\n    if (istGeschlossen1 && polygonEnthältPunkt(punkte2, punkte1[0])) {\r\n        return true;\r\n    }\r\n\r\n    for (let i = 0; i < endIndex1; i++) {\r\n        let p1a = punkte1[i];\r\n        let p1b = punkte1[(i + 1) % punkte1.length];\r\n        for (let j = 0; j < endIndex2; j++) {\r\n            let p2a = punkte2[j];\r\n            let p2b = punkte2[(j + 1) % punkte2.length];\r\n\r\n            if (streckeSchneidetStrecke(p1a, p1b, p2a, p2b)) {\r\n                return true;\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    return false;\r\n\r\n}\r\n\r\nexport function länge(vektor: Punkt): number {\r\n    return Math.sqrt(vektor.x * vektor.x + vektor.y * vektor.y);\r\n}\r\n\r\nexport function einheitsVektor(vektor: Punkt): Punkt {\r\n    let l = länge(vektor);\r\n    return { x: vektor.x / l, y: vektor.y / l };\r\n}\r\n\r\n// export function normalenvektorBeiImpactEinesKreises(punkte: Punkt[], isMove: boolean[], k: Kreis): Punkt {\r\n\r\n//     let minAbstand = 100000;\r\n//     let minIndex = 0;\r\n//     let m = k.getMitte();\r\n\r\n//     for (let i = 0; i < punkte.length - 1; i++) {\r\n//         if (isMove != null && !isMove[i]) {\r\n//             let j = (i + 1) % punkte.length;\r\n\r\n//             let d = abstandPunktZuStrecke(punkte[i], punkte[j], m);\r\n//             if (d < minAbstand) {\r\n//                 minAbstand = d;\r\n//                 minIndex = i;\r\n//             }\r\n\r\n//             // console.log(\"\" + i + \": (\" + punkte[i].x + \",\" + punkte[i].y + \")->(\" + punkte[j].x + \",\" + punkte[j].y + \"): \" + d);\r\n//         }\r\n//     }\r\n//     let i2 = (minIndex + 1) % punkte.length;\r\n\r\n//     // let v = {x: punkte[i2].x - punkte[minIndex].x, y: punkte[i2].y - punkte[minIndex].y};\r\n//     let am = { x: m.x - punkte[minIndex].x, y: m.y - punkte[minIndex].y };\r\n\r\n//     let n = {\r\n//         y: punkte[i2].x - punkte[minIndex].x,\r\n//         x: -(punkte[i2].y - punkte[minIndex].y)\r\n//     };\r\n\r\n//     let sp = skalarprodukt(n, am);\r\n//     if (sp > 0) {\r\n//         return n;\r\n//     } else {\r\n//         return { x: -n.x, y: -n.y };\r\n//     }\r\n\r\n// }\r\n\r\n// export function normalenvektorBeiImpactAufKreis(punkte: Punkt[], k: Kreis): Punkt {\r\n\r\n//     let schnittpunkte = [];\r\n//     let m = k.getMitte();\r\n//     let r = k.getRadius();\r\n\r\n//     for (let i = 0; i < punkte.length; i++) {\r\n//         let j = (i + 1) % punkte.length;\r\n//         schnittpunkteKreisStrecke(m, r, punkte[i], punkte[j], schnittpunkte);\r\n//     }\r\n\r\n//     if (schnittpunkte.length == 0) {\r\n//         return {\r\n//             x: punkte[0].x - m.x, y: punkte[0].y - m.y\r\n//         }\r\n//     }\r\n\r\n//     let schwerpunkt = { x: 0, y: 0 };\r\n//     for (let p of schnittpunkte) {\r\n//         schwerpunkt.x += p.x;\r\n//         schwerpunkt.y += p.y;\r\n//     }\r\n//     schwerpunkt.x /= punkte.length;\r\n//     schwerpunkt.y /= punkte.length;\r\n\r\n//     return {\r\n//         x: schwerpunkt.x - m.x,\r\n//         y: schwerpunkt.y - m.y\r\n//     }\r\n\r\n// }\r\n\r\nexport function skalarprodukt(v1: Punkt, v2: Punkt) {\r\n    return v1.x * v2.x + v1.y * v2.y;\r\n}\r\n\r\n\r\nexport function zufall(von: number, bis: number){\r\n    return Math.random()*(bis - von) + von;\r\n}\r\n\r\nexport function intZufall(von: number, bis: number){\r\n    return Math.trunc(Math.random()*(bis - von + 1 - 0.00000001) + von);\r\n}\r\n\r\nexport function vektorVonPolarkoordinaten(winkelGrad: number, länge: number){\r\n    let winkel = winkelGrad/180*Math.PI;\r\n    return {\r\n        x: länge * Math.cos(winkel),\r\n        y: länge * Math.sin(winkel)\r\n    }\r\n}\r\n\r\nexport function farbeAusRGB(rot: number, grün: number, blau: number):number{\r\n    return blau + 256 * (rot + 256 * grün);\r\n}","import { Klass, Visibility } from \"../../compiler/types/Class.js\";\r\nimport { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Method, Parameterlist, Attribute, Value, Type } from \"../../compiler/types/Types.js\";\r\nimport { intPrimitiveType, doublePrimitiveType, voidPrimitiveType, booleanPrimitiveType, DoublePrimitiveType, stringPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { ArrayType } from \"../../compiler/types/Array.js\";\r\nimport { ActorHelper } from \"./Actor.js\";\r\nimport { WorldHelper, MouseListenerShapeData } from \"./World.js\";\r\nimport { Punkt, polygonEnthältPunkt, polygonBerührtPolygon } from \"../../tools/MatheTools.js\";\r\nimport { ColorHelper } from \"./ColorHelper.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { GroupHelper, GroupClass } from \"./Group.js\";\r\nimport { CircleHelper } from \"./Circle.js\";\r\nimport { TurtleHelper } from \"./Turtle.js\";\r\n\r\nexport class ShapeClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Shape\", module, \"Basisklasse für alle graphischen Objekte die verschoben, skaliert und gedreht werden können\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Actor\"));\r\n        this.isAbstract = true;\r\n\r\n        // let matrixType = new ArrayType(doublePrimitiveType);\r\n        let shapeType = module.typeStore.getType(\"Shape\");\r\n        let shapeArrayType = new ArrayType(shapeType);\r\n\r\n        this.addAttribute(new Attribute(\"angle\", doublePrimitiveType,\r\n            (value) => {\r\n\r\n                let rto: RuntimeObject = value.object;\r\n                let helper: ShapeHelper = rto.intrinsicData[\"Actor\"];\r\n\r\n                if (helper == null || helper.isDestroyed || helper.displayObject == null) {\r\n                    value.value = 0;\r\n                    return;\r\n                }\r\n\r\n                value.value = helper.angle;\r\n\r\n            }, false, Visibility.protected, true, \"Richtung\"));\r\n\r\n        this.addAttribute(new Attribute(\"centerX\", doublePrimitiveType,\r\n            (value) => {\r\n\r\n                let rto: RuntimeObject = value.object;\r\n                let helper: ShapeHelper = rto.intrinsicData[\"Actor\"];\r\n                if (helper == null || helper.isDestroyed || helper.displayObject == null) {\r\n                    value.value = 0;\r\n                    return;\r\n                }\r\n\r\n                value.value = helper.getCenterX();\r\n\r\n            }, false, Visibility.protected, true, \"X-Koordinate des Diagonalenschnittpunkts der BoundingBox des Objekts\"));\r\n\r\n        this.addAttribute(new Attribute(\"centerY\", doublePrimitiveType,\r\n            (value) => {\r\n\r\n                let rto: RuntimeObject = value.object;\r\n                let helper: ShapeHelper = rto.intrinsicData[\"Actor\"];\r\n                if (helper == null || helper.isDestroyed || helper.displayObject == null) {\r\n                    value.value = 0;\r\n                    return;\r\n                }\r\n\r\n                value.value = helper.getCenterY();\r\n\r\n            }, false, Visibility.protected, true, \"Y-Koordinate des Diagonalenschnittpunkts der BoundingBox des Objekts\"));\r\n\r\n\r\n        // this.addAttribute(new Attribute(\"transformation\", matrixType,\r\n        //     (value) => {\r\n\r\n        //         let rto: RuntimeObject = value.object;\r\n        //         let helper: ShapeHelper = rto.intrinsicData[\"Actor\"];\r\n        //         if (helper == null || helper.isDestroyed || helper.displayObject.transform == null) {\r\n        //             value.value = null;\r\n        //             return;\r\n        //         }\r\n\r\n        //         let matrix = helper.displayObject.localTransform.toArray(false);\r\n\r\n        //         if (value.value == null) {\r\n        //             value.value = [];\r\n\r\n        //             for (let n of matrix) {\r\n        //                 value.value.push({\r\n        //                     type: doublePrimitiveType,\r\n        //                     value: n\r\n        //                 });\r\n        //             }\r\n        //         } else {\r\n        //             let i: number = 0;\r\n        //             for (let n of matrix) {\r\n        //                 value.value[i++].value = n;\r\n        //             }\r\n        //         }\r\n\r\n        //     }, false, Visibility.protected, true, \"Transformationsmatrix\"));\r\n\r\n        this.addMethod(new Method(\"move\", new Parameterlist([\r\n            { identifier: \"dx\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"dy\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let dx: number = parameters[1].value;\r\n                let dy: number = parameters[2].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"move\")) return;\r\n\r\n                sh.move(dx, dy);\r\n\r\n            }, false, false, \"Verschiebt das Grafikobjekt um dx Pixel nach rechts und um dy Pixel nach unten.\", false));\r\n\r\n        this.addMethod(new Method(\"rotate\", new Parameterlist([\r\n            { identifier: \"angleInDeg\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"centerX\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"centerY\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let angleInDeg: number = parameters[1].value;\r\n                let centerX: number = parameters[2].value;\r\n                let centerY: number = parameters[3].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"rotate\")) return;\r\n\r\n                sh.rotate(angleInDeg, centerX, centerY);\r\n\r\n            }, false, false, \"Dreht das Grafikobjekt um den angegebenen Winkel. Drehpunkt ist (centerX, centerY).\", false));\r\n\r\n        this.addMethod(new Method(\"rotate\", new Parameterlist([\r\n            { identifier: \"angleInDeg\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let angleInDeg: number = parameters[1].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"rotate\")) return;\r\n\r\n                sh.rotate(angleInDeg);\r\n\r\n            }, false, false, \"Dreht das Grafikobjekt um den angegebenen Winkel. Drehpunkt ist der 'Mittelpunkt' des Objekts\", false));\r\n\r\n        this.addMethod(new Method(\"scale\", new Parameterlist([\r\n            { identifier: \"factor\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"centerX\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"centerY\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let factor: number = parameters[1].value;\r\n                let centerX: number = parameters[2].value;\r\n                let centerY: number = parameters[3].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"scale\")) return;\r\n\r\n                sh.scale(factor, centerX, centerY);\r\n\r\n            }, false, false, \"Streckt das Grafikobjekt um den angegebenen Faktor. Das Zentrum der Streckung ist der Punkt (centerX, centerY)\", false));\r\n\r\n        this.addMethod(new Method(\"scale\", new Parameterlist([\r\n            { identifier: \"factor\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let angleInDeg: number = parameters[1].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"scale\")) return;\r\n\r\n                sh.scale(angleInDeg);\r\n\r\n            }, false, false, \"Streckt das Grafikobjekt um den angegebenen Faktor. Das Zentrum der Streckung ist der 'Mittelpunkt' des Objekts.\", false));\r\n\r\n        this.addMethod(new Method(\"isOutsideView\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"isOutsideView\")) return;\r\n\r\n                return sh.isOutsideView();\r\n\r\n            }, false, false, \"Gibt genau dann true zurück, wenn sich die Bounding Box des Objekts außerhalb des sichtbaren Bereichs befindet. \", false));\r\n\r\n        this.addMethod(new Method(\"getCenterX\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getCenterX\")) return;\r\n\r\n                return sh.getCenterX();\r\n\r\n            }, false, false, \"Gibt die x-Koordinate des 'Mittelpunkts' zurück. Der 'Mittelpunkt' des Grafikobjekts ist der Diagonalenschnittpunkt seiner achsenparallelen Bounding-Box.\", false));\r\n\r\n        this.addMethod(new Method(\"getCenterY\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getCenterY\")) return;\r\n\r\n                return sh.getCenterY();\r\n\r\n            }, false, false, \"Gibt die y-Koordinate des 'Mittelpunkts' zurück. Der 'Mittelpunkt' des Grafikobjekts ist der Diagonalenschnittpunkt seiner achsenparallelen Bounding-Box.\", false));\r\n\r\n        this.addMethod(new Method(\"getAngle\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getAngle\")) return;\r\n\r\n                return sh.angle;\r\n\r\n            }, false, false, \"Gibt den Winkel des Grafikobjekts in Grad zurück. Winkel == 0 bedeutet: dieselbe Richtung wie zum Zeipunkt der Instanzierung des Objekts. Positive Winkelzunahme bedeutet Rechtsdrehung.\", false));\r\n\r\n        this.addMethod(new Method(\"containsPoint\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"containsPoint\")) return;\r\n\r\n                return sh.containsPoint(x, y);\r\n\r\n            }, false, false, \"Gibt genau dann true zurück, wenn das Grafikobjekt den Punkt (x, y) enthält.\", false));\r\n\r\n        this.addMethod(new Method(\"collidesWith\", new Parameterlist([\r\n            { identifier: \"object\", type: this, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let shape: RuntimeObject = parameters[1].value;\r\n\r\n                if (shape == null) {\r\n                    module.main.getInterpreter().throwException(\"Der zweite Parameter der Methode collidesWith darf nicht null sein.\");\r\n                }\r\n\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n                let sh1: ShapeHelper = shape.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"collidesWith\")) return;\r\n\r\n                return sh.collidesWith(sh1);\r\n\r\n            }, false, false, \"Gibt genau dann true zurück, wenn das Grafikobjekt und das andere Grafikobjekt kollidieren.\", false));\r\n\r\n        this.addMethod(new Method(\"setCenter\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n\r\n                if (sh.testdestroyed(\"setCenter\")) return;\r\n\r\n                sh.move(x - sh.getCenterX(), y - sh.getCenterY());\r\n\r\n            }, false, false, \"Verschiebt das Grafikobjekt so, dass sich sein 'Mittelpunkt' an den angegebenen Koordinaten befindet.\", false));\r\n\r\n        this.addMethod(new Method(\"setAngle\", new Parameterlist([\r\n            { identifier: \"angleDeg\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n                let angleDeg: number = parameters[1].value;\r\n\r\n                if (sh.testdestroyed(\"setAngle\")) return;\r\n\r\n                sh.rotate(angleDeg - sh.angle);\r\n\r\n            }, false, false, \"Dreht das Objekt zur angegebenen Richtung.\", false));\r\n\r\n        this.addMethod(new Method(\"setVisible\", new Parameterlist([\r\n            { identifier: \"visible\", type: booleanPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n                let visible: boolean = parameters[1].value;\r\n\r\n                if (sh.testdestroyed(\"setVisible\")) return;\r\n\r\n                sh.setVisible(visible);\r\n\r\n            }, false, false, \"Macht das Grafikobjekt sichtbar (visible == true) bzw. unsichtbar (visible == false).\", false));\r\n\r\n        this.addMethod(new Method(\"onMouseEnter\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            null, // no statements!\r\n            false, false, \"Wird aufgerufen, wenn sich der Mauspfeil in das Objekt hineinbewegt.\", false));\r\n\r\n        this.addMethod(new Method(\"onMouseLeave\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            null, // no statements!\r\n            false, false, \"Wird aufgerufen, wenn sich der Mauspfeil in das Objekt hineinbewegt.\", false));\r\n\r\n        this.addMethod(new Method(\"onMouseDown\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"key\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            null, // no statements!\r\n            false, false, \"Wird aufgerufen, wenn sich der Mauspfeil über dem Objekt befindet und der Benutzer eine Maustaste nach unten drückt.\", false));\r\n\r\n        this.addMethod(new Method(\"onMouseUp\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"key\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            null, // no statements!\r\n            false, false, \"Wird aufgerufen, wenn sich der Mauspfeil über dem Objekt befindet und der Benutzer eine Maustaste loslässt.\", false));\r\n\r\n        this.addMethod(new Method(\"onMouseMove\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            null, // no statements!\r\n            false, false, \"Wird aufgerufen, wenn sich der Mauspfeil über dem Objekt befindet und bewegt.\", false));\r\n\r\n        this.addMethod(new Method(\"tint\", new Parameterlist([\r\n            { identifier: \"colorAsRGBAString\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let color: string = parameters[1].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"tint\")) return;\r\n\r\n                sh.tint(color);\r\n\r\n            }, false, false, 'Überzieht das Grafikobjekt mit einer halbdurchsichtigen Farbschicht.', false));\r\n\r\n        this.addMethod(new Method(\"startTrackingEveryMouseMovement\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                sh.trackMouseMove = true;\r\n\r\n            }, false, false, 'Sorgt dafür, dass ab jetzt JEDE Bewegung des Mauszeigers (auch wenn sich dieser außerhalb des Objekts befindet) ein MouseMove-Ereignis für dieses Objekt auslöst. -> Praktisch zur Umsetzung des \"Ziehens\" von Objekten mit der Maus!', false));\r\n\r\n        this.addMethod(new Method(\"stopTrackingEveryMouseMovement\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                sh.trackMouseMove = false;\r\n\r\n            }, false, false, 'Sorgt dafür, dass ab jetzt nur noch dann Bewegungen des Mauszeigers ein MouseMove-Ereignis für dieses Objekt auslösen, wenn sich der Mauszeiger über dem Objekt befindet. -> Praktisch zur Umsetzung des \"Ziehens\" von Objekten mit der Maus!', false));\r\n\r\n        this.addMethod(new Method(\"reactToMouseEventsWhenInvisible\", new Parameterlist([\r\n            { identifier: \"react\", type: booleanPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let react: boolean = parameters[1].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                sh.reactToMouseEventsWhenInvisible = react;\r\n\r\n            }, false, false, 'Legt fest, ob das Objekt auf Mausevents (buttondown, mouse move, ...) reagiert, wenn es unsichtbar ist.', false));\r\n\r\n        this.addMethod(new Method(\"tint\", new Parameterlist([\r\n            { identifier: \"colorAsRGBAString\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let color: string = parameters[1].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"tint\")) return;\r\n\r\n                sh.tint(color);\r\n\r\n            }, false, false, 'Überzieht das Grafikobjekt mit einer halbdurchsichtigen Farbschicht.', false));\r\n\r\n        this.addMethod(new Method(\"copy\", new Parameterlist([\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"copy\")) return;\r\n\r\n                return sh.getCopy(<Klass>o.class);\r\n\r\n            }, false, false, 'Erstellt eine Kopie des Grafikobjekts und git sie zurück.', false));\r\n\r\n\r\n        this.addMethod(new Method(\"bringToFront\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"bringToFront\")) return;\r\n\r\n                return sh.bringToFront();\r\n\r\n            }, false, false, 'Setzt das Grafikobjekt vor alle anderen.', false));\r\n\r\n        this.addMethod(new Method(\"sendToBack\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"sendToBack\")) return;\r\n\r\n                return sh.sendToBack();\r\n\r\n            }, false, false, 'Setzt das Grafikobjekt hinter alle anderen.', false));\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\nexport abstract class ShapeHelper extends ActorHelper {\r\n\r\n    displayObject: PIXI.DisplayObject;\r\n\r\n    belongsToGroup: GroupHelper;\r\n\r\n    centerXInitial: number;\r\n    centerYInitial: number;\r\n\r\n    angle: number = 0;\r\n\r\n    hitPolygonInitial: Punkt[] = null;\r\n    hitPolygonTransformed: Punkt[] = null;\r\n    hitPolygonDirty = true;\r\n\r\n    reactToMouseEventsWhenInvisible: boolean = false;\r\n\r\n    mouseLastSeenInsideObject: boolean = false;\r\n\r\n    trackMouseMove: boolean = false;\r\n\r\n    copyFrom(shapeHelper: ShapeHelper) {\r\n\r\n        this.centerXInitial = shapeHelper.centerXInitial;\r\n        this.centerYInitial = shapeHelper.centerYInitial;\r\n\r\n        if (shapeHelper.hitPolygonInitial != null) {\r\n            this.hitPolygonInitial = [];\r\n            for (let p of shapeHelper.hitPolygonInitial) this.hitPolygonInitial.push(Object.assign({}, p));\r\n        }\r\n\r\n        this.setHitPolygonDirty(true);\r\n\r\n        this.hitPolygonDirty = shapeHelper.hitPolygonDirty;\r\n        this.reactToMouseEventsWhenInvisible = shapeHelper.reactToMouseEventsWhenInvisible;\r\n        this.mouseLastSeenInsideObject = shapeHelper.mouseLastSeenInsideObject;\r\n\r\n        this.displayObject.localTransform.copyFrom(shapeHelper.displayObject.transform.localTransform);\r\n        this.displayObject.updateTransform();\r\n\r\n    }\r\n\r\n    constructor(interpreter: Interpreter, runtimeObject: RuntimeObject) {\r\n\r\n        super(interpreter, runtimeObject);\r\n\r\n        let listenerTypes = [\r\n            { identifier: \"MouseUp\", signature: \"(double, double, int)\" },\r\n            { identifier: \"MouseDown\", signature: \"(double, double, int)\" },\r\n            { identifier: \"MouseMove\", signature: \"(double, double)\" },\r\n            { identifier: \"MouseEnter\", signature: \"(double, double)\" },\r\n            { identifier: \"MouseLeave\", signature: \"(double, double)\" },\r\n        ];\r\n\r\n        let sd: MouseListenerShapeData = null;\r\n\r\n        for (let lt of listenerTypes) {\r\n            let method: Method = (<Klass>runtimeObject.class).getMethodBySignature(\"on\" + lt.identifier + lt.signature);\r\n\r\n            if (method?.program != null || method?.invoke != null) {\r\n\r\n                if (sd == null) {\r\n                    sd = {\r\n                        shapeHelper: this,\r\n                        types: {},\r\n                        methods: {}\r\n                    };\r\n                    this.worldHelper.mouseListenerShapes.push(sd);\r\n                }\r\n\r\n                sd.types[lt.identifier.toLowerCase()] = true;\r\n                sd.methods[lt.identifier.toLowerCase()] = method;\r\n\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    setHitPolygonDirty(dirty: boolean) {\r\n        this.hitPolygonDirty = dirty;\r\n    }\r\n\r\n    bringToFront() {\r\n        let container: PIXI.Container = this.displayObject.parent;\r\n        let highestIndex = container.children.length - 1;\r\n        container.setChildIndex(this.displayObject, highestIndex);\r\n    }\r\n\r\n    sendToBack() {\r\n        let container: PIXI.Container = this.displayObject.parent;\r\n        container.setChildIndex(this.displayObject, 0);\r\n    }\r\n\r\n    addToDefaultGroup() {\r\n        if (this.worldHelper.defaultGroup != null) {\r\n            this.runtimeObject.intrinsicData[\"Actor\"] = this;\r\n            let groupHelper = <GroupHelper>this.worldHelper.defaultGroup;\r\n            groupHelper.add(this.runtimeObject);\r\n        }\r\n    }\r\n\r\n    testdestroyed(method: string) {\r\n        if (this.isDestroyed) {\r\n            this.worldHelper.interpreter.throwException(\"Es wurde die Methode \" + method + \" eines bereits mit destroy() zerstörten Grafikobjekts aufgerufen.\");\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    tint(color: string) {\r\n        let c = ColorHelper.parseColorToOpenGL(color);\r\n        //@ts-ignore\r\n        if (this.displayObject.tint) {\r\n            //@ts-ignore\r\n            this.displayObject.tint = c.color;\r\n        }\r\n        this.render();\r\n    }\r\n\r\n    setVisible(visible: boolean) {\r\n\r\n        this.displayObject.visible = visible;\r\n    }\r\n\r\n    collidesWith(shapeHelper: ShapeHelper) {\r\n\r\n        // if(!(this instanceof TurtleHelper) && (shapeHelper instanceof TurtleHelper)){\r\n        if(!(this[\"lineElements\"] != null) && (shapeHelper[\"lineElements\"] != null)){\r\n            return shapeHelper.collidesWith(this);\r\n        }\r\n\r\n        this.displayObject.updateTransform();\r\n        shapeHelper.displayObject.updateTransform();\r\n\r\n        let bb = this.displayObject.getBounds();\r\n        let bb1 = shapeHelper.displayObject.getBounds();\r\n\r\n        if (bb.left > bb1.right || bb1.left > bb.right) return false;\r\n\r\n        if (bb.top > bb1.bottom || bb1.top > bb.bottom) return false;\r\n\r\n        if (shapeHelper[\"shapes\"]) {\r\n            return shapeHelper.collidesWith(this);\r\n        }\r\n\r\n        if (this.hitPolygonInitial == null || shapeHelper.hitPolygonInitial == null) return true;\r\n\r\n        // boundig boxes collide, so check further:\r\n        if (this.hitPolygonDirty) this.transformHitPolygon();\r\n        if (shapeHelper.hitPolygonDirty) shapeHelper.transformHitPolygon();\r\n\r\n        return polygonBerührtPolygon(this.hitPolygonTransformed, shapeHelper.hitPolygonTransformed);\r\n\r\n    }\r\n\r\n    containsPoint(x: number, y: number) {\r\n        if (!this.displayObject.getBounds().contains(x, y)) return false;\r\n\r\n        if (this.hitPolygonInitial == null) return true;\r\n\r\n        if (this.hitPolygonDirty) this.transformHitPolygon();\r\n        return polygonEnthältPunkt(this.hitPolygonTransformed, { x: x, y: y });\r\n    }\r\n\r\n    transformHitPolygon() {\r\n        let p = new PIXI.Point(this.centerXInitial, this.centerYInitial);\r\n        this.displayObject.updateTransform();\r\n        this.displayObject.transform.worldTransform.apply(p, p);\r\n\r\n        this.hitPolygonTransformed = [];\r\n        let m = this.displayObject.transform.worldTransform;\r\n        for (let p of this.hitPolygonInitial) {\r\n            this.hitPolygonTransformed.push({\r\n                x: (m.a * p.x) + (m.c * p.y) + m.tx,\r\n                y: (m.b * p.x) + (m.d * p.y) + m.ty\r\n            });\r\n        }\r\n        this.setHitPolygonDirty(false);\r\n\r\n    }\r\n\r\n    isOutsideView() {\r\n        let bounds = this.displayObject.getBounds(true);\r\n        let screen = this.worldHelper.app.screen;\r\n        return bounds.right < screen.left || bounds.left > screen.right\r\n            || bounds.bottom < screen.top || bounds.top > screen.bottom;\r\n    }\r\n\r\n    move(dx: number, dy: number) {\r\n        this.displayObject.localTransform.translate(dx, dy);\r\n        this.displayObject.transform.onChange();\r\n        this.displayObject.updateTransform();\r\n        this.setHitPolygonDirty(true);\r\n    }\r\n\r\n    rotate(angleInDeg: number, cX?: number, cY?: number) {\r\n        \r\n        this.displayObject.updateTransform();\r\n        if (cX == null) {\r\n            let p = new PIXI.Point(this.centerXInitial, this.centerYInitial);\r\n            this.displayObject.localTransform.apply(p, p);\r\n            cX = p.x;\r\n            cY = p.y;\r\n        } else {\r\n            let p = new PIXI.Point(cX, cY);\r\n            this.worldHelper.stage.localTransform.apply(p, p);\r\n            this.displayObject.transform.worldTransform.applyInverse(p, p);\r\n            this.displayObject.localTransform.apply(p, p);\r\n            cX = p.x;\r\n            cY = p.y;\r\n        }\r\n\r\n        this.displayObject.localTransform.translate(-cX, -cY);\r\n        this.displayObject.localTransform.rotate(-angleInDeg / 180 * Math.PI);\r\n        this.displayObject.localTransform.translate(cX, cY);\r\n        this.displayObject.transform.onChange();\r\n        this.setHitPolygonDirty(true);\r\n\r\n        this.angle += angleInDeg;\r\n    }\r\n\r\n    scale(factor: number, cX?: number, cY?: number) {\r\n\r\n        this.displayObject.updateTransform();\r\n        if (cX == null) {\r\n            let p = new PIXI.Point(this.centerXInitial, this.centerYInitial);\r\n            this.displayObject.localTransform.apply(p, p);\r\n            cX = p.x;\r\n            cY = p.y;\r\n        } else {\r\n            let p = new PIXI.Point(cX, cY);\r\n            this.worldHelper.stage.localTransform.apply(p, p);\r\n            this.displayObject.transform.worldTransform.applyInverse(p, p);\r\n            this.displayObject.localTransform.apply(p, p);\r\n            cX = p.x;\r\n            cY = p.y;\r\n        }\r\n\r\n        this.displayObject.localTransform.translate(-cX, -cY);\r\n        this.displayObject.localTransform.scale(factor, factor);\r\n        this.displayObject.localTransform.translate(cX, cY);\r\n        this.displayObject.transform.onChange();\r\n\r\n        this.setHitPolygonDirty(true);\r\n\r\n    }\r\n\r\n    public getCenterX(): number {\r\n        let p = new PIXI.Point(this.centerXInitial, this.centerYInitial);\r\n        this.displayObject.updateTransform();\r\n        // this.displayObject.localTransform.apply(p, p);\r\n        this.displayObject.transform.worldTransform.apply(p, p);\r\n        this.worldHelper.stage.localTransform.applyInverse(p, p);\r\n        return p.x;\r\n    }\r\n    \r\n    public getCenterY(): number {\r\n        let p = new PIXI.Point(this.centerXInitial, this.centerYInitial);\r\n        this.displayObject.updateTransform();\r\n        this.displayObject.transform.worldTransform.apply(p, p);\r\n        this.worldHelper.stage.localTransform.applyInverse(p, p);\r\n        return p.y;\r\n    }\r\n\r\n    public abstract render(): void;\r\n\r\n    public destroy(): void {\r\n        super.destroy();\r\n        if (this.belongsToGroup != null) {\r\n            this.belongsToGroup.remove(this.runtimeObject);\r\n        }\r\n    }\r\n\r\n    getCollidingShapes(groupHelper: GroupHelper, shapeType: Type): any {\r\n        let collidingShapes: Value[] = [];\r\n        for (let shape of groupHelper.shapes) {\r\n            let shapeHelper: ShapeHelper = <ShapeHelper>shape.intrinsicData[\"Actor\"];\r\n            if (shapeHelper.collidesWith(this)) {\r\n                collidingShapes.push({\r\n                    type: shapeType,\r\n                    value: shape\r\n                });\r\n            }\r\n        }\r\n\r\n        return collidingShapes;\r\n    }\r\n\r\n    abstract getCopy(klass: Klass): RuntimeObject;\r\n\r\n}\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass } from \"../../compiler/types/Class.js\";\r\nimport { doublePrimitiveType, intPrimitiveType, stringPrimitiveType, voidPrimitiveType, booleanPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { FilledShapeHelper } from \"./FilledShape.js\";\r\nimport { WorldHelper } from \"./World.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { ShapeHelper } from \"./Shape.js\";\r\nimport { ColorHelper } from \"./ColorHelper.js\";\r\nimport { ColorClassIntrinsicData } from \"./Color.js\";\r\n\r\nexport class BitmapClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Bitmap\", module, \"Rechteckige Bitmap mit beliebiger Auflösung und Positionierung in der Grafikausgabe\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Shape\"));\r\n\r\n        // this.addAttribute(new Attribute(\"PI\", doublePrimitiveType, (object) => { return Math.PI }, true, Visibility.public, true, \"Die Kreiszahl Pi (3.1415...)\"));\r\n\r\n        let colorType: Klass = <Klass>this.module.typeStore.getType(\"Color\");\r\n\r\n        this.addMethod(new Method(\"Bitmap\", new Parameterlist([\r\n            { identifier: \"pointsX\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"pointsY\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"left\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"top\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"width\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"height\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let pointsX: number = parameters[1].value;\r\n                let pointsY: number = parameters[2].value;\r\n                let left: number = parameters[3].value;\r\n                let top: number = parameters[4].value;\r\n                let width: number = parameters[5].value;\r\n                let height: number = parameters[6].value;\r\n\r\n                let rh = new BitmapHelper(pointsX, pointsY, left, top, width, height, module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = rh;\r\n\r\n            }, false, false, 'Instanziert eine neue Bitmap. pointsX bzw. pointsY bezeichnet Anzahl der Bildpunkte in x bzw. y-Richtung, (left, top) sind die Koordinaten der linken oberen Ecke.', true));\r\n\r\n        this.addMethod(new Method(\"getColor\", new Parameterlist([\r\n            { identifier: \"x\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), colorType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n                let sh: BitmapHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                return sh.getFarbeAsObject(x, y, colorType);\r\n\r\n            }, false, false, 'Gibt die Farbe des Punkts (x, y) zurück.', false));\r\n\r\n        this.addMethod(new Method(\"setColor\", new Parameterlist([\r\n            { identifier: \"x\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"color\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"alpha\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n                let color: number = parameters[3].value;\r\n                let alpha: number = parameters[4].value;\r\n                let sh: BitmapHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                sh.setzeFarbe(x, y, color, alpha);\r\n\r\n            }, false, false, 'Setzt die Farbe des Pixels bei (x, y). Die Farbe wird als int-Wert gegeben, wobei farbe == 255*255*rot + 255*grün + blau und 0.0 <= alpha <= 1.0.', false));\r\n\r\n        this.addMethod(new Method(\"setColor\", new Parameterlist([\r\n            { identifier: \"x\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"color\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n                let color: number = parameters[3].value;\r\n                let sh: BitmapHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                sh.setzeFarbe(x, y, color);\r\n\r\n            }, false, false, 'Setzt die Farbe des Pixels bei (x, y). Die Farbe wird als int-Wert gegeben, wobei farbe == 255*255*rot + 255*grün + blau.', false));\r\n\r\n        this.addMethod(new Method(\"setColor\", new Parameterlist([\r\n            { identifier: \"x\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"color\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n                let color: string = parameters[3].value;\r\n                let sh: BitmapHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                sh.setzeFarbe(x, y, color);\r\n\r\n            }, false, false, 'Setzt die Farbe des Pixels bei (x, y). Die Farbe ist entweder eine vordefinierte Farbe (Color.black, Color.red, ...) oder eine css-Farbe der Art \"#ffa7b3\" (ohne alpha), \"#ffa7b380\" (mit alpha), \"rgb(172, 22, 18)\" oder \"rgba(123, 22,18, 0.3)\"', false));\r\n\r\n        this.addMethod(new Method(\"setColor\", new Parameterlist([\r\n            { identifier: \"x\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"color\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"alpha\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n                let color: string = parameters[3].value;\r\n                let alpha: number = parameters[4].value;\r\n                let sh: BitmapHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                sh.setzeFarbe(x, y, color, alpha);\r\n\r\n            }, false, false, 'Setzt die Farbe des Pixels bei (x, y). Die Farbe ist entweder eine vordefinierte Farbe (Color.black, Color.red, ...) oder eine css-Farbe der Art \"#ffa7b3\" (ohne alpha), \"#ffa7b380\" (mit alpha), \"rgb(172, 22, 18)\" oder \"rgba(123, 22,18, 0.3)\". 0.0 <= alpha <= 1.0.', false));\r\n\r\n        this.addMethod(new Method(\"isColor\", new Parameterlist([\r\n            { identifier: \"x\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"colorAsRGBAString\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n                let color: string = parameters[3].value;\r\n                let sh: BitmapHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                return sh.istFarbe(x, y, color);\r\n\r\n            }, false, false, 'Gibt genau dann true zurück, wenn das Pixel bei (x, y) die angegebene Farbe besitzt. Die Farbe ist entweder eine vordefinierte Farbe (Color.black, Color.red, ...) oder eine css-Farbe der Art \"#ffa7b3\" (ohne alpha), \"#ffa7b380\" (mit alpha), \"rgb(172, 22, 18)\" oder \"rgba(123, 22,18, 0.3)\"', false));\r\n\r\n        this.addMethod(new Method(\"isColor\", new Parameterlist([\r\n            { identifier: \"x\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"color\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n                let color: number = parameters[3].value;\r\n                let sh: BitmapHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                return sh.istFarbe(x, y, color, 1);\r\n\r\n            }, false, false, 'Gibt genau dann true zurück, wenn das Pixel bei (x, y) die angegebene Farbe besitzt. Die Farbe wird als int-Wert gegeben, wobei farbe == 255*255*rot + 255*grün + blau und 0.0 <= alpha <= 1.0', false));\r\n\r\n\r\n        this.addMethod(new Method(\"fillAll\", new Parameterlist([\r\n            { identifier: \"color\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"alpha\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let color: number = parameters[1].value;\r\n                let alpha: number = parameters[2].value;\r\n                let sh: BitmapHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                sh.fillAll(color, alpha);\r\n\r\n            }, false, false, 'Füllt die ganze Bitmap mit einer Farbe. Die Farbe wird als int-Wert gegeben, wobei farbe == 255*255*rot + 255*grün + blau und 0.0 <= alpha <= 1.0', false));\r\n\r\n        this.addMethod(new Method(\"fillAll\", new Parameterlist([\r\n            { identifier: \"colorAsRGBAString\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let color: number = parameters[1].value;\r\n                let sh: BitmapHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                sh.fillAll(color);\r\n\r\n            }, false, false, 'Füllt die ganze Bitmap mit einer Farbe. Die Farbe ist entweder eine vordefinierte Farbe (Color.black, Color.red, ...) oder eine css-Farbe der Art \"#ffa7b3\" (ohne alpha), \"#ffa7b380\" (mit alpha), \"rgb(172, 22, 18)\" oder \"rgba(123, 22,18, 0.3)\"', false));\r\n\r\n        this.addMethod(new Method(\"copy\", new Parameterlist([\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: BitmapHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"copy\")) return;\r\n\r\n                return sh.getCopy(<Klass>o.class);\r\n\r\n            }, false, false, 'Erstellt eine Kopie des Bitmap-Objekts und git sie zurück.', false));\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\nexport class BitmapHelper extends ShapeHelper {\r\n\r\n    private colorArray: Float32Array;\r\n    private colorBuffer: PIXI.Buffer;\r\n\r\n\r\n    getCopy(klass: Klass): RuntimeObject {\r\n\r\n        let ro: RuntimeObject = new RuntimeObject(klass);\r\n        let bh: BitmapHelper = new BitmapHelper(this.anzahlX, this.anzahlY, this.left, this.top, this.width, this.height, this.worldHelper.interpreter, ro);\r\n\r\n        for (let i = 0; i < this.colorArray.length; i++) bh.colorArray[i] = this.colorArray[i];\r\n        bh.colorBuffer.update();\r\n\r\n        ro.intrinsicData[\"Actor\"] = bh;\r\n\r\n        bh.copyFrom(this);\r\n        bh.render();\r\n\r\n        return ro;\r\n    }\r\n\r\n\r\n    constructor(public anzahlX, public anzahlY, public left: number, public top: number, public width: number, public height: number,\r\n        interpreter: Interpreter, runtimeObject: RuntimeObject) {\r\n        super(interpreter, runtimeObject);\r\n        this.centerXInitial = left + width / 2;\r\n        this.centerYInitial = top + height / 2;\r\n\r\n        this.hitPolygonInitial = [\r\n            { x: left, y: top }, { x: left, y: top + height }, { x: left + width, y: top + height }, { x: left + width, y: top }\r\n        ];\r\n\r\n        this.render();\r\n        this.addToDefaultGroup();\r\n    }\r\n\r\n    render(): void {\r\n\r\n        if (this.displayObject == null) {\r\n            this.initGraphics();\r\n            this.worldHelper.stage.addChild(this.displayObject);\r\n        }\r\n\r\n    };\r\n\r\n    protected initGraphics() {\r\n\r\n        let vertexArray = new Float32Array(this.anzahlX * this.anzahlY * 4 * 2);\r\n        this.colorArray = new Float32Array(this.anzahlX * this.anzahlY * 4 * 4);\r\n        let vertexIndexArray = new Int32Array(this.anzahlX * this.anzahlY * 6); // Anzahl der Dreieckseckpunkte\r\n\r\n        let xStep = this.width / this.anzahlX;\r\n        let yStep = this.height / this.anzahlY;\r\n\r\n        for (let y = 0; y < this.anzahlY; y++) {\r\n            for (let x = 0; x < this.anzahlX; x++) {\r\n                let left = x * xStep + this.left;\r\n                let top = y * yStep + this.top;\r\n                let index = (x + y * (this.anzahlX)) * 8;\r\n                vertexArray[index] = left;\r\n                vertexArray[index + 1] = top;\r\n                vertexArray[index + 2] = left + xStep;\r\n                vertexArray[index + 3] = top;\r\n                vertexArray[index + 4] = left;\r\n                vertexArray[index + 5] = top + yStep;\r\n                vertexArray[index + 6] = left + xStep;\r\n                vertexArray[index + 7] = top + yStep;\r\n\r\n                let color = (x + y) % 2;\r\n                index = (x + y * (this.anzahlX)) * 16;\r\n                for (let i = 0; i < 16; i++) {\r\n                    this.colorArray[index + i] = color;\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        let i: number = 0; // index des Dreieckspunktes\r\n\r\n        for (let y = 0; y < this.anzahlY; y++) {\r\n            for (let x = 0; x < this.anzahlX; x++) {\r\n\r\n                let index = (x + y * this.anzahlX) * 4;\r\n                i = (x + y * this.anzahlX) * 6;\r\n                vertexIndexArray[i] = index;\r\n                vertexIndexArray[i + 1] = index + 1;\r\n                vertexIndexArray[i + 2] = index + 2;\r\n                vertexIndexArray[i + 3] = index + 1;\r\n                vertexIndexArray[i + 4] = index + 3;\r\n                vertexIndexArray[i + 5] = index + 2;\r\n\r\n            }\r\n        }\r\n\r\n\r\n        let vertexBuffer = new PIXI.Buffer(vertexArray, true);\r\n        this.colorBuffer = new PIXI.Buffer(this.colorArray, false);\r\n        let VertexIndexBuffer = new PIXI.Buffer(vertexIndexArray, true, true);\r\n\r\n\r\n\r\n        const geometry = new PIXI.Geometry()\r\n            .addAttribute('aVertexPosition', // the attribute name\r\n                vertexBuffer, // x, y\r\n                2).addIndex(VertexIndexBuffer) // the size of the attribute\r\n\r\n            .addAttribute('aColor', // the attribute name\r\n                this.colorBuffer,\r\n                4); // the size of the attribute\r\n\r\n        const shader = PIXI.Shader.from(`\r\n    \r\n        precision mediump float;\r\n        attribute vec2 aVertexPosition;\r\n        attribute vec4 aColor;\r\n    \r\n        uniform mat3 translationMatrix;\r\n        uniform mat3 projectionMatrix;\r\n    \r\n        varying vec4 vColor;\r\n    \r\n        void main() {\r\n    \r\n            vColor = aColor;\r\n            gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n    \r\n        }`,\r\n\r\n            `precision mediump float;\r\n    \r\n        varying vec4 vColor;\r\n    \r\n        void main() {\r\n            gl_FragColor = vColor;\r\n        }\r\n    \r\n    `);\r\n\r\n        this.displayObject = new PIXI.Mesh(geometry, shader, null, PIXI.DRAW_MODES.TRIANGLES);\r\n\r\n        this.displayObject.position.set(this.left, this.top);\r\n\r\n    }\r\n\r\n    public getFarbeAsObject(x: number, y: number, colorType: Klass): RuntimeObject {\r\n        let i = (x + y * (this.anzahlX)) * 16;\r\n        let c: number;\r\n\r\n        let r = this.colorArray[i];\r\n        let g = this.colorArray[i + 1];\r\n        let b = this.colorArray[i + 2];\r\n        let a = this.colorArray[i + 3];\r\n\r\n        let rto: RuntimeObject = new RuntimeObject(colorType);\r\n\r\n        let id: ColorClassIntrinsicData = {\r\n            red: Math.round(r * 255),\r\n            green: Math.round(g * 255),\r\n            blue: Math.round(b * 255),\r\n            hex: ColorHelper.intColorToHexRGB(Math.round(r * 255) * 0x10000 + Math.round(g * 255) * 0x100 + Math.round(b * 255))\r\n        }\r\n\r\n        rto.intrinsicData = id;\r\n\r\n        return rto;\r\n\r\n    }\r\n\r\n\r\n    public istFarbe(x: number, y: number, color: string | number, alpha?: number) {\r\n        let i = (x + y * (this.anzahlX)) * 16;\r\n        let c: number;\r\n\r\n        if (typeof color == \"string\") {\r\n            let ch = ColorHelper.parseColorToOpenGL(color);\r\n            c = ch.color;\r\n            alpha = ch.alpha;\r\n        } else {\r\n            c = color;\r\n        }\r\n\r\n        let r = ((c & 0xff0000) >> 16) / 255;\r\n        let g = ((c & 0xff00) >> 8) / 255;\r\n        let b = ((c & 0xff)) / 255;\r\n\r\n        let r1 = this.colorArray[i];\r\n        let g1 = this.colorArray[i + 1];\r\n        let b1 = this.colorArray[i + 2];\r\n\r\n        return Math.abs(r - r1) < 0.5 && Math.abs(g - g1) < 0.5 && Math.abs(b - b1) < 0.5;\r\n\r\n    }\r\n\r\n    public setzeFarbe(x: number, y: number, color: string | number, alpha?: number) {\r\n        let i = (x + y * (this.anzahlX)) * 16;\r\n        let c: number;\r\n\r\n        if (typeof color == \"string\") {\r\n            let ch = ColorHelper.parseColorToOpenGL(color);\r\n            c = ch.color;\r\n            if (alpha == null) alpha = ch.alpha;\r\n        } else {\r\n            c = color;\r\n            if (alpha == null) alpha = 1.0;\r\n        }\r\n\r\n        let r = ((c & 0xff0000) >> 16) / 255;\r\n        let g = ((c & 0xff00) >> 8) / 255;\r\n        let b = ((c & 0xff)) / 255;\r\n\r\n        this.colorArray[i] = r;\r\n        this.colorArray[i + 1] = g;\r\n        this.colorArray[i + 2] = b;\r\n        this.colorArray[i + 3] = alpha;\r\n        this.colorArray[i + 4] = r;\r\n        this.colorArray[i + 5] = g;\r\n        this.colorArray[i + 6] = b;\r\n        this.colorArray[i + 7] = alpha;\r\n        this.colorArray[i + 8] = r;\r\n        this.colorArray[i + 9] = g;\r\n        this.colorArray[i + 10] = b;\r\n        this.colorArray[i + 11] = alpha;\r\n        this.colorArray[i + 12] = r;\r\n        this.colorArray[i + 13] = g;\r\n        this.colorArray[i + 14] = b;\r\n        this.colorArray[i + 15] = alpha;\r\n        this.colorBuffer.update();\r\n    }\r\n\r\n    public fillAll(color: string | number, alpha?: number) {\r\n        let c: number;\r\n\r\n        if (typeof color == \"string\") {\r\n            let ch = ColorHelper.parseColorToOpenGL(color);\r\n            c = ch.color;\r\n            alpha = ch.alpha;\r\n        } else {\r\n            c = color;\r\n        }\r\n\r\n        for (let y = 0; y < this.anzahlY; y++) {\r\n            for (let x = 0; x < this.anzahlX; x++) {\r\n                let i = (x + y * (this.anzahlX)) * 16;\r\n\r\n                let r = ((c & 0xff0000) >> 16) / 255;\r\n                let g = ((c & 0xff00) >> 8) / 255;\r\n                let b = ((c & 0xff)) / 255;\r\n\r\n                this.colorArray[i] = r;\r\n                this.colorArray[i + 1] = g;\r\n                this.colorArray[i + 2] = b;\r\n                this.colorArray[i + 3] = alpha;\r\n                this.colorArray[i + 4] = r;\r\n                this.colorArray[i + 5] = g;\r\n                this.colorArray[i + 6] = b;\r\n                this.colorArray[i + 7] = alpha;\r\n                this.colorArray[i + 8] = r;\r\n                this.colorArray[i + 9] = g;\r\n                this.colorArray[i + 10] = b;\r\n                this.colorArray[i + 11] = alpha;\r\n                this.colorArray[i + 12] = r;\r\n                this.colorArray[i + 13] = g;\r\n                this.colorArray[i + 14] = b;\r\n                this.colorArray[i + 15] = alpha;\r\n            }\r\n        }\r\n        this.colorBuffer.update();\r\n    }\r\n\r\n    public setzeFarbeRGBA(x: number, y: number, r: number, g: number, b: number, alpha: number) {\r\n        let i = (x + y * (this.anzahlX)) * 16;\r\n        r /= 255;\r\n        g /= 255;\r\n        b /= 255;\r\n        this.colorArray[i] = r;\r\n        this.colorArray[i + 1] = g;\r\n        this.colorArray[i + 2] = b;\r\n        this.colorArray[i + 3] = alpha;\r\n        this.colorArray[i + 4] = r;\r\n        this.colorArray[i + 5] = g;\r\n        this.colorArray[i + 6] = b;\r\n        this.colorArray[i + 7] = alpha;\r\n        this.colorArray[i + 8] = r;\r\n        this.colorArray[i + 9] = g;\r\n        this.colorArray[i + 10] = b;\r\n        this.colorArray[i + 11] = alpha;\r\n        this.colorArray[i + 12] = r;\r\n        this.colorArray[i + 13] = g;\r\n        this.colorArray[i + 14] = b;\r\n        this.colorArray[i + 15] = alpha;\r\n        this.colorBuffer.update();\r\n    }\r\n\r\n    public getFarbe(x: number, y: number): number {\r\n        let i = (x + y * this.anzahlX) * 16;\r\n        return Math.trunc(this.colorArray[i] * 255) * 0x10000 +\r\n            Math.trunc(this.colorArray[i + 1] * 255) * 0x100 +\r\n            Math.trunc(this.colorArray[i + 2] * 255);\r\n    }\r\n\r\n\r\n}\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass, Visibility } from \"../../compiler/types/Class.js\";\r\nimport { doublePrimitiveType, stringPrimitiveType, voidPrimitiveType, intPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Attribute, Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { ColorHelper } from \"./ColorHelper.js\";\r\nimport { ShapeHelper } from \"./Shape.js\";\r\nimport { WorldHelper } from \"./World.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { ColorClassIntrinsicData } from \"./Color.js\";\r\n\r\nexport class FilledShapeClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"FilledShape\", module, \"Basisklasse für grafische Objekte mit Füllfarbe und Randfarbe, beide wahlweise auch transparent\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Shape\"));\r\n        this.isAbstract = true;\r\n\r\n        let that = this;\r\n\r\n        let colorType: Klass = <Klass>this.module.typeStore.getType(\"Color\");\r\n\r\n        this.addMethod(new Method(\"getFillColor\", new Parameterlist([\r\n        ]), colorType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: FilledShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                return sh.getFarbeAsObject(sh.fillColor, sh.fillColor, colorType);\r\n\r\n            }, false, false, 'Gibt die Füllfarbe des Objekts zurück.', false));\r\n\r\n        this.addMethod(new Method(\"getBorderColor\", new Parameterlist([\r\n        ]), colorType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: FilledShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                return sh.getFarbeAsObject(sh.borderColor, sh.borderColor, colorType);\r\n\r\n            }, false, false, 'Gibt die Randfarbe des Objekts zurück.', false));\r\n\r\n        this.addAttribute(new Attribute(\"borderWidth\", doublePrimitiveType,\r\n            (value) => {\r\n\r\n                let rto: RuntimeObject = value.object;\r\n                let helper: FilledShapeHelper = rto.intrinsicData[\"Actor\"];\r\n                if (helper == null) {\r\n                    value.value = '---';\r\n                    return;\r\n                }\r\n\r\n                value.value = helper.borderWidth;\r\n\r\n            }, false, Visibility.protected, true, \"Randbreite in Pixeln\"));\r\n\r\n        this.addMethod(new Method(\"setAlpha\", new Parameterlist([\r\n            { identifier: \"alphaValue\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let alpha: number = parameters[1].value;\r\n                let sh: FilledShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"setAlpha\")) return;\r\n\r\n                sh.setAlpha(alpha);\r\n\r\n            }, false, false, 'Setzt die Durchsichtigkeit von Füllung und Rand. 0.0 bedeutet vollkommen durchsichtig, 1.0 bedeutet vollkommen undurchsichtig.\"', false));\r\n\r\n        this.addMethod(new Method(\"getAlpha\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: FilledShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getAlpha\")) return;\r\n\r\n                return sh.fillAlpha;\r\n\r\n            }, false, false, 'Setzt die Durchsichtigkeit von Füllung und Rand. 0.0 bedeutet vollkommen durchsichtig, 1.0 bedeutet vollkommen undurchsichtig.\"', false));\r\n\r\n        this.addMethod(new Method(\"setFillColor\", new Parameterlist([\r\n            { identifier: \"color\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let color: number = parameters[1].value;\r\n                let sh: FilledShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"setFillColor\")) return;\r\n\r\n                sh.setFillColor(color);\r\n\r\n            }, false, false, 'Setzt die Füllfarbe. Die Farbe wird als int-Wert gegeben, wobei farbe == 255*255*rot + 255*grün + blau', false));\r\n\r\n        this.addMethod(new Method(\"setFillColor\", new Parameterlist([\r\n            { identifier: \"color\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"alpha\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let color: number = parameters[1].value;\r\n                let alpha: number = parameters[2].value;\r\n                let sh: FilledShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"setFillColor\")) return;\r\n\r\n                sh.setFillColor(color, alpha);\r\n\r\n            }, false, false, 'Setzt die Füllfarbe. Die Farbe wird als int-Wert gegeben, wobei farbe == 255*255*rot + 255*grün + blau und 0.0 <= alpha <= 1.0', false));\r\n\r\n        this.addMethod(new Method(\"setFillColor\", new Parameterlist([\r\n            { identifier: \"color\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let color: string = parameters[1].value;\r\n                let sh: FilledShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"setFillColor\")) return;\r\n\r\n                sh.setFillColor(color);\r\n\r\n            }, false, false, 'Setzt die Füllfarbe. Die Farbe ist entweder eine vordefinierte Farbe (Color.black, Color.red, ...) oder eine css-Farbe der Art \"#ffa7b3\" (ohne alpha), \"#ffa7b380\" (mit alpha), \"rgb(172, 22, 18)\" oder \"rgba(123, 22,18, 0.3)\"', false));\r\n\r\n        this.addMethod(new Method(\"setFillColor\", new Parameterlist([\r\n            { identifier: \"color\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"alpha\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let color: string = parameters[1].value;\r\n                let alpha: number = parameters[2].value;\r\n                let sh: FilledShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"setFillColor\")) return;\r\n\r\n                sh.setFillColor(color, alpha);\r\n\r\n            }, false, false, 'Setzt die Füllfarbe. Die Farbe ist entweder eine vordefinierte Farbe (Color.black, Color.red, ...) oder eine css-Farbe der Art \"#ffa7b3\" oder \"rgb(172, 22, 18)\" und 0.0 <= alpha <= 1.0\"', false));\r\n\r\n        this.addMethod(new Method(\"setBorderColor\", new Parameterlist([\r\n            { identifier: \"color\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let color: number = parameters[1].value;\r\n                let sh: FilledShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"setBorderColor\")) return;\r\n\r\n                sh.setBorderColor(color);\r\n\r\n            }, false, false, 'Setzt die Randfarbe. Die Farbe wird als int-Wert gegeben, wobei farbe == 255*255*rot + 255*grün + blau\"', false));\r\n\r\n        this.addMethod(new Method(\"setBorderColor\", new Parameterlist([\r\n            { identifier: \"color\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"alpha\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let color: number = parameters[1].value;\r\n                let alpha: number = parameters[2].value;\r\n                let sh: FilledShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"setBorderColor\")) return;\r\n\r\n                sh.setBorderColor(color, alpha);\r\n\r\n            }, false, false, 'Setzt die Randfarbe. Die Farbe wird als int-Wert gegeben, wobei farbe == 255*255*rot + 255*grün + blau und 0.0 <= alpha <= 1.0\"', false));\r\n\r\n        this.addMethod(new Method(\"setBorderColor\", new Parameterlist([\r\n            { identifier: \"color\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"alpha\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let color: string = parameters[1].value;\r\n                let alpha: number = parameters[2].value;\r\n                let sh: FilledShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"setBorderColor\")) return;\r\n\r\n                sh.setBorderColor(color, alpha);\r\n\r\n            }, false, false, 'Setzt die Randfarbe. Die Farbe ist entweder eine vordefinierte Farbe (Color.black, Color.red, ...) oder eine css-Farbe der Art \"#ffa7b3\" oder \"rgb(172, 22, 18)\" und 0.0 <= alpha <= 1.0\"', false));\r\n\r\n        this.addMethod(new Method(\"setBorderColor\", new Parameterlist([\r\n            { identifier: \"colorAsRGBAString\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let color: string = parameters[1].value;\r\n                let sh: FilledShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"setBorderColor\")) return;\r\n\r\n                sh.setBorderColor(color);\r\n\r\n            }, false, false, 'Setzt die Randfarbe. Die Farbe ist entweder eine vordefinierte Farbe (Color.black, Color.red, ...) oder eine css-Farbe der Art \"#ffa7b3\" (ohne alpha), \"#ffa7b380\" (mit alpha), \"rgb(172, 22, 18)\" oder \"rgba(123, 22,18, 0.3)\"', false));\r\n\r\n        this.addMethod(new Method(\"setBorderWidth\", new Parameterlist([\r\n            { identifier: \"widthInPixel\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let width: number = parameters[1].value;\r\n                let sh: FilledShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"setBorderWidth\")) return;\r\n\r\n                sh.setBorderWidth(width);\r\n\r\n            }, false, false, 'Setzt die Linienbreite des Randes (Einheit: Pixel)\"', false));\r\n\r\n    }\r\n\r\n    rgbaToHex(rgb: number, alpha: number): string {\r\n        let s = rgb == null ? \"---\" : rgb.toString(16);\r\n        while (s.length < 6) s = \"0\" + s;\r\n\r\n        let a = Math.round(alpha * 255).toString(16);\r\n        if (a.length < 2) a = \"0\" + a;\r\n\r\n        return \"#\" + s + a;\r\n\r\n    }\r\n\r\n}\r\n\r\nexport abstract class FilledShapeHelper extends ShapeHelper {\r\n\r\n    fillColor: number = 0x8080ff;\r\n    fillAlpha: number = 1.0;\r\n\r\n    borderColor: number = null;\r\n    borderAlpha: number = 1.0;\r\n    borderWidth: number = 10;\r\n\r\n    constructor(interpreter: Interpreter, runtimeObject: RuntimeObject) {\r\n        super(interpreter, runtimeObject);\r\n    }\r\n\r\n    copyFrom(fsh: FilledShapeHelper) {\r\n        super.copyFrom(fsh);\r\n        this.fillColor = fsh.fillColor;\r\n        this.fillAlpha = fsh.fillAlpha;\r\n\r\n        this.borderColor = fsh.borderColor;\r\n        this.borderAlpha = fsh.borderAlpha;\r\n        this.borderWidth = fsh.borderWidth;\r\n    }\r\n\r\n    setAlpha(alpha: number) {\r\n\r\n        this.fillAlpha = alpha;\r\n        this.borderAlpha = alpha;\r\n        this.render();\r\n    }\r\n\r\n    setBorderColor(color: string | number, alpha?: number) {\r\n\r\n        if (typeof color == \"string\") {\r\n            let c = ColorHelper.parseColorToOpenGL(color);\r\n            this.borderColor = c.color;\r\n            this.borderAlpha = alpha == null ? c.alpha : alpha;\r\n        } else {\r\n            this.borderColor = color;\r\n            this.borderAlpha = alpha;\r\n        }\r\n\r\n        this.render();\r\n\r\n    }\r\n\r\n    setFillColor(color: string | number, alpha?: number) {\r\n\r\n        if (typeof color == \"string\") {\r\n            let c = ColorHelper.parseColorToOpenGL(color);\r\n            this.fillColor = c.color;\r\n            this.fillAlpha = alpha == null ? c.alpha : alpha;\r\n        } else {\r\n            this.fillColor = color;\r\n            this.fillAlpha = alpha;\r\n        }\r\n\r\n\r\n        this.render();\r\n\r\n    }\r\n\r\n    setBorderWidth(width: number) {\r\n        this.borderWidth = width;\r\n        this.render();\r\n    }\r\n\r\n    public getFarbeAsObject(color: number, alpha: number, colorType: Klass): RuntimeObject {\r\n\r\n        if (color == null) return null;\r\n\r\n        let r = (color & 0xff0000) >> 16;\r\n        let g = (color & 0xff00) >> 8;\r\n        let b = color & 0xff;\r\n\r\n        let rto: RuntimeObject = new RuntimeObject(colorType);\r\n\r\n        let id: ColorClassIntrinsicData = {\r\n            red: r,\r\n            green: g,\r\n            blue: b,\r\n            hex: ColorHelper.intColorToHexRGB(color)\r\n        }\r\n\r\n        rto.intrinsicData = id;\r\n\r\n        return rto;\r\n\r\n    }\r\n\r\n\r\n}\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass } from \"../../compiler/types/Class.js\";\r\nimport { doublePrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { FilledShapeHelper } from \"./FilledShape.js\";\r\nimport { WorldHelper } from \"./World.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { ShapeHelper } from \"./Shape.js\";\r\n\r\nexport class CircleClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Circle\", module, \"Kreis\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"FilledShape\"));\r\n\r\n        // this.addAttribute(new Attribute(\"PI\", doublePrimitiveType, (object) => { return Math.PI }, true, Visibility.public, true, \"Die Kreiszahl Pi (3.1415...)\"));\r\n\r\n        this.addMethod(new Method(\"Circle\", new Parameterlist([\r\n            { identifier: \"mx\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"my\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"r\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let mx: number = parameters[1].value;\r\n                let my: number = parameters[2].value;\r\n                let r: number = parameters[3].value;\r\n\r\n                let rh = new CircleHelper(mx, my, r, module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = rh;\r\n\r\n            }, false, false, 'Instanziert einen neuen Kreis. (mx, my) ist der Mittelpunt, r sein Radius.', true));\r\n\r\n        this.addMethod(new Method(\"setRadius\", new Parameterlist([\r\n            { identifier: \"radius\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let r: number = parameters[1].value;\r\n                let sh: CircleHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"setRadius\")) return;\r\n\r\n                sh.setRadius(r);\r\n\r\n            }, false, false, 'Setzt den Radius des Kreises.\"', false));\r\n\r\n        this.addMethod(new Method(\"getRadius\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: CircleHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getRadius\")) return;\r\n\r\n                return sh.r * sh.displayObject.scale.x;\r\n\r\n            }, false, false, \"Gibt den Radius zurück.\", false));\r\n\r\n        this.addMethod(new Method(\"copy\", new Parameterlist([\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: CircleHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"copy\")) return;\r\n\r\n                return sh.getCopy(<Klass>o.class);\r\n\r\n            }, false, false, 'Erstellt eine Kopie des Circle-Objekts und git sie zurück.', false));\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\nexport class CircleHelper extends FilledShapeHelper {\r\n\r\n    constructor(public mx: number, public my: number, public r: number,\r\n        interpreter: Interpreter, runtimeObject: RuntimeObject) {\r\n        super(interpreter, runtimeObject);\r\n        this.centerXInitial = mx;\r\n        this.centerYInitial = my;\r\n\r\n        this.hitPolygonInitial = [];\r\n\r\n        let deltaAlpha = Math.PI / 8;\r\n        for (let i = 0; i < 16; i++) {\r\n            let alpha = deltaAlpha * i;\r\n            this.hitPolygonInitial.push({\r\n                x: mx + r * Math.cos(alpha),\r\n                y: my + r * Math.sin(alpha)\r\n            });\r\n        }\r\n\r\n        this.render();\r\n        this.addToDefaultGroup();\r\n\r\n    }\r\n\r\n    getCopy(klass: Klass): RuntimeObject {\r\n\r\n        let ro: RuntimeObject = new RuntimeObject(klass);\r\n        let rh: CircleHelper = new CircleHelper(this.mx, this.my, this.r, this.worldHelper.interpreter, ro);\r\n        ro.intrinsicData[\"Actor\"] = rh;\r\n\r\n        rh.copyFrom(this);\r\n        rh.render();\r\n\r\n        return ro;\r\n    }\r\n\r\n\r\n    render(): void {\r\n\r\n        let g: PIXI.Graphics = <any>this.displayObject;\r\n\r\n        if (this.displayObject == null) {\r\n            g = new PIXI.Graphics();\r\n            this.displayObject = g;\r\n            this.worldHelper.stage.addChild(g);\r\n\r\n        } else {\r\n            g.clear();\r\n        }\r\n\r\n        if (this.fillColor != null) {\r\n            g.beginFill(this.fillColor, this.fillAlpha);\r\n        }\r\n        if (this.borderColor != null) {\r\n            g.lineStyle(this.borderWidth, this.borderColor, this.borderAlpha, 0.5)\r\n        }\r\n\r\n        g.drawCircle(this.mx, this.my, this.r);\r\n        g.closePath();\r\n\r\n        if (this.fillColor != null) {\r\n            g.endFill();\r\n        }\r\n    };\r\n\r\n    setRadius(r: number) {\r\n        this.r = r;\r\n        this.render();\r\n    }\r\n\r\n    isOutsideView() {\r\n\r\n        return super.isOutsideView();\r\n\r\n    }\r\n\r\n    containsPoint(x: number, y: number) {\r\n\r\n        if (!this.displayObject.getBounds().contains(x, y)) return false;\r\n\r\n        let p: PIXI.Point = new PIXI.Point(x, y);\r\n        let m = this.displayObject.transform.worldTransform;\r\n\r\n        m.applyInverse(p, p);\r\n\r\n        let dx = p.x - this.mx;\r\n        let dy = p.y - this.my;\r\n        return dx * dx + dy * dy <= this.r * this.r;\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n}\r\n","import { Klass, Visibility } from \"../../compiler/types/Class.js\";\r\nimport { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Method, Parameterlist, Attribute } from \"../../compiler/types/Types.js\";\r\nimport { intPrimitiveType, doublePrimitiveType, voidPrimitiveType, stringPrimitiveType, booleanPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { ShapeHelper } from \"./Shape.js\";\r\nimport { ColorHelper } from \"./ColorHelper.js\";\r\nimport { FilledShapeHelper } from \"./FilledShape.js\";\r\nimport { WorldHelper, WorldClass } from \"./World.js\";\r\n\r\nexport type ColorClassIntrinsicData = {\r\n    red: number,\r\n    green: number,\r\n    blue: number,\r\n    hex: string\r\n}\r\n\r\nexport class ColorClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Color\", module, \"Farbe\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n\r\n        for (let colorName in ColorHelper.predefinedColors) {\r\n\r\n            let intColor = ColorHelper.predefinedColors[colorName];\r\n\r\n            let r: RuntimeObject = new RuntimeObject(this);\r\n\r\n            let red = (intColor & 0xff0000) >> 16;\r\n            let green = (intColor & 0xff00) >> 8;\r\n            let blue = (intColor & 0xff);\r\n\r\n            let id: ColorClassIntrinsicData = {\r\n                red: red,\r\n                green: green,\r\n                blue: blue,\r\n                hex: ColorHelper.intColorToHexRGB(intColor)\r\n            }\r\n\r\n            r.intrinsicData = id;\r\n\r\n            this.addAttribute(new Attribute(colorName, this,\r\n                (value) => { value.value = r }, true, Visibility.public, true,\r\n                \"Die Farbe \" + colorName + \" (\" + ColorHelper.intColorToHexRGB(intColor) + \" oder \" + ColorHelper.intColorToRGB(intColor)));\r\n        }\r\n\r\n        this.staticClass.classObject = new RuntimeObject(this.staticClass);\r\n        this.staticClass.classObject.initializeAttributeValues();\r\n\r\n        this.addMethod(new Method(\"Color\", new Parameterlist([\r\n            { identifier: \"red\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"green\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"blue\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let red: number = Math.trunc(parameters[1].value);\r\n                let green: number = Math.trunc(parameters[2].value);\r\n                let blue: number = Math.trunc(parameters[3].value);\r\n\r\n\r\n                let intrinsicData: ColorClassIntrinsicData = {\r\n                    red: red,\r\n                    green: green,\r\n                    blue: blue,\r\n                    hex: \"rgb(\" + red + \", \" + green + \", \" + blue + \")\"\r\n                };\r\n\r\n                o.intrinsicData = intrinsicData;\r\n\r\n            }, false, false, 'Instanziert eine neue Farbe. Red, green und blue sind die Farbanteile, jeweils als integer-Zahlen im Bereich von 0 bis 255.'\r\n            , true));\r\n\r\n        this.addMethod(new Method(\"randomColor\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                return Math.floor(Math.random() * 0xffffff);\r\n\r\n            }, false, true, 'Gibt eine zufällige Farbe (ohne Transparenz) zurück.'\r\n            , true));\r\n\r\n        this.addMethod(new Method(\"randomColor\", new Parameterlist([\r\n            { identifier: \"minimumRGBValue\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let min: number = parameters[1].value;\r\n                if (min < 0) min = 0;\r\n                if (min > 255) min = 255;\r\n\r\n                let r: number = Math.floor(Math.random() * (256 - min)) + min;\r\n                let g: number = Math.floor(Math.random() * (256 - min)) + min;\r\n                let b: number = Math.floor(Math.random() * (256 - min)) + min;\r\n\r\n                return 0x10000 * r + 0x100 * g + b;\r\n\r\n            }, false, true, 'Gibt eine zufällige Farbe (ohne Transparenz) zurück. Min ist der Mindestwert für den Rot-, Grün- und Blauanteil, wobei jeder der Anteile und daher auch min zwischen 0 und 255 (jeweils einschließlich) liegen muss.'\r\n            , true));\r\n\r\n        this.addMethod(new Method(\"randomColor\", new Parameterlist([\r\n            { identifier: \"minimumRGBValue\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"maximumRGBValue\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let min: number = parameters[1].value;\r\n                let max: number = parameters[1].value;\r\n                if (min < 0) min = 0;\r\n                if (min > 255) min = 255;\r\n                if (max < 0) max = 0;\r\n                if (max > 255) max = 255;\r\n\r\n                if(max < min){\r\n                    let z = max;\r\n                    max = min;\r\n                    min = z;\r\n                }\r\n\r\n                let r: number = Math.floor(Math.random() * (max - min + 1)) + min;\r\n                let g: number = Math.floor(Math.random() * (max - min + 1)) + min;\r\n                let b: number = Math.floor(Math.random() * (max - min + 1)) + min;\r\n\r\n                return 0x10000 * r + 0x100 * g + b;\r\n\r\n            }, false, true, 'Gibt eine zufällige Farbe (ohne Transparenz) zurück. Min ist der Mindestwert für den Rot-, Grün- und Blauanteil, max der Höchstwert, wobei jeder der Anteile und daher auch min zwischen 0 und 255 (jeweils einschließlich) liegen muss.'\r\n            , true));\r\n\r\n        this.addMethod(new Method(\"toString\", new Parameterlist([\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                return (<ColorClassIntrinsicData>(o.intrinsicData)).hex;\r\n\r\n            }, false, false, 'Verwandelt die Farbe in einen String.', false));\r\n\r\n        this.addMethod(new Method(\"equals\", new Parameterlist([\r\n            { identifier: \"otherColor\", type: this, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let o1: RuntimeObject = parameters[1].value;\r\n\r\n                let d = <ColorClassIntrinsicData>(o.intrinsicData);\r\n                let d1 = <ColorClassIntrinsicData>(o1.intrinsicData);\r\n\r\n                return (d.red == d1.red && d.green == d1.green && d.blue == d1.blue);\r\n\r\n            }, false, false, 'Vergleicht zwei Farben', false));\r\n\r\n        this.addMethod(new Method(\"getRed\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                return (<ColorClassIntrinsicData>(o.intrinsicData)).red;\r\n\r\n            }, false, false, 'Gibt den Rotanteil der Farbe zurück (0 - 255).', false));\r\n\r\n        this.addMethod(new Method(\"getGreen\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                return (<ColorClassIntrinsicData>(o.intrinsicData)).green;\r\n\r\n            }, false, false, 'Gibt den Grünanteil der Farbe zurück (0 - 255).', false));\r\n\r\n        this.addMethod(new Method(\"getBlue\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                return (<ColorClassIntrinsicData>(o.intrinsicData)).blue;\r\n\r\n            }, false, false, 'Gibt den Blauanteil der Farbe zurück (0 - 255).', false));\r\n\r\n        this.addMethod(new Method(\"fromRGB\", new Parameterlist([\r\n            { identifier: \"red\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"green\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"blue\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let r: number = parameters[1].value;\r\n                let g: number = parameters[2].value;\r\n                let b: number = parameters[3].value;\r\n                return (r * 0x10000 + g * 0x100 + b);\r\n\r\n            }, false, true, 'Berechnet aus Rot-, Grün- und Blauwert (alle zwischen 0 und 255) die Farbe.', false));\r\n\r\n        this.addMethod(new Method(\"fromRGBA\", new Parameterlist([\r\n            { identifier: \"red\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"green\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"blue\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"alpha\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let r: number = parameters[1].value;\r\n                let g: number = parameters[2].value;\r\n                let b: number = parameters[3].value;\r\n                let a: number = parameters[4].value;\r\n                let color: string = (r * 0x1000000 + g * 0x10000 + b * 0x100 + Math.floor(a * 255)).toString(16);\r\n                while (color.length < 8) color = \"0\" + color;\r\n\r\n                return \"#\" + color;\r\n\r\n            }, false, true, 'Berechnet aus Rot-, Grün- und Blauwert (alle zwischen 0 und 255) sowie Alpha-Wert (zwischen 0 und 1) die Farbe.', false));\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass } from \"../../compiler/types/Class.js\";\r\nimport { doublePrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { FilledShapeHelper } from \"./FilledShape.js\";\r\nimport { WorldHelper } from \"./World.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { ShapeHelper } from \"./Shape.js\";\r\n\r\nexport class EllipseClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Ellipse\", module, \"Ellipse\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"FilledShape\"));\r\n\r\n        // this.addAttribute(new Attribute(\"PI\", doublePrimitiveType, (object) => { return Math.PI }, true, Visibility.public, true, \"Die Kreiszahl Pi (3.1415...)\"));\r\n\r\n        this.addMethod(new Method(\"Ellipse\", new Parameterlist([\r\n            { identifier: \"mx\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"my\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"rx\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"ry\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let mx: number = parameters[1].value;\r\n                let my: number = parameters[2].value;\r\n                let rx: number = parameters[3].value;\r\n                let ry: number = parameters[4].value;\r\n\r\n                let rh = new EllipseHelper(mx, my, rx, ry, module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = rh;\r\n\r\n            }, false, false, 'Instanziert eine neue Ellipse. (mx, my) ist der Mittelpunt, rx und ry sind ihre Radien.', true));\r\n\r\n            this.addMethod(new Method(\"setRadiusX\", new Parameterlist([\r\n                { identifier: \"rx\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            ]), null,\r\n                (parameters) => {\r\n    \r\n                    let o: RuntimeObject = parameters[0].value;\r\n                    let r: number = parameters[1].value;\r\n                    let sh: EllipseHelper = o.intrinsicData[\"Actor\"];\r\n    \r\n                    sh.setRadiusX(r);\r\n    \r\n                }, false, false, 'Setzt den x-Radius der Ellipse\"', false));\r\n\r\n            this.addMethod(new Method(\"setRadiusY\", new Parameterlist([\r\n                { identifier: \"ry\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            ]), null,\r\n                (parameters) => {\r\n    \r\n                    let o: RuntimeObject = parameters[0].value;\r\n                    let r: number = parameters[1].value;\r\n                    let sh: EllipseHelper = o.intrinsicData[\"Actor\"];\r\n    \r\n                    sh.setRadiusY(r);\r\n    \r\n                }, false, false, 'Setzt den y-Radius der Ellipse\"', false));\r\n    \r\n                this.addMethod(new Method(\"copy\", new Parameterlist([\r\n                ]), this,\r\n                    (parameters) => {\r\n        \r\n                        let o: RuntimeObject = parameters[0].value;\r\n                        let sh: EllipseHelper = o.intrinsicData[\"Actor\"];\r\n        \r\n                        if (sh.testdestroyed(\"copy\")) return;\r\n        \r\n                        return sh.getCopy(<Klass>o.class);\r\n        \r\n                    }, false, false, 'Erstellt eine Kopie des Ellipse-Objekts und git sie zurück.', false));\r\n    \r\n\r\n    }\r\n\r\n}\r\n\r\nexport class EllipseHelper extends FilledShapeHelper {\r\n\r\n    constructor(public mx: number, public my: number, public rx: number, public ry: number,\r\n        interpreter: Interpreter, runtimeObject: RuntimeObject) {\r\n        super(interpreter, runtimeObject);\r\n        this.centerXInitial = mx;\r\n        this.centerYInitial = my;\r\n\r\n        this.hitPolygonInitial = [];\r\n\r\n        let deltaAlpha = Math.PI/8;\r\n        for(let i = 0; i < 16; i++){\r\n            let alpha = deltaAlpha * i;\r\n            this.hitPolygonInitial.push({\r\n                x: mx + rx*Math.cos(alpha),\r\n                y: my + ry*Math.sin(alpha)\r\n            });\r\n        }\r\n\r\n        this.render();\r\n        this.addToDefaultGroup();\r\n\r\n    }\r\n\r\n    getCopy(klass: Klass): RuntimeObject {\r\n\r\n        let ro: RuntimeObject = new RuntimeObject(klass);\r\n        let rh: EllipseHelper = new EllipseHelper(this.mx, this.my, this.rx, this.ry, this.worldHelper.interpreter, ro);\r\n        ro.intrinsicData[\"Actor\"] = rh;\r\n\r\n        rh.copyFrom(this);\r\n        rh.render();\r\n\r\n        return ro;\r\n    }\r\n\r\n    \r\n    render(): void {\r\n\r\n        let g: PIXI.Graphics = <any>this.displayObject;\r\n\r\n        if (this.displayObject == null) {\r\n            g = new PIXI.Graphics();\r\n            this.displayObject = g;\r\n            this.worldHelper.stage.addChild(g);\r\n\r\n        } else {\r\n            g.clear();\r\n        }\r\n\r\n        if (this.fillColor != null) {\r\n            g.beginFill(this.fillColor, this.fillAlpha);\r\n        }\r\n        if (this.borderColor != null) {\r\n            g.lineStyle(this.borderWidth, this.borderColor, this.borderAlpha, 0.5)\r\n        }\r\n\r\n        g.drawEllipse(this.mx, this.my, this.rx, this.ry);\r\n        g.closePath();\r\n\r\n        if (this.fillColor != null) {\r\n            g.endFill();\r\n        }\r\n    };\r\n\r\n    setRadiusX(r: number){\r\n        this.rx = r;\r\n        this.render();\r\n    }\r\n\r\n    setRadiusY(r: number){\r\n        this.rx = r;\r\n        this.render();\r\n    }\r\n\r\n    isOutsideView() {\r\n\r\n        return super.isOutsideView();\r\n\r\n    }\r\n\r\n    containsPoint(x: number, y: number) {\r\n\r\n        if (!this.displayObject.getBounds().contains(x, y)) return false;\r\n\r\n        let p: PIXI.Point = new PIXI.Point(x, y);\r\n        let m = this.displayObject.transform.worldTransform;\r\n\r\n        m.applyInverse(p, p);\r\n\r\n        let dx = p.x - this.mx;\r\n        let dy = p.y - this.my;\r\n        return dx*dx/(this.rx*this.rx) + dy*dy/(this.ry*this.ry) <= 1;\r\n    \r\n    }\r\n    \r\n\r\n\r\n\r\n}\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass, Visibility } from \"../../compiler/types/Class.js\";\r\nimport { doublePrimitiveType, intPrimitiveType, booleanPrimitiveType, voidPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, Value, Attribute, Type } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { FilledShapeHelper } from \"./FilledShape.js\";\r\nimport { WorldHelper } from \"./World.js\";\r\nimport { EnumRuntimeObject } from \"../../compiler/types/Enum.js\";\r\nimport { ShapeHelper, ShapeClass } from \"./Shape.js\";\r\nimport { HitPolygonStore } from \"./PolygonStore.js\";\r\nimport { ArrayType } from \"../../compiler/types/Array.js\";\r\nimport { Point, PRECISION, TilingSprite } from \"pixi.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\n\r\n\r\nexport class CollisionPairClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"CollisionPair\", module, \"Speichert die Referenzen auf zwei Figuren, die gerade kollidiert sind. Diese Klasse von den Kollisionsmethden der Klasse Group benutzt.\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n\r\n        let shapeType = module.typeStore.getType(\"Shape\");\r\n\r\n        this.addAttribute(new Attribute(\"shapeA\", shapeType,\r\n            (value) => {\r\n\r\n                let rto: RuntimeObject = value.object;\r\n                value.value = rto.intrinsicData[\"ShapeA\"];\r\n\r\n            }, false, Visibility.public, true, \"Erstes an der Kollision beteiligtes Shape\"));\r\n\r\n        this.addAttribute(new Attribute(\"shapeB\", shapeType,\r\n            (value) => {\r\n\r\n                let rto: RuntimeObject = value.object;\r\n                value.value = rto.intrinsicData[\"ShapeB\"];\r\n\r\n            }, false, Visibility.public, true, \"Zweites an der Kollision beteiligtes Shape\"));\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\nexport class GroupClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Group\", module, \"Klasse zum Gruppieren grafischer Elemente. Die gruppierten Elemente können miteinander verschoben, gedreht, gestreckt sowie ein- und ausgeblendet werden. Zudem besitzt die Klasse Methoden zur schnellen Erkennung von Kollision mit Elementen außerhalb der Gruppe.\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Shape\"));\r\n\r\n        let collisionPairType = module.typeStore.getType(\"CollisionPair\");\r\n        let collisionPairArrayType = new ArrayType(collisionPairType);\r\n        let shapeType = module.typeStore.getType(\"Shape\");\r\n\r\n\r\n        this.addMethod(new Method(\"Group\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let rh = new GroupHelper(module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = rh;\r\n\r\n            }, false, false, 'Instanziert eine neue Gruppe. Ihr können mit der Methode add Elemente hinzugefügt werden, die dann mit der Gruppe verschoben, gedreht, ... werden.', true));\r\n\r\n        this.addMethod(new Method(\"Group\", new Parameterlist([\r\n            { identifier: \"shapes\", type: new ArrayType(module.typeStore.getType(\"Shape\")), declaration: null, usagePositions: null, isFinal: true, isEllipsis: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let shapes: Value[] = parameters[1].value;\r\n\r\n                let rh = new GroupHelper(module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = rh;\r\n\r\n                for (let s of shapes) {\r\n                    rh.add(s.value);\r\n                }\r\n\r\n            }, false, false, 'Instanziert eine neue Gruppe und fügt die übergebenen Grafikobjekte der Gruppe hinzu. Der Gruppe können mit der Methode add weitere Grafikobjekte hinzugefügt werden, die dann mit der Gruppe verschoben, gedreht, ... werden.', true));\r\n\r\n        this.addMethod(new Method(\"add\", new Parameterlist([\r\n            { identifier: \"shapes\", type: new ArrayType(shapeType), declaration: null, usagePositions: null, isFinal: true, isEllipsis: true },\r\n\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let shapes: Value[] = parameters[1].value;\r\n                let sh: GroupHelper = <GroupHelper>o.intrinsicData[\"Actor\"];\r\n\r\n                for (let s of shapes) {\r\n                    sh.add(s.value);\r\n                }\r\n\r\n            }, false, false, 'Fügt die Grafikobjekte der Gruppe hinzu.', false));\r\n\r\n        this.addMethod(new Method(\"get\", new Parameterlist([\r\n            { identifier: \"index\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n\r\n        ]), shapeType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let index: number = parameters[1].value;\r\n                let sh: GroupHelper = <GroupHelper>o.intrinsicData[\"Actor\"];\r\n\r\n                return sh.getElement(index);\r\n\r\n            }, false, false, 'Gibt das Grafikelement der Gruppe mit dem entsprechenden Index zurück. VORSICHT: Das erste Element hat Index 0!', false));\r\n\r\n        this.addMethod(new Method(\"remove\", new Parameterlist([\r\n            { identifier: \"index\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let index: number = parameters[1].value;\r\n                let sh: GroupHelper = <GroupHelper>o.intrinsicData[\"Actor\"];\r\n\r\n                sh.removeElementAt(index);\r\n\r\n            }, false, false, 'Entfernt das Grafikelement aus der Gruppe mit dem entsprechenden Index, zerstört es jedoch nicht. VORSICHT: Das erste Element hat Index 0!', false));\r\n\r\n        this.addMethod(new Method(\"remove\", new Parameterlist([\r\n            { identifier: \"shape\", type: shapeType, declaration: null, usagePositions: null, isFinal: true },\r\n\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let shape: RuntimeObject = parameters[1].value;\r\n                let sh: GroupHelper = <GroupHelper>o.intrinsicData[\"Actor\"];\r\n\r\n                sh.remove(shape);\r\n\r\n            }, false, false, 'Entfernt das übergebene Grafikelement aus der Gruppe, zerstört es jedoch nicht.', false));\r\n\r\n\r\n        let shapeArrayType = new ArrayType(shapeType);\r\n\r\n        this.addMethod(new Method(\"getCollidingShapes\", new Parameterlist([\r\n            { identifier: \"shape\", type: module.typeStore.getType(\"Shape\"), declaration: null, usagePositions: null, isFinal: true },\r\n\r\n        ]), shapeArrayType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let shape: RuntimeObject = parameters[1].value;\r\n                let sh: GroupHelper = <GroupHelper>o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getCollidingShapes\") || shape == null) return [];\r\n\r\n                let shapes: RuntimeObject[] = sh.getCollidingObjects(shape);\r\n\r\n                let values: Value[] = [];\r\n                for (let sh of shapes) {\r\n                    values.push({\r\n                        type: shapeType,\r\n                        value: sh\r\n                    })\r\n\r\n                }\r\n\r\n                return values;\r\n\r\n            }, false, false, 'Gibt die Objekte der Gruppe zurück, die mit dem übergebenen Shape kollidieren.', false));\r\n\r\n        this.addMethod(new Method(\"getCollisionPairs\", new Parameterlist([\r\n            { identifier: \"group\", type: this, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"maxOneCollisionPerShape\", type: booleanPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), collisionPairArrayType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let group2: RuntimeObject = parameters[1].value;\r\n                let maxOneCollisionPerShape: boolean = parameters[2].value;\r\n                let sh: GroupHelper = <GroupHelper>o.intrinsicData[\"Actor\"];\r\n                let groupHelper2: GroupHelper = <GroupHelper>group2.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getCollidingShapes\")) return;\r\n\r\n                return sh.getCollidingObjects2(groupHelper2, collisionPairType, maxOneCollisionPerShape);\r\n\r\n            }, false, false, 'Überprüft, welche Objekte der Gruppe mit welchen der anderen kollidieren.' +\r\n            ' Gibt für jede Kollision ein Collisionpair-Objekt zurück, das die beiden kollidierenden Objekte enthält.' +\r\n        ' Falls maxOneCollisionPerShape == true ist jedes Objekt dabei aber nur in max. einem Collisionpair-Objekt enthalten.', false));\r\n\r\n\r\n        this.addMethod(new Method(\"size\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: GroupHelper = <GroupHelper>o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"size\")) return;\r\n\r\n                return sh.shapes.length;\r\n\r\n            }, false, false, 'Gibt zurück, wie viele Elemente in der Gruppe enthalten sind.', false));\r\n\r\n\r\n        (<Klass>shapeType).addMethod(new Method(\"getCollidingShapes\", new Parameterlist([\r\n            { identifier: \"group\", type: this, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), shapeArrayType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let group: RuntimeObject = parameters[1].value;\r\n                let groupHelper: GroupHelper = group.intrinsicData[\"Actor\"];\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getCollidingShapes\")) return;\r\n\r\n                return sh.getCollidingShapes(groupHelper, shapeType);\r\n\r\n            }, false, false, 'Gibt alle Shapes der Gruppe group zurück, die mit dem Shape kollidieren.', false));\r\n\r\n        this.addMethod(new Method(\"copy\", new Parameterlist([\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: GroupHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"copy\")) return;\r\n\r\n                return sh.getCopy(<Klass>o.class);\r\n\r\n            }, false, false, 'Erstellt eine Kopie des Group-Objekts (und aller seiner enthaltenen Grafikobjekte!) und git sie zurück.', false));\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\nexport class GroupHelper extends ShapeHelper {\r\n\r\n    shapes: RuntimeObject[] = [];\r\n\r\n    constructor(interpreter: Interpreter, runtimeObject: RuntimeObject) {\r\n        super(interpreter, runtimeObject);\r\n        this.displayObject = new PIXI.Container();\r\n        this.worldHelper.stage.addChild(this.displayObject);\r\n        this.addToDefaultGroup();\r\n\r\n    }\r\n\r\n    removeElementAt(index: number) {\r\n        if(index < 0 || index >= this.shapes.length){\r\n            this.worldHelper.interpreter.throwException(\"In der Gruppe gibt es kein Element mit Index \" + index + \".\");\r\n            return;\r\n        }\r\n\r\n        let shape = this.shapes[index];\r\n        this.remove(shape);\r\n    }\r\n\r\n    getElement(index: number): RuntimeObject {\r\n        if(index < 0 || index >= this.shapes.length){\r\n            this.worldHelper.interpreter.throwException(\"In der Gruppe gibt es kein Element mit Index \" + index + \".\");\r\n            return;\r\n        }\r\n        return this.shapes[index];\r\n    }\r\n\r\n    getCopy(klass: Klass): RuntimeObject {\r\n\r\n        let ro: RuntimeObject = new RuntimeObject(klass);\r\n        let groupHelperCopy: GroupHelper = new GroupHelper(this.worldHelper.interpreter, ro);\r\n        ro.intrinsicData[\"Actor\"] = groupHelperCopy;\r\n\r\n        for (let ro of this.shapes) {\r\n            let shapeHelper: ShapeHelper = ro.intrinsicData[\"Actor\"];\r\n\r\n            let roCopy: RuntimeObject = shapeHelper.getCopy(<Klass>ro.class)\r\n            let shapeHelperCopy: ShapeHelper = roCopy.intrinsicData[\"Actor\"];\r\n\r\n            groupHelperCopy.shapes.push(roCopy);\r\n\r\n            shapeHelperCopy.belongsToGroup = groupHelperCopy;\r\n\r\n            (<PIXI.Container>groupHelperCopy.displayObject).addChild(shapeHelperCopy.displayObject);\r\n\r\n        }\r\n\r\n        groupHelperCopy.copyFrom(this);\r\n        groupHelperCopy.render();\r\n\r\n        return ro;\r\n    }\r\n\r\n    setTimerPaused(tp: boolean) {\r\n        this.timerPaused = tp;\r\n\r\n        for (let shape of this.shapes) {\r\n            let sh: ShapeHelper = <ShapeHelper>shape.intrinsicData[\"Actor\"];\r\n            sh.timerPaused = tp;\r\n        }\r\n\r\n    }\r\n\r\n\r\n    add(shape: RuntimeObject) {\r\n\r\n        let shapeHelper: ShapeHelper = <ShapeHelper>shape.intrinsicData[\"Actor\"];\r\n\r\n        if (shapeHelper.isDestroyed) {\r\n            this.worldHelper.interpreter.throwException(\"Ein schon zerstörtes Objekt kann keiner Gruppe hinzugefügt werden.\");\r\n            return;\r\n        }\r\n\r\n        this.shapes.push(shape);\r\n\r\n        if (shapeHelper.belongsToGroup != null) {\r\n            shapeHelper.belongsToGroup.remove(shape);\r\n        }\r\n\r\n        shapeHelper.belongsToGroup = this;\r\n        \r\n        let inverse = new PIXI.Matrix().copyFrom(this.displayObject.transform.worldTransform);\r\n        inverse.invert();\r\n        shapeHelper.displayObject.localTransform.prepend(inverse.prepend(this.worldHelper.stage.localTransform));     \r\n        shapeHelper.displayObject.transform.onChange();   \r\n        \r\n        (<PIXI.Container>this.displayObject).addChild(shapeHelper.displayObject);\r\n        shapeHelper.displayObject.updateTransform();\r\n\r\n        let xSum: number = 0;\r\n        let ySum: number = 0;\r\n\r\n        for (let shape of this.shapes) {\r\n            let sh: ShapeHelper = <ShapeHelper>shape.intrinsicData[\"Actor\"];\r\n            xSum += sh.getCenterX();\r\n            ySum += sh.getCenterY();\r\n        }\r\n\r\n        let x = xSum / this.shapes.length;\r\n        let y = ySum / this.shapes.length;\r\n\r\n        this.displayObject.updateTransform();\r\n        let p1: PIXI.Point = this.displayObject.worldTransform.applyInverse(new PIXI.Point(x, y));\r\n\r\n        this.centerXInitial = p1.x;\r\n        this.centerYInitial = p1.y;\r\n    }\r\n\r\n    public remove(shape: RuntimeObject) {\r\n        let index = this.shapes.indexOf(shape);\r\n        if (index >= 0) {\r\n            this.shapes.splice(index, 1);\r\n            \r\n            let shapeHelper: ShapeHelper = shape.intrinsicData['Actor'];\r\n            \r\n            let transform = new PIXI.Matrix().copyFrom(shapeHelper.displayObject.transform.worldTransform);\r\n            \r\n            (<PIXI.Container>this.displayObject).removeChildAt(index);\r\n\r\n            let inverseStageTransform = new PIXI.Matrix().copyFrom(this.worldHelper.stage.localTransform);\r\n            inverseStageTransform.invert();\r\n            shapeHelper.displayObject.localTransform.identity();\r\n            shapeHelper.displayObject.localTransform.append(transform.prepend(inverseStageTransform));\r\n            shapeHelper.displayObject.transform.onChange();\r\n            this.worldHelper.stage.addChild(shapeHelper.displayObject);\r\n            shapeHelper.displayObject.updateTransform();\r\n            shapeHelper.belongsToGroup = null;\r\n        }\r\n    }\r\n\r\n    public render(): void {\r\n    }\r\n\r\n    public destroy(): void {\r\n        for (let shape of this.shapes.slice(0)) {\r\n            let sh: ShapeHelper = <ShapeHelper>shape.intrinsicData[\"Actor\"];\r\n            sh.destroy();\r\n        }\r\n        super.destroy();\r\n    }\r\n\r\n    collidesWith(shapeHelper: ShapeHelper) {\r\n        for (let shape of this.shapes) {\r\n            let sh: ShapeHelper = <ShapeHelper>shape.intrinsicData[\"Actor\"];\r\n            if (sh.collidesWith(shapeHelper)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    setHitPolygonDirty(dirty: boolean){\r\n        for (let shape of this.shapes) {\r\n            let sh: ShapeHelper = <ShapeHelper>shape.intrinsicData[\"Actor\"];\r\n            sh.setHitPolygonDirty(dirty);\r\n        }\r\n    }\r\n\r\n    containsPoint(x: number, y: number) {\r\n        for (let shape of this.shapes) {\r\n            let sh: ShapeHelper = <ShapeHelper>shape.intrinsicData[\"Actor\"];\r\n            if (sh.containsPoint(x, y)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    getCollidingObjects(shape: RuntimeObject): RuntimeObject[] {\r\n\r\n        let collidingShapes: RuntimeObject[] = [];\r\n        let shapeHelper: ShapeHelper = <ShapeHelper>shape.intrinsicData[\"Actor\"];\r\n\r\n        for (let s of this.shapes) {\r\n            let sh: ShapeHelper = <ShapeHelper>s.intrinsicData[\"Actor\"];\r\n            if (sh.collidesWith(shapeHelper)) {\r\n                collidingShapes.push(s);\r\n            }\r\n        }\r\n\r\n        return collidingShapes;\r\n\r\n    }\r\n\r\n    getCollidingObjects2(groupHelper2: GroupHelper, collisionPairType: Type,\r\n        maxOneCollisionPerShape: boolean): Value[] {\r\n\r\n        let collisionPairs: Value[] = [];\r\n\r\n        let alreadyCollidedHelpers2: Map<ShapeHelper, boolean> = new Map();\r\n\r\n        for (let shape1 of this.shapes) {\r\n            let shapeHelper1: ShapeHelper = <ShapeHelper>shape1.intrinsicData[\"Actor\"];\r\n            for (let shape2 of groupHelper2.shapes) {\r\n                let shapeHelper2: ShapeHelper = <ShapeHelper>shape2.intrinsicData[\"Actor\"];\r\n                if (shapeHelper1.collidesWith(shapeHelper2)) {\r\n\r\n                    if (!maxOneCollisionPerShape || alreadyCollidedHelpers2.get(shapeHelper2) == null) {\r\n                        alreadyCollidedHelpers2.set(shapeHelper2, true);\r\n                        let rto: RuntimeObject = new RuntimeObject(<Klass>collisionPairType);\r\n                        rto.initializeAttributeValues();\r\n\r\n                        rto.intrinsicData[\"ShapeA\"] = shapeHelper1.runtimeObject;\r\n                        rto.intrinsicData[\"ShapeB\"] = shapeHelper2.runtimeObject;\r\n                        collisionPairs.push({\r\n                            type: collisionPairType,\r\n                            value: rto\r\n                        });\r\n                    }\r\n\r\n                    if (maxOneCollisionPerShape) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return collisionPairs;\r\n\r\n    }\r\n\r\n\r\n}\r\n","import { Type, Method, Parameterlist, Value, Attribute } from \"../../compiler/types/Types.js\";\r\nimport { Klass, Visibility } from \"../../compiler/types/Class.js\";\r\nimport { stringPrimitiveType, doublePrimitiveType, floatPrimitiveType, intPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Module } from \"../../compiler/parser/Module.js\";\r\nimport { PrintManager } from \"../../main/gui/PrintManager.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\n\r\nexport class KeyClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n        super(\"Key\", module, \"Aufzählung von Sondertasten zur Benutzung in den Methoden Actor.onKeyUp, Actor.onKeyTyped und Actor.onKeyDown\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n\r\n        this.addAttribute(new Attribute(\"ArrowUp\", stringPrimitiveType, (value) => { value.value = \"ArrowUp\" }, true, Visibility.public, true, \"\"));\r\n        this.addAttribute(new Attribute(\"ArrowDown\", stringPrimitiveType, (value) => { value.value = \"ArrowDown\" }, true, Visibility.public, true, \"\"));\r\n        this.addAttribute(new Attribute(\"ArrowLeft\", stringPrimitiveType, (value) => { value.value = \"ArrowLeft\" }, true, Visibility.public, true, \"\"));\r\n        this.addAttribute(new Attribute(\"ArrowRight\", stringPrimitiveType, (value) => { value.value = \"ArrowRight\" }, true, Visibility.public, true, \"\"));\r\n        this.addAttribute(new Attribute(\"Enter\", stringPrimitiveType, (value) => { value.value = \"Enter\" }, true, Visibility.public, true, \"\"));\r\n        this.addAttribute(new Attribute(\"Space\", stringPrimitiveType, (value) => { value.value = \" \" }, true, Visibility.public, true, \"\"));\r\n        this.addAttribute(new Attribute(\"Shift\", stringPrimitiveType, (value) => { value.value = \"Shift\" }, true, Visibility.public, true, \"\"));\r\n        this.addAttribute(new Attribute(\"Alt\", stringPrimitiveType, (value) => { value.value = \"Alt\" }, true, Visibility.public, true, \"\"));\r\n        this.addAttribute(new Attribute(\"Strg\", stringPrimitiveType, (value) => { value.value = \"Control\" }, true, Visibility.public, true, \"\"));\r\n        this.addAttribute(new Attribute(\"PageUp\", stringPrimitiveType, (value) => { value.value = \"PageUp\" }, true, Visibility.public, true, \"\"));\r\n        this.addAttribute(new Attribute(\"PageDown\", stringPrimitiveType, (value) => { value.value = \"PageDown\" }, true, Visibility.public, true, \"\"));\r\n        this.addAttribute(new Attribute(\"Backspace\", stringPrimitiveType, (value) => { value.value = \"Backspace\" }, true, Visibility.public, true, \"\"));\r\n        this.addAttribute(new Attribute(\"Escape\", stringPrimitiveType, (value) => { value.value = \"Escape\" }, true, Visibility.public, true, \"\"));\r\n        this.addAttribute(new Attribute(\"Entf\", stringPrimitiveType, (value) => { value.value = \"Delete\" }, true, Visibility.public, true, \"\"));\r\n        this.addAttribute(new Attribute(\"Einf\", stringPrimitiveType, (value) => { value.value = \"Insert\" }, true, Visibility.public, true, \"\"));\r\n        this.addAttribute(new Attribute(\"Ende\", stringPrimitiveType, (value) => { value.value = \"End\" }, true, Visibility.public, true, \"\"));\r\n\r\n        this.staticClass.classObject = new RuntimeObject(this.staticClass);\r\n        this.staticClass.classObject.initializeAttributeValues();\r\n\r\n\r\n    }\r\n\r\n}","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass } from \"../../compiler/types/Class.js\";\r\nimport { doublePrimitiveType, intPrimitiveType, booleanPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, Value } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { FilledShapeHelper } from \"./FilledShape.js\";\r\nimport { ArrayType } from \"../../compiler/types/Array.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\n\r\nexport class PolygonClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Polygon\", module, \"Wahlweise geschlossenes Polygon (mit Füllung und Rand) oder offener Streckenzug\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"FilledShape\"));\r\n\r\n        // this.addAttribute(new Attribute(\"PI\", doublePrimitiveType, (object) => { return Math.PI }, true, Visibility.public, true, \"Die Kreiszahl Pi (3.1415...)\"));\r\n\r\n        this.addMethod(new Method(\"Polygon\", new Parameterlist([\r\n            { identifier: \"closeAndFill\", type: booleanPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"points\", type: new ArrayType(doublePrimitiveType), declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let closeAndFill: boolean = parameters[1].value;\r\n                let points: Value[] = parameters[2].value;\r\n\r\n                let pointsNumber: number[] = [];\r\n                points.forEach(v => pointsNumber.push(v.value));\r\n\r\n                let ph = new PolygonHelper(pointsNumber, closeAndFill, module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = ph;\r\n\r\n            }, false, false, 'Instanziert ein neues Polygon. Die Punkte werden als Array von double-Werten der Form {x1, y1, x2, y2, ...} übergeben.', true));\r\n\r\n        this.addMethod(new Method(\"Polygon\", new Parameterlist([\r\n            { identifier: \"closeAndFill\", type: booleanPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"points\", type: new ArrayType(doublePrimitiveType), declaration: null, usagePositions: null, isFinal: true, isEllipsis: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let closeAndFill: boolean = parameters[1].value;\r\n                let points: Value[] = parameters[2].value;\r\n\r\n                let pointsNumber: number[] = [];\r\n                points.forEach(v => pointsNumber.push(v.value));\r\n\r\n                let ph = new PolygonHelper(pointsNumber, closeAndFill, module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = ph;\r\n\r\n            }, false, false, 'Instanziert ein neues Polygon. Die Punkte werden als double-Werte der Form x1, y1, x2, y2, ... übergeben.', true));\r\n\r\n        this.addMethod(new Method(\"Polygon\", new Parameterlist([\r\n            { identifier: \"closeAndFill\", type: booleanPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let closeAndFill: boolean = parameters[1].value;\r\n\r\n                let pointsNumber: number[] = [];\r\n\r\n                let ph = new PolygonHelper(pointsNumber, closeAndFill, module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = ph;\r\n\r\n            }, false, false, 'Instanziert ein neues Polygon ohne Punkte.', true));\r\n\r\n\r\n        this.addMethod(new Method(\"addPoint\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n                let sh: PolygonHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"addPoint\")) return;\r\n\r\n                sh.addPoint(x, y);\r\n\r\n            }, false, false, 'Fügt dem Polygon einen Punkt hinzu.\"', false));\r\n\r\n        this.addMethod(new Method(\"addPoints\", new Parameterlist([\r\n            { identifier: \"points\", type: new ArrayType(doublePrimitiveType), declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let points: Value[] = parameters[1].value;\r\n                let sh: PolygonHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"addPoints\")) return;\r\n\r\n                let p: {x: number, y: number}[];\r\n\r\n                for(let i = 0; i < points.length - 1; i += 2){\r\n                        sh.addPoint(points[i].value, points[i+1].value, i >= points.length -2);\r\n                }\r\n\r\n            }, false, false, 'Fügt dem Polygon mehrere Punkte hinzu. Diese werden in einem double[] übergeben, das abwechselnd die x- und y-Koordinaten enthält.\"', false));\r\n\r\n            this.addMethod(new Method(\"copy\", new Parameterlist([\r\n            ]), this,\r\n                (parameters) => {\r\n    \r\n                    let o: RuntimeObject = parameters[0].value;\r\n                    let sh: PolygonHelper = o.intrinsicData[\"Actor\"];\r\n    \r\n                    if (sh.testdestroyed(\"copy\")) return;\r\n    \r\n                    return sh.getCopy(<Klass>o.class);\r\n    \r\n                }, false, false, 'Erstellt eine Kopie des Polygon-Objekts und git sie zurück.', false));\r\n\r\n     \r\n    }\r\n\r\n}\r\n\r\nexport class PolygonHelper extends FilledShapeHelper {\r\n\r\n    constructor(points: number[], private closeAndFill: boolean,\r\n        interpreter: Interpreter, runtimeObject: RuntimeObject) {\r\n        super(interpreter, runtimeObject);\r\n\r\n        let xSum = 0; let ySum = 0;\r\n        this.hitPolygonInitial = [];\r\n\r\n        for (let i = 0; i < points.length;) {\r\n            let x = points[i++];\r\n            let y = points[i++];\r\n            xSum += x;\r\n            ySum += y;\r\n            this.hitPolygonInitial.push({ x: x, y: y });\r\n        }\r\n\r\n        if (points.length > 1) {\r\n            this.centerXInitial = xSum / this.hitPolygonInitial.length;\r\n            this.centerYInitial = ySum / this.hitPolygonInitial.length;\r\n        }\r\n\r\n        if(!closeAndFill){\r\n            this.borderColor = 0x0000ff;\r\n        }\r\n\r\n        this.render();\r\n        this.addToDefaultGroup();\r\n\r\n    }\r\n\r\n    getCopy(klass: Klass): RuntimeObject {\r\n\r\n        let ro: RuntimeObject = new RuntimeObject(klass);\r\n        let rh: PolygonHelper = new PolygonHelper([], this.closeAndFill, this.worldHelper.interpreter, ro);\r\n        ro.intrinsicData[\"Actor\"] = rh;\r\n\r\n        rh.copyFrom(this);\r\n        rh.render();\r\n\r\n        return ro;\r\n    }\r\n\r\n\r\n    render(): void {\r\n\r\n        let g: PIXI.Graphics = <any>this.displayObject;\r\n\r\n        if (this.displayObject == null) {\r\n            g = new PIXI.Graphics();\r\n            this.displayObject = g;\r\n            this.worldHelper.stage.addChild(g);\r\n\r\n        } else {\r\n            g.clear();\r\n        }\r\n\r\n        if (this.fillColor != null && this.closeAndFill) {\r\n            g.beginFill(this.fillColor, this.fillAlpha);\r\n        }\r\n        if (this.borderColor != null) {\r\n            g.lineStyle(this.borderWidth, this.borderColor, this.borderAlpha, 0.5)\r\n        }\r\n\r\n        if(this.hitPolygonInitial.length > 0){\r\n            g.moveTo(this.hitPolygonInitial[0].x, this.hitPolygonInitial[0].y);\r\n            for (let i = 1; i < this.hitPolygonInitial.length; i++) {\r\n                g.lineTo(this.hitPolygonInitial[i].x, this.hitPolygonInitial[i].y);\r\n            }\r\n        }\r\n\r\n        if (this.closeAndFill) {\r\n            g.closePath();\r\n        }\r\n\r\n        if (this.fillColor != null && this.closeAndFill) {\r\n            g.endFill();\r\n        }\r\n    };\r\n\r\n    addPoint(x: number, y: number, render: boolean = true) {\r\n        let p = new PIXI.Point(x, y);\r\n        this.displayObject.transform.worldTransform.applyInverse(p, p);\r\n        this.hitPolygonInitial.push({ x: p.x, y: p.y });\r\n        this.hitPolygonDirty = true;\r\n        if (render) this.render();\r\n    }\r\n    \r\n    setPoint(x: number, y: number, index: number) {\r\n        if(index == 0 || index == 1){\r\n            this.hitPolygonInitial[index] = {x: x, y: y};\r\n            this.hitPolygonDirty = true;\r\n            this.render();\r\n        }\r\n    }\r\n\r\n    setPoints(x1: number, y1: number, x2: number, y2: number) {\r\n        this.hitPolygonInitial = [{x: x1,y: y1}, {x: x2,y: y2}];\r\n        this.hitPolygonDirty = true;\r\n        this.render();\r\n    }\r\n\r\n\r\n\r\n}\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass } from \"../../compiler/types/Class.js\";\r\nimport { doublePrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { FilledShapeHelper } from \"./FilledShape.js\";\r\nimport { WorldHelper } from \"./World.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\n\r\nexport class RectangleClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Rectangle\", module, \"Rechteck\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"FilledShape\"));\r\n\r\n        // this.addAttribute(new Attribute(\"PI\", doublePrimitiveType, (object) => { return Math.PI }, true, Visibility.public, true, \"Die Kreiszahl Pi (3.1415...)\"));\r\n\r\n        this.addMethod(new Method(\"Rectangle\", new Parameterlist([\r\n            { identifier: \"left\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"top\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"width\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"height\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let left: number = parameters[1].value;\r\n                let top: number = parameters[2].value;\r\n                let width: number = parameters[3].value;\r\n                let height: number = parameters[4].value;\r\n                \r\n                let rh = new RectangleHelper(left, top, width, height, module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = rh;\r\n                \r\n            }, false, false, 'Instanziert ein neues, achsenparalleles Rechteck-Objekt. (left, top) sind die Koordinaten der linken oberen Ecke.', true));\r\n            \r\n            this.addMethod(new Method(\"setWidth\", new Parameterlist([\r\n                { identifier: \"width\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n            ]), null,\r\n            (parameters) => {\r\n                \r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: RectangleHelper = o.intrinsicData[\"Actor\"];\r\n                let width: number = parameters[1].value;\r\n                \r\n                if (sh.testdestroyed(\"setWidth\")) return;\r\n\r\n                sh.width = width / sh.displayObject.scale.x;\r\n                sh.render();\r\n\r\n            }, false, false, \"Setzt die Breite des Rechtecks.\", false));\r\n\r\n            this.addMethod(new Method(\"setHeight\", new Parameterlist([\r\n                { identifier: \"height\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n            ]), null,\r\n            (parameters) => {\r\n                \r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: RectangleHelper = o.intrinsicData[\"Actor\"];\r\n                let height: number = parameters[1].value;\r\n                \r\n                if (sh.testdestroyed(\"setHeight\")) return;\r\n\r\n                sh.height = height / sh.displayObject.scale.y;\r\n                sh.render();\r\n\r\n            }, false, false, \"Setzt die Höhe des Rechtecks.\", false));\r\n\r\n        this.addMethod(new Method(\"getWidth\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: RectangleHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getWidth\")) return;\r\n\r\n                return sh.width * sh.displayObject.scale.x;\r\n\r\n            }, false, false, \"Gibt die Breite zurück.\", false));\r\n\r\n        this.addMethod(new Method(\"getHeight\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: RectangleHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getHeight\")) return;\r\n\r\n                return sh.height * sh.displayObject.scale.y;\r\n\r\n            }, false, false, \"Gibt die Höhe zurück.\", false));\r\n\r\n            this.addMethod(new Method(\"copy\", new Parameterlist([\r\n            ]), this,\r\n                (parameters) => {\r\n    \r\n                    let o: RuntimeObject = parameters[0].value;\r\n                    let sh: RectangleHelper = o.intrinsicData[\"Actor\"];\r\n    \r\n                    if (sh.testdestroyed(\"copy\")) return;\r\n    \r\n                    return sh.getCopy(<Klass>o.class);\r\n    \r\n                }, false, false, 'Erstellt eine Kopie des Rectangle-Objekts und git sie zurück.', false));\r\n    \r\n\r\n    }\r\n\r\n}\r\n\r\nexport class RectangleHelper extends FilledShapeHelper {\r\n\r\n    constructor(public left: number, public top: number, public width: number, public height: number,\r\n        interpreter: Interpreter, runtimeObject: RuntimeObject) {\r\n        super(interpreter, runtimeObject);\r\n        this.centerXInitial = left + width / 2;\r\n        this.centerYInitial = top + height / 2;\r\n\r\n        this.hitPolygonInitial = [\r\n            { x: left, y: top }, { x: left, y: top + height }, { x: left + width, y: top + height }, { x: left + width, y: top }\r\n        ];\r\n\r\n        this.render();\r\n\r\n        this.addToDefaultGroup();\r\n\r\n    }\r\n\r\n    getCopy(klass: Klass): RuntimeObject {\r\n\r\n        let ro: RuntimeObject = new RuntimeObject(klass);\r\n        let rh: RectangleHelper = new RectangleHelper(this.left, this.top, this.width, this.height, this.worldHelper.interpreter, ro);\r\n        ro.intrinsicData[\"Actor\"] = rh;\r\n\r\n        rh.copyFrom(this);\r\n        rh.render();\r\n\r\n        return ro;\r\n    }\r\n\r\n    render(): void {\r\n\r\n        let g: PIXI.Graphics = <any>this.displayObject;\r\n\r\n        if (this.displayObject == null) {\r\n            g = new PIXI.Graphics();\r\n            this.displayObject = g;\r\n            this.worldHelper.stage.addChild(g);\r\n\r\n        } else {\r\n            g.clear();\r\n        }\r\n\r\n        if (this.fillColor != null) {\r\n            g.beginFill(this.fillColor, this.fillAlpha);\r\n        }\r\n        if (this.borderColor != null) {\r\n            g.lineStyle(this.borderWidth, this.borderColor, this.borderAlpha, 0.5)\r\n        }\r\n\r\n        g.moveTo(this.left, this.top);\r\n        g.lineTo(this.left + this.width, this.top);\r\n        g.lineTo(this.left + this.width, this.top + this.height);\r\n        g.lineTo(this.left, this.top + this.height);\r\n        g.closePath();\r\n\r\n        if (this.fillColor != null) {\r\n            g.endFill();\r\n        }\r\n    };\r\n\r\n\r\n}\r\n","import { Enum } from \"../../compiler/types/Enum.js\";\r\nimport { Module } from \"../../compiler/parser/Module.js\";\r\nimport { TokenType } from \"../../compiler/lexer/Token.js\";\r\n\r\nexport class RepeatTypeClass extends Enum {\r\n\r\n    constructor(module: Module){\r\n        super(\"RepeatType\", module, [\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null, \r\n                identifier: \"once\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"loop\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"backAndForth\"\r\n            },\r\n        ]);\r\n\r\n        this.documentation = \"Gibt an, auf welche Art eine Sprite-Animation abgespielt werden soll.\"\r\n    }\r\n\r\n}","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass } from \"../../compiler/types/Class.js\";\r\nimport { doublePrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { FilledShapeHelper } from \"./FilledShape.js\";\r\nimport { WorldHelper } from \"./World.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\n\r\nexport class RoundedRectangleClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"RoundedRectangle\", module, \"Rechteck mit abgerundeten Ecken\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"FilledShape\"));\r\n\r\n        this.addMethod(new Method(\"RoundedRectangle\", new Parameterlist([\r\n            { identifier: \"left\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"top\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"width\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"height\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"radius\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let left: number = parameters[1].value;\r\n                let top: number = parameters[2].value;\r\n                let width: number = parameters[3].value;\r\n                let height: number = parameters[4].value;\r\n                let radius: number = parameters[5].value;\r\n\r\n                let rh = new RoundedRectangleHelper(left, top, width, height, radius, module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = rh;\r\n\r\n            }, false, false, 'Instanziert ein neues, achsenparalleles abgerundetes Rechteck-Objekt. (left, top) sind die Koordinaten der linken oberen Ecke.', true));\r\n\r\n        this.addMethod(new Method(\"getWidth\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: RoundedRectangleHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getWidth\")) return;\r\n\r\n                return sh.width * sh.displayObject.scale.x;\r\n\r\n            }, false, false, \"Gibt die Breite zurück.\", false));\r\n\r\n        this.addMethod(new Method(\"getHeight\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: RoundedRectangleHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getHeight\")) return;\r\n\r\n                return sh.height * sh.displayObject.scale.y;\r\n\r\n            }, false, false, \"Gibt die Höhe zurück.\", false));\r\n\r\n            this.addMethod(new Method(\"getRadius\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: RoundedRectangleHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getHeight\")) return;\r\n\r\n                return sh.radius * sh.displayObject.scale.y;\r\n\r\n            }, false, false, \"Gibt den Eckradius zurück.\", false));\r\n\r\n            this.addMethod(new Method(\"copy\", new Parameterlist([\r\n            ]), this,\r\n                (parameters) => {\r\n    \r\n                    let o: RuntimeObject = parameters[0].value;\r\n                    let sh: RoundedRectangleHelper = o.intrinsicData[\"Actor\"];\r\n    \r\n                    if (sh.testdestroyed(\"copy\")) return;\r\n    \r\n                    return sh.getCopy(<Klass>o.class);\r\n    \r\n                }, false, false, 'Erstellt eine Kopie des RoundedRectangle-Objekts und git sie zurück.', false));\r\n    \r\n\r\n    }\r\n\r\n}\r\n\r\nexport class RoundedRectangleHelper extends FilledShapeHelper {\r\n\r\n    constructor(public left: number, public top: number, public width: number, public height: number, public radius: number,\r\n        interpreter: Interpreter, runtimeObject: RuntimeObject) {\r\n        super(interpreter, runtimeObject);\r\n        this.centerXInitial = left + width / 2;\r\n        this.centerYInitial = top + height / 2;\r\n\r\n        this.hitPolygonInitial = [];\r\n\r\n        this.addCenterCircle(left + radius, top + radius, Math.PI/2);\r\n        this.addCenterCircle(left + radius, top + height - radius, Math.PI);\r\n        this.addCenterCircle(left + width - radius, top + height - radius, 3*Math.PI/2);\r\n        this.addCenterCircle(left + width - radius, top + radius, 0);\r\n        this.hitPolygonInitial.push({x: left + radius, y: top});\r\n\r\n        this.render();\r\n        this.addToDefaultGroup();\r\n\r\n    }\r\n\r\n    getCopy(klass: Klass): RuntimeObject {\r\n\r\n        let ro: RuntimeObject = new RuntimeObject(klass);\r\n        let rh: RoundedRectangleHelper = new RoundedRectangleHelper(this.left, this.top, this.width, this.height, this.radius, this.worldHelper.interpreter, ro);\r\n        ro.intrinsicData[\"Actor\"] = rh;\r\n\r\n        rh.copyFrom(this);\r\n        rh.render();\r\n\r\n        return ro;\r\n    }\r\n\r\n\r\n    addCenterCircle(midx: number, midy: number, angleStart: number){\r\n        let n = 8;\r\n        let dw = Math.PI/2/n;\r\n\r\n        for(let i = 0; i <= n; i++){\r\n            this.hitPolygonInitial.push({x: midx + this.radius*Math.cos(angleStart + dw*i), y: midy - this.radius*Math.sin(angleStart + dw*i)})\r\n        }\r\n    }\r\n\r\n    render(): void {\r\n\r\n        let g: PIXI.Graphics = <any>this.displayObject;\r\n\r\n        if (this.displayObject == null) {\r\n            g = new PIXI.Graphics();\r\n            this.displayObject = g;\r\n            this.worldHelper.stage.addChild(g);\r\n\r\n        } else {\r\n            g.clear();\r\n        }\r\n\r\n        if (this.fillColor != null) {\r\n            g.beginFill(this.fillColor, this.fillAlpha);\r\n        }\r\n        if (this.borderColor != null) {\r\n            g.lineStyle(this.borderWidth, this.borderColor, this.borderAlpha, 0.5)\r\n        }\r\n\r\n        g.drawRoundedRect(this.left,this.top, this.width, this.height, this.radius);\r\n\r\n        if (this.fillColor != null) {\r\n            g.endFill();\r\n        }\r\n\r\n        // g.lineStyle(1, 0xff0000, 1);\r\n\r\n        // g.moveTo(this.hitPolygonInitial[0].x, this.hitPolygonInitial[0].y);\r\n        // for(let i = 1; i < this.hitPolygonInitial.length; i++){\r\n        //     g.lineTo(this.hitPolygonInitial[i].x, this.hitPolygonInitial[i].y);\r\n        // }\r\n        \r\n    };\r\n\r\n\r\n}\r\n","import { Enum } from \"../../compiler/types/Enum.js\";\r\nimport { Module } from \"../../compiler/parser/Module.js\";\r\nimport { TokenType } from \"../../compiler/lexer/Token.js\";\r\n\r\nexport class ScaleModeClass extends Enum {\r\n\r\n    constructor(module: Module){\r\n        super(\"ScaleMode\", module, [\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"linear\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"nearest_neighbour\"\r\n            }\r\n        ]);\r\n\r\n        this.documentation = \"Art der Interpolation der Pixelfarben beim Skalieren von grafischen Objekten\"\r\n    }\r\n\r\n}","import { Type, Method, Parameterlist, Value, Attribute } from \"../../compiler/types/Types.js\";\r\nimport { Klass, Visibility } from \"../../compiler/types/Class.js\";\r\nimport { stringPrimitiveType, doublePrimitiveType, floatPrimitiveType, intPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Module } from \"../../compiler/parser/Module.js\";\r\nimport { PrintManager } from \"../../main/gui/PrintManager.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { SoundTools } from \"../../tools/SoundTools.js\";\r\n\r\nexport class SoundKlass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n        super(\"Sound\", module, \"Aufzählung aller Geräusche\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n\r\n        for(let sound of SoundTools.sounds){\r\n            this.addAttribute(new Attribute(sound.name, stringPrimitiveType, (value) => { value.value = sound.name }, true, Visibility.public, true, sound.description));\r\n        }\r\n\r\n        this.staticClass.classObject = new RuntimeObject(this.staticClass);\r\n        this.staticClass.classObject.initializeAttributeValues();\r\n\r\n        this.addMethod(new Method(\"playSound\", new Parameterlist([\r\n            { identifier: \"sound\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n        (parameters) => {\r\n            let sound: string = parameters[1].value;\r\n            SoundTools.play(sound);\r\n        }    \r\n        , false, true, \"Spielt einen Sound ab. Die Möglichen Sounds sind als statische Variablen der Klasse Sound hinterlegt. Tippe als Parameter also Sound gefolgt von einem Punkt ein, um eine Auswahl zu sehen!\"));\r\n\r\n\r\n    }\r\n\r\n}","import { Punkt, abstandPunktZuGerade, abstand } from \"../../tools/MatheTools.js\";\r\nimport { WorldHelper } from \"./World.js\";\r\nimport { SpriteHelper } from \"./Sprite.js\";\r\n\r\nexport class HitPolygonStore {\r\n\r\n    private static polygonStore: { [path: string]: Punkt[] } = {};\r\n\r\n    public static getPolygonForTexture(name: string, index: number, spriteHelper: SpriteHelper, sprite: PIXI.Sprite): Punkt[] {\r\n\r\n        if (index == null) {\r\n            index = 0;\r\n        }\r\n        name += \"#\" + index;\r\n\r\n        let polygon = HitPolygonStore.polygonStore[name];\r\n\r\n        if (polygon == null) {\r\n            // polygon = HitPolygonStore.getPolygon(<PIXI.Sprite>spriteHelper.displayObject, spriteHelper.worldHelper);\r\n            polygon = HitPolygonStore.getPolygon(sprite, spriteHelper.worldHelper);\r\n\r\n            HitPolygonStore.polygonStore[name] = polygon;\r\n        }\r\n\r\n\r\n        return polygon;\r\n\r\n    }\r\n\r\n    private static getPolygon(sprite: PIXI.Sprite, worldHelper: WorldHelper): Punkt[] {\r\n\r\n        let pixels = worldHelper.app.renderer.plugins.extract.pixels(sprite);\r\n        let w = sprite.width;\r\n        let h = sprite.height;\r\n\r\n        if (pixels.length !== 4 * w * h) {\r\n            return [{ x: 0, y: 0 }, { x: w, y: 0 }, { x: w, y: h }, { x: 0, y: h }];\r\n        }\r\n\r\n        let polygon: Punkt[] = [];\r\n        let additionalPointsPerHalfBorder = 3;\r\n        let pointsPerBorder = additionalPointsPerHalfBorder*2 + 3;\r\n\r\n        let probes: Punkt[] = [];\r\n        HitPolygonStore.addPointsOnLine({x: 0, y: 0}, {x: w-1, y: 0}, \r\n            pointsPerBorder, probes);\r\n        HitPolygonStore.addPointsOnLine({x: w-1, y: 0}, {x: w-1, y: h-1}, \r\n            pointsPerBorder, probes);\r\n        HitPolygonStore.addPointsOnLine({x: w-1, y: h-1}, {x: 0, y: h-1}, \r\n            pointsPerBorder, probes);\r\n        HitPolygonStore.addPointsOnLine({x: 0, y: h-1}, {x: 0, y: 0}, \r\n            pointsPerBorder, probes);\r\n\r\n        let mid = {x: w/2, y: h/2};    \r\n        for(let probe of probes){\r\n            HitPolygonStore.probe(polygon, probe, mid,w, h, pixels);\r\n        }\r\n\r\n        let done: boolean = false;\r\n        while(!done){\r\n            done = true;\r\n            for(let i = 0; i < polygon.length - 1; i++){\r\n                let d = abstandPunktZuGerade(polygon[i], polygon[(i+2)%polygon.length], polygon[i+1]);\r\n                if(d < 2){\r\n                    polygon.splice(i+1, 1);\r\n                    done = false;\r\n                }\r\n            }\r\n        }\r\n\r\n        // console.log(polygon);\r\n\r\n        return polygon;\r\n\r\n    }\r\n\r\n    private static addPointsOnLine(start: Punkt, end: Punkt, n: number, points: Punkt[]){\r\n    \r\n        let fx = (end.x - start.x)/(n-1);\r\n        let fy = (end.y - start.y)/(n-1);\r\n\r\n        for(let i = 1; i <= n - 1 + 0.1; i++ ){\r\n            points.push({\r\n                x: start.x + fx*i,\r\n                y: start.y + fy*i\r\n            });\r\n        }    \r\n\r\n\r\n    }\r\n\r\n    private static probe(polygon: Punkt[], start: Punkt, end: Punkt, \r\n        width: number, height: number, pixels: Uint8Array) {\r\n\r\n        let length = abstand(start, end);\r\n        let fx = (end.x - start.x) / length;\r\n        let fy = (end.y - start.y) / length;\r\n\r\n        let x: number, y: number;\r\n\r\n        for (let i = 0; i <= length - 2; i++) {\r\n\r\n            x = start.x + i * fx;\r\n            y = start.y + i * fy;\r\n\r\n            if (!HitPolygonStore.isTransparent(x, y, width, height, pixels)) {\r\n                break;\r\n            }\r\n        }\r\n\r\n        polygon.push({ x: x, y: y });\r\n\r\n    }\r\n\r\n\r\n    private static isTransparent(x: number, y: number, width: number, height: number, pixels: Uint8Array) {\r\n\r\n        if (x < 0 || y < 0 || x > width || y > height) {\r\n            return true;\r\n        }\r\n\r\n        let p = pixels[4 * Math.round(x) + 4 * width * Math.round(y) + 3];\r\n        // console.log(\"x: \" + x + \", y: \" + y + \", width: \" + width + \" = \" + p);\r\n        // console.log(\"index: \" + (4 * x + 4 * width * y + 3) + \", length: \" + pixels.length);\r\n\r\n        return p == 0;\r\n    }\r\n\r\n\r\n}","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass } from \"../../compiler/types/Class.js\";\r\nimport { doublePrimitiveType, intPrimitiveType, voidPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, Value } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { FilledShapeHelper } from \"./FilledShape.js\";\r\nimport { WorldHelper } from \"./World.js\";\r\nimport { EnumRuntimeObject } from \"../../compiler/types/Enum.js\";\r\nimport { ShapeHelper } from \"./Shape.js\";\r\nimport { HitPolygonStore } from \"./PolygonStore.js\";\r\nimport { ArrayType } from \"../../compiler/types/Array.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { SpriteLibraryPage } from \"../../help/SpriteLibraryPage.js\";\r\n\r\nexport class SpriteClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Sprite\", module, \"Ein Sprite ist eine kleine Pixelgrafik, die verschoben, gedreht und skaliert werden kann. Zudem besitzt es Methoden zum Erkennen von Kollisionen mit anderen grafischen Objekten.\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Shape\"));\r\n\r\n        let scaleModeClass = <Klass>module.typeStore.getType(\"ScaleMode\")\r\n\r\n        // this.addAttribute(new Attribute(\"PI\", doublePrimitiveType, (object) => { return Math.PI }, true, Visibility.public, true, \"Die Kreiszahl Pi (3.1415...)\"));\r\n\r\n        this.addMethod(new Method(\"Sprite\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"spriteLibraryEntry\", type: module.typeStore.getType(\"SpriteLibrary\"), declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"index\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"scalemode\", type: scaleModeClass, declaration: null, usagePositions: null, isFinal: true },\r\n\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n                let spriteLibraryEntry: EnumRuntimeObject = parameters[3].value;\r\n                let index: number = parameters[4].value;\r\n                let scaleMode: EnumRuntimeObject = parameters[5].value;\r\n\r\n                let rh = new SpriteHelper(x, y, spriteLibraryEntry.enumValue.identifier, index, module.main.getInterpreter(), o, scaleMode.enumValue.identifier);\r\n                o.intrinsicData[\"Actor\"] = rh;\r\n\r\n            }, false, false, 'Instanziert ein neues Sprite und stellt es an der Position (x, y) dar. Falls scale ungleich 1 ist wird die Bitmap des Sprites VOR dem Rendern um den Faktor scale gestreckt. Dabei wird die nearest neighbour-Interpolation verwendet damit aus Einzelpixeln schöne Quadrate werden. SpriteLibraryEntry ist ein Auzählungstyp (enum). Gib einfach SpriteLibraryEntry gefolgt von einem Punkt ein, dann erhältst Du ein Auswahl von Bildern. Einen Überblick über die Bilder bekommst Du auch über den Menüpunkt Hilfe->Sprite-Bilderübersicht.', true));\r\n\r\n        this.addMethod(new Method(\"Sprite\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"spriteLibraryEntry\", type: module.typeStore.getType(\"SpriteLibrary\"), declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"index\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n                let spriteLibraryEntry: EnumRuntimeObject = parameters[3].value;\r\n                let index: number = parameters[4].value;\r\n\r\n                let rh = new SpriteHelper(x, y, spriteLibraryEntry.enumValue.identifier, index, module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = rh;\r\n\r\n            }, false, false, 'Instanziert ein neues Sprite und stellt es an der Position (x, y) dar. SpriteLibraryEntry ist ein Auzählungstyp (enum). Gib einfach SpriteLibraryEntry gefolgt von einem Punkt ein, dann erhältst Du ein Auswahl von Bildern. Einen Überblick über die Bilder bekommst Du auch über den Menüpunkt Hilfe->Sprite-Bilderübersicht.', true));\r\n\r\n        this.addMethod(new Method(\"Sprite\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"spriteLibraryEntry\", type: module.typeStore.getType(\"SpriteLibrary\"), declaration: null, usagePositions: null, isFinal: true },\r\n\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n                let spriteLibraryEntry: EnumRuntimeObject = parameters[3].value;\r\n\r\n                let rh = new SpriteHelper(x, y, spriteLibraryEntry.enumValue.identifier, null, module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = rh;\r\n\r\n            }, false, false, 'Instanziert ein neues Sprite und stellt es an der Position (x, y) dar. SpriteLibraryEntry ist ein Auzählungstyp (enum). Gib einfach SpriteLibraryEntry gefolgt von einem Punkt ein, dann erhältst Du ein Auswahl von Bildern. Einen Überblick über die Bilder bekommst Du auch über den Menüpunkt Hilfe->Sprite-Bilderübersicht.', true));\r\n\r\n        this.addMethod(new Method(\"setImage\", new Parameterlist([\r\n            { identifier: \"spriteLibraryEntry\", type: module.typeStore.getType(\"SpriteLibrary\"), declaration: null, usagePositions: null, isFinal: true },\r\n\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let spriteLibraryEntry: EnumRuntimeObject = parameters[1].value;\r\n                let sh: SpriteHelper = <SpriteHelper>o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"setImage\")) return;\r\n\r\n                sh.setTexture(spriteLibraryEntry.enumValue.identifier);\r\n\r\n            }, false, false, 'Ändert das Bild des Sprites. SpriteLibraryEntry ist ein Auzählungstyp (enum). Gib einfach SpriteLibraryEntry gefolgt von einem Punkt ein, dann erhältst Du ein Auswahl von Bildern. Einen Überblick über die Bilder bekommst Du auch über den Menüpunkt Hilfe->Sprite-Bilderübersicht.', false));\r\n\r\n        this.addMethod(new Method(\"setImage\", new Parameterlist([\r\n            { identifier: \"spriteLibraryEntry\", type: module.typeStore.getType(\"SpriteLibrary\"), declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"index\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let spriteLibraryEntry: EnumRuntimeObject = parameters[1].value;\r\n                let index: number = parameters[2].value;\r\n                let sh: SpriteHelper = <SpriteHelper>o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"setImage\")) return;\r\n\r\n                sh.setTexture(spriteLibraryEntry.enumValue.identifier, index);\r\n\r\n            }, false, false, 'Ändert das Bild des Sprites. SpriteLibraryEntry ist ein Auzählungstyp (enum). Gib einfach SpriteLibraryEntry gefolgt von einem Punkt ein, dann erhältst Du ein Auswahl von Bildern. Einen Überblick über die Bilder bekommst Du auch über den Menüpunkt Hilfe->Sprite-Bilderübersicht.', false));\r\n\r\n        this.addMethod(new Method(\"setImageIndex\", new Parameterlist([\r\n            { identifier: \"index\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let index: number = parameters[1].value;\r\n                let sh: SpriteHelper = <SpriteHelper>o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"setImage\")) return;\r\n\r\n                sh.setTexture(sh.textureName, index);\r\n\r\n            }, false, false, 'Ändert den Bildindex des Sprites.', false));\r\n\r\n        this.addMethod(new Method(\"playAnimation\", new Parameterlist([\r\n            { identifier: \"indexArray\", type: new ArrayType(intPrimitiveType), declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"repeatType\", type: module.typeStore.getType(\"RepeatType\"), declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"imagesPerSecond\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let indexArray: Value[] = parameters[1].value;\r\n                let repeatType: EnumRuntimeObject = parameters[2].value;\r\n                let imagesPerSecond: number = parameters[3].value;\r\n                let sh: SpriteHelper = <SpriteHelper>o.intrinsicData[\"Actor\"];\r\n\r\n                let indices: number[] = [];\r\n                for (let v of indexArray) {\r\n                    indices.push(v.value);\r\n                }\r\n\r\n                if (sh.testdestroyed(\"playAnimation\")) return;\r\n\r\n                sh.playAnimation(indices, repeatType.enumValue.identifier, imagesPerSecond);\r\n\r\n            }, false, false, 'Spielt eine Animation ab.', false));\r\n\r\n        this.addMethod(new Method(\"playAnimation\", new Parameterlist([\r\n            { identifier: \"fromIndex\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"toIndex\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"repeatType\", type: module.typeStore.getType(\"RepeatType\"), declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"imagesPerSecond\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let fromIndex: number = parameters[1].value;\r\n                let toIndex: number = parameters[2].value;\r\n                let repeatType: EnumRuntimeObject = parameters[3].value;\r\n                let imagesPerSecond: number = parameters[4].value;\r\n                let sh: SpriteHelper = <SpriteHelper>o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"playAnimation\")) return;\r\n\r\n                let indices: number[] = [];\r\n\r\n                if (fromIndex < toIndex && toIndex - fromIndex < 10000) {\r\n                    for (let i = fromIndex; i < toIndex; i++) indices.push(i);\r\n                }\r\n\r\n                sh.playAnimation(indices, repeatType.enumValue.identifier, imagesPerSecond);\r\n\r\n            }, false, false, 'Spielt eine Animation ab.', false));\r\n\r\n        this.addMethod(new Method(\"stopAnimation\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: SpriteHelper = <SpriteHelper>o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"stopAnimation\")) return;\r\n\r\n                sh.stopAnimation(true);\r\n\r\n            }, false, false, 'Stoppt die gerade laufende Animation und macht das Sprite unsichtbar.', false));\r\n\r\n        this.addMethod(new Method(\"pauseAnimation\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: SpriteHelper = <SpriteHelper>o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"pauseAnimation\")) return;\r\n\r\n                sh.pauseAnimation();\r\n\r\n            }, false, false, 'Pausiert die laufende Animation.', false));\r\n\r\n        this.addMethod(new Method(\"resumeAnimation\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: SpriteHelper = <SpriteHelper>o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"resumeAnimation\")) return;\r\n\r\n                sh.resumeAnimation();\r\n\r\n            }, false, false, 'Fährt mit einer pausierten Animation wieder fort.', false));\r\n\r\n        this.addMethod(new Method(\"setAlpha\", new Parameterlist([\r\n            { identifier: \"alphaValue\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let alpha: number = parameters[1].value;\r\n                let sh: SpriteHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"setAlpha\")) return;\r\n\r\n                sh.setAlpha(alpha);\r\n\r\n            }, false, false, 'Setzt die Durchsichtigkeit. 0.0 bedeutet vollkommen durchsichtig, 1.0 bedeutet vollkommen undurchsichtig.', false));\r\n\r\n        this.addMethod(new Method(\"copy\", new Parameterlist([\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: SpriteHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"copy\")) return;\r\n\r\n                return sh.getCopy(<Klass>o.class);\r\n\r\n            }, false, false, 'Erstellt eine Kopie des Sprite-Objekts und git sie zurück.', false));\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\nexport class SpriteHelper extends ShapeHelper {\r\n\r\n    animationIndices: number[] = [];\r\n    animationRuns: boolean = false;\r\n    imagesPerMillisecond: number = 1;\r\n    animationTime: number = 0;\r\n    animationPaused: boolean = false;\r\n\r\n    repeatType = \"once\";\r\n    textureName: string = \"\";\r\n\r\n    constructor(public x: number, public y: number, public name: string, public index: number,\r\n        interpreter: Interpreter, runtimeObject: RuntimeObject,\r\n        public scaleMode: string = \"linear\") {\r\n        super(interpreter, runtimeObject);\r\n\r\n        this.setTexture(null, index);\r\n\r\n        let sprite = <PIXI.Sprite>this.displayObject;\r\n\r\n        this.displayObject.localTransform.translate(this.x - sprite.width / 2, this.y - sprite.height / 2);\r\n        this.displayObject.transform.onChange();\r\n\r\n        this.worldHelper.stage.addChild(sprite);\r\n\r\n\r\n        this.centerXInitial = sprite.width / 2;\r\n        this.centerYInitial = sprite.height / 2;\r\n\r\n        this.addToDefaultGroup();\r\n\r\n    }\r\n\r\n    getCopy(klass: Klass): RuntimeObject {\r\n\r\n        let ro: RuntimeObject = new RuntimeObject(klass);\r\n        let rh: SpriteHelper = new SpriteHelper(this.x, this.y, this.name, this.index, this.worldHelper.interpreter, ro);\r\n        ro.intrinsicData[\"Actor\"] = rh;\r\n\r\n        rh.copyFrom(this);\r\n        rh.render();\r\n\r\n        return ro;\r\n    }\r\n\r\n\r\n    setAlpha(alpha: number) {\r\n        this.displayObject.alpha = alpha;\r\n    }\r\n\r\n    setTexture(name?: string, index?: number) {\r\n\r\n        if (name == this.name && index == this.index) return;\r\n\r\n        if (name == null) name = this.name;\r\n        if (index == null) index = 0;\r\n        this.index = index;\r\n\r\n        this.textureName = name;\r\n\r\n        let prefix = \"\";\r\n        //@ts-ignore\r\n        if (window.javaOnlineDir != null) {\r\n            //@ts-ignore\r\n            prefix = window.javaOnlineDir;\r\n        }\r\n\r\n        let sheet = PIXI.Loader.shared.resources[prefix + \"assets/graphics/spritesheet.json\"];\r\n        let nameWithIndex = name + \"#\" + index;\r\n        let texture = sheet.textures[nameWithIndex];\r\n\r\n        if (texture != null) {\r\n\r\n            if (this.scaleMode == \"nearest_neighbour\") {\r\n\r\n                let t = this.worldHelper.scaledTextures[nameWithIndex];\r\n\r\n                if (t == null) {\r\n                    let sprite = new PIXI.Sprite(texture);\r\n\r\n                    let dynamicTexture1 = PIXI.RenderTexture.create({\r\n                        width: sprite.width,\r\n                        height: sprite.height,\r\n                        scaleMode: PIXI.SCALE_MODES.NEAREST\r\n                    });\r\n\r\n                    this.worldHelper.app.renderer.render(sprite, dynamicTexture1, true);\r\n                    this.worldHelper.scaledTextures[nameWithIndex] = dynamicTexture1;\r\n                    t = dynamicTexture1;\r\n                }\r\n\r\n                texture = t;\r\n                if (texture == null) texture = sheet.textures[nameWithIndex];\r\n\r\n                // let t = this.worldHelper.scaledTextures[nameWithIndex][this.scaleOnTextureGeneration];\r\n                // if( t != null){\r\n                //     texture = t;\r\n                // } else {\r\n                //     let sprite = new PIXI.Sprite(texture);\r\n\r\n                //     let dynamicTexture1 = PIXI.RenderTexture.create({\r\n                //         width: sprite.width,\r\n                //         height: sprite.height,\r\n                //         scaleMode: PIXI.SCALE_MODES.NEAREST\r\n                //     });\r\n\r\n                //     this.worldHelper.app.renderer.render(sprite, dynamicTexture1, true);\r\n\r\n                //     sprite = new PIXI.Sprite(dynamicTexture1);\r\n\r\n                //     let dynamicTexture2 = PIXI.RenderTexture.create({\r\n                //         width: sprite.width * this.scaleOnTextureGeneration,\r\n                //         height: sprite.height * this.scaleOnTextureGeneration,\r\n                //         scaleMode: PIXI.SCALE_MODES.LINEAR\r\n                //     });\r\n\r\n                //     let m = new PIXI.Matrix();\r\n                //     m.scale(this.scaleOnTextureGeneration, this.scaleOnTextureGeneration);\r\n\r\n                //     this.worldHelper.app.renderer.render(sprite, dynamicTexture2, true,\r\n                //         m);\r\n\r\n                //     texture = dynamicTexture2;\r\n\r\n                //     this.worldHelper.scaledTextures[nameWithIndex][this.scaleOnTextureGeneration] = texture;\r\n            }\r\n\r\n            let sprite: PIXI.Sprite = <PIXI.Sprite>this.displayObject;\r\n            if (sprite == null) {\r\n                sprite = new PIXI.Sprite(texture);\r\n                this.displayObject = sprite;\r\n            } else {\r\n                sprite.texture = texture; // sheet.textures[nameWithIndex];\r\n            }\r\n\r\n            this.hitPolygonInitial = HitPolygonStore.getPolygonForTexture(name, index, this, new PIXI.Sprite(sheet.textures[nameWithIndex]));\r\n            this.hitPolygonDirty = true;\r\n\r\n        } else {\r\n            if (this.displayObject == null) {\r\n                this.displayObject = new PIXI.Sprite();\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n    render(): void {\r\n\r\n    };\r\n\r\n    playAnimation(indexArray: number[], repeatType: string, imagesPerSecond: number) {\r\n        this.stopAnimation(false);\r\n        this.animationIndices = indexArray;\r\n        this.repeatType = repeatType;\r\n        this.imagesPerMillisecond = imagesPerSecond / 1000;\r\n        this.animationTime = 0;\r\n        this.animationRuns = true;\r\n        this.worldHelper.spriteAnimations.push(this);\r\n    }\r\n\r\n    stopAnimation(setInvisible: boolean) {\r\n        if (this.animationRuns) {\r\n            let spriteHelperList = this.worldHelper.spriteAnimations;\r\n            let i = spriteHelperList.indexOf(this);\r\n            spriteHelperList.splice(i, 1);\r\n        }\r\n        this.animationRuns = false;\r\n        if (setInvisible) this.setVisible(false);\r\n    }\r\n\r\n    pauseAnimation() {\r\n        this.animationPaused = true;\r\n    }\r\n\r\n    resumeAnimation() {\r\n        this.animationPaused = false;\r\n    }\r\n\r\n    tick(deltaTime: number) {\r\n\r\n        if (this.animationPaused) return;\r\n\r\n        let image: number;\r\n\r\n        if (this.repeatType == \"backAndForth\") {\r\n            let period2 = this.animationIndices.length * 2 / this.imagesPerMillisecond;\r\n            let numberOfPeriodsDone = Math.trunc(this.animationTime / period2);\r\n            let timeIntoPeriod = this.animationTime - numberOfPeriodsDone * period2;\r\n            image = this.imagesPerMillisecond * timeIntoPeriod;\r\n            if (image >= this.animationIndices.length) {\r\n                image = 2 * this.animationIndices.length - image;\r\n            }\r\n            image = Math.trunc(image);\r\n        } else\r\n            if (this.repeatType == \"loop\") {\r\n                let period = this.animationIndices.length / this.imagesPerMillisecond;\r\n                let numberOfPeriodsDone = Math.trunc(this.animationTime / period);\r\n                let timeIntoPeriod = this.animationTime - numberOfPeriodsDone * period;\r\n                image = this.imagesPerMillisecond * timeIntoPeriod;\r\n                image = Math.trunc(image);\r\n            } else {\r\n                image = Math.trunc(this.imagesPerMillisecond * this.animationTime);\r\n                if (image >= this.animationIndices.length) {\r\n                    this.stopAnimation(true);\r\n                    return;\r\n                }\r\n            }\r\n\r\n        this.animationTime += deltaTime;\r\n\r\n        this.setTexture(null, this.animationIndices[image]);\r\n    }\r\n\r\n}\r\n","import { Enum } from \"../../compiler/types/Enum.js\";\r\nimport { Module } from \"../../compiler/parser/Module.js\";\r\nimport { TokenType } from \"../../compiler/lexer/Token.js\";\r\n\r\ntype SpriteLibraryEntry = {\r\n    filename: string,\r\n    name: string,\r\n    index?: number\r\n}\r\n\r\ndeclare var SpriteLibrary: SpriteLibraryEntry[];\r\n\r\nexport class SpriteLibraryClass extends Enum {\r\n\r\n    constructor(module: Module) {\r\n        super(\"SpriteLibrary\", module,\r\n\r\n            SpriteLibrary.filter(\r\n                (sle) => {\r\n                    return sle.index == null || sle.index == 0\r\n                }\r\n            ).map((sle: SpriteLibraryEntry) => {\r\n                return {\r\n                    type: TokenType.pushEnumValue,\r\n                    position: null,\r\n                    identifier: sle.name\r\n                };\r\n\r\n            })\r\n\r\n        );\r\n        this.documentation = \"Aufzählung der Sprite-Grafiken\"\r\n    }\r\n\r\n}","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass } from \"../../compiler/types/Class.js\";\r\nimport { doublePrimitiveType, stringPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { FilledShapeHelper } from \"./FilledShape.js\";\r\nimport { WorldHelper } from \"./World.js\";\r\nimport { EnumRuntimeObject } from \"../../compiler/types/Enum.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\n\r\nexport class TextClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Text\", module, \"Text, der innerhalb der Grafikausgabe dargestellt werden kann\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"FilledShape\"));\r\n\r\n        // this.addAttribute(new Attribute(\"PI\", doublePrimitiveType, (object) => { return Math.PI }, true, Visibility.public, true, \"Die Kreiszahl Pi (3.1415...)\"));\r\n\r\n        this.addMethod(new Method(\"Text\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"fontsize\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"text\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n                let fontsize: number = parameters[3].value;\r\n                let text: string = parameters[4].value;\r\n\r\n                let sh = new TextHelper(x, y, fontsize, text, module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = sh;\r\n\r\n            }, false, false, 'Instanziert ein neues Textobjekt. (x, y) sind die Koordinaten des Textankers (default: links oben), fontsize die Höhe des Textes in Pixeln.', true));\r\n\r\n        this.addMethod(new Method(\"setFontsize\", new Parameterlist([\r\n            { identifier: \"fontsize\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let fontsize: number = parameters[1].value;\r\n                let sh: TextHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                sh.setFontsize(fontsize);\r\n\r\n            }, false, false, 'Setzt die Schriftgröße des Textes (Einheit: Pixel).\"', false));\r\n\r\n        this.addMethod(new Method(\"setAlignment\", new Parameterlist([\r\n            { identifier: \"alignment\", type: module.typeStore.getType(\"Alignment\"), declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let alignment: EnumRuntimeObject = parameters[1].value;\r\n                let sh: TextHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                sh.setAlignment(alignment.enumValue.identifier);\r\n\r\n            }, false, false, 'Setzt die Ausrichtung in X-Richtung. Zulässige Werte sind \"Alignment.left\", \"Alignment.right\" und \"Alignment.center\".', false));\r\n\r\n        this.addMethod(new Method(\"setText\", new Parameterlist([\r\n            { identifier: \"text\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let text: string = parameters[1].value;\r\n                let sh: TextHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                sh.setText(text);\r\n\r\n            }, false, false, 'Setzt den Text.\"', false));\r\n\r\n        this.addMethod(new Method(\"copy\", new Parameterlist([\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: TextHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"copy\")) return;\r\n\r\n                return sh.getCopy(<Klass>o.class);\r\n\r\n            }, false, false, 'Erstellt eine Kopie des Text-Objekts und git sie zurück.', false));\r\n\r\n        this.addMethod(new Method(\"getWidth\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: TextHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getWidth\")) return;\r\n\r\n                return sh.getWidth();\r\n\r\n            }, false, false, 'Gibt die Breite des Textes zurück.', false));\r\n\r\n        this.addMethod(new Method(\"getHeight\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: TextHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getHeight\")) return;\r\n\r\n                return sh.getHeight();\r\n\r\n            }, false, false, 'Gibt die Höhe des Textes zurück.', false));\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\nexport class TextHelper extends FilledShapeHelper {\r\n\r\n    alignment: string = \"left\";\r\n\r\n    textStyle: PIXI.TextStyle =\r\n        new PIXI.TextStyle({\r\n            fontFamily: 'Arial',\r\n            fontSize: this.fontsize,\r\n            fontStyle: 'normal',\r\n            fontWeight: 'normal',\r\n            fill: [this.fillColor], // gradient possible...\r\n            stroke: this.borderColor,\r\n            strokeThickness: this.borderWidth,\r\n            dropShadow: false,\r\n            wordWrap: false,\r\n            align: \"left\"\r\n        });\r\n\r\n    constructor(public x: number, public y: number, public fontsize: number,\r\n        public text,\r\n        interpreter: Interpreter, runtimeObject: RuntimeObject) {\r\n        super(interpreter, runtimeObject);\r\n        this.centerXInitial = x;\r\n        this.centerYInitial = y;\r\n\r\n        this.borderColor = null;\r\n        this.textStyle.stroke = null;\r\n\r\n        this.hitPolygonInitial = [];\r\n\r\n        this.render();\r\n        this.addToDefaultGroup();\r\n    }\r\n\r\n    getCopy(klass: Klass): RuntimeObject {\r\n\r\n        let ro: RuntimeObject = new RuntimeObject(klass);\r\n        let rh: TextHelper = new TextHelper(this.x, this.y, this.fontsize, this.text, this.worldHelper.interpreter, ro);\r\n        ro.intrinsicData[\"Actor\"] = rh;\r\n\r\n        rh.alignment = this.alignment;\r\n\r\n        rh.copyFrom(this);\r\n        rh.render();\r\n\r\n        return ro;\r\n    }\r\n\r\n\r\n    render(): void {\r\n\r\n        let g: PIXI.Text = <any>this.displayObject;\r\n\r\n        if (this.displayObject == null) {\r\n            g = new PIXI.Text(this.text, this.textStyle);\r\n            this.displayObject = g;\r\n            this.displayObject.localTransform.translate(this.x, this.y);\r\n            this.displayObject.transform.onChange();\r\n            this.worldHelper.stage.addChild(g);\r\n        } else {\r\n            g.text = this.text;\r\n            this.textStyle.fill = this.fillColor;\r\n            this.textStyle.stroke = this.borderColor;\r\n            this.textStyle.strokeThickness = this.borderWidth;\r\n            g.alpha = this.fillAlpha;\r\n            this.textStyle.fontSize = this.fontsize;\r\n            switch (this.alignment) {\r\n                case \"left\": g.anchor.x = 0; break;\r\n                case \"center\": g.anchor.x = 0.5; break;\r\n                case \"right\": g.anchor.x = 1.0; break;\r\n            }\r\n            g.style = this.textStyle;\r\n        }\r\n\r\n        this.centerXInitial = 0;\r\n        this.centerYInitial = 0;\r\n        if(this.text != null){\r\n            let tm = PIXI.TextMetrics.measureText(this.text, this.textStyle);\r\n    \r\n            this.centerXInitial = tm.width / 2;\r\n            this.centerYInitial = tm.height / 2;\r\n        }\r\n\r\n\r\n    };\r\n\r\n    setFontsize(fontsize: number) {\r\n        this.fontsize = fontsize;\r\n        this.render();\r\n    }\r\n\r\n    setText(text: string) {\r\n        this.text = text;\r\n        this.render();\r\n    }\r\n\r\n    setAlignment(alignment: string) {\r\n        this.alignment = alignment;\r\n        this.render();\r\n    }\r\n\r\n    getWidth(): number {\r\n        let g: PIXI.Text = <any>this.displayObject;\r\n        return g.width;\r\n    }\r\n\r\n    getHeight(): number {\r\n        let g: PIXI.Text = <any>this.displayObject;\r\n        return g.height;\r\n    }\r\n\r\n}\r\n","import { Type, Method, Parameterlist, Value, Attribute } from \"../compiler/types/Types.js\";\r\nimport { Klass, Visibility } from \"../compiler/types/Class.js\";\r\nimport { stringPrimitiveType, doublePrimitiveType, floatPrimitiveType, intPrimitiveType } from \"../compiler/types/PrimitiveTypes.js\";\r\nimport { Module } from \"../compiler/parser/Module.js\";\r\nimport { PrintManager } from \"../main/gui/PrintManager.js\";\r\nimport { RuntimeObject } from \"../interpreter/RuntimeObject.js\";\r\n\r\nexport class MathClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n        super(\"Math\", module, \"Klasse mit statischen Methoden zur Berechnung mathematischer Funktionen (sin, cos, abs, ...) und zur Ermittlung von Zufallszahlen.\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n\r\n        this.addAttribute(new Attribute(\"PI\", doublePrimitiveType, (value) => { value.value = Math.PI }, true, Visibility.public, true, \"Die Kreiszahl Pi (3.1415...)\"));\r\n        this.addAttribute(new Attribute(\"E\", doublePrimitiveType, (value) => { value.value = Math.E }, true, Visibility.public, true, \"Die Eulersche Zahl e\"));\r\n\r\n        this.staticClass.classObject = new RuntimeObject(this.staticClass);\r\n        this.staticClass.classObject.initializeAttributeValues();\r\n\r\n        this.addMethod(new Method(\"round\", new Parameterlist([\r\n            { identifier: \"Wert\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return Math.round(<number>parameters[1].value);\r\n            }, false, true, \"**Rundet** den Wert\"));\r\n\r\n        this.addMethod(new Method(\"floor\", new Parameterlist([\r\n            { identifier: \"Wert\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return Math.floor(<number>parameters[1].value);\r\n            }, false, true, \"Rundet den Wert ab, sucht also die **nächstkleinere** ganze Zahl\"));\r\n\r\n        this.addMethod(new Method(\"ceil\", new Parameterlist([\r\n            { identifier: \"Wert\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return Math.ceil(<number>parameters[1].value);\r\n            }, false, true, \"Rundet den Wert auf, sucht also die **nächstgrößere** Zahl.\"));\r\n\r\n        this.addMethod(new Method(\"signum\", new Parameterlist([\r\n            { identifier: \"Wert\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return Math.sign(<number>parameters[1].value);\r\n            }, false, true, \"Gibt das Vorzeichen der Zahl zurück, d.h. \\n  - -1, falls die Zahl **negativ** ist,\\n  - 0, falls die Zahl **0** ist und\\n  - +1, falls die Zahl **positiv** ist.\"));\r\n\r\n        this.addMethod(new Method(\"sqrt\", new Parameterlist([\r\n            { identifier: \"Wert\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return Math.sqrt(<number>parameters[1].value);\r\n            }, false, true, \"Gibt die **Quadratwurzel** der Zahl zurück. Für andere Wurzeln benutze Math.pow(a, b), z.B. Math.pow(10, 1.0/3.0) für die Kubikwurzel aus 10.\"));\r\n\r\n        this.addMethod(new Method(\"random\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return Math.random();\r\n            }, false, true, \"Gibt eine Zufallszahl aus dem Intervall [0;1[ zurück.\"));\r\n\r\n        this.addMethod(new Method(\"pow\", new Parameterlist([\r\n            { identifier: \"Basis\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"Exponent\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return Math.pow(<number>parameters[1].value, <number>parameters[2].value);\r\n            }, false, true, 'Math.pow(a, b) gibt \"a hoch b\" zurück.'));\r\n\r\n        this.addMethod(new Method(\"toDegrees\", new Parameterlist([\r\n            { identifier: \"WinkelInRad\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return (<number>parameters[1].value) / Math.PI * 180;\r\n            }, false, true, \"Wandelt einen Winkel von Rad in Grad um, d.h. berechnet Winkel/Pi*180.\"));\r\n\r\n        this.addMethod(new Method(\"toRadians\", new Parameterlist([\r\n            { identifier: \"WinkelInGrad\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return (<number>parameters[1].value) / 180 * Math.PI;\r\n            }, false, true, \"Wandelt einen Winkel von Grad in Rad um, d.h. berechnet Winkel/180*Pi.\"));\r\n\r\n        this.addMethod(new Method(\"exp\", new Parameterlist([\r\n            { identifier: \"Zahl\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return Math.exp(<number>parameters[1].value);\r\n            }, false, true, 'Berechnet \"e hoch die Zahl\".'));\r\n\r\n        this.addMethod(new Method(\"log\", new Parameterlist([\r\n            { identifier: \"Zahl\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return Math.log(<number>parameters[1].value);\r\n            }, false, true, \"Berechnet den natürlichen Logarithmus der Zahl.\"));\r\n\r\n        this.addMethod(new Method(\"log10\", new Parameterlist([\r\n            { identifier: \"Zahl\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return Math.log10(<number>parameters[1].value);\r\n            }, false, true, \"Berechnet den Zehnerlogarithmus der Zahl.\"));\r\n\r\n        this.addMethod(new Method(\"sin\", new Parameterlist([\r\n            { identifier: \"WinkelInRad\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return Math.sin(<number>parameters[1].value);\r\n            }, false, true, \"Berechnet den Sinus des Winkels.\"));\r\n\r\n        this.addMethod(new Method(\"cos\", new Parameterlist([\r\n            { identifier: \"WinkelInRad\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return Math.cos(<number>parameters[1].value);\r\n            }, false, true, \"Berechnet den Cosinus des Winkels.\"));\r\n\r\n        this.addMethod(new Method(\"tan\", new Parameterlist([\r\n            { identifier: \"WinkelInRad\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return Math.tan(<number>parameters[1].value);\r\n            }, false, true, \"Berechnet den Tangens des Winkels.\"));\r\n\r\n        this.addMethod(new Method(\"asin\", new Parameterlist([\r\n            { identifier: \"WertDesSinus\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return Math.asin(<number>parameters[1].value);\r\n            }, false, true, \"Berechnet den Arcus-Sinus des Wertes in Rad.\"));\r\n\r\n        this.addMethod(new Method(\"acos\", new Parameterlist([\r\n            { identifier: \"WertDesCosinus\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return Math.acos(<number>parameters[1].value);\r\n            }, false, true, \"Berechnet den Arcus-Cosinus des Wertes in Rad.\"));\r\n\r\n        this.addMethod(new Method(\"atan\", new Parameterlist([\r\n            { identifier: \"WertDesTangens\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return Math.atan(<number>parameters[1].value);\r\n            }, false, true, \"Berechnet den Arcus-Tangens des Wertes in Rad.\"));\r\n\r\n        this.addMethod(new Method(\"atan2\", new Parameterlist([\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return Math.atan2(<number>parameters[1].value, <number>parameters[2].value);\r\n            }, false, true, \"Sind (x, y) die kartesischen Koordinaten eines Punktes, so ist Math.atan2(x, y) der Winkel alpha der Polarkoordinaten (alpha, r) des Punktes. \\n**Bem.: **Alpha wird in Rad berechnet.\"));\r\n\r\n        this.addMethod(new Method(\"abs\", new Parameterlist([\r\n            { identifier: \"Wert\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return Math.abs(<number>parameters[1].value);\r\n            }, false, true, \"Berechnet den Betrag des Wertes.\"));\r\n\r\n        this.addMethod(new Method(\"abs\", new Parameterlist([\r\n            { identifier: \"Wert\", type: floatPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), floatPrimitiveType,\r\n            (parameters) => {\r\n                return Math.abs(<number>parameters[1].value);\r\n            }, false, true, \"Berechnet den Betrag des Wertes.\"));\r\n\r\n        this.addMethod(new Method(\"abs\", new Parameterlist([\r\n            { identifier: \"Wert\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return Math.abs(<number>parameters[1].value);\r\n            }, false, true, \"Berechnet den Betrag des Wertes.\"));\r\n\r\n        this.addMethod(new Method(\"max\", new Parameterlist([\r\n            { identifier: \"a\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"b\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return Math.max(<number>parameters[1].value, <number>parameters[2].value);\r\n            }, false, true, \"Gibt die größere der beiden Zahlen zurück.\"));\r\n\r\n        this.addMethod(new Method(\"max\", new Parameterlist([\r\n            { identifier: \"a\", type: floatPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"b\", type: floatPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), floatPrimitiveType,\r\n            (parameters) => {\r\n                return Math.max(<number>parameters[1].value, <number>parameters[2].value);\r\n            }, false, true, \"Gibt die größere der beiden Zahlen zurück.\"));\r\n\r\n        this.addMethod(new Method(\"max\", new Parameterlist([\r\n            { identifier: \"a\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"b\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return Math.max(<number>parameters[1].value, <number>parameters[2].value);\r\n            }, false, true, \"Gibt die größere der beiden Zahlen zurück.\"));\r\n\r\n        this.addMethod(new Method(\"min\", new Parameterlist([\r\n            { identifier: \"a\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"b\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return Math.min(<number>parameters[1].value, <number>parameters[2].value);\r\n            }, false, true, \"Gibt die kleinere der beiden Zahlen zurück.\"));\r\n\r\n        this.addMethod(new Method(\"min\", new Parameterlist([\r\n            { identifier: \"a\", type: floatPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"b\", type: floatPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), floatPrimitiveType,\r\n            (parameters) => {\r\n                return Math.min(<number>parameters[1].value, <number>parameters[2].value);\r\n            }, false, true, \"Gibt die kleinere der beiden Zahlen zurück.\"));\r\n\r\n        this.addMethod(new Method(\"min\", new Parameterlist([\r\n            { identifier: \"a\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"b\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return Math.min(<number>parameters[1].value, <number>parameters[2].value);\r\n            }, false, true, \"Gibt die kleinere der beiden Zahlen zurück.\"));\r\n\r\n    }\r\n}","import { Type, Method, Parameterlist, Value, Attribute } from \"../compiler/types/Types.js\";\r\nimport { Klass, Visibility, Interface } from \"../compiler/types/Class.js\";\r\nimport { stringPrimitiveType, doublePrimitiveType, floatPrimitiveType, intPrimitiveType, voidPrimitiveType } from \"../compiler/types/PrimitiveTypes.js\";\r\nimport { Module } from \"../compiler/parser/Module.js\";\r\nimport { PrintManager } from \"../main/gui/PrintManager.js\";\r\nimport { RuntimeObject } from \"../interpreter/RuntimeObject.js\";\r\nimport { EnumRuntimeObject } from \"../compiler/types/Enum.js\";\r\nimport { SoundTools } from \"../tools/SoundTools.js\";\r\n\r\nexport class SystemClass extends Klass {\r\n\r\n    printStream: RuntimeObject;\r\n\r\n    deltaTimeMillis: number = 0; // when using WebSocket then the Server sends time synchronization\r\n\r\n    constructor(module: Module) {\r\n        super(\"System\", module, \"Klasse mit statischen Methoden für Systemfunktionen, z.B. Sound, Löschen der Ausgabe usw.\");\r\n\r\n        this.printStream = new RuntimeObject(<Klass>module.typeStore.getType(\"PrintStream\"));\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n\r\n        this.addAttribute(new Attribute(\"out\", module.typeStore.getType(\"PrintStream\"),\r\n            (value) => { value.value = this.printStream }, true, Visibility.public, true, \"PrintStream-Objekt, mit dem Text ausgegeben werden kann.\"));\r\n\r\n        this.staticClass.classObject = new RuntimeObject(this.staticClass);\r\n        this.staticClass.classObject.initializeAttributeValues();\r\n\r\n        // this.addMethod(new Method(\"clearScreen\", new Parameterlist([\r\n        // ]), null,\r\n        //     (parameters) => {\r\n        //         module.main.getInterpreter().printManager.clear();\r\n        //     }, false, true, \"Löscht den Bildschirm\"));\r\n\r\n        // this.addMethod(new Method(\"addKeyListener\", new Parameterlist([\r\n        //     { identifier: \"keyListener\", type: module.typeStore.getType(\"KeyListener\"), declaration: null, usagePositions: null, isFinal: true }\r\n        // ]), null,\r\n        // (parameters) => {\r\n        //     let r: RuntimeObject = parameters[1].value;\r\n        //     let method = (<Klass>r.class).getMethodBySignature(\"onKeyTyped(String)\");\r\n\r\n        //     if (method != null) {\r\n\r\n        //         module.main.getInterpreter().keyboardTool.keyPressedCallbacks.push((key) => {\r\n\r\n        //             let program = method?.program;\r\n        //             let invoke = method?.invoke;\r\n\r\n        //             let stackElements: Value[] = [\r\n        //                 {\r\n        //                     type: r.class,\r\n        //                     value: r\r\n        //                 },\r\n        //                 {\r\n        //                     type: stringPrimitiveType,\r\n        //                     value: key\r\n        //                 }\r\n        //             ];\r\n\r\n        //             if (program != null) {\r\n        //                 module.main.getInterpreter().runTimer(method, stackElements, null, false);\r\n        //             } else if (invoke != null) {\r\n        //                 invoke([]);\r\n        //             }\r\n\r\n\r\n        //         });\r\n        //     }\r\n        // }    \r\n        // , false, true, \"Fügt einen KeyListener hinzu, dessen Methode keyTyped immer dann aufgerufen wird, wenn eine Taste gedrückt und anschließend losgelassen wird.\"));\r\n\r\n        // this.addMethod(new Method(\"playSound\", new Parameterlist([\r\n        //     { identifier: \"sound\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        // ]), null,\r\n        // (parameters) => {\r\n        //     let sound: string = parameters[1].value;\r\n        //     SoundTools.play(sound);\r\n        // }    \r\n        // , false, true, \"Spielt einen Sound ab. Die Möglichen Sounds sind als statische Variablen der Klasse Sound hinterlegt. Tippe als Parameter also Sound gefolgt von einem Punkt ein, um eine Auswahl zu sehen!\"));\r\n\r\n        this.addMethod(new Method(\"currentTimeMillis\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n        (parameters) => {\r\n            return Date.now() + this.deltaTimeMillis;\r\n        }    \r\n        , false, true, \"Gibt die Anzahl der Millisekunden, die seit dem 01.01.1970 00:00:00 UTC vergangen sind, zurück.\"));\r\n\r\n    }\r\n\r\n}\r\n\r\nexport class PrintStreamClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n        super(\"PrintStream\", module, \"Interne Hilfsklasse, um System.out.println zu ermöglichen. Das Objekt System.out ist von der Klasse PrintStream.\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n\r\n        this.addMethod(new Method(\"print\", new Parameterlist([\r\n            { identifier: \"text\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n                module.main.getInterpreter().printManager.print(parameters[1].value);\r\n            }, false, true, \"Gibt den Text aus.\"));\r\n\r\n        this.addMethod(new Method(\"println\", new Parameterlist([\r\n            { identifier: \"text\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n                module.main.getInterpreter().printManager.println(parameters[1].value);\r\n            }, false, true, \"Gibt den Text aus, gefolgt von einem Zeilensprung.\"));\r\n\r\n\r\n    }\r\n\r\n}","import { Type, Method, Parameterlist, Value, Attribute } from \"../compiler/types/Types.js\";\r\nimport { Klass, Visibility, Interface } from \"../compiler/types/Class.js\";\r\nimport { stringPrimitiveType, doublePrimitiveType, floatPrimitiveType, intPrimitiveType, voidPrimitiveType } from \"../compiler/types/PrimitiveTypes.js\";\r\nimport { Module } from \"../compiler/parser/Module.js\";\r\nimport { PrintManager } from \"../main/gui/PrintManager.js\";\r\nimport { RuntimeObject } from \"../interpreter/RuntimeObject.js\";\r\nimport { EnumRuntimeObject } from \"../compiler/types/Enum.js\";\r\nimport { SoundTools } from \"../tools/SoundTools.js\";\r\n\r\nexport class SystemToolsClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n        super(\"SystemTools\", module, \"Klasse mit statischen Methoden für Systemfunktionen, z.B. Löschen der Ausgabe, Registrieren eines Tastaturlisteners usw.\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n\r\n        this.staticClass.classObject = new RuntimeObject(this.staticClass);\r\n        this.staticClass.classObject.initializeAttributeValues();\r\n\r\n        this.addMethod(new Method(\"clearScreen\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n                module.main.getInterpreter().printManager.clear();\r\n            }, false, true, \"Löscht den Bildschirm\"));\r\n\r\n        this.addMethod(new Method(\"addKeyListener\", new Parameterlist([\r\n            { identifier: \"keyListener\", type: module.typeStore.getType(\"KeyListener\"), declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n        (parameters) => {\r\n            let r: RuntimeObject = parameters[1].value;\r\n            let method = (<Klass>r.class).getMethodBySignature(\"onKeyTyped(String)\");\r\n\r\n            if (method != null) {\r\n\r\n                module.main.getInterpreter().keyboardTool.keyPressedCallbacks.push((key) => {\r\n\r\n                    let program = method?.program;\r\n                    let invoke = method?.invoke;\r\n\r\n                    let stackElements: Value[] = [\r\n                        {\r\n                            type: r.class,\r\n                            value: r\r\n                        },\r\n                        {\r\n                            type: stringPrimitiveType,\r\n                            value: key\r\n                        }\r\n                    ];\r\n\r\n                    if (program != null) {\r\n                        module.main.getInterpreter().runTimer(method, stackElements, null, false);\r\n                    } else if (invoke != null) {\r\n                        invoke([]);\r\n                    }\r\n\r\n\r\n                });\r\n            }\r\n        }    \r\n        , false, true, \"Fügt einen KeyListener hinzu, dessen Methode keyTyped immer dann aufgerufen wird, wenn eine Taste gedrückt und anschließend losgelassen wird.\"));\r\n\r\n        // this.addMethod(new Method(\"playSound\", new Parameterlist([\r\n        //     { identifier: \"sound\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        // ]), null,\r\n        // (parameters) => {\r\n        //     let sound: string = parameters[1].value;\r\n        //     SoundTools.play(sound);\r\n        // }    \r\n        // , false, true, \"Spielt einen Sound ab. Die Möglichen Sounds sind als statische Variablen der Klasse Sound hinterlegt. Tippe als Parameter also Sound gefolgt von einem Punkt ein, um eine Auswahl zu sehen!\"));\r\n    }\r\n}\r\n\r\nexport class KeyListener extends Interface {\r\n\r\n    constructor(module: Module) {\r\n        super(\"KeyListener\", module, \"Interface mit Methode onKeyTyped. Eine Klasse, die dieses Interface implementiert, kann auf Tastatureingaben reagieren. Ein Objekt dieser Klasse muss zuvor aber mit System.addKeyListener() registriert werden.\");\r\n\r\n        this.addMethod(new Method(\"onKeyTyped\", new Parameterlist([\r\n            { identifier: \"key\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), voidPrimitiveType,\r\n            null,  // no implementation!\r\n            false, false, \"Wird aufgerufen, nachdem eine Taste gedrückt wurde.\"));\r\n    }\r\n\r\n}\r\n\r\n\r\nexport class PrintStreamClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n        super(\"PrintStream\", module, \"Interne Hilfsklasse, um System.out.println zu ermöglichen. Das Objekt System.out ist von der Klasse PrintStream.\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n\r\n        this.addMethod(new Method(\"print\", new Parameterlist([\r\n            { identifier: \"text\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n                module.main.getInterpreter().printManager.print(parameters[1].value);\r\n            }, false, true, \"Gibt den Text aus.\"));\r\n\r\n        this.addMethod(new Method(\"println\", new Parameterlist([\r\n            { identifier: \"text\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n                module.main.getInterpreter().printManager.println(parameters[1].value);\r\n            }, false, true, \"Gibt den Text aus, gefolgt von einem Zeilensprung.\"));\r\n\r\n\r\n    }\r\n\r\n}","import { Type, Method, Parameterlist, Value, Attribute } from \"../compiler/types/Types.js\";\r\nimport { Klass, Visibility, Interface } from \"../compiler/types/Class.js\";\r\nimport { stringPrimitiveType, doublePrimitiveType, floatPrimitiveType, intPrimitiveType, voidPrimitiveType } from \"../compiler/types/PrimitiveTypes.js\";\r\nimport { Module } from \"../compiler/parser/Module.js\";\r\nimport { PrintManager } from \"../main/gui/PrintManager.js\";\r\nimport { RuntimeObject } from \"../interpreter/RuntimeObject.js\";\r\nimport { Enum } from \"../compiler/types/Enum.js\";\r\nimport { InterpreterState, Interpreter } from \"../interpreter/Interpreter.js\";\r\nimport { Program } from \"../compiler/parser/Program.js\";\r\n\r\n\r\nexport class Runnable extends Interface {\r\n\r\n    constructor(module: Module) {\r\n        super(\"Runnable\", module);\r\n\r\n        this.addMethod(new Method(\"run\", new Parameterlist([\r\n            // { identifier: \"deltaTimeInMs\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), voidPrimitiveType,\r\n            null,  // no implementation!\r\n            false, false, \"Wird vom Timer immer wieder aufgerufen\"));\r\n    }\r\n\r\n}\r\n\r\ntype TimerEntry = {\r\n    timerListener: RuntimeObject,\r\n    dt: number,\r\n    running: boolean,\r\n    lastTimeFired: number,\r\n    method: Method\r\n}\r\n\r\nexport class TimerClass extends Klass {\r\n\r\n    timerEntries: TimerEntry[] = [];\r\n    timerRunning: boolean = false;\r\n\r\n    constructor(module: Module) {\r\n        super(\"Timer\", module, \"Timer Klasse zur periodischen Ausführung von Methoden\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n\r\n        this.staticClass.classObject = new RuntimeObject(this.staticClass);\r\n        this.staticClass.classObject.initializeAttributeValues();\r\n\r\n        this.addMethod(new Method(\"repeat\", new Parameterlist([\r\n            {\r\n                identifier: \"runnable\", type: module.typeStore.getType(\"Runnable\"),\r\n                declaration: null, usagePositions: null, isFinal: true\r\n            },\r\n            {\r\n                identifier: \"deltaTimeInMs\", type: intPrimitiveType,\r\n                declaration: null, usagePositions: null, isFinal: true\r\n            },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let tl: RuntimeObject = <RuntimeObject>parameters[1].value;\r\n                let dt: number = <number>parameters[2].value;\r\n\r\n                let timerEntry: TimerEntry = {\r\n                    timerListener: tl,\r\n                    dt: dt,\r\n                    lastTimeFired: 0,\r\n                    running: true,\r\n                    method: tl.class.getMethod(\"run\", new Parameterlist([\r\n                        // {\r\n                        //     identifier: \"deltaTimeInMs\",\r\n                        //     type: intPrimitiveType,\r\n                        //     declaration: null,\r\n                        //     isFinal: true,\r\n                        //     usagePositions: null\r\n                        // }\r\n                    ]))\r\n                }\r\n\r\n                this.timerEntries.push(timerEntry);\r\n\r\n                console.log(\"TimerListener added with dt = \" + dt + \" ms.\");\r\n\r\n            }, false, true, \"Fügt ein neues TimerListener-Objekt hinzu und ruft dessen tick-Methode immer wieder auf.\"));\r\n\r\n\r\n        this.processTimerEntries();\r\n\r\n    }\r\n\r\n    processTimerEntries() {\r\n\r\n        if (this.timerEntries.length > 0) {\r\n            let interpreter = this.module?.main?.getInterpreter();\r\n\r\n            if (interpreter != null) {\r\n                if (!this.timerRunning && interpreter.state == InterpreterState.running) {\r\n                    let t: number = performance.now();\r\n                    for (let timerentry of this.timerEntries) {\r\n                        let dt = t - timerentry.lastTimeFired;\r\n                        if (dt >= timerentry.dt) {\r\n                            this.runEntry(timerentry, interpreter, Math.round(dt));\r\n                            timerentry.lastTimeFired = t;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                switch (interpreter.state) {\r\n                    case InterpreterState.done:\r\n                    case InterpreterState.error:\r\n                    case InterpreterState.not_initialized:\r\n                        this.timerEntries = [];\r\n                        this.timerRunning = false;\r\n                        break;\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n\r\n        let that = this;\r\n\r\n        setTimeout(() => {\r\n            that.processTimerEntries();\r\n        }, 10);\r\n\r\n    }\r\n\r\n    runEntry(timerentry: TimerEntry, interpreter: Interpreter, dt: number) {\r\n        let stackElements: Value[] = [\r\n            {\r\n                type: timerentry.timerListener.class,\r\n                value: timerentry.timerListener\r\n            },\r\n            // {\r\n            //     type: intPrimitiveType,\r\n            //     value: dt\r\n            // }\r\n        ];\r\n\r\n        this.timerRunning = true;\r\n        let that = this;\r\n\r\n        interpreter.runTimer(timerentry.method, stackElements, (interpreter) => {\r\n            that.timerRunning = false;\r\n        }, false);\r\n    }\r\n\r\n}","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { Interface, TypeVariable, Klass } from \"../../compiler/types/Class.js\";\r\nimport { voidPrimitiveType, booleanPrimitiveType, intPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\n\r\nexport class MapClass extends Interface {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Map\", module, \"Interface mit Methoden einer Map (Schlüssel-Wert-Speicher)\");\r\n\r\n        let objectType = module.typeStore.getType(\"Object\");\r\n\r\n        let typeK: Klass = (<Klass>objectType).clone();\r\n        typeK.identifier = \"K\";\r\n        typeK.isTypeVariable = true;\r\n\r\n        let tvK: TypeVariable = {\r\n            identifier: \"K\",\r\n            scopeFrom: { line: 1, column: 1, length: 1 },\r\n            scopeTo: { line: 1, column: 1, length: 1 },\r\n            type: typeK\r\n        };\r\n        this.typeVariables.push(tvK);\r\n\r\n        let typeV: Klass = (<Klass>objectType).clone();\r\n        typeV.identifier = \"V\";\r\n        typeV.isTypeVariable = true;\r\n\r\n        let tvV: TypeVariable = {\r\n            identifier: \"V\",\r\n            scopeFrom: { line: 1, column: 1, length: 1 },\r\n            scopeTo: { line: 1, column: 1, length: 1 },\r\n            type: typeV\r\n        };\r\n        this.typeVariables.push(tvV);\r\n\r\n        this.addMethod(new Method(\"size\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            null,  // no implementation!\r\n            true, false, \"Gibt die Anzahl der Elemente der Map zurück.\"));\r\n\r\n        this.addMethod(new Method(\"isEmpty\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            null,  // no implementation!\r\n            true, false, \"Testet, ob die Map leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"containsKey\", new Parameterlist([\r\n            { identifier: \"key\", type: typeK, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            null,  // no implementation!\r\n            true, false, \"Gibt genau dann true zurück, wenn die Map zum Schlüssel key einen Wert enthält.\"));\r\n\r\n        this.addMethod(new Method(\"containsValue\", new Parameterlist([\r\n            { identifier: \"value\", type: typeV, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            null,  // no implementation!\r\n            true, false, \"Gibt genau dann true zurück, wenn die Map den Wert enthält.\"));\r\n\r\n        this.addMethod(new Method(\"get\", new Parameterlist([\r\n            { identifier: \"key\", type: typeK, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), typeV,\r\n            null,  // no implementation!\r\n            true, false, \"Gibt den Wert zum Schlüssel key zurück. Gibt null zurück, falls die Map zum Schlüssel key keinen Wert enthält.\"));\r\n\r\n        this.addMethod(new Method(\"put\", new Parameterlist([\r\n            { identifier: \"key\", type: typeK, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"value\", type: typeK, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), typeV,\r\n            null,  // no implementation!\r\n            true, false, \"Speichert das key-value pair in der Map. Falls zum key vorher schon ein Value gespeichert war, wird dieser zurückgegeben. In der Map wird er dann durch den neuen Value überschrieben. Falls es zum key noch keinen value in der Map gab, wird null zurückgegeben.\"));\r\n\r\n        this.addMethod(new Method(\"clear\", new Parameterlist([\r\n        ]), null,\r\n            null,  // no implementation!\r\n            true, false, \"Entfernt alle Element aus dieser Map.\"));\r\n\r\n    }\r\n\r\n}\r\n","import { TextPosition, TokenType } from \"../../compiler/lexer/Token.js\";\r\nimport { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Program, Statement } from \"../../compiler/parser/Program.js\";\r\nimport { Interface, Klass } from \"../../compiler/types/Class.js\";\r\nimport { Enum } from \"../../compiler/types/Enum.js\";\r\nimport { booleanPrimitiveType, stringPrimitiveType, StringPrimitiveType, voidPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, PrimitiveType, Value } from \"../../compiler/types/Types.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { ListHelper } from \"./ArrayList.js\";\r\n\r\n\r\nexport class MapHelper {\r\n\r\n    keyArray: Value[] = [];\r\n    valueArray: Value[] = [];\r\n\r\n    map: Map<any, Value> = new Map(); // Maps key objects to value-Values\r\n\r\n    constructor(private runtimeObject: RuntimeObject, public interpreter: Interpreter, private module: Module) {\r\n    }\r\n\r\n    get(key: Value){\r\n        return this.map.get(key.value);\r\n    }\r\n\r\n    set(key: Value, value: Value): Value {\r\n\r\n        let old = this.map.get(key.value);\r\n\r\n        if(old == null){\r\n            this.keyArray.push(key);\r\n        } else {\r\n            this.valueArray.splice(this.valueArray.indexOf(old), 1);\r\n        }\r\n\r\n        this.valueArray.push(value);\r\n        \r\n        this.map.set(key.value, value);\r\n\r\n        return old;\r\n\r\n    }\r\n\r\n    allElementsPrimitive(): boolean {\r\n        for (let v of this.keyArray) {\r\n            if (!(v.type instanceof PrimitiveType || [\"String\", \"_Double\", \"Integer\", \"Boolean\" ,\"Character\"].indexOf(v.type.identifier) >= 0)) {\r\n                return false;\r\n            }\r\n        }\r\n        for (let v of this.valueArray) {\r\n            if (!(v.type instanceof PrimitiveType || [\"String\", \"_Double\", \"Integer\", \"Boolean\" ,\"Character\"].indexOf(v.type.identifier) >= 0)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    to_String(): any {\r\n\r\n        if (this.allElementsPrimitive()) {\r\n            let s = \"[\";\r\n            for (let i = 0; i < this.keyArray.length; i++) {\r\n                s += \"\" + this.keyArray[i].value + \" => \" + this.valueArray[i].value;\r\n                if (i < this.keyArray.length - 1) s += \", \";\r\n            }\r\n\r\n            return s + \"]\";\r\n        }\r\n\r\n        let position: TextPosition = {\r\n            line: 1,\r\n            column: 1,\r\n            length: 1\r\n        }\r\n\r\n        let statements: Statement[] = [\r\n            {\r\n                type: TokenType.noOp,\r\n                position: position,\r\n                stepFinished: false\r\n            },\r\n            {\r\n                type: TokenType.pushConstant,\r\n                dataType: stringPrimitiveType,\r\n                value: \"[\",\r\n                position: position,\r\n                stepFinished: false\r\n            },\r\n        ];\r\n\r\n        let toStringParameters = new Parameterlist([]);\r\n\r\n        for (let i = 0; i < this.valueArray.length; i++) {\r\n\r\n            let key = this.keyArray[i];\r\n            if (key.type instanceof PrimitiveType || key.type instanceof StringPrimitiveType) {\r\n                statements.push({\r\n                    type: TokenType.pushConstant,\r\n                    dataType: stringPrimitiveType,\r\n                    value: key.type.castTo(key, stringPrimitiveType).value,\r\n                    position: position,\r\n                    stepFinished: false\r\n                });\r\n            } else {\r\n                statements.push({\r\n                    type: TokenType.pushConstant,\r\n                    dataType: key.type,\r\n                    value: key.value,\r\n                    stepFinished: false,\r\n                    position: position\r\n                });\r\n                statements.push({\r\n                    type: TokenType.callMethod,\r\n                    method: (<Klass | Interface | Enum>key.type).getMethod(\"toString\", toStringParameters),\r\n                    isSuperCall: false,\r\n                    stackframeBegin: -1,\r\n                    stepFinished: false,\r\n                    position: position\r\n                });\r\n\r\n            }\r\n\r\n            statements.push({\r\n                type: TokenType.binaryOp,\r\n                operator: TokenType.plus,\r\n                leftType: stringPrimitiveType,\r\n                stepFinished: false,\r\n                position: position\r\n            });\r\n\r\n            statements.push({\r\n                type: TokenType.pushConstant,\r\n                dataType: stringPrimitiveType,\r\n                value: \" => \",\r\n                position: position,\r\n                stepFinished: false\r\n            });\r\n            statements.push({\r\n                type: TokenType.binaryOp,\r\n                operator: TokenType.plus,\r\n                leftType: stringPrimitiveType,\r\n                stepFinished: false,\r\n                position: position\r\n            });\r\n\r\n\r\n            let value = this.valueArray[i];\r\n            if (value.value == null || value.type instanceof PrimitiveType || value.type instanceof StringPrimitiveType) {\r\n                statements.push({\r\n                    type: TokenType.pushConstant,\r\n                    dataType: stringPrimitiveType,\r\n                    value: value.value == null ? \"null\" : value.type.castTo(value, stringPrimitiveType).value,\r\n                    position: position,\r\n                    stepFinished: false\r\n                });\r\n            } else {\r\n                statements.push({\r\n                    type: TokenType.pushConstant,\r\n                    dataType: value.type,\r\n                    value: value.value,\r\n                    stepFinished: false,\r\n                    position: position\r\n                });\r\n                statements.push({\r\n                    type: TokenType.callMethod,\r\n                    method: (<Klass | Interface | Enum>value.type).getMethod(\"toString\", toStringParameters),\r\n                    isSuperCall: false,\r\n                    stackframeBegin: -1,\r\n                    stepFinished: false,\r\n                    position: position\r\n                });\r\n\r\n            }\r\n\r\n            statements.push({\r\n                type: TokenType.binaryOp,\r\n                operator: TokenType.plus,\r\n                leftType: stringPrimitiveType,\r\n                stepFinished: false,\r\n                position: position\r\n            });\r\n\r\n            if (i < this.valueArray.length - 1) {\r\n                statements.push({\r\n                    type: TokenType.pushConstant,\r\n                    dataType: stringPrimitiveType,\r\n                    value: \", \",\r\n                    position: position,\r\n                    stepFinished: false\r\n                });\r\n                statements.push({\r\n                    type: TokenType.binaryOp,\r\n                    leftType: stringPrimitiveType,\r\n                    operator: TokenType.plus,\r\n                    stepFinished: false,\r\n                    position: position\r\n                });\r\n\r\n            }\r\n\r\n        }\r\n\r\n        statements.push({\r\n            type: TokenType.pushConstant,\r\n            dataType: stringPrimitiveType,\r\n            value: \"]\",\r\n            position: position,\r\n            stepFinished: false\r\n        });\r\n\r\n        statements.push({\r\n            type: TokenType.binaryOp,\r\n            operator: TokenType.plus,\r\n            leftType: stringPrimitiveType,\r\n            stepFinished: false,\r\n            position: position\r\n        });\r\n\r\n        // statements.push({\r\n        //     type: TokenType.binaryOp,\r\n        //     operator: TokenType.plus,\r\n        //     leftType: stringPrimitiveType,\r\n        //     stepFinished: false,\r\n        //     position: position\r\n        // });\r\n\r\n        statements.push({\r\n            type: TokenType.return,\r\n            copyReturnValueToStackframePos0: true,\r\n            leaveThisObjectOnStack: false,\r\n            stepFinished: false,\r\n            position: position,\r\n            methodWasInjected: true\r\n        });\r\n\r\n        let program: Program = {\r\n            module: this.module,\r\n            statements: statements,\r\n            labelManager: null\r\n        }\r\n\r\n        let method: Method = new Method(\"toString\", new Parameterlist([]), stringPrimitiveType, program, false, false);\r\n        this.interpreter.runTimer(method, [], () => console.log(\"List.toString fertig!\"), true)\r\n\r\n        return \"\";\r\n    }\r\n\r\n    size(): number {\r\n        return this.valueArray.length;\r\n    }\r\n\r\n    isEmpty(): boolean {\r\n        return this.valueArray.length == 0;\r\n    }\r\n\r\n    containsKey(key: Value): any {\r\n        return this.map.get(key.value) != null;\r\n    }\r\n\r\n    containsValue(value: Value): any {\r\n        for(let v of this.valueArray){\r\n            if(v.value == value.value) return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    clear() {\r\n        this.valueArray = [];\r\n        this.keyArray = [];\r\n        this.map.clear();\r\n    }\r\n\r\n}\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Interface, Klass, TypeVariable } from \"../../compiler/types/Class.js\";\r\nimport { booleanPrimitiveType, intPrimitiveType, stringPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, Value } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { MapHelper } from \"./MapHelper.js\";\r\n\r\nexport class HashMapClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"HashMap\", module, \"Map-Klasse mit Zugriffszeit proportional zu log(Anzahl der Elemente)\");\r\n\r\n        let objectType = module.typeStore.getType(\"Object\");\r\n\r\n        this.setBaseClass(<Klass>objectType);\r\n\r\n        let typeK: Klass = (<Klass>objectType).clone();\r\n        typeK.identifier = \"K\";\r\n        typeK.isTypeVariable = true;\r\n\r\n        let tvK: TypeVariable = {\r\n            identifier: \"K\",\r\n            scopeFrom: { line: 1, column: 1, length: 1 },\r\n            scopeTo: { line: 1, column: 1, length: 1 },\r\n            type: typeK\r\n        };\r\n        this.typeVariables.push(tvK);\r\n\r\n        let typeV: Klass = (<Klass>objectType).clone();\r\n        typeV.identifier = \"V\";\r\n        typeV.isTypeVariable = true;\r\n\r\n        let tvV: TypeVariable = {\r\n            identifier: \"V\",\r\n            scopeFrom: { line: 1, column: 1, length: 1 },\r\n            scopeTo: { line: 1, column: 1, length: 1 },\r\n            type: typeV\r\n        };\r\n        this.typeVariables.push(tvV);\r\n\r\n\r\n\r\n        let setInterface = (<Interface>module.typeStore.getType(\"Map\")).clone();\r\n        setInterface.typeVariables = [tvK, tvV];\r\n\r\n        this.implements.push(setInterface);\r\n\r\n        this.addMethod(new Method(\"HashMap\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let mh = new MapHelper(o, module.main.getInterpreter(), module);\r\n                o.intrinsicData[\"MapHelper\"] = mh;\r\n\r\n            }, false, false, 'Instanziert eine neue HashMap', true));\r\n\r\n\r\n        this.addMethod(new Method(\"put\", new Parameterlist([\r\n            { identifier: \"key\", type: typeK, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"value\", type: typeV, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), typeV,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let key: Value = parameters[1];\r\n                let value: Value = parameters[2];\r\n                let ah: MapHelper = o.intrinsicData[\"MapHelper\"];\r\n\r\n                return ah.set(key, value);\r\n\r\n            }, false, false, \"Speichert das key-value pair in der Map. Falls zum key vorher schon ein Value gespeichert war, wird dieser zurückgegeben. In der Map wird er dann durch den neuen Value überschrieben. Falls es zum key noch keinen value in der Map gab, wird null zurückgegeben.\"));\r\n\r\n        this.addMethod(new Method(\"clear\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: MapHelper = o.intrinsicData[\"MapHelper\"];\r\n\r\n                return ah.clear();\r\n\r\n            },\r\n            false, false, \"Entfernt alle Key-Value-Pairs aus dieser HashMap.\"));\r\n\r\n        this.addMethod(new Method(\"containsKey\", new Parameterlist([\r\n            { identifier: \"key\", type: typeK, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let key: Value = parameters[1];\r\n                let ah: MapHelper = o.intrinsicData[\"MapHelper\"];\r\n\r\n                return ah.containsKey(key);\r\n\r\n            },  // no implementation!\r\n            false, false, \"Gibt genau dann true zurück, wenn die Map zum Schlüssel key einen Wert enthält.\"));\r\n\r\n        this.addMethod(new Method(\"containsValue\", new Parameterlist([\r\n            { identifier: \"value\", type: typeV, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let value: Value = parameters[1];\r\n                let ah: MapHelper = o.intrinsicData[\"MapHelper\"];\r\n\r\n                return ah.containsValue(value);\r\n\r\n            },  // no implementation!\r\n            false, false, \"Gibt genau dann true zurück, wenn die Map den Wert enthält.\"));\r\n\r\n        this.addMethod(new Method(\"get\", new Parameterlist([\r\n            { identifier: \"key\", type: typeK, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), typeV,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let key: Value = parameters[1];\r\n                let ah: MapHelper = o.intrinsicData[\"MapHelper\"];\r\n\r\n                let v: Value = ah.get(key);\r\n                return v == null ? null : v.value;\r\n\r\n            },  // no implementation!\r\n            false, false, \"Gibt den Wert zum Schlüssel key zurück. Gibt null zurück, falls die Map zum Schlüssel key keinen Wert enthält.\"));\r\n\r\n\r\n        this.addMethod(new Method(\"isEmpty\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: MapHelper = o.intrinsicData[\"MapHelper\"];\r\n\r\n                return ah.isEmpty();\r\n\r\n            },\r\n            false, false, \"Testet, ob die HashMap leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"size\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: MapHelper = o.intrinsicData[\"MapHelper\"];\r\n\r\n                return ah.size();\r\n\r\n            },\r\n            false, false, \"Gibt die Anzahl der key-value-pairs der HashMap zurück.\"));\r\n\r\n        this.addMethod(new Method(\"toString\", new Parameterlist([]), stringPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: MapHelper = o.intrinsicData[\"MapHelper\"];\r\n\r\n                return ah.to_String();\r\n\r\n            }, false, false));\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass } from \"../../compiler/types/Class.js\";\r\nimport { booleanPrimitiveType, doublePrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { PolygonHelper } from \"./Polygon.js\";\r\n\r\nexport class TriangleClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Triangle\", module, \"Dreieck\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"FilledShape\"));\r\n\r\n        this.addMethod(new Method(\"Triangle\", new Parameterlist([\r\n            { identifier: \"x1\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y1\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"x2\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y2\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"x3\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y3\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let pointsNumber: number[] = [];\r\n                for(let i = 1; i <= 6; i++){\r\n                    pointsNumber.push(parameters[i].value);\r\n                }\r\n\r\n                let ph = new PolygonHelper(pointsNumber, true, module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = ph;\r\n\r\n            }, false, false, 'Instanziert ein neues Dreieck.', true));\r\n\r\n        this.addMethod(new Method(\"copy\", new Parameterlist([\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: PolygonHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"copy\")) return;\r\n\r\n                return sh.getCopy(<Klass>o.class);\r\n\r\n            }, false, false, 'Erstellt eine Kopie des Triangle-Objekts und git sie zurück.', false));\r\n\r\n        }\r\n\r\n}\r\n","import { TokenType } from \"../../compiler/lexer/Token.js\";\r\nimport { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass } from \"../../compiler/types/Class.js\";\r\nimport { Enum, EnumRuntimeObject } from \"../../compiler/types/Enum.js\";\r\nimport { intPrimitiveType, stringPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\n\r\nexport type LocalDateTimeIntrinsicData = {\r\n    date: Date\r\n}\r\n\r\nexport class LocalDateTimeClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"LocalDateTime\", module, \"Ein LocalDate-Objekt speichert einen Zeitpunkt (Datum und Uhrzeit).\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n        let dayOfWeekType = <Enum>module.typeStore.getType(\"DayOfWeek\");\r\n        let MonthType = <Enum>module.typeStore.getType(\"Month\");\r\n\r\n        // this.staticClass.classObject = new RuntimeObject(this.staticClass);\r\n        // this.staticClass.classObject.initializeAttributeValues();\r\n\r\n        this.addMethod(new Method(\"now\", new Parameterlist([]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = new RuntimeObject(this);\r\n\r\n                var today = new Date();\r\n\r\n                let intrinsicData: LocalDateTimeIntrinsicData = {\r\n                    date: today\r\n                };\r\n\r\n                o.intrinsicData = intrinsicData;\r\n\r\n                return o;\r\n\r\n            }, false, true, 'Holt den aktuellen Zeitpunkt von der Systemuhr des Rechners und gibt ihn als LocalDateTime-Objekt zurück.'\r\n            , false));\r\n\r\n        this.addMethod(new Method(\"of\", new Parameterlist([\r\n            { identifier: \"year\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"month\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"dayOfMonth\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"hour\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"minute\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"second\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = new RuntimeObject(this);\r\n                let year: number = Math.trunc(parameters[1].value);\r\n                let month: number = Math.trunc(parameters[2].value);\r\n                let dayOfMonth: number = Math.trunc(parameters[3].value);\r\n                let hour: number = Math.trunc(parameters[4].value);\r\n                let minute: number = Math.trunc(parameters[5].value);\r\n                let second: number = Math.trunc(parameters[6].value);\r\n\r\n                var date = new Date(year, month - 1, dayOfMonth, hour, minute, second);\r\n\r\n                let intrinsicData: LocalDateTimeIntrinsicData = {\r\n                    date: date\r\n                };\r\n\r\n                o.intrinsicData = intrinsicData;\r\n\r\n                return o;\r\n\r\n            }, false, true, 'Gibt ein LocalDateTime-Objekt zurück, das den durch year, month (1 - 12), dayOfMonth, hour, minute, second beschriebenen Zeitpunkt repräsentiert.'\r\n            , false));\r\n\r\n        this.addMethod(new Method(\"of\", new Parameterlist([\r\n            { identifier: \"year\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"month\", type: MonthType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"dayOfMonth\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"hour\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"minute\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"second\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = new RuntimeObject(this);\r\n                let year: number = Math.trunc(parameters[1].value);\r\n                let month: EnumRuntimeObject = parameters[2].value;\r\n                let dayOfMonth: number = Math.trunc(parameters[3].value);\r\n                let hour: number = Math.trunc(parameters[4].value);\r\n                let minute: number = Math.trunc(parameters[5].value);\r\n                let second: number = Math.trunc(parameters[6].value);\r\n\r\n                var date = new Date(year, month.enumValue.ordinal, dayOfMonth, hour, minute, second);\r\n\r\n                let intrinsicData: LocalDateTimeIntrinsicData = {\r\n                    date: date\r\n                };\r\n\r\n                o.intrinsicData = intrinsicData;\r\n\r\n                return o;\r\n\r\n            }, false, true, 'Gibt ein LocalDateTime-Objekt zurück, das den durch year, month (1 - 12), dayOfMonth, hour, minute, second beschriebenen Zeitpunkt repräsentiert.'\r\n            , false));\r\n\r\n        this.addMethod(new Method(\"plusDays\", new Parameterlist([\r\n            { identifier: \"days\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), this,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let days: number = Math.trunc(parameters[1].value);\r\n\r\n                let oldDate: Date = (<LocalDateTimeIntrinsicData>(o.intrinsicData)).date;\r\n                let newDate: Date = new Date(oldDate.getTime() + days*24*3600*1000);\r\n\r\n                let o1: RuntimeObject = new RuntimeObject(this);\r\n\r\n                let intrinsicData: LocalDateTimeIntrinsicData = {\r\n                    date: newDate\r\n                };\r\n\r\n                o1.intrinsicData = intrinsicData;\r\n\r\n                return o1;\r\n\r\n            }, false, false, 'Gibt ein neues LocalDateTime-Objekt zurück, das einen Zeitpunkt repräsentiert, der um die übergebene Anzahl von Tagen später liegt.', false));\r\n\r\n        this.addMethod(new Method(\"minusDays\", new Parameterlist([\r\n            { identifier: \"days\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), this,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let days: number = Math.trunc(parameters[1].value);\r\n\r\n                let oldDate: Date = (<LocalDateTimeIntrinsicData>(o.intrinsicData)).date;\r\n                let newDate: Date = new Date(oldDate.getTime() - days*24*3600*1000);\r\n\r\n                let o1: RuntimeObject = new RuntimeObject(this);\r\n\r\n                let intrinsicData: LocalDateTimeIntrinsicData = {\r\n                    date: newDate\r\n                };\r\n\r\n                o1.intrinsicData = intrinsicData;\r\n\r\n                return o1;\r\n\r\n            }, false, false, 'Gibt ein neues LocalDateTime-Objekt zurück, das einen Zeitpunkt repräsentiert, der um die übergebene Anzahl von Tagen früher liegt.', false));\r\n\r\n        this.addMethod(new Method(\"compareTo\", new Parameterlist([\r\n            { identifier: \"date\", type: this, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let o1: RuntimeObject = parameters[1].value;\r\n\r\n                let oldMs: number = (<LocalDateTimeIntrinsicData>(o.intrinsicData)).date.getTime();\r\n                let newMs: number = (<LocalDateTimeIntrinsicData>(o1.intrinsicData)).date.getTime();\r\n\r\n                return Math.sign(oldMs - newMs);\r\n\r\n            }, false, false, 'Gibt 1 zurück, falls das Datum größer ist als das übergebene, 0, falls sie gleich sind und -1, falls das Datum kleiner ist als das übergebene.', false));\r\n\r\n        this.addMethod(new Method(\"until\", new Parameterlist([\r\n            { identifier: \"date\", type: this, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let o1: RuntimeObject = parameters[1].value;\r\n\r\n                let oldMs: number = (<LocalDateTimeIntrinsicData>(o.intrinsicData)).date.getTime();\r\n                let newMs: number = (<LocalDateTimeIntrinsicData>(o1.intrinsicData)).date.getTime();\r\n\r\n                return (oldMs - newMs)/(24*3600);\r\n\r\n            }, false, false, 'Gibt zurück, wie viele Tage (gerundet) zwischen den beiden Zeitpunkten liegen.', false));\r\n\r\n        this.addMethod(new Method(\"getYear\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                return (<LocalDateTimeIntrinsicData>(o.intrinsicData)).date.getFullYear();\r\n\r\n            }, false, false, 'Gibt das Jahr zurück.', false));\r\n\r\n        this.addMethod(new Method(\"getMonthValue\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                return (<LocalDateTimeIntrinsicData>(o.intrinsicData)).date.getMonth() + 1;\r\n\r\n            }, false, false, 'Gibt den Monat als Zahl zurück (Januar == 1, Februar == 2, ..., Dezember == 12).', false));\r\n\r\n        this.addMethod(new Method(\"getDayOfMonth\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                return (<LocalDateTimeIntrinsicData>(o.intrinsicData)).date.getDate();\r\n\r\n            }, false, false, 'Gibt den Tag innerhalb des Monats zurück (Zahl von 1 bis 31).', false));\r\n\r\n        this.addMethod(new Method(\"getHour\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                return (<LocalDateTimeIntrinsicData>(o.intrinsicData)).date.getHours();\r\n\r\n            }, false, false, 'Gibt die Stunde innerhalb des Tages zurück.', false));\r\n\r\n        this.addMethod(new Method(\"getMinute\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                return (<LocalDateTimeIntrinsicData>(o.intrinsicData)).date.getMinutes();\r\n\r\n            }, false, false, 'Gibt die Minute zurück.', false));\r\n\r\n        this.addMethod(new Method(\"getSecond\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                return (<LocalDateTimeIntrinsicData>(o.intrinsicData)).date.getSeconds();\r\n\r\n            }, false, false, 'Gibt die Sekunde zurück.', false));\r\n\r\n        this.addMethod(new Method(\"toString\", new Parameterlist([\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let date = (<LocalDateTimeIntrinsicData>(o.intrinsicData)).date;\r\n\r\n                let td = (value: number) => {\r\n                    if(value < 10) return \"0\" + value;\r\n                    return \"\" + value;\r\n                }\r\n\r\n                return `${td(date.getDate())}.${td(date.getMonth() + 1)}.${td(date.getFullYear())} ${td(date.getHours())}:${td(date.getMinutes())}:${td(date.getSeconds())}`;\r\n\r\n            }, false, false, 'Gibt den Wert in der Form 12.03.2007 10:15:30 zurück.', false));\r\n\r\n        this.addMethod(new Method(\"getDayOfWeek\", new Parameterlist([\r\n        ]), dayOfWeekType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let dow = (<LocalDateTimeIntrinsicData>(o.intrinsicData)).date.getDay();\r\n                return dayOfWeekType.enumInfoList[dow - 1].object;\r\n\r\n            }, false, false, 'Gibt die den Wochentag zurück. Falls Du ihn als Zahl (0 == Montag, ...) benötigst, nutze getDayOfWeek().toOrdinal(). ', false));\r\n\r\n        this.addMethod(new Method(\"getMonth\", new Parameterlist([\r\n        ]), MonthType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let monthIndex = (<LocalDateTimeIntrinsicData>(o.intrinsicData)).date.getMonth();\r\n                return MonthType.enumInfoList[monthIndex].object;\r\n\r\n            }, false, false, 'Gibt die den Monat zurück. Falls Du ihn als Zahl (1 == Januar, ...) benötigst, nutze getMonthValue()', false));\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\nexport class DayOfWeekEnum extends Enum {\r\n\r\n    constructor(module: Module) {\r\n        super(\"DayOfWeek\", module, [\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"Montag\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"Dienstag\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"Mittwoch\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"Donnerstag\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"Freitag\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"Samstag\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"Sonntag\"\r\n            },\r\n        ]);\r\n\r\n        this.documentation = \"Wochentag\"\r\n    }\r\n}\r\n\r\nexport class MonthEnum extends Enum {\r\n\r\n    constructor(module: Module) {\r\n        super(\"Month\", module, [\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"Januar\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"Februar\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"März\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"April\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"Mai\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"Juni\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"Juli\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"August\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"Septemter\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"Oktober\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"November\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"Dezember\"\r\n            },\r\n        ]);\r\n\r\n        this.documentation = \"Monat\"\r\n    }\r\n}","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass } from \"../../compiler/types/Class.js\";\r\nimport { doublePrimitiveType, intPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { PolygonHelper } from \"./Polygon.js\";\r\n\r\nexport class LineClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Line\", module, \"Strecke (gerade Linie zwischen zwei Punkten)\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"FilledShape\"));\r\n\r\n        this.addMethod(new Method(\"Line\", new Parameterlist([\r\n            { identifier: \"x1\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y1\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"x2\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y2\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x1: number = parameters[1].value;\r\n                let y1: number = parameters[2].value;\r\n                let x2: number = parameters[3].value;\r\n                let y2: number = parameters[4].value;\r\n\r\n                let pointsNumber: number[] = [x1, y1, x2, y2];\r\n\r\n                let ph = new PolygonHelper(pointsNumber, false, module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = ph;\r\n\r\n            }, false, false, 'Instanziert eine Strecke mit Anfangspunkt (x1/y1) und Endpunkt (x2/y2).', true));\r\n\r\n            this.addMethod(new Method(\"copy\", new Parameterlist([\r\n            ]), this,\r\n                (parameters) => {\r\n    \r\n                    let o: RuntimeObject = parameters[0].value;\r\n                    let sh: PolygonHelper = o.intrinsicData[\"Actor\"];\r\n    \r\n                    if (sh.testdestroyed(\"copy\")) return;\r\n    \r\n                    return sh.getCopy(<Klass>o.class);\r\n    \r\n                }, false, false, 'Erstellt eine Kopie der Strecke und git sie zurück.', false));\r\n\r\n                this.addMethod(new Method(\"setPoint\", new Parameterlist([\r\n                    { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n                    { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n                    { identifier: \"index\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n                ]), null,\r\n                    (parameters) => {\r\n        \r\n                        let o: RuntimeObject = parameters[0].value;\r\n                        let x: number = parameters[1].value;\r\n                        let y: number = parameters[2].value;\r\n                        let index: number = parameters[3].value;\r\n                        let sh: PolygonHelper = o.intrinsicData[\"Actor\"];\r\n        \r\n                        if (sh.testdestroyed(\"setPoint\")) return;\r\n        \r\n                        sh.setPoint(x, y, index - 1);\r\n        \r\n                    }, false, false, 'Ändert einen Punkt des Polygons. index == 1 bedeutet: Anfangspunkt; index == 2 bedeutet: Endpunkt', false));\r\n        \r\n                this.addMethod(new Method(\"setPoints\", new Parameterlist([\r\n                    { identifier: \"x1\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n                    { identifier: \"y1\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n                    { identifier: \"x2\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n                    { identifier: \"y2\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n                ]), null,\r\n                    (parameters) => {\r\n        \r\n                        let o: RuntimeObject = parameters[0].value;\r\n                        let x1: number = parameters[1].value;\r\n                        let y1: number = parameters[2].value;\r\n                        let x2: number = parameters[3].value;\r\n                        let y2: number = parameters[4].value;\r\n                                let sh: PolygonHelper = o.intrinsicData[\"Actor\"];\r\n        \r\n                        if (sh.testdestroyed(\"setPoints\")) return;\r\n        \r\n                        sh.setPoints(x1, y1, x2, y2);\r\n        \r\n                    }, false, false, 'Ändert die Punkte der Strecke. (x1/y1) ist der neue Anfangspunkt, (x2/y2) ist der neue Endpunkt.', false));\r\n        \r\n     \r\n    }\r\n\r\n}\r\n\r\n","import { Module } from \"../compiler/parser/Module.js\";\r\nimport { Klass, Visibility } from \"../compiler/types/Class.js\";\r\nimport { doublePrimitiveType, stringPrimitiveType } from \"../compiler/types/PrimitiveTypes.js\";\r\nimport { Attribute, Method, Parameterlist, Value } from \"../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../interpreter/RuntimeObject.js\";\r\n\r\nexport class Vector2Class extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Vector2\", module, \"Repräsentiert einen zweidimensionalen Vektor\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n\r\n        this.addMethod(new Method(\"Vector2\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n\r\n                let valueMap: Map<string, Value> = new Map();\r\n                valueMap.set(\"x\", {type: doublePrimitiveType, value: x});\r\n                valueMap.set(\"y\", {type: doublePrimitiveType, value: y});\r\n                o.attributeValues.set(\"Vector2\", valueMap);\r\n\r\n            }, false, false, 'Instanziert einen neuen zweidimensionalen Vektor mit den Komponenten x und y.', true));\r\n\r\n        this.addMethod(new Method(\"fromPolarCoordinates\", new Parameterlist([\r\n            { identifier: \"r\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },\r\n            { identifier: \"alphaDeg\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = new RuntimeObject(this);\r\n                let r: number = parameters[1].value;\r\n                let alphaDeg: number = parameters[2].value;\r\n\r\n                alphaDeg *= Math.PI/180.0;\r\n\r\n                let valueMap: Map<string, Value> = new Map();\r\n                valueMap.set(\"x\", {type: doublePrimitiveType, value: Math.cos(alphaDeg) * r});\r\n                valueMap.set(\"y\", {type: doublePrimitiveType, value: Math.sin(alphaDeg) * r});\r\n                o.attributeValues.set(\"Vector2\", valueMap);\r\n\r\n                return o;\r\n\r\n            }, false, true, 'Gibt einen neuen zweidimensionalen Vektor zurück, der mit den Polarkoordinaten (r/alphaDeg) gebildet wird. Datei ist r (Abstand zum Ursprung des Koordinatensystems) und alphaDeg (Winkel zur positiven x-Achse in Grad).', false));\r\n\r\n        this.addMethod(new Method(\"toString\", new Parameterlist([\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let valueMap: Map<string, Value> = o.attributeValues.get(\"Vector2\");\r\n                let x: number = valueMap.get(\"x\").value;\r\n                let y: number = valueMap.get(\"y\").value;\r\n\r\n                return `(${x}/${y})`;\r\n\r\n            }, false, false, 'Gibt den Vektor als Zeichenkette in der Form \"(x/y)\" zurück.', false));\r\n\r\n        this.addMethod(new Method(\"getAngleDeg\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let valueMap: Map<string, Value> = o.attributeValues.get(\"Vector2\");\r\n                let x: number = valueMap.get(\"x\").value;\r\n                let y: number = valueMap.get(\"y\").value;\r\n\r\n                let angle = Math.atan2(y, x)/Math.PI*180;\r\n\r\n                return angle >= 0 ? angle : 360 + angle;\r\n\r\n            }, false, false, 'Gibt den zur positiven x-Achse in Grad zurück.', false));\r\n\r\n        this.addMethod(new Method(\"getAngleRad\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let valueMap: Map<string, Value> = o.attributeValues.get(\"Vector2\");\r\n                let x: number = valueMap.get(\"x\").value;\r\n                let y: number = valueMap.get(\"y\").value;\r\n\r\n                let angle = Math.atan2(y, x);\r\n\r\n                return angle >= 0 ? angle : Math.PI * 2 + angle;\r\n\r\n            }, false, false, 'Gibt den zur positiven x-Achse im Bogenmaß zurück.', false));\r\n\r\n        this.addMethod(new Method(\"getLength\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let valueMap: Map<string, Value> = o.attributeValues.get(\"Vector2\");\r\n                let x: number = valueMap.get(\"x\").value;\r\n                let y: number = valueMap.get(\"y\").value;\r\n\r\n                return Math.sqrt(x*x+y*y);\r\n\r\n            }, false, false, 'Gibt die Länge des Vectors zurück.', false));\r\n\r\n        this.addMethod(new Method(\"toUnitVector\", new Parameterlist([\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let valueMap: Map<string, Value> = o.attributeValues.get(\"Vector2\");\r\n                let x: number = valueMap.get(\"x\").value;\r\n                let y: number = valueMap.get(\"y\").value;\r\n\r\n                let o1: RuntimeObject = new RuntimeObject(this);\r\n                let length: number = Math.sqrt(x*x + y*y);\r\n\r\n                if(Math.abs(length) > 0.00000000001){\r\n                    x /= length;\r\n                    y /= length;\r\n                } else {\r\n                    x = 0;\r\n                    y = 0;\r\n                }\r\n\r\n                let valueMap1: Map<string, Value> = new Map();\r\n                valueMap1.set(\"x\", {type: doublePrimitiveType, value: x});\r\n                valueMap1.set(\"y\", {type: doublePrimitiveType, value: y});\r\n                o1.attributeValues.set(\"Vector2\", valueMap1);\r\n\r\n                return o1;\r\n\r\n            }, false, false, 'Gibt den zum Vektor zugehörigen Einheitsvektor (d.h. den Vektor mit derselben Richtung, aber der Länge 1) zurück.', false));\r\n\r\n        this.addMethod(new Method(\"setLength\", new Parameterlist([\r\n            { identifier: \"length\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let valueMap: Map<string, Value> = o.attributeValues.get(\"Vector2\");\r\n                let x: number = valueMap.get(\"x\").value;\r\n                let y: number = valueMap.get(\"y\").value;\r\n\r\n                let length: number = parameters[1].value;\r\n\r\n                let l = Math.sqrt(x*x + y*y);\r\n                if(l > 0){\r\n\r\n                    valueMap.get(\"x\").value = x/l*length;\r\n                    valueMap.get(\"y\").value = y/l*length;\r\n\r\n                }\r\n\r\n            }, false, false, 'Ändert den Vektor so, dass er seine Richtung beibehält, aber auf die angegebene Länge gestreckt/gestaucht wird.', false));\r\n\r\n        this.addMethod(new Method(\"plus\", new Parameterlist([\r\n            { identifier: \"vector\", type: this, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let valueMap: Map<string, Value> = o.attributeValues.get(\"Vector2\");\r\n                let x: number = valueMap.get(\"x\").value;\r\n                let y: number = valueMap.get(\"y\").value;\r\n\r\n                let o1: RuntimeObject = parameters[1].value;\r\n                let valueMap1: Map<string, Value> = o1.attributeValues.get(\"Vector2\");\r\n                let x1: number = valueMap1.get(\"x\").value;\r\n                let y1: number = valueMap1.get(\"y\").value;\r\n\r\n                let oRet: RuntimeObject = new RuntimeObject(this);\r\n                let valueMapRet: Map<string, Value> = new Map();\r\n                valueMapRet.set(\"x\", {type: doublePrimitiveType, value: x + x1});\r\n                valueMapRet.set(\"y\", {type: doublePrimitiveType, value: y + y1});\r\n                oRet.attributeValues.set(\"Vector2\", valueMapRet);\r\n\r\n                return oRet;\r\n\r\n            }, false, false, 'Gibt die Summe zurück, die sich aus Addition dieses Vektor mit dem übergebenen Vektor ergibt. WICHTIG: Diese Methode ändert das Objekt nicht, für das sie aufgerufen wurde!', false));\r\n\r\n        this.addMethod(new Method(\"minus\", new Parameterlist([\r\n            { identifier: \"vector\", type: this, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let valueMap: Map<string, Value> = o.attributeValues.get(\"Vector2\");\r\n                let x: number = valueMap.get(\"x\").value;\r\n                let y: number = valueMap.get(\"y\").value;\r\n\r\n                let o1: RuntimeObject = parameters[1].value;\r\n                let valueMap1: Map<string, Value> = o1.attributeValues.get(\"Vector2\");\r\n                let x1: number = valueMap1.get(\"x\").value;\r\n                let y1: number = valueMap1.get(\"y\").value;\r\n\r\n                let oRet: RuntimeObject = new RuntimeObject(this);\r\n                let valueMapRet: Map<string, Value> = new Map();\r\n                valueMapRet.set(\"x\", {type: doublePrimitiveType, value: x - x1});\r\n                valueMapRet.set(\"y\", {type: doublePrimitiveType, value: y - y1});\r\n                oRet.attributeValues.set(\"Vector2\", valueMapRet);\r\n\r\n                return oRet;\r\n\r\n            }, false, false, 'Gibt die Differenz zurück, die sich aus Subtraktion des übergebenen Vektors von diesem Vektor ergibt. WICHTIG: Diese Methode ändert das Objekt nicht, für das sie aufgerufen wurde!', false));\r\n\r\n        this.addMethod(new Method(\"scalarProduct\", new Parameterlist([\r\n            { identifier: \"vector1\", type: this, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },\r\n            { identifier: \"vector2\", type: this, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[1].value;\r\n\r\n                let valueMap: Map<string, Value> = o.attributeValues.get(\"Vector2\");\r\n                let x: number = valueMap.get(\"x\").value;\r\n                let y: number = valueMap.get(\"y\").value;\r\n\r\n                let o1: RuntimeObject = parameters[2].value;\r\n                let valueMap1: Map<string, Value> = o1.attributeValues.get(\"Vector2\");\r\n                let x1: number = valueMap1.get(\"x\").value;\r\n                let y1: number = valueMap1.get(\"y\").value;\r\n\r\n                return x*x1 + y*y1;\r\n\r\n            }, false, true, 'Gibt das Skalarprodukt der beiden Vektoren zurück.', false));\r\n\r\n        \r\n        this.addMethod(new Method(\"scaledBy\", new Parameterlist([\r\n            { identifier: \"scalar\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let valueMap: Map<string, Value> = o.attributeValues.get(\"Vector2\");\r\n                let x: number = valueMap.get(\"x\").value;\r\n                let y: number = valueMap.get(\"y\").value;\r\n\r\n                let s: number = parameters[1].value;\r\n\r\n                let oRet: RuntimeObject = new RuntimeObject(this);\r\n                let valueMapRet: Map<string, Value> = new Map();\r\n                valueMapRet.set(\"x\", {type: doublePrimitiveType, value: x*s});\r\n                valueMapRet.set(\"y\", {type: doublePrimitiveType, value: y*s});\r\n                oRet.attributeValues.set(\"Vector2\", valueMapRet);\r\n\r\n                return oRet;\r\n\r\n            }, false, false, 'Gibt das Produkt zurück, das sich aus Multiplikation dieses Vektor mit dem übergebenen Skalar ergibt. WICHTIG: Diese Methode ändert das Objekt nicht, für das sie aufgerufen wurde!', false));\r\n\r\n        this.addMethod(new Method(\"rotatedBy\", new Parameterlist([\r\n            { identifier: \"angleDeg\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let valueMap: Map<string, Value> = o.attributeValues.get(\"Vector2\");\r\n                let x: number = valueMap.get(\"x\").value;\r\n                let y: number = valueMap.get(\"y\").value;\r\n\r\n                let angle: number = -parameters[1].value*Math.PI/180;\r\n                let sin: number = Math.sin(angle);\r\n                let cos: number = Math.cos(angle);\r\n\r\n                let oRet: RuntimeObject = new RuntimeObject(this);\r\n                let valueMapRet: Map<string, Value> = new Map();\r\n                valueMapRet.set(\"x\", {type: doublePrimitiveType, value: x*cos - y*sin});\r\n                valueMapRet.set(\"y\", {type: doublePrimitiveType, value: x*sin + y*cos});\r\n                oRet.attributeValues.set(\"Vector2\", valueMapRet);\r\n\r\n                return oRet;\r\n\r\n            }, false, false, 'Gibt den um den übergebenen Winkel (in Grad) rotierten Vektor zurück. Positiver Winkel => Rotation GEGEN DEN Uhrzeigersinn. WICHTIG: Diese Methode ändert das Objekt nicht, für das sie aufgerufen wurde!', false));\r\n\r\n                    \r\n            this.addMethod(new Method(\"distance\", new Parameterlist([\r\n                { identifier: \"x1\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n                { identifier: \"y1\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n                { identifier: \"x2\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n                { identifier: \"y2\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n            ]), doublePrimitiveType,\r\n                (parameters) => {\r\n                    let x1: number = <number>parameters[1].value;\r\n                    let y1: number = <number>parameters[2].value;\r\n                    let x2: number = <number>parameters[3].value;\r\n                    let y2: number = <number>parameters[4].value;\r\n                    let dx = x2 - x1;\r\n                    let dy = y2 - y1;\r\n                    return Math.sqrt(dx*dx+dy*dy);\r\n                }, false, true, \"Berechnet den Abstand der Punkte (x1/y1) und (x2/y2).\"));\r\n\r\n\r\n\r\n        this.addAttribute(new Attribute(\"x\", doublePrimitiveType,\r\n            null, false, Visibility.public, false, \"x-Komponente des Vektors\"));\r\n\r\n        this.addAttribute(new Attribute(\"y\", doublePrimitiveType,\r\n            null, false, Visibility.public, false, \"y-Komponente des Vektors\"));\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Interface, Klass } from \"../../compiler/types/Class.js\";\r\nimport { doublePrimitiveType, intPrimitiveType, voidPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\n\r\nexport class MouseListenerInterface extends Interface {\r\n\r\n    constructor(module: Module) {\r\n        super(\"MouseListener\", module, \"Interface mit Methoden, die aufgerufen werden, wenn Maus-Ereignisse eintreten. Ein Objekt dieser Klasse muss zuvor aber mit world.addMouseListener() registriert werden, wobei world das aktuelle World-Objekt ist.\");\r\n\r\n        this.addMethod(new Method(\"onMouseUp\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"button\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            null,  // no implementation!\r\n            false, false, \"Wird aufgerufen, wenn eine Maustaste über dem Grafikbereich losgelassen wird.\"));\r\n\r\n        this.addMethod(new Method(\"onMouseDown\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"button\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            null,  // no implementation!\r\n            false, false, \"Wird aufgerufen, wenn eine Maustaste über dem Grafikbereich gedrückt wird.\"));\r\n\r\n        this.addMethod(new Method(\"onMouseMove\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            null,  // no implementation!\r\n            false, false, \"Wird aufgerufen, wenn der Mauszeiger über dem Grafikbereich bewegt wird.\"));\r\n\r\n        this.addMethod(new Method(\"onMouseEnter\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            null,  // no implementation!\r\n            false, false, \"Wird aufgerufen, wenn der Mauszeiger in den Grafikbereich hineinbewegt wird.\"));\r\n\r\n        this.addMethod(new Method(\"onMouseLeave\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            null,  // no implementation!\r\n            false, false, \"Wird aufgerufen, wenn der Mauszeiger aus dem Grafikbereich herausbewegt wird.\"));\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\nexport class MouseAdapterClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n        super(\"MouseAdapter\", module, \"Klasse mit leeren Methoden, die aufgerufen werden, wenn Maus-Ereignisse eintreten. Ein Objekt einer Kindklasse dieser Klasse muss zuvor aber mit world.addMouseListener() registriert werden, wobei world das aktuelle World-Objekt ist.\");\r\n\r\n        let mouseListenerType = <MouseListenerInterface>module.typeStore.getType(\"MouseListener\");\r\n\r\n        this.implements.push(mouseListenerType);\r\n\r\n        this.addMethod(new Method(\"onMouseUp\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"button\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            null,  // no implementation!\r\n            false, false, \"Wird aufgerufen, wenn eine Maustaste über dem Grafikbereich losgelassen wird.\"));\r\n\r\n        this.addMethod(new Method(\"onMouseDown\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"button\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            null,  // no implementation!\r\n            false, false, \"Wird aufgerufen, wenn eine Maustaste über dem Grafikbereich gedrückt wird.\"));\r\n\r\n        this.addMethod(new Method(\"onMouseMove\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            null,  // no implementation!\r\n            false, false, \"Wird aufgerufen, wenn der Mauszeiger über dem Grafikbereich bewegt wird.\"));\r\n\r\n        this.addMethod(new Method(\"onMouseEnter\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            null,  // no implementation!\r\n            false, false, \"Wird aufgerufen, wenn der Mauszeiger in den Grafikbereich hineinbewegt wird.\"));\r\n\r\n        this.addMethod(new Method(\"onMouseLeave\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            null,  // no implementation!\r\n            false, false, \"Wird aufgerufen, wenn der Mauszeiger aus dem Grafikbereich herausbewegt wird.\"));\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass, Visibility } from \"../../compiler/types/Class.js\";\r\nimport { intPrimitiveType, objectType, stringPrimitiveType, voidPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Attribute, Method, Parameterlist, Value } from \"../../compiler/types/Types.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { WebSocketRequestConnect, WebSocketRequestDisconnect, WebSocketRequestSendToAll, WebSocketRequestSendToClient, WebSocketResponseOtherClientDisconnected, WebSocketResponseMessage, WebSocketResponseNewClient, WebSocketResponse } from \"../../communication/Data.js\";\r\nimport { WebSocketHelper } from \"./WebSocket.js\";\r\n\r\nexport class WebSocketClientClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n        super(\"WebSocketClient\", module, \"Ein Objekt der Klasse WebSocketClient repräsentiert einen anderen Rechner, mit dem dieser Rechner über den WebSocket in Kontakt steht.\");\r\n\r\n        let objectType = <Klass>module.typeStore.getType(\"Object\");\r\n        this.setBaseClass(objectType);\r\n\r\n        this.addMethod(new Method(\"send\", new Parameterlist([\r\n            { identifier: \"message\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"messageType\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let wh: WebSocketClientHelper = o.intrinsicData[\"Helper\"];\r\n                let message: string = parameters[1].value;\r\n                let messageType: string = parameters[2].value;\r\n\r\n                wh.send(message, messageType);\r\n\r\n            }, false, false, 'Sendet Daten (message) an diesen Client. Den messageType kannst Du frei wählen. Die client bekommt ihn zusammen mit den Daten übermittelt. Tipp: Du kannst auch Objekte senden, musst sie dazu aber vorher serialisieren, d.h. mithilfe der Methode toJson in eine Zeichenkette verwandeln.', false));\r\n\r\n            this.addMethod(new Method(\"setUserData\", new Parameterlist([\r\n                { identifier: \"schlüssel\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n                { identifier: \"wert\", type: objectType, declaration: null, usagePositions: null, isFinal: true },\r\n            ]), voidPrimitiveType,\r\n                (parameters) => {\r\n    \r\n                    let o: RuntimeObject = parameters[0].value;\r\n                    let wh: WebSocketClientHelper = o.intrinsicData[\"Helper\"];\r\n                    let key: string = parameters[1].value;\r\n                    let value: RuntimeObject = parameters[2].value;\r\n    \r\n                    wh.setUserData(key, value);\r\n    \r\n                }, false, false, 'Mit dieser Methode kannst Du beliebige Objektreferenzen in diesem WebSocketClient-Objekt speichern. Den Schlüssel kannst Du dabei frei wählen und später nutzen, um den Wert durch die Methode getUserData wieder zu holen.', false));\r\n    \r\n            this.addMethod(new Method(\"getUserData\", new Parameterlist([\r\n                { identifier: \"schlüssel\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            ]), objectType,\r\n                (parameters) => {\r\n    \r\n                    let o: RuntimeObject = parameters[0].value;\r\n                    let wh: WebSocketClientHelper = o.intrinsicData[\"Helper\"];\r\n                    let key: string = parameters[1].value;\r\n    \r\n                    return wh.getUserData(key);\r\n    \r\n                }, false, false, 'Mit dieser Methode kannst Du eine Objektreferenz erhalten, die Du zuvor mit der Methode setUserData gespeichert hast. Bemerkung1: Diese Methode entfernt die Objekreferenz nicht aus dem WebSocketClient-Objekt. Bemerkung2: Damit Du alle Methoden des erhaltenen Objekts aufrufen kannst, musst Du dem Computer mitteilen, von welcher Klasse es ist (\"casten\"). Das geht für die Klasse MeineNutzerDaten bspw. so: MeineNutzerDaten mnd = (MeineNutzerDaten)client.getUserData(\"schlüssel\");', false));\r\n\r\n            let getterList: { att: string, getter: string, help: string}[] = [{att: \"rufname\", getter: \"getFirstName\", help: \"Rufnamen\"},\r\n             {att: \"familienname\", getter: \"getLastName\", help: \"Familiennamen\"}, \r\n            {att: \"username\", getter: \"getUsername\", help: \"Benutzernamen\"}, {att: \"nickname\", getter: \"getNickname\", help: \"Spielernamen\"}  ];\r\n\r\n            for( let getter of getterList){\r\n                this.addMethod(new Method(getter.getter, new Parameterlist([\r\n                ]), stringPrimitiveType,\r\n                    (parameters) => {\r\n        \r\n                        let o: RuntimeObject = parameters[0].value;\r\n                        let wh: WebSocketClientHelper = o.intrinsicData[\"Helper\"];\r\n        \r\n                        return wh[getter.att];\r\n        \r\n                    }, false, false, 'Gibt den ' + getter.help + \" des Clients zurück.\", false));\r\n\r\n            }\r\n\r\n            this.addMethod(new Method(\"getIndex\", new Parameterlist([\r\n            ]), intPrimitiveType,\r\n                (parameters) => {\r\n    \r\n                    let o: RuntimeObject = parameters[0].value;\r\n                    let wh: WebSocketClientHelper = o.intrinsicData[\"Helper\"];\r\n    \r\n                    return wh.index;\r\n    \r\n                }, false, false, 'Gehört ein Client zu einer mit findClient bzw. findClients gefundenen Gruppe, so erhältst Du mit dieser Methode die \"Rangfolge\" dieses Clients in dieser Gruppe. Allen Clients wird dieselbe Rangfolgeordnung vom Server mitgeteilt. So lässt sich bspw. einfach festlegen, welcher Client eine besondere Rolle (Server) in der Gruppe erhalten soll (z.B. Client mit Index 1). Bemerkung: Der Index ist eine Zahl zwischen 1 und der Anzahl der Clients in der Gruppe.', false));\r\n\r\n    \r\n    }\r\n\r\n\r\n}\r\n\r\nexport class WebSocketClientHelper {\r\n\r\n    keyValueStore: {[key: string]: RuntimeObject} = {};\r\n    index: number = 0;\r\n\r\n    public connected: boolean = true;\r\n\r\n    constructor(public runtimeObject: RuntimeObject, private webSocketHelper: WebSocketHelper, \r\n        private id: number, public rufname: string, public familienname: string, public username: string, public nickname: string) {\r\n\r\n    }\r\n\r\n    send(message: string, messageType: string){\r\n        this.webSocketHelper.sendToClient(this.id, message, messageType);       \r\n    }\r\n\r\n    getUserData(key: string): any {\r\n        return this.keyValueStore[key];\r\n    }\r\n\r\n    setUserData(key: string, value: RuntimeObject) {\r\n        this.keyValueStore[key] = value;\r\n    }\r\n\r\n\r\n}","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass } from \"../../compiler/types/Class.js\";\r\nimport { intPrimitiveType, stringPrimitiveType, voidPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, Value } from \"../../compiler/types/Types.js\";\r\nimport { Interpreter, InterpreterState } from \"../../interpreter/Interpreter.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { WebSocketRequestConnect, WebSocketRequestDisconnect, WebSocketRequestSendToAll, WebSocketRequestSendToClient, WebSocketResponseOtherClientDisconnected, WebSocketResponseMessage, WebSocketResponseNewClient, WebSocketResponse, GetWebSocketTokenResponse, WebSocketResponsePairingFound, WebSocketRequestFindPairing } from \"../../communication/Data.js\";\r\nimport { WebSocketClientHelper } from \"./WebSocketClient.js\";\r\nimport { TilingSprite } from \"pixi.js\";\r\nimport { ajax } from \"../../communication/AjaxHelper.js\";\r\nimport { SystemClass } from \"../System.js\";\r\nimport { ArrayType } from \"../../compiler/types/Array.js\";\r\n\r\nexport class WebSocketClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n        super(\"WebSocket\", module, \"Ein Objekt der Klasse WebSocket kann Daten über das Internet senden und empfangen. Um die Klasse benutzen zu können, musst Du eine eigene Klasse schreiben, die die Klasse WebSocket erweitert und die Methoden onConnect, onMessage, onOtherClientConnected und onOtherClientDisconnected überschreibt.\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n        let webSocketClientType = <Klass>module.typeStore.getType(\"WebSocketClient\");\r\n        let systemClassType = <SystemClass>module.typeStore.getType(\"System\");\r\n\r\n        this.addMethod(new Method(\"WebSocket\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let interpreter = this.module?.main?.getInterpreter();\r\n\r\n                let wh = new WebSocketHelper(o, interpreter, webSocketClientType, systemClassType);\r\n\r\n                o.intrinsicData[\"Helper\"] = wh;\r\n\r\n            }, false, false, 'Instanziert ein neues WebSocket-Objekt.', true));\r\n\r\n        this.addMethod(new Method(\"open\", new Parameterlist([\r\n            { identifier: \"sessionCode\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"nickName\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sessionCode: string = parameters[1].value;\r\n                let nickName: string = parameters[2].value;\r\n\r\n                let wh: WebSocketHelper = o.intrinsicData[\"Helper\"];\r\n                wh.connect(sessionCode, nickName);\r\n\r\n                o.intrinsicData[\"Helper\"] = wh;\r\n\r\n            }, false, false, 'Startet die Verbindung mit dem Server. Den SessionCode kannst Du frei wählen. Mit allen anderen Clients, die eine Verbindung mit demselben SessionCode aufbauen, kannst Du anschließend Daten austauschen. Auch der Nickname ist frei wählbar. Er ist für alle anderen Clients sichtbar.',\r\n            false));\r\n\r\n        this.addMethod(new Method(\"sendToAll\", new Parameterlist([\r\n            { identifier: \"message\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"messageType\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let wh: WebSocketHelper = o.intrinsicData[\"Helper\"];\r\n                let message: string = parameters[1].value;\r\n                let messageType: string = parameters[2].value;\r\n\r\n                wh.sendToAll(message, messageType);\r\n\r\n            }, false, false, 'Sendet Daten (message) an alle anderen Clients. Den messageType kannst Du frei wählen. Die empfangenden Clients bekommen ihn zusammen mit den Daten übermittelt. Tipp: Du kannst auch Objekte senden, musst sie dazu aber vorher serialisieren, d.h. mithilfe der Methode toJson in eine Zeichenkette verwandeln.', false));\r\n\r\n        this.addMethod(new Method(\"findClients\", new Parameterlist([\r\n            { identifier: \"count\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let wh: WebSocketHelper = o.intrinsicData[\"Helper\"];\r\n                let count: number = parameters[1].value;\r\n\r\n                wh.findClientsFromCount(count);\r\n\r\n            }, false, false, 'Sucht die übergebene Anzahl von \"kontaktbereiten\" Clients, d.h. solchen Clients, die exakt dieselbe Suchanfrage abgegeben haben. Findet der Server die Clients, so ruft er bei allen beteiligten Clients onClientsFound auf.', false));\r\n\r\n        this.addMethod(new Method(\"findClients\", new Parameterlist([\r\n            { identifier: \"nicknames\", type: new ArrayType(stringPrimitiveType), declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let wh: WebSocketHelper = o.intrinsicData[\"Helper\"];\r\n                let nickNamesValues: Value[] = parameters[1].value;\r\n\r\n                let nicknames: string[] = nickNamesValues.map((nnv) => nnv.value);\r\n\r\n                wh.findClientsFromNicknames(nicknames);\r\n\r\n            }, false, false, 'Sucht die Clients mit den angegebenen Nicknames. Haben sie eine entsprechende Suchanfrage (d.h. dieselben Nicknames) abgegeben, so so ruft der Server bei allen beteiligten Clients onClientsFound auf.', false));\r\n\r\n        this.addMethod(new Method(\"findClient\", new Parameterlist([\r\n            { identifier: \"nickname\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let wh: WebSocketHelper = o.intrinsicData[\"Helper\"];\r\n                let nickName: string = parameters[1].value;\r\n\r\n                wh.findClientsFromNicknames([nickName]);\r\n\r\n            }, false, false, 'Sucht den Client mit dem angegebenen Nickname. Hat er eine entsprechende Suchanfrage (d.h. mit dem Nickname DIESES clients) abgegeben, so so ruft der Server bei beiden Clients onClientsFound auf.', false));\r\n\r\n        this.addMethod(new Method(\"close\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let wh: WebSocketHelper = o.intrinsicData[\"Helper\"];\r\n\r\n                wh.disconnect();\r\n\r\n            }, false, false, 'Beendet die Verbindung. Bei allen anderen Clients, die sich mit derselben sessionId verbunden haben, wird daraufhin die Methode onOtherClientDisconnected aufgerufen.', false));\r\n\r\n        this.addMethod(new Method(\"onOpen\", new Parameterlist([\r\n        ]), null,\r\n            null, // no statements!\r\n            false, false, \"Wird aufgerufen, sobald die Verbindung mit dem Server zustandegekommen ist.\", false));\r\n\r\n        this.addMethod(new Method(\"onClose\", new Parameterlist([\r\n        ]), null,\r\n            null, // no statements!\r\n            false, false, \"Wird aufgerufen, nachdem die Verbindung geschlossen wurde.\", false));\r\n\r\n        this.addMethod(new Method(\"onMessage\", new Parameterlist([\r\n            { identifier: \"sender\", type: webSocketClientType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"message\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"messageType\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            null, // no statements!\r\n            false, false, \"Wird immer dann aufgerufen, wenn eine Nachricht eines anderen Clients empfangen wurde.\", false));\r\n\r\n        this.addMethod(new Method(\"onOtherClientConnected\", new Parameterlist([\r\n            { identifier: \"otherClient\", type: webSocketClientType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            null, // no statements!\r\n            false, false, \"Wird immer dann aufgerufen, wenn sich ein anderer Client unter Nutzung desselben sessionCodes mit dem Server verbunden hat.\", false));\r\n\r\n        this.addMethod(new Method(\"onOtherClientDisConnected\", new Parameterlist([\r\n            { identifier: \"otherClient\", type: webSocketClientType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            null, // no statements!\r\n            false, false, \"Wird immer dann aufgerufen, wenn ein anderer Client unter Nutzung desselben sessionCodes die Verbindung mit dem Server beendet hat.\", false));\r\n\r\n        this.addMethod(new Method(\"onClientsFound\", new Parameterlist([\r\n            { identifier: \"clients\", type: new ArrayType(webSocketClientType), declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"ownIndex\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            null, // no statements!\r\n            false, false, \"Wird aufgerufen, wenn die durch die Methoden findClient bzw. findClients zuvor gesuchten Clients gefunden wurden.\", false));\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\nexport class WebSocketHelper {\r\n\r\n    onOpenMethod: Method;\r\n    onCloseMethod: Method;\r\n    onMessageMethod: Method;\r\n    onClientConnectedMethod: Method;\r\n    onClientDisconnectedMethod: Method;\r\n    onClientsFoundMethod: Method;\r\n\r\n    clientList: WebSocketClientHelper[] = [];\r\n    idToClientMap: { [id: number]: WebSocketClientHelper } = {};\r\n\r\n    connection: WebSocket;\r\n    client_id: number; // own client-id\r\n    isOpen: boolean = false;\r\n\r\n    constructor(private runtimeObject: RuntimeObject, private interpreter: Interpreter,\r\n        private webSocketClientType: Klass, private systemClassType: SystemClass) {\r\n\r\n        let klass: Klass = <Klass>runtimeObject.class;\r\n\r\n        // [[Entries]]:Array(4)\r\n        // 0:{\"Test3()\" => Method}\r\n        // 1:{\"onConnect()\" => Method}\r\n        // 2:{\"onMessage(WebSocketClient, String, String)\" => Method}\r\n        // 3:{\"toJson()\" => Method}\r\n\r\n        this.onOpenMethod = klass.methods.find(m => m.signature == \"onOpen()\");\r\n        this.onCloseMethod = klass.methods.find(m => m.signature == \"onClose()\");\r\n        this.onMessageMethod = klass.methods.find(m => m.signature == \"onMessage(WebSocketClient, String, String)\");\r\n        this.onClientConnectedMethod = klass.methods.find(m => m.signature == \"onOtherClientConnected(WebSocketClient)\");\r\n        this.onClientDisconnectedMethod = klass.methods.find(m => m.signature == \"onOtherClientDisconnected(WebSocketClient)\");\r\n        this.onClientsFoundMethod = klass.methods.find(m => m.signature == \"onClientsFound(WebSocketClient[], int)\");\r\n\r\n    }\r\n\r\n    connect(sessionCode: string, nickName: string) {\r\n\r\n        if(this.interpreter.main.isEmbedded()){\r\n            this.interpreter.throwException(\"Die Netzwerkfunktionalitäten stehen nur eingeloggten Nutzern in der Entwicklungsumgebung zur Verfügung und können daher leider hier nicht ausprobiert werden.\");\r\n            return;\r\n        }\r\n\r\n\r\n        ajax('getWebSocketToken', {}, (response: GetWebSocketTokenResponse) => {\r\n\r\n            let url: string = (window.location.protocol.startsWith(\"https\") ? \"wss://\" : \"ws://\") + window.location.host + \"/websocket\";\r\n            this.connection = new WebSocket(url);\r\n\r\n            this.connection.onerror = (error: Event) => { this.onError(error); }\r\n            this.connection.onclose = (event: CloseEvent) => { this.onClose(event); }\r\n            this.connection.onmessage = (event: MessageEvent) => { this.onMessage(event); }\r\n\r\n            this.connection.onopen = (event: Event) => {\r\n                let request: WebSocketRequestConnect = {\r\n                    command: 1,\r\n                    token: response.token,\r\n                    nickname: nickName,\r\n                    sessionCode: sessionCode\r\n                }\r\n\r\n                this.interpreter.webSocketsToCloseAfterProgramHalt.push(this.connection);\r\n                this.isOpen = true;\r\n                this.sendIntern(JSON.stringify(request));\r\n                this.onOpen();\r\n\r\n            }\r\n\r\n        });\r\n\r\n    }\r\n\r\n    unsentMessages: string[] = [];\r\n    sendIntern(message: string) {\r\n\r\n        if (!this.isOpen) {\r\n            this.unsentMessages.push(message);\r\n        } else {\r\n            try {\r\n                this.connection.send(message);\r\n            } catch (exception) {\r\n                console.log(exception);\r\n            }\r\n        }\r\n    }\r\n\r\n    onClose(event: CloseEvent) {\r\n        this.isOpen = false;\r\n        this.runMethod(this.onCloseMethod, []);\r\n    }\r\n\r\n    sendToClient(clientId: number, data: string, dataType: string) {\r\n        let message: WebSocketRequestSendToClient = {\r\n            command: 3,\r\n            data: data,\r\n            dataType: dataType,\r\n            recipient_id: clientId\r\n        };\r\n        this.sendIntern(JSON.stringify(message));\r\n    }\r\n\r\n    sendToAll(data: string, dataType: string) {\r\n        let message: WebSocketRequestSendToAll = {\r\n            command: 2,\r\n            data: data,\r\n            dataType: dataType\r\n        };\r\n        this.sendIntern(JSON.stringify(message));\r\n    }\r\n\r\n    disconnect() {\r\n        let message: WebSocketRequestDisconnect = {\r\n            command: 4\r\n        };\r\n        this.sendIntern(JSON.stringify(message));\r\n        this.connection.close();\r\n        let wtr = this.interpreter.webSocketsToCloseAfterProgramHalt;\r\n        wtr.splice(wtr.indexOf(this.connection), 1);\r\n    }\r\n\r\n    onMessage(event: MessageEvent) {\r\n\r\n        let response: WebSocketResponse = JSON.parse(event.data);\r\n        if (response.command == undefined) return;\r\n\r\n        switch (response.command) {\r\n            case 1: // new Client\r\n                let clientRuntimeObject = new RuntimeObject(this.webSocketClientType);\r\n                clientRuntimeObject.initializeAttributeValues();\r\n                let wch: WebSocketClientHelper = new WebSocketClientHelper(clientRuntimeObject, this, response.user_id,\r\n                    response.rufname, response.familienname, response.username, response.nickname);\r\n                clientRuntimeObject.intrinsicData[\"Helper\"] = wch;\r\n                this.clientList.push(wch);\r\n                this.idToClientMap[response.user_id] = wch;\r\n                this.runMethod(this.onClientConnectedMethod, [{ type: this.webSocketClientType, value: clientRuntimeObject }]);\r\n                break;\r\n            case 2: // message\r\n                let clientHelper = this.idToClientMap[response.from_client_id];\r\n                if (clientHelper == null) return;\r\n                this.runMethod(this.onMessageMethod, [\r\n                    { type: this.webSocketClientType, value: clientHelper.runtimeObject },\r\n                    { type: stringPrimitiveType, value: response.data },\r\n                    { type: stringPrimitiveType, value: response.dataType }\r\n                ]);\r\n                break;\r\n            case 3: // other client disconnected\r\n                let clientHelper1 = this.idToClientMap[response.disconnecting_client_id];\r\n                if (clientHelper1 == null) return;\r\n                this.clientList.splice(this.clientList.indexOf(clientHelper1), 1);\r\n                this.idToClientMap[response.disconnecting_client_id] = undefined;\r\n                this.runMethod(this.onClientDisconnectedMethod, [\r\n                    { type: this.webSocketClientType, value: clientHelper1.runtimeObject }\r\n                ]);\r\n                break;\r\n            case 4: // time synchronization\r\n                this.systemClassType.deltaTimeMillis = response.currentTimeMills - Date.now();\r\n                this.client_id = response.client_id\r\n                break;\r\n            case 5: // keep alive\r\n                break;\r\n            case 6: // Clients found\r\n                this.onClientsFound(response);\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClientsFound(response: WebSocketResponsePairingFound) {\r\n        let own_index: number = 0;\r\n        let otherClients: Value[] = [];\r\n\r\n        for (let client of response.clients) {\r\n            if (client.id == this.client_id) {\r\n                own_index = client.index;\r\n            } else {\r\n                let otherClient = this.idToClientMap[client.id];\r\n                if (otherClient != null) {\r\n                    otherClient.index = client.index;\r\n                    otherClients.push({\r\n                        type: this.webSocketClientType,\r\n                        value: otherClient.runtimeObject\r\n                    });\r\n                }\r\n            }\r\n        }\r\n\r\n        let arrayValue: Value = {\r\n            type: new ArrayType(this.webSocketClientType),\r\n            value: otherClients\r\n        }\r\n\r\n        this.runMethod(this.onClientsFoundMethod, [arrayValue, { type: intPrimitiveType, value: own_index }]);\r\n\r\n    }\r\n\r\n    onError(error: Event) {\r\n        this.interpreter.throwException(\"Kommunikationsfehler beim WebSocket\");\r\n    }\r\n\r\n    onOpen() {\r\n        this.isOpen = true;\r\n        if(this.unsentMessages.length > 0){\r\n            this.unsentMessages.forEach(m => this.sendIntern(m));\r\n            this.unsentMessages = [];\r\n        }\r\n        this.runMethod(this.onOpenMethod, []);\r\n    }\r\n\r\n    runMethod(method: Method, stackElements: Value[]) {\r\n        if (method == null) return;\r\n        stackElements.splice(0, 0, {\r\n            type: this.runtimeObject.class,\r\n            value: this.runtimeObject\r\n        });\r\n\r\n        if (this.interpreter.state == InterpreterState.waitingForInput) {\r\n            this.interpreter.executeImmediatelyInNewStackframe(method.program, stackElements);\r\n        } else {\r\n            this.interpreter.runTimer(method, stackElements, () => { }, false);\r\n        }\r\n    }\r\n\r\n    findClientsFromCount(count: number) {\r\n        let message: WebSocketRequestFindPairing = {\r\n            command: 6,\r\n            count: count,\r\n            nicknames: []\r\n        }\r\n\r\n        this.sendIntern(JSON.stringify(message));\r\n    }\r\n\r\n    findClientsFromNicknames(nicknames: string[]) {\r\n        let message: WebSocketRequestFindPairing = {\r\n            command: 6,\r\n            count: nicknames.length,\r\n            nicknames: nicknames\r\n        }\r\n\r\n        this.sendIntern(JSON.stringify(message));\r\n    }\r\n\r\n\r\n}","import { TilingSprite } from \"pixi.js\";\r\nimport { TokenType } from \"../../compiler/lexer/Token.js\";\r\nimport { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass, Visibility } from \"../../compiler/types/Class.js\";\r\nimport { charPrimitiveType, floatPrimitiveType, intPrimitiveType, stringPrimitiveType, voidPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, Type, Value, Variable, Attribute } from \"../../compiler/types/Types.js\";\r\nimport { Interpreter, InterpreterState } from \"../../interpreter/Interpreter.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\n\r\n// import * as p5 from \"p5\";\r\ntype p5 = any;\r\n\r\nexport class ProcessingClass extends Klass {\r\n\r\n    constructor(public module: Module) {\r\n\r\n        super(\"PApplet\", module, \"Processing-Applet\")\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n        this.documentation = \"Wenn Du Deine Klasse von PApplet ableitest (class Test extends PApplet{...}), kannst Du auf diese Weise ein Processing-Applet erstellen (siehe https://processing.org), indem Du ihre Methoden draw(), mousePressed(), usw. überschreibst und mit Inhalt füllst. Du startest das Applet, indem Du ein Objekt Deiner Klasse instanzierst und davon die main-Methode aufrufst: new Test().main();\"\r\n\r\n        // this.addAttribute(new Attribute(\"mouseX\", intPrimitiveType, (object) => { object.value = Math.round(module.main.getInterpreter().processingHelper.p5o.mouseX) },\r\n        //     false, Visibility.public, true, \"aktuelle x-Koordinate des Mauszeigers\"));\r\n\r\n        // this.addAttribute(new Attribute(\"mouseY\", intPrimitiveType, (object) => { object.value = Math.round(module.main.getInterpreter().processingHelper.p5o.mouseY) },\r\n        //     false, Visibility.public, true, \"aktuelle y-Koordinate des Mauszeigers\"));\r\n\r\n        let intConstants: string[][] = [[\"mouseX\", \"aktuelle x-Koordinate des Mauszeigers\"], [\"mouseY\", \"aktuelle y-Koordinate des Mauszeigers\"],\r\n        [\"pMouseX\", \"x-Koordinate des Mauszeigers im vorhergehenden Frame\"], [\"pMouseY\", \"y-Koordinate des Mauszeigers im vorhergehenden Frame\"],\r\n        [\"LEFT\", \"links\"], [\"CENTER\", \"Mitte\"], [\"RIGHT\", \"rechts\"], [\"TOP\", \"obenbündig\"], [\"BASELINE\", \"bündig auf der Grundlinie\"], [\"BOTTOM\", \"untenbündig\"],\r\n        [\"width\", \"Breite des Zeichenbereichs\"], [\"height\", \"Höhe des Zeichenbereichs\"], [\"keyCode\", \"Zahlencode der zuletzt gedrückten Taste\"],\r\n        [\"mouseButton\", \"zuletzt gedrückte Maustaste, kann die Werte LEFT, RIGHT und CENTER annehmen\"],\r\n        [\"CORNER\", \"Mode zum Zeichnen von Rechtecken\"], [\"CORNERS\", \"Mode zum Zeichnen von Rechtecken\"], [\"RADIUS\", \"Mode zum Zeichnen von Rechtecken\"],\r\n\r\n        [\"POINTS\", \"zeichne nachfolgend Einzelpunkte\"],\r\n        [\"LINES\", \"zeichne nachfolgend einzelne Linien\"],\r\n        [\"TRIANGLES\", \"zeichne nachfolgend einzelne Dreiecke\"],\r\n        [\"TRIANGLE_STRIP\", \"zeichne nachfolgend einen Triangle-Strip\"],\r\n        [\"TRIANGLE_FAN\", \"zeichne nachfolgend einen Triangle-Fan\"],\r\n        [\"QUADS\", \"zeichne nachfolgend Vierecke\"],\r\n        [\"QUAD_STRIP\", \"zeichne nachfolgend einen Quad-Strip\"],\r\n        [\"TESS\", \"zeichne nachfolgend ein TESS - geht nur bei createCanvas(width, height, WEBGL)\"],\r\n        [\"CLOSE\", \"endShape(CLOSE) schließt den Linienzug\"],\r\n\r\n        [\"DEGREES\", \"angleMode(DEGREES) sorgt dafür, dass nachfolgende Winkelangaben in Grad interpretiert werden.\"],\r\n        [\"RADIANS\", \"angleMode(RADIANS) sorgt dafür, dass nachfolgende Winkelangaben im Bogenmaß interpretiert werden.\"],\r\n\r\n        ];\r\n\r\n        intConstants.forEach(constant => {\r\n            this.addAttribute(new Attribute(constant[0], intPrimitiveType, (object) => { object.value = module.main.getInterpreter().processingHelper.p5o[constant[0]] },\r\n                false, Visibility.public, true, constant[1]));\r\n        });\r\n\r\n        let stringConstants: string[][] = [[\"WEBGL\", \"WebGL-Renderer zur 3D-Ausgabe\"], [\"P2D\", \"Renderer zur zweidimensionalen Ausgabe\"],\r\n        [\"RGB\", \"Color-Mode RGB (rot, grün, blau)\"], [\"HSL\", \"Color-Mode HSL\"], [\"HSB\", \"Color-Mode HSB\"]\r\n        ];\r\n\r\n        stringConstants.forEach(constant => {\r\n            this.addAttribute(new Attribute(constant[0], stringPrimitiveType, (object) => { object.value = module.main.getInterpreter().processingHelper.p5o[constant[0]] },\r\n                false, Visibility.public, true, constant[1]));\r\n        });\r\n\r\n        this.addAttribute(new Attribute(\"key\", charPrimitiveType, (object) => { object.value = module.main.getInterpreter().processingHelper.p5o.key },\r\n            false, Visibility.public, true, \"letzte gedrückte Taste\"));\r\n\r\n\r\n        this.addMethod(new Method(\"Processing\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ph: ProcessingHelper = this.getProcessingHelper(o);\r\n                o.intrinsicData[\"Processing\"] = ph;\r\n\r\n            }, false, false, \"Legt eine neues Processing-Applet an\", true));\r\n\r\n        this.addMethod(new Method(\"main\", new Parameterlist([\r\n            { identifier: \"name\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ph: ProcessingHelper = o.intrinsicData[\"Processing\"];\r\n\r\n                // ph.main legt das aktuelle Programm (a) des Interpreters auf den programStack\r\n                // und setzt als currentProgram ein neues (b). Nach Ende dieser Methode erhöht\r\n                // der Interpreter currentProgramPosition im Glauben, (a) sei aktiv. Daher ist\r\n                // die gespeicherte ProgramPosition von (a) um eins zu niedrig (und wird daher gleich noch\r\n                // vor ph.main(); erhöht) und die bei (b) wird irrtümlich nach Rückkehr von dieser Methode \r\n                // um eins erhöht. Sie wird daher nach Ausführung von ph.main() um eins erniedrigt, damit\r\n                // der Effekt kompensiert wird. \r\n                let interpreter = module.main.getInterpreter();\r\n                interpreter.currentProgramPosition++;\r\n                ph.main();\r\n                interpreter.currentProgramPosition--;\r\n\r\n            }, false, false, 'Startet das Processing-Applet.', false));\r\n\r\n        this.addMethod(new Method(\"main\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ph: ProcessingHelper = o.intrinsicData[\"Processing\"];\r\n\r\n                let interpreter = module.main.getInterpreter();\r\n                interpreter.currentProgramPosition++;\r\n                ph.main();\r\n                interpreter.currentProgramPosition--;\r\n\r\n            }, false, false, 'Startet das Processing-Applet.', false));\r\n\r\n        this.addMethod(new Method(\"loop\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ph: ProcessingHelper = o.intrinsicData[\"Processing\"];\r\n\r\n                ph.loop();\r\n\r\n            }, false, false, 'Startet nach noLoop() die Renderer-Loop wieder neu, so dass draw() wieder periodisch aufgerufen wird.', false));\r\n\r\n        this.addMethod(new Method(\"noLoop\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ph: ProcessingHelper = o.intrinsicData[\"Processing\"];\r\n\r\n                ph.noLoop();\r\n\r\n            }, false, false, 'Stoppt die Render-Loop, so dass draw() nicht mehr aufgerufen wird. Kann mit loop() wieder gestartet werden.', false));\r\n\r\n        this.addMethod(new Method(\"size\", new Parameterlist([\r\n            { identifier: \"width\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"height\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ph: ProcessingHelper = o.intrinsicData[\"Processing\"];\r\n                let width: number = parameters[1].value;\r\n                let height: number = parameters[2].value;\r\n\r\n                ph.createCanvas(width, height)\r\n\r\n            }, false, false, 'Definiert die Abmessungen des Processing-Ausgabebereichs in Pixeln.', false));\r\n\r\n        this.addMethod(new Method(\"createCanvas\", new Parameterlist([\r\n            { identifier: \"width\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"height\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ph: ProcessingHelper = o.intrinsicData[\"Processing\"];\r\n                let width: number = parameters[1].value;\r\n                let height: number = parameters[2].value;\r\n\r\n                ph.createCanvas(width, height)\r\n\r\n            }, false, false, 'Definiert die Abmessungen des Processing-Ausgabebereichs in Pixeln.', false));\r\n\r\n        this.addMethod(new Method(\"createCanvas\", new Parameterlist([\r\n            { identifier: \"width\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"height\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"renderer\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ph: ProcessingHelper = o.intrinsicData[\"Processing\"];\r\n                let width: number = parameters[1].value;\r\n                let height: number = parameters[2].value;\r\n                let renderer: string = parameters[3].value;\r\n\r\n                ph.renderer = renderer;\r\n                ph.createCanvas(width, height);\r\n\r\n            }, false, false, 'Definiert die Abmessungen des Processing-Ausgabebereichs in Pixeln.', false));\r\n\r\n        this.addMethod(new Method(\"draw\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            null, false, false, 'Die draw-Methode wird 60-mal pro Sekunde aufgerufen (\"Render-Loop\"). Die Render-Loop kann mit der Methode noLoop() gestoppt und mit loop() wieder gestartet werden. redraw() ruft (im gestoppten Zustand) draw genau ein Mal auf.', false));\r\n\r\n        this.addMethod(new Method(\"settings\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            null, false, false, 'Die settings-Methode wird aufgerufen, nachdem das Processing-Applet durch Aufruf der Methode main gestartet wurde. Im Unterschied zur Original Java-Version von Processing hat die Methode settings hier keine andere Bewandtnis als die - unmittelbar darauf aufgerufene - Methode setup. In beiden Methoden kann man bspw. mit createCanvas(width, height) das Koordinatensystem einrichten und Figuren zeichnen.', false));\r\n\r\n        this.addMethod(new Method(\"setup\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            null, false, false, 'Die setup-Methode wird beim Programmstart nach der settings-Methode aufgerufen. Im Unterschied zur Original Java-Version von Processing hat die Methode setup hier keine andere Bewandtnis als die - unmittelbar davor aufgerufene - Methode settings. In beiden Methoden kann man bspw. mit createCanvas(width, height) das Koordinatensystem einrichten und Figuren zeichnen.', false));\r\n\r\n        this.addMethod(new Method(\"mousePressed\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            null, false, false, 'Die mousePressed-Methode wird immer dann aufgerufen, wenn gerade eine Maustaste heruntergedrückt wurde. Die aktuellen Koordinaten des Mauszeigers liegen in den Attributen mouseX und mouseY vor, die gerade heruntergedrückte Maustaste kann dem Attribut mouseButton entnommen werden.', false));\r\n\r\n        this.addMethod(new Method(\"mouseReleased\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            null, false, false, 'Die mouseReleased-Methode wird immer dann aufgerufen, wenn gerade eine Maustaste losgelassen wurde. Die aktuellen Koordinaten des Mauszeigers liegen in den Attributen mouseX und mouseY vor, die gerade losgelassene Maustaste kann dem Attribut mouseButton entnommen werden.', false));\r\n\r\n        this.addMethod(new Method(\"mouseClicked\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            null, false, false, 'Die mouseClicked-Methode wird immer dann aufgerufen, wenn eine Maustaste auf dem Zeichenbereich gedrückt und anschließend losgelassen wurde. Die aktuellen Koordinaten des Mauszeigers liegen in den Attributen mouseX und mouseY vor, die gerade losgelassene Maustaste kann dem Attribut mouseButton entnommen werden.', false));\r\n\r\n        this.addMethod(new Method(\"mouseDragged\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            null, false, false, 'Die mouseDragged-Methode wird immer dann aufgerufen, wenn eine Maustaste gerade heruntergedrückt ist und die Position des Mauszeigers sich verändert hat. Die aktuellen Koordinaten des Mauszeigers liegen in den Attributen mouseX und mouseY vor, die zuletzt gedrückte Maustaste kann dem Attribut mouseButton entnommen werden.', false));\r\n\r\n        this.addMethod(new Method(\"mouseMoved\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            null, false, false, 'Die mouseMoved-Methode wird immer dann aufgerufen, wenn die Position des Mauszeigers sich verändert hat. Die aktuellen Koordinaten des Mauszeigers liegen in den Attributen mouseX und mouseY vor, die zuletzt gedrückte Maustaste kann dem Attribut mouseButton entnommen werden.', false));\r\n\r\n        this.addMethod(new Method(\"mouseEntered\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            null, false, false, 'Die mouseEntered-Methode wird immer dann aufgerufen, wenn der Mauszeiger von außen neu in den Zeichenbereich hineinfährt.', false));\r\n\r\n        this.addMethod(new Method(\"mouseExited\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            null, false, false, 'Die mouseExited-Methode wird immer dann aufgerufen, wenn der Mauszeiger den Zeichnbereich gerade verlassen hat.', false));\r\n\r\n        this.addMethod(new Method(\"keyPressed\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            null, false, false, 'Die keyPressed-Methode wird immer dann aufgerufen, wenn eine Taste gerade heruntergedrückt wurde. Informationen zur Taste können den Attributen key (String) und keyCode (int) entnommen werden.', false));\r\n\r\n        this.addMethod(new Method(\"keyReleased\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            null, false, false, 'Die keyReleased-Methode wird immer dann aufgerufen, wenn eine Taste gerade losgelassen wurde. Informationen zur Taste können den Attributen key (String) und keyCode (int) entnommen werden.', false));\r\n\r\n\r\n\r\n        // this.addMethod(new Method(\"rect\", new Parameterlist([\r\n        //     { identifier: \"left\", type: floatPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        //     { identifier: \"top\", type: floatPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        //     { identifier: \"width\", type: floatPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        //     { identifier: \"height\", type: floatPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        // ]), voidPrimitiveType,\r\n        //     (parameters) => {\r\n\r\n        //         let o: RuntimeObject = parameters[0].value;\r\n        //         let ph: ProcessingHelper = o.intrinsicData[\"Processing\"];\r\n        //         let left: number = parameters[1].value;\r\n        //         let top: number = parameters[2].value;\r\n        //         let width: number = parameters[3].value;\r\n        //         let height: number = parameters[4].value;\r\n\r\n        //         ph.addStatement((p5o) => p5o.rect(left, top, width, height));\r\n\r\n\r\n        //     }, false, false, 'Zeichnet ein Rechteck. (left, top) ist die linke obere Ecke, width die Breite und height die Höhe des Rechtecks.', false));\r\n\r\n\r\n        /**\r\n         * Setzen von Farben\r\n         */\r\n        this.addProcessingMethod('clear', [], [],\r\n            'Löscht die Zeichenfläche.');\r\n\r\n        this.addProcessingMethod('background', ['rgb'], floatPrimitiveType,\r\n            'Übermalt die komplette Zeichenfläche mit der übergebenen Farbe.');\r\n\r\n        this.addProcessingMethod('background', ['colorAsString'], stringPrimitiveType,\r\n            \"Übermalt die komplette Zeichenfläche mit der übergebenen Farbe. Übergeben wird eine Zeichenkette der Form 'rgb(0,0,255)' oder 'rgb(0%, 0%, 100%)' oder 'rgba(0, 0, 255, 1)' oder 'rgba(0%, 0%, 100%, 1)' und all diese Kombinationen statt rgb auch mit hsl und hsb.\", stringPrimitiveType);\r\n\r\n        this.addProcessingMethod('background', ['v1', 'v2', 'v3'], floatPrimitiveType,\r\n            'Übermalt die komplette Zeichenfläche mit der übergebenen Farbe. v1, v2 und v3 sind - abhängig vom aktuellen color mode - rot, grün und blauwert oder Farbe, Sättigung und Helligkeit');\r\n\r\n        this.addProcessingMethod('fill', ['rgb'], intPrimitiveType,\r\n            'Setzt die Füllfarbe.');\r\n\r\n        this.addProcessingMethod('fill', ['rgb'], stringPrimitiveType,\r\n            'Setzt die Füllfarbe.');\r\n\r\n        this.addProcessingMethod('fill', ['rgb', 'alpha'], [intPrimitiveType, floatPrimitiveType],\r\n            'Setzt die Füllfarbe.');\r\n\r\n        this.addProcessingMethod('fill', ['gray'], floatPrimitiveType,\r\n            'Setzt die Füllfarbe.');\r\n\r\n        this.addProcessingMethod('fill', ['v1', 'v2', 'v3'], floatPrimitiveType,\r\n            'Setzt die Füllfarbe. v1, v2 und v3 sind - abhängig vom aktuellen color mode - rot, grün und blauwert oder Farbe, Sättigung und Helligkeit');\r\n\r\n        this.addProcessingMethod('fill', ['v1', 'v2', 'v3', 'alpha'], floatPrimitiveType,\r\n            'Setzt die Füllfarbe. v1, v2 und v3 sind - abhängig vom aktuellen color mode - rot, grün und blauwert oder Farbe, Sättigung und Helligkeit');\r\n\r\n        this.addProcessingMethod('noFill', [], [],\r\n            'Die nachfolgend gezeichneten Figuren werden nicht gefüllt.');\r\n\r\n        this.addProcessingMethod('stroke', ['rgb'], intPrimitiveType,\r\n            'Setzt die Linienfarbe.');\r\n\r\n        this.addProcessingMethod('stroke', ['rgb'], stringPrimitiveType,\r\n            'Setzt die Linienfarbe.');\r\n\r\n        this.addProcessingMethod('stroke', ['rgb', 'alpha'], [intPrimitiveType, floatPrimitiveType],\r\n            'Setzt die Linienfarbe.');\r\n\r\n        this.addProcessingMethod('stroke', ['gray'], floatPrimitiveType,\r\n            'Setzt die Linienfarbe.');\r\n\r\n        this.addProcessingMethod('stroke', ['v1', 'v2', 'v3'], floatPrimitiveType,\r\n            'Setzt die Linienfarbe. v1, v2 und v3 sind - abhängig vom aktuellen color mode - rot, grün und blauwert oder Farbe, Sättigung und Helligkeit');\r\n\r\n        this.addProcessingMethod('stroke', ['v1', 'v2', 'v3', 'alpha'], floatPrimitiveType,\r\n            'Setzt die Linienfarbe. v1, v2 und v3 sind - abhängig vom aktuellen color mode - rot, grün und blauwert oder Farbe, Sättigung und Helligkeit');\r\n\r\n        this.addProcessingMethod('strokeWeight', ['weight'], floatPrimitiveType,\r\n            'Setzt die Linienbreite.');\r\n\r\n        this.addProcessingMethod('noStroke', [], [],\r\n            'Die nachfolgend gezeichneten Figuren werden ohne Rand gezeichnet.');\r\n\r\n        this.addProcessingMethod('color', ['gray'], floatPrimitiveType,\r\n            'Gibt den Grauton als String-kodierte Farbe zurück.', stringPrimitiveType);\r\n\r\n        this.addProcessingMethod('color', ['colorAsString'], stringPrimitiveType,\r\n            \"Gibt die Farbe zurück. Übergeben kann eine Zeichenkette der Form 'rgb(0,0,255)' oder 'rgb(0%, 0%, 100%)' oder 'rgba(0, 0, 255, 1)' oder 'rgba(0%, 0%, 100%, 1)' und all diese Kombinationen statt rgb auch mit hsl und hsb.\", stringPrimitiveType);\r\n\r\n        this.addProcessingMethod('color', ['gray', 'alpha'], floatPrimitiveType,\r\n            'Gibt den Grauton als String-kodierte Farbe zurück.', stringPrimitiveType);\r\n\r\n        this.addProcessingMethod('color', ['v1', 'v2', 'v3'], floatPrimitiveType,\r\n            'Gibt die aus v1, v2, v3 gebildete Farbe String-kodiert zurück.', stringPrimitiveType);\r\n\r\n        this.addProcessingMethod('color', ['v1', 'v2', 'v3', 'alpha'], floatPrimitiveType,\r\n            'Gibt die aus v1, v2, v3 und alpha gebildete Farbe String-kodiert zurück.', stringPrimitiveType);\r\n\r\n        this.addProcessingMethod('lerpColor', ['colorA', 'colorB', 't'], [stringPrimitiveType, stringPrimitiveType, floatPrimitiveType],\r\n            'Gibt eine Zwischenfarbe zwischen colorA und colorB zurück. t == 0 bedeutet: colorA, t == 1 bedeutet: colorB, t == 0.5 bedeutet: genau zwischen beiden, usw.', stringPrimitiveType);\r\n\r\n        this.addProcessingMethod('colorMode', ['mode'], stringPrimitiveType,\r\n            'Setzt den Modus, in dem nachfolgende Aufrufe von color(...) interpretiert werden. Möglich sind die Werte RGB, HSL und HSB.');\r\n\r\n        this.addProcessingMethod('colorMode', ['mode', 'max'], [stringPrimitiveType, floatPrimitiveType],\r\n            'Setzt den Modus, in dem nachfolgende Aufrufe von color(...) interpretiert werden. Möglich sind die Werte RGB, HSL und HSB für Mode. Max ist der Maximalwert jeder Farbkomponente.');\r\n\r\n        this.addProcessingMethod('colorMode', ['mode', 'max1', 'max2', 'max3'], [stringPrimitiveType, floatPrimitiveType, floatPrimitiveType, floatPrimitiveType],\r\n            'Setzt den Modus, in dem nachfolgende Aufrufe von color(...) interpretiert werden. Möglich sind die Werte RGB, HSL und HSB für Mode. Max ist der Maximalwert jeder Farbkomponente.');\r\n\r\n        this.addProcessingMethod('colorMode', ['mode', 'max1', 'max2', 'max3', 'maxAlpha'], [stringPrimitiveType, floatPrimitiveType, floatPrimitiveType, floatPrimitiveType, floatPrimitiveType],\r\n            'Setzt den Modus, in dem nachfolgende Aufrufe von color(...) interpretiert werden. Möglich sind die Werte RGB, HSL und HSB für Mode. Max ist der Maximalwert jeder Farbkomponente.');\r\n\r\n\r\n\r\n        /**\r\n         * Zeichnen geometrischer Figuren\r\n         */\r\n        this.addProcessingMethod('rectMode', ['mode'], stringPrimitiveType,\r\n            'Setzt den Modus, in dem nachfolgende Aufrufe von rect(...) interpretiert werden. Möglich sind die Werte CORNER, CORNERS, RADIUS und CENTER.');\r\n\r\n        this.addProcessingMethod('rect', ['left', 'top', 'width', 'height'], floatPrimitiveType,\r\n            'Zeichnet ein Rechteck. (left, top) ist die linke obere Ecke, width die Breite und height die Höhe des Rechtecks.');\r\n\r\n        this.addProcessingMethod('rect', ['left', 'top', 'width', 'height', 'radius'], floatPrimitiveType,\r\n            'Zeichnet ein Rechteck mit abgerundeten Ecken. (left, top) ist die linke obere Ecke, width die Breite und height die Höhe des Rechtecks.');\r\n\r\n        this.addProcessingMethod('rect', ['left', 'top', 'width', 'height', 'radius1', 'radius2', 'radius3', 'radius4'], floatPrimitiveType,\r\n            'Zeichnet ein Rechteck mit abgerundeten Ecken. (left, top) ist die linke obere Ecke, width die Breite und height die Höhe des Rechtecks.');\r\n\r\n        this.addProcessingMethod('square', ['left', 'top', 'width'], floatPrimitiveType,\r\n            'Zeichnet ein Quadrat. (left, top) ist die linke obere Ecke, width Seitenlänge des Quadrats.');\r\n\r\n        this.addProcessingMethod('square', ['left', 'top', 'width', 'radius'], floatPrimitiveType,\r\n            'Zeichnet ein Quadrat mit abgerundeten Ecken. (left, top) ist die linke obere Ecke, width Seitenlänge des Quadrats. Radius ist der Eckenradius.');\r\n\r\n        this.addProcessingMethod('square', ['left', 'top', 'width', 'radius1', 'radius2', 'radius3', 'radius4'], floatPrimitiveType,\r\n            'Zeichnet ein Quadrat mit abgerundeten Ecken. (left, top) ist die linke obere Ecke, width Seitenlänge des Quadrats. Radius ist der Eckenradius.');\r\n\r\n        this.addProcessingMethod('rect', ['left', 'top', 'width', 'height', 'radius'], floatPrimitiveType,\r\n            'Zeichnet ein Rechteck. (left, top) ist die linke obere Ecke, width die Breite und height die Höhe des Rechtecks. Radius ist der Eckenradius');\r\n\r\n        this.addProcessingMethod('ellipse', ['left', 'top', 'width', 'height'], floatPrimitiveType,\r\n            'Zeichnet eine Ellipse. (left, top) ist die linke obere Ecke der Boundingbox der Ellipse, width ihre Breite und height ihre Höhe. Das lässt sich aber mit ellipseMode(...) ändern!');\r\n\r\n        this.addProcessingMethod('circle', ['x', 'y', 'extent'], floatPrimitiveType,\r\n            'Zeichnet einen Kreis. (x, y) ist der Mittelpunkt des Kreises, extent der doppelte Radius.');\r\n\r\n        this.addProcessingMethod('ellipseMode', ['mode'], stringPrimitiveType,\r\n            'Setzt den Modus, in dem nachfolgende Aufrufe von ellipse(...) interpretiert werden. Möglich sind die Werte CORNER, CORNERS, RADIUS und CENTER.');\r\n\r\n\r\n        this.addProcessingMethod('line', ['x1', 'y1', 'x2', 'y2'], floatPrimitiveType,\r\n            'Zeichnet eine Strecke von (x1, y1) nach (x2, y2).');\r\n\r\n        this.addProcessingMethod('line', ['x1', 'y1', 'z1', 'x2', 'y2', 'z2'], floatPrimitiveType,\r\n            'Zeichnet eine Strecke von (x1, y1, z1) nach (x2, y2, z2).');\r\n\r\n        this.addProcessingMethod('triangle', ['x1', 'y1', 'x2', 'y2', 'x3', 'y3'], floatPrimitiveType,\r\n            'Zeichnet eine Dreieck mit den Eckpunkten (x1, y1), (x2, y2) und (x3, y3).');\r\n\r\n        this.addProcessingMethod('quad', ['x1', 'y1', 'x2', 'y2', 'x3', 'y3', 'x4', 'y4'], floatPrimitiveType,\r\n            'Zeichnet eine Viereck mit den Eckpunkten (x1, y1), (x2, y2), (x3, y3) und (x4, y4).');\r\n\r\n        this.addProcessingMethod('bezier', ['x1', 'y1', 'x2', 'y2', 'x3', 'y3', 'x4', 'y4'], floatPrimitiveType,\r\n            'Zeichnet eine kubische Bezierkurve mit den Ankerpunkten (x1, y1), (x4, y4) und den Kontrollpunkten (x2, y2), (x3, y3).');\r\n\r\n        this.addProcessingMethod('curve', ['x1', 'y1', 'x2', 'y2', 'x3', 'y3', 'x4', 'y4'], floatPrimitiveType,\r\n            'Zeichnet eine Catmull-Rom-Kurve vom Punkt (x2, y2) nach (x3, y3) so, als würde sie von (x1, x2) kommen und es am Ende zu (x4, y4) weitergehen.');\r\n\r\n        this.addProcessingMethod('curvePoint', ['a', 'b', 'c', 'd', 't'], floatPrimitiveType,\r\n            'Will man die Zwischenpunkte einer Curve erhalten (Beginn b, Ende c, als würde sie von a kommen und nach d gehen), so verwendet man sowohl für die x- als auch für die y-Koordinate diese Funktion. t gibt an, welchen Punkt der Kurve man haben möchte. t hat Werte zwischen 0 (Startpunkt) und 1 (Endpunkt).', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('curveTangent', ['a', 'b', 'c', 'd', 't'], floatPrimitiveType,\r\n            'Will man die Zwischentangenten einer Curve erhalten (Beginn b, Ende c, als würde sie von a kommen und nach d gehen), so verwendet man sowohl für die x- als auch für die y-Koordinate diese Funktion. t gibt an, welchen Punkt der Kurve man haben möchte. t hat Werte zwischen 0 (Startpunkt) und 1 (Endpunkt).', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('bezierPoint', ['x1', 'x2', 'x3', 'x4', 't'], floatPrimitiveType,\r\n            'Will man die Zwischenpunkte einer Bezierkurve erhalten (Ankerkoordinaten x1, x4 und Stützkoordinaten x2, x3), so nutzt man - einzeln sowohl für die x- also auch für die y-Koordinate - diese Funktion. t gibt an, welchen Punkt der Kurve man haben möchte. t hat Werte zwischen 0 (Startpunkt) und 1 (Endpunkt).', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('bezierTangent', ['x1', 'x2', 'x3', 'x4', 't'], floatPrimitiveType,\r\n            'Will man die Zwischentangenten einer Bezierkurve erhalten (Ankerkoordinaten x1, x4 und Stützkoordinaten x2, x3), so nutzt man - einzeln sowohl für die x- also auch für die y-Koordinate - diese Funktion. t gibt an, welchen Punkt der Kurve man haben möchte. t hat Werte zwischen 0 (Startpunkt) und 1 (Endpunkt).', floatPrimitiveType);\r\n\r\n\r\n        this.addProcessingMethod('beginShape', [], [],\r\n            'Beginnt mit dem Zeichnen eines Polygons. Die einzelnen Punkte werden mit der Methode vertex(x, y) gesetzt.');\r\n\r\n        this.addProcessingMethod('endShape', [], [],\r\n            'Endet das Zeichnen eines Polygons.');\r\n\r\n        this.addProcessingMethod('beginShape', ['kind'], stringPrimitiveType,\r\n            'Beginnt mit dem Zeichnen eines Polygons. Die einzelnen Punkte werden mit der Methode vertex(x, y) gesetzt. Mögliche Werte für kind sind: POINTS, LINES, TRIANGLES, TRIANGLE_STRIP, TRIANGLE_FAN, QUADS, QUAD_STRIP');\r\n\r\n        this.addProcessingMethod('endShape', ['kind'], stringPrimitiveType,\r\n            'endShape(CLOSE) schließt den Linienzug.');\r\n\r\n        this.addProcessingMethod('vertex', ['x', 'y'], floatPrimitiveType,\r\n            'Setzt zwischen beginShape() und endShape() einen Punkt.');\r\n\r\n        this.addProcessingMethod('point', ['x', 'y'], floatPrimitiveType,\r\n            'Zeichnet einen Punkt.');\r\n\r\n        this.addProcessingMethod('set', ['x', 'y', 'color'], [floatPrimitiveType, floatPrimitiveType, stringPrimitiveType],\r\n            'Setzt die Farbe des Pixels bei (x, y).');\r\n\r\n        this.addProcessingMethod('vertex', ['x', 'y', 'z'], floatPrimitiveType,\r\n            'Setzt zwischen beginShape() und endShape() einen Punkt.');\r\n\r\n        this.addProcessingMethod('point', ['x', 'y', 'z'], floatPrimitiveType,\r\n            'Zeichnet einen Punkt.');\r\n\r\n        this.addProcessingMethod('curveVertex', ['x', 'y'], floatPrimitiveType,\r\n            'Setzt zwischen beginShape() und endShape() einen Punkt. Processing zeichnet damit eine Kurve nach dem Catmull-Rom-Algorithmus.');\r\n\r\n        this.addProcessingMethod('curvevertex', ['x', 'y', 'z'], floatPrimitiveType,\r\n            'Setzt zwischen beginShape() und endShape() einen Punkt. Processing zeichnet damit eine Kurve nach dem Catmull-Rom-Algorithmus.');\r\n\r\n        this.addProcessingMethod('box', ['size'], floatPrimitiveType,\r\n            'Zeichnet einen 3D-Würfel mit der Seitenlänge size.');\r\n\r\n        this.addProcessingMethod('box', ['sizeX', 'sizeY', 'sizeZ'], floatPrimitiveType,\r\n            'Zeichnet einen 3D-Würfel mit den angegebenen Seitenlängen.');\r\n\r\n        /**\r\n         * Transformationen\r\n         */\r\n        this.addProcessingMethod('resetMatrix', [], [],\r\n            'Setzt alle erfolgten Transformationen zurück.');\r\n\r\n        this.addProcessingMethod('push', [], [],\r\n            'Sichert den aktuellen Zeichenzustand, d.h. die Farben und Transformationen, auf einen Stack.');\r\n\r\n        this.addProcessingMethod('pop', [], [],\r\n            'Holt den obersten Zeichenzustand, d.h. die Farben und Transformationen, vom Stack.');\r\n\r\n        this.addProcessingMethod('scale', ['factor'], floatPrimitiveType,\r\n            'Streckt die nachfolgend gezeichneten Figuren.');\r\n\r\n        this.addProcessingMethod('scale', ['factorX', 'factorY'], floatPrimitiveType,\r\n            'Streckt die nachfolgend gezeichneten Figuren.');\r\n\r\n        this.addProcessingMethod('scale', ['factorX', 'factorY', 'factorZ'], floatPrimitiveType,\r\n            'Streckt die nachfolgend gezeichneten Figuren.');\r\n\r\n        this.addProcessingMethod('translate', ['x', 'y'], floatPrimitiveType,\r\n            'Verschiebt die nachfolgend gezeichneten Figuren.');\r\n\r\n        this.addProcessingMethod('translate', ['x', 'y', 'z'], floatPrimitiveType,\r\n            'Verschiebt die nachfolgend gezeichneten Figuren.');\r\n\r\n        this.addProcessingMethod('rotate', ['angle'], floatPrimitiveType,\r\n            'Rotiert die nachfolgend gezeichneten Figuren. Mit angleMode(RADIANS) bzw. angleMode(DEGREES) kann beeinflusst werden, wie angle interpretiert wird. Default ist RADIANS.');\r\n\r\n        this.addProcessingMethod('rotateX', ['angle'], floatPrimitiveType,\r\n            'Rotiert die nachfolgend gezeichneten Figuren um die X-Achse. Mit angleMode(RADIANS) bzw. angleMode(DEGREES) kann beeinflusst werden, wie angle interpretiert wird. Default ist RADIANS.');\r\n\r\n        this.addProcessingMethod('rotateY', ['angle'], floatPrimitiveType,\r\n            'Rotiert die nachfolgend gezeichneten Figuren um die Y-Achse. Mit angleMode(RADIANS) bzw. angleMode(DEGREES) kann beeinflusst werden, wie angle interpretiert wird. Default ist RADIANS.');\r\n\r\n        this.addProcessingMethod('shearX', ['angle'], floatPrimitiveType,\r\n            'Schert die nachfolgend gezeichneten Figuren in Richtung derX-Achse. Mit angleMode(RADIANS) bzw. angleMode(DEGREES) kann beeinflusst werden, wie angle interpretiert wird. Default ist RADIANS.');\r\n\r\n        this.addProcessingMethod('shearY', ['angle'], floatPrimitiveType,\r\n            'Schert die nachfolgend gezeichneten Figuren in Richtung der Y-Achse. Mit angleMode(RADIANS) bzw. angleMode(DEGREES) kann beeinflusst werden, wie angle interpretiert wird. Default ist RADIANS.');\r\n\r\n        this.addProcessingMethod('rotateZ', ['angle'], floatPrimitiveType,\r\n            'Rotiert die nachfolgend gezeichneten Figuren um die Z-Achse. Mit angleMode(RADIANS) bzw. angleMode(DEGREES) kann beeinflusst werden, wie angle interpretiert wird. Default ist RADIANS.');\r\n\r\n        this.addProcessingMethod('angleMode', ['mode'], stringPrimitiveType,\r\n            'Mit angleMode(RADIANS) bzw. angleMode(DEGREES) kann beeinflusst werden, wie winkel bei Rotationen interpretiert werden. Default ist RADIANS.');\r\n\r\n        /**\r\n         * Text\r\n         */\r\n        this.addProcessingMethod('textSize', ['size'], floatPrimitiveType,\r\n            'Setzt die Schriftgröße in Pixel.');\r\n\r\n        // this.addProcessingMethod('loadFont', ['fontname'], stringPrimitiveType,\r\n        //     'Lädt eine Schriftart. Diese Methode muss in der Methode preload aufgerufen werden.');\r\n\r\n        this.addProcessingMethod('textAlign', ['alignX'], intPrimitiveType,\r\n            'Setzt die Ausrichtung des nächsten ausgegebenen Textes in x-Richtung. Mögliche Werte sind CENTER, LEFT, RIGHT');\r\n\r\n        this.addProcessingMethod('textAlign', ['alignX', 'alignY'], intPrimitiveType,\r\n            'Setzt die Ausrichtung des nächsten ausgegebenen Textes. Mögliche Werte für alignX sind CENTER, LEFT, RIGHT, mögliche Werte für alignY sind TOP, CENTER, BASELINE, BOTTOM');\r\n\r\n        this.addProcessingMethod('text', ['text', 'x', 'y'], [stringPrimitiveType, floatPrimitiveType, floatPrimitiveType],\r\n            'Gibt Text aus.');\r\n\r\n        this.addProcessingMethod('text', ['text', 'x', 'y', 'x2', 'y2'], [stringPrimitiveType, floatPrimitiveType, floatPrimitiveType, floatPrimitiveType, floatPrimitiveType],\r\n            'Gibt Text aus. x2 und y2 sind die Breite und Höhe des Textausgabebereichs. Hat der Text horizontal nicht Platz, so wird er entsprechend umgebrochen.');\r\n\r\n        /**\r\n         * Mathematische Funktionen\r\n         */\r\n        this.addProcessingMethod('random', ['low', 'high'], floatPrimitiveType,\r\n            'Gibt eine Zufallszahl zwischen low und high zurück.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('random', ['high'], floatPrimitiveType,\r\n            'Gibt eine Zufallszahl zwischen 0 und high zurück.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('sqrt', ['n'], floatPrimitiveType,\r\n            'Gibt die Quadratwurzel von n zurück.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('pow', ['basis', 'exponent'], floatPrimitiveType,\r\n            'Gibt die den Wert der Potenz (\"basis hoch exponent\") zurück.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('max', ['a', 'b'], floatPrimitiveType,\r\n            'Gibt den größeren der beiden Werte zurück.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('min', ['a', 'b'], floatPrimitiveType,\r\n            'Gibt den kleineren der beiden Werte zurück.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('abs', ['n'], floatPrimitiveType,\r\n            'Gibt den Betrag des Wertes zurück.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('sin', ['n'], floatPrimitiveType,\r\n            'Gibt den Sinus des Wertes zurück.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('cos', ['n'], floatPrimitiveType,\r\n            'Gibt den Cosinus des Wertes zurück.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('tan', ['n'], floatPrimitiveType,\r\n            'Gibt den Tangens des Wertes zurück.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('asin', ['n'], floatPrimitiveType,\r\n            'Gibt den Arcussinus des Wertes zurück.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('acos', ['n'], floatPrimitiveType,\r\n            'Gibt den Arcussosinus des Wertes zurück.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('radians', ['angle'], floatPrimitiveType,\r\n            'Wandelt einen Winkel vom Gradmaß ins Bogenmaß um.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('degrees', ['angle'], floatPrimitiveType,\r\n            'Wandelt einen Winkel vom Bogenmaß ins Gradmaß um.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('atan', ['n'], floatPrimitiveType,\r\n            'Gibt den Arcussangens des Wertes zurück.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('atan2', ['x', 'y'], floatPrimitiveType,\r\n            'Gibt den Arcussangens des Wertes zurück.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('sqrt', ['x', 'y'], floatPrimitiveType,\r\n            'Gibt die Quadratwurzel des Wertes zurück.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('sq', ['x', 'y'], floatPrimitiveType,\r\n            'Gibt das Quadrat des Wertes zurück.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('abs', ['n'], intPrimitiveType,\r\n            'Gibt den Betrag des Wertes zurück.', intPrimitiveType);\r\n\r\n        this.addProcessingMethod('round', ['n'], floatPrimitiveType,\r\n            'Rundet den Wert auf eine ganze Zahl.', intPrimitiveType);\r\n\r\n        this.addProcessingMethod('ceil', ['n'], floatPrimitiveType,\r\n            'Rundet den Wert auf eine ganze Zahl (Aufrunden!).', intPrimitiveType);\r\n\r\n        this.addProcessingMethod('floor', ['n'], floatPrimitiveType,\r\n            'Rundet den Wert auf eine ganze Zahl (Abfrunden!).', intPrimitiveType);\r\n\r\n        this.addProcessingMethod('dist', ['x1', 'y1', 'x2', 'y2'], floatPrimitiveType,\r\n            'Berechnet den Abstand der Punkte (x1, y1) und (x2, y2).', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('lerp', ['a', 'b', 't'], floatPrimitiveType,\r\n            'Berechnet den a + (b - a)*t. Wählt man t zwischen 0 und 1, so kann man damit die Zwischenwerte zwischen a und b errechnen.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('constrain', ['value', 'min', 'max'], floatPrimitiveType,\r\n            'Beschränkt value auf den Bereich [min, max], genauer: Ist value < min, so wird min zurückgegeben. Ist value > max, so wird max zurückgegeben. Ansonsten wird value zurückgegeben.', floatPrimitiveType);\r\n\r\n        /**\r\n         * Sonstiges\r\n         */\r\n\r\n        this.addProcessingMethod('year', [], [],\r\n            'Aktuelle Jahreszahl', intPrimitiveType);\r\n\r\n        this.addProcessingMethod('month', [], [],\r\n            'Monat: 1 == Januar, 12 == Dezember', intPrimitiveType);\r\n\r\n        this.addProcessingMethod('day', [], [],\r\n            'Tag (innerhalb des Monats) des aktuellen Datums', intPrimitiveType);\r\n\r\n        this.addProcessingMethod('hour', [], [],\r\n            'Stundenzahl der aktuellen Uhrzeit', intPrimitiveType);\r\n\r\n        this.addProcessingMethod('hour', [], [],\r\n            'Stundenzahl der aktuellen Uhrzeit', intPrimitiveType);\r\n\r\n        this.addProcessingMethod('minute', [], [],\r\n            'Minutenzahl der aktuellen Uhrzeit', intPrimitiveType);\r\n\r\n        this.addProcessingMethod('second', [], [],\r\n            'Sekundenzahl der aktuellen Uhrzeit', intPrimitiveType);\r\n\r\n        this.addProcessingMethod('frameRate', ['n'], intPrimitiveType,\r\n            'Setzt die Framerate (Anzahl der Aufrufe von draw() pro Sekunde)');\r\n\r\n        this.addProcessingMethod('textWidth', ['text'], stringPrimitiveType,\r\n            'Gibt die Breite des Texts zurück.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('textAscent', ['text'], stringPrimitiveType,\r\n            'Gibt den Ascent Textes zurück ( = Höhe des größten Zeichens über der Grundlinie).', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('textDescent', ['text'], stringPrimitiveType,\r\n            'Gibt den Descent Textes zurück ( = Tiefe des tiefsten Zeichens unter der Grundlinie).', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('textLeading', ['leading'], floatPrimitiveType,\r\n            'Setzt den Abstand zweier aufeinanderfolgender Textzeilen.');\r\n\r\n        this.addProcessingMethod('cursor', ['type'], stringPrimitiveType,\r\n            'Ändert das Aussehen des Mauscursors. Type ist einer der Werte \"arrow\", \"cross\", \"text\", \"move\", \"hand\", \"wait\", \"progress\".');\r\n\r\n        this.addProcessingMethod('noCursor', ['type'], stringPrimitiveType,\r\n            'Hat zur Folge, dass der Mauscursor über dem Zeichenbereich unsichtbar ist.');\r\n\r\n        this.addProcessingMethod('copy', ['sx', 'sy', 'sw', 'sh', 'dx', 'dy', 'dw', 'dh'], floatPrimitiveType,\r\n            'Kopiert den rechteckigen Bereich mit der linken oberen Ecke (sx, sy) sowie der Breite sw und der Höhe sh in den Bereich mit der linken oberen Ecke (dx, dy), der Breite dw und der Höhe dh.');\r\n\r\n        this.addProcessingMethod('millis', [], [],\r\n            'Gibt die Millisekunden zurück, die vergangen sind, seit setup() aufgerufen wurde.');\r\n\r\n        this.addProcessingMethod('redraw', [], [],\r\n            'Führt draw() genau ein Mal aus. Macht ggf. Sinn, wenn die Render-Loop zuvor mit noLoop() gestoppt wurde.');\r\n\r\n    }\r\n\r\n    addProcessingMethod(identifier: string, parameterNames: string[], parameterTypes: Type[] | Type, comment: string, returnType?: Type) {\r\n\r\n        let parameters: Variable[] = [];\r\n        if (Array.isArray(parameterTypes)) {\r\n            for (let i = 0; i < parameterNames.length; i++) {\r\n                parameters.push({ identifier: parameterNames[i], type: parameterTypes[i], declaration: null, usagePositions: null, isFinal: true });\r\n            }\r\n        } else {\r\n            parameters = parameterNames.map((name) => { return { identifier: name, type: parameterTypes, declaration: null, usagePositions: null, isFinal: true } })\r\n        }\r\n\r\n        if (returnType == null) {\r\n            this.addMethod(new Method(identifier, new Parameterlist(parameters), null,\r\n                (parameters) => {\r\n                    let o: RuntimeObject = parameters[0].value;\r\n                    let ph: ProcessingHelper = o.intrinsicData[\"Processing\"];\r\n                    let pList = parameters.slice(1).map(p => p.value);\r\n\r\n                    ph.p5o[identifier](...pList);\r\n\r\n                }, false, false, comment, false));\r\n        } else {\r\n            this.addMethod(new Method(identifier, new Parameterlist(parameters), returnType,\r\n                (parameters) => {\r\n                    let o: RuntimeObject = parameters[0].value;\r\n                    let ph: ProcessingHelper = o.intrinsicData[\"Processing\"];\r\n                    let pList = parameters.slice(1).map(p => p.value);\r\n\r\n                    return ph.p5o[identifier](...pList);\r\n\r\n                }, false, false, comment, false));\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n    getProcessingHelper(processingObject: RuntimeObject, breite: number = 800, höhe: number = 600): ProcessingHelper {\r\n\r\n        let interpreter = this.module?.main?.getInterpreter();\r\n\r\n\r\n        if (interpreter.processingHelper != null) {\r\n\r\n            interpreter.throwException(\"Es kann nur ein einziges Processing-Applet instanziert werden.\");\r\n            return;\r\n        }\r\n\r\n        if (interpreter.worldHelper != null) {\r\n\r\n            interpreter.throwException(\"Processing kann nicht gleichzeitig mit der herkömmlichen Grafikausgabe genutzt werden.\");\r\n            return;\r\n        }\r\n\r\n        return new ProcessingHelper(this.module, interpreter, processingObject);\r\n\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\nexport class ProcessingHelper {\r\n\r\n    $containerOuter: JQuery<HTMLElement>;\r\n    $containerInner: JQuery<HTMLElement>;\r\n\r\n    $div: JQuery<HTMLElement>;\r\n\r\n    width: number = 800;\r\n    height: number = 600;\r\n\r\n    p5o: p5;\r\n\r\n    renderer: string;\r\n    loopStopped: boolean = false;\r\n\r\n    onSizeChanged: () => void;\r\n\r\n\r\n    constructor(private module: Module, private interpreter: Interpreter, public runtimeObject: RuntimeObject) {\r\n\r\n        this.interpreter.processingHelper = this;\r\n\r\n        this.$containerOuter = jQuery('<div></div>');\r\n        let $graphicsDiv = this.module.main.getInterpreter().printManager.getGraphicsDiv();\r\n\r\n        this.onSizeChanged = () => {\r\n            let $jo_tabs = $graphicsDiv.parents(\".jo_tabs\");\r\n            let maxWidth: number = $jo_tabs.width();\r\n            let maxHeight: number = $jo_tabs.height();\r\n            // let maxWidth: number = $graphicsDiv.parent().width();\r\n            // let maxHeight: number = $graphicsDiv.parent().height();\r\n\r\n            if (this.height / this.width > maxHeight / maxWidth) {\r\n                $graphicsDiv.css({\r\n                    'width': this.width / this.height * maxHeight + \"px\",\r\n                    'height': maxHeight + \"px\",\r\n                })\r\n            } else {\r\n                $graphicsDiv.css({\r\n                    'height': this.height / this.width * maxWidth + \"px\",\r\n                    'width': maxWidth + \"px\",\r\n                })\r\n            }\r\n        };\r\n\r\n        $graphicsDiv.off('sizeChanged');\r\n        $graphicsDiv.on('sizeChanged', this.onSizeChanged);\r\n\r\n        this.onSizeChanged();\r\n\r\n        this.$containerInner = jQuery('<div></div>');\r\n        this.$containerOuter.append(this.$containerInner);\r\n\r\n        $graphicsDiv.append(this.$containerOuter);\r\n        $graphicsDiv.show();\r\n\r\n        $graphicsDiv[0].oncontextmenu = function (e) {\r\n            e.preventDefault();\r\n        };\r\n\r\n        this.module.main.getRightDiv()?.adjustWidthToWorld();\r\n\r\n    }\r\n\r\n    createCanvas(width: number, height: number) {\r\n        this.width = width;\r\n        this.height = height;\r\n        this.onSizeChanged();\r\n        this.p5o.createCanvas(this.width, this.height, this.renderer);\r\n        this.$div.find('canvas').css({\r\n            'width': '',\r\n            'height': ''\r\n\r\n        });\r\n    }\r\n\r\n    main() {\r\n            this.interpreter.timerExtern = true;\r\n            this.setupProcessing(this.$containerInner);\r\n        }\r\n\r\n    setupProcessing($div: JQuery<HTMLElement>) {\r\n\r\n            let that = this;\r\n            let drawMethodPending: boolean = true;\r\n            this.$div = $div;\r\n\r\n            let sketch = (p5: p5) => {\r\n\r\n                p5.setup = function () {\r\n                    that.renderer = p5.P2D;\r\n\r\n                    let afterFinishingBoth = () => {\r\n                        // p5.createCanvas(that.width, that.height, that.renderer);\r\n                        drawMethodPending = false\r\n                        // $div.find('canvas').css({\r\n                        //     'width': '',\r\n                        //     'height': ''\r\n                        // })            \r\n                    }\r\n\r\n                    let i = 2;\r\n\r\n                    that.runMethod('setup', () => {\r\n                        if (--i == 0) afterFinishingBoth();\r\n                    });\r\n\r\n                    that.runMethod('settings', () => {\r\n                        if (--i == 0) afterFinishingBoth();\r\n                    });\r\n\r\n\r\n                };\r\n\r\n                p5.preload = function () {\r\n                    that.runMethod('preload');\r\n                };\r\n\r\n                p5.draw = function () {\r\n                    if (that.interpreter.state == InterpreterState.running && !that.loopStopped) {\r\n                        if (!drawMethodPending) {\r\n                            drawMethodPending = true;\r\n                            that.runMethod(\"draw\", () => {\r\n                                drawMethodPending = false;\r\n                            });\r\n                        }\r\n                    }\r\n                    that.tick();\r\n                    // p5.background(50);\r\n                    // p5.rect(p5.width / 2, p5.height / 2, 50, 50);\r\n\r\n                };\r\n\r\n                p5.mousePressed = function () {\r\n                    that.runMethod('mousePressed');\r\n                };\r\n\r\n                p5.mouseReleased = function () {\r\n                    that.runMethod('mouseReleased');\r\n                };\r\n\r\n                p5.mouseClicked = function () {\r\n                    that.runMethod('mouseClicked');\r\n                };\r\n\r\n                p5.mouseDragged = function () {\r\n                    that.runMethod('mouseDragged');\r\n                };\r\n\r\n                p5.mouseEntered = function () {\r\n                    that.runMethod('mouseEntered');\r\n                };\r\n\r\n                p5.mouseExited = function () {\r\n                    that.runMethod('mouseExited');\r\n                };\r\n\r\n                p5.mouseMoved = function () {\r\n                    that.runMethod('mouseMoved');\r\n                };\r\n\r\n                p5.keyPressed = function () {\r\n                    that.runMethod('keyPressed');\r\n                };\r\n\r\n                p5.keyReleased = function () {\r\n                    that.runMethod('keyReleased');\r\n                };\r\n\r\n\r\n            }\r\n\r\n        //@ts-ignore\r\n        this.p5o = new p5(sketch, $div[0]);\r\n            $div.find('canvas').css({\r\n                'width': '',\r\n                'height': ''\r\n            })\r\n\r\n        }\r\n\r\n\r\n    tick() {\r\n\r\n            if(this.interpreter.state == InterpreterState.running) {\r\n            this.interpreter.timerFunction(33.33, true, 0.5);\r\n            this.interpreter.timerStopped = false;\r\n            this.interpreter.timerFunction(33.33, false, 0.08);\r\n        }\r\n\r\n    }\r\n\r\n    loop() {\r\n        this.loopStopped = false;\r\n    }\r\n\r\n    noLoop() {\r\n        this.loopStopped = true;\r\n    }\r\n\r\n    runMethod(methodIdentifier: string, callback: () => void = null) {\r\n\r\n        let klass: Klass = <Klass>this.runtimeObject.class;\r\n        let method = klass.getMethodBySignature(methodIdentifier + \"()\");\r\n\r\n        let program = method?.program;\r\n\r\n        if (program == null) {\r\n            if (callback != null) callback();\r\n            return;\r\n        }\r\n\r\n        let stackElements: Value[] = [\r\n            {\r\n                type: klass,\r\n                value: this.runtimeObject\r\n            },\r\n        ];\r\n\r\n        this.interpreter.runTimer(method, stackElements, (interpreter) => {\r\n            if (callback != null) callback();\r\n        }, methodIdentifier == \"draw\");\r\n    }\r\n\r\n\r\n    destroyWorld() {\r\n        if (this.p5o != null) this.p5o.remove();\r\n        this.$containerOuter.remove();\r\n        this.module.main.getInterpreter().printManager.getGraphicsDiv().hide();\r\n        this.interpreter.timerExtern = false;\r\n        this.interpreter.processingHelper = null;\r\n    }\r\n\r\n}","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass } from \"../../compiler/types/Class.js\";\r\nimport { doublePrimitiveType, intPrimitiveType, booleanPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, Value } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { FilledShapeHelper } from \"./FilledShape.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { polygonBerührtPolygon } from \"../../tools/MatheTools.js\";\r\n\r\nexport class TurtleClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Turtle\", module, \"Turtle-Klasse zum Zeichnen von Streckenzügen oder gefüllten Figuren. Wichtig sind vor allem die Methoden forward(double length) und turn(double angleDeg), die die Turtle nach vorne bewegen bzw. ihre Blickrichtung ändern.\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"FilledShape\"));\r\n\r\n        this.addMethod(new Method(\"Turtle\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n\r\n                let ph = new TurtleHelper(x, y, false, module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = ph;\r\n\r\n            }, false, false, 'Instanziert ein neues Turtle-Objekt ohne Punkte. Die Turtle blickt anfangs nach rechts. Am Ende des Streckenzugs wird eine \"Schildkröte\" (kleines Dreieck) gezeichnet.', true));\r\n\r\n\r\n        this.addMethod(new Method(\"Turtle\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"showTurtle\", type: booleanPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n                let showTurtle: boolean = parameters[3].value;\r\n\r\n                let ph = new TurtleHelper(x, y, showTurtle, module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = ph;\r\n\r\n            }, false, false, 'Instanziert ein neues Turtle-Objekt ohne Punkte. Die Turtle blickt anfangs nach rechts. Falls showTurtle == true, wird am Ende des Streckenzuges eine \"Schildkröte\" (kleines Dreieck) gezeichnet.', true));\r\n\r\n\r\n        this.addMethod(new Method(\"forward\", new Parameterlist([\r\n            { identifier: \"length\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let length: number = parameters[1].value;\r\n                let sh: TurtleHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"forward\")) return;\r\n\r\n                sh.forward(length);\r\n\r\n            }, false, false, 'Weist die Turtle an, die angegebene Länge vorwärts zu gehen. Ihr zurückgelegter Weg wird als gerade Strecke mit der aktuellen BorderColor gezeichnet. Mit setBorderColor(null) bewirkst Du, dass ein Stück ihres Weges nicht gezeichnet wird.', false));\r\n\r\n        this.addMethod(new Method(\"turn\", new Parameterlist([\r\n            { identifier: \"angleInDeg\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let angle: number = parameters[1].value;\r\n                let sh: TurtleHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"turn\")) return;\r\n\r\n                sh.turn(angle);\r\n\r\n            }, false, false, 'Bewirkt, dass sich die Turtle um den angegebenen Winkel (in Grad!) dreht, d.h. ihre Blickrichtung ändert. Ein positiver Winkel bewirkt eine Drehung gegen den Uhrzeigersinn. Diese Methode wirkt sich NICHT auf die bisher gezeichneten Strecken aus. Willst Du alles bisher Gezeichnete inklusive Turtle drehen, so nutze die Methode rotate.', false));\r\n\r\n        this.addMethod(new Method(\"closeAndFill\", new Parameterlist([\r\n            { identifier: \"closeAndFill\", type: booleanPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let closeAndFill: boolean = parameters[1].value;\r\n                let sh: TurtleHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"closeAndFill\")) return;\r\n\r\n                sh.closeAndFill(closeAndFill);\r\n\r\n            }, false, false, 'closeAndFill == true bewirkt, dass das von der Turtlezeichnung umschlossene Gebiet gefüllt wird.', false));\r\n\r\n        this.addMethod(new Method(\"showTurtle\", new Parameterlist([\r\n            { identifier: \"showTurtle\", type: booleanPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let showTurtle: boolean = parameters[1].value;\r\n                let sh: TurtleHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"showTurtle\")) return;\r\n\r\n                sh.setShowTurtle(showTurtle);\r\n\r\n            }, false, false, 'closeAndFill == true bewirkt, dass das von der Turtlezeichnung umschlossene Gebiet gefüllt wird.', false));\r\n\r\n        this.addMethod(new Method(\"copy\", new Parameterlist([\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: TurtleHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"copy\")) return;\r\n\r\n                return sh.getCopy(<Klass>o.class);\r\n\r\n            }, false, false, 'Erstellt eine Kopie des Turtle-Objekts und gibt es zurück.', false));\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\ntype LineElement = {\r\n    x: number,\r\n    y: number,\r\n    color: number,\r\n    alpha: number,\r\n    lineWidth: number\r\n}\r\n\r\nexport class TurtleHelper extends FilledShapeHelper {\r\n\r\n    lineElements: LineElement[] = [];\r\n    angle: number = 0;\r\n\r\n    isFilled: boolean = false;\r\n\r\n    turtle: PIXI.Graphics;\r\n    lineGraphic: PIXI.Graphics;\r\n\r\n    xSum: number = 0;\r\n    ySum: number = 0;\r\n\r\n    initialHitPolygonDirty: boolean = true;\r\n\r\n    constructor(xStart: number, yStart: number, private showTurtle: boolean,\r\n        interpreter: Interpreter, runtimeObject: RuntimeObject) {\r\n        super(interpreter, runtimeObject);\r\n\r\n        this.lineElements.push({\r\n            x: xStart,\r\n            y: yStart,\r\n            color: 0,\r\n            alpha: 1,\r\n            lineWidth: 1\r\n        });\r\n        this.calculateCenter;\r\n\r\n        this.borderColor = 0xffffff;\r\n\r\n        this.hitPolygonInitial = [];\r\n\r\n        let container = new PIXI.Container();\r\n        this.displayObject = container;\r\n\r\n        this.lineGraphic = new PIXI.Graphics();\r\n        container.addChild(this.lineGraphic);\r\n\r\n        this.turtle = new PIXI.Graphics();\r\n        container.addChild(this.turtle);\r\n        this.turtle.visible = this.showTurtle;\r\n        this.drawTurtle(xStart, yStart, this.angle);\r\n\r\n\r\n        // let g: PIXI.Graphics = <any>this.displayObject;\r\n\r\n        this.worldHelper.stage.addChild(this.displayObject);\r\n\r\n        this.addToDefaultGroup();\r\n\r\n    }\r\n\r\n    calculateCenter(){\r\n        let length = this.lineElements.length;\r\n        let lastLineElement = this.lineElements[length - 1];\r\n        this.xSum += lastLineElement.x;\r\n        this.ySum += lastLineElement.y;\r\n        this.centerXInitial = this.xSum/length;\r\n        this.centerYInitial = this.ySum/length;\r\n    }\r\n\r\n    closeAndFill(closeAndFill: boolean) {\r\n        if (closeAndFill != this.isFilled) {\r\n            this.isFilled = closeAndFill;\r\n            this.render();\r\n            this.initialHitPolygonDirty = true;\r\n        }\r\n    }\r\n\r\n    setShowTurtle(show: boolean){\r\n        this.turtle.visible = show;\r\n    }\r\n\r\n    turn(angle: number) {\r\n        this.angle -= angle / 180 * Math.PI;\r\n    }\r\n\r\n    rotate(angleInDegrees: number, cx?: number, cy?: number) {\r\n        this.turn(this.angle);\r\n        let lastLineElement = this.lineElements[this.lineElements.length - 1];\r\n        this.drawTurtle(lastLineElement.x, lastLineElement.y, this.angle);\r\n        super.rotate(angleInDegrees, cx, cy);\r\n    }\r\n\r\n    getCopy(klass: Klass): RuntimeObject {\r\n\r\n        let ro: RuntimeObject = new RuntimeObject(klass);\r\n        let rh: TurtleHelper = new TurtleHelper(this.lineElements[0].x, this.lineElements[0].y,\r\n            this.showTurtle, this.worldHelper.interpreter, ro);\r\n        ro.intrinsicData[\"Actor\"] = rh;\r\n\r\n        rh.copyFrom(this);\r\n        rh.render();\r\n\r\n        return ro;\r\n    }\r\n\r\n    forward(length: number) {\r\n\r\n        let lastLineElement: LineElement = this.lineElements[this.lineElements.length - 1];\r\n        let newLineElement: LineElement = {\r\n            x: lastLineElement.x + length * Math.cos(this.angle),\r\n            y: lastLineElement.y + length * Math.sin(this.angle),\r\n            color: this.borderColor,\r\n            alpha: this.borderAlpha,\r\n            lineWidth: this.borderWidth\r\n        }\r\n\r\n        this.lineElements.push(newLineElement);\r\n\r\n        if (this.isFilled) {\r\n            this.render();\r\n        } else {\r\n            if (this.borderColor != null) {\r\n                this.lineGraphic.moveTo(lastLineElement.x, lastLineElement.y);\r\n                this.lineGraphic.lineStyle(this.borderWidth, this.borderColor, this.borderAlpha, 0.5)\r\n                this.lineGraphic.lineTo(newLineElement.x, newLineElement.y);\r\n            }\r\n        }\r\n\r\n        this.hitPolygonDirty = true;\r\n        this.initialHitPolygonDirty = true;\r\n        this.calculateCenter();\r\n        this.drawTurtle(newLineElement.x, newLineElement.y, this.angle);\r\n\r\n    }\r\n\r\n    drawTurtle(x: number, y: number, angle: number): void {\r\n        this.turtle.clear();\r\n        this.turtle.lineStyle(3, 0xff0000, 1, 0.5);\r\n        this.turtle.moveTo(x, y);\r\n\r\n        let vx = Math.cos(angle);\r\n        let vy = Math.sin(angle);\r\n\r\n        let vxp = -Math.sin(angle);\r\n        let vyp = Math.cos(angle);\r\n\r\n        let lengthForward = 20;\r\n        let lengthBackward = 10;\r\n        let lengthBackwardP = 10;\r\n\r\n        this.turtle.moveTo(x + vx * lengthForward, y + vy * lengthForward);\r\n        this.turtle.lineTo(x - vx * lengthBackward + vxp * lengthBackwardP, y - vy * lengthBackward + vyp * lengthBackwardP);\r\n        this.turtle.lineTo(x - vx * lengthBackward - vxp * lengthBackwardP, y - vy * lengthBackward - vyp * lengthBackwardP);\r\n        this.turtle.lineTo(x + vx * lengthForward, y + vy * lengthForward);\r\n    }\r\n\r\n    render(): void {\r\n\r\n        let g: PIXI.Graphics = this.lineGraphic;\r\n\r\n        if (this.displayObject == null) {\r\n            g = new PIXI.Graphics();\r\n            this.displayObject = g;\r\n            this.worldHelper.stage.addChild(g);\r\n\r\n        } else {\r\n            g.clear();\r\n        }\r\n\r\n        if (this.fillColor != null && this.isFilled) {\r\n            g.beginFill(this.fillColor, this.fillAlpha);\r\n        }\r\n\r\n        let firstPoint = this.lineElements[0];\r\n        g.moveTo(firstPoint.x, firstPoint.y);\r\n\r\n        if (this.isFilled) {\r\n            g.lineStyle(this.borderWidth, this.borderColor, this.borderAlpha, 0.5);\r\n        }\r\n        for (let i = 1; i < this.lineElements.length; i++) {\r\n            let le: LineElement = this.lineElements[i];\r\n            if (le.color != null) {\r\n                if (!this.isFilled) {\r\n                    g.lineStyle(le.lineWidth, le.color, le.alpha, 0.5)\r\n                }\r\n                g.lineTo(le.x, le.y);\r\n            } else {\r\n                g.moveTo(le.x, le.y);\r\n            }\r\n        }\r\n\r\n        if (this.isFilled) {\r\n            g.closePath();\r\n        }\r\n\r\n        if (this.fillColor != null && this.isFilled) {\r\n            g.endFill();\r\n        }\r\n    };\r\n\r\n    collidesWith(shapeHelper: any) {\r\n\r\n        if(shapeHelper instanceof TurtleHelper && shapeHelper.initialHitPolygonDirty){\r\n            shapeHelper.setupInitialHitPolygon();\r\n        }\r\n\r\n        if(this.initialHitPolygonDirty){\r\n            this.setupInitialHitPolygon();\r\n        }\r\n\r\n        let bb = this.displayObject.getBounds();\r\n        let bb1 = shapeHelper.displayObject.getBounds();\r\n\r\n        if (bb.left > bb1.right || bb1.left > bb.right) return false;\r\n\r\n        if (bb.top > bb1.bottom || bb1.top > bb.bottom) return false;\r\n\r\n        if (shapeHelper[\"shapes\"]) {\r\n            return shapeHelper.collidesWith(this);\r\n        }\r\n\r\n        if (this.hitPolygonInitial == null || shapeHelper.hitPolygonInitial == null) return true;\r\n\r\n        // boundig boxes collide, so check further:\r\n        if (this.hitPolygonDirty) this.transformHitPolygon();\r\n        if (shapeHelper.hitPolygonDirty) shapeHelper.transformHitPolygon();\r\n\r\n        return polygonBerührtPolygon(this.hitPolygonTransformed, shapeHelper.hitPolygonTransformed);\r\n\r\n    }\r\n\r\n    setupInitialHitPolygon(){\r\n        this.hitPolygonInitial = this.lineElements.map((le) => {return {x: le.x, y: le.y}});\r\n    }\r\n\r\n}\r\n","import { FileData } from \"../../communication/Data.js\";\r\nimport { AccordionElement } from \"../../main/gui/Accordion.js\";\r\nimport { MainBase } from \"../../main/MainBase.js\";\r\nimport { ArrayListClass } from \"../../runtimelibrary/collections/ArrayList.js\";\r\nimport { CollectionClass } from \"../../runtimelibrary/collections/Collection.js\";\r\nimport { IterableClass } from \"../../runtimelibrary/collections/Iterable.js\";\r\nimport { IteratorClass } from \"../../runtimelibrary/collections/Iterator.js\";\r\nimport { ListClass } from \"../../runtimelibrary/collections/List.js\";\r\nimport { ListIteratorImplClass } from \"../../runtimelibrary/collections/ListIteratorImpl.js\";\r\nimport { StackClass } from \"../../runtimelibrary/collections/Stack.js\";\r\nimport { VectorClass } from \"../../runtimelibrary/collections/Vector.js\";\r\nimport { SetClass } from \"../../runtimelibrary/collections/Set.js\";\r\nimport { SetIteratorImplClass } from \"../../runtimelibrary/collections/SetIteratorImpl.js\";\r\nimport { HashSetClass } from \"../../runtimelibrary/collections/HashSet.js\";\r\nimport { LinkedHashSetClass } from \"../../runtimelibrary/collections/LinkedHashSet.js\";\r\nimport { QueueClass } from \"../../runtimelibrary/collections/Queue.js\";\r\nimport { DequeClass } from \"../../runtimelibrary/collections/Deque.js\";\r\nimport { LinkedListClass } from \"../../runtimelibrary/collections/LinkedList.js\";\r\nimport { ConsoleClass } from \"../../runtimelibrary/Console.js\";\r\nimport { Actor as ActorClass } from \"../../runtimelibrary/graphics/Actor.js\";\r\nimport { AlignmentClass } from \"../../runtimelibrary/graphics/Alignment.js\";\r\nimport { BitmapClass } from \"../../runtimelibrary/graphics/Bitmap.js\";\r\nimport { CircleClass as CircleClass } from \"../../runtimelibrary/graphics/Circle.js\";\r\nimport { ColorClass } from \"../../runtimelibrary/graphics/Color.js\";\r\nimport { EllipseClass } from \"../../runtimelibrary/graphics/Ellipse.js\";\r\nimport { FilledShapeClass } from \"../../runtimelibrary/graphics/FilledShape.js\";\r\nimport { CollisionPairClass, GroupClass } from \"../../runtimelibrary/graphics/Group.js\";\r\nimport { KeyClass } from \"../../runtimelibrary/graphics/Key.js\";\r\nimport { PolygonClass } from \"../../runtimelibrary/graphics/Polygon.js\";\r\nimport { RectangleClass } from \"../../runtimelibrary/graphics/Rectangle.js\";\r\nimport { RepeatTypeClass } from \"../../runtimelibrary/graphics/RepeatType.js\";\r\nimport { RoundedRectangleClass } from \"../../runtimelibrary/graphics/RoundedRectangle.js\";\r\nimport { ScaleModeClass } from \"../../runtimelibrary/graphics/ScaleMode.js\";\r\nimport { ShapeClass } from \"../../runtimelibrary/graphics/Shape.js\";\r\nimport { SoundKlass as SoundClass } from \"../../runtimelibrary/graphics/Sound.js\";\r\nimport { SpriteClass } from \"../../runtimelibrary/graphics/Sprite.js\";\r\nimport { SpriteLibraryClass } from \"../../runtimelibrary/graphics/SpriteLibraryEnum.js\";\r\nimport { TextClass } from \"../../runtimelibrary/graphics/Text.js\";\r\nimport { WorldClass } from \"../../runtimelibrary/graphics/World.js\";\r\nimport { InputClass } from \"../../runtimelibrary/Input.js\";\r\nimport { MathClass } from \"../../runtimelibrary/Math.js\";\r\nimport { PrintStreamClass, SystemClass } from \"../../runtimelibrary/System.js\";\r\nimport { KeyListener, SystemToolsClass } from \"../../runtimelibrary/SystemTools.js\";\r\nimport { Runnable, TimerClass } from \"../../runtimelibrary/Timer.js\";\r\nimport { Workspace } from \"../../workspace/Workspace.js\";\r\nimport { Error, ErrorLevel } from \"../lexer/Lexer.js\";\r\nimport { TextPosition, Token, TokenType, TextPositionWithoutLength } from \"../lexer/Token.js\";\r\nimport { Interface, Klass, Visibility } from \"../types/Class.js\";\r\nimport { booleanPrimitiveType, BooleanType, CharacterType, charPrimitiveType, doublePrimitiveType, DoubleType, floatPrimitiveType, FloatType, IntegerType, intPrimitiveType, objectType, stringPrimitiveType, voidPrimitiveType, varType } from \"../types/PrimitiveTypes.js\";\r\nimport { Attribute, Method, PrimitiveType, Type, Variable } from \"../types/Types.js\";\r\nimport { ASTNode, MethodDeclarationNode, TypeNode } from \"./AST.js\";\r\nimport { Breakpoint, Program, Statement } from \"./Program.js\";\r\nimport { SymbolTable } from \"./SymbolTable.js\";\r\nimport { MapClass } from \"../../runtimelibrary/collections/Map.js\";\r\nimport { HashMapClass } from \"../../runtimelibrary/collections/HashMap.js\";\r\nimport { TriangleClass } from \"../../runtimelibrary/graphics/Triangle.js\";\r\nimport { Main } from \"../../main/Main.js\";\r\nimport { LocalDateTimeClass, DayOfWeekEnum, MonthEnum } from \"../../runtimelibrary/graphics/LocalDateTime.js\";\r\nimport { LineClass } from \"../../runtimelibrary/graphics/Line.js\";\r\nimport { Vector2Class } from \"../../runtimelibrary/Vector2.js\";\r\nimport { MouseAdapterClass, MouseListenerInterface } from \"../../runtimelibrary/graphics/MouseListener.js\";\r\nimport { WebSocketClass } from \"../../runtimelibrary/network/WebSocket.js\";\r\nimport { WebSocketClientClass } from \"../../runtimelibrary/network/WebSocketClient.js\";\r\nimport { ProcessingClass } from \"../../runtimelibrary/graphics/Processing.js\";\r\nimport { TurtleClass } from \"../../runtimelibrary/graphics/Turtle.js\";\r\n\r\nexport type File = {\r\n    name: string,\r\n    id?: number,\r\n    text: string,\r\n\r\n    text_before_revision: string,\r\n    submitted_date: string,\r\n    student_edited_after_revision: boolean,\r\n\r\n    is_copy_of_id?: number,\r\n    repository_file_version?: number,\r\n    identical_to_repository_version: boolean,\r\n\r\n    dirty: boolean,\r\n    saved: boolean,\r\n    version: number,\r\n    panelElement?: AccordionElement\r\n}\r\n\r\nexport type IdentifierPosition = {\r\n    position: TextPosition,\r\n    element: Type | Method | Attribute | Variable;\r\n}\r\n\r\nexport type MethodCallPosition = {\r\n    identifierPosition: TextPosition,\r\n    possibleMethods: Method[] | string, // string for print, println, ...\r\n    commaPositions: TextPosition[],\r\n    rightBracketPosition: TextPosition\r\n}\r\n\r\nexport class Module {\r\n    file: File;\r\n    static maxUriNumber: number = 0;\r\n    uri: monaco.Uri;\r\n    model: monaco.editor.ITextModel;\r\n    oldErrorDecorations: string[] = [];\r\n    lastSavedVersionId: number;\r\n    editorState: monaco.editor.ICodeEditorViewState;\r\n\r\n    isSystemModule: boolean = false;\r\n\r\n    breakpoints: Breakpoint[] = [];\r\n    breakpointDecorators: string[] = [];\r\n    decoratorIdToBreakpointMap: { [id: string]: Breakpoint } = {};\r\n\r\n    errors: Error[][] = [[], [], [], []]; // 1st pass, 2nd pass, 3rd pass\r\n\r\n    // 1st pass: Lexer\r\n    tokenList: Token[];\r\n\r\n    // 2nd pass: ASTParser\r\n    mainProgramAst: ASTNode[];\r\n    classDefinitionsAST: ASTNode[];\r\n    typeNodes: TypeNode[];\r\n\r\n    // 3rd pass: TypeResolver fill in resolvedType in typeNodes and populate typeStore\r\n    typeStore: TypeStore;\r\n\r\n    // 4th pass: generate code and symbol tables\r\n\r\n    /*\r\n    The mainProgramAST holds statements to:\r\n    1. call static constructor of each used class\r\n    2. execute main Program\r\n    */\r\n\r\n    mainProgram?: Program;\r\n    mainProgramEnd: TextPosition;\r\n    mainSymbolTable: SymbolTable;\r\n\r\n    identifierPositions: { [line: number]: IdentifierPosition[] } = {};\r\n    methodCallPositions: { [line: number]: MethodCallPosition[] } = {};\r\n\r\n    dependsOnModules: Map<Module, boolean>;\r\n    isStartable: boolean;\r\n    dependsOnModulesWithErrors: boolean;\r\n\r\n    static uriMap: { [name: string]: number } = {};\r\n    bracketError: string;\r\n\r\n    constructor(file: File, public main: MainBase) {\r\n        if (file == null || this.main == null) return; // used by AdhocCompiler and ApiDoc\r\n\r\n        this.file = file;\r\n        // this.uri = monaco.Uri.from({ path: '/file' + (Module.maxUriNumber++) + '.learnJava', scheme: 'file' });\r\n        let path = file.name;\r\n\r\n        let uriCounter = Module.uriMap[path];\r\n        if (uriCounter == null) {\r\n            uriCounter = 0;\r\n        } else {\r\n            uriCounter++;\r\n        }\r\n        Module.uriMap[path] = uriCounter;\r\n\r\n        if (uriCounter > 0) path += \" (\" + uriCounter + \")\";\r\n        this.uri = monaco.Uri.from({ path: path, scheme: 'inmemory' });\r\n        this.model = monaco.editor.createModel(file.text, \"myJava\", this.uri);\r\n        this.model.updateOptions({ tabSize: 3 });\r\n\r\n        this.lastSavedVersionId = this.model.getAlternativeVersionId();\r\n\r\n        let that = this;\r\n\r\n        this.model.onDidChangeContent(() => {\r\n            let versionId = that.model.getAlternativeVersionId();\r\n\r\n            if (versionId != that.lastSavedVersionId) {\r\n                that.file.dirty = true;\r\n                that.file.saved = false;\r\n                that.file.identical_to_repository_version = false;\r\n                that.lastSavedVersionId = versionId;\r\n            }\r\n\r\n            if(!that.main.isEmbedded()){\r\n                let main1: Main = <Main>main;\r\n                if(main1.workspacesOwnerId != main1.user.id){\r\n                    if(that.file.text_before_revision == null || that.file.student_edited_after_revision){\r\n                        that.file.student_edited_after_revision = false;\r\n                        that.file.text_before_revision = that.file.text;\r\n                        that.file.saved = false;\r\n                        main1.networkManager.sendUpdates(null, false);\r\n                        main1.bottomDiv.homeworkManager.showHomeWorkRevisionButton();\r\n                        main1.projectExplorer.renderHomeworkButton(that.file);\r\n                    }\r\n                } else {\r\n                    that.file.student_edited_after_revision = true;\r\n                }\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    getMethodDeclarationAtPosition(position: { lineNumber: number; column: number; }): MethodDeclarationNode {\r\n\r\n        if(this.classDefinitionsAST == null) return null;\r\n        \r\n        for(let cd of this.classDefinitionsAST){\r\n            if(cd.type == TokenType.keywordClass || cd.type == TokenType.keywordEnum){\r\n                for(let methodAST of cd.methods){\r\n                    if(methodAST.position != null && methodAST.scopeTo != null){\r\n                        if(methodAST.position.line <= position.lineNumber && methodAST.scopeTo.line >= position.lineNumber){\r\n                            return methodAST;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        \r\n        return null;\r\n    \r\n    }\r\n\r\n\r\n    static restoreFromData(f: FileData, main: MainBase): Module {\r\n\r\n        let f1: File = {\r\n            name: f.name,\r\n            text: f.text,\r\n            text_before_revision: f.text_before_revision,\r\n            submitted_date: f.submitted_date,\r\n            student_edited_after_revision: false,\r\n            dirty: true,\r\n            saved: true,\r\n            version: f.version,\r\n            id: f.id,\r\n            is_copy_of_id: f.is_copy_of_id,\r\n            repository_file_version: f.repository_file_version,\r\n            identical_to_repository_version: f.identical_to_repository_version\r\n        }\r\n\r\n        let m: Module = new Module(f1, main);\r\n\r\n        return m;\r\n\r\n    }\r\n\r\n    getFileData(workspace: Workspace): FileData {\r\n        let file = this.file;\r\n        let fd: FileData = {\r\n            id: file.id,\r\n            name: file.name,\r\n            text: file.text,\r\n            text_before_revision: file.text_before_revision,\r\n            submitted_date: file.submitted_date,\r\n            student_edited_after_revision: file.student_edited_after_revision,\r\n            version: file.version,\r\n            is_copy_of_id: file.is_copy_of_id,\r\n            repository_file_version: file.repository_file_version,\r\n            identical_to_repository_version: file.identical_to_repository_version,\r\n            workspace_id: workspace.id,\r\n            forceUpdate: false\r\n        }\r\n\r\n        return fd;\r\n    }\r\n\r\n    pushMethodCallPosition(identifierPosition: TextPosition, commaPositions: TextPosition[],\r\n        possibleMethods: Method[] | string, rightBracketPosition: TextPosition) {\r\n\r\n        let lines: number[] = [];\r\n        lines.push(identifierPosition.line);\r\n        for (let cp of commaPositions) {\r\n            if (lines.indexOf[cp.line] < 0) {\r\n                lines.push(cp.line);\r\n            }\r\n        }\r\n\r\n        let mcp: MethodCallPosition = {\r\n            identifierPosition: identifierPosition,\r\n            commaPositions: commaPositions,\r\n            possibleMethods: possibleMethods,\r\n            rightBracketPosition: rightBracketPosition\r\n        };\r\n\r\n        for (let line of lines) {\r\n            let mcpList = this.methodCallPositions[line];\r\n            if (mcpList == null) {\r\n                this.methodCallPositions[line] = [];\r\n                mcpList = this.methodCallPositions[line];\r\n            }\r\n            mcpList.push(mcp);\r\n        }\r\n\r\n    }\r\n\r\n\r\n    toggleBreakpoint(lineNumber: number, rerender: boolean) {\r\n        this.getBreakpointPositionsFromEditor();\r\n        if (this.getBreakpoint(lineNumber, true) == null) {\r\n            this.setBreakpoint(lineNumber, 1);\r\n        }\r\n        if (rerender) {\r\n            this.renderBreakpointDecorators();\r\n        }\r\n    }\r\n\r\n    getBreakpoint(line: number, remove: boolean = false): Breakpoint {\r\n\r\n        for (let i = 0; i < this.breakpoints.length; i++) {\r\n            let b = this.breakpoints[i];\r\n            if (b.line == line) {\r\n                this.breakpoints.splice(i, 1);\r\n                if (b.statement != null) {\r\n                    b.statement.breakpoint = undefined;\r\n                }\r\n                return b;\r\n            }\r\n        }\r\n\r\n        return null;\r\n\r\n    }\r\n\r\n    setBreakpoint(line: number, column: number): Breakpoint {\r\n\r\n        let breakpoint: Breakpoint = {\r\n            line: line,\r\n            column: column,\r\n            statement: null\r\n        }\r\n\r\n        this.attachToStatement(breakpoint);\r\n        this.breakpoints.push(breakpoint);\r\n\r\n        return breakpoint;\r\n\r\n    }\r\n\r\n    attachToStatement(breakpoint: Breakpoint, programList?: Program[]) {\r\n\r\n        if (breakpoint.statement != null) {\r\n            breakpoint.statement.breakpoint = undefined;\r\n        }\r\n\r\n        if (programList == null) programList = this.getPrograms();\r\n\r\n        let nearestStatement: Statement = null;\r\n        let nearestDistance: number = 100000;\r\n\r\n        for (let program of programList) {\r\n            for (let statement of program.statements) {\r\n\r\n                let line = statement?.position?.line;\r\n                if (line != null && line >= breakpoint.line) {\r\n                    if (line - breakpoint.line < nearestDistance) {\r\n                        nearestStatement = statement;\r\n                        nearestDistance = line - breakpoint.line;\r\n                    }\r\n\r\n                    break;\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        breakpoint.statement = nearestStatement;\r\n        if (nearestStatement != null) {\r\n            nearestStatement.breakpoint = breakpoint;\r\n            // let pp = new ProgramPrinter();\r\n            // console.log(\"Attached Breakpoint line \" + breakpoint.line + \", column \" + \r\n            //     breakpoint.column + \" to statement \" + pp.print([nearestStatement]));\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n    getPrograms(): Program[] {\r\n        let programList: Program[] = [];\r\n\r\n        if (this.mainProgram != null) {\r\n            programList.push(this.mainProgram);\r\n        }\r\n\r\n        if (this.typeStore != null) {\r\n\r\n            for (let type of this.typeStore.typeList) {\r\n                if (type instanceof Klass) {\r\n                    if (type.attributeInitializationProgram != null) {\r\n                        programList.push(type.attributeInitializationProgram);\r\n                    }\r\n                    for (let method of type.methods) {\r\n                        if (method.program != null) {\r\n                            programList.push(method.program);\r\n                        }\r\n                    }\r\n                    if (type.staticClass.attributeInitializationProgram != null) {\r\n                        programList.push(type.staticClass.attributeInitializationProgram);\r\n                    }\r\n                    for (let method of type.staticClass.methods) {\r\n                        if (method.program != null) {\r\n                            programList.push(method.program);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        return programList;\r\n\r\n    }\r\n\r\n    renderBreakpointDecorators() {\r\n\r\n        this.getBreakpointPositionsFromEditor();\r\n\r\n        let decorations: monaco.editor.IModelDeltaDecoration[] = [];\r\n\r\n        for (let breakpoint of this.breakpoints) {\r\n            decorations.push({\r\n                range: { startLineNumber: breakpoint.line, endLineNumber: breakpoint.line, startColumn: 1, endColumn: 1 },\r\n                options: {\r\n                    isWholeLine: true, className: \"jo_decorate_breakpoint\",\r\n                    overviewRuler: {\r\n                        color: \"#580000\",\r\n                        position: monaco.editor.OverviewRulerLane.Left\r\n                    },\r\n                    minimap: {\r\n                        color: \"#580000\",\r\n                        position: monaco.editor.MinimapPosition.Inline\r\n                    },\r\n                    marginClassName: \"jo_margin_breakpoint\",\r\n                    stickiness: monaco.editor.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges\r\n                },\r\n                //@ts-ignore\r\n                breakpoint: breakpoint\r\n            });\r\n        }\r\n\r\n        this.breakpointDecorators = this.main.getMonacoEditor().deltaDecorations(this.breakpointDecorators, decorations);\r\n\r\n        this.decoratorIdToBreakpointMap = {};\r\n        for (let i = 0; i < this.breakpointDecorators.length; i++) {\r\n            this.decoratorIdToBreakpointMap[this.breakpointDecorators[i]] = this.breakpoints[i];\r\n        }\r\n\r\n    }\r\n\r\n    getBreakpointPositionsFromEditor() {\r\n        for (let decoration of this.main.getMonacoEditor().getModel().getAllDecorations()) {\r\n            if (decoration.options.marginClassName == \"margin_breakpoint\") {\r\n                let breakpoint = this.decoratorIdToBreakpointMap[decoration.id];\r\n                if (breakpoint != null) {\r\n                    breakpoint.line = decoration.range.startLineNumber;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    findSymbolTableAtPosition(line: number, column: number) {\r\n        if (this.mainSymbolTable == null) {\r\n            return null;\r\n        }\r\n\r\n        if (line > this.mainSymbolTable.positionTo.line ||\r\n            line == this.mainSymbolTable.positionTo.line && column > this.mainSymbolTable.positionTo.column\r\n        ) {\r\n            line = this.mainSymbolTable.positionTo.line;\r\n            column = this.mainSymbolTable.positionTo.column - 1;\r\n        }\r\n\r\n        return this.mainSymbolTable.findTableAtPosition(line, column);\r\n    }\r\n\r\n    getErrorCount(): number {\r\n\r\n        let ec = 0;\r\n        for (let el of this.errors) {\r\n            el.forEach(error => ec += error.level == \"error\" ? 1 : 0);\r\n            // ec += el.length;\r\n        }\r\n\r\n        return ec;\r\n    }\r\n\r\n    hasMainProgram() {\r\n\r\n        if (this.mainProgram == null) return false;\r\n        if (this.mainProgram.statements == null) return false;\r\n        return this.mainProgram.statements.length > 2 || this.mainProgram.statements.length == 2 && this.mainProgram.statements[0].type == TokenType.callMainMethod;\r\n\r\n    }\r\n\r\n    getProgramTextFromMonacoModel(): string {\r\n        return this.model.getValue(monaco.editor.EndOfLinePreference.LF, false);\r\n    }\r\n\r\n\r\n    addIdentifierPosition(position: TextPosition, element: Type | Method | Attribute | Variable) {\r\n        let positionList: IdentifierPosition[] = this.identifierPositions[position.line];\r\n        if (positionList == null) {\r\n            positionList = [];\r\n            this.identifierPositions[position.line] = positionList;\r\n        }\r\n        positionList.push({\r\n            position: position,\r\n            element: element\r\n        });\r\n    }\r\n\r\n\r\n    getTypeAtPosition(line: number, column: number): { type: Type, isStatic: boolean } {\r\n\r\n        let positionsOnLine = this.identifierPositions[line];\r\n        if (positionsOnLine == null) return null;\r\n\r\n        let foundPosition: IdentifierPosition = null;\r\n        for (let p of positionsOnLine) {\r\n            if (column >= p.position.column && column <= p.position.column + p.position.length) {\r\n                foundPosition = p;\r\n                let element = foundPosition.element;\r\n                if (element instanceof Method) {\r\n                    return { type: element, isStatic: false };\r\n                }\r\n                // Attribute, Variable\r\n                let type: Type = (element instanceof Type) ? element : element.type;\r\n                //@ts-ignore\r\n                if (foundPosition.position.length > 0 && element.type != null) {\r\n                    //@ts-ignore\r\n                    return { type: <Type>type, isStatic: false };\r\n                }\r\n\r\n                return { type: type, isStatic: foundPosition.position.length > 0 };\r\n\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    getElementAtPosition(line: number, column: number): Klass | Interface | Method | Attribute | Variable {\r\n\r\n        let positionsOnLine = this.identifierPositions[line];\r\n        if (positionsOnLine == null) return null;\r\n\r\n        let bestFoundPosition: IdentifierPosition = null;\r\n        for (let p of positionsOnLine) {\r\n            if (column >= p.position.column && column < p.position.column + p.position.length) {\r\n\r\n                if (p.position.length > 0) {\r\n                    if (bestFoundPosition == null) {\r\n                        bestFoundPosition = p;\r\n                    } else {\r\n                        if(p.element instanceof Method && bestFoundPosition.element instanceof Klass){\r\n                            bestFoundPosition = p;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return bestFoundPosition == null ? null : <any>bestFoundPosition.element;\r\n    }\r\n\r\n    copy(): Module {\r\n        let m = new Module(this.file, this.main);\r\n        m.model = this.model;\r\n        m.mainProgram = this.mainProgram;\r\n        this.mainProgram = null;\r\n        m.mainSymbolTable = this.mainSymbolTable;\r\n        this.mainSymbolTable = null;\r\n        m.typeStore = this.typeStore;\r\n        // this.typeStore = null;\r\n        m.isStartable = this.isStartable;\r\n        m.dependsOnModulesWithErrors = this.dependsOnModulesWithErrors;\r\n\r\n        m.breakpoints = this.breakpoints;\r\n        this.breakpoints = [];\r\n        let programs = m.getPrograms();\r\n\r\n        programs.forEach((p) => p.module = m);\r\n\r\n        for (let b of m.breakpoints) {\r\n            this.breakpoints.push({\r\n                line: b.line,\r\n                column: b.column,\r\n                statement: null\r\n            });\r\n\r\n            m.attachToStatement(b, programs);\r\n\r\n        }\r\n\r\n        this.file.dirty = true;\r\n\r\n        return m;\r\n    }\r\n\r\n    clear() {\r\n\r\n        this.identifierPositions = {};\r\n\r\n        if (this.file != null && this.file.dirty) {\r\n            // Lexer\r\n            this.tokenList = null;\r\n            this.errors[0] = [];\r\n\r\n            // AST Parser\r\n            this.errors[1] = [];\r\n\r\n\r\n        }\r\n\r\n        // type resolver\r\n        this.errors[2] = [];\r\n        this.typeNodes = [];\r\n        this.typeStore = new TypeStore();\r\n\r\n        // Code generator\r\n        this.errors[3] = [];\r\n        this.mainSymbolTable = new SymbolTable(null, { line: 1, column: 1, length: 1 }, { line: 100000, column: 1, length: 0 });\r\n        this.mainProgram = null;\r\n\r\n        this.methodCallPositions = {};\r\n        this.dependsOnModules = new Map();\r\n\r\n    }\r\n\r\n    hasErrors() {\r\n\r\n        for (let el of this.errors) {\r\n            if(el.find(error => error.level == \"error\")){\r\n                return true;\r\n            }\r\n            // if (el.length > 0) {\r\n            //     return true;\r\n            // }\r\n        }\r\n\r\n        return false;\r\n\r\n    }\r\n\r\n    getSortedAndFilteredErrors(): Error[] {\r\n\r\n        let list: Error[] = [];\r\n\r\n        for (let el of this.errors) {\r\n            list = list.concat(el);\r\n        }\r\n\r\n        list.sort((a, b) => {\r\n            if (a.position.line > b.position.line) {\r\n                return 1;\r\n            }\r\n            if (b.position.line > a.position.line) {\r\n                return -1;\r\n            }\r\n            if (a.position.column >= b.position.column) {\r\n                return 1;\r\n            }\r\n            return -1;\r\n        });\r\n\r\n        for (let i = 0; i < list.length - 1; i++) {\r\n            let e1 = list[i];\r\n            let e2 = list[i + 1];\r\n            if (e1.position.line == e2.position.line && e1.position.column + 10 > e2.position.column) {\r\n                if(this.errorLevelCompare(e1.level, e2.level) == 1){\r\n                    list.splice(i + 1, 1);\r\n                } else {\r\n                    list.splice(i, 1);\r\n                }\r\n                i--;\r\n            }\r\n        }\r\n\r\n        return list;\r\n    }\r\n\r\n    errorLevelCompare(level1: ErrorLevel, level2: ErrorLevel): number {\r\n        if(level1 == \"error\") return 1;\r\n        if(level2 == \"error\") return 2;\r\n        if(level1 == \"warning\") return 1;\r\n        if(level2 == \"warning\") return 2;\r\n        return 1;\r\n    }\r\n\r\n    renderStartButton() {\r\n        let $buttonDiv = this.file?.panelElement?.$htmlFirstLine?.find('.jo_additionalButtonStart');\r\n        if ($buttonDiv == null) return;\r\n\r\n        $buttonDiv.find('.jo_startButton').remove();\r\n\r\n        if (this.isStartable) {\r\n            let $startButtonDiv = jQuery('<div class=\"jo_startButton img_start-dark jo_button jo_active\" title=\"Hauptprogramm in der Datei starten\"></div>');\r\n            $buttonDiv.append($startButtonDiv);\r\n            let that = this;\r\n            $startButtonDiv.on('mousedown', (e) => e.stopPropagation());\r\n            $startButtonDiv.on('click', (e) => {\r\n                e.stopPropagation();\r\n\r\n                that.main.setModuleActive(that);\r\n\r\n                that.main.getInterpreter().start();\r\n            });\r\n\r\n        } \r\n    }\r\n\r\n\r\n}\r\n\r\nexport class BaseModule extends Module {\r\n    constructor(main: MainBase) {\r\n\r\n        super({ name: \"Base Module\", text: \"\", text_before_revision: null, submitted_date: null, student_edited_after_revision: false, dirty: false, saved: true, version: 1 , identical_to_repository_version: true}, main);\r\n\r\n        this.isSystemModule = true;\r\n        this.mainProgram = null;\r\n\r\n        this.clear();\r\n\r\n\r\n        this.typeStore.addType(voidPrimitiveType);\r\n        this.typeStore.addType(intPrimitiveType);\r\n        this.typeStore.addType(floatPrimitiveType);\r\n        this.typeStore.addType(doublePrimitiveType);\r\n        this.typeStore.addType(charPrimitiveType);\r\n        this.typeStore.addType(booleanPrimitiveType);\r\n        this.typeStore.addType(stringPrimitiveType);\r\n        this.typeStore.addType(objectType);\r\n        this.typeStore.addType(varType);\r\n\r\n        this.typeStore.addType(IntegerType);\r\n        this.typeStore.addType(FloatType);\r\n        this.typeStore.addType(DoubleType);\r\n        this.typeStore.addType(CharacterType);\r\n        this.typeStore.addType(BooleanType);\r\n\r\n        // Collections Framework\r\n        this.typeStore.addType(new IteratorClass(this));\r\n        this.typeStore.addType(new IterableClass(this));\r\n        this.typeStore.addType(new CollectionClass(this));\r\n        this.typeStore.addType(new ListClass(this));\r\n        this.typeStore.addType(new ArrayListClass(this));\r\n        this.typeStore.addType(new VectorClass(this));\r\n        this.typeStore.addType(new QueueClass(this));\r\n        this.typeStore.addType(new DequeClass(this));\r\n        this.typeStore.addType(new LinkedListClass(this));\r\n        this.typeStore.addType(new StackClass(this));\r\n        this.typeStore.addType(new ListIteratorImplClass(this));\r\n        this.typeStore.addType(new SetClass(this));\r\n        this.typeStore.addType(new HashSetClass(this));\r\n        this.typeStore.addType(new LinkedHashSetClass(this));\r\n        this.typeStore.addType(new SetIteratorImplClass(this));\r\n        this.typeStore.addType(new MapClass(this));\r\n        this.typeStore.addType(new HashMapClass(this));\r\n\r\n        this.typeStore.addType(new ConsoleClass(this));\r\n        this.typeStore.addType(new MathClass(this));\r\n        this.typeStore.addType(new Vector2Class(this));\r\n        this.typeStore.addType(new KeyClass(this));\r\n        this.typeStore.addType(new SoundClass(this));\r\n        this.typeStore.addType(new InputClass(this));\r\n        this.typeStore.addType(new Runnable(this));\r\n        this.typeStore.addType(new TimerClass(this));\r\n        this.typeStore.addType(new ColorClass(this));\r\n        this.typeStore.addType(new ActorClass(this));\r\n        this.typeStore.addType(new ShapeClass(this));\r\n        this.typeStore.addType(new FilledShapeClass(this));\r\n        this.typeStore.addType(new RectangleClass(this));\r\n        this.typeStore.addType(new RoundedRectangleClass(this));\r\n        this.typeStore.addType(new CircleClass(this));\r\n        this.typeStore.addType(new EllipseClass(this));\r\n        this.typeStore.addType(new BitmapClass(this));\r\n        this.typeStore.addType(new AlignmentClass(this));\r\n        this.typeStore.addType(new TextClass(this));\r\n        this.typeStore.addType(new ScaleModeClass(this));\r\n        this.typeStore.addType(new SpriteLibraryClass(this));\r\n        this.typeStore.addType(new RepeatTypeClass(this));\r\n        this.typeStore.addType(new SpriteClass(this));\r\n        this.typeStore.addType(new CollisionPairClass(this));\r\n        this.typeStore.addType(new GroupClass(this));\r\n        this.typeStore.addType(new PolygonClass(this));\r\n        this.typeStore.addType(new LineClass(this));\r\n        this.typeStore.addType(new TriangleClass(this));\r\n        this.typeStore.addType(new TurtleClass(this));\r\n\r\n        this.typeStore.addType(new MouseListenerInterface(this));\r\n        this.typeStore.addType(new MouseAdapterClass(this));\r\n        this.typeStore.addType(new WorldClass(this));\r\n        this.typeStore.addType(new ProcessingClass(this));\r\n\r\n        (<ActorClass>this.typeStore.getType(\"Actor\")).registerWorldType();\r\n\r\n\r\n        this.typeStore.addType(new PrintStreamClass(this));\r\n        this.typeStore.addType(new KeyListener(this));\r\n        this.typeStore.addType(new SystemClass(this));\r\n        this.typeStore.addType(new SystemToolsClass(this));\r\n        this.typeStore.addType(new DayOfWeekEnum(this));\r\n        this.typeStore.addType(new MonthEnum(this));\r\n        this.typeStore.addType(new LocalDateTimeClass(this));\r\n    \r\n        this.typeStore.addType(new WebSocketClientClass(this));\r\n        this.typeStore.addType(new WebSocketClass(this));\r\n\r\n    \r\n\r\n        stringPrimitiveType.module = this;\r\n        // stringPrimitiveType.baseClass = <any>(this.typeStore.getType(\"Object\"));\r\n        // stringPrimitiveType.baseClass = objectType;\r\n        // IntegerType.baseClass = objectType;\r\n        // DoubleType.baseClass = objectType;\r\n        // FloatType.baseClass = objectType;\r\n        // CharacterType.baseClass = objectType;\r\n        // BooleanType.baseClass = objectType;\r\n\r\n    }\r\n\r\n    clearUsagePositions() {\r\n        for (let type of this.typeStore.typeList) {\r\n            type.clearUsagePositions();\r\n        }\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\nexport class ModuleStore {\r\n\r\n    private modules: Module[] = [];\r\n    private moduleMap: Map<string, Module> = new Map();\r\n    private baseModule: BaseModule;\r\n\r\n    dirty: boolean = false;\r\n\r\n    constructor(private main: MainBase, withBaseModule: boolean = true) {\r\n        if (withBaseModule) {\r\n            this.baseModule = new BaseModule(main);\r\n            this.putModule(this.baseModule);\r\n        }\r\n    }\r\n\r\n    findModuleById(module_id: number): Module {\r\n        for(let module of this.modules){\r\n            if(module.file.id == module_id) return module;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public getBaseModule() {\r\n        return this.baseModule;\r\n    }\r\n\r\n    public clearUsagePositions() {\r\n        this.baseModule.clearUsagePositions();\r\n    }\r\n\r\n    copy(): ModuleStore {\r\n        let ms: ModuleStore = new ModuleStore(this.main);\r\n        for (let m of this.modules) {\r\n            if (!m.isSystemModule) {\r\n                ms.putModule(m.copy());\r\n            }\r\n        }\r\n        return ms;\r\n    }\r\n\r\n    findModuleByFile(file: File) {\r\n        for (let m of this.modules) {\r\n            if (m.file == file) {\r\n                return m;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    hasErrors(): boolean {\r\n        for (let m of this.modules) {\r\n            if (m.hasErrors()) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    getFirstModule(): Module {\r\n        if (this.modules.length > 0) {\r\n            for (let mo of this.modules) {\r\n                if (!mo.isSystemModule) {\r\n                    return mo;\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    isDirty(): boolean {\r\n\r\n        if (this.dirty) {\r\n            this.dirty = false;\r\n            return true;\r\n        }\r\n\r\n        let dirty = false;\r\n        for (let m of this.modules) {\r\n            if (m.file.dirty) {\r\n                dirty = true;\r\n                break;\r\n            }\r\n        }\r\n        return dirty;\r\n    }\r\n\r\n\r\n    getModules(includeSystemModules: boolean, excludedModuleName?: String): Module[] {\r\n        let ret = [];\r\n        for (let m of this.modules) {\r\n            if (m.file.name != excludedModuleName) {\r\n                if (!m.isSystemModule || includeSystemModules) {\r\n                    ret.push(m);\r\n                }\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    putModule(module: Module) {\r\n        this.modules.push(module);\r\n        this.moduleMap[module.file.name] = module;\r\n    }\r\n\r\n    removeModuleWithFile(file: File) {\r\n        for (let m of this.modules) {\r\n            if (m.file == file) {\r\n                this.removeModule(m);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    removeModule(module: Module) {\r\n\r\n        if (this.modules.indexOf(module) < 0) return;\r\n\r\n        this.modules.splice(this.modules.indexOf(module), 1);\r\n        this.moduleMap[module.file.name] = undefined;\r\n        this.dirty = true;\r\n    }\r\n\r\n    getModule(moduleName: string): Module {\r\n        return this.moduleMap[moduleName];\r\n    }\r\n\r\n    getType(identifier: string): { type: Type, module: Module } {\r\n        for (let module of this.modules) {\r\n            if (module.typeStore != null) {\r\n                let type = module.typeStore.getType(identifier);\r\n                if (type != null) {\r\n                    return { type: type, module: module }\r\n                }\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    getTypeCompletionItems(moduleContext: Module, rangeToReplace: monaco.IRange): monaco.languages.CompletionItem[] {\r\n\r\n        let completionItems: monaco.languages.CompletionItem[] = [];\r\n\r\n        for (let module of this.modules) {\r\n            if (module.typeStore != null) {\r\n                for (let type of module.typeStore.typeList) {\r\n                    if (module == moduleContext || (type instanceof Klass && type.visibility == Visibility.public)\r\n                        || module.isSystemModule) {\r\n\r\n                        let detail = \"Klasse\";\r\n\r\n                        if(type.documentation != null){\r\n                            detail = type.documentation;\r\n                        } else if (module.isSystemModule) {\r\n                            if (type instanceof PrimitiveType) {\r\n                                detail = \"Primitiver Datentyp\";\r\n                            } else {\r\n                                detail = \"Systemklasse\";\r\n                            }\r\n                        }\r\n\r\n                        let item = {\r\n                            label: type.identifier,\r\n                            detail: detail,\r\n                            insertText: type.identifier,\r\n                            kind: type instanceof PrimitiveType ?\r\n                                monaco.languages.CompletionItemKind.Struct : monaco.languages.CompletionItemKind.Class,\r\n                            range: rangeToReplace,\r\n                            generic: ((type instanceof Klass || type instanceof Interface) && type.typeVariables.length > 0)\r\n                        };\r\n\r\n                        completionItems.push(item);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return completionItems;\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n}\r\n\r\n\r\nexport class TypeStore {\r\n\r\n    typeList: Type[] = [];\r\n    typeMap: Map<string, Type> = new Map();\r\n\r\n    addType(type: Type) {\r\n        this.typeList.push(type);\r\n        this.typeMap.set(type.identifier, type);\r\n    }\r\n\r\n    clear() {\r\n        this.typeList.length = 0;\r\n        this.typeMap.clear();\r\n    }\r\n\r\n    getType(identifier: string) {\r\n        return this.typeMap.get(identifier);\r\n    }\r\n\r\n\r\n\r\n}\r\n","import { booleanPrimitiveType, charPrimitiveType, doublePrimitiveType, floatPrimitiveType, intPrimitiveType, stringPrimitiveType, voidPrimitiveType } from \"../compiler/types/PrimitiveTypes.js\";\r\nimport { BaseModule } from \"../compiler/parser/Module.js\";\r\nimport { Klass, Interface, Visibility } from \"../compiler/types/Class.js\";\r\nimport { Type } from \"../compiler/types/Types.js\";\r\nimport { Enum } from \"../compiler/types/Enum.js\";\r\nimport { getDeclarationAsString } from \"../compiler/types/DeclarationHelper.js\";\r\nimport { defineMyJava } from \"../main/gui/MyJava.js\";\r\n\r\nexport class ApiDoc {\r\n    start() {\r\n        this.initEditor();\r\n        this.initTypes();\r\n        this.initClassDocumentation();\r\n    }\r\n\r\n    initEditor(){\r\n\r\n        defineMyJava();\r\n\r\n        monaco.editor.defineTheme('myCustomThemeDark', {\r\n            base: 'vs-dark', // can also be vs-dark or hc-black\r\n            inherit: true, // can also be false to completely replace the builtin rules\r\n            rules: [\r\n                { token: 'method', foreground: 'dcdcaa', fontStyle: 'italic' },\r\n                { token: 'print', foreground: 'dcdcaa', fontStyle: 'italic bold' },\r\n                { token: 'class', foreground: '3DC9B0' },\r\n                { token: 'number', foreground: 'b5cea8' },\r\n                { token: 'type', foreground: '499cd6' },\r\n                { token: 'identifier', foreground: '9cdcfe' },\r\n                { token: 'statement', foreground: 'bb96c0', fontStyle: 'bold' },\r\n                { token: 'keyword', foreground: '68bed4', fontStyle: 'bold' },\r\n                // { token: 'comment.js', foreground: '008800', fontStyle: 'bold italic underline' },\r\n            ],\r\n            colors: {\r\n                \"editor.background\": \"#1e1e1e\"\r\n            }\r\n        });\r\n\r\n        monaco.editor.setTheme('myCustomThemeDark');\r\n\r\n        monaco.editor.create(jQuery('#editordiv')[0], {\r\n            language: \"myJava\"\r\n        });\r\n\r\n\r\n    }\r\n\r\n    initClassDocumentation() {\r\n        let b = booleanPrimitiveType;\r\n        let basemodule: BaseModule = new BaseModule(null);\r\n        let that = this;\r\n\r\n        let typeList = basemodule.typeStore.typeList.filter((a: Type) => a.identifier != null)\r\n            .sort(\r\n                (a: Type, b: Type) => a.identifier.localeCompare(b.identifier));\r\n\r\n\r\n        typeList.filter((type) => type instanceof Klass && !(type instanceof Enum)).forEach((type: Type, index) => {\r\n            let $menuItem = jQuery('<div class=\"jo_menu-class\">' + type.identifier + '</div>');\r\n            jQuery('#classes').append($menuItem)\r\n            $menuItem.on('click', () => {\r\n                that.showAPIHelp(type);\r\n            })\r\n        });\r\n\r\n        typeList.filter((type) => type instanceof Interface).forEach((type: Type, index) => {\r\n            let $menuItem = jQuery('<div class=\"jo_menu-class\">' + type.identifier + '</div>');\r\n            jQuery('#interfaces').append($menuItem)\r\n            $menuItem.on('click', () => {\r\n                that.showAPIHelp(type);\r\n            })\r\n        });\r\n\r\n        typeList.filter((type) => type instanceof Enum).forEach((type: Type, index) => {\r\n            let $menuItem = jQuery('<div class=\"jo_menu-class\">' + type.identifier + '</div>');\r\n            jQuery('#enums').append($menuItem)\r\n            $menuItem.on('click', () => {\r\n                that.showAPIHelp(type);\r\n            })\r\n        });\r\n\r\n\r\n    }\r\n\r\n    showAPIHelp(type: Type) {\r\n        let $main = jQuery('#main');\r\n        $main.empty();\r\n\r\n        let t = <Klass | Interface | Enum>type;\r\n        let $caption = jQuery('<div class=\"jo_type\"></div>');\r\n        $main.append($caption);\r\n        monaco.editor.colorize(getDeclarationAsString(t, \"\", true), \"myJava\", {}).then(\r\n            (html) => {$caption.append(jQuery(html))}\r\n        );\r\n\r\n        if(t instanceof Klass) this.showConstructors(t);\r\n        this.showMethods(t);\r\n        if(t instanceof Klass) this.showAttributes(t);\r\n\r\n    }\r\n\r\n    showConstructors(t: Klass){\r\n        let $main = jQuery('#main');\r\n        $main.append(jQuery('<div class=\"jo_constructor-heading\">Konstruktoren:</div>'));\r\n        let methods = t.methods.filter((m) => m.isConstructor);\r\n\r\n        while(methods.length == 0 && t.baseClass != null){\r\n            t = t.baseClass;\r\n            methods = methods.concat(t.getMethods(Visibility.protected).filter((m) => m.isConstructor));\r\n        }\r\n\r\n        methods.sort((a, b) => a.identifier.localeCompare(b.identifier));\r\n\r\n        if(methods.length == 0){\r\n            $main.append(jQuery('<div class=\"jo_method\">Keine</div>'));\r\n        } else {\r\n            for(let method of methods){\r\n                let $caption = jQuery(jQuery('<div class=\"jo_method\"></div>'));\r\n                $main.append($caption);\r\n                monaco.editor.colorize(getDeclarationAsString(method, \"\", true), \"myJava\", {}).then(\r\n                    (html) => {$caption.append(jQuery(html))}\r\n                );\r\n\r\n                if(method.documentation != null && method.documentation != \"\"){\r\n                    $main.append(jQuery('<div class=\"jo_documentation\">' + method.documentation + '</div>'));\r\n                }\r\n            }\r\n        }     \r\n    }\r\n\r\n    showMethods(t: Klass | Interface | Enum){\r\n        let $main = jQuery('#main');\r\n        $main.append(jQuery('<div class=\"jo_method-heading\">Methoden:</div>'));\r\n        let methods = t.getMethods(Visibility.protected).filter((m) => !m.isConstructor);\r\n        if(t instanceof Klass && t.staticClass != null){\r\n            methods = methods.concat(t.staticClass.getMethods(Visibility.protected).filter((m) => !m.isConstructor));\r\n        }\r\n\r\n        methods.sort((a, b) => a.identifier.localeCompare(b.identifier));\r\n\r\n        if(methods.length == 0){\r\n            $main.append(jQuery('<div class=\"jo_method\">Keine</div>'));\r\n        } else {\r\n            for(let method of methods){\r\n                let $caption = jQuery(jQuery('<div class=\"jo_method\"></div>'));\r\n                $main.append($caption);\r\n                monaco.editor.colorize(getDeclarationAsString(method, \"\", true), \"myJava\", {}).then(\r\n                    (html) => {$caption.append(jQuery(html))}\r\n                );\r\n\r\n                if(method.documentation != null && method.documentation != \"\"){\r\n                    $main.append(jQuery('<div class=\"jo_documentation\">' + method.documentation + '</div>'));\r\n                }\r\n            }\r\n        }     \r\n    }\r\n\r\n    showAttributes(t: Klass){\r\n        let $main = jQuery('#main');\r\n        $main.append(jQuery('<div class=\"jo_attribute-heading\">Attribute:</div>'));\r\n        let attributes = t.getAttributes(Visibility.protected);\r\n        if(t instanceof Klass && t.staticClass != null){\r\n            attributes = attributes.concat(t.staticClass.getAttributes(Visibility.protected));\r\n        }\r\n\r\n        attributes.sort((a, b) => a.identifier.localeCompare(b.identifier));\r\n\r\n        if(attributes.length == 0){\r\n            $main.append(jQuery('<div class=\"jo_method\">Keine</div>'));\r\n        } else {\r\n            for(let attribute of attributes){\r\n                let $caption = jQuery(jQuery('<div class=\"jo_method\"></div>'));\r\n                $main.append($caption);\r\n                monaco.editor.colorize(getDeclarationAsString(attribute, \"\", true), \"myJava\", {}).then(\r\n                    (html) => {$caption.append(jQuery(html))}\r\n                );\r\n\r\n                if(attribute.documentation != null && attribute.documentation != \"\"){\r\n                    $main.append(jQuery('<div class=\"jo_documentation\">' + attribute.documentation + '</div>'));\r\n                }\r\n            }\r\n        }     \r\n    }\r\n\r\n    initTypes() {\r\n        voidPrimitiveType.init();\r\n        intPrimitiveType.init();\r\n        floatPrimitiveType.init();\r\n        doublePrimitiveType.init();\r\n        booleanPrimitiveType.init();\r\n        stringPrimitiveType.init();\r\n        charPrimitiveType.init();\r\n    }\r\n\r\n}\r\n\r\njQuery(() => { \r\n    \r\n        //@ts-ignore\r\n        window.require.config({ paths: { 'vs': 'lib/monaco-editor/dev/vs' } });\r\n        //@ts-ignore\r\n        window.require.config({\r\n            'vs/nls': {\r\n                availableLanguages: {\r\n                    '*': 'de'\r\n                }\r\n            },\r\n            ignoreDuplicateModules: [\"vs/editor/editor.main\"]\r\n        });\r\n    \r\n        //@ts-ignore\r\n        window.require(['vs/editor/editor.main'], function () {\r\n\r\n            new ApiDoc().start(); \r\n    \r\n            // main.loadWorkspace();\r\n    \r\n    \r\n        });\r\n    \r\n    \r\n    \r\n});"],"sourceRoot":""}